!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/static/react/",e(e.s=130)}([function(t,e,i){"use strict";t.exports=i(137)},function(t,e,i){var n=i(77),r="object"==typeof self&&self&&self.Object===Object&&self,o=n||r||Function("return this")();t.exports=o},function(t,e){var i=Array.isArray;t.exports=i},function(t,e,i){"use strict";function n(t){return"[object Array]"===E.call(t)}function r(t){return"[object ArrayBuffer]"===E.call(t)}function o(t){return"undefined"!==typeof FormData&&t instanceof FormData}function s(t){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function a(t){return"string"===typeof t}function h(t){return"number"===typeof t}function l(t){return"undefined"===typeof t}function u(t){return null!==t&&"object"===typeof t}function d(t){return"[object Date]"===E.call(t)}function c(t){return"[object File]"===E.call(t)}function f(t){return"[object Blob]"===E.call(t)}function p(t){return"[object Function]"===E.call(t)}function m(t){return u(t)&&p(t.pipe)}function v(t){return"undefined"!==typeof URLSearchParams&&t instanceof URLSearchParams}function g(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function y(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function b(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),n(t))for(var i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}function _(){function t(t,i){"object"===typeof e[i]&&"object"===typeof t?e[i]=_(e[i],t):e[i]=t}for(var e={},i=0,n=arguments.length;i<n;i++)b(arguments[i],t);return e}function w(){function t(t,i){"object"===typeof e[i]&&"object"===typeof t?e[i]=w(e[i],t):e[i]="object"===typeof t?w({},t):t}for(var e={},i=0,n=arguments.length;i<n;i++)b(arguments[i],t);return e}function x(t,e,i){return b(e,function(e,n){t[n]=i&&"function"===typeof e?S(e,i):e}),t}var S=i(64),k=i(149),E=Object.prototype.toString;t.exports={isArray:n,isArrayBuffer:r,isBuffer:k,isFormData:o,isArrayBufferView:s,isString:a,isNumber:h,isObject:u,isUndefined:l,isDate:d,isFile:c,isBlob:f,isFunction:p,isStream:m,isURLSearchParams:v,isStandardBrowserEnv:y,forEach:b,merge:_,deepMerge:w,extend:x,trim:g}},function(t,e){function i(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=i},function(t,e){function i(t){return null!=t&&"object"==typeof t}t.exports=i},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"===typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";var n=function(t){return t.children};e.a=n},function(t,e,i){function n(t,e){var i=o(t,e);return r(i)?i:void 0}var r=i(172),o=i(177);t.exports=n},function(t,e,i){function n(t){return null==t?void 0===t?h:a:l&&l in Object(t)?o(t):s(t)}var r=i(10),o=i(173),s=i(174),a="[object Null]",h="[object Undefined]",l=r?r.toStringTag:void 0;t.exports=n},function(t,e,i){var n=i(1),r=n.Symbol;t.exports=r},function(t,e){function i(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}t.exports=i},function(t,e,i){function n(t){return"symbol"==typeof t||o(t)&&r(t)==s}var r=i(9),o=i(5),s="[object Symbol]";t.exports=n},function(t,e,i){function n(t,e,i,n){var s=!i;i||(i={});for(var a=-1,h=e.length;++a<h;){var l=e[a],u=n?n(i[l],t[l],l,i,t):void 0;void 0===u&&(u=t[l]),s?o(i,l,u):r(i,l,u)}return i}var r=i(93),o=i(43);t.exports=n},function(t,e){function i(t,e){return t===e||t!==t&&e!==e}t.exports=i},function(t,e,i){var n=i(236),r=i(49),o=i(237),s=i(238),a=i(76),h=i(9),l=i(78),u=l(n),d=l(r),c=l(o),f=l(s),p=l(a),m=h;(n&&"[object DataView]"!=m(new n(new ArrayBuffer(1)))||r&&"[object Map]"!=m(new r)||o&&"[object Promise]"!=m(o.resolve())||s&&"[object Set]"!=m(new s)||a&&"[object WeakMap]"!=m(new a))&&(m=function(t){var e=h(t),i="[object Object]"==e?t.constructor:void 0,n=i?l(i):"";if(n)switch(n){case u:return"[object DataView]";case d:return"[object Map]";case c:return"[object Promise]";case f:return"[object Set]";case p:return"[object WeakMap]"}return e}),t.exports=m},function(t,e,i){function n(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}var r=i(12),o=1/0;t.exports=n},function(t,e,i){t.exports=i(297)()},function(t,e){function i(t){return t}t.exports=i},function(t,e,i){function n(t){if(!o(t))return!1;var e=r(t);return e==a||e==h||e==s||e==l}var r=i(9),o=i(4),s="[object AsyncFunction]",a="[object Function]",h="[object GeneratorFunction]",l="[object Proxy]";t.exports=n},function(t,e,i){function n(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var i=r(t.prototype),n=t.apply(i,e);return o(n)?n:i}}var r=i(21),o=i(4);t.exports=n},function(t,e,i){var n=i(4),r=Object.create,o=function(){function t(){}return function(e){if(!n(e))return{};if(r)return r(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();t.exports=o},function(t,e){function i(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}t.exports=i},function(t,e){function i(t,e){var i=typeof t;return!!(e=null==e?n:e)&&("number"==i||"symbol"!=i&&r.test(t))&&t>-1&&t%1==0&&t<e}var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;t.exports=i},function(t,e,i){function n(t){return s(t)?r(t):o(t)}var r=i(94),o=i(95),s=i(28);t.exports=n},function(t,e,i){var n=i(202),r=i(5),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,h=n(function(){return arguments}())?n:function(t){return r(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=h},function(t,e,i){(function(t){var n=i(1),r=i(203),o="object"==typeof e&&e&&!e.nodeType&&e,s=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===o,h=a?n.Buffer:void 0,l=h?h.isBuffer:void 0,u=l||r;t.exports=u}).call(e,i(44)(t))},function(t,e){function i(t){return function(e){return t(e)}}t.exports=i},function(t,e,i){function n(t){return null!=t&&o(t.length)&&!r(t)}var r=i(19),o=i(46);t.exports=n},function(t,e,i){function n(t){var e=this.__data__=new r(t);this.size=e.size}var r=i(30),o=i(212),s=i(213),a=i(214),h=i(215),l=i(216);n.prototype.clear=o,n.prototype.delete=s,n.prototype.get=a,n.prototype.has=h,n.prototype.set=l,t.exports=n},function(t,e,i){function n(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}var r=i(207),o=i(208),s=i(209),a=i(210),h=i(211);n.prototype.clear=r,n.prototype.delete=o,n.prototype.get=s,n.prototype.has=a,n.prototype.set=h,t.exports=n},function(t,e,i){function n(t,e){for(var i=t.length;i--;)if(r(t[i][0],e))return i;return-1}var r=i(14);t.exports=n},function(t,e,i){var n=i(8),r=n(Object,"create");t.exports=r},function(t,e,i){function n(t,e){var i=t.__data__;return r(e)?i["string"==typeof e?"string":"hash"]:i.map}var r=i(225);t.exports=n},function(t,e,i){function n(t){return s(t)?r(t,!0):o(t)}var r=i(94),o=i(230),s=i(28);t.exports=n},function(t,e,i){"use strict"},function(t,e,i){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,a,h=n(t),l=1;l<arguments.length;l++){i=Object(arguments[l]);for(var u in i)o.call(i,u)&&(h[u]=i[u]);if(r){a=r(i);for(var d=0;d<a.length;d++)s.call(i,a[d])&&(h[a[d]]=i[a[d]])}}return h}},function(t,e,i){function n(t,e,i,n,x,S,k,E){var M=e&v;if(!M&&"function"!=typeof t)throw new TypeError(p);var T=n?n.length:0;if(T||(e&=~(b|_),n=x=void 0),k=void 0===k?k:w(f(k),0),E=void 0===E?E:f(E),T-=x?x.length:0,e&_){var C=n,O=x;n=x=void 0}var P=M?void 0:l(t),A=[t,e,i,n,x,C,O,S,k,E];if(P&&u(A,P),t=A[0],e=A[1],i=A[2],n=A[3],x=A[4],E=A[9]=void 0===A[9]?M?0:t.length:w(A[9]-T,0),!E&&e&(g|y)&&(e&=~(g|y)),e&&e!=m)D=e==g||e==y?s(t,e,E):e!=b&&e!=(m|b)||x.length?a.apply(void 0,A):h(t,e,i,n);else var D=o(t,e,i);return c((P?r:d)(D,A),t,e)}var r=i(74),o=i(178),s=i(179),a=i(79),h=i(197),l=i(83),u=i(198),d=i(85),c=i(87),f=i(91),p="Expected a function",m=1,v=2,g=8,y=16,b=32,_=64,w=Math.max;t.exports=n},function(t,e,i){function n(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=s,this.__views__=[]}var r=i(21),o=i(39),s=4294967295;n.prototype=r(o.prototype),n.prototype.constructor=n,t.exports=n},function(t,e){function i(){}t.exports=i},function(t,e,i){var n=i(189),r=i(86),o=r(n);t.exports=o},function(t,e){function i(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););return t}t.exports=i},function(t,e){function i(t,e){for(var i=-1,r=t.length,o=0,s=[];++i<r;){var a=t[i];a!==e&&a!==n||(t[i]=n,s[o++]=i)}return s}var n="__lodash_placeholder__";t.exports=i},function(t,e,i){function n(t,e,i){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}var r=i(88);t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){var n=i(204),r=i(27),o=i(47),s=o&&o.isTypedArray,a=s?r(s):n;t.exports=a},function(t,e){function i(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}var n=9007199254740991;t.exports=i},function(t,e,i){(function(t){var n=i(77),r="object"==typeof e&&e&&!e.nodeType&&e,o=r&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===r,a=s&&n.process,h=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=h}).call(e,i(44)(t))},function(t,e){function i(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}var n=Object.prototype;t.exports=i},function(t,e,i){var n=i(8),r=i(1),o=n(r,"Map");t.exports=o},function(t,e,i){function n(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}var r=i(217),o=i(224),s=i(226),a=i(227),h=i(228);n.prototype.clear=r,n.prototype.delete=o,n.prototype.get=s,n.prototype.has=a,n.prototype.set=h,t.exports=n},function(t,e,i){var n=i(233),r=i(99),o=Object.prototype,s=o.propertyIsEnumerable,a=Object.getOwnPropertySymbols,h=a?function(t){return null==t?[]:(t=Object(t),n(a(t),function(e){return s.call(t,e)}))}:r;t.exports=h},function(t,e){function i(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}t.exports=i},function(t,e,i){var n=i(96),r=n(Object.getPrototypeOf,Object);t.exports=r},function(t,e,i){function n(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}var r=i(103);t.exports=n},function(t,e,i){function n(t,e,i,s,a){return t===e||(null==t||null==e||!o(t)&&!o(e)?t!==t&&e!==e:r(t,e,i,s,n,a))}var r=i(255),o=i(5);t.exports=n},function(t,e,i){function n(t,e){if(r(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!o(t))||(a.test(t)||!s.test(t)||null!=e&&t in Object(e))}var r=i(2),o=i(12),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=n},function(t,e){function i(t,e){for(var i=-1,n=null==t?0:t.length,r=Array(n);++i<n;)r[i]=e(t[i],i,t);return r}t.exports=i},function(t,e,i){function n(t,e){return s(o(t,e,r),t+"")}var r=i(18),o=i(117),s=i(40);t.exports=n},function(t,e,i){"use strict";function n(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function r(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.filter(function(t){return t}).join(" ")}i.d(e,"a",function(){return p}),i.d(e,"b",function(){return S});var o=i(124);i.d(e,"c",function(){return o.a}),i.d(e,"d",function(){return o.b});var s=i(125),a=i(0),h=i.n(a),l=i(126),u=i(17),d=(i.n(u),i(35),i(60)),c=i(128),f=i(61),p=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n))||this,e.history=Object(l.a)(e.props),e}return Object(s.a)(e,t),e.prototype.render=function(){return h.a.createElement(o.c,{history:this.history,children:this.props.children})},e}(h.a.Component),m=(h.a.Component,function(t,e){return"function"===typeof t?t(e):t}),v=function(t,e){return"string"===typeof t?Object(l.c)(t,null,null,e):t},g=function(t){return t},y=h.a.forwardRef;"undefined"===typeof y&&(y=g);var b=y(function(t,e){var i=t.innerRef,r=t.navigate,o=t.onClick,s=Object(c.a)(t,["innerRef","navigate","onClick"]),a=s.target,l=Object(d.a)({},s,{onClick:function(t){try{o&&o(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||a&&"_self"!==a||n(t)||(t.preventDefault(),r())}});return l.ref=g!==y?e||i:i,h.a.createElement("a",l)}),_=y(function(t,e){var i=t.component,n=void 0===i?b:i,r=t.replace,s=t.to,a=t.innerRef,l=Object(c.a)(t,["component","replace","to","innerRef"]);return h.a.createElement(o.d.Consumer,null,function(t){t||Object(f.a)(!1);var i=t.history,o=v(m(s,t.location),t.location),u=o?i.createHref(o):"",c=Object(d.a)({},l,{href:u,navigate:function(){var e=m(s,t.location);(r?i.replace:i.push)(e)}});return g!==y?c.ref=e||a:c.innerRef=a,h.a.createElement(n,c)})}),w=function(t){return t},x=h.a.forwardRef;"undefined"===typeof x&&(x=w);var S=x(function(t,e){var i=t["aria-current"],n=void 0===i?"page":i,s=t.activeClassName,a=void 0===s?"active":s,l=t.activeStyle,u=t.className,p=t.exact,g=t.isActive,y=t.location,b=t.strict,S=t.style,k=t.to,E=t.innerRef,M=Object(c.a)(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","strict","style","to","innerRef"]);return h.a.createElement(o.d.Consumer,null,function(t){t||Object(f.a)(!1);var i=y||t.location,s=v(m(k,i),i),c=s.pathname,T=c&&c.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),C=T?Object(o.e)(i.pathname,{path:T,exact:p,strict:b}):null,O=!!(g?g(C,i):C),P=O?r(u,a):u,A=O?Object(d.a)({},S,{},l):S,D=Object(d.a)({"aria-current":O&&n||null,className:P,style:A,to:s},M);return w!==x?D.ref=e||E:D.innerRef=E,h.a.createElement(_,D)})})},function(t,e,i){"use strict";function n(){return n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},n.apply(this,arguments)}e.a=n},function(t,e,i){"use strict";function n(t,e){if(!t)throw r?new Error(o):new Error(o+": "+(e||""))}var r=!0,o="Invariant failed";e.a=n},function(t,e,i){"use strict";function n(){}function r(t){try{return t.then}catch(t){return g=t,y}}function o(t,e){try{return t(e)}catch(t){return g=t,y}}function s(t,e,i){try{t(e,i)}catch(t){return g=t,y}}function a(t){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,t!==n&&m(t,this)}function h(t,e,i){return new t.constructor(function(r,o){var s=new a(n);s.then(r,o),l(t,new p(e,i,s))})}function l(t,e){for(;3===t._83;)t=t._18;if(a._47&&a._47(t),0===t._83)return 0===t._75?(t._75=1,void(t._38=e)):1===t._75?(t._75=2,void(t._38=[t._38,e])):void t._38.push(e);u(t,e)}function u(t,e){v(function(){var i=1===t._83?e.onFulfilled:e.onRejected;if(null===i)return void(1===t._83?d(e.promise,t._18):c(e.promise,t._18));var n=o(i,t._18);n===y?c(e.promise,g):d(e.promise,n)})}function d(t,e){if(e===t)return c(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"===typeof e||"function"===typeof e)){var i=r(e);if(i===y)return c(t,g);if(i===t.then&&e instanceof a)return t._83=3,t._18=e,void f(t);if("function"===typeof i)return void m(i.bind(e),t)}t._83=1,t._18=e,f(t)}function c(t,e){t._83=2,t._18=e,a._71&&a._71(t,e),f(t)}function f(t){if(1===t._75&&(l(t,t._38),t._38=null),2===t._75){for(var e=0;e<t._38.length;e++)l(t,t._38[e]);t._38=null}}function p(t,e,i){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.promise=i}function m(t,e){var i=!1,n=s(t,function(t){i||(i=!0,d(e,t))},function(t){i||(i=!0,c(e,t))});i||n!==y||(i=!0,c(e,g))}var v=i(133),g=null,y={};t.exports=a,a._47=null,a._71=null,a._44=n,a.prototype.then=function(t,e){if(this.constructor!==a)return h(this,t,e);var i=new a(n);return l(this,new p(t,e,i)),i}},function(t,e,i){t.exports=i(148)},function(t,e,i){"use strict";t.exports=function(t,e){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return t.apply(e,i)}}},function(t,e,i){"use strict";function n(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var r=i(3);t.exports=function(t,e,i){if(!e)return t;var o;if(i)o=i(e);else if(r.isURLSearchParams(e))o=e.toString();else{var s=[];r.forEach(e,function(t,e){null!==t&&"undefined"!==typeof t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),s.push(n(e)+"="+n(t))}))}),o=s.join("&")}if(o){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},function(t,e,i){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,i){"use strict";(function(e){function n(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var r=i(3),o=i(154),s={"Content-Type":"application/x-www-form-urlencoded"},a={adapter:function(){var t;return"undefined"!==typeof e&&"[object process]"===Object.prototype.toString.call(e)?t=i(69):"undefined"!==typeof XMLHttpRequest&&(t=i(69)),t}(),transformRequest:[function(t,e){return o(e,"Accept"),o(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(n(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(n(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"===typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};a.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],function(t){a.headers[t]={}}),r.forEach(["post","put","patch"],function(t){a.headers[t]=r.merge(s)}),t.exports=a}).call(e,i(68))},function(t,e){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(t){if(u===setTimeout)return setTimeout(t,0);if((u===i||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function o(t){if(d===clearTimeout)return clearTimeout(t);if((d===n||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{return d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}function s(){m&&f&&(m=!1,f.length?p=f.concat(p):v=-1,p.length&&a())}function a(){if(!m){var t=r(s);m=!0;for(var e=p.length;e;){for(f=p,p=[];++v<e;)f&&f[v].run();v=-1,e=p.length}f=null,m=!1,o(t)}}function h(t,e){this.fun=t,this.array=e}function l(){}var u,d,c=t.exports={};!function(){try{u="function"===typeof setTimeout?setTimeout:i}catch(t){u=i}try{d="function"===typeof clearTimeout?clearTimeout:n}catch(t){d=n}}();var f,p=[],m=!1,v=-1;c.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];p.push(new h(t,e)),1!==p.length||m||r(a)},h.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=l,c.addListener=l,c.once=l,c.off=l,c.removeListener=l,c.removeAllListeners=l,c.emit=l,c.prependListener=l,c.prependOnceListener=l,c.listeners=function(t){return[]},c.binding=function(t){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(t){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(t,e,i){"use strict";var n=i(3),r=i(155),o=i(65),s=i(157),a=i(158),h=i(70);t.exports=function(t){return new Promise(function(e,l){var u=t.data,d=t.headers;n.isFormData(u)&&delete d["Content-Type"];var c=new XMLHttpRequest;if(t.auth){var f=t.auth.username||"",p=t.auth.password||"";d.Authorization="Basic "+btoa(f+":"+p)}if(c.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),c.timeout=t.timeout,c.onreadystatechange=function(){if(c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in c?s(c.getAllResponseHeaders()):null,n=t.responseType&&"text"!==t.responseType?c.response:c.responseText,o={data:n,status:c.status,statusText:c.statusText,headers:i,config:t,request:c};r(e,l,o),c=null}},c.onabort=function(){c&&(l(h("Request aborted",t,"ECONNABORTED",c)),c=null)},c.onerror=function(){l(h("Network Error",t,null,c)),c=null},c.ontimeout=function(){l(h("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",c)),c=null},n.isStandardBrowserEnv()){var m=i(159),v=(t.withCredentials||a(t.url))&&t.xsrfCookieName?m.read(t.xsrfCookieName):void 0;v&&(d[t.xsrfHeaderName]=v)}if("setRequestHeader"in c&&n.forEach(d,function(t,e){"undefined"===typeof u&&"content-type"===e.toLowerCase()?delete d[e]:c.setRequestHeader(e,t)}),t.withCredentials&&(c.withCredentials=!0),t.responseType)try{c.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"===typeof t.onDownloadProgress&&c.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){c&&(c.abort(),l(t),c=null)}),void 0===u&&(u=null),c.send(u)})}},function(t,e,i){"use strict";var n=i(156);t.exports=function(t,e,i,r,o){var s=new Error(t);return n(s,e,i,r,o)}},function(t,e,i){"use strict";var n=i(3);t.exports=function(t,e){e=e||{};var i={};return n.forEach(["url","method","params","data"],function(t){"undefined"!==typeof e[t]&&(i[t]=e[t])}),n.forEach(["headers","auth","proxy"],function(r){n.isObject(e[r])?i[r]=n.deepMerge(t[r],e[r]):"undefined"!==typeof e[r]?i[r]=e[r]:n.isObject(t[r])?i[r]=n.deepMerge(t[r]):"undefined"!==typeof t[r]&&(i[r]=t[r])}),n.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(n){"undefined"!==typeof e[n]?i[n]=e[n]:"undefined"!==typeof t[n]&&(i[n]=t[n])}),i}},function(t,e,i){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e){t.exports={}},function(t,e,i){var n=i(18),r=i(75),o=r?function(t,e){return r.set(t,e),t}:n;t.exports=o},function(t,e,i){var n=i(76),r=n&&new n;t.exports=r},function(t,e,i){var n=i(8),r=i(1),o=n(r,"WeakMap");t.exports=o},function(t,e,i){(function(e){var i="object"==typeof e&&e&&e.Object===Object&&e;t.exports=i}).call(e,i(6))},function(t,e){function i(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var n=Function.prototype,r=n.toString;t.exports=i},function(t,e,i){function n(t,e,i,b,_,w,x,S,k,E){function M(){for(var f=arguments.length,p=Array(f),m=f;m--;)p[m]=arguments[m];if(P)var v=l(M),g=s(p,v);if(b&&(p=r(p,b,_,P)),w&&(p=o(p,w,x,P)),f-=g,P&&f<E){var y=d(p,v);return h(t,e,n,M.placeholder,i,p,y,S,k,E-f)}var I=C?i:this,R=O?I[t]:t;return f=p.length,S?p=u(p,S):A&&f>1&&p.reverse(),T&&k<f&&(p.length=k),this&&this!==c&&this instanceof M&&(R=D||a(R)),R.apply(I,p)}var T=e&g,C=e&f,O=e&p,P=e&(m|v),A=e&y,D=O?void 0:a(t);return M}var r=i(80),o=i(81),s=i(180),a=i(20),h=i(82),l=i(90),u=i(196),d=i(42),c=i(1),f=1,p=2,m=8,v=16,g=128,y=512;t.exports=n},function(t,e){function i(t,e,i,r){for(var o=-1,s=t.length,a=i.length,h=-1,l=e.length,u=n(s-a,0),d=Array(l+u),c=!r;++h<l;)d[h]=e[h];for(;++o<a;)(c||o<s)&&(d[i[o]]=t[o]);for(;u--;)d[h++]=t[o++];return d}var n=Math.max;t.exports=i},function(t,e){function i(t,e,i,r){for(var o=-1,s=t.length,a=-1,h=i.length,l=-1,u=e.length,d=n(s-h,0),c=Array(d+u),f=!r;++o<d;)c[o]=t[o];for(var p=o;++l<u;)c[p+l]=e[l];for(;++a<h;)(f||o<s)&&(c[p+i[a]]=t[o++]);return c}var n=Math.max;t.exports=i},function(t,e,i){function n(t,e,i,n,f,p,m,v,g,y){var b=e&u,_=b?m:void 0,w=b?void 0:m,x=b?p:void 0,S=b?void 0:p;e|=b?d:c,(e&=~(b?c:d))&l||(e&=~(a|h));var k=[t,e,f,x,_,S,w,v,g,y],E=i.apply(void 0,k);return r(t)&&o(E,k),E.placeholder=n,s(E,t,e)}var r=i(181),o=i(85),s=i(87),a=1,h=2,l=4,u=8,d=32,c=64;t.exports=n},function(t,e,i){var n=i(75),r=i(182),o=n?function(t){return n.get(t)}:r;t.exports=o},function(t,e,i){function n(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}var r=i(21),o=i(39);n.prototype=r(o.prototype),n.prototype.constructor=n,t.exports=n},function(t,e,i){var n=i(74),r=i(86),o=r(n);t.exports=o},function(t,e){function i(t){var e=0,i=0;return function(){var s=o(),a=r-(s-i);if(i=s,a>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var n=800,r=16,o=Date.now;t.exports=i},function(t,e,i){function n(t,e,i){var n=e+"";return s(t,o(n,a(r(n),i)))}var r=i(187),o=i(188),s=i(40),a=i(191);t.exports=n},function(t,e,i){var n=i(8),r=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=r},function(t,e,i){function n(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}var r=i(192);t.exports=n},function(t,e){function i(t){return t.placeholder}t.exports=i},function(t,e,i){function n(t){var e=r(t),i=e%1;return e===e?i?e-i:e:0}var r=i(199);t.exports=n},function(t,e,i){function n(t,e){return t&&r(e,o(e),t)}var r=i(13),o=i(24);t.exports=n},function(t,e,i){function n(t,e,i){var n=t[e];a.call(t,e)&&o(n,i)&&(void 0!==i||e in t)||r(t,e,i)}var r=i(43),o=i(14),s=Object.prototype,a=s.hasOwnProperty;t.exports=n},function(t,e,i){function n(t,e){var i=s(t),n=!i&&o(t),u=!i&&!n&&a(t),c=!i&&!n&&!u&&l(t),f=i||n||u||c,p=f?r(t.length,String):[],m=p.length;for(var v in t)!e&&!d.call(t,v)||f&&("length"==v||u&&("offset"==v||"parent"==v)||c&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||h(v,m))||p.push(v);return p}var r=i(201),o=i(25),s=i(2),a=i(26),h=i(23),l=i(45),u=Object.prototype,d=u.hasOwnProperty;t.exports=n},function(t,e,i){function n(t){if(!r(t))return o(t);var e=[];for(var i in Object(t))a.call(t,i)&&"constructor"!=i&&e.push(i);return e}var r=i(48),o=i(205),s=Object.prototype,a=s.hasOwnProperty;t.exports=n},function(t,e){function i(t,e){return function(i){return t(e(i))}}t.exports=i},function(t,e,i){function n(t,e,i,I,R,L){var N,F=e&E,z=e&M,B=e&T;if(i&&(N=R?i(t,I,R,L):i(t)),void 0!==N)return N;if(!x(t))return t;var j=b(t);if(j){if(N=v(t),!F)return u(t,N)}else{var U=m(t),H=U==O||U==P;if(_(t))return l(t,F);if(U==A||U==C||H&&!R){if(N=z||H?{}:y(t),!F)return z?c(t,h(N,t)):d(t,a(N,t))}else{if(!D[U])return R?t:{};N=g(t,U,F)}}L||(L=new r);var V=L.get(t);if(V)return V;L.set(t,N),S(t)?t.forEach(function(r){N.add(n(r,e,i,r,t,L))}):w(t)&&t.forEach(function(r,o){N.set(o,n(r,e,i,o,t,L))});var G=B?z?p:f:z?keysIn:k,W=j?void 0:G(t);return o(W||t,function(r,o){W&&(o=r,r=t[o]),s(N,o,n(r,e,i,o,t,L))}),N}var r=i(29),o=i(41),s=i(93),a=i(92),h=i(229),l=i(98),u=i(11),d=i(232),c=i(234),f=i(101),p=i(235),m=i(15),v=i(239),g=i(240),y=i(105),b=i(2),_=i(26),w=i(244),x=i(4),S=i(246),k=i(24),E=1,M=2,T=4,C="[object Arguments]",O="[object Function]",P="[object GeneratorFunction]",A="[object Object]",D={};D[C]=D["[object Array]"]=D["[object ArrayBuffer]"]=D["[object DataView]"]=D["[object Boolean]"]=D["[object Date]"]=D["[object Float32Array]"]=D["[object Float64Array]"]=D["[object Int8Array]"]=D["[object Int16Array]"]=D["[object Int32Array]"]=D["[object Map]"]=D["[object Number]"]=D[A]=D["[object RegExp]"]=D["[object Set]"]=D["[object String]"]=D["[object Symbol]"]=D["[object Uint8Array]"]=D["[object Uint8ClampedArray]"]=D["[object Uint16Array]"]=D["[object Uint32Array]"]=!0,D["[object Error]"]=D[O]=D["[object WeakMap]"]=!1,t.exports=n},function(t,e,i){(function(t){function n(t,e){if(e)return t.slice();var i=t.length,n=l?l(i):new t.constructor(i);return t.copy(n),n}var r=i(1),o="object"==typeof e&&e&&!e.nodeType&&e,s=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===o,h=a?r.Buffer:void 0,l=h?h.allocUnsafe:void 0;t.exports=n}).call(e,i(44)(t))},function(t,e){function i(){return[]}t.exports=i},function(t,e,i){var n=i(52),r=i(53),o=i(51),s=i(99),a=Object.getOwnPropertySymbols,h=a?function(t){for(var e=[];t;)n(e,o(t)),t=r(t);return e}:s;t.exports=h},function(t,e,i){function n(t){return r(t,s,o)}var r=i(102),o=i(51),s=i(24);t.exports=n},function(t,e,i){function n(t,e,i){var n=e(t);return o(t)?n:r(n,i(t))}var r=i(52),o=i(2);t.exports=n},function(t,e,i){var n=i(1),r=n.Uint8Array;t.exports=r},function(t,e,i){function n(t,e){var i=e?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}var r=i(54);t.exports=n},function(t,e,i){function n(t){return"function"!=typeof t.constructor||s(t)?{}:r(o(t))}var r=i(21),o=i(53),s=i(48);t.exports=n},function(t,e,i){function n(t){if(!s(t)||r(t)!=a)return!1;var e=o(t);if(null===e)return!0;var i=d.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&u.call(i)==c}var r=i(9),o=i(53),s=i(5),a="[object Object]",h=Function.prototype,l=Object.prototype,u=h.toString,d=l.hasOwnProperty,c=u.call(Object);t.exports=n},function(t,e,i){function n(t,e,i,n,l,u){var d=i&a,c=t.length,f=e.length;if(c!=f&&!(d&&f>c))return!1;var p=u.get(t);if(p&&u.get(e))return p==e;var m=-1,v=!0,g=i&h?new r:void 0;for(u.set(t,e),u.set(e,t);++m<c;){var y=t[m],b=e[m];if(n)var _=d?n(b,y,m,e,t,u):n(y,b,m,t,e,u);if(void 0!==_){if(_)continue;v=!1;break}if(g){if(!o(e,function(t,e){if(!s(g,e)&&(y===t||l(y,t,i,n,u)))return g.push(e)})){v=!1;break}}else if(y!==b&&!l(y,b,i,n,u)){v=!1;break}}return u.delete(t),u.delete(e),v}var r=i(108),o=i(258),s=i(109),a=1,h=2;t.exports=n},function(t,e,i){function n(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new r;++e<i;)this.add(t[e])}var r=i(50),o=i(256),s=i(257);n.prototype.add=n.prototype.push=o,n.prototype.has=s,t.exports=n},function(t,e){function i(t,e){return t.has(e)}t.exports=i},function(t,e,i){function n(t){return t===t&&!r(t)}var r=i(4);t.exports=n},function(t,e){function i(t,e){return function(i){return null!=i&&(i[t]===e&&(void 0!==e||t in Object(i)))}}t.exports=i},function(t,e,i){function n(t,e){e=r(e,t);for(var i=0,n=e.length;null!=t&&i<n;)t=t[o(e[i++])];return i&&i==n?t:void 0}var r=i(113),o=i(16);t.exports=n},function(t,e,i){function n(t,e){return r(t)?t:o(t,e)?[t]:s(a(t))}var r=i(2),o=i(56),s=i(114),a=i(115);t.exports=n},function(t,e,i){var n=i(266),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=n(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,function(t,i,n,r){e.push(n?r.replace(o,"$1"):i||t)}),e});t.exports=s},function(t,e,i){function n(t){return null==t?"":r(t)}var r=i(268);t.exports=n},function(t,e,i){function n(t,e,i,s,a){var h=-1,l=t.length;for(i||(i=o),a||(a=[]);++h<l;){var u=t[h];e>0&&i(u)?e>1?n(u,e-1,i,s,a):r(a,u):s||(a[a.length]=u)}return a}var r=i(52),o=i(278);t.exports=n},function(t,e,i){function n(t,e,i){return e=o(void 0===e?t.length-1:e,0),function(){for(var n=arguments,s=-1,a=o(n.length-e,0),h=Array(a);++s<a;)h[s]=n[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=n[s];return l[e]=i(h),r(t,this,l)}}var r=i(22),o=Math.max;t.exports=n},function(t,e,i){function n(t,e,i,d,c){t!==e&&s(e,function(s,l){if(c||(c=new r),h(s))a(t,e,l,i,n,d,c);else{var f=d?d(u(t,l),s,l+"",t,e,c):void 0;void 0===f&&(f=s),o(t,l,f)}},l)}var r=i(29),o=i(119),s=i(282),a=i(284),h=i(4),l=i(34),u=i(121);t.exports=n},function(t,e,i){function n(t,e,i){(void 0===i||o(t[e],i))&&(void 0!==i||e in t)||r(t,e,i)}var r=i(43),o=i(14);t.exports=n},function(t,e,i){function n(t){return o(t)&&r(t)}var r=i(28),o=i(5);t.exports=n},function(t,e){function i(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}t.exports=i},function(t,e,i){"use strict";(function(t){function n(){}function r(t,e){return function(){t.apply(e,arguments)}}function o(t){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(t,this)}function s(t,e){for(;3===t._state;)t=t._value;if(0===t._state)return void t._deferreds.push(e);t._handled=!0,ul(function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null===i)return void(1===t._state?a:h)(e.promise,t._value);var n;try{n=i(t._value)}catch(t){return void h(e.promise,t)}a(e.promise,n)})}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===typeof e||"function"===typeof e)){var i=e.then;if(e instanceof o)return t._state=3,t._value=e,void l(t);if("function"===typeof i)return void d(r(i,e),t)}t._state=1,t._value=e,l(t)}catch(e){h(t,e)}}function h(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&ul(function(){t._handled||dl(t._value)});for(var e=0,i=t._deferreds.length;e<i;e++)s(t,t._deferreds[e]);t._deferreds=null}function u(t,e,i){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.promise=i}function d(t,e){var i=!1;try{t(function(t){i||(i=!0,a(e,t))},function(t){i||(i=!0,h(e,t))})}catch(t){if(i)return;i=!0,h(e,t)}}function c(){}function f(t,e){this.x=t||0,this.y=e||0}function p(t,e,i,n,r,o,s,a,h,l){Object.defineProperty(this,"id",{value:vd++}),this.uuid=md.generateUUID(),this.name="",this.image=void 0!==t?t:p.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:p.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:bu,this.wrapT=void 0!==n?n:bu,this.magFilter=void 0!==r?r:ku,this.minFilter=void 0!==o?o:Mu,this.anisotropy=void 0!==h?h:1,this.format=void 0!==s?s:Uu,this.type=void 0!==a?a:Tu,this.offset=new f(0,0),this.repeat=new f(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:sd,this.version=0,this.onUpdate=null}function m(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==n?n:1}function v(t,e,i){this.uuid=md.generateUUID(),this.width=t,this.height=e,this.scissor=new m(0,0,t,e),this.scissorTest=!1,this.viewport=new m(0,0,t,e),i=i||{},void 0===i.minFilter&&(i.minFilter=ku),this.texture=new p(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function g(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==n?n:1}function y(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}function b(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function _(t,e,i,n,r,o,s,a,h,l,u,d){p.call(this,null,o,s,a,h,l,n,r,u,d),this.image={data:t,width:e,height:i},this.magFilter=void 0!==h?h:wu,this.minFilter=void 0!==l?l:wu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function w(t,e,i,n,r,o,s,a,h,l){t=void 0!==t?t:[],e=void 0!==e?e:du,p.call(this,t,e,i,n,r,o,s,a,h,l),this.flipY=!1}function x(){this.seq=[],this.map={}}function S(t,e,i){var n=t[0];if(n<=0||n>0)return t;var r=e*i,o=bd[r];if(void 0===o&&(o=new Float32Array(r),bd[r]=o),0!==e){n.toArray(o,0);for(var s=1,a=0;s!==e;++s)a+=i,t[s].toArray(o,a)}return o}function k(t,e){var i=_d[e];void 0===i&&(i=new Int32Array(e),_d[e]=i);for(var n=0;n!==e;++n)i[n]=t.allocTextureUnit();return i}function E(t,e){t.uniform1f(this.addr,e)}function M(t,e){t.uniform1i(this.addr,e)}function T(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function C(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function O(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function P(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function A(t,e){void 0===e.elements?t.uniformMatrix3fv(this.addr,!1,e):(xd.set(e.elements),t.uniformMatrix3fv(this.addr,!1,xd))}function D(t,e){void 0===e.elements?t.uniformMatrix4fv(this.addr,!1,e):(wd.set(e.elements),t.uniformMatrix4fv(this.addr,!1,wd))}function I(t,e,i){var n=i.allocTextureUnit();t.uniform1i(this.addr,n),i.setTexture2D(e||gd,n)}function R(t,e,i){var n=i.allocTextureUnit();t.uniform1i(this.addr,n),i.setTextureCube(e||yd,n)}function L(t,e){t.uniform2iv(this.addr,e)}function N(t,e){t.uniform3iv(this.addr,e)}function F(t,e){t.uniform4iv(this.addr,e)}function z(t){switch(t){case 5126:return E;case 35664:return T;case 35665:return C;case 35666:return O;case 35674:return P;case 35675:return A;case 35676:return D;case 35678:case 36198:return I;case 35680:return R;case 5124:case 35670:return M;case 35667:case 35671:return L;case 35668:case 35672:return N;case 35669:case 35673:return F}}function B(t,e){t.uniform1fv(this.addr,e)}function j(t,e){t.uniform1iv(this.addr,e)}function U(t,e){t.uniform2fv(this.addr,S(e,this.size,2))}function H(t,e){t.uniform3fv(this.addr,S(e,this.size,3))}function V(t,e){t.uniform4fv(this.addr,S(e,this.size,4))}function G(t,e){t.uniformMatrix2fv(this.addr,!1,S(e,this.size,4))}function W(t,e){t.uniformMatrix3fv(this.addr,!1,S(e,this.size,9))}function Y(t,e){t.uniformMatrix4fv(this.addr,!1,S(e,this.size,16))}function $(t,e,i){var n=e.length,r=k(i,n);t.uniform1iv(this.addr,r);for(var o=0;o!==n;++o)i.setTexture2D(e[o]||gd,r[o])}function q(t,e,i){var n=e.length,r=k(i,n);t.uniform1iv(this.addr,r);for(var o=0;o!==n;++o)i.setTextureCube(e[o]||yd,r[o])}function X(t){switch(t){case 5126:return B;case 35664:return U;case 35665:return H;case 35666:return V;case 35674:return G;case 35675:return W;case 35676:return Y;case 35678:return $;case 35680:return q;case 5124:case 35670:return j;case 35667:case 35671:return L;case 35668:case 35672:return N;case 35669:case 35673:return F}}function Z(t,e,i){this.id=t,this.addr=i,this.setValue=z(e.type)}function K(t,e,i){this.id=t,this.addr=i,this.size=e.size,this.setValue=X(e.type)}function Q(t){this.id=t,x.call(this)}function J(t,e){t.seq.push(e),t.map[e.id]=e}function tt(t,e,i){var n=t.name,r=n.length;for(Sd.lastIndex=0;;){var o=Sd.exec(n),s=Sd.lastIndex,a=o[1],h="]"===o[2],l=o[3];if(h&&(a|=0),void 0===l||"["===l&&s+2===r){J(i,void 0===l?new Z(a,t,e):new K(a,t,e));break}var u=i.map,d=u[a];void 0===d&&(d=new Q(a),J(i,d)),i=d}}function et(t,e,i){var n=this;x.call(this),this.renderer=i;for(var r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),o=0;o<r;++o){var s=t.getActiveUniform(e,o),a=s.name;tt(s,t.getUniformLocation(e,a),n)}}function it(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function nt(t,e){this.min=void 0!==t?t:new f(1/0,1/0),this.max=void 0!==e?e:new f(-1/0,-1/0)}function rt(t,e){function i(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),e=new Uint16Array([0,1,2,0,2,3]);r=c.createBuffer(),o=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,r),c.bufferData(c.ARRAY_BUFFER,t,c.STATIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),c.bufferData(c.ELEMENT_ARRAY_BUFFER,e,c.STATIC_DRAW),u=c.createTexture(),d=c.createTexture(),p.bindTexture(c.TEXTURE_2D,u),c.texImage2D(c.TEXTURE_2D,0,c.RGB,16,16,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),p.bindTexture(c.TEXTURE_2D,d),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,16,16,0,c.RGBA,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),s={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},a=n(s),h={vertex:c.getAttribLocation(a,"position"),uv:c.getAttribLocation(a,"uv")},l={renderType:c.getUniformLocation(a,"renderType"),map:c.getUniformLocation(a,"map"),occlusionMap:c.getUniformLocation(a,"occlusionMap"),opacity:c.getUniformLocation(a,"opacity"),color:c.getUniformLocation(a,"color"),scale:c.getUniformLocation(a,"scale"),rotation:c.getUniformLocation(a,"rotation"),screenPosition:c.getUniformLocation(a,"screenPosition")}}function n(e){var i=c.createProgram(),n=c.createShader(c.FRAGMENT_SHADER),r=c.createShader(c.VERTEX_SHADER),o="precision "+t.getPrecision()+" float;\n";return c.shaderSource(n,o+e.fragmentShader),c.shaderSource(r,o+e.vertexShader),c.compileShader(n),c.compileShader(r),c.attachShader(i,n),c.attachShader(i,r),c.linkProgram(i),i}var r,o,s,a,h,l,u,d,c=t.context,p=t.state;this.render=function(n,s,m){if(0!==e.length){var v=new y,g=m.w/m.z,b=.5*m.z,_=.5*m.w,w=16/m.w,x=new f(w*g,w),S=new y(1,1,0),k=new f(1,1),E=new nt;E.min.set(m.x,m.y),E.max.set(m.x+(m.z-16),m.y+(m.w-16)),void 0===a&&i(),c.useProgram(a),p.initAttributes(),p.enableAttribute(h.vertex),p.enableAttribute(h.uv),p.disableUnusedAttributes(),c.uniform1i(l.occlusionMap,0),c.uniform1i(l.map,1),c.bindBuffer(c.ARRAY_BUFFER,r),c.vertexAttribPointer(h.vertex,2,c.FLOAT,!1,16,0),c.vertexAttribPointer(h.uv,2,c.FLOAT,!1,16,8),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),p.disable(c.CULL_FACE),p.buffers.depth.setMask(!1);for(var M=0,T=e.length;M<T;M++){w=16/m.w,x.set(w*g,w);var C=e[M];if(v.set(C.matrixWorld.elements[12],C.matrixWorld.elements[13],C.matrixWorld.elements[14]),v.applyMatrix4(s.matrixWorldInverse),v.applyMatrix4(s.projectionMatrix),S.copy(v),k.x=m.x+S.x*b+b-8,k.y=m.y+S.y*_+_-8,!0===E.containsPoint(k)){p.activeTexture(c.TEXTURE0),p.bindTexture(c.TEXTURE_2D,null),p.activeTexture(c.TEXTURE1),p.bindTexture(c.TEXTURE_2D,u),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGB,k.x,k.y,16,16,0),c.uniform1i(l.renderType,0),c.uniform2f(l.scale,x.x,x.y),c.uniform3f(l.screenPosition,S.x,S.y,S.z),p.disable(c.BLEND),p.enable(c.DEPTH_TEST),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0),p.activeTexture(c.TEXTURE0),p.bindTexture(c.TEXTURE_2D,d),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGBA,k.x,k.y,16,16,0),c.uniform1i(l.renderType,1),p.disable(c.DEPTH_TEST),p.activeTexture(c.TEXTURE1),p.bindTexture(c.TEXTURE_2D,u),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0),C.positionScreen.copy(S),C.customUpdateCallback?C.customUpdateCallback(C):C.updateLensFlares(),c.uniform1i(l.renderType,2),p.enable(c.BLEND);for(var O=0,P=C.lensFlares.length;O<P;O++){var A=C.lensFlares[O];A.opacity>.001&&A.scale>.001&&(S.x=A.x,S.y=A.y,S.z=A.z,w=A.size*A.scale/m.w,x.x=w*g,x.y=w,c.uniform3f(l.screenPosition,S.x,S.y,S.z),c.uniform2f(l.scale,x.x,x.y),c.uniform1f(l.rotation,A.rotation),c.uniform1f(l.opacity,A.opacity),c.uniform3f(l.color,A.color.r,A.color.g,A.color.b),p.setBlending(A.blending,A.blendEquation,A.blendSrc,A.blendDst),t.setTexture2D(A.texture,1),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0))}}}p.enable(c.CULL_FACE),p.enable(c.DEPTH_TEST),p.buffers.depth.setMask(!0),t.resetGLState()}}}function ot(t,e){function i(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),e=new Uint16Array([0,1,2,0,2,3]);o=d.createBuffer(),s=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,o),d.bufferData(d.ARRAY_BUFFER,t,d.STATIC_DRAW),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,s),d.bufferData(d.ELEMENT_ARRAY_BUFFER,e,d.STATIC_DRAW),a=n(),h={position:d.getAttribLocation(a,"position"),uv:d.getAttribLocation(a,"uv")},l={uvOffset:d.getUniformLocation(a,"uvOffset"),uvScale:d.getUniformLocation(a,"uvScale"),rotation:d.getUniformLocation(a,"rotation"),scale:d.getUniformLocation(a,"scale"),color:d.getUniformLocation(a,"color"),map:d.getUniformLocation(a,"map"),opacity:d.getUniformLocation(a,"opacity"),modelViewMatrix:d.getUniformLocation(a,"modelViewMatrix"),projectionMatrix:d.getUniformLocation(a,"projectionMatrix"),fogType:d.getUniformLocation(a,"fogType"),fogDensity:d.getUniformLocation(a,"fogDensity"),fogNear:d.getUniformLocation(a,"fogNear"),fogFar:d.getUniformLocation(a,"fogFar"),fogColor:d.getUniformLocation(a,"fogColor"),alphaTest:d.getUniformLocation(a,"alphaTest")};var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=8,i.height=8;var r=i.getContext("2d");r.fillStyle="white",r.fillRect(0,0,8,8),u=new p(i),u.needsUpdate=!0}function n(){var e=d.createProgram(),i=d.createShader(d.VERTEX_SHADER),n=d.createShader(d.FRAGMENT_SHADER);return d.shaderSource(i,["precision "+t.getPrecision()+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),d.shaderSource(n,["precision "+t.getPrecision()+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),d.compileShader(i),d.compileShader(n),d.attachShader(e,i),d.attachShader(e,n),d.linkProgram(e),e}function r(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var o,s,a,h,l,u,d=t.context,c=t.state,f=new y,m=new g,v=new y;this.render=function(n,p){if(0!==e.length){void 0===a&&i(),d.useProgram(a),c.initAttributes(),c.enableAttribute(h.position),c.enableAttribute(h.uv),c.disableUnusedAttributes(),c.disable(d.CULL_FACE),c.enable(d.BLEND),d.bindBuffer(d.ARRAY_BUFFER,o),d.vertexAttribPointer(h.position,2,d.FLOAT,!1,16,0),d.vertexAttribPointer(h.uv,2,d.FLOAT,!1,16,8),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,s),d.uniformMatrix4fv(l.projectionMatrix,!1,p.projectionMatrix.elements),c.activeTexture(d.TEXTURE0),d.uniform1i(l.map,0);var g=0,y=0,b=n.fog;b?(d.uniform3f(l.fogColor,b.color.r,b.color.g,b.color.b),b.isFog?(d.uniform1f(l.fogNear,b.near),d.uniform1f(l.fogFar,b.far),d.uniform1i(l.fogType,1),g=1,y=1):b.isFogExp2&&(d.uniform1f(l.fogDensity,b.density),d.uniform1i(l.fogType,2),g=2,y=2)):(d.uniform1i(l.fogType,0),g=0,y=0);for(var _=0,w=e.length;_<w;_++){var x=e[_];x.modelViewMatrix.multiplyMatrices(p.matrixWorldInverse,x.matrixWorld),x.z=-x.modelViewMatrix.elements[14]}e.sort(r);for(var S=[],_=0,w=e.length;_<w;_++){var x=e[_],k=x.material;if(!1!==k.visible){x.onBeforeRender(t,n,p,void 0,k,void 0),d.uniform1f(l.alphaTest,k.alphaTest),d.uniformMatrix4fv(l.modelViewMatrix,!1,x.modelViewMatrix.elements),x.matrixWorld.decompose(f,m,v),S[0]=v.x,S[1]=v.y;var E=0;n.fog&&k.fog&&(E=y),g!==E&&(d.uniform1i(l.fogType,E),g=E),null!==k.map?(d.uniform2f(l.uvOffset,k.map.offset.x,k.map.offset.y),d.uniform2f(l.uvScale,k.map.repeat.x,k.map.repeat.y)):(d.uniform2f(l.uvOffset,0,0),d.uniform2f(l.uvScale,1,1)),d.uniform1f(l.opacity,k.opacity),d.uniform3f(l.color,k.color.r,k.color.g,k.color.b),d.uniform1f(l.rotation,k.rotation),d.uniform2fv(l.scale,S),c.setBlending(k.blending,k.blendEquation,k.blendSrc,k.blendDst,k.blendEquationAlpha,k.blendSrcAlpha,k.blendDstAlpha,k.premultipliedAlpha),c.buffers.depth.setTest(k.depthTest),c.buffers.depth.setMask(k.depthWrite),k.map?t.setTexture2D(k.map,0):t.setTexture2D(u,0),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0),x.onAfterRender(t,n,p,void 0,k,void 0)}}c.enable(d.CULL_FACE),t.resetGLState()}}}function st(){Object.defineProperty(this,"id",{value:Od++}),this.uuid=md.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Cl,this.side=bl,this.shading=Sl,this.vertexColors=kl,this.opacity=1,this.transparent=!1,this.blendSrc=Hl,this.blendDst=Vl,this.blendEquation=Il,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Ql,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.needsUpdate=!0}function at(t){st.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function ht(t){st.call(this),this.type="MeshDepthMaterial",this.depthPacking=fd,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function lt(t,e){this.min=void 0!==t?t:new y(1/0,1/0,1/0),this.max=void 0!==e?e:new y(-1/0,-1/0,-1/0)}function ut(t,e){this.center=void 0!==t?t:new y,this.radius=void 0!==e?e:0}function dt(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function ct(t,e){this.normal=void 0!==t?t:new y(1,0,0),this.constant=void 0!==e?e:0}function ft(t,e,i,n,r,o){this.planes=[void 0!==t?t:new ct,void 0!==e?e:new ct,void 0!==i?i:new ct,void 0!==n?n:new ct,void 0!==r?r:new ct,void 0!==o?o:new ct]}function pt(t,e,i,n){function r(e,i,n,r){var o=e.geometry,s=null,a=S,h=e.customDepthMaterial;if(n&&(a=k,h=e.customDistanceMaterial),h)s=h;else{var l=!1;i.morphTargets&&(o&&o.isBufferGeometry?l=o.morphAttributes&&o.morphAttributes.position&&o.morphAttributes.position.length>0:o&&o.isGeometry&&(l=o.morphTargets&&o.morphTargets.length>0)),e.isSkinnedMesh&&!1===i.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var u=e.isSkinnedMesh&&i.skinning,d=0;l&&(d|=_),u&&(d|=w),s=a[d]}if(t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){var c=s.uuid,f=i.uuid,p=E[c];void 0===p&&(p={},E[c]=p);var m=p[f];void 0===m&&(m=s.clone(),p[f]=m),s=m}s.visible=i.visible,s.wireframe=i.wireframe;var v=i.side;return F.renderSingleSided&&v==wl&&(v=bl),F.renderReverseSided&&(v===bl?v=_l:v===_l&&(v=bl)),s.side=v,s.clipShadows=i.clipShadows,s.clippingPlanes=i.clippingPlanes,s.wireframeLinewidth=i.wireframeLinewidth,s.linewidth=i.linewidth,n&&void 0!==s.uniforms.lightPos&&s.uniforms.lightPos.value.copy(r),s}function o(e,n,s,a){if(!1!==e.visible){if(e.layers.test(n.layers)&&(e.isMesh||e.isLine||e.isPoints)&&e.castShadow&&(!e.frustumCulled||h.intersectsObject(e))){e.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,e.matrixWorld);var l=i.update(e),u=e.material;if(Array.isArray(u))for(var d=l.groups,c=0,f=d.length;c<f;c++){var p=d[c],m=u[p.materialIndex];if(m&&m.visible){var v=r(e,m,a,g);t.renderBufferDirect(s,null,l,v,e,p)}}else if(u.visible){var v=r(e,u,a,g);t.renderBufferDirect(s,null,l,v,e,null)}}for(var y=e.children,b=0,_=y.length;b<_;b++)o(y[b],n,s,a)}}var s=t.context,a=t.state,h=new ft,l=new b,u=e.shadows,d=new f,c=new f(n.maxTextureSize,n.maxTextureSize),p=new y,g=new y,_=1,w=2,x=1+(_|w),S=new Array(x),k=new Array(x),E={},M=[new y(1,0,0),new y(-1,0,0),new y(0,0,1),new y(0,0,-1),new y(0,1,0),new y(0,-1,0)],T=[new y(0,1,0),new y(0,1,0),new y(0,1,0),new y(0,1,0),new y(0,0,1),new y(0,0,-1)],C=[new m,new m,new m,new m,new m,new m],O=new ht;O.depthPacking=pd,O.clipping=!0;for(var P=Cd.distanceRGBA,A=Md.clone(P.uniforms),D=0;D!==x;++D){var I=0!==(D&_),R=0!==(D&w),L=O.clone();L.morphTargets=I,L.skinning=R,S[D]=L;var N=new at({defines:{USE_SHADOWMAP:""},uniforms:A,vertexShader:P.vertexShader,fragmentShader:P.fragmentShader,morphTargets:I,skinning:R,clipping:!0});k[D]=N}var F=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=gl,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(e,i){if(!1!==F.enabled&&(!1!==F.autoUpdate||!1!==F.needsUpdate)&&0!==u.length){a.disable(s.BLEND),a.buffers.color.setClear(1,1,1,1),a.buffers.depth.setTest(!0),a.setScissorTest(!1);for(var n,r=0,f=u.length;r<f;r++){var m=u[r],y=m.shadow,b=m&&m.isPointLight;if(void 0!==y){var _=y.camera;if(d.copy(y.mapSize),d.min(c),b){var w=d.x,x=d.y;C[0].set(2*w,x,w,x),C[1].set(0,x,w,x),C[2].set(3*w,x,w,x),C[3].set(w,x,w,x),C[4].set(3*w,0,w,x),C[5].set(w,0,w,x),d.x*=4,d.y*=2}if(null===y.map){var S={minFilter:wu,magFilter:wu,format:Uu};y.map=new v(d.x,d.y,S),y.map.texture.name=m.name+".shadowMap",_.updateProjectionMatrix()}y.isSpotLightShadow&&y.update(m);var k=y.map,E=y.matrix;g.setFromMatrixPosition(m.matrixWorld),_.position.copy(g),b?(n=6,E.makeTranslation(-g.x,-g.y,-g.z)):(n=1,p.setFromMatrixPosition(m.target.matrixWorld),_.lookAt(p),_.updateMatrixWorld(),E.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),E.multiply(_.projectionMatrix),E.multiply(_.matrixWorldInverse)),t.setRenderTarget(k),t.clear();for(var O=0;O<n;O++){if(b){p.copy(_.position),p.add(M[O]),_.up.copy(T[O]),_.lookAt(p),_.updateMatrixWorld();var P=C[O];a.viewport(P)}l.multiplyMatrices(_.projectionMatrix,_.matrixWorldInverse),h.setFromMatrix(l),o(e,i,_,b)}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}var A=t.getClearColor(),D=t.getClearAlpha();t.setClearColor(A,D),F.needsUpdate=!1}}}function mt(t){function e(e,i){var n=e.array,r=e.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW,o=t.createBuffer();t.bindBuffer(i,o),t.bufferData(i,n,r),e.onUploadCallback();var s=t.FLOAT;return n instanceof Float32Array?s=t.FLOAT:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?s=t.UNSIGNED_SHORT:n instanceof Int16Array?s=t.SHORT:n instanceof Uint32Array?s=t.UNSIGNED_INT:n instanceof Int32Array?s=t.INT:n instanceof Int8Array?s=t.BYTE:n instanceof Uint8Array&&(s=t.UNSIGNED_BYTE),{buffer:o,type:s,bytesPerElement:n.BYTES_PER_ELEMENT,version:e.version}}function i(e,i,n){var r=i.array,o=i.updateRange;t.bindBuffer(n,e),!1===i.dynamic?t.bufferData(n,r,t.STATIC_DRAW):-1===o.count?t.bufferSubData(n,0,r):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(n,o.offset*r.BYTES_PER_ELEMENT,r.subarray(o.offset,o.offset+o.count)),o.count=-1)}function n(t){return t.isInterleavedBufferAttribute&&(t=t.data),s[t.uuid]}function r(e){e.isInterleavedBufferAttribute&&(e=e.data);var i=s[e.uuid];i&&(t.deleteBuffer(i.buffer),delete s[e.uuid])}function o(t,n){t.isInterleavedBufferAttribute&&(t=t.data);var r=s[t.uuid];void 0===r?s[t.uuid]=e(t,n):r.version<t.version&&(i(r.buffer,t,n),r.version=t.version)}var s={};return{get:n,remove:r,update:o}}function vt(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._order=n||vt.DefaultOrder}function gt(){this.mask=1}function yt(){function t(){r.setFromEuler(n,!1)}function e(){n.setFromQuaternion(r,void 0,!1)}Object.defineProperty(this,"id",{value:Pd++}),this.uuid=md.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=yt.DefaultUp.clone();var i=new y,n=new vt,r=new g,o=new y(1,1,1);n.onChange(t),r.onChange(e),Object.defineProperties(this,{position:{enumerable:!0,value:i},rotation:{enumerable:!0,value:n},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:o},modelViewMatrix:{value:new b},normalMatrix:{value:new dt}}),this.matrix=new b,this.matrixWorld=new b,this.matrixAutoUpdate=yt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new gt,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function bt(){yt.call(this),this.type="Camera",this.matrixWorldInverse=new b,this.projectionMatrix=new b}function _t(t,e,i,n,r,o){bt.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function wt(t,e,i,n){bt.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function xt(t,e,i,n,r,o){this.a=t,this.b=e,this.c=i,this.normal=n&&n.isVector3?n:new y,this.vertexNormals=Array.isArray(n)?n:[],this.color=r&&r.isColor?r:new it,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}function St(){return Ad++}function kt(){Object.defineProperty(this,"id",{value:St()}),this.uuid=md.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Et(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=md.generateUUID(),this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Mt(t,e){Et.call(this,new Uint16Array(t),e)}function Tt(t,e){Et.call(this,new Uint32Array(t),e)}function Ct(t,e){Et.call(this,new Float32Array(t),e)}function Ot(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Pt(t){if(0===t.length)return-1/0;for(var e=t[0],i=1,n=t.length;i<n;++i)t[i]>e&&(e=t[i]);return e}function At(){Object.defineProperty(this,"id",{value:St()}),this.uuid=md.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Dt(t,e,i,n,r,o){kt.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new It(t,e,i,n,r,o)),this.mergeVertices()}function It(t,e,i,n,r,o){function s(t,e,i,n,r,o,s,p,m,v,g){var b,_,w=o/m,x=s/v,S=o/2,k=s/2,E=p/2,M=m+1,T=v+1,C=0,O=0,P=new y;for(_=0;_<T;_++){var A=_*x-k;for(b=0;b<M;b++){var D=b*w-S;P[t]=D*n,P[e]=A*r,P[i]=E,l.push(P.x,P.y,P.z),P[t]=0,P[e]=0,P[i]=p>0?1:-1,u.push(P.x,P.y,P.z),d.push(b/m),d.push(1-_/v),C+=1}}for(_=0;_<v;_++)for(b=0;b<m;b++){var I=c+b+M*_,R=c+b+M*(_+1),L=c+(b+1)+M*(_+1),N=c+(b+1)+M*_;h.push(I,R,N),h.push(R,L,N),O+=6}a.addGroup(f,O,g),f+=O,c+=C}At.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:o};var a=this;n=Math.floor(n)||1,r=Math.floor(r)||1,o=Math.floor(o)||1;var h=[],l=[],u=[],d=[],c=0,f=0;s("z","y","x",-1,-1,i,e,t,o,r,0),s("z","y","x",1,-1,i,e,-t,o,r,1),s("x","z","y",1,1,t,i,e,n,o,2),s("x","z","y",1,-1,t,i,-e,n,o,3),s("x","y","z",1,-1,t,e,i,n,r,4),s("x","y","z",-1,-1,t,e,-i,n,r,5),this.setIndex(h),this.addAttribute("position",new Ct(l,3)),this.addAttribute("normal",new Ct(u,3)),this.addAttribute("uv",new Ct(d,2))}function Rt(t,e,i,n){kt.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new Lt(t,e,i,n)),this.mergeVertices()}function Lt(t,e,i,n){At.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};var r,o,s=t/2,a=e/2,h=Math.floor(i)||1,l=Math.floor(n)||1,u=h+1,d=l+1,c=t/h,f=e/l,p=[],m=[],v=[],g=[];for(o=0;o<d;o++){var y=o*f-a;for(r=0;r<u;r++){var b=r*c-s;m.push(b,-y,0),v.push(0,0,1),g.push(r/h),g.push(1-o/l)}}for(o=0;o<l;o++)for(r=0;r<h;r++){var _=r+u*o,w=r+u*(o+1),x=r+1+u*(o+1),S=r+1+u*o;p.push(_,w,S),p.push(w,x,S)}this.setIndex(p),this.addAttribute("position",new Ct(m,3)),this.addAttribute("normal",new Ct(v,3)),this.addAttribute("uv",new Ct(g,2))}function Nt(t){st.call(this),this.type="MeshBasicMaterial",this.color=new it(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=nu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function Ft(t,e){this.origin=void 0!==t?t:new y,this.direction=void 0!==e?e:new y}function zt(t,e){this.start=void 0!==t?t:new y,this.end=void 0!==e?e:new y}function Bt(t,e,i){this.a=void 0!==t?t:new y,this.b=void 0!==e?e:new y,this.c=void 0!==i?i:new y}function jt(t,e){yt.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new At,this.material=void 0!==e?e:new Nt({color:16777215*Math.random()}),this.drawMode=nd,this.updateMorphTargets()}function Ut(t,e,i,n){function r(e,n,r){var c=e.background;null===c?o(u,d):c&&c.isColor&&(o(c,1),r=!0),(t.autoClear||r)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),c&&c.isCubeTexture?(void 0===h&&(h=new wt,l=new jt(new It(5,5,5),new at({uniforms:Cd.cube.uniforms,vertexShader:Cd.cube.vertexShader,fragmentShader:Cd.cube.fragmentShader,side:_l,depthTest:!1,depthWrite:!1,fog:!1}))),h.projectionMatrix.copy(n.projectionMatrix),h.matrixWorld.extractRotation(n.matrixWorld),h.matrixWorldInverse.getInverse(h.matrixWorld),l.material.uniforms.tCube.value=c,l.modelViewMatrix.multiplyMatrices(h.matrixWorldInverse,l.matrixWorld),i.update(l),t.renderBufferDirect(h,null,l.geometry,l.material,l,null)):c&&c.isTexture&&(void 0===s&&(s=new _t(-1,1,1,-1,0,1),a=new jt(new Lt(2,2),new Nt({depthTest:!1,depthWrite:!1,fog:!1}))),a.material.map=c,i.update(a),t.renderBufferDirect(s,null,a.geometry,a.material,a,null))}function o(t,i){e.buffers.color.setClear(t.r,t.g,t.b,i,n)}var s,a,h,l,u=new it(0),d=0;return{getClearColor:function(){return u},setClearColor:function(t,e){u.set(t),d=void 0!==e?e:1,o(u,d)},getClearAlpha:function(){return d},setClearAlpha:function(t){d=t,o(u,d)},render:r}}function Ht(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program&&e.program&&t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Vt(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Gt(){function t(){o=-1,a=-1}function e(t,e,i,n,h){var l,u;i.transparent?(l=s,u=++a):(l=r,u=++o);var d=l[u];d?(d.id=t.id,d.object=t,d.geometry=e,d.material=i,d.program=i.program,d.renderOrder=t.renderOrder,d.z=n,d.group=h):(d={id:t.id,object:t,geometry:e,material:i,program:i.program,renderOrder:t.renderOrder,z:n,group:h},l.push(d))}function i(){r.length=o+1,s.length=a+1}function n(){r.sort(Ht),s.sort(Vt)}var r=[],o=-1,s=[],a=-1;return{opaque:r,transparent:s,init:t,push:e,finish:i,sort:n}}function Wt(){function t(t,e){var n=t.id+","+e.id,r=i[n];return void 0===r&&(r=new Gt,i[n]=r),r}function e(){i={}}var i={};return{get:t,dispose:e}}function Yt(t,e,i){function n(t){a=t}function r(t){h=t.type,l=t.bytesPerElement}function o(e,n){t.drawElements(a,n,h,e*l),i.calls++,i.vertices+=n,a===t.TRIANGLES&&(i.faces+=n/3)}function s(n,r,o){var s=e.get("ANGLE_instanced_arrays");if(null===s)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");s.drawElementsInstancedANGLE(a,o,h,r*l,n.maxInstancedCount),i.calls++,i.vertices+=o*n.maxInstancedCount,a===t.TRIANGLES&&(i.faces+=n.maxInstancedCount*o/3)}var a,h,l;this.setMode=n,this.setIndex=r,this.render=o,this.renderInstances=s}function $t(t,e,i){function n(t){s=t}function r(e,n){t.drawArrays(s,e,n),i.calls++,i.vertices+=n,s===t.TRIANGLES&&(i.faces+=n/3)}function o(n,r,o){var a=e.get("ANGLE_instanced_arrays");if(null===a)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var h=n.attributes.position;h.isInterleavedBufferAttribute?(o=h.data.count,a.drawArraysInstancedANGLE(s,0,o,n.maxInstancedCount)):a.drawArraysInstancedANGLE(s,r,o,n.maxInstancedCount),i.calls++,i.vertices+=o*n.maxInstancedCount,s===t.TRIANGLES&&(i.faces+=n.maxInstancedCount*o/3)}var s;this.setMode=n,this.render=r,this.renderInstances=o}function qt(t,e,i){function n(t){var r=t.target,o=a[r.id];null!==o.index&&e.remove(o.index);for(var s in o.attributes)e.remove(o.attributes[s]);r.removeEventListener("dispose",n),delete a[r.id];var l=h[r.id];l&&(e.remove(l),delete h[r.id]),l=h[o.id],l&&(e.remove(l),delete h[o.id]),i.geometries--}function r(t,e){var r=a[e.id];return r||(e.addEventListener("dispose",n),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new At).setFromObject(t)),r=e._bufferGeometry),a[e.id]=r,i.geometries++,r)}function o(i){var n=i.index,r=i.attributes;null!==n&&e.update(n,t.ELEMENT_ARRAY_BUFFER);for(var o in r)e.update(r[o],t.ARRAY_BUFFER);var s=i.morphAttributes;for(var o in s)for(var a=s[o],h=0,l=a.length;h<l;h++)e.update(a[h],t.ARRAY_BUFFER)}function s(i){var n=h[i.id];if(n)return n;var r=[],o=i.index,s=i.attributes;if(null!==o)for(var a=o.array,l=0,u=a.length;l<u;l+=3){var d=a[l+0],c=a[l+1],f=a[l+2];r.push(d,c,c,f,f,d)}else for(var a=s.position.array,l=0,u=a.length/3-1;l<u;l+=3){var d=l+0,c=l+1,f=l+2;r.push(d,c,c,f,f,d)}return n=new(Pt(r)>65535?Tt:Mt)(r,1),e.update(n,t.ELEMENT_ARRAY_BUFFER),h[i.id]=n,n}var a={},h={};return{get:r,update:o,getWireframeAttribute:s}}function Xt(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var i;switch(e.type){case"DirectionalLight":i={direction:new y,color:new it,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new f};break;case"SpotLight":i={position:new y,direction:new y,color:new it,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new f};break;case"PointLight":i={position:new y,color:new it,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new f};break;case"HemisphereLight":i={direction:new y,skyColor:new it,groundColor:new it};break;case"RectAreaLight":i={color:new it,position:new y,halfWidth:new y,halfHeight:new y}}return t[e.id]=i,i}}}function Zt(t,e,i){function n(t){var n=i.frame,r=t.geometry,s=e.get(t,r);return o[s.id]!==n&&(r.isGeometry&&s.updateFromObject(t),e.update(s),o[s.id]=n),s}function r(){o={}}var o={};return{update:n,clear:r}}function Kt(t){for(var e=t.split("\n"),i=0;i<e.length;i++)e[i]=i+1+": "+e[i];return e.join("\n")}function Qt(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),!1===t.getShaderParameter(n,t.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(n)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(n),Kt(i)),n}function Jt(t){switch(t){case sd:return["Linear","( value )"];case ad:return["sRGB","( value )"];case ld:return["RGBE","( value )"];case ud:return["RGBM","( value, 7.0 )"];case dd:return["RGBM","( value, 16.0 )"];case cd:return["RGBD","( value, 256.0 )"];case hd:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function te(t,e){var i=Jt(e);return"vec4 "+t+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function ee(t,e){var i=Jt(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function ie(t,e){var i;switch(e){case au:i="Linear";break;case hu:i="Reinhard";break;case lu:i="Uncharted2";break;case uu:i="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function ne(t,e,i){return t=t||{},[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(se).join("\n")}function re(t){var e=[];for(var i in t){var n=t[i];!1!==n&&e.push("#define "+i+" "+n)}return e.join("\n")}function oe(t,e,i){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),o=0;o<r;o++){var s=t.getActiveAttrib(e,o),a=s.name;n[a]=t.getAttribLocation(e,a)}return n}function se(t){return""!==t}function ae(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function he(t){function e(t,e){var i=Td[e];if(void 0===i)throw new Error("Can not resolve #include <"+e+">");return he(i)}var i=/^[ \t]*#include +<([\w\d.]+)>/gm;return t.replace(i,e)}function le(t){function e(t,e,i,n){for(var r="",o=parseInt(e);o<parseInt(i);o++)r+=n.replace(/\[ i \]/g,"[ "+o+" ]");return r}var i=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(i,e)}function ue(t,e,i,n,r){var o=t.context,s=i.extensions,a=i.defines,h=n.vertexShader,l=n.fragmentShader,u="SHADOWMAP_TYPE_BASIC";r.shadowMapType===gl?u="SHADOWMAP_TYPE_PCF":r.shadowMapType===yl&&(u="SHADOWMAP_TYPE_PCF_SOFT");var d="ENVMAP_TYPE_CUBE",c="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(r.envMap){switch(i.envMap.mapping){case du:case cu:d="ENVMAP_TYPE_CUBE";break;case vu:case gu:d="ENVMAP_TYPE_CUBE_UV";break;case fu:case pu:d="ENVMAP_TYPE_EQUIREC";break;case mu:d="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case cu:case pu:c="ENVMAP_MODE_REFRACTION"}switch(i.combine){case nu:f="ENVMAP_BLENDING_MULTIPLY";break;case ru:f="ENVMAP_BLENDING_MIX";break;case ou:f="ENVMAP_BLENDING_ADD"}}var p,m,v=t.gammaFactor>0?t.gammaFactor:1,g=ne(s,r,t.extensions),y=re(a),b=o.createProgram();i.isRawShaderMaterial?(p=[y,"\n"].filter(se).join("\n"),m=[g,y,"\n"].filter(se).join("\n")):(p=["precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+n.name,y,r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+c:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+u:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(se).join("\n"),m=[g,"precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+n.name,y,r.alphaTest?"#define ALPHATEST "+r.alphaTest:"","#define GAMMA_FACTOR "+v,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+d:"",r.envMap?"#define "+c:"",r.envMap?"#define "+f:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(r.numClippingPlanes-r.numClipIntersection),r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+u:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",r.envMap&&t.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",r.toneMapping!==su?"#define TONE_MAPPING":"",r.toneMapping!==su?Td.tonemapping_pars_fragment:"",r.toneMapping!==su?ie("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.outputEncoding||r.mapEncoding||r.envMapEncoding||r.emissiveMapEncoding?Td.encodings_pars_fragment:"",r.mapEncoding?te("mapTexelToLinear",r.mapEncoding):"",r.envMapEncoding?te("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?te("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.outputEncoding?ee("linearToOutputTexel",r.outputEncoding):"",r.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(se).join("\n")),h=he(h),h=ae(h,r),l=he(l),l=ae(l,r),i.isShaderMaterial||(h=le(h),l=le(l));var _=p+h,w=m+l,x=Qt(o,o.VERTEX_SHADER,_),S=Qt(o,o.FRAGMENT_SHADER,w);o.attachShader(b,x),o.attachShader(b,S),void 0!==i.index0AttributeName?o.bindAttribLocation(b,0,i.index0AttributeName):!0===r.morphTargets&&o.bindAttribLocation(b,0,"position"),o.linkProgram(b);var k=o.getProgramInfoLog(b),E=o.getShaderInfoLog(x),M=o.getShaderInfoLog(S),T=!0,C=!0;!1===o.getProgramParameter(b,o.LINK_STATUS)?(T=!1,console.error("THREE.WebGLProgram: shader error: ",o.getError(),"gl.VALIDATE_STATUS",o.getProgramParameter(b,o.VALIDATE_STATUS),"gl.getProgramInfoLog",k,E,M)):""!==k?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",k):""!==E&&""!==M||(C=!1),C&&(this.diagnostics={runnable:T,material:i,programLog:k,vertexShader:{log:E,prefix:p},fragmentShader:{log:M,prefix:m}}),o.deleteShader(x),o.deleteShader(S);var O;this.getUniforms=function(){return void 0===O&&(O=new et(o,b,t)),O};var P;return this.getAttributes=function(){return void 0===P&&(P=oe(o,b)),P},this.destroy=function(){o.deleteProgram(b),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Dd++,this.code=e,this.usedTimes=1,this.program=b,this.vertexShader=x,this.fragmentShader=S,this}function de(t,e){function i(t){var i=t.skeleton,n=i.bones;if(e.floatVertexTextures)return 1024;var r=e.maxVertexUniforms,o=Math.floor((r-20)/4),s=Math.min(o,n.length);return s<n.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+n.length+" bones. This GPU supports "+s+"."),0):s}function n(t,e){var i;return t?t.isTexture?i=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),i=t.texture.encoding):i=sd,i===sd&&e&&(i=hd),i}var r=[],o={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},s=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(r,s,a,h,l,u){var d=o[r.type],c=u.isSkinnedMesh?i(u):0,f=t.getPrecision();null!==r.precision&&(f=e.getMaxPrecision(r.precision))!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",f,"instead.");var p=t.getRenderTarget();return{shaderID:d,precision:f,supportsVertexTextures:e.vertexTextures,outputEncoding:n(p?p.texture:null,t.gammaOutput),map:!!r.map,mapEncoding:n(r.map,t.gammaInput),envMap:!!r.envMap,envMapMode:r.envMap&&r.envMap.mapping,envMapEncoding:n(r.envMap,t.gammaInput),envMapCubeUV:!!r.envMap&&(r.envMap.mapping===vu||r.envMap.mapping===gu),lightMap:!!r.lightMap,aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:n(r.emissiveMap,t.gammaInput),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,combine:r.combine,vertexColors:r.vertexColors,fog:!!a,useFog:r.fog,fogExp:a&&a.isFogExp2,flatShading:r.shading===xl,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:e.logarithmicDepthBuffer,skinning:r.skinning&&c>0,maxBones:c,useVertexTexture:e.floatVertexTextures,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numClippingPlanes:h,numClipIntersection:l,dithering:r.dithering,shadowMapEnabled:t.shadowMap.enabled&&u.receiveShadow&&s.shadows.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===wl,flipSided:r.side===_l,depthPacking:void 0!==r.depthPacking&&r.depthPacking}},this.getProgramCode=function(e,i){var n=[];if(i.shaderID?n.push(i.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);for(var o=0;o<s.length;o++)n.push(i[s[o]]);return n.push(e.onBeforeCompile.toString()),n.push(t.gammaOutput),n.join()},this.acquireProgram=function(e,i,n,o){for(var s,a=0,h=r.length;a<h;a++){var l=r[a];if(l.code===o){s=l,++s.usedTimes;break}}return void 0===s&&(s=new ue(t,o,e,i,n),r.push(s)),s},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}function ce(t,e,i,n,r,o,s){function a(t,e){if(t.width>e||t.height>e){var i=e/Math.max(t.width,t.height),n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=Math.floor(t.width*i),n.height=Math.floor(t.height*i);return n.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+n.width+"x"+n.height,t),n}return t}function h(t){return md.isPowerOfTwo(t.width)&&md.isPowerOfTwo(t.height)}function l(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement){var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");e.width=md.nearestPowerOfTwo(t.width),e.height=md.nearestPowerOfTwo(t.height);return e.getContext("2d").drawImage(t,0,0,e.width,e.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+e.width+"x"+e.height,t),e}return t}function u(t){return t.wrapS!==bu||t.wrapT!==bu||t.minFilter!==wu&&t.minFilter!==ku}function d(t,e){return t.generateMipmaps&&e&&t.minFilter!==wu&&t.minFilter!==ku}function c(e){return e===wu||e===xu||e===Su?t.NEAREST:t.LINEAR}function f(t){var e=t.target;e.removeEventListener("dispose",f),m(e),s.textures--}function p(t){var e=t.target;e.removeEventListener("dispose",p),v(e),s.textures--}function m(e){var i=n.get(e);if(e.image&&i.__image__webglTextureCube)t.deleteTexture(i.__image__webglTextureCube);else{if(void 0===i.__webglInit)return;t.deleteTexture(i.__webglTexture)}n.remove(e)}function v(e){var i=n.get(e),r=n.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var o=0;o<6;o++)t.deleteFramebuffer(i.__webglFramebuffer[o]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[o]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer);n.remove(e.texture),n.remove(e)}}function g(e,r){var o=n.get(e);if(e.version>0&&o.__version!==e.version){var s=e.image;if(void 0===s)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);else{if(!1!==s.complete)return void w(o,e,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e)}}i.activeTexture(t.TEXTURE0+r),i.bindTexture(t.TEXTURE_2D,o.__webglTexture)}function y(e,l){var u=n.get(e);if(6===e.image.length)if(e.version>0&&u.__version!==e.version){u.__image__webglTextureCube||(e.addEventListener("dispose",f),u.__image__webglTextureCube=t.createTexture(),s.textures++),i.activeTexture(t.TEXTURE0+l),i.bindTexture(t.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var c=e&&e.isCompressedTexture,p=e.image[0]&&e.image[0].isDataTexture,m=[],v=0;v<6;v++)m[v]=c||p?p?e.image[v].image:e.image[v]:a(e.image[v],r.maxCubemapSize);var g=m[0],y=h(g),b=o(e.format),w=o(e.type);_(t.TEXTURE_CUBE_MAP,e,y);for(var v=0;v<6;v++)if(c)for(var x,S=m[v].mipmaps,k=0,E=S.length;k<E;k++)x=S[k],e.format!==Uu&&e.format!==ju?i.getCompressedTextureFormats().indexOf(b)>-1?i.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,k,b,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,k,b,x.width,x.height,0,b,w,x.data);else p?i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,m[v].width,m[v].height,0,b,w,m[v].data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,b,w,m[v]);d(e,y)&&t.generateMipmap(t.TEXTURE_CUBE_MAP),u.__version=e.version,e.onUpdate&&e.onUpdate(e)}else i.activeTexture(t.TEXTURE0+l),i.bindTexture(t.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)}function b(e,r){i.activeTexture(t.TEXTURE0+r),i.bindTexture(t.TEXTURE_CUBE_MAP,n.get(e).__webglTexture)}function _(i,s,a){var h;if(a?(t.texParameteri(i,t.TEXTURE_WRAP_S,o(s.wrapS)),t.texParameteri(i,t.TEXTURE_WRAP_T,o(s.wrapT)),t.texParameteri(i,t.TEXTURE_MAG_FILTER,o(s.magFilter)),t.texParameteri(i,t.TEXTURE_MIN_FILTER,o(s.minFilter))):(t.texParameteri(i,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(i,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),s.wrapS===bu&&s.wrapT===bu||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",s),t.texParameteri(i,t.TEXTURE_MAG_FILTER,c(s.magFilter)),t.texParameteri(i,t.TEXTURE_MIN_FILTER,c(s.minFilter)),s.minFilter!==wu&&s.minFilter!==ku&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",s)),h=e.get("EXT_texture_filter_anisotropic")){if(s.type===Iu&&null===e.get("OES_texture_float_linear"))return;if(s.type===Ru&&null===e.get("OES_texture_half_float_linear"))return;(s.anisotropy>1||n.get(s).__currentAnisotropy)&&(t.texParameterf(i,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),n.get(s).__currentAnisotropy=s.anisotropy)}}function w(e,n,c){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",f),e.__webglTexture=t.createTexture(),s.textures++),i.activeTexture(t.TEXTURE0+c),i.bindTexture(t.TEXTURE_2D,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,n.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,n.unpackAlignment);var p=a(n.image,r.maxTextureSize);u(n)&&!1===h(p)&&(p=l(p));var m=h(p),v=o(n.format),g=o(n.type);_(t.TEXTURE_2D,n,m);var y,b=n.mipmaps;if(n.isDepthTexture){var w=t.DEPTH_COMPONENT;if(n.type===Iu){if(!C)throw new Error("Float Depth Texture only supported in WebGL2.0");w=t.DEPTH_COMPONENT32F}else C&&(w=t.DEPTH_COMPONENT16);n.format===Gu&&w===t.DEPTH_COMPONENT&&n.type!==Pu&&n.type!==Du&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=Pu,g=o(n.type)),n.format===Wu&&(w=t.DEPTH_STENCIL,n.type!==zu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=zu,g=o(n.type))),i.texImage2D(t.TEXTURE_2D,0,w,p.width,p.height,0,v,g,null)}else if(n.isDataTexture)if(b.length>0&&m){for(var x=0,S=b.length;x<S;x++)y=b[x],i.texImage2D(t.TEXTURE_2D,x,v,y.width,y.height,0,v,g,y.data);n.generateMipmaps=!1}else i.texImage2D(t.TEXTURE_2D,0,v,p.width,p.height,0,v,g,p.data);else if(n.isCompressedTexture)for(var x=0,S=b.length;x<S;x++)y=b[x],n.format!==Uu&&n.format!==ju?i.getCompressedTextureFormats().indexOf(v)>-1?i.compressedTexImage2D(t.TEXTURE_2D,x,v,y.width,y.height,0,y.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(t.TEXTURE_2D,x,v,y.width,y.height,0,v,g,y.data);else if(b.length>0&&m){for(var x=0,S=b.length;x<S;x++)y=b[x],i.texImage2D(t.TEXTURE_2D,x,v,v,g,y);n.generateMipmaps=!1}else i.texImage2D(t.TEXTURE_2D,0,v,v,g,p);d(n,m)&&t.generateMipmap(t.TEXTURE_2D),e.__version=n.version,n.onUpdate&&n.onUpdate(n)}function x(e,r,s,a){var h=o(r.texture.format),l=o(r.texture.type);i.texImage2D(a,0,h,r.width,r.height,0,h,l,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,s,a,n.get(r.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function S(e,i){t.bindRenderbuffer(t.RENDERBUFFER,e),i.depthBuffer&&!i.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):i.depthBuffer&&i.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,i.width,i.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}function k(e,i){if(i&&i.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),g(i.depthTexture,0);var r=n.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===Gu)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,r,0);else{if(i.depthTexture.format!==Wu)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,r,0)}}function E(e){var i=n.get(e),r=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");k(i.__webglFramebuffer,e)}else if(r){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=t.createRenderbuffer(),S(i.__webglDepthbuffer[o],e)}else t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),S(i.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}function M(e){var r=n.get(e),o=n.get(e.texture);e.addEventListener("dispose",p),o.__webglTexture=t.createTexture(),s.textures++;var a=!0===e.isWebGLRenderTargetCube,l=h(e);if(a){r.__webglFramebuffer=[];for(var u=0;u<6;u++)r.__webglFramebuffer[u]=t.createFramebuffer()}else r.__webglFramebuffer=t.createFramebuffer();if(a){i.bindTexture(t.TEXTURE_CUBE_MAP,o.__webglTexture),_(t.TEXTURE_CUBE_MAP,e.texture,l);for(var u=0;u<6;u++)x(r.__webglFramebuffer[u],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+u);d(e.texture,l)&&t.generateMipmap(t.TEXTURE_CUBE_MAP),i.bindTexture(t.TEXTURE_CUBE_MAP,null)}else i.bindTexture(t.TEXTURE_2D,o.__webglTexture),_(t.TEXTURE_2D,e.texture,l),x(r.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),d(e.texture,l)&&t.generateMipmap(t.TEXTURE_2D),i.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&E(e)}function T(e){var r=e.texture;if(d(r,h(e))){var o=e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,s=n.get(r).__webglTexture;i.bindTexture(o,s),t.generateMipmap(o),i.bindTexture(o,null)}}var C="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext;this.setTexture2D=g,this.setTextureCube=y,this.setTextureCubeDynamic=b,this.setupRenderTarget=M,this.updateRenderTargetMipmap=T}function fe(){function t(t){var e=t.uuid,i=n[e];return void 0===i&&(i={},n[e]=i),i}function e(t){delete n[t.uuid]}function i(){n={}}var n={};return{get:t,remove:e,clear:i}}function pe(t,e,i){function n(){var e=!1,i=new m,n=null,r=new m;return{setMask:function(i){n===i||e||(t.colorMask(i,i,i,i),n=i)},setLocked:function(t){e=t},setClear:function(e,n,o,s,a){!0===a&&(e*=s,n*=s,o*=s),i.set(e,n,o,s),!1===r.equals(i)&&(t.clearColor(e,n,o,s),r.copy(i))},reset:function(){e=!1,n=null,r.set(0,0,0,1)}}}function r(){var e=!1,i=null,n=null,r=null;return{setTest:function(e){e?c(t.DEPTH_TEST):f(t.DEPTH_TEST)},setMask:function(n){i===n||e||(t.depthMask(n),i=n)},setFunc:function(e){if(n!==e){if(e)switch(e){case Xl:t.depthFunc(t.NEVER);break;case Zl:t.depthFunc(t.ALWAYS);break;case Kl:t.depthFunc(t.LESS);break;case Ql:t.depthFunc(t.LEQUAL);break;case Jl:t.depthFunc(t.EQUAL);break;case tu:t.depthFunc(t.GEQUAL);break;case eu:t.depthFunc(t.GREATER);break;case iu:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);n=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,i=null,n=null,r=null}}}function o(){var e=!1,i=null,n=null,r=null,o=null,s=null,a=null,h=null,l=null;return{setTest:function(e){e?c(t.STENCIL_TEST):f(t.STENCIL_TEST)},setMask:function(n){i===n||e||(t.stencilMask(n),i=n)},setFunc:function(e,i,s){n===e&&r===i&&o===s||(t.stencilFunc(e,i,s),n=e,r=i,o=s)},setOp:function(e,i,n){s===e&&a===i&&h===n||(t.stencilOp(e,i,n),s=e,a=i,h=n)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,i=null,n=null,r=null,o=null,s=null,a=null,h=null,l=null}}}function s(e,i,n){var r=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var s=0;s<n;s++)t.texImage2D(i+s,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r);return o}function a(){A.setClear(0,0,0,1),D.setClear(1),I.setClear(0),c(t.DEPTH_TEST),D.setFunc(Ql),y(!1),b(pl),c(t.CULL_FACE),c(t.BLEND),v(Cl)}function h(){for(var t=0,e=L.length;t<e;t++)L[t]=0}function l(i){if(L[i]=1,0===N[i]&&(t.enableVertexAttribArray(i),N[i]=1),0!==F[i]){e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(i,0),F[i]=0}}function u(i,n){if(L[i]=1,0===N[i]&&(t.enableVertexAttribArray(i),N[i]=1),F[i]!==n){e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(i,n),F[i]=n}}function d(){for(var e=0,i=N.length;e!==i;++e)N[e]!==L[e]&&(t.disableVertexAttribArray(e),N[e]=0)}function c(e){!0!==z[e]&&(t.enable(e),z[e]=!0)}function f(e){!1!==z[e]&&(t.disable(e),z[e]=!1)}function p(){if(null===B&&(B=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")))for(var i=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),n=0;n<i.length;n++)B.push(i[n]);return B}function v(e,n,r,o,s,a,h,l){e!==Tl?c(t.BLEND):f(t.BLEND),e===Dl||e===j&&l===$||(e===Ol?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):e===Pl?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):e===Al?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),j=e,$=l),e===Dl?(s=s||n,a=a||r,h=h||o,n===U&&s===G||(t.blendEquationSeparate(i(n),i(s)),U=n,G=s),r===H&&o===V&&a===W&&h===Y||(t.blendFuncSeparate(i(r),i(o),i(a),i(h)),H=r,V=o,W=a,Y=h)):(U=null,H=null,V=null,G=null,W=null,Y=null)}function g(e){e.side===wl?f(t.CULL_FACE):c(t.CULL_FACE),y(e.side===_l),!0===e.transparent?v(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):v(Tl),D.setFunc(e.depthFunc),D.setTest(e.depthTest),D.setMask(e.depthWrite),A.setMask(e.colorWrite),w(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function y(e){q!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),q=e)}function b(e){e!==fl?(c(t.CULL_FACE),e!==X&&(e===pl?t.cullFace(t.BACK):e===ml?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):f(t.CULL_FACE),X=e}function _(e){e!==Z&&(it&&t.lineWidth(e),Z=e)}function w(e,i,n){e?(c(t.POLYGON_OFFSET_FILL),K===i&&Q===n||(t.polygonOffset(i,n),K=i,Q=n)):f(t.POLYGON_OFFSET_FILL)}function x(){return J}function S(e){J=e,e?c(t.SCISSOR_TEST):f(t.SCISSOR_TEST)}function k(e){void 0===e&&(e=t.TEXTURE0+tt-1),nt!==e&&(t.activeTexture(e),nt=e)}function E(e,i){null===nt&&k();var n=rt[nt];void 0===n&&(n={type:void 0,texture:void 0},rt[nt]=n),n.type===e&&n.texture===i||(t.bindTexture(e,i||at[e]),n.type=e,n.texture=i)}function M(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function T(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function C(e){!1===ot.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),ot.copy(e))}function O(e){!1===st.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),st.copy(e))}function P(){for(var e=0;e<N.length;e++)1===N[e]&&(t.disableVertexAttribArray(e),N[e]=0);z={},B=null,nt=null,rt={},j=null,q=null,X=null,A.reset(),D.reset(),I.reset()}var A=new n,D=new r,I=new o,R=t.getParameter(t.MAX_VERTEX_ATTRIBS),L=new Uint8Array(R),N=new Uint8Array(R),F=new Uint8Array(R),z={},B=null,j=null,U=null,H=null,V=null,G=null,W=null,Y=null,$=!1,q=null,X=null,Z=null,K=null,Q=null,J=null,tt=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),et=parseFloat(/^WebGL\ ([0-9])/.exec(t.getParameter(t.VERSION))[1]),it=parseFloat(et)>=1,nt=null,rt={},ot=new m,st=new m,at={};return at[t.TEXTURE_2D]=s(t.TEXTURE_2D,t.TEXTURE_2D,1),at[t.TEXTURE_CUBE_MAP]=s(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:A,depth:D,stencil:I},init:a,initAttributes:h,enableAttribute:l,enableAttributeAndDivisor:u,disableUnusedAttributes:d,enable:c,disable:f,getCompressedTextureFormats:p,setBlending:v,setMaterial:g,setFlipSided:y,setCullFace:b,setLineWidth:_,setPolygonOffset:w,getScissorTest:x,setScissorTest:S,activeTexture:k,bindTexture:E,compressedTexImage2D:M,texImage2D:T,scissor:C,viewport:O,reset:P}}function me(t,e,i){function n(){if(void 0!==o)return o;var i=e.get("EXT_texture_filter_anisotropic");return o=null!==i?t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o,s=void 0!==i.precision?i.precision:"highp",a=r(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);var h=!0===i.logarithmicDepthBuffer&&!!e.get("EXT_frag_depth"),l=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),u=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=t.getParameter(t.MAX_TEXTURE_SIZE),c=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),f=t.getParameter(t.MAX_VERTEX_ATTRIBS),p=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),m=t.getParameter(t.MAX_VARYING_VECTORS),v=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),g=u>0,y=!!e.get("OES_texture_float");return{getMaxAnisotropy:n,getMaxPrecision:r,precision:s,logarithmicDepthBuffer:h,maxTextures:l,maxVertexTextures:u,maxTextureSize:d,maxCubemapSize:c,maxAttributes:f,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y}}function ve(t){wt.call(this),this.cameras=t||[]}function ge(t){function e(){if(n.isPresenting){var e=n.getEyeParameters("left"),r=e.renderWidth,o=e.renderHeight;c=t.getPixelRatio(),d=t.getSize(),t.setDrawingBufferSize(2*r,o,1)}else i.enabled&&t.setDrawingBufferSize(d.width,d.height,c)}var i=this,n=null,r=null;"VRFrameData"in window&&(r=new window.VRFrameData);var o=new b,s=new b,a=new b,h=new wt;h.bounds=new m(0,0,.5,1),h.layers.enable(1);var l=new wt;l.bounds=new m(.5,0,.5,1),l.layers.enable(2);var u=new ve([h,l]);u.layers.enable(1),u.layers.enable(2);var d,c;window.addEventListener("vrdisplaypresentchange",e,!1),this.enabled=!1,this.standing=!1,this.getDevice=function(){return n},this.setDevice=function(t){void 0!==t&&(n=t)},this.getCamera=function(t){if(null===n)return t;n.depthNear=t.near,n.depthFar=t.far,n.getFrameData(r);var e=r.pose;null!==e.position?t.position.fromArray(e.position):t.position.set(0,0,0),null!==e.orientation&&t.quaternion.fromArray(e.orientation),t.updateMatrixWorld();var i=n.stageParameters;if(this.standing&&i&&(s.fromArray(i.sittingToStandingTransform),a.getInverse(s),t.matrixWorld.multiply(s),t.matrixWorldInverse.multiply(a)),!1===n.isPresenting)return t;u.matrixWorld.copy(t.matrixWorld),u.matrixWorldInverse.copy(t.matrixWorldInverse),h.matrixWorldInverse.fromArray(r.leftViewMatrix),l.matrixWorldInverse.fromArray(r.rightViewMatrix),this.standing&&i&&(h.matrixWorldInverse.multiply(a),l.matrixWorldInverse.multiply(a));var d=t.parent;null!==d&&(o.getInverse(d.matrixWorld),h.matrixWorldInverse.multiply(o),l.matrixWorldInverse.multiply(o)),h.matrixWorld.getInverse(h.matrixWorldInverse),l.matrixWorld.getInverse(l.matrixWorldInverse),h.projectionMatrix.fromArray(r.leftProjectionMatrix),l.projectionMatrix.fromArray(r.rightProjectionMatrix),u.projectionMatrix.copy(h.projectionMatrix);var c=n.getLayers();if(c.length){var f=c[0];null!==f.leftBounds&&4===f.leftBounds.length&&h.bounds.fromArray(f.leftBounds),null!==f.rightBounds&&4===f.rightBounds.length&&l.bounds.fromArray(f.rightBounds)}return u},this.getStandingMatrix=function(){return s},this.submitFrame=function(){n&&n.isPresenting&&n.submitFrame()}}function ye(t){var e={};return{get:function(i){if(void 0!==e[i])return e[i];var n;switch(i){case"WEBGL_depth_texture":n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":n=t.getExtension("WEBGL_compressed_texture_etc1");break;default:n=t.getExtension(i)}return null===n&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),e[i]=n,n}}}function be(){function t(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),i.numPlanes=r,i.numIntersection=0}function e(t,e,n,r){var o=null!==t?t.length:0,s=null;if(0!==o){if(s=l.value,!0!==r||null===s){var u=n+4*o,d=e.matrixWorldInverse;h.getNormalMatrix(d),(null===s||s.length<u)&&(s=new Float32Array(u));for(var c=0,f=n;c!==o;++c,f+=4)a.copy(t[c]).applyMatrix4(d,h),a.normal.toArray(s,f),s[f+3]=a.constant}l.value=s,l.needsUpdate=!0}return i.numPlanes=o,s}var i=this,n=null,r=0,o=!1,s=!1,a=new ct,h=new dt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,i,s){var a=0!==t.length||i||0!==r||o;return o=i,n=e(t,s,0),r=t.length,a},this.beginShadows=function(){s=!0,e(null)},this.endShadows=function(){s=!1,t()},this.setState=function(i,a,h,u,d,c){if(!o||null===i||0===i.length||s&&!h)s?e(null):t();else{var f=s?0:r,p=4*f,m=d.clippingState||null;l.value=m,m=e(i,u,p,c);for(var v=0;v!==p;++v)m[v]=n[v];d.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=f}}}function _e(t){function e(){return null===K?ct:1}function i(){Lt.init(),Lt.scissor(st.copy(vt).multiplyScalar(ct)),Lt.viewport(ht.copy(yt).multiplyScalar(ct))}function n(){Z=null,it=null,tt="",J=-1,Lt.reset()}function r(t){t.preventDefault(),n(),i(),Nt.clear(),jt.clear()}function o(t){var e=t.target;e.removeEventListener("dispose",o),s(e)}function s(t){a(t),Nt.remove(t)}function a(t){var e=Nt.get(t).program;t.program=void 0,void 0!==e&&Ht.releaseProgram(e)}function h(t,e,i){t.render(function(t){X.renderBufferImmediate(t,e,i)})}function l(t,e){return Math.abs(e[0])-Math.abs(t[0])}function u(t,e,i,n){if(i&&i.isInstancedBufferGeometry&&null===It.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===n&&(n=0),Lt.initAttributes();var r=i.attributes,o=e.getAttributes(),s=t.defaultAttributeValues;for(var a in o){var h=o[a];if(h>=0){var l=r[a];if(void 0!==l){var u=l.normalized,d=l.itemSize,c=zt.get(l),f=c.buffer,p=c.type,m=c.bytesPerElement;if(l.isInterleavedBufferAttribute){var v=l.data,g=v.stride,y=l.offset;v&&v.isInstancedInterleavedBuffer?(Lt.enableAttributeAndDivisor(h,v.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=v.meshPerAttribute*v.count)):Lt.enableAttribute(h),Pt.bindBuffer(Pt.ARRAY_BUFFER,f),Pt.vertexAttribPointer(h,d,p,u,g*m,(n*g+y)*m)}else l.isInstancedBufferAttribute?(Lt.enableAttributeAndDivisor(h,l.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=l.meshPerAttribute*l.count)):Lt.enableAttribute(h),Pt.bindBuffer(Pt.ARRAY_BUFFER,f),Pt.vertexAttribPointer(h,d,p,u,0,n*d*m)}else if(void 0!==s){var b=s[a];if(void 0!==b)switch(b.length){case 2:Pt.vertexAttrib2fv(h,b);break;case 3:Pt.vertexAttrib3fv(h,b);break;case 4:Pt.vertexAttrib4fv(h,b);break;default:Pt.vertexAttrib1fv(h,b)}}}}Lt.disableUnusedAttributes()}function d(t,e,i){if(t.visible){if(t.layers.test(e.layers))if(t.isLight)G.push(t);else if(t.isSprite)t.frustumCulled&&!bt.intersectsSprite(t)||$.push(t);else if(t.isLensFlare)q.push(t);else if(t.isImmediateRenderObject)i&&kt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(St),W.push(t,null,t.material,kt.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||bt.intersectsObject(t))){i&&kt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(St);var n=jt.update(t),r=t.material;if(Array.isArray(r))for(var o=n.groups,s=0,a=o.length;s<a;s++){var h=o[s],l=r[h.materialIndex];l&&l.visible&&W.push(t,n,l,kt.z,h)}else r.visible&&W.push(t,n,r,kt.z,null)}for(var u=t.children,s=0,a=u.length;s<a;s++)d(u[s],e,i)}}function c(t,e,i,n){for(var r=0,o=t.length;r<o;r++){var s=t[r],a=s.object,h=s.geometry,l=void 0===n?s.material:n,u=s.group;if(i.isArrayCamera){nt=i;for(var d=i.cameras,c=0,p=d.length;c<p;c++){var m=d[c];if(a.layers.test(m.layers)){var v=m.bounds,g=v.x*ut,y=v.y*dt,b=v.z*ut,_=v.w*dt;X.setViewport(g,y,b,_),X.setScissor(g,y,b,_),X.setScissorTest(!0),f(a,e,m,h,l,u)}}}else nt=null,f(a,e,i,h,l,u)}}function f(t,e,i,n,r,o){if(t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.onBeforeRender(X,e,i,n,r,o),t.isImmediateRenderObject){Lt.setMaterial(r);var s=v(i,e.fog,r,t);tt="",h(t,s,r)}else X.renderBufferDirect(i,e.fog,n,r,t,o);t.onAfterRender(X,e,i,n,r,o)}function p(t,e,i){var n=Nt.get(t),r=Ht.getParameters(t,Tt,e,_t.numPlanes,_t.numIntersection,i),s=Ht.getProgramCode(t,r),h=n.program,l=!0;if(void 0===h)t.addEventListener("dispose",o);else if(h.code!==s)a(t);else{if(void 0!==r.shaderID)return;l=!1}if(l){if(r.shaderID){var u=Cd[r.shaderID];n.shader={name:t.type,uniforms:Md.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}}else n.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(n.shader),h=Ht.acquireProgram(t,n.shader,r,s),n.program=h,t.program=h}var d=h.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var c=0;c<X.maxMorphTargets;c++)d["morphTarget"+c]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var c=0;c<X.maxMorphNormals;c++)d["morphNormal"+c]>=0&&t.numSupportedMorphNormals++}var f=n.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(n.numClippingPlanes=_t.numPlanes,n.numIntersection=_t.numIntersection,f.clippingPlanes=_t.uniform),n.fog=e,n.lightsHash=Tt.hash,t.lights&&(f.ambientLightColor.value=Tt.ambient,f.directionalLights.value=Tt.directional,f.spotLights.value=Tt.spot,f.rectAreaLights.value=Tt.rectArea,f.pointLights.value=Tt.point,f.hemisphereLights.value=Tt.hemi,f.directionalShadowMap.value=Tt.directionalShadowMap,f.directionalShadowMatrix.value=Tt.directionalShadowMatrix,f.spotShadowMap.value=Tt.spotShadowMap,f.spotShadowMatrix.value=Tt.spotShadowMatrix,f.pointShadowMap.value=Tt.pointShadowMap,f.pointShadowMatrix.value=Tt.pointShadowMatrix);var p=n.program.getUniforms(),m=et.seqWithValue(p.seq,f);n.uniformsList=m}function v(t,e,i,n){lt=0;var r=Nt.get(i);if(wt&&(xt||t!==it)){var o=t===it&&i.id===J;_t.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,t,r,o)}!1===i.needsUpdate&&(void 0===r.program?i.needsUpdate=!0:i.fog&&r.fog!==e?i.needsUpdate=!0:i.lights&&r.lightsHash!==Tt.hash?i.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===_t.numPlanes&&r.numIntersection===_t.numIntersection||(i.needsUpdate=!0)),i.needsUpdate&&(p(i,e,n),i.needsUpdate=!1);var s=!1,a=!1,h=!1,l=r.program,u=l.getUniforms(),d=r.shader.uniforms;if(l.id!==Z&&(Pt.useProgram(l.program),Z=l.id,s=!0,a=!0,h=!0),i.id!==J&&(J=i.id,a=!0),s||t!==it){if(u.setValue(Pt,"projectionMatrix",t.projectionMatrix),Rt.logarithmicDepthBuffer&&u.setValue(Pt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),it!==(nt||t)&&(it=nt||t,a=!0,h=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap){var c=u.map.cameraPosition;void 0!==c&&c.setValue(Pt,kt.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&u.setValue(Pt,"viewMatrix",t.matrixWorldInverse)}if(i.skinning){u.setOptional(Pt,n,"bindMatrix"),u.setOptional(Pt,n,"bindMatrixInverse");var f=n.skeleton;if(f){var m=f.bones;if(Rt.floatVertexTextures){if(void 0===f.boneTexture){var v=Math.sqrt(4*m.length);v=md.nextPowerOfTwo(Math.ceil(v)),v=Math.max(v,4);var y=new Float32Array(v*v*4);y.set(f.boneMatrices);var b=new _(y,v,v,Uu,Iu);f.boneMatrices=y,f.boneTexture=b,f.boneTextureSize=v}u.setValue(Pt,"boneTexture",f.boneTexture),u.setValue(Pt,"boneTextureSize",f.boneTextureSize)}else u.setOptional(Pt,f,"boneMatrices")}}return a&&(u.setValue(Pt,"toneMappingExposure",X.toneMappingExposure),u.setValue(Pt,"toneMappingWhitePoint",X.toneMappingWhitePoint),i.lights&&A(d,h),e&&i.fog&&k(d,e),(i.isMeshBasicMaterial||i.isMeshLambertMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.isMeshNormalMaterial||i.isMeshDepthMaterial)&&g(d,i),i.isLineBasicMaterial?w(d,i):i.isLineDashedMaterial?(w(d,i),x(d,i)):i.isPointsMaterial?S(d,i):i.isMeshLambertMaterial?E(d,i):i.isMeshToonMaterial?T(d,i):i.isMeshPhongMaterial?M(d,i):i.isMeshPhysicalMaterial?O(d,i):i.isMeshStandardMaterial?C(d,i):i.isMeshDepthMaterial?i.displacementMap&&(d.displacementMap.value=i.displacementMap,d.displacementScale.value=i.displacementScale,d.displacementBias.value=i.displacementBias):i.isMeshNormalMaterial&&P(d,i),void 0!==d.ltcMat&&(d.ltcMat.value=Ed.LTC_MAT_TEXTURE),void 0!==d.ltcMag&&(d.ltcMag.value=Ed.LTC_MAG_TEXTURE),et.upload(Pt,r.uniformsList,d,X)),u.setValue(Pt,"modelViewMatrix",n.modelViewMatrix),u.setValue(Pt,"normalMatrix",n.normalMatrix),u.setValue(Pt,"modelMatrix",n.matrixWorld),l}function g(t,e){t.opacity.value=e.opacity,t.diffuse.value=e.color,e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),t.map.value=e.map,t.specularMap.value=e.specularMap,t.alphaMap.value=e.alphaMap,e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity);var i;if(e.map?i=e.map:e.specularMap?i=e.specularMap:e.displacementMap?i=e.displacementMap:e.normalMap?i=e.normalMap:e.bumpMap?i=e.bumpMap:e.roughnessMap?i=e.roughnessMap:e.metalnessMap?i=e.metalnessMap:e.alphaMap?i=e.alphaMap:e.emissiveMap&&(i=e.emissiveMap),void 0!==i){i.isWebGLRenderTarget&&(i=i.texture);var n=i.offset,r=i.repeat;t.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio}function w(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function x(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function S(t,e){if(t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*ct,t.scale.value=.5*dt,t.map.value=e.map,null!==e.map){var i=e.map.offset,n=e.map.repeat;t.offsetRepeat.value.set(i.x,i.y,n.x,n.y)}}function k(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function E(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function M(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function T(t,e){M(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function C(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function O(t,e){t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness,C(t,e)}function P(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function A(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function D(t){for(var e=0,i=0,n=t.length;i<n;i++){var r=t[i];r.castShadow&&(Tt.shadows[e]=r,e++)}Tt.shadows.length=e}function I(t,e){var i,n,r,o,s,a,h,l,u=0,d=0,c=0,f=e.matrixWorldInverse,p=0,m=0,v=0,g=0,y=0;for(i=0,n=t.length;i<n;i++)if(r=t[i],s=r.color,a=r.intensity,h=r.distance,l=r.shadow&&r.shadow.map?r.shadow.map.texture:null,r.isAmbientLight)u+=s.r*a,d+=s.g*a,c+=s.b*a;else if(r.isDirectionalLight){var b=Vt.get(r);b.color.copy(r.color).multiplyScalar(r.intensity),b.direction.setFromMatrixPosition(r.matrixWorld),kt.setFromMatrixPosition(r.target.matrixWorld),b.direction.sub(kt),b.direction.transformDirection(f),b.shadow=r.castShadow,r.castShadow&&(o=r.shadow,b.shadowBias=o.bias,b.shadowRadius=o.radius,b.shadowMapSize=o.mapSize),Tt.directionalShadowMap[p]=l,Tt.directionalShadowMatrix[p]=r.shadow.matrix,Tt.directional[p]=b,p++}else if(r.isSpotLight){var b=Vt.get(r);b.position.setFromMatrixPosition(r.matrixWorld),b.position.applyMatrix4(f),b.color.copy(s).multiplyScalar(a),b.distance=h,b.direction.setFromMatrixPosition(r.matrixWorld),kt.setFromMatrixPosition(r.target.matrixWorld),b.direction.sub(kt),b.direction.transformDirection(f),b.coneCos=Math.cos(r.angle),b.penumbraCos=Math.cos(r.angle*(1-r.penumbra)),b.decay=0===r.distance?0:r.decay,b.shadow=r.castShadow,r.castShadow&&(o=r.shadow,b.shadowBias=o.bias,b.shadowRadius=o.radius,b.shadowMapSize=o.mapSize),Tt.spotShadowMap[v]=l,Tt.spotShadowMatrix[v]=r.shadow.matrix,Tt.spot[v]=b,v++}else if(r.isRectAreaLight){var b=Vt.get(r);b.color.copy(s).multiplyScalar(a/(r.width*r.height)),b.position.setFromMatrixPosition(r.matrixWorld),b.position.applyMatrix4(f),Mt.identity(),Et.copy(r.matrixWorld),Et.premultiply(f),Mt.extractRotation(Et),b.halfWidth.set(.5*r.width,0,0),b.halfHeight.set(0,.5*r.height,0),b.halfWidth.applyMatrix4(Mt),b.halfHeight.applyMatrix4(Mt),Tt.rectArea[g]=b,g++}else if(r.isPointLight){var b=Vt.get(r);b.position.setFromMatrixPosition(r.matrixWorld),b.position.applyMatrix4(f),b.color.copy(r.color).multiplyScalar(r.intensity),b.distance=r.distance,b.decay=0===r.distance?0:r.decay,b.shadow=r.castShadow,r.castShadow&&(o=r.shadow,b.shadowBias=o.bias,b.shadowRadius=o.radius,b.shadowMapSize=o.mapSize),Tt.pointShadowMap[m]=l,Tt.pointShadowMatrix[m]=r.shadow.matrix,Tt.point[m]=b,m++}else if(r.isHemisphereLight){var b=Vt.get(r);b.direction.setFromMatrixPosition(r.matrixWorld),b.direction.transformDirection(f),b.direction.normalize(),b.skyColor.copy(r.color).multiplyScalar(a),b.groundColor.copy(r.groundColor).multiplyScalar(a),Tt.hemi[y]=b,y++}Tt.ambient[0]=u,Tt.ambient[1]=d,Tt.ambient[2]=c,Tt.directional.length=p,Tt.spot.length=v,Tt.rectArea.length=g,Tt.point.length=m,Tt.hemi.length=y,Tt.hash=p+","+m+","+v+","+g+","+y+","+Tt.shadows.length}function R(){var t=lt;return t>=Rt.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+t+" texture units while this GPU supports only "+Rt.maxTextures),lt+=1,t}function L(t){var e;if(t===yu)return Pt.REPEAT;if(t===bu)return Pt.CLAMP_TO_EDGE;if(t===_u)return Pt.MIRRORED_REPEAT;if(t===wu)return Pt.NEAREST;if(t===xu)return Pt.NEAREST_MIPMAP_NEAREST;if(t===Su)return Pt.NEAREST_MIPMAP_LINEAR;if(t===ku)return Pt.LINEAR;if(t===Eu)return Pt.LINEAR_MIPMAP_NEAREST;if(t===Mu)return Pt.LINEAR_MIPMAP_LINEAR;if(t===Tu)return Pt.UNSIGNED_BYTE;if(t===Lu)return Pt.UNSIGNED_SHORT_4_4_4_4;if(t===Nu)return Pt.UNSIGNED_SHORT_5_5_5_1;if(t===Fu)return Pt.UNSIGNED_SHORT_5_6_5;if(t===Cu)return Pt.BYTE;if(t===Ou)return Pt.SHORT;if(t===Pu)return Pt.UNSIGNED_SHORT;if(t===Au)return Pt.INT;if(t===Du)return Pt.UNSIGNED_INT;if(t===Iu)return Pt.FLOAT;if(t===Ru&&null!==(e=It.get("OES_texture_half_float")))return e.HALF_FLOAT_OES;if(t===Bu)return Pt.ALPHA;if(t===ju)return Pt.RGB;if(t===Uu)return Pt.RGBA;if(t===Hu)return Pt.LUMINANCE;if(t===Vu)return Pt.LUMINANCE_ALPHA;if(t===Gu)return Pt.DEPTH_COMPONENT;if(t===Wu)return Pt.DEPTH_STENCIL;if(t===Il)return Pt.FUNC_ADD;if(t===Rl)return Pt.FUNC_SUBTRACT;if(t===Ll)return Pt.FUNC_REVERSE_SUBTRACT;if(t===zl)return Pt.ZERO;if(t===Bl)return Pt.ONE;if(t===jl)return Pt.SRC_COLOR;if(t===Ul)return Pt.ONE_MINUS_SRC_COLOR;if(t===Hl)return Pt.SRC_ALPHA;if(t===Vl)return Pt.ONE_MINUS_SRC_ALPHA;if(t===Gl)return Pt.DST_ALPHA;if(t===Wl)return Pt.ONE_MINUS_DST_ALPHA;if(t===Yl)return Pt.DST_COLOR;if(t===$l)return Pt.ONE_MINUS_DST_COLOR;if(t===ql)return Pt.SRC_ALPHA_SATURATE;if((t===Yu||t===$u||t===qu||t===Xu)&&null!==(e=It.get("WEBGL_compressed_texture_s3tc"))){if(t===Yu)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===$u)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===qu)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Xu)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((t===Zu||t===Ku||t===Qu||t===Ju)&&null!==(e=It.get("WEBGL_compressed_texture_pvrtc"))){if(t===Zu)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===Ku)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===Qu)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===Ju)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===td&&null!==(e=It.get("WEBGL_compressed_texture_etc1")))return e.COMPRESSED_RGB_ETC1_WEBGL;if((t===Nl||t===Fl)&&null!==(e=It.get("EXT_blend_minmax"))){if(t===Nl)return e.MIN_EXT;if(t===Fl)return e.MAX_EXT}return t===zu&&null!==(e=It.get("WEBGL_depth_texture"))?e.UNSIGNED_INT_24_8_WEBGL:0}console.log("THREE.WebGLRenderer",cl),t=t||{};var N=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),F=void 0!==t.context?t.context:null,z=void 0!==t.alpha&&t.alpha,B=void 0===t.depth||t.depth,j=void 0===t.stencil||t.stencil,U=void 0!==t.antialias&&t.antialias,H=void 0===t.premultipliedAlpha||t.premultipliedAlpha,V=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,G=[],W=null,Y=new Float32Array(8),$=[],q=[];this.domElement=N,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=au,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var X=this,Z=null,K=null,Q=null,J=-1,tt="",it=null,nt=null,st=new m,at=null,ht=new m,lt=0,ut=N.width,dt=N.height,ct=1,vt=new m(0,0,ut,dt),gt=!1,yt=new m(0,0,ut,dt),bt=new ft,_t=new be,wt=!1,xt=!1,St=new b,kt=new y,Et=new b,Mt=new b,Tt={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},Ct={geometries:0,textures:0},Ot={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:Ot,memory:Ct,programs:null};var Pt;try{var Dt={alpha:z,depth:B,stencil:j,antialias:U,premultipliedAlpha:H,preserveDrawingBuffer:V};if(null===(Pt=F||N.getContext("webgl",Dt)||N.getContext("experimental-webgl",Dt)))throw null!==N.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===Pt.getShaderPrecisionFormat&&(Pt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),N.addEventListener("webglcontextlost",r,!1)}catch(t){console.error("THREE.WebGLRenderer: "+t)}var It=new ye(Pt);It.get("WEBGL_depth_texture"),It.get("OES_texture_float"),It.get("OES_texture_float_linear"),It.get("OES_texture_half_float"),It.get("OES_texture_half_float_linear"),It.get("OES_standard_derivatives"),It.get("ANGLE_instanced_arrays"),It.get("OES_element_index_uint")&&(At.MaxIndex=4294967296);var Rt=new me(Pt,It,t),Lt=new pe(Pt,It,L),Nt=new fe,Ft=new ce(Pt,It,Lt,Nt,Rt,L,Ct),zt=new mt(Pt),Bt=new qt(Pt,zt,Ct),jt=new Zt(Pt,Bt,Ot),Ht=new de(this,Rt),Vt=new Xt,Gt=new Wt,Kt=new Ut(this,Lt,jt,H),Qt=new ge(this);this.info.programs=Ht.programs;var Jt=new $t(Pt,It,Ot),te=new Yt(Pt,It,Ot);i(),this.context=Pt,this.capabilities=Rt,this.extensions=It,this.properties=Nt,this.renderLists=Gt,this.state=Lt,this.vr=Qt;var ee=new pt(this,Tt,jt,Rt);this.shadowMap=ee;var ie=new ot(this,$),ne=new rt(this,q);this.getContext=function(){return Pt},this.getContextAttributes=function(){return Pt.getContextAttributes()},this.forceContextLoss=function(){var t=It.get("WEBGL_lose_context");t&&t.loseContext()},this.getMaxAnisotropy=function(){return Rt.getMaxAnisotropy()},this.getPrecision=function(){return Rt.precision},this.getPixelRatio=function(){return ct},this.setPixelRatio=function(t){void 0!==t&&(ct=t,this.setSize(ut,dt,!1))},this.getSize=function(){return{width:ut,height:dt}},this.setSize=function(t,e,i){var n=Qt.getDevice();if(n&&n.isPresenting)return void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");ut=t,dt=e,N.width=t*ct,N.height=e*ct,!1!==i&&(N.style.width=t+"px",N.style.height=e+"px"),this.setViewport(0,0,t,e)},this.getDrawingBufferSize=function(){return{width:ut*ct,height:dt*ct}},this.setDrawingBufferSize=function(t,e,i){ut=t,dt=e,ct=i,N.width=t*i,N.height=e*i,this.setViewport(0,0,t,e)},this.setViewport=function(t,e,i,n){yt.set(t,dt-e-n,i,n),Lt.viewport(ht.copy(yt).multiplyScalar(ct))},this.setScissor=function(t,e,i,n){vt.set(t,dt-e-n,i,n),Lt.scissor(st.copy(vt).multiplyScalar(ct))},this.setScissorTest=function(t){Lt.setScissorTest(gt=t)},this.getClearColor=Kt.getClearColor,this.setClearColor=Kt.setClearColor,this.getClearAlpha=Kt.getClearAlpha,this.setClearAlpha=Kt.setClearAlpha,this.clear=function(t,e,i){var n=0;(void 0===t||t)&&(n|=Pt.COLOR_BUFFER_BIT),(void 0===e||e)&&(n|=Pt.DEPTH_BUFFER_BIT),(void 0===i||i)&&(n|=Pt.STENCIL_BUFFER_BIT),Pt.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,i,n){this.setRenderTarget(t),this.clear(e,i,n)},this.resetGLState=n,this.dispose=function(){N.removeEventListener("webglcontextlost",r,!1),Gt.dispose()},this.renderBufferImmediate=function(t,e,i){Lt.initAttributes();var n=Nt.get(t);t.hasPositions&&!n.position&&(n.position=Pt.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=Pt.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=Pt.createBuffer()),t.hasColors&&!n.color&&(n.color=Pt.createBuffer());var r=e.getAttributes();if(t.hasPositions&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,n.position),Pt.bufferData(Pt.ARRAY_BUFFER,t.positionArray,Pt.DYNAMIC_DRAW),Lt.enableAttribute(r.position),Pt.vertexAttribPointer(r.position,3,Pt.FLOAT,!1,0,0)),t.hasNormals){if(Pt.bindBuffer(Pt.ARRAY_BUFFER,n.normal),!i.isMeshPhongMaterial&&!i.isMeshStandardMaterial&&!i.isMeshNormalMaterial&&i.shading===xl)for(var o=0,s=3*t.count;o<s;o+=9){var a=t.normalArray,h=(a[o+0]+a[o+3]+a[o+6])/3,l=(a[o+1]+a[o+4]+a[o+7])/3,u=(a[o+2]+a[o+5]+a[o+8])/3;a[o+0]=h,a[o+1]=l,a[o+2]=u,a[o+3]=h,a[o+4]=l,a[o+5]=u,a[o+6]=h,a[o+7]=l,a[o+8]=u}Pt.bufferData(Pt.ARRAY_BUFFER,t.normalArray,Pt.DYNAMIC_DRAW),Lt.enableAttribute(r.normal),Pt.vertexAttribPointer(r.normal,3,Pt.FLOAT,!1,0,0)}t.hasUvs&&i.map&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,n.uv),Pt.bufferData(Pt.ARRAY_BUFFER,t.uvArray,Pt.DYNAMIC_DRAW),Lt.enableAttribute(r.uv),Pt.vertexAttribPointer(zt.uv,2,Pt.FLOAT,!1,0,0)),t.hasColors&&i.vertexColors!==kl&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,n.color),Pt.bufferData(Pt.ARRAY_BUFFER,t.colorArray,Pt.DYNAMIC_DRAW),Lt.enableAttribute(r.color),Pt.vertexAttribPointer(r.color,3,Pt.FLOAT,!1,0,0)),Lt.disableUnusedAttributes(),Pt.drawArrays(Pt.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,i,n,r,o,s){Lt.setMaterial(r);var a=v(t,i,r,o),h=n.id+"_"+a.id+"_"+(!0===r.wireframe),d=!1;h!==tt&&(tt=h,d=!0);var c=o.morphTargetInfluences;if(void 0!==c){for(var f=[],p=0,m=c.length;p<m;p++){var g=c[p];f.push([g,p])}f.sort(l),f.length>8&&(f.length=8);for(var y=n.morphAttributes,p=0,m=f.length;p<m;p++){var g=f[p];if(Y[p]=g[0],0!==g[0]){var b=g[1];!0===r.morphTargets&&y.position&&n.addAttribute("morphTarget"+p,y.position[b]),!0===r.morphNormals&&y.normal&&n.addAttribute("morphNormal"+p,y.normal[b])}else!0===r.morphTargets&&n.removeAttribute("morphTarget"+p),!0===r.morphNormals&&n.removeAttribute("morphNormal"+p)}for(var p=f.length,_=Y.length;p<_;p++)Y[p]=0;a.getUniforms().setValue(Pt,"morphTargetInfluences",Y),d=!0}var b=n.index,w=n.attributes.position,x=1;!0===r.wireframe&&(b=Bt.getWireframeAttribute(n),x=2);var S,k=Jt;null!==b&&(S=zt.get(b),k=te,k.setIndex(S)),d&&(u(r,a,n),null!==b&&Pt.bindBuffer(Pt.ELEMENT_ARRAY_BUFFER,S.buffer));var E=0;null!==b?E=b.count:void 0!==w&&(E=w.count);var M=n.drawRange.start*x,T=n.drawRange.count*x,C=null!==s?s.start*x:0,O=null!==s?s.count*x:1/0,P=Math.max(M,C),A=Math.min(E,M+T,C+O)-1,D=Math.max(0,A-P+1);if(0!==D){if(o.isMesh)if(!0===r.wireframe)Lt.setLineWidth(r.wireframeLinewidth*e()),k.setMode(Pt.LINES);else switch(o.drawMode){case nd:k.setMode(Pt.TRIANGLES);break;case rd:k.setMode(Pt.TRIANGLE_STRIP);break;case od:k.setMode(Pt.TRIANGLE_FAN)}else if(o.isLine){var I=r.linewidth;void 0===I&&(I=1),Lt.setLineWidth(I*e()),o.isLineSegments?k.setMode(Pt.LINES):o.isLineLoop?k.setMode(Pt.LINE_LOOP):k.setMode(Pt.LINE_STRIP)}else o.isPoints&&k.setMode(Pt.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&k.renderInstances(n,P,D):k.render(P,D)}},this.compile=function(t,e){G=[],t.traverse(function(t){t.isLight&&G.push(t)}),I(G,e),t.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var i=0;i<e.material.length;i++)p(e.material[i],t.fog,e);else p(e.material,t.fog,e)})},this.animate=function(t){function e(){t(),(Qt.getDevice()||window).requestAnimationFrame(e)}(Qt.getDevice()||window).requestAnimationFrame(e)},this.render=function(t,e,i,n){if(!e||!e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");tt="",J=-1,it=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),Qt.enabled&&(e=Qt.getCamera(e)),St.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),bt.setFromMatrix(St),G.length=0,$.length=0,q.length=0,xt=this.localClippingEnabled,wt=_t.init(this.clippingPlanes,xt,e),W=Gt.get(t,e),W.init(),d(t,e,X.sortObjects),W.finish(),!0===X.sortObjects&&W.sort(),wt&&_t.beginShadows(),D(G),ee.render(t,e),I(G,e),wt&&_t.endShadows(),Ot.frame++,Ot.calls=0,Ot.vertices=0,Ot.faces=0,Ot.points=0,void 0===i&&(i=null),this.setRenderTarget(i),Kt.render(t,e,n);var r=W.opaque,o=W.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;r.length&&c(r,t,e,s),o.length&&c(o,t,e,s)}else r.length&&c(r,t,e),o.length&&c(o,t,e);ie.render(t,e),ne.render(t,e,ht),i&&Ft.updateRenderTargetMipmap(i),Lt.buffers.depth.setTest(!0),Lt.buffers.depth.setMask(!0),Lt.buffers.color.setMask(!0),e.isArrayCamera&&X.setScissorTest(!1),Qt.enabled&&Qt.submitFrame()},this.setFaceCulling=function(t,e){Lt.setCullFace(t),Lt.setFlipSided(e===vl)},this.allocTextureUnit=R,this.setTexture2D=function(){var t=!1;return function(e,i){e&&e.isWebGLRenderTarget&&(t||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),Ft.setTexture2D(e,i)}}(),this.setTexture=function(){var t=!1;return function(e,i){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),Ft.setTexture2D(e,i)}}(),this.setTextureCube=function(){var t=!1;return function(e,i){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?Ft.setTextureCube(e,i):Ft.setTextureCubeDynamic(e,i)}}(),this.getRenderTarget=function(){return K},this.setRenderTarget=function(t){K=t,t&&void 0===Nt.get(t).__webglFramebuffer&&Ft.setupRenderTarget(t);var e,i=t&&t.isWebGLRenderTargetCube;if(t){var n=Nt.get(t);e=i?n.__webglFramebuffer[t.activeCubeFace]:n.__webglFramebuffer,st.copy(t.scissor),at=t.scissorTest,ht.copy(t.viewport)}else e=null,st.copy(vt).multiplyScalar(ct),at=gt,ht.copy(yt).multiplyScalar(ct);if(Q!==e&&(Pt.bindFramebuffer(Pt.FRAMEBUFFER,e),Q=e),Lt.scissor(st),Lt.setScissorTest(at),Lt.viewport(ht),i){var r=Nt.get(t.texture);Pt.framebufferTexture2D(Pt.FRAMEBUFFER,Pt.COLOR_ATTACHMENT0,Pt.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,r.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,i,n,r,o){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var s=Nt.get(t).__webglFramebuffer;if(s){var a=!1;s!==Q&&(Pt.bindFramebuffer(Pt.FRAMEBUFFER,s),a=!0);try{var h=t.texture,l=h.format,u=h.type;if(l!==Uu&&L(l)!==Pt.getParameter(Pt.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(u!==Tu&&L(u)!==Pt.getParameter(Pt.IMPLEMENTATION_COLOR_READ_TYPE)&&(u!==Iu||!It.get("OES_texture_float")&&!It.get("WEBGL_color_buffer_float"))&&(u!==Ru||!It.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Pt.checkFramebufferStatus(Pt.FRAMEBUFFER)===Pt.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-n&&i>=0&&i<=t.height-r&&Pt.readPixels(e,i,n,r,L(l),L(u),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{a&&Pt.bindFramebuffer(Pt.FRAMEBUFFER,Q)}}}}function we(t,e){this.name="",this.color=new it(t),this.density=void 0!==e?e:25e-5}function xe(t,e,i){this.name="",this.color=new it(t),this.near=void 0!==e?e:1,this.far=void 0!==i?i:1e3}function Se(){yt.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function ke(t,e,i,n,r){yt.call(this),this.lensFlares=[],this.positionScreen=new y,this.customUpdateCallback=void 0,void 0!==t&&this.add(t,e,i,n,r)}function Ee(t){st.call(this),this.type="SpriteMaterial",this.color=new it(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)}function Me(t){yt.call(this),this.type="Sprite",this.material=void 0!==t?t:new Ee}function Te(){yt.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Ce(t,e){var i=this;if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)i.boneInverses.push(new b)}}function Oe(){yt.call(this),this.type="Bone"}function Pe(t,e){jt.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new b,this.bindMatrixInverse=new b;var i=this.initBones(),n=new Ce(i);this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}function Ae(t){st.call(this),this.type="LineBasicMaterial",this.color=new it(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function De(t,e,i){if(1===i)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Ie(t,e);yt.call(this),this.type="Line",this.geometry=void 0!==t?t:new At,this.material=void 0!==e?e:new Ae({color:16777215*Math.random()})}function Ie(t,e){De.call(this,t,e),this.type="LineSegments"}function Re(t,e){De.call(this,t,e),this.type="LineLoop"}function Le(t){st.call(this),this.type="PointsMaterial",this.color=new it(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function Ne(t,e){yt.call(this),this.type="Points",this.geometry=void 0!==t?t:new At,this.material=void 0!==e?e:new Le({color:16777215*Math.random()})}function Fe(){yt.call(this),this.type="Group"}function ze(t,e,i,n,r,o,s,a,h,l,u,d){p.call(this,null,o,s,a,h,l,n,r,u,d),this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Be(t,e,i,n,r,o,s,a,h){p.call(this,t,e,i,n,r,o,s,a,h),this.needsUpdate=!0}function je(t){At.call(this),this.type="WireframeGeometry";var e,i,n,r,o,s,a,h,l,u,d=[],c=[0,0],f={},p=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(e=0,n=m.length;e<n;e++){var v=m[e];for(i=0;i<3;i++)a=v[p[i]],h=v[p[(i+1)%3]],c[0]=Math.min(a,h),c[1]=Math.max(a,h),l=c[0]+","+c[1],void 0===f[l]&&(f[l]={index1:c[0],index2:c[1]})}for(l in f)s=f[l],u=t.vertices[s.index1],d.push(u.x,u.y,u.z),u=t.vertices[s.index2],d.push(u.x,u.y,u.z)}else if(t&&t.isBufferGeometry){var g,b,_,w,x,S,k,E;if(u=new y,null!==t.index){for(g=t.attributes.position,b=t.index,_=t.groups,0===_.length&&(_=[{start:0,count:b.count,materialIndex:0}]),r=0,o=_.length;r<o;++r)for(w=_[r],x=w.start,S=w.count,e=x,n=x+S;e<n;e+=3)for(i=0;i<3;i++)a=b.getX(e+i),h=b.getX(e+(i+1)%3),c[0]=Math.min(a,h),c[1]=Math.max(a,h),l=c[0]+","+c[1],void 0===f[l]&&(f[l]={index1:c[0],index2:c[1]});for(l in f)s=f[l],u.fromBufferAttribute(g,s.index1),d.push(u.x,u.y,u.z),u.fromBufferAttribute(g,s.index2),d.push(u.x,u.y,u.z)}else for(g=t.attributes.position,e=0,n=g.count/3;e<n;e++)for(i=0;i<3;i++)k=3*e+i,u.fromBufferAttribute(g,k),d.push(u.x,u.y,u.z),E=3*e+(i+1)%3,u.fromBufferAttribute(g,E),d.push(u.x,u.y,u.z)}this.addAttribute("position",new Ct(d,3))}function Ue(t,e,i){kt.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:i},this.fromBufferGeometry(new He(t,e,i)),this.mergeVertices()}function He(t,e,i){At.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:i};var n,r,o=[],s=[],a=[],h=[],l=new y,u=new y,d=new y,c=new y,f=new y,p=e+1;for(n=0;n<=i;n++){var m=n/i;for(r=0;r<=e;r++){var v=r/e;u=t(v,m,u),s.push(u.x,u.y,u.z),v-1e-5>=0?(d=t(v-1e-5,m,d),c.subVectors(u,d)):(d=t(v+1e-5,m,d),c.subVectors(d,u)),m-1e-5>=0?(d=t(v,m-1e-5,d),f.subVectors(u,d)):(d=t(v,m+1e-5,d),f.subVectors(d,u)),l.crossVectors(c,f).normalize(),a.push(l.x,l.y,l.z),h.push(v,m)}}for(n=0;n<i;n++)for(r=0;r<e;r++){var g=n*p+r,b=n*p+r+1,_=(n+1)*p+r+1,w=(n+1)*p+r;o.push(g,b,w),o.push(b,_,w)}this.setIndex(o),this.addAttribute("position",new Ct(s,3)),this.addAttribute("normal",new Ct(a,3)),this.addAttribute("uv",new Ct(h,2))}function Ve(t,e,i,n){kt.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n},this.fromBufferGeometry(new Ge(t,e,i,n)),this.mergeVertices()}function Ge(t,e,i,n){function r(t,e,i,n){var r,o,a=Math.pow(2,n),h=[];for(r=0;r<=a;r++){h[r]=[];var l=t.clone().lerp(i,r/a),u=e.clone().lerp(i,r/a),d=a-r;for(o=0;o<=d;o++)h[r][o]=0===o&&r===a?l:l.clone().lerp(u,o/d)}for(r=0;r<a;r++)for(o=0;o<2*(a-r)-1;o++){var c=Math.floor(o/2);o%2===0?(s(h[r][c+1]),s(h[r+1][c]),s(h[r][c])):(s(h[r][c+1]),s(h[r+1][c+1]),s(h[r+1][c]))}}function o(){for(var t=0;t<p.length;t+=6){var e=p[t+0],i=p[t+2],n=p[t+4],r=Math.max(e,i,n),o=Math.min(e,i,n);r>.9&&o<.1&&(e<.2&&(p[t+0]+=1),i<.2&&(p[t+2]+=1),n<.2&&(p[t+4]+=1))}}function s(t){c.push(t.x,t.y,t.z)}function a(e,i){var n=3*e;i.x=t[n+0],i.y=t[n+1],i.z=t[n+2]}function h(){for(var t=new y,e=new y,i=new y,n=new y,r=new f,o=new f,s=new f,a=0,h=0;a<c.length;a+=9,h+=6){t.set(c[a+0],c[a+1],c[a+2]),e.set(c[a+3],c[a+4],c[a+5]),i.set(c[a+6],c[a+7],c[a+8]),r.set(p[h+0],p[h+1]),o.set(p[h+2],p[h+3]),s.set(p[h+4],p[h+5]),n.copy(t).add(e).add(i).divideScalar(3);var d=u(n);l(r,h+0,t,d),l(o,h+2,e,d),l(s,h+4,i,d)}}function l(t,e,i,n){n<0&&1===t.x&&(p[e]=t.x-1),0===i.x&&0===i.z&&(p[e]=n/2/Math.PI+.5)}function u(t){return Math.atan2(t.z,-t.x)}function d(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}At.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n},i=i||1,n=n||0;var c=[],p=[];!function(t){for(var i=new y,n=new y,o=new y,s=0;s<e.length;s+=3)a(e[s+0],i),a(e[s+1],n),a(e[s+2],o),r(i,n,o,t)}(n),function(t){for(var e=new y,i=0;i<c.length;i+=3)e.x=c[i+0],e.y=c[i+1],e.z=c[i+2],e.normalize().multiplyScalar(t),c[i+0]=e.x,c[i+1]=e.y,c[i+2]=e.z}(i),function(){for(var t=new y,e=0;e<c.length;e+=3){t.x=c[e+0],t.y=c[e+1],t.z=c[e+2];var i=u(t)/2/Math.PI+.5,n=d(t)/Math.PI+.5;p.push(i,1-n)}h(),o()}(),this.addAttribute("position",new Ct(c,3)),this.addAttribute("normal",new Ct(c.slice(),3)),this.addAttribute("uv",new Ct(p,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}function We(t,e){kt.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ye(t,e)),this.mergeVertices()}function Ye(t,e){var i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],n=[2,1,0,0,3,2,1,3,0,2,3,1];Ge.call(this,i,n,t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function $e(t,e){kt.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new qe(t,e)),this.mergeVertices()}function qe(t,e){var i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Ge.call(this,i,n,t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Xe(t,e){kt.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ze(t,e)),this.mergeVertices()}function Ze(t,e){var i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Ge.call(this,n,r,t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ke(t,e){kt.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Qe(t,e)),this.mergeVertices()}function Qe(t,e){var i=(1+Math.sqrt(5))/2,n=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Ge.call(this,r,o,t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Je(t,e,i,n,r,o){kt.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var s=new ti(t,e,i,n,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals,this.fromBufferGeometry(s),this.mergeVertices()}function ti(t,e,i,n,r){function o(r){var o=t.getPointAt(r/e),s=h.normals[r],a=h.binormals[r];for(u=0;u<=n;u++){var l=u/n*Math.PI*2,f=Math.sin(l),p=-Math.cos(l);c.x=p*s.x+f*a.x,c.y=p*s.y+f*a.y,c.z=p*s.z+f*a.z,c.normalize(),v.push(c.x,c.y,c.z),d.x=o.x+i*c.x,d.y=o.y+i*c.y,d.z=o.z+i*c.z,m.push(d.x,d.y,d.z)}}function s(){for(u=1;u<=e;u++)for(l=1;l<=n;l++){var t=(n+1)*(u-1)+(l-1),i=(n+1)*u+(l-1),r=(n+1)*u+l,o=(n+1)*(u-1)+l;b.push(t,i,o),b.push(i,r,o)}}function a(){for(l=0;l<=e;l++)for(u=0;u<=n;u++)p.x=l/e,p.y=u/n,g.push(p.x,p.y)}At.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:r},e=e||64,i=i||1,n=n||8,r=r||!1;var h=t.computeFrenetFrames(e,r);this.tangents=h.tangents,this.normals=h.normals,this.binormals=h.binormals;var l,u,d=new y,c=new y,p=new f,m=[],v=[],g=[],b=[];!function(){for(l=0;l<e;l++)o(l);o(!1===r?e:0),a(),s()}(),this.setIndex(b),this.addAttribute("position",new Ct(m,3)),this.addAttribute("normal",new Ct(v,3)),this.addAttribute("uv",new Ct(g,2))}function ei(t,e,i,n,r,o,s){kt.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:r,q:o},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new ii(t,e,i,n,r,o)),this.mergeVertices()}function ii(t,e,i,n,r,o){function s(t,e,i,n,r){var o=Math.cos(t),s=Math.sin(t),a=i/e*t,h=Math.cos(a);r.x=n*(2+h)*.5*o,r.y=n*(2+h)*s*.5,r.z=n*Math.sin(a)*.5}At.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:r,q:o},t=t||100,e=e||40,i=Math.floor(i)||64,n=Math.floor(n)||8,r=r||2,o=o||3;var a,h,l=[],u=[],d=[],c=[],f=new y,p=new y,m=new y,v=new y,g=new y,b=new y,_=new y;for(a=0;a<=i;++a){var w=a/i*r*Math.PI*2;for(s(w,r,o,t,m),s(w+.01,r,o,t,v),b.subVectors(v,m),_.addVectors(v,m),g.crossVectors(b,_),_.crossVectors(g,b),g.normalize(),_.normalize(),h=0;h<=n;++h){var x=h/n*Math.PI*2,S=-e*Math.cos(x),k=e*Math.sin(x);f.x=m.x+(S*_.x+k*g.x),f.y=m.y+(S*_.y+k*g.y),f.z=m.z+(S*_.z+k*g.z),u.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),d.push(p.x,p.y,p.z),c.push(a/i),c.push(h/n)}}for(h=1;h<=i;h++)for(a=1;a<=n;a++){var E=(n+1)*(h-1)+(a-1),M=(n+1)*h+(a-1),T=(n+1)*h+a,C=(n+1)*(h-1)+a;l.push(E,M,C),l.push(M,T,C)}this.setIndex(l),this.addAttribute("position",new Ct(u,3)),this.addAttribute("normal",new Ct(d,3)),this.addAttribute("uv",new Ct(c,2))}function ni(t,e,i,n,r){kt.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},this.fromBufferGeometry(new ri(t,e,i,n,r)),this.mergeVertices()}function ri(t,e,i,n,r){At.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},t=t||100,e=e||40,i=Math.floor(i)||8,n=Math.floor(n)||6,r=r||2*Math.PI;var o,s,a=[],h=[],l=[],u=[],d=new y,c=new y,f=new y;for(o=0;o<=i;o++)for(s=0;s<=n;s++){var p=s/n*r,m=o/i*Math.PI*2;c.x=(t+e*Math.cos(m))*Math.cos(p),c.y=(t+e*Math.cos(m))*Math.sin(p),c.z=e*Math.sin(m),h.push(c.x,c.y,c.z),d.x=t*Math.cos(p),d.y=t*Math.sin(p),f.subVectors(c,d).normalize(),l.push(f.x,f.y,f.z),u.push(s/n),u.push(o/i)}for(o=1;o<=i;o++)for(s=1;s<=n;s++){var v=(n+1)*o+s-1,g=(n+1)*(o-1)+s-1,b=(n+1)*(o-1)+s,_=(n+1)*o+s;a.push(v,g,_),a.push(g,b,_)}this.setIndex(a),this.addAttribute("position",new Ct(h,3)),this.addAttribute("normal",new Ct(l,3)),this.addAttribute("uv",new Ct(u,2))}function oi(t,e){kt.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new si(t,e)),this.mergeVertices()}function si(t,e){"undefined"!==typeof t&&(At.call(this),this.type="ExtrudeBufferGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),this.computeVertexNormals())}function ai(t,e){kt.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new hi(t,e)),this.mergeVertices()}function hi(t,e){e=e||{};var i=e.font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new kt;var n=i.generateShapes(t,e.size,e.curveSegments);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),si.call(this,n,e),this.type="TextBufferGeometry"}function li(t,e,i,n,r,o,s){kt.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new ui(t,e,i,n,r,o,s)),this.mergeVertices()}function ui(t,e,i,n,r,o,s){At.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:o,thetaLength:s},t=t||50,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI,o=void 0!==o?o:0,s=void 0!==s?s:Math.PI;var a,h,l=o+s,u=0,d=[],c=new y,f=new y,p=[],m=[],v=[],g=[];for(h=0;h<=i;h++){var b=[],_=h/i;for(a=0;a<=e;a++){var w=a/e;c.x=-t*Math.cos(n+w*r)*Math.sin(o+_*s),c.y=t*Math.cos(o+_*s),c.z=t*Math.sin(n+w*r)*Math.sin(o+_*s),m.push(c.x,c.y,c.z),f.set(c.x,c.y,c.z).normalize(),v.push(f.x,f.y,f.z),g.push(w,1-_),b.push(u++)}d.push(b)}for(h=0;h<i;h++)for(a=0;a<e;a++){var x=d[h][a+1],S=d[h][a],k=d[h+1][a],E=d[h+1][a+1];(0!==h||o>0)&&p.push(x,S,E),(h!==i-1||l<Math.PI)&&p.push(S,k,E)}this.setIndex(p),this.addAttribute("position",new Ct(m,3)),this.addAttribute("normal",new Ct(v,3)),this.addAttribute("uv",new Ct(g,2))}function di(t,e,i,n,r,o){kt.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new ci(t,e,i,n,r,o)),this.mergeVertices()}function ci(t,e,i,n,r,o){At.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:o},t=t||20,e=e||50,r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,i=void 0!==i?Math.max(3,i):8,n=void 0!==n?Math.max(1,n):1;var s,a,h,l=[],u=[],d=[],c=[],p=t,m=(e-t)/n,v=new y,g=new f;for(a=0;a<=n;a++){for(h=0;h<=i;h++)s=r+h/i*o,v.x=p*Math.cos(s),v.y=p*Math.sin(s),u.push(v.x,v.y,v.z),d.push(0,0,1),g.x=(v.x/e+1)/2,g.y=(v.y/e+1)/2,c.push(g.x,g.y);p+=m}for(a=0;a<n;a++){var b=a*(i+1);for(h=0;h<i;h++){s=h+b;var _=s,w=s+i+1,x=s+i+2,S=s+1;l.push(_,w,S),l.push(w,x,S)}}this.setIndex(l),this.addAttribute("position",new Ct(u,3)),this.addAttribute("normal",new Ct(d,3)),this.addAttribute("uv",new Ct(c,2))}function fi(t,e,i,n){kt.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},this.fromBufferGeometry(new pi(t,e,i,n)),this.mergeVertices()}function pi(t,e,i,n){At.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},e=Math.floor(e)||12,i=i||0,n=n||2*Math.PI,n=md.clamp(n,0,2*Math.PI);var r,o,s,a=[],h=[],l=[],u=1/e,d=new y,c=new f;for(o=0;o<=e;o++){var p=i+o*u*n,m=Math.sin(p),v=Math.cos(p);for(s=0;s<=t.length-1;s++)d.x=t[s].x*m,d.y=t[s].y,d.z=t[s].x*v,h.push(d.x,d.y,d.z),c.x=o/e,c.y=s/(t.length-1),l.push(c.x,c.y)}for(o=0;o<e;o++)for(s=0;s<t.length-1;s++){r=s+o*t.length;var g=r,b=r+t.length,_=r+t.length+1,w=r+1;a.push(g,b,w),a.push(b,_,w)}if(this.setIndex(a),this.addAttribute("position",new Ct(h,3)),this.addAttribute("uv",new Ct(l,2)),this.computeVertexNormals(),n===2*Math.PI){var x=this.attributes.normal.array,S=new y,k=new y,E=new y;for(r=e*t.length*3,o=0,s=0;o<t.length;o++,s+=3)S.x=x[s+0],S.y=x[s+1],S.z=x[s+2],k.x=x[r+s+0],k.y=x[r+s+1],k.z=x[r+s+2],E.addVectors(S,k).normalize(),x[s+0]=x[r+s+0]=E.x,x[s+1]=x[r+s+1]=E.y,x[s+2]=x[r+s+2]=E.z}}function mi(t,e){kt.call(this),this.type="ShapeGeometry","object"===typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new vi(t,e)),this.mergeVertices()}function vi(t,e){function i(t){var i,n,h,u=o.length/3,d=t.extractPoints(e),c=d.shape,f=d.holes;if(!1===Id.isClockWise(c))for(c=c.reverse(),i=0,n=f.length;i<n;i++)h=f[i],!0===Id.isClockWise(h)&&(f[i]=h.reverse());var p=Id.triangulateShape(c,f);for(i=0,n=f.length;i<n;i++)h=f[i],c=c.concat(h);for(i=0,n=c.length;i<n;i++){var m=c[i];o.push(m.x,m.y,0),s.push(0,0,1),a.push(m.x,m.y)}for(i=0,n=p.length;i<n;i++){var v=p[i],g=v[0]+u,y=v[1]+u,b=v[2]+u;r.push(g,y,b),l+=3}}var n=this;At.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var r=[],o=[],s=[],a=[],h=0,l=0;if(!1===Array.isArray(t))i(t);else for(var u=0;u<t.length;u++)i(t[u]),n.addGroup(h,l,u),h+=l,l=0;this.setIndex(r),this.addAttribute("position",new Ct(o,3)),this.addAttribute("normal",new Ct(s,3)),this.addAttribute("uv",new Ct(a,2))}function gi(t,e){At.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var i,n,r,o,s=[],a=Math.cos(md.DEG2RAD*e),h=[0,0],l={},u=["a","b","c"];t.isBufferGeometry?(o=new kt,o.fromBufferGeometry(t)):o=t.clone(),o.mergeVertices(),o.computeFaceNormals();for(var d=o.vertices,c=o.faces,f=0,p=c.length;f<p;f++)for(var m=c[f],v=0;v<3;v++)i=m[u[v]],n=m[u[(v+1)%3]],h[0]=Math.min(i,n),h[1]=Math.max(i,n),r=h[0]+","+h[1],void 0===l[r]?l[r]={index1:h[0],index2:h[1],face1:f,face2:void 0}:l[r].face2=f;for(r in l){var g=l[r];if(void 0===g.face2||c[g.face1].normal.dot(c[g.face2].normal)<=a){var y=d[g.index1];s.push(y.x,y.y,y.z),y=d[g.index2],s.push(y.x,y.y,y.z)}}this.addAttribute("position",new Ct(s,3))}function yi(t,e,i,n,r,o,s,a){kt.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a},this.fromBufferGeometry(new bi(t,e,i,n,r,o,s,a)),this.mergeVertices()}function bi(t,e,i,n,r,o,s,a){function h(i){var r,o,h,v=new f,_=new y,w=0,x=!0===i?t:e,S=!0===i?1:-1;for(o=m,r=1;r<=n;r++)d.push(0,g*S,0),c.push(0,S,0),p.push(.5,.5),m++;for(h=m,r=0;r<=n;r++){var k=r/n,E=k*a+s,M=Math.cos(E),T=Math.sin(E);_.x=x*T,_.y=g*S,_.z=x*M,d.push(_.x,_.y,_.z),c.push(0,S,0),v.x=.5*M+.5,v.y=.5*T*S+.5,p.push(v.x,v.y),m++}for(r=0;r<n;r++){var C=o+r,O=h+r;!0===i?u.push(O,O+1,C):u.push(O+1,O,C),w+=3}l.addGroup(b,w,!0===i?1:2),b+=w}At.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a};var l=this;t=void 0!==t?t:20,e=void 0!==e?e:20,i=void 0!==i?i:100,n=Math.floor(n)||8,r=Math.floor(r)||1,o=void 0!==o&&o,s=void 0!==s?s:0,a=void 0!==a?a:2*Math.PI;var u=[],d=[],c=[],p=[],m=0,v=[],g=i/2,b=0;!function(){var o,h,f=new y,_=new y,w=0,x=(e-t)/i;for(h=0;h<=r;h++){var S=[],k=h/r,E=k*(e-t)+t;for(o=0;o<=n;o++){var M=o/n,T=M*a+s,C=Math.sin(T),O=Math.cos(T);_.x=E*C,_.y=-k*i+g,_.z=E*O,d.push(_.x,_.y,_.z),f.set(C,x,O).normalize(),c.push(f.x,f.y,f.z),p.push(M,1-k),S.push(m++)}v.push(S)}for(o=0;o<n;o++)for(h=0;h<r;h++){var P=v[h][o],A=v[h+1][o],D=v[h+1][o+1],I=v[h][o+1];u.push(P,A,I),u.push(A,D,I),w+=6}l.addGroup(b,w,0),b+=w}(),!1===o&&(t>0&&h(!0),e>0&&h(!1)),this.setIndex(u),this.addAttribute("position",new Ct(d,3)),this.addAttribute("normal",new Ct(c,3)),this.addAttribute("uv",new Ct(p,2))}function _i(t,e,i,n,r,o,s){yi.call(this,0,t,e,i,n,r,o,s),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:o,thetaLength:s}}function wi(t,e,i,n,r,o,s){bi.call(this,0,t,e,i,n,r,o,s),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:o,thetaLength:s}}function xi(t,e,i,n){kt.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new Si(t,e,i,n)),this.mergeVertices()}function Si(t,e,i,n){At.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},t=t||50,e=void 0!==e?Math.max(3,e):8,i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI;var r,o,s=[],a=[],h=[],l=[],u=new y,d=new f;for(a.push(0,0,0),h.push(0,0,1),l.push(.5,.5),o=0,r=3;o<=e;o++,r+=3){var c=i+o/e*n;u.x=t*Math.cos(c),u.y=t*Math.sin(c),a.push(u.x,u.y,u.z),h.push(0,0,1),d.x=(a[r]/t+1)/2,d.y=(a[r+1]/t+1)/2,l.push(d.x,d.y)}for(r=1;r<=e;r++)s.push(r,r+1,0);this.setIndex(s),this.addAttribute("position",new Ct(a,3)),this.addAttribute("normal",new Ct(h,3)),this.addAttribute("uv",new Ct(l,2))}function ki(t){at.call(this,{uniforms:Md.merge([Ed.lights,{opacity:{value:1}}]),vertexShader:Td.shadow_vert,fragmentShader:Td.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}}}),this.setValues(t)}function Ei(t){at.call(this,t),this.type="RawShaderMaterial"}function Mi(t){st.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new it(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new f(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ti(t){Mi.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function Ci(t){st.call(this),this.type="MeshPhongMaterial",this.color=new it(16777215),this.specular=new it(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new f(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=nu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Oi(t){Ci.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function Pi(t){st.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new f(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ai(t){st.call(this),this.type="MeshLambertMaterial",this.color=new it(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=nu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Di(t){st.call(this),this.type="LineDashedMaterial",this.color=new it(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(t)}function Ii(t,e,i){var n=this,r=!1,o=0,s=0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){s++,!1===r&&void 0!==n.onStart&&n.onStart(t,o,s),r=!0},this.itemEnd=function(t){o++,void 0!==n.onProgress&&n.onProgress(t,o,s),o===s&&(r=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(t){void 0!==n.onError&&n.onError(t)}}function Ri(t){this.manager=void 0!==t?t:Fd}function Li(t){this.manager=void 0!==t?t:Fd,this._parser=null}function Ni(t){this.manager=void 0!==t?t:Fd,this._parser=null}function Fi(t){this.manager=void 0!==t?t:Fd}function zi(t){this.manager=void 0!==t?t:Fd}function Bi(t){this.manager=void 0!==t?t:Fd}function ji(t,e){yt.call(this),this.type="Light",this.color=new it(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Ui(t,e,i){ji.call(this,t,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(yt.DefaultUp),this.updateMatrix(),this.groundColor=new it(e)}function Hi(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new f(512,512),this.map=null,this.matrix=new b}function Vi(){Hi.call(this,new wt(50,1,.5,500))}function Gi(t,e,i,n,r,o){ji.call(this,t,e),this.type="SpotLight",this.position.copy(yt.DefaultUp),this.updateMatrix(),this.target=new yt,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new Vi}function Wi(t,e,i,n){ji.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new Hi(new wt(90,1,.5,500))}function Yi(){Hi.call(this,new _t(-5,5,5,-5,.5,500))}function $i(t,e){ji.call(this,t,e),this.type="DirectionalLight",this.position.copy(yt.DefaultUp),this.updateMatrix(),this.target=new yt,this.shadow=new Yi}function qi(t,e){ji.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function Xi(t,e,i,n){ji.call(this,t,e),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==i?i:10,this.height=void 0!==n?n:10}function Zi(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i}function Ki(t,e,i,n){Zi.call(this,t,e,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Qi(t,e,i,n){Zi.call(this,t,e,i,n)}function Ji(t,e,i,n){Zi.call(this,t,e,i,n)}function tn(t,e,i,n){if(void 0===t)throw new Error("track name is undefined");if(void 0===e||0===e.length)throw new Error("no keyframes in track named "+t);this.name=t,this.times=zd.convertArray(e,this.TimeBufferType),this.values=zd.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation),this.validate(),this.optimize()}function en(t,e,i,n){tn.call(this,t,e,i,n)}function nn(t,e,i,n){Zi.call(this,t,e,i,n)}function rn(t,e,i,n){tn.call(this,t,e,i,n)}function on(t,e,i,n){tn.call(this,t,e,i,n)}function sn(t,e,i,n){tn.call(this,t,e,i,n)}function an(t,e,i){tn.call(this,t,e,i)}function hn(t,e,i,n){tn.call(this,t,e,i,n)}function ln(t,e,i,n){tn.apply(this,arguments)}function un(t,e,i){this.name=t,this.tracks=i,this.duration=void 0!==e?e:-1,this.uuid=md.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function dn(t){this.manager=void 0!==t?t:Fd,this.textures={}}function cn(t){this.manager=void 0!==t?t:Fd}function fn(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function pn(t){"boolean"===typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:Fd,this.withCredentials=!1}function mn(t){this.manager=void 0!==t?t:Fd,this.texturePath=""}function vn(t,e,i,n,r){var o=.5*(n-e),s=.5*(r-i),a=t*t;return(2*i-2*n+o+s)*(t*a)+(-3*i+3*n-2*o-s)*a+o*t+i}function gn(t,e){var i=1-t;return i*i*e}function yn(t,e){return 2*(1-t)*t*e}function bn(t,e){return t*t*e}function _n(t,e,i,n){return gn(t,e)+yn(t,i)+bn(t,n)}function wn(t,e){var i=1-t;return i*i*i*e}function xn(t,e){var i=1-t;return 3*i*i*t*e}function Sn(t,e){return 3*(1-t)*t*t*e}function kn(t,e){return t*t*t*e}function En(t,e,i,n,r){return wn(t,e)+xn(t,i)+Sn(t,n)+kn(t,r)}function Mn(){this.arcLengthDivisions=200}function Tn(t,e){Mn.call(this),this.v1=t,this.v2=e}function Cn(){Mn.call(this),this.curves=[],this.autoClose=!1}function On(t,e,i,n,r,o,s,a){Mn.call(this),this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=s,this.aRotation=a||0}function Pn(t){Mn.call(this),this.points=void 0===t?[]:t}function An(t,e,i,n){Mn.call(this),this.v0=t,this.v1=e,this.v2=i,this.v3=n}function Dn(t,e,i){Mn.call(this),this.v0=t,this.v1=e,this.v2=i}function In(t){Cn.call(this),this.currentPoint=new f,t&&this.fromPoints(t)}function Rn(){In.apply(this,arguments),this.holes=[]}function Ln(){this.subPaths=[],this.currentPath=null}function Nn(t){this.data=t}function Fn(t){this.manager=void 0!==t?t:Fd}function zn(t){this.manager=void 0!==t?t:Fd}function Bn(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new wt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new wt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function jn(){yt.call(this),this.type="AudioListener",this.context=Yd.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Un(t){yt.call(this),this.type="Audio",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Hn(t){Un.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Vn(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Gn(t,e,i){this.binding=t,this.valueSize=i;var n,r=Float64Array;switch(e){case"quaternion":n=this._slerp;break;case"string":case"bool":r=Array,n=this._select;break;default:n=this._lerp}this.buffer=new r(4*i),this._mixBufferRegion=n,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Wn(t,e,i){var n=i||Yn.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,n)}function Yn(t,e,i){this.path=e,this.parsedPath=i||Yn.parseTrackName(e),this.node=Yn.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function $n(t){var e=arguments;this.uuid=md.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var i={};this._indicesByUUID=i;for(var n=0,r=arguments.length;n!==r;++n)i[e[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var o=this;this.stats={objects:{get total(){return o._objects.length},get inUse(){return this.total-o.nCachedObjects_}},get bindingsPerObject(){return o._bindings.length}}}function qn(t,e,i){this._mixer=t,this._clip=e,this._localRoot=i||null;for(var n=e.tracks,r=n.length,o=new Array(r),s={endingStart:id,endingEnd:id},a=0;a!==r;++a){var h=n[a].createInterpolant(null);o[a]=h,h.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ed,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Xn(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Zn(t){"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function Kn(){At.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Qn(t,e,i,n){this.uuid=md.generateUUID(),this.data=t,this.itemSize=e,this.offset=i,this.normalized=!0===n}function Jn(t,e){this.uuid=md.generateUUID(),this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function tr(t,e,i){Jn.call(this,t,e),this.meshPerAttribute=i||1}function er(t,e,i){Et.call(this,t,e),this.meshPerAttribute=i||1}function ir(t,e,i,n){this.ray=new Ft(t,e),this.near=i||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function nr(t,e){return t.distance-e.distance}function rr(t,e,i,n){if(!1!==t.visible&&(t.raycast(e,i),!0===n))for(var r=t.children,o=0,s=r.length;o<s;o++)rr(r[o],e,i,!0)}function or(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function sr(t,e,i){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==i?i:0,this}function ar(t,e,i){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==i?i:0,this}function hr(t,e,i,n){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==i?i:16711680,o=void 0!==n?n:1,s=0,a=this.object.geometry;a&&a.isGeometry?s=3*a.faces.length:a&&a.isBufferGeometry&&(s=a.attributes.normal.count);var h=new At,l=new Ct(2*s*3,3);h.addAttribute("position",l),Ie.call(this,h,new Ae({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function lr(t){var e=[];t&&t.isBone&&e.push(t);for(var i=0;i<t.children.length;i++)e.push.apply(e,lr(t.children[i]));return e}function ur(t){for(var e=lr(t),i=new At,n=[],r=[],o=new it(0,0,1),s=new it(0,1,0),a=0;a<e.length;a++){var h=e[a];h.parent&&h.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(o.r,o.g,o.b),r.push(s.r,s.g,s.b))}i.addAttribute("position",new Ct(n,3)),i.addAttribute("color",new Ct(r,3));var l=new Ae({vertexColors:Ml,depthTest:!1,depthWrite:!1,transparent:!0});Ie.call(this,i,l),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.onBeforeRender()}function dr(t,e){yt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;var i=new qe(e);i.rotateY(.5*Math.PI);var n=new Nt({vertexColors:Ml,wireframe:!0}),r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.addAttribute("color",new Et(o,3)),this.add(new jt(i,n)),this.update()}function cr(t,e,i,n){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==i?i:16776960,o=void 0!==n?n:1,s=0,a=this.object.geometry;a&&a.isGeometry?s=a.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var h=new At,l=new Ct(2*s*3,3);h.addAttribute("position",l),Ie.call(this,h,new Ae({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function fr(t){function e(t,e,n){i(t,n),i(e,n)}function i(t,e){o.push(0,0,0),s.push(e.r,e.g,e.b),void 0===a[t]&&(a[t]=[]),a[t].push(o.length/3-1)}var n=new At,r=new Ae({color:16777215,vertexColors:El}),o=[],s=[],a={},h=new it(16755200),l=new it(16711680),u=new it(43775),d=new it(16777215),c=new it(3355443);e("n1","n2",h),e("n2","n4",h),e("n4","n3",h),e("n3","n1",h),e("f1","f2",h),e("f2","f4",h),e("f4","f3",h),e("f3","f1",h),e("n1","f1",h),e("n2","f2",h),e("n3","f3",h),e("n4","f4",h),e("p","n1",l),e("p","n2",l),e("p","n3",l),e("p","n4",l),e("u1","u2",u),e("u2","u3",u),e("u3","u1",u),e("c","t",d),e("p","c",c),e("cn1","cn2",c),e("cn3","cn4",c),e("cf1","cf2",c),e("cf3","cf4",c),n.addAttribute("position",new Ct(o,3)),n.addAttribute("color",new Ct(s,3)),Ie.call(this,n,r),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function pr(){function t(t,o,s,a){e=t,i=s,n=-3*t+3*o-2*s-a,r=2*t-2*o+s+a}var e=0,i=0,n=0,r=0;return{initCatmullRom:function(e,i,n,r,o){t(i,n,o*(n-e),o*(r-i))},initNonuniformCatmullRom:function(e,i,n,r,o,s,a){var h=(i-e)/o-(n-e)/(o+s)+(n-i)/s,l=(n-i)/s-(r-i)/(s+a)+(r-n)/a;h*=s,l*=s,t(i,n,h,l)},calc:function(t){var o=t*t;return e+i*t+n*o+r*(o*t)}}}function mr(t){Mn.call(this),t.length<2&&console.warn("THREE.CatmullRomCurve3: Points array needs at least two entries."),this.points=t||[],this.closed=!1}function vr(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),mr.call(this,t),this.type="catmullrom"}function gr(t,e){return void 0!==t?t:e}function yr(){var t=window.location.protocol;return null===t.match(/http(s)?:/gi)?"http:":t}function br(t){var e,i,n,r=["gz"];e="undefined"!==typeof window&&t instanceof window.File||"undefined"!==typeof window&&t instanceof window.Blob?t.name||"":t;var o=e.lastIndexOf("?");e=e.substring(0,-1===o?e.length:o);var s=e.replace(/^.*[\\/]/,""),a=s.substring(0,s.lastIndexOf(".")),h=s.split("."),l=h.length>1?h.pop().toLowerCase():"",u=e.match(/^(.+):\/\/(.+)$/);u&&(n=u[1].toLowerCase(),e=u[2]);var d=e.substring(0,e.lastIndexOf("/")+1);if(r.includes(l)){i=l;var c=e.length-l.length-1;l=e.substr(0,c).split(".").pop().toLowerCase();var f=a.length-l.length-1;a=a.substr(0,f)}else i=!1;return{path:e,name:s,ext:l,base:a,dir:d,compressed:i,protocol:n,src:t}}function _r(t,e){return t<e?-1:t>e?1:0}function wr(t,e,i){void 0===i&&(i=_r);for(var n=0,r=t.length-1;n<=r;){var o=n+r>>1,s=i(e,t[o]);if(s>0)n=o+1;else{if(!(s<0))return o;r=o-1}}return-n-1}function xr(t,e){var i=t.length-1;if(t[i]<e)return-1;for(var n=0;n<=i;){var r=n+i>>1;t[r]>=e?i=r-1:n=r+1}return i+1}function Sr(t,e){if(t[0]>e)return-1;for(var i=0,n=t.length-1;i<=n;){var r=i+n>>1;t[r]>e?n=r-1:i=r+1}return i-1}function kr(t,e,i){var n=xr(t,e),r=Sr(t,i);return-1===n||-1===r||n>r?0:r-n+1}function Er(t){return t.sort().filter(function(t,e,i){return 0===e||t!==i[e-1]})}function Mr(t){if(t.length>28672){for(var e=[],i=0;i<t.length;i+=28672)e.push(String.fromCharCode.apply(null,t.subarray(i,i+28672)));return e.join("")}return String.fromCharCode.apply(null,t)}function Tr(t,e,i){e=void 0!==e?e:10485760,i=void 0!==i?i:"\n";for(var n="",r=[],o=0;o<t.length;o+=e){var s=Mr(t.subarray(o,o+e)),a=s.lastIndexOf(i);if(-1===a)n+=s;else{var h=n+s.substr(0,a);r=r.concat(h.split(i)),n=a===s.length-i.length?"":s.substr(a+i.length)}}return""!==n&&r.push(n),r}function Cr(t,e){switch(t){case"int8":return new Int8Array(e);case"int16":return new Int16Array(e);case"int32":return new Int32Array(e);case"uint8":return new Uint8Array(e);case"uint16":return new Uint16Array(e);case"uint32":return new Uint32Array(e);case"float32":return new Float32Array(e);default:throw new Error("arrayType unknown: "+t)}}function Or(t,e){return new(e>65535?Uint32Array:Uint16Array)(t)}function Pr(t,e){return t instanceof e?t:new e(t)}function Ar(t,e){return void 0===t?t=new e:Array.isArray(t)&&(t=(new e).fromArray(t)),t}function Dr(t){return Ar(t,f)}function Ir(t){return Ar(t,y)}function Rr(t){return Ar(t,b)}function Lr(t){return Ar(t,g)}function Nr(t){return Pr(t,Float32Array)}function Fr(t){return gr(t,"").toString().toLowerCase()}function zr(t){var e=t;return t.forEach(function(t){t.__deps&&Array.prototype.push.apply(e,zr(t.__deps))}),e}function Br(t){return Er(zr(t)).map(function(t){return t.toString()}).join("\n\n\n")}function jr(t){var e=t.data.__name,i=t.data.__postId;if(void 0===e)console.error("message __name undefined");else if(void 0===self.func)console.error("worker func undefined",e);else{var n=function(t,e){t=t||{},void 0!==i&&(t.__postId=i);try{self.postMessage(t,e)}catch(e){console.error("self.postMessage:",e),self.postMessage(t)}};self.func(t,n)}}function Ur(t,e){var i="'use strict';\n\n"+Br(e);return i+="\n\n\nself.func = "+t.toString()+";",i+="\n\n\nself.onmessage = "+jr.toString()+";",new window.Blob([i],{type:"application/javascript"})}function Hr(t){return.01745*t}function Vr(t){return 57.29578*t}function Gr(){for(var t,e=0,i=0;i<36;i++)8===i||13===i||18===i||23===i?Tf[i]="-":14===i?Tf[i]="4":(e<=2&&(e=33554432+16777216*Math.random()|0),t=15&e,e>>=4,Tf[i]=Mf[19===i?3&t|8:t]);return Tf.join("")}function Wr(t){return t-=t>>1&1431655765,16843009*((t=(858993459&t)+(t>>2&858993459))+(t>>4)&252645135)>>24}function Yr(t,e,i){return(t-e)/(i-e)}function $r(t,e,i){return Math.max(e,Math.min(i,t))}function qr(t){return $r(t,0,100)}function Xr(t){return $r(t,0,1)}function Zr(t,e,i){return t+(e-t)*i}function Kr(t,e,i,n,r,o){var s=(i-t)*o,a=(n-e)*o,h=r*r;return(2*e-2*i+s+a)*(r*h)+(-3*e+3*i-2*s-a)*h+s*r+e}function Qr(t,e,i){return(i=Xr(Yr(i,t,e)))*i*(3-2*i)}function Jr(t,e,i){if(t>e)return t;var n=2*i-e,r=2*e-3*i,o=t/e;return(n*o+r)*o*o+i}function to(t,e,i,n,r){this._listener=e,this._isOnce=i,this.context=n,this._signal=t,this._priority=r||0}function eo(t,e){if("function"!==typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))}function io(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){io.prototype.dispatch.apply(t,arguments)}}function no(t,e){if(void 0===e.atomname&&void 0===e.element&&void 0===e.altloc&&void 0===e.atomindex&&void 0===e.keyword&&void 0===e.inscode&&void 0===e.resname&&void 0===e.sstruc&&void 0===e.resno&&void 0===e.chainname&&void 0===e.model)return-1;if(void 0!==e.keyword){if(e.keyword===Af.BACKBONE&&!t.isBackbone())return!1;if(e.keyword===Af.SIDECHAIN&&!t.isSidechain())return!1;if(e.keyword===Af.BONDED&&!t.isBonded())return!1;if(e.keyword===Af.RING&&!t.isRing())return!1;if(e.keyword===Af.HETERO&&!t.isHetero())return!1;if(e.keyword===Af.PROTEIN&&!t.isProtein())return!1;if(e.keyword===Af.NUCLEIC&&!t.isNucleic())return!1;if(e.keyword===Af.RNA&&!t.isRna())return!1;if(e.keyword===Af.DNA&&!t.isDna())return!1;if(e.keyword===Af.POLYMER&&!t.isPolymer())return!1;if(e.keyword===Af.WATER&&!t.isWater())return!1;if(e.keyword===Af.HELIX&&!t.isHelix())return!1;if(e.keyword===Af.SHEET&&!t.isSheet())return!1;if(e.keyword===Af.TURN&&!t.isTurn())return!1;if(e.keyword===Af.ION&&!t.isIon())return!1;if(e.keyword===Af.SACCHARIDE&&!t.isSaccharide())return!1}if(void 0!==e.atomname&&e.atomname!==t.atomname)return!1;if(void 0!==e.element&&e.element!==t.element)return!1;if(void 0!==e.altloc&&e.altloc!==t.altloc)return!1;if(void 0!==e.atomindex&&wr(e.atomindex,t.index)<0)return!1;if(void 0!==e.resname)if(Array.isArray(e.resname)){if(!e.resname.includes(t.resname))return!1}else if(e.resname!==t.resname)return!1;if(void 0!==e.sstruc&&e.sstruc!==t.sstruc)return!1;if(void 0!==e.resno)if(Array.isArray(e.resno)&&2===e.resno.length){if(e.resno[0]>t.resno||e.resno[1]<t.resno)return!1}else if(e.resno!==t.resno)return!1;return(void 0===e.inscode||e.inscode===t.inscode)&&((void 0===e.chainname||e.chainname===t.chainname)&&(void 0===e.model||e.model===t.modelIndex))}function ro(t,e){if(void 0===e.resname&&void 0===e.resno&&void 0===e.inscode&&void 0===e.sstruc&&void 0===e.model&&void 0===e.chainname&&void 0===e.atomindex&&(void 0===e.keyword||If.includes(e.keyword)))return-1;if(void 0!==e.keyword){if(e.keyword===Af.HETERO&&!t.isHetero())return!1;if(e.keyword===Af.PROTEIN&&!t.isProtein())return!1;if(e.keyword===Af.NUCLEIC&&!t.isNucleic())return!1;if(e.keyword===Af.RNA&&!t.isRna())return!1;if(e.keyword===Af.DNA&&!t.isDna())return!1;if(e.keyword===Af.POLYMER&&!t.isPolymer())return!1;if(e.keyword===Af.WATER&&!t.isWater())return!1;if(e.keyword===Af.HELIX&&!t.isHelix())return!1;if(e.keyword===Af.SHEET&&!t.isSheet())return!1;if(e.keyword===Af.TURN&&!t.isTurn())return!1;if(e.keyword===Af.ION&&!t.isIon())return!1;if(e.keyword===Af.SACCHARIDE&&!t.isSaccharide())return!1}if(void 0!==e.atomindex&&0===kr(e.atomindex,t.atomOffset,t.atomEnd))return!1;if(void 0!==e.resname)if(Array.isArray(e.resname)){if(!e.resname.includes(t.resname))return!1}else if(e.resname!==t.resname)return!1;if(void 0!==e.sstruc&&e.sstruc!==t.sstruc)return!1;if(void 0!==e.resno)if(Array.isArray(e.resno)&&2===e.resno.length){if(e.resno[0]>t.resno||e.resno[1]<t.resno)return!1}else if(e.resno!==t.resno)return!1;return(void 0===e.inscode||e.inscode===t.inscode)&&((void 0===e.chainname||e.chainname===t.chainname)&&(void 0===e.model||e.model===t.modelIndex))}function oo(t,e){if(void 0===e.chainname&&void 0===e.model&&void 0===e.atomindex&&(void 0===e.keyword||!Rf.includes(e.keyword)||!t.entity))return-1;if(void 0!==e.keyword){if(e.keyword===Af.POLYMER&&!t.entity.isPolymer())return!1;if(e.keyword===Af.WATER&&!t.entity.isWater())return!1}return(void 0===e.atomindex||0!==kr(e.atomindex,t.atomOffset,t.atomEnd))&&((void 0===e.chainname||e.chainname===t.chainname)&&(void 0===e.model||e.model===t.modelIndex))}function so(t,e){return void 0===e.model&&void 0===e.atomindex?-1:(void 0===e.atomindex||0!==kr(e.atomindex,t.atomOffset,t.atomEnd))&&(void 0===e.model||e.model===t.index)}function ao(t){ep=t}function ho(t){ip=t}function lo(t){var e=br(t),i=hp.get(e.protocol);return i&&(e=br(i.getUrl(e.src)),!e.ext&&i.getExt&&(e.ext=i.getExt(t))),e}function uo(t,e){var i,n=Object.assign(lo(t),e);if(up.names.includes(n.ext)?i=xp:["ngl","js"].includes(n.ext)?i=Ep:"plugin"===n.ext&&(i=Mp),i){return new i(n.src,n).load()}return Promise.reject(new Error("autoLoad: ext '"+n.ext+"' unknown"))}function co(){this.signals={updated:new io},this.begin(),this.maxDuration=-1/0,this.minDuration=1/0,this.avgDuration=14,this.lastDuration=1/0,this.prevFpsTime=0,this.lastFps=1/0,this.lastFrames=1,this.frames=0,this.count=0}function fo(t){if(void 0===t)return"";var e=[];for(var i in t){var n=t[i];!1!==n&&e.push("#define "+i+" "+n)}return e.join("\n")+"\n"}function po(t,e){e=e||{};var i=t+"|";for(var n in e)i+=n+":"+e[n];if(!Op[i]){var r=fo(e),o=dp.get("shader/"+t);if(!o)throw new Error("empty shader, '"+t+"'");o=o.replace(Cp,function(t,e){var i="shader/chunk/"+e+".glsl";return dp.get(i)||Td[e]||""}),Op[i]=r+o}return Op[i]}function mo(t,e,i,n){function r(e){var n=e%l,r=Math.floor(e/l),o=n*m,s=r*v;i.camera.setViewOffset(m*l,v*l,o,s,m,v),i.render(),u?g.drawImage(t.domElement,Math.floor(o/2),Math.floor(s/2),Math.ceil(m/2),Math.ceil(v/2)):g.drawImage(t.domElement,Math.floor(o),Math.floor(s),Math.ceil(m),Math.ceil(v)),"function"===typeof d&&d(e+1,f,!1)}function o(){i.setSampling(y),i.camera.view=null,"function"===typeof c&&c(f+1,f,!1)}function s(){for(var t=0;t<=f;++t)t===f?o():r(t)}function a(){function t(){e===f?o():r(e),e+=1}for(var e=0,i=0;i<=f;++i)setTimeout(t,0,i)}var h=n||{},l=void 0!==h.factor?h.factor:2,u=void 0!==h.antialias&&h.antialias,d=h.onProgress,c=h.onFinish;u&&(l*=2);var f=l*l,p=document.createElement("canvas"),m=i.width,v=i.height;u?(p.width=m*l/2,p.height=v*l/2):(p.width=m*l,p.height=v*l);var g=p.getContext("2d"),y=i.sampleLevel;i.setSampling(-1),this.render=s,this.renderAsync=a,this.canvas=p}function vo(t,e,i,n,r){i=i||1,n=n||0;var o,s,a,h=r?r.length:t.length/i,l=0,u=0;if(r)for(s=0;s<h;++s)a=(t[r[s]*i+n]+e)%e,o=a/e*Np-Math.PI,l+=Math.cos(o),u+=Math.sin(o);else for(s=n;s<h;s+=i)a=(t[s]+e)%e,o=a/e*Np-Math.PI,l+=Math.cos(o),u+=Math.sin(o);return l/=h,u/=h,(Math.atan2(u,l)+Math.PI)/Np*e}function go(t,e,i,n){var r=t.length;i=i||new Float32Array(r),n=n||0;for(var o=0;o<r;o+=3)i[n+o+0]=(t[o+0]+e[o+0])/2,i[n+o+1]=(t[o+1]+e[o+1])/2,i[n+o+2]=(t[o+2]+e[o+2])/2;return i}function yo(t,e,i){for(var n=i||new Float32Array(t),r=0;r<t;++r)n[r]=e;return n}function bo(t,e,i,n,r){for(var o,s=r||new Float32Array(3*t),a=0;a<t;++a)o=3*a,s[o+0]=e,s[o+1]=i,s[o+2]=n;return s}function _o(t,e){var i=t.length;e=e||new y;for(var n=0;n<i;n+=3)e.x+=t[n],e.y+=t[n+1],e.z+=t[n+2];return e.divideScalar(i/3),e}function wo(t){for(var e=new Float32Array(t),i=0;i<t;++i)e[i]=i;return e}function xo(t,e,i,n){void 0===i&&(i=0);for(var r=n||new Float32Array(t*e),o=0;o<t;++o)for(var s=i+o*e,a=0;a<e;++a)r[s+a]=o;return r}function So(t,e){for(var i=t.length,n=new Float32Array(i),r=0;r<i;r++)n[r]=Math.min(t[r],e[r]);return n}function ko(t,e,i,n,r){for(var o=0;o<r;++o)e[n+o]=t[i+o]}function Eo(t,e,i,n){ko(t,t,e,i,n)}function Mo(t,e,i,n){function r(e,i){c=t[e],t[e]=t[i],t[i]=c}e=e||function(t,e){return t>e?1:t<e?-1:0},i=i||0,n=(n||t.length)-1;for(var o,s,a=[],h=-1,l=i,u=n,d=0,c=0;;)if(u-l<=25){for(s=l+1;s<=u;++s){for(d=t[s],o=s-1;o>=l&&e(t[o],d)>0;)t[o+1]=t[o],--o;t[o+1]=d}if(-1===h)break;u=a[h--],l=a[h--]}else{var f=l+u>>1;for(o=l+1,s=u,r(f,o),e(t[l],t[u])>0&&r(l,u),e(t[o],t[u])>0&&r(o,u),e(t[l],t[o])>0&&r(l,o),d=t[o];;){do{o++}while(e(t[o],d)<0);do{s--}while(e(t[s],d)>0);if(s<o)break;r(o,s)}t[l+1]=t[s],t[s]=d,u-o+1>=s-l?(a[++h]=o,a[++h]=u,u=s-1):(a[++h]=l,a[++h]=s-1,l=o)}return t}function To(t){for(var e=-1/0,i=0,n=t.length;i<n;++i)t[i]>e&&(e=t[i]);return e}function Co(t){for(var e=1/0,i=0,n=t.length;i<n;++i)t[i]<e&&(e=t[i]);return e}function Oo(t){for(var e=t.length,i=0,n=0;n<e;++n)i+=t[n];return i}function Po(t){return Oo(t)/t.length}function Ao(t){for(var e=t.length,i=0,n=0;n<e;++n){var r=t[n];i+=r*r}return Math.sqrt(i/e)}function Do(t,e,i,n,r){var o,s,a,h,l=t.height,u=t.width,d=t.getContext("2d"),c=d.getImageData(0,0,u,l).data;for(a=!1,s=0;s<l;s++){for(o=0;o<u;o++)if(h=4*(s*u+o),c[h]!==e||c[h+1]!==i||c[h+2]!==n||c[h+3]!==r){a=!0;break}if(a)break}var f=s;for(a=!1,o=0;o<u;o++){for(s=0;s<l;s++)if(h=4*(s*u+o),c[h]!==e||c[h+1]!==i||c[h+2]!==n||c[h+3]!==r){a=!0;break}if(a)break}var p=o;for(a=!1,s=l-1;s>=0;s--){for(o=u-1;o>=0;o--)if(h=4*(s*u+o),c[h]!==e||c[h+1]!==i||c[h+2]!==n||c[h+3]!==r){a=!0;break}if(a)break}var m=s;for(a=!1,o=u-1;o>=0;o--){for(s=l-1;s>=0;s--)if(h=4*(s*u+o),c[h]!==e||c[h+1]!==i||c[h+2]!==n||c[h+3]!==r){a=!0;break}if(a)break}var v=o,g=document.createElement("canvas");return g.width=v-p,g.height=m-f,g.getContext("2d").drawImage(t,p,f,g.width,g.height,0,0,g.width,g.height),g}function Io(t,e){function i(e){var i=a;h&&(i*=2),e&&(i=1/i),t.scene.traverse(function(t){var e=t.material;e&&e.linewidth&&(e.linewidth*=i),e&&e.uniforms&&e.uniforms.size&&void 0===e.uniforms.size.__seen&&(e.uniforms.size.value*=i,e.uniforms.size.__seen=!0)}),t.scene.traverse(function(t){var e=t.material;e&&e.uniforms&&e.uniforms.size&&delete e.uniforms.size.__seen})}function n(t){if(s){var e=f;return Do(t,l?0:255*e.r,l?0:255*e.g,l?0:255*e.b,l?0:255)}return t}function r(t,e,i){"function"===typeof o.onProgress&&o.onProgress(t,e,i)}var o=e||{},s=gr(o.trim,!1),a=gr(o.factor,1),h=gr(o.antialias,!1),l=gr(o.transparent,!1),u=t.renderer,d=t.camera,c=u.getClearAlpha(),f=u.getClearColor();return new Promise(function(e){function o(o,a){n(s.canvas).toBlob(function(n){u.setClearAlpha(c),i(!0),t.requestRender(),r(a,a,!0),e(n)},"image/png")}var s=new mo(u,d,t,{factor:a,antialias:h,onProgress:r,onFinish:o});u.setClearAlpha(l?0:1),i(),s.renderAsync()})}function Ro(t,e){t.traverseVisible(function(t){if(t instanceof Ne&&t.sortParticles){var i=t.geometry.attributes,n=i.position.count;if(0!==n){zp.multiplyMatrices(e.matrixWorldInverse,t.matrixWorld),Bp.multiplyMatrices(e.projectionMatrix,zp);var r,o,s,a;t.userData.sortData?(r=t.userData.sortData,s=r.__zArray,o=r.__sortArray,a=r.__cmpFn):(s=new Float32Array(n),o=new Uint32Array(n),a=function(t,e){var i=s[t],n=s[e];return i>n?1:i<n?-1:0},r={__zArray:s,__sortArray:o,__cmpFn:a},t.userData.sortData=r);for(var h=0;h<n;++h)Fp.fromArray(i.position.array,3*h),Fp.applyMatrix4(Bp),s[h]=-Fp.z,o[h]=h;Mo(o,a);var l,u,d,c;for(var f in i){var p=i[f],m=p.array,v=p.itemSize;r[f]||(r[f]=new Float32Array(v*n)),c=r[f],r[f]=m;for(var g=0;g<n;++g){l=o[g];for(var y=0;y<v;++y)u=l*v+y,d=g*v+y,c[d]=m[u]}i[f].array=c,i[f].needsUpdate=!0}}}})}function Lo(t,e,i,n,r){var o=i.getSize().height,s=i.getPixelRatio(),a="OrthographicCamera"===e.type;jp.getInverse(e.projectionMatrix),Up.copy(e.projectionMatrix).transpose(),t.traverse(function(t){var e=t.material;if(e){var i=t.material.uniforms;if(i){if(e.clipNear){var h=(50-e.clipNear)/50,l=n-r*h;i.nearClip.value=l}i.canvasHeight&&(i.canvasHeight.value=o),i.pixelRatio&&(i.pixelRatio.value=s),i.projectionMatrixInverse&&i.projectionMatrixInverse.value.copy(jp),i.projectionMatrixTranspose&&i.projectionMatrixTranspose.value.copy(Up),i.ortho&&(i.ortho.value=a)}}})}function No(t,e,i,n,r){var o=r.uniforms,s=[];if(o.objectId&&(o.objectId.value=ep?this.id:this.id/255,s.push("objectId")),(o.modelViewMatrixInverse||o.modelViewMatrixInverseTranspose||o.modelViewProjectionMatrix||o.modelViewProjectionMatrixInverse)&&this.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,this.matrixWorld),o.modelViewMatrixInverse&&(o.modelViewMatrixInverse.value.getInverse(this.modelViewMatrix),s.push("modelViewMatrixInverse")),o.modelViewMatrixInverseTranspose&&(o.modelViewMatrixInverse?o.modelViewMatrixInverseTranspose.value.copy(o.modelViewMatrixInverse.value).transpose():o.modelViewMatrixInverseTranspose.value.getInverse(this.modelViewMatrix).transpose(),s.push("modelViewMatrixInverseTranspose")),o.modelViewProjectionMatrix&&(i.updateProjectionMatrix(),o.modelViewProjectionMatrix.value.multiplyMatrices(i.projectionMatrix,this.modelViewMatrix),s.push("modelViewProjectionMatrix")),o.modelViewProjectionMatrixInverse&&(o.modelViewProjectionMatrix?(Gp.copy(o.modelViewProjectionMatrix.value),o.modelViewProjectionMatrixInverse.value.getInverse(Gp)):(i.updateProjectionMatrix(),Gp.multiplyMatrices(i.projectionMatrix,this.modelViewMatrix),o.modelViewProjectionMatrixInverse.value.getInverse(Gp)),s.push("modelViewProjectionMatrixInverse")),s.length){var a=t.properties.get(r);if(a.program){var h=t.getContext(),l=a.program;h.useProgram(l.program);var u=l.getUniforms();s.forEach(function(t){u.setValue(h,t,o[t].value)})}}}function Fo(t){function e(){K||(K=new Se),tt=new Fe,tt.name="rotationGroup",K.add(tt),et=new Fe,et.name="translationGroup",tt.add(et),nt=new Fe,nt.name="modelGroup",et.add(nt),rt=new Fe,rt.name="pickingGroup",et.add(rt),ot=new Fe,ot.name="backgroundGroup",et.add(ot),st=new Fe,st.name="helperGroup",et.add(st),K.fog=new xe,Q=new Gi(Y.lightColor,Y.lightIntensity),K.add(Q),J=new qi(Y.ambientLight,Y.ambientIntensity),K.add(J)}function i(){var t=yt.geometry.attributes.position,e=t.array,i=bt.min,n=bt.max;e[0]=n.x,e[1]=n.y,e[2]=n.z,e[3]=i.x,e[4]=n.y,e[5]=n.z,e[6]=i.x,e[7]=i.y,e[8]=n.z,e[9]=n.x,e[10]=i.y,e[11]=n.z,e[12]=n.x,e[13]=n.y,e[14]=i.z,e[15]=i.x,e[16]=n.y,e[17]=i.z,e[18]=i.x,e[19]=i.y,e[20]=i.z,e[21]=n.x,e[22]=i.y,e[23]=i.z,t.needsUpdate=!0,bt.isEmpty()||yt.geometry.computeBoundingSphere()}function n(t,e){e?e.forEach(function(e){r(t,e)}):r(t),t.background?(ot.add(t.group),ot.add(t.wireframeGroup)):(nt.add(t.group),nt.add(t.wireframeGroup)),t.pickable&&rt.add(t.pickingGroup),rp&&i()}function r(t,e){function i(n){n instanceof Fe?n.children.forEach(i):(n.userData.buffer=t,n.userData.instance=e,n.onBeforeRender=No)}var n=t.getMesh();e&&n.applyMatrix(e.matrix),i(n),t.group.add(n);var r=t.getWireframeMesh();if(e&&(r.matrix.copy(n.matrix),r.position.copy(n.position),r.quaternion.copy(n.quaternion),r.scale.copy(n.scale)),i(r),t.wireframeGroup.add(r),t.pickable){var o=t.getPickingMesh();e&&(o.matrix.copy(n.matrix),o.position.copy(n.position),o.quaternion.copy(n.quaternion),o.scale.copy(n.scale)),i(o),t.pickingGroup.add(o)}e?s(t.geometry,t.matrix,e.matrix):s(t.geometry,t.matrix)}function o(t){et.children.forEach(function(e){e.remove(t.group),e.remove(t.wireframeGroup)}),t.pickable&&rt.remove(t.pickingGroup),s(),rp&&i()}function s(t,e,i){function n(t,e,i){t.boundingBox||t.computeBoundingBox();var n=t.boundingBox.clone();e&&n.applyMatrix4(e),i&&n.applyMatrix4(i),n.min.equals(n.max)&&n.expandByScalar(5),bt.union(n)}function r(t){if(void 0!==t.geometry){var e,i;t.userData.buffer&&(e=t.userData.buffer.matrix),t.userData.instance&&(i=t.userData.instance.matrix),n(t.geometry,e,i)}}t?n(t,e,i):(bt.makeEmpty(),nt.traverse(r),ot.traverse(r)),bt.getSize(xt),St=xt.length()}function a(){var t=N*F*4,e=ep?new Float32Array(t):new Uint8Array(t);return D(!0),ht.readRenderTargetPixels(dt,0,0,N,F,e),e}function h(t){return new Promise(function(e){if(t){var i=N*F*4,n=a();if(ep){for(var r=new Uint8Array(i),o=0;o<i;++o)r[o]=Math.round(255*n[o]);n=r}var s=document.createElement("canvas");s.width=N,s.height=F;var h=s.getContext("2d"),l=h.getImageData(0,0,N,F);l.data.set(n),h.putImageData(l,0,0),s.toBlob(e,"image/png")}else ht.domElement.toBlob(e,"image/png")})}function l(t){return Io(this,t)}function u(t,e,i,n){var r=Y;void 0!==t&&r.lightColor.set(t),void 0!==e&&(r.lightIntensity=e),void 0!==i&&r.ambientColor.set(i),void 0!==n&&(r.ambientIntensity=n),S()}function d(t,e,i){var n=Y;void 0!==t&&n.fogColor.set(t),void 0!==e&&(n.fogNear=e),void 0!==i&&(n.fogFar=i),S()}function c(t){var e=Y;t&&e.backgroundColor.set(t),d(e.backgroundColor),ht.setClearColor(e.backgroundColor,0),ht.domElement.style.backgroundColor=e.backgroundColor.getStyle(),S()}function f(t){void 0!==t&&(Y.sampleLevel=t,V=t),S()}function p(t,e){var i=Y;t&&(i.cameraType=t),e&&(i.cameraFov=e),"orthographic"===i.cameraType?Z!==X&&(Z=X,Z.position.copy(q.position),Z.up.copy(q.up),k()):Z!==q&&(Z=q,Z.position.copy(X.position),Z.up.copy(X.up)),q.fov=i.cameraFov,Z.updateProjectionMatrix(),S()}function m(t,e,i){var n=Y;void 0!==t&&(n.clipNear=t),void 0!==e&&(n.clipFar=e),void 0!==i&&(n.clipDist=i),S()}function g(t,e){N=t||1,F=e||1,q.aspect=N/F,X.left=-N/2,X.right=N/2,X.top=F/2,X.bottom=-F/2,Z.updateProjectionMatrix();var i=window.devicePixelRatio;ht.setPixelRatio(i),ht.setSize(N,F);var n=N*i,r=F*i;dt.setSize(n,r),ct.setSize(n,r),ft.setSize(n,r),S()}function b(){if(R===document.body)g(window.innerWidth,window.innerHeight);else{var t=R.getBoundingClientRect();g(t.width,t.height)}}function _(t){var e=Mt.memory,i=Mt.render;if(t)e.programs=0,e.geometries=0,e.textures=0,i.calls=0,i.vertices=0,i.faces=0,i.points=0;else{var n=ht.info,r=n.memory,o=n.render;e.programs=r.programs,e.geometries=r.geometries,e.textures=r.textures,i.calls+=o.calls,i.vertices+=o.vertices,i.faces+=o.faces,i.points+=o.points}}function w(){if(L.ticked.dispatch($),window.performance.now()-$.startTime>500&&!H&&V<3&&-1!==V){var t=V;V=3,j=!0,D(),H=!0,V=t,rp&&np.log("rendered still frame")}window.requestAnimationFrame(w)}function x(t,e){t*=window.devicePixelRatio,e*=window.devicePixelRatio;var i,n,r,o=ep?Hp:Vp;D(!0),ht.readRenderTargetPixels(dt,t,e,1,1,o),i=ep?Math.round(255*o[0])<<16&16711680|Math.round(255*o[1])<<8&65280|255&Math.round(255*o[2]):o[0]<<16|o[1]<<8|o[2];var s=Math.round(o[3]),a=rt.getObjectById(s);return a&&(n=a.userData.instance,r=a.userData.buffer.picking),{pid:i,instance:n,picker:r}}function S(){j||(window.performance.now()-$.startTime>22&&($.begin(),H=!1),j=!0,window.requestAnimationFrame(function(){D(),$.update()}))}function k(){var t=Hr(q.fov),e=2*Math.tan(t/2)*-Z.position.z;X.zoom=F/e}function E(){var t=Y;G=kt.copy(Z.position).length(),G||(Z.position.set(0,0,t.cameraZ),G=Math.abs(t.cameraZ)),W=Math.max(10,.5*St),((W+=bt.getCenter(kt).length())===1/0||W===-1/0||isNaN(W))&&(W=50);var e=(50-t.clipNear)/50,i=-(50-t.clipFar)/50;Z.near=G-W*e,Z.far=G+W*i;var n=(50-t.fogNear)/50,r=-(50-t.fogFar)/50,o=K.fog;o.color.set(t.fogColor),o.near=G-W*n,o.far=G+W*r,"PerspectiveCamera"===Z.type?(Z.near=Math.max(.1,t.clipDist,Z.near),Z.far=Math.max(1,Z.far),o.near=Math.max(.1,o.near),o.far=Math.max(1,o.far)):"OrthographicCamera"===Z.type&&0===t.clipNear&&t.clipDist>0&&G+Z.zoom>2*-t.clipDist&&(Z.near+=Z.zoom+t.clipDist)}function M(){Z.updateMatrix(),Z.updateMatrixWorld(!0),Z.matrixWorldInverse.getInverse(Z.matrixWorld),Z.updateProjectionMatrix(),Lo(K,Z,ht,G,W),Ro(K,Z)}function T(t,e,i,n){nt.visible=t,rt.visible=e,ot.visible=i,st.visible=n}function C(){kt.copy(Z.position).setLength(100*St),Q.position.copy(Z.position).add(kt),Q.color.set(Y.lightColor),Q.intensity=Y.lightIntensity,J.color.set(Y.ambientColor),J.intensity=Y.ambientIntensity}function O(){ht.clearTarget(dt),T(!1,!0,!1,!1),ht.render(K,Z,dt),_(),ht.setRenderTarget(null)}function P(t){t?ht.clearTarget(t):ht.clear(),T(!1,!1,!0,!1),ht.render(K,Z,t),t?ht.clearTarget(t,!1,!0,!1):ht.clearDepth(),_(),T(!0,!1,!1,rp),ht.render(K,Z,t),_()}function A(){var t=Lp[Math.max(0,Math.min(V,5))],e=1/t.length;pt.tForeground.value=ct.texture;for(var i=ct.width,n=ct.height,r=0;r<t.length;++r){var o=t[r];Z.setViewOffset(i,n,o[0],o[1],i,n),M();var s=e;s+=1/32*((r+.5)/t.length-.5),pt.scale.value=s,P(ct),ht.render(gt,vt,ft,0===r)}pt.scale.value=1,pt.tForeground.value=ft.texture,ht.render(gt,vt,null,!0),Z.view=null}function D(t){if(B)return void np.warn("tried to call 'render' from within 'render'");B=!0,E(),M(),C(),_(!0),t?U||O():V>0?A():P(),U=t,B=!1,j=!1}function I(){np.log("scene cleared"),K.remove(tt),e(),ht.clear()}var R,L={ticked:new io};R="string"===typeof t?document.getElementById(t):t instanceof window.Element?t:document.createElement("div");var N,F;if(R===document.body)N=window.innerWidth||1,F=window.innerHeight||1;else{var z=R.getBoundingClientRect();N=z.width||1,F=z.height||1}var B,j,U,H,V,G,W,Y;!function(){Y={fogColor:new it(0),fogNear:50,fogFar:100,backgroundColor:new it(0),cameraType:"perspective",cameraFov:40,cameraZ:-80,clipNear:0,clipFar:100,clipDist:10,lightColor:new it(14540253),lightIntensity:1,ambientColor:new it(14540253),ambientIntensity:.2,sampleLevel:0}}();var $;!function(){$=new co}();var q,X,Z;!function(){var t=new y(0,0,0);q=new wt(Y.cameraFov,N/F),q.position.z=Y.cameraZ,q.lookAt(t),X=new _t(N/-2,N/2,F/2,F/-2),X.position.z=Y.cameraZ,X.lookAt(t),Z="orthographic"===Y.cameraType?X:q,Z.updateProjectionMatrix()}();var K,Q,J,tt,et,nt,rt,ot,st;e();var ht,ut,dt,ct,ft,pt,mt,vt,gt;if(!1===function(){var t=window.devicePixelRatio;try{ht=new _e({preserveDrawingBuffer:!0,alpha:!0,antialias:!0})}catch(t){return R.innerHTML=op,!1}ht.setPixelRatio(t),ht.setSize(N,F),ht.autoClear=!1,ht.sortObjects=!0,ho(ht.extensions.get("EXT_frag_depth")),ht.extensions.get("OES_element_index_uint"),ao(ht.extensions.get("OES_texture_float")&&ht.extensions.get("WEBGL_color_buffer_float")||"Chrome"===Jf&&ht.extensions.get("OES_texture_float")),R.appendChild(ht.domElement);var e=N*t,i=F*t;ht.extensions.get("OES_texture_float"),ut=ht.extensions.get("OES_texture_half_float"),ht.extensions.get("WEBGL_color_buffer_float"),dt=new v(e,i,{minFilter:wu,magFilter:wu,stencilBuffer:!1,format:Uu,type:ep?Iu:Tu}),dt.texture.generateMipmaps=!1,ct=new v(e,i,{minFilter:ku,magFilter:ku,format:Uu}),ft=new v(e,i,{minFilter:wu,magFilter:wu,format:Uu,type:tp?Tu:ut?Ru:ep?Iu:Tu}),pt={tForeground:{type:"t",value:null},scale:{type:"f",value:1}},mt=new at({uniforms:pt,vertexShader:po("Quad.vert"),fragmentShader:po("Quad.frag"),premultipliedAlpha:!0,transparent:!0,blending:Ol,depthTest:!1,depthWrite:!1}),vt=new _t(-1,1,1,-1,0,1),gt=(new Se).add(new jt(new Rt(2,2),mt))}())return this.container=R,void np.error("Viewer: could not initialize renderer");var yt,bt=new lt,xt=new y,St=0;!function(){var t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),e=new Float32Array(24),i=new At;i.setIndex(new Et(t,1)),i.addAttribute("position",new Et(e,3));var n=new at({uniforms:{uColor:{value:new it("skyblue")}},vertexShader:po("BasicLine.vert"),fragmentShader:po("BasicLine.frag"),linewidth:2});yt=new Ie(i,n),st.add(yt)}(),c(),d();var kt=new y,Mt={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};this.container=R,this.stats=$,this.signals=L,this.rotationGroup=tt,this.translationGroup=et,this.add=n,this.remove=o,this.clear=I,this.getPickingPixels=a,this.getImage=h,this.makeImage=l,this.setLight=u,this.setFog=d,this.setBackground=c,this.setSampling=f,this.setCamera=p,this.setClip=m,this.setSize=g,this.handleResize=b,this.pick=x,this.requestRender=S,this.render=D,this.animate=w,this.updateZoom=k,this.updateHelper=i,this.renderer=ht,this.scene=K,this.perspectiveCamera=q,this.boundingBox=bt,this.updateBoundingBox=function(){s(),rp&&i()},Object.defineProperties(this,{camera:{get:function(){return Z}},width:{get:function(){return N}},height:{get:function(){return F}},sampleLevel:{get:function(){return V}}})}function zo(t){var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY;return Math.sqrt(e*e+i*i)}function Bo(t){if("object"===typeof t){if("buttons"in t)return t.buttons;if("which"in t){var e=t.which;if(2===e)return 4;if(3===e)return 2;if(e>0)return 1<<e-1}else if("button"in t){var i=t.button;if(1===i)return 4;if(2===i)return 2;if(i>=0)return 1<<i}}return 0}function jo(t,e,i){return t.distanceTo(e)<t.distanceTo(i)}function Uo(t){var e=t.split(/[-+]/),i="";e.includes("scroll")&&(i="scroll"),e.includes("drag")&&(i="drag"),e.includes("click")&&(i="click"),e.includes("hover")&&(i="hover"),e.includes("clickPick")&&(i="clickPick"),e.includes("hoverPick")&&(i="hoverPick");var n=0;e.includes("alt")&&(n+=1),e.includes("ctrl")&&(n+=2),e.includes("meta")&&(n+=4),e.includes("shift")&&(n+=8);var r=0;return e.includes("left")&&(r+=1),e.includes("right")&&(r+=2),e.includes("middle")&&(r+=4),[i,n,r]}function Ho(t){var e,i=t.length,n=t.length/3,r=0,o=0,s=0;for(e=0;e<i;e+=3)r+=t[e+0],o+=t[e+1],s+=t[e+2];return new y(r/n,o/n,s/n)}function Vo(t,e,i){return i?t.sub(i).projectOnVector(e).add(i):t.projectOnVector(e),t}function Go(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,o=-1/0,s=-1/0,a=0,h=t.length;a<h;a+=3){var l=t[a],u=t[a+1],d=t[a+2];l<e&&(e=l),u<i&&(i=u),d<n&&(n=d),l>r&&(r=l),u>o&&(o=u),d>s&&(s=d)}return[qo([e,i,n]),qo([r,o,s])]}function Wo(t,e){for(var i=0,n=e.length;i<n;i+=3){var r=e[i],o=e[i+1],s=e[i+2];e[i]=t[0]*r+t[4]*o+t[8]*s+t[12],e[i+1]=t[1]*r+t[5]*o+t[9]*s+t[13],e[i+2]=t[2]*r+t[6]*o+t[10]*s+t[14]}}function Yo(t,e){for(var i=0,n=e.length;i<n;i+=3){var r=e[i],o=e[i+1],s=e[i+2];e[i]=t[0]*r+t[3]*o+t[6]*s,e[i+1]=t[1]*r+t[4]*o+t[7]*s,e[i+2]=t[2]*r+t[5]*o+t[8]*s}}function $o(t){for(var e=0,i=t.length;e<i;e+=3){var n=t[e],r=t[e+1],o=t[e+2],s=1/Math.sqrt(n*n+r*r+o*o);t[e]=n*s,t[e+1]=r*s,t[e+2]=o*s}}function qo(t){return new Float32Array(t||3)}function Xo(t,e,i){var n=e[0],r=e[1],o=e[2],s=i[0],a=i[1],h=i[2];t[0]=r*h-o*a,t[1]=o*s-n*h,t[2]=n*a-r*s}function Zo(t,e,i){t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2]}function Ko(t,e,i){t[0]=e[i],t[1]=e[i+1],t[2]=e[i+2]}function Qo(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}function Jo(t,e,i){ts(t,e,1/i)}function ts(t,e,i){t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i}function es(t,e){ts(t,e,1/Qo(e))}function is(t,e,i){t[0]=e[0]-i,t[1]=e[1]-i,t[2]=e[2]-i}function ns(t,e,i){t[0]=e[0]+i,t[1]=e[1]+i,t[2]=e[2]+i}function rs(t,e){t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2])}function os(t,e){t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2])}function ss(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2]}function as(t){return t-=t>>>1&1431655765,16843009*((t=(858993459&t)+(t>>>2&858993459))+(t>>>4)&252645135)>>>24}function hs(t,e){this.type=t,this.scale=e||1,this.max=10}function ls(t,e){this.cols=t,this.rows=e,this.size=this.cols*this.rows,this.data=new Float32Array(this.size)}function us(t,e){for(var i=0,n=0,r=e.rows,o=e.cols,s=0,a=0,h=0,l=e.data,u=t.data;i<r;a+=1,s+=o,i++)for(h=a,n=0;n<o;h+=r,n++)u[h]=l[s+n]}function ds(t,e,i){for(var n=0,r=0,o=0,s=0,a=0,h=0,l=0,u=e.cols,d=e.rows,c=i.rows,f=e.data,p=i.data,m=t.data,v=0;n<d;s+=u,n++)for(h=0,r=0;r<c;l++,r++){for(a=s,v=0,o=0;o<u;a++,h++,o++)v+=f[a]*p[h];m[l]=v}}function cs(t,e){var i=t.data,n=e.data,r=i[4],o=i[8],s=i[5],a=i[7],h=i[0],l=h*r,u=h*s,d=i[3],c=i[1],f=d*c,p=i[2],m=d*p,v=i[6],g=v*c,y=v*p,b=1/(l*o-u*a-f*o+m*a+g*s-y*r);n[0]=(r*o-s*a)*b,n[1]=-(c*o-p*a)*b,n[2]=-(-c*s+p*r)*b,n[3]=-(d*o-s*v)*b,n[4]=(h*o-y)*b,n[5]=-(u-m)*b,n[6]=-(-d*a+r*v)*b,n[7]=-(h*a-g)*b,n[8]=(l-f)*b}function fs(t){var e=t.data;return e[0]*e[4]*e[8]-e[0]*e[5]*e[7]-e[3]*e[1]*e[8]+e[3]*e[2]*e[7]+e[6]*e[1]*e[5]-e[6]*e[2]*e[4]}function ps(t,e,i){var n=t.data,r=e.data,o=i.data,s=r[0],a=r[1],h=r[2],l=r[3],u=r[4],d=r[5],c=r[6],f=r[7],p=r[8],m=o[0],v=o[1],g=o[2],y=o[3],b=o[4],_=o[5],w=o[6],x=o[7],S=o[8];n[0]=s*m+a*y+h*w,n[1]=s*v+a*b+h*x,n[2]=s*g+a*_+h*S,n[3]=l*m+u*y+d*w,n[4]=l*v+u*b+d*x,n[5]=l*g+u*_+d*S,n[6]=c*m+f*y+p*w,n[7]=c*v+f*b+p*x,n[8]=c*g+f*_+p*S}function ms(t){var e,i,n=0,r=t.rows,o=t.cols,s=t.data,a=new Array(o);for(i=0;i<o;++i)a[i]=0;for(e=0;e<r;++e)for(i=0;i<o;++i,++n)a[i]+=s[n];for(i=0;i<o;++i)a[i]/=r;return a}function vs(t,e){var i,n,r=0,o=t.rows,s=t.cols,a=t.data;for(i=0;i<o;++i)for(n=0;n<s;++n,++r)a[r]-=e[n]}function gs(t,e){var i,n,r=0,o=t.rows,s=t.cols,a=t.data;for(i=0;i<o;++i)for(n=0;n<s;++n,++r)a[r]+=e[n]}function ys(t,e,i,n){n=t[e],t[e]=t[i],t[i]=n}function bs(t,e){return t=Math.abs(t),e=Math.abs(e),t>e?(e/=t,t*Math.sqrt(1+e*e)):e>0?(t/=e,e*Math.sqrt(1+t*t)):0}function _s(t,e,i,n,r,o,s,a){for(var h=2*zv,l=Bv,u=0,d=0,c=0,f=0,p=Math.max(o,30),m=0,v=0,g=0,y=0,b=0,_=0,w=0,x=0,S=0,k=0,E=0,M=0,T=0,C=0,O=0,P=0,A=0,D=4660,I=0,R=0,L=0,N=new Float64Array(s<<3);u<s;u++){for(c=0,E=0;c<o;c++)x=t[u*e+c],E+=x*x;if(N[u]=E,n){for(c=0;c<s;c++)n[u*r+c]=0;n[u*r+u]=1}}for(;f<p;f++){for(b=0,u=0;u<s-1;u++)for(d=u+1;d<s;d++){for(m=u*e|0,v=d*e|0,O=N[u],P=0,A=N[d],c=2,P+=t[m]*t[v],P+=t[m+1]*t[v+1];c<o;c++)P+=t[m+c]*t[v+c];if(!(Math.abs(P)<=h*Math.sqrt(O*A))){for(P*=2,M=O-A,T=bs(P,M),M<0?(C=.5*(T-M),w=Math.sqrt(C/T),_=P/(T*w*2)):(_=Math.sqrt((T+M)/(2*T)),w=P/(T*_*2)),O=0,A=0,c=2,S=_*t[m]+w*t[v],k=-w*t[m]+_*t[v],t[m]=S,t[v]=k,O+=S*S,A+=k*k,S=_*t[m+1]+w*t[v+1],k=-w*t[m+1]+_*t[v+1],t[m+1]=S,t[v+1]=k,O+=S*S,A+=k*k;c<o;c++)S=_*t[m+c]+w*t[v+c],k=-w*t[m+c]+_*t[v+c],t[m+c]=S,t[v+c]=k,O+=S*S,A+=k*k;if(N[u]=O,N[d]=A,b=1,n)for(g=u*r|0,y=d*r|0,c=2,S=_*n[g]+w*n[y],k=-w*n[g]+_*n[y],n[g]=S,n[y]=k,S=_*n[g+1]+w*n[y+1],k=-w*n[g+1]+_*n[y+1],n[g+1]=S,n[y+1]=k;c<s;c++)S=_*n[g+c]+w*n[y+c],k=-w*n[g+c]+_*n[y+c],n[g+c]=S,n[y+c]=k}}if(0===b)break}for(u=0;u<s;u++){for(c=0,E=0;c<o;c++)x=t[u*e+c],E+=x*x;N[u]=Math.sqrt(E)}for(u=0;u<s-1;u++){for(d=u,c=u+1;c<s;c++)N[d]<N[c]&&(d=c);if(u!==d&&(ys(N,u,d,E),n)){for(c=0;c<o;c++)ys(t,u*e+c,d*e+c,x);for(c=0;c<s;c++)ys(n,u*r+c,d*r+c,x)}}for(u=0;u<s;u++)i[u]=N[u];if(n)for(u=0;u<a;u++){for(E=u<s?N[u]:0;E<=l;){for(R=1/o,c=0;c<o;c++)D=214013*D+2531011,I=0!==(256&D>>16)?R:-R,t[u*e+c]=I;for(f=0;f<2;f++)for(d=0;d<u;d++){for(E=0,c=0;c<o;c++)E+=t[u*e+c]*t[d*e+c];for(L=0,c=0;c<o;c++)x=t[u*e+c]-E*t[d*e+c],t[u*e+c]=x,L+=Math.abs(x);for(L=L?1/L:0,c=0;c<o;c++)t[u*e+c]*=L}for(E=0,c=0;c<o;c++)x=t[u*e+c],E+=x*x;E=Math.sqrt(E)}for(w=1/E,c=0;c<o;c++)t[u*e+c]*=w}}function ws(t,e,i,n){var r=0,o=0,s=t.rows,a=t.cols,h=s,l=a;h<l&&(r=1,o=h,h=l,l=o);var u=new ls(h,h),d=new ls(1,l),c=new ls(l,l);if(0===r)us(u,t);else{for(o=0;o<a*s;o++)u.data[o]=t.data[o];for(;o<l*h;o++)u.data[o]=0}if(_s(u.data,h,d.data,c.data,l,h,l,h),e){for(o=0;o<l;o++)e.data[o]=d.data[o];for(;o<a;o++)e.data[o]=0}0===r?(i&&us(i,u),n&&us(n,c)):(i&&us(i,c),n&&us(n,u))}function xs(){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function Ss(t,e,i,n,r,o,s,a,h,l,u,d,c,f,p,m,v){t[0]=e,t[4]=i,t[8]=n,t[12]=r,t[1]=o,t[5]=s,t[9]=a,t[13]=h,t[2]=l,t[6]=u,t[10]=d,t[14]=c,t[3]=f,t[7]=p,t[11]=m,t[15]=v}function ks(t,e,i){var n=e[0],r=e[4],o=e[8],s=e[12],a=e[1],h=e[5],l=e[9],u=e[13],d=e[2],c=e[6],f=e[10],p=e[14],m=e[3],v=e[7],g=e[11],y=e[15],b=i[0],_=i[4],w=i[8],x=i[12],S=i[1],k=i[5],E=i[9],M=i[13],T=i[2],C=i[6],O=i[10],P=i[14],A=i[3],D=i[7],I=i[11],R=i[15];t[0]=n*b+r*S+o*T+s*A,t[4]=n*_+r*k+o*C+s*D,t[8]=n*w+r*E+o*O+s*I,t[12]=n*x+r*M+o*P+s*R,t[1]=a*b+h*S+l*T+u*A,t[5]=a*_+h*k+l*C+u*D,t[9]=a*w+h*E+l*O+u*I,t[13]=a*x+h*M+l*P+u*R,t[2]=d*b+c*S+f*T+p*A,t[6]=d*_+c*k+f*C+p*D,t[10]=d*w+c*E+f*O+p*I,t[14]=d*x+c*M+f*P+p*R,t[3]=m*b+v*S+g*T+y*A,t[7]=m*_+v*k+g*C+y*D,t[11]=m*w+v*E+g*O+y*I,t[15]=m*x+v*M+g*P+y*R}function Es(t,e,i,n){Ss(t,e,0,0,0,0,i,0,0,0,0,n,0,0,0,0,1)}function Ms(t,e,i,n){Ss(t,1,0,0,e,0,1,0,i,0,0,1,n,0,0,0,1)}function Ts(t,e){var i=Math.cos(e),n=Math.sin(e);Ss(t,i,0,n,0,0,1,0,0,-n,0,i,0,0,0,0,1)}function Cs(){return new Float32Array([1,0,0,0,1,0,0,0,1])}function Os(t,e){var i=qo([e[0],e[1],e[2]]),n=qo([e[4],e[5],e[6]]),r=qo([e[8],e[9],e[10]]),o=qo();Xo(o,n,r),t[0]=o[0],t[1]=o[1],t[2]=o[2],Xo(o,r,i),t[3]=o[0],t[4]=o[1],t[5]=o[2],Xo(o,i,n),t[6]=o[0],t[7]=o[1],t[8]=o[2]}function Ps(t,e){function i(t,e,i,n){for(var r=n*n,s=Math.max(0,t-n-a>>o),f=Math.max(0,e-n-h>>o),p=Math.max(0,i-n-l>>o),y=Math.min(u,t+n-a>>o),_=Math.min(d,e+n-h>>o),w=Math.min(c,i+n-l>>o),x=[],S=s;S<=y;++S)for(var k=f;k<=_;++k)for(var M=p;M<=w;++M){var C=(S*d+k)*c+M,P=b[C];if(P>0)for(var A=P-1,D=T[A],I=E[A],R=D+I,L=D;L<R;++L){var N=O[L],F=m[N]-t,z=v[N]-e,B=g[N]-i;F*F+z*z+B*B<=r&&x.push(N)}}return x}var n,r,o=3,s=e,a=s.min.x,h=s.min.y,l=s.min.z,u=1+(s.max.x-a>>o),d=1+(s.max.y-h>>o),c=1+(s.max.z-l>>o),f=u*d*c,p=t.count,m=t.x,v=t.y,g=t.z,y=0,b=new Uint32Array(f),_=new Int32Array(p);for(n=0;n<p;++n){var w=m[n]-a>>o,x=v[n]-h>>o,S=g[n]-l>>o,k=(w*d+x)*c+S;1===(b[k]+=1)&&(y+=1),_[n]=k}var E=new Uint16Array(y);for(n=0,r=0;n<f;++n){var M=b[n];M>0&&(b[n]=r+1,E[r]=M,r+=1)}var T=new Uint32Array(y);for(n=1;n<y;++n)T[n]+=T[n-1]+E[n-1];var C=new Uint16Array(y),O=new Int32Array(p);for(n=0;n<p;++n){var P=b[_[n]];if(P>0){var A=P-1;O[T[A]+C[A]]=n,C[A]+=1}}this.within=i}function As(t){var e=0,i=0,n={},r={},o=window.URL.createObjectURL(sp.get(t)),s=new window.Worker(o);sp.activeWorkerCount+=1,s.onmessage=function(i){e-=1;var o=i.data.__postId;rp&&np.timeEnd("Worker.postMessage "+t+" #"+o),n[o]&&n[o].call(s,i),delete n[o],delete r[o]},s.onerror=function(i){if(e-=1,i.data){var o=i.data.__postId;r[o]?r[o].call(s,i):np.error("Worker.onerror",o,t,i),delete n[o],delete r[o]}else np.error("Worker.onerror",t,i)},this.name=t,this.post=function(o,a,h,l){n[i]=h,r[i]=l,o=o||{},o.__name=t,o.__postId=i,o.__debug=rp,rp&&np.time("Worker.postMessage "+t+" #"+i);try{s.postMessage(o,a)}catch(t){np.error("worker.post:",t),s.postMessage(o)}return e+=1,i+=1,this},this.terminate=function(){s?(s.terminate(),window.URL.revokeObjectURL(o),sp.activeWorkerCount-=1):np.log("no worker to terminate")},Object.defineProperties(this,{postCount:{get:function(){return i}},pending:{get:function(){return e}}})}function Ds(t,e){e=Math.min(8,e||2);var i=[],n=0;this.name=t,this.maxCount=e,this.post=function(t,e,i,n){return this.getNextWorker().post(t,e,i,n),this},this.terminate=function(){i.forEach(function(t){t.terminate()})},this.getNextWorker=function(){for(var r,o=1/0,s=0;s<e;++s){if(s>=n){r=new As(t),i.push(r),n+=1;break}var a=i[s];if(0===a.pending){r=a;break}a.pending<o&&(o=a.pending,r=a)}return r},Object.defineProperties(this,{count:{get:function(){return n}}})}function Is(){return new Uint32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0])}function Rs(){return new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}function Ls(){return[[0,4,4,4,2,0,0,0,2,2,0,0],[4,0,4,4,0,8,0,0,0,8,8,0],[4,4,0,4,0,0,8,0,0,0,8,8],[4,4,4,0,0,0,0,1,1,0,0,1],[2,0,0,0,0,8,8,8,2,2,0,0],[0,8,0,0,8,0,8,8,0,8,8,0],[0,0,8,0,8,8,0,8,0,0,8,8],[0,0,0,1,8,8,8,0,1,0,0,1],[2,0,0,1,2,0,0,1,0,2,0,1],[2,8,0,0,2,8,0,0,2,0,8,0],[0,8,8,0,0,8,8,0,0,8,0,8],[0,0,8,1,0,0,8,1,1,0,8,0]]}function Ns(t,e,i,n,r){function o(t,e,i){return t+(e-t)*i}function s(t,r,o){return t=(t+g)%e,r=(r+y)%i,o=(o+b)%n,M*o+E*r+t}function a(t,e,i,n,s,a,h){var l=x?3*t:t;if(p[l]<0){var u=(_-a)/(h-a),d=f,c=3*m;if(C[c+0]=i+u,C[c+1]=n,C[c+2]=s,!w){var v=3*t;O[c]=-o(d[v],d[v+3],u),O[c+1]=-o(d[v+1],d[v+4],u),O[c+2]=-o(d[v+2],d[v+5],u)}r&&(A[m]=r[t+Math.round(u)]),p[l]=m,T[e]=m,m+=1}else T[e]=p[l]}function h(t,e,i,n,s,a,h){var l=x?3*t+1:t;if(p[l]<0){var u=(_-a)/(h-a),d=f,c=3*m;if(C[c]=i,C[c+1]=n+u,C[c+2]=s,!w){var v=3*t,g=v+3*E;O[c]=-o(d[v],d[g],u),O[c+1]=-o(d[v+1],d[g+1],u),O[c+2]=-o(d[v+2],d[g+2],u)}r&&(A[m]=r[t+Math.round(u)*E]),p[l]=m,T[e]=m,m+=1}else T[e]=p[l]}function l(t,e,i,n,s,a,h){var l=x?3*t+2:t;if(p[l]<0){var u=(_-a)/(h-a),d=f,c=3*m;if(C[c]=i,C[c+1]=n,C[c+2]=s+u,!w){var v=3*t,g=v+3*M;O[c]=-o(d[v],d[g],u),O[c+1]=-o(d[v+1],d[g+1],u),O[c+2]=-o(d[v+2],d[g+2],u)}r&&(A[m]=r[t+Math.round(u)*M]),p[l]=m,T[e]=m,m+=1}else T[e]=p[l]}function u(e){var i=3*e;0===f[i]&&(f[i]=t[(e-1+k)%k]-t[(e+1)%k],f[i+1]=t[(e-E+k)%k]-t[(e+E)%k],f[i+2]=t[(e-M+k)%k]-t[(e+M)%k])}function d(e,i,n,r,o){var d,c,f,p,m,g,y;S?(r=s(e,i,n),d=s(e+1,i,n),c=s(e,i+1,n),f=s(e,i,n+1),p=s(e+1,i+1,n),m=s(e+1,i,n+1),g=s(e,i+1,n+1),y=s(e+1,i+1,n+1)):(d=r+1,c=r+E,f=r+M,p=c+1,m=f+1,g=c+M,y=g+1);var b=0,k=t[r],C=t[d],O=t[c],A=t[p],L=t[f],N=t[m],F=t[g],z=t[y];k<_&&(b|=1),C<_&&(b|=2),O<_&&(b|=8),A<_&&(b|=4),L<_&&(b|=16),N<_&&(b|=32),F<_&&(b|=128),z<_&&(b|=64);var B=D[b];if(0===B)return 0;var j=e+1,U=i+1,H=n+1;1&B&&(w||(u(r),u(d)),a(r,0,e,i,n,k,C)),2&B&&(w||(u(d),u(p)),h(d,1,j,i,n,C,A)),4&B&&(w||(u(c),u(p)),a(c,2,e,U,n,O,A)),8&B&&(w||(u(r),u(c)),h(r,3,e,i,n,k,O)),16&B&&(w||(u(f),u(m)),a(f,4,e,i,H,L,N)),32&B&&(w||(u(m),u(y)),h(m,5,j,i,H,N,z)),64&B&&(w||(u(g),u(y)),a(g,6,e,U,H,F,z)),128&B&&(w||(u(f),u(g)),h(f,7,e,i,H,L,F)),256&B&&(w||(u(r),u(f)),l(r,8,e,i,n,k,L)),512&B&&(w||(u(d),u(m)),l(d,9,j,i,n,C,N)),1024&B&&(w||(u(p),u(y)),l(p,10,j,U,n,A,z)),2048&B&&(w||(u(c),u(g)),l(c,11,e,U,n,O,F));for(var V,G,W,Y=b<<4,$=0;-1!==I[Y+$];)V=I[Y+$],G=I[Y+$+1],W=I[Y+$+2],x?(R[V][G]&o&&(P[v++]=T[V],P[v++]=T[G]),R[G][W]&o&&(P[v++]=T[G],P[v++]=T[W]),R[V][W]&o&&(P[v++]=T[V],P[v++]=T[W])):(P[v++]=T[G],P[v++]=T[V],P[v++]=T[W]),$+=3}function c(r,o,a,h,l,u){var c,f,m,v,g,y,b;r=void 0!==r?r:0,o=void 0!==o?o:0,a=void 0!==a?a:0,h=void 0!==h?h:e-1,l=void 0!==l?l:i-1,u=void 0!==u?u:n-1,S||(w?(r=Math.max(0,r),o=Math.max(0,o),a=Math.max(0,a),h=Math.min(e-1,h),l=Math.min(i-1,l),u=Math.min(n-1,u)):(r=Math.max(1,r),o=Math.max(1,o),a=Math.max(1,a),h=Math.min(e-2,h),l=Math.min(i-2,l),u=Math.min(n-2,u)));var k,T,C,O,P,A;if(S)for(k=r-2,T=o-2,C=a-2,O=h+2,P=l+2,A=u+2,g=C;g<A;++g)for(v=T;v<P;++v)for(m=k;m<O;++m)x?(f=3*s(m,v,g),p[f]=-1,p[f+1]=-1,p[f+2]=-1):(c=s(m,v,g),p[c]=-1);else for(k=Math.max(0,r-2),T=Math.max(0,o-2),C=Math.max(0,a-2),O=Math.min(e,h+2),P=Math.min(i,l+2),A=Math.min(n,u+2),g=C;g<A;++g)for(b=M*g,v=T;v<P;++v)for(y=b+E*v,m=k;m<O;++m)x?(c=3*(y+m),p[c]=-1,p[c+1]=-1,p[c+2]=-1):(c=y+m,p[c]=-1);if(!S){var D,I=r,R=o,L=a,N=h,F=l,z=u;for(D=!1,g=a;g<u;++g){for(v=o;v<l;++v){for(m=r;m<h;++m)if(c=e*i*g+e*v+m,t[c]>=_){L=g,D=!0;break}if(D)break}if(D)break}for(D=!1,v=o;v<l;++v){for(g=L;g<u;++g){for(m=r;m<h;++m)if(c=e*i*g+e*v+m,t[c]>=_){R=v,D=!0;break}if(D)break}if(D)break}for(D=!1,m=r;m<h;++m){for(v=R;v<l;++v){for(g=L;g<u;++g)if(c=e*i*g+e*v+m,t[c]>=_){I=m,D=!0;break}if(D)break}if(D)break}for(D=!1,g=u;g>=a;--g){for(v=l;v>=o;--v){for(m=h;m>=r;--m)if(c=e*i*g+e*v+m,t[c]>=_){z=g,D=!0;break}if(D)break}if(D)break}for(D=!1,v=l;v>=o;--v){for(g=z;g>=a;--g){for(m=h;m>=r;--m)if(c=e*i*g+e*v+m,t[c]>=_){F=v,D=!0;break}if(D)break}if(D)break}for(D=!1,m=h;m>=r;--m){for(v=F;v>=o;--v){for(g=z;g>=a;--g)if(c=e*i*g+e*v+m,t[c]>=_){N=m,D=!0;break}if(D)break}if(D)break}w?(r=Math.max(0,I-1),o=Math.max(0,R-1),a=Math.max(0,L-1),h=Math.min(e-1,N+1),l=Math.min(i-1,F+1),u=Math.min(n-1,z+1)):(r=Math.max(1,I-1),o=Math.max(1,R-1),a=Math.max(1,L-1),h=Math.min(e-2,N+1),l=Math.min(i-2,F+1),u=Math.min(n-2,z+1))}var B=15;for(g=a;g<u;++g,B&=-5)for(b=M*g,B|=2,v=o;v<l;++v,B&=-3)for(y=b+E*v,B|=1,m=r;m<h;++m,B&=-2)c=y+m,d(m,v,g,c,B)}var f,p,m,v,g,y,b,_=0,w=!1,x=!1,S=!1,k=e*i*n,E=e,M=e*i,T=new Int32Array(12),C=[],O=[],P=[],A=[],D=Is(),I=Rs(),R=Ls();this.triangulate=function(t,o,s,a,h){_=t,x=a,S=h,(w=o||x)||f||(f=new Float32Array(3*k));var l=x?3*k:k;if(p&&p.length===l||(p=new Int32Array(l)),m=0,v=0,void 0!==s){var u=s[0].map(Math.round),d=s[1].map(Math.round);g=e*Math.ceil(Math.abs(u[0])/e),y=i*Math.ceil(Math.abs(u[1])/i),b=n*Math.ceil(Math.abs(u[2])/n),c(u[0],u[1],u[2],d[0],d[1],d[2])}else g=y=b=0,c();return C.length=3*m,w||(O.length=3*m),P.length=v,r&&(A.length=m),{position:new Float32Array(C),normal:w?void 0:new Float32Array(O),index:Or(P,C.length/3),atomindex:r?new Int32Array(A):void 0,contour:x}}}function Fs(t,e,i,n){i=i||1,n=n||!0;var r,o=t.length/3,s=e.length/3;n&&(r=new Float32Array(3*o));var a,h=new Float32Array(3*o),l=new Array(20);for(a=0;a<20;++a)l[a]=new Uint32Array(o);for(a=0;a<o;++a)l[0][a]=0;var u,d,c;for(a=0;a<s;++a){var f=3*a,p=3*a+1,m=3*a+2;for(c=!0,u=0,d=l[0][e[f]];u<d;++u)if(e[p]===l[u+1][e[f]]){c=!1;break}for(c&&(l[0][e[f]]++,l[l[0][e[f]]][e[f]]=e[p]),c=!0,u=0,d=l[0][e[f]];u<d;++u)if(e[m]===l[u+1][e[f]]){c=!1;break}for(c&&(l[0][e[f]]++,l[l[0][e[f]]][e[f]]=e[m]),c=!0,u=0,d=l[0][e[p]];u<d;++u)if(e[f]===l[u+1][e[p]]){c=!1;break}for(c&&(l[0][e[p]]++,l[l[0][e[p]]][e[p]]=e[f]),c=!0,u=0,d=l[0][e[p]];u<d;++u)if(e[m]===l[u+1][e[p]]){c=!1;break}for(c&&(l[0][e[p]]++,l[l[0][e[p]]][e[p]]=e[m]),c=!0,u=0;u<l[0][e[m]];++u)if(e[f]===l[u+1][e[m]]){c=!1;break}for(c&&(l[0][e[m]]++,l[l[0][e[m]]][e[m]]=e[f]),c=!0,u=0,d=l[0][e[m]];u<d;++u)if(e[p]===l[u+1][e[m]]){c=!1;break}c&&(l[0][e[m]]++,l[l[0][e[m]]][e[m]]=e[p])}for(var v,g,y,b,_,w=0;w<i;++w){for(a=0;a<o;++a)if(v=3*a,(y=l[0][a])<3)h[v]=t[v],h[v+1]=t[v+1],h[v+2]=t[v+2];else if(3===y||4===y){for(h[v]=0,h[v+1]=0,h[v+2]=0,u=0;u<y;++u)g=3*l[u+1][a],h[v]+=t[g],h[v+1]+=t[g+1],h[v+2]+=t[g+2];h[v]+=.5*t[v],h[v+1]+=.5*t[v+1],h[v+2]+=.5*t[v+2],_=.5+y,h[v]/=_,h[v+1]/=_,h[v+2]/=_}else{for(h[v]=0,h[v+1]=0,h[v+2]=0,u=0;u<y;++u)g=3*l[u+1][a],h[v]+=t[g],h[v+1]+=t[g+1],h[v+2]+=t[g+2];h[v]+=1*t[v],h[v+1]+=1*t[v+1],h[v+2]+=1*t[v+2],b=1+y,h[v]/=b,h[v+1]/=b,h[v+2]/=b}if(t.set(h),n){zs(t,e,r);var x=3*o;for(v=0;v<x;v+=3)t[v]+=.75/4.5*-1*r[v],t[v+1]+=.75/4.5*-1*r[v+1],t[v+2]+=.75/4.5*-1*r[v+2]}}}function zs(t,e,i){var n,r;if(void 0===i)i=new Float32Array(t.length);else for(n=0,r=i.length;n<r;n++)i[n]=0;var o=new Float32Array(3),s=new Float32Array(3),a=new Float32Array(3),h=new Float32Array(3),l=new Float32Array(3);if(e)for(n=0,r=e.length;n<r;n+=3){var u=3*e[n],d=3*e[n+1],c=3*e[n+2];Ko(o,t,u),Ko(s,t,d),Ko(a,t,c),Zo(h,a,s),Zo(l,o,s),Xo(h,h,l),i[u]+=h[0],i[u+1]+=h[1],i[u+2]+=h[2],i[d]+=h[0],i[d+1]+=h[1],i[d+2]+=h[2],i[c]+=h[0],i[c+1]+=h[1],i[c+2]+=h[2]}else for(n=0,r=t.length;n<r;n+=9)Ko(o,t,n),Ko(s,t,n+3),Ko(a,t,n+6),Zo(h,a,s),Zo(l,o,s),Xo(h,h,l),i[n]=h[0],i[n+1]=h[1],i[n+2]=h[2],i[n+3]=h[0],i[n+4]=h[1],i[n+5]=h[2],i[n+6]=h[0],i[n+7]=h[1],i[n+8]=h[2];return $o(i),i}function Bs(t){for(var e={},i=0,n=t.length;i<n;++i)e[t[i]]=!0;return e}function js(t,e,i,n,r){var o=1/n*3;o+=i,is(t,t,r+o),ns(e,e,r+o),ts(t,t,n),rs(t,t),Jo(t,t,n),ts(e,e,n),os(e,e),Jo(e,e,n);var s=new Float32Array(3);Zo(s,e,t),ts(s,s,n),os(s,s),ns(s,s,1);var a=256*Math.pow(10,6),h=s[0]*s[1]*s[2]*3;a<=h&&(n*=Math.pow(a/h,1/3),ts(t,t,n),rs(t,t),Jo(t,t,n),ts(e,e,n),os(e,e),Jo(e,e,n),Zo(s,e,t),ts(s,s,n),os(s,s),ns(s,s,1));var l=new Float32Array(t);ss(l,l);var u=xs(),d=xs();Ts(d,Hr(90)),ks(u,u,d);var c=xs();Es(c,-1/n,1/n,1/n),ks(u,u,c);var f=xs();return Ms(f,-n*l[2],-n*l[1],-n*l[0]),ks(u,u,f),{dim:s,tran:l,matrix:u,scaleFactor:n}}function Us(t,e,i,n,r){function o(t,e,i,n,r,o){var a=s.triangulate(t,e,i,r,o);if(e&&!r&&(Fs(a.position,a.index,e,!0),a.normal=zs(a.position,a.index)),n&&(Wo(n,a.position),a.normal)){var h=Cs();Os(h,n),Yo(h,a.normal)}return a}var s=new Ns(t,e,i,n,r);this.getSurface=o}function Hs(t){this.polymer=t,this.size=t.residueCount}function Vs(t){this.polymer=t,this.helixorient=new Hs(t),this.position=this.helixorient.getPosition()}function Gs(t){this.content=[],this.scoreFunction=t}function Ws(t,e){function i(e,n,r,o){e>a&&(a=e);var s=o-r;if(0===s)return-1;var l=4*d;if(d+=1,1===s)return u[l]=r,u[l+1]=-1,u[l+2]=-1,u[l+3]=n,l;var f=r+Math.floor(s/2);c=e%3;for(var p,m,v,g,y,b=r,_=o-1;_>b;){for(v=b+_>>1,g=t[3*h[v]+c],m=h[v],h[v]=h[_],h[_]=m,y=b,p=b;p<_;++p)t[3*h[p]+c]<g&&(m=h[y],h[y]=h[p],h[p]=m,++y);if(m=h[_],h[_]=h[y],h[y]=m,v=y,f===v)break;f<v?_=v-1:b=v+1}return u[l]=f,u[l+1]=i(e+1,l,r,f),u[l+2]=i(e+1,l,f+1,o),u[l+3]=n,l}function n(t){var e=u[t+3];return-1===e?0:n(e)+1}function r(i,r,o){function s(l){function d(t,e){a.push([t,e]),a.size()>r&&a.pop()}var c,f,p=n(l)%3,m=3*h[u[l]],v=[t[m+0],t[m+1],t[m+2]],g=e(i,v),y=u[l+1],b=u[l+2];if(-1===b&&-1===y)return void((a.size()<r||g<a.peek()[1])&&g<=o&&d(l,g));c=-1===b?y:-1===y?b:i[p]<=t[m+p]?y:b,s(c),(a.size()<r||g<a.peek()[1])&&g<=o&&d(l,g);for(var _=[],w=0;w<3;w+=1)_[w]=w===p?i[w]:t[m+w];var x=e(_,v);(a.size()<r||Math.abs(x)<a.peek()[1])&&Math.abs(x)<=o&&-1!==(f=c===y?b:y)&&s(f)}var a=new Gs(function(t){return-t[1]});s(f);for(var l=[],d=0,c=Math.min(a.size(),r);d<c;d+=1)l.push(a.content[d]);return l}function o(e,i){var n=1;if(void 0===e&&(e=f,i=0),-1===e)throw new Error("node is null");var r=i%3,s=u[e+1],a=u[e+2];if(-1!==s){if(t[3*h[u[s]]+r]>t[3*h[u[e]]+r])throw new Error("left child is > parent!");n+=o(s,i+1)}if(-1!==a){if(t[3*h[u[a]]+r]<t[3*h[u[e]]+r])throw new Error("right child is < parent!");n+=o(a,i+1)}return n}for(var s=t.length/3,a=0,h=new Uint32Array(s),l=0;l<s;++l)h[l]=l;var u=new Int32Array(4*s),d=0,c=0,f=i(0,-1,0,s);this.rootIndex=f,this.maxDepth=a,this.nearest=r,this.indices=h,this.nodes=u,this.verify=o}function Ys(t,e){rp&&np.time("Kdtree build");var i;i=e?function(t,e){var i=t[0]-e[0],n=t[1]-e[1],r=t[2]-e[2];return i*i+n*n+r*r}:function(t,e){var i=t[0]-e[0],n=t[1]-e[1],r=t[2]-e[2];return Math.sqrt(i*i+n*n+r*r)};var n=new Float32Array(3*t.atomCount),r=new Uint32Array(t.atomCount),o=0;t.eachAtom(function(t){n[o+0]=t.x,n[o+1]=t.y,n[o+2]=t.z,r[o/3]=t.index,o+=3}),this.atomIndices=r,this.points=n,this.kdtree=new Ws(n,i),rp&&np.timeEnd("Kdtree build")}function $s(t){var e=ng[t],i={};if(void 0===e)return console.warn("getSymmetryOperations: spacegroup '"+t+"' not found in symop library"),i;for(var n=[],r=0,o=e.length;r<o;r+=3){for(var s=[],a=0;a<3;++a)s.push(ig[e[r+a]]);n.push(s)}var h=/^[1-9]$/;return n.forEach(function(t){var e=0,n=(new b).set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1),r=n.elements;i[t]=n,t.forEach(function(t){for(var i=!1,n=!1,o=0,s=t.length;o<s;++o){var a=t[o];if("-"===a)i=!0;else if("+"===a)i=!1;else if("/"===a)n=!0;else if("X"===a)r[0+e]=i?-1:1;else if("Y"===a)r[4+e]=i?-1:1;else if("Z"===a)r[8+e]=i?-1:1;else if(h.test(a)){var l=parseInt(a);n?r[12+e]/=l:r[12+e]=l}else np.warn('getSymmetryOperations: unknown token "'+a+'"')}e+=1})}),i}function qs(t){var e="";return t.length>0&&(e=":"+Er(t).join(" OR :")),new $f(e)}function Xs(t,e){if(e){rp&&np.time("assignSecondaryStructure");var i=[];t.eachModel(function(t){t.eachChain(function(t){i.push(t.chainname)})});var n=i.slice().sort(),r=[];n.forEach(function(t){r.push(i.indexOf(t))});var o=e.helices;o=o.filter(function(t){return wr(n,t[0])>=0}),o.sort(function(t,e){var i=t[0],o=e[0],s=t[1],a=e[1];if(i===o)return s===a?0:s<a?-1:1;var h=wr(n,i),l=wr(n,o);return r[h]<r[l]?-1:1});var s=t.residueStore;t.eachModel(function(t){var e=0,i=o.length;if(0!==i){var n=o[e],r=!1,a=!1;t.eachChain(function(t){var h=!1;if(t.chainname===n[0])for(var l=t.residueCount,u=t.residueOffset,d=u+l,c=u;c<d;++c)if(s.resno[c]===n[1]&&s.getInscode(c)===n[2]&&(r=!0),r&&(s.sstruc[c]=n[6],s.resno[c]===n[4]&&s.getInscode(c)===n[5]&&(r=!1,e+=1,e<i?(c=u-1,n=o[e],h=t.chainname!==n[0]):a=!0)),h||a)return})}});var a=e.sheets;a=a.filter(function(t){return wr(n,t[0])>=0}),a.sort(function(t,e){var i=t[0],o=e[0];if(i===o)return 0;var s=wr(n,i),a=wr(n,o);return r[s]<r[a]?-1:1});var h="e".charCodeAt(0);t.eachModel(function(t){var e=0,i=a.length;if(0!==i){var n=a[e],r=!1,o=!1;t.eachChain(function(t){var l=!1;if(t.chainname===n[0])for(var u=t.residueCount,d=t.residueOffset,c=d+u,f=d;f<c;++f)if(s.resno[f]===n[1]&&s.getInscode(f)===n[2]&&(r=!0),r&&(s.sstruc[f]=h,s.resno[f]===n[4]&&s.getInscode(f)===n[5]&&(r=!1,e+=1,e<i?(f=d-1,n=a[e],l=t.chainname!==n[0]):o=!0)),l||o)return})}}),rp&&np.timeEnd("assignSecondaryStructure")}}function Zs(t){rp&&np.time("calculateChainnames");var e=!0;if(t.eachChain(function(t){t.chainname&&(e=!1)}),e){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=i.length,r=t.modelStore,o=t.chainStore,s=t.residueStore,a=function(t,e,i,n){for(var a=o.count,h=0;h<n;++h)s.chainIndex[i+h]=a;o.growIfFull(),o.modelIndex[a]=t,o.setChainname(a,e),o.setChainid(a,e),o.residueOffset[a]=i,o.residueCount[a]=n,o.count+=1,r.chainCount[t]+=1},h=function(t){for(var e=t,r=0,o=i[e%n];e>=n;)e=Math.floor(e/n),o+=i[e%n],r+=1;return r>=5&&np.warn("chainname overflow"),o},l=t.getAtomProxy(),u=t.getAtomProxy(),d=0,c=0,f=0,p=0,m=[];1===s.count?m.push({mIndex:0,chainname:"A",rStart:0,rCount:1}):t.eachResidueN(2,function(t,e){var i=!1,n=t.backboneType,r=e.backboneType,o=cv;p=t.index,t.modelIndex!==e.modelIndex?i=!0:t.moleculeType!==e.moleculeType?i=!0:n!==o&&n===r&&(l.index=t.backboneEndAtomIndex,u.index=e.backboneStartAtomIndex,l.connectedTo(u)||(i=!0)),i||e.index!==s.count-1||(i=!0,p=e.index),i&&(m.push({mIndex:c,chainname:h(d),rStart:f,rCount:p-f+1}),d+=1,t.modelIndex!==e.modelIndex&&(d=0,c+=1),e.index===s.count-1&&p!==e.index&&m.push({mIndex:c,chainname:h(d),rStart:s.count-1,rCount:1}),f=e.index,p=e.index)}),o.count=0,m.forEach(function(t){a(t.mIndex,t.chainname,t.rStart,t.rCount)});var v=0;t.eachModel(function(t){r.chainOffset[t.index]=v,r.chainCount[t.index]-=1,v+=r.chainCount[t.index]})}rp&&np.timeEnd("calculateChainnames")}function Ks(t){rp&&np.time("calculateBonds"),ta(t),ea(t),rp&&np.timeEnd("calculateBonds")}function Qs(t){var e=t.structure,i=e.getAtomProxy(),n=e.getAtomProxy(),r=t.atomCount,o=t.atomOffset,s=o+r,a=s-1;if(r>500)return void(rp&&np.warn("more than 500 atoms, skip residue for auto-bonding",t.qualifiedName()));var h,l,u=[],d=[],c=[];if(r>50){var f=new Ys(t,!0),p=t.isCg()?1.2:2.3;for(h=o;h<a;++h){i.index=h;var m=i.covalent+p+.3,v=f.nearest(i,1/0,m*m),g=v.length;for(l=0;l<g;++l)n.index=v[l].index,i.index<n.index&&i.connectedTo(n)&&(u.push(i.index-o),d.push(n.index-o),c.push(1))}}else for(h=o;h<a;++h)for(i.index=h,l=h+1;l<=a;++l)n.index=l,i.connectedTo(n)&&(u.push(h-o),d.push(l-o),c.push(1));return{atomIndices1:u,atomIndices2:d,bondOrders:c}}function Js(t){rp&&np.time("calculateAtomBondMap");var e=[];return t.eachBond(function(t){var i=t.atomIndex1,n=t.atomIndex2;void 0===e[i]&&(e[i]=[]),e[i][n]=t.index}),rp&&np.timeEnd("calculateAtomBondMap"),e}function ta(t,e){rp&&np.time("calculateBondsWithin");var i=t.bondStore,n=t.rungBondStore,r=t.getAtomSet(!1),o=t.getAtomProxy(),s=t.getAtomProxy(),a=t.getBondProxy(),h=e?null:Js(t);t.eachResidue(function(t){if(!e){var l=t.atomCount,u=t.atomOffset;if(l>500)return void np.warn("more than 500 atoms, skip residue for auto-bonding",t.qualifiedName());for(var d=t.getBonds(),c=d.atomIndices1,f=d.atomIndices2,p=d.bondOrders,m=c.length,v=0;v<m;++v){var g=c[v]+u,y=f[v]+u,b=h[g];if(void 0!==b&&void 0!==(b=b[y])){a.index=b;p[t.residueType.getBondIndex(g,y)]=a.bondOrder}else o.index=g,s.index=y,i.addBond(o,s,p[v])}}var _=t.residueType.traceAtomIndex,w=t.residueType.rungEndAtomIndex;-1!==_&&-1!==w&&(o.index=t.traceAtomIndex,s.index=t.rungEndAtomIndex,n.addBond(o,s),r.set(o.index),r.set(s.index))}),t.atomSetDict.rung=r,rp&&np.timeEnd("calculateBondsWithin")}function ea(t,e){function i(t,i){var h=t.backboneType,l=i.backboneType;h!==cv&&h===l&&(s.index=t.backboneEndAtomIndex,a.index=i.backboneStartAtomIndex,s.connectedTo(a)&&(e||n.addBond(s,a,1),s.index=t.traceAtomIndex,a.index=i.traceAtomIndex,r.addBond(s,a),o.set(s.index),o.set(a.index)))}rp&&np.time("calculateBondsBetween");var n=t.bondStore,r=t.backboneBondStore,o=t.getAtomSet(!1),s=t.getAtomProxy(),a=t.getAtomProxy();0===r.count&&r.resize(t.residueStore.count),t.eachResidueN(2,i);var h=t.getResidueProxy(),l=t.getResidueProxy();t.eachChain(function(t){0!==t.residueCount&&(h.index=t.residueOffset,l.index=t.residueOffset+t.residueCount-1,i(l,h))}),t.atomSetDict.backbone=o,rp&&np.timeEnd("calculateBondsBetween")}function ia(t){function e(t){var e=[];return Object.keys(r).forEach(function(h){var l=r[h].clone();s.copy(n).applyMatrix4(l),a.setFromMatrixPosition(l),a.sub(o),s.x>1&&(a.x-=1),s.x<0&&(a.x+=1),s.y>1&&(a.y-=1),s.y<0&&(a.y+=1),s.z>1&&(a.z-=1),s.z<0&&(a.z+=1),t&&a.add(t),l.setPosition(a),l.multiplyMatrices(i.fracToCart,l),l.multiply(i.cartToFrac),e.push(l)}),e}if(t.unitcell){rp&&np.time("buildUnitcellAssembly");var i=t.unitcell,n=t.center.clone().applyMatrix4(i.cartToFrac),r=$s(i.spacegroup),o=new y,s=new y,a=new y;n.x>1&&(o.x-=1),n.x<0&&(o.x+=1),n.y>1&&(o.y-=1),n.y<0&&(o.y+=1),n.z>1&&(o.z-=1),n.z<0&&(o.z+=1);var h,l=new rg("UNITCELL"),u=e();if(t.biomolDict.NCS){h=[new b].concat(t.biomolDict.NCS.partList[0].matrixList);var d=[];u.forEach(function(t){h.forEach(function(e){d.push(t.clone().multiply(e))})}),l.addPart(d)}else l.addPart(u);var c=new y,f=new rg("SUPERCELL"),p=Array.prototype.concat.call(e(c.set(1,0,0)),e(c.set(0,1,0)),e(c.set(0,0,1)),e(c.set(-1,0,0)),e(c.set(0,-1,0)),e(c.set(0,0,-1)),e(c.set(1,1,0)),e(c.set(1,0,1)),e(c.set(0,1,1)),e(c.set(-1,-1,0)),e(c.set(-1,0,-1)),e(c.set(0,-1,-1)),e(c.set(1,-1,-1)),e(c.set(1,1,-1)),e(c.set(1,-1,1)),e(c.set(-1,1,1)),e(c.set(-1,-1,1)),e(c.set(-1,1,-1)),e(c.set(0,1,-1)),e(c.set(0,-1,1)),e(c.set(1,0,-1)),e(c.set(-1,0,1)),e(c.set(1,-1,0)),e(c.set(-1,1,0)),e(),e(c.set(1,1,1)),e(c.set(-1,-1,-1)));if(t.biomolDict.NCS){var m=[];p.forEach(function(t){h.forEach(function(e){m.push(t.clone().multiply(e))})}),f.addPart(m)}else f.addPart(p);t.biomolDict.UNITCELL=l,t.biomolDict.SUPERCELL=f,rp&&np.timeEnd("buildUnitcellAssembly")}}function na(t){var e=t.trim().toUpperCase();parseInt(e.charAt(0))&&(e=e.substr(1)),parseInt(e.charAt(0))&&(e=e.substr(1));var i=e.length;if(0===i)return"";if(1===i)return e;if(2===i){if(-1!==ug.indexOf(e))return e;if(-1!==lg.indexOf(e[0]))return e[0]}return i>=3&&-1!==lg.indexOf(e[0])?e[0]:""}function ra(t){var e=t.bondHash,i=e.countArray,n=e.offsetArray,r=e.indexArray,o=t.getBondProxy();t.eachResidue(function(t){var e=t.residueType;if(void 0===e.bonds){var s=t.atomOffset,a=[],h=[],l=[],u={};t.eachAtom(function(t){for(var e=t.index,d=n[e],c=i[e],f=0,p=c;f<p;++f){o.index=r[d+f];var m=o.atomIndex1,v=o.atomIndex2;if(m>v){var g=v;v=m,m=g}var y=m+"|"+v;void 0===u[y]&&(u[y]=!0,a.push(m-s),h.push(v-s),l.push(o.bondOrder))}}),e.bonds={atomIndices1:a,atomIndices2:h,bondOrders:l}}})}function oa(t,e){return t+"|"+e}function sa(t,e,i,n){return t+"|"+e.join(",")+"|"+(i?1:0)+"|"+(n||"")}function aa(t,e){function i(e){t(e,n)}function n(){var t=r.shift();void 0!==t?(o=!0,setTimeout(function(){i(t)})):o=!1}var r=[],o=!1;if(e){for(var s=0,a=e.length;s<a;++s)r.push(e[s]);n()}this.push=function(t){r.push(t),o||n()},this.kill=function(){r.length=0},this.length=function(){return r.length}}function ha(t,e,i){if(0!==i[0]&&0!==i[8]&&0!==i[4]){var n,r=t.length,o=i[0],s=i[1],a=i[2],h=e[0],l=e[1],u=e[2],d=-h+o+o/2,c=-l+s+s/2,f=-u+a+a/2;for(n=0;n<r;n+=3)t[n+0]=(t[n+0]+d)%o,t[n+1]=(t[n+1]+c)%s,t[n+2]=(t[n+2]+f)%a}}function la(t,e){if(0!==e[0]&&0!==e[8]&&0!==e[4]){var i,n,r,o,s=t.length;for(i=3;i<s;i+=3)for(n=0;n<3;++n)if(o=t[i+n]-t[i-3+n],Math.abs(o)>.9*e[3*n+n])if(o>0)for(r=0;r<3;++r)t[i+r]-=e[3*n+r];else for(r=0;r<3;++r)t[i+r]+=e[3*n+r];return t}}function ua(t){return"front"===t?bl:"back"===t?_l:wl}function da(t,e){t.matrix.copy(e),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0}function ca(t){var e=JSON.stringify(t);return void 0===yy[e]&&(yy[e]=new by(t)),yy[e]}function fa(t,e){void 0!==t.toArray?t=t.toArray():void 0!==t.x?t=[t.x,t.y,t.z]:void 0!==t.r&&(t=[t.r,t.g,t.b]),e.push.apply(e,t)}function pa(t){t.visible=!0}function ma(t){t.visible=!1}function va(t,e,i,n){var r=i-t,o=n-e;return Math.sqrt(r*r+o*o)}function ga(t){for(var e=t||{},i=gr(e.width,256),n=gr(e.height,256),r=[i/2,n/2],o=Math.min(i/2,n/2),s=gr(e.delta,1/(o+1))*o,a=0,h=0,l=new Uint8Array(i*n*4),u=0,d=l.length;u<d;u+=4){var c=va(a,h,r[0],r[1]),f=1-Qr(o-s,o,c);l[u]=255*f,l[u+1]=255*f,l[u+2]=255*f,l[u+3]=255*f,++a===i&&(a=0,h++)}var p=new _(l,i,n);return p.needsUpdate=!0,p}function ya(t){np.error("makeRepresentation: representation type "+t+" unknown")}function ba(t,e,i,n){rp&&np.time("makeRepresentation "+t);var r;if(e instanceof Tg){if(!(r=lp.get(t)))return void ya(t)}else if(e instanceof Vv)if("surface"===t)r=Ay;else{if("dot"!==t)return void ya(t);r=Iy}else if(e instanceof Wv)if("surface"===t)r=Ay;else if("dot"===t)r=Iy;else{if("slice"!==t)return void ya(t);r=zy}else if(e instanceof Ag)r=Uy;else if(e instanceof Sy)r=My,e=e.getBufferList();else{if("buffer"!==t)return void np.error("makeRepresentation: object "+e+" unknown");r=My}var o=new r(e,i,n);return rp&&np.timeEnd("makeRepresentation "+t),o}function _a(t,e){return t instanceof RegExp?null!==e.name.match(t):e.name===t}function wa(t,e){var i,n=0,r={};return e.forEach(function(e){i=0;var o={};e.forEach(function(e){o[t[i++]]=e}),r[t[n++]]=o}),r}function xa(t,e,i,n,r){i=gr(i,!1),n=gr(n,""),r=gr(r,"");var o,s,a,h,l;if(i){var u=t,d=e;n&&r&&(u=t.getView(new $f(n)),d=e.getView(new $f(r)));var c=u.getSequence(),f=d.getSequence(),p=new ib(c.join(""),f.join(""));p.calc(),p.trace();var m,v,g,y,b;o=0,s=0,a=p.ali1.length;var _=[],w=[];for(m=0;m<a;++m)y=p.ali1[m],b=p.ali2[m],v=0,g=0,"-"===y?w[s]=!1:(w[s]=!0,v=1),"-"===b?_[o]=!1:(_[o]=!0,g=1),o+=v,s+=g;var x=[],S=[],k=u.getAtomProxy(),E=d.getAtomProxy();o=0,u.eachResidue(function(t){void 0!==t.traceAtomIndex&&t.traceAtomIndex===t.getAtomIndexByName("CA")&&(_[o]&&(k.index=t.getAtomIndexByName("CA"),x.push(k.x,k.y,k.z)),o+=1)}),o=0,d.eachResidue(function(t){void 0!==t.traceAtomIndex&&t.traceAtomIndex===t.getAtomIndexByName("CA")&&(w[o]&&(E.index=t.getAtomIndexByName("CA"),S.push(E.x,E.y,E.z)),o+=1)}),h=new Float32Array(x),l=new Float32Array(S)}else{var M=t.getView(new $f(n+" and .CA")),T=e.getView(new $f(r+" and .CA"));h=M,l=T}new Og(h,l).transform(t),t.refreshPosition()}function Sa(t,e){e=e||new y;var i=!1,n=!1,r=!1;return e.set(2*t.x,2*t.y,2*t.z),t.eachBondedAtom(function(t){if(!i)return"H"===t.atomname?(e.set(t),void(i=!0)):void(n||"CA"!==t.atomname?r||"C"!==t.atomname||(r=!0,e.sub(t)):(e.sub(t),n=!0))}),i?e:n&&r?(e.normalize(),e.multiplyScalar(db),e.add(t),e):void 0}function ka(t){for(var e=t.length,i=new Float32Array(e),n=new Float32Array(e),r=new Float32Array(e),o=0;o<t.length;o++){var s=t[o];i[o]=s.x,n[o]=s.y,r[o]=s.z}return{x:i,y:n,z:r,count:e}}function Ea(){return 16777215*Math.random()}function Ma(t,e,i){return t&&"Frames"===t.type?new Lb(t,e,i):!t&&e.frames?new Nb(t,e,i):new Fb(t,e,i)}function Ta(t,e){function i(t,i,n,r,o,s,a){s[a+0]=Kr(t.x,i.x,n.x,r.x,o,e),s[a+1]=Kr(t.y,i.y,n.y,r.y,o,e),s[a+2]=Kr(t.z,i.z,n.z,r.z,o,e)}function n(t,i,n,r,o,s){s.x=Kr(t.x,i.x,n.x,r.x,o,e),s.y=Kr(t.y,i.y,n.y,r.y,o,e),s.z=Kr(t.z,i.z,n.z,r.z,o,e)}function r(e,n,r,o,s,a){for(var h=0;h<t;++h){i(e,n,r,o,c*h,s,a+3*h)}}function o(e,i,r,o,s,a){for(var h=0;h<t;++h){var l=c*h,u=l-f,d=l+f,v=a+3*h;u<0&&(u=0),d>1&&(d=1),n(e,i,r,o,u,p),n(e,i,r,o,d,m),m.sub(p).normalize(),m.toArray(s,v)}}function s(e,i,n,r,o){for(var s,a=i.next(),h=i.next(),l=i.next(),u=i.size,d=u-1,c=r||0,f=0;f<d;++f)s=a,a=h,h=l,l=i.next(),e(s,a,h,l,n,c),c+=3*t;o&&(s=i.get(u-2),a=i.get(u-1),h=i.get(0),l=i.get(1),e(s,a,h,l,n,c),c+=3*t)}function a(e,i,r,o,s,a,h,l,u,d,f,y,x){for(var S=0;S<t;++S){var k=y+3*S;x&&(k+=3*w);var E=c*S;n(e,i,r,o,E,p),n(s,a,h,l,E,m),v.subVectors(m,p).normalize(),g.fromArray(u,k),_.crossVectors(v,g).normalize(),_.toArray(f,k),b.crossVectors(g,_).normalize(),b.toArray(d,k)}}function h(e,i,n,r,o){for(var s=0;s<t;++s){var a=o+3*s;e.copy(b),g.fromArray(i,a),_.crossVectors(e,g).normalize(),_.toArray(r,a),b.crossVectors(g,_).normalize(),b.toArray(n,a)}}function l(e,i,n,r,o){var s,a;for(s=0;s<w;++s)a=o+3*s,n(e,r,a);for(s=w;s<t;++s)a=o+3*s,n(i,r,a)}function u(e,i,n,r,o){var s;for(s=0;s<w;++s)r[o+s]=n(e);for(s=w;s<t;++s)r[o+s]=n(i)}function d(e,i,n,r,o){for(var s=n(e),a=n(i),h=0;h<t;++h){var l=h/t;r[o+h]=(1-l)*s+l*a}}var c=1/t,f=1e-4,p=new y,m=new y;this.getPosition=function(e,i,n,o){e.reset(),s(r,e,i,n,o);var a=e.size-1,h=a*t*3;o&&(h+=3*t);var l=e.get(o?0:a);i[h]=l.x,i[h+1]=l.y,i[h+2]=l.z},this.getTangent=function(e,i,n,r){e.reset(),s(o,e,i,n,r);var a=e.size-1,h=a*t*3;r&&(h+=3*t),ko(i,i,h-3,h,3)};var v=new y,g=new y,b=new y,_=new y,w=Math.ceil(t/2);this.getNormal=function(e,i,n,r,o,s){b.set(0,0,1);for(var a=e,l=a-1,u=o||0,d=0;d<l;++d)h(v,i,n,r,u),u+=3*t;s&&(h(v,i,n,r,u),u+=3*t),_.toArray(r,u),b.toArray(n,u)},this.getNormalDir=function(e,i,n,r,o,s,h,l){e.reset(),i.reset();var u=new y,d=new y,c=new y,f=new y,p=new y,m=(new y).copy(e.next()),v=(new y).copy(e.next()),g=(new y).copy(e.next()),x=new y,S=(new y).copy(i.next()),k=(new y).copy(i.next()),E=(new y).copy(i.next());b.set(0,0,1);for(var M=e.size,T=M-1,C=s||0,O=0;O<T;++O)p.copy(m),m.copy(v),v.copy(g),g.copy(e.next()),x.copy(S),S.copy(k),k.copy(E),E.copy(i.next()),0===O?(u.subVectors(x,p),d.subVectors(S,m),u.dot(d)<0&&(d.multiplyScalar(-1),S.addVectors(m,d)),c.subVectors(k,v),d.dot(c)<0&&(c.multiplyScalar(-1),k.addVectors(v,c))):c.copy(f),f.subVectors(E,g),c.dot(f)<0&&(f.multiplyScalar(-1),E.addVectors(g,f)),a(p,m,v,g,x,S,k,E,n,r,o,C,l),C+=3*t;if(h&&(p.copy(e.get(M-2)),m.copy(e.get(M-1)),v.copy(e.get(0)),g.copy(e.get(1)),x.copy(i.get(M-2)),S.copy(i.get(M-1)),k.copy(i.get(0)),E.copy(i.get(1)),c.copy(f),f.subVectors(E,g),c.dot(f)<0&&(f.multiplyScalar(-1),E.addVectors(g,f)),a(p,m,v,g,x,S,k,E,n,r,o,C,l),C+=3*t),l){_.fromArray(o,3*w),b.fromArray(r,3*w);for(var P=0;P<w;++P)_.toArray(o,3*P),b.toArray(r,3*P)}else _.toArray(o,C),b.toArray(r,C)},this.getColor=function(e,i,n,r,o){e.reset(),e.next();for(var s,a=e.next(),h=e.size,u=h-1,d=r||0,c=0;c<u;++c)s=a,a=e.next(),l(s,a,i,n,d),d+=3*t;o&&(s=e.get(h-1),a=e.get(0),l(s,a,i,n,d),d+=3*t),n[d]=n[d-3],n[d+1]=n[d-2],n[d+2]=n[d-1]},this.getPicking=function(e,i,n,r,o){e.reset(),e.next();for(var s,a=e.next(),h=e.size,l=h-1,d=r||0,c=0;c<l;++c)s=a,a=e.next(),u(s,a,i,n,d),d+=t;o&&(s=e.get(h-1),a=e.get(0),u(s,a,i,n,d),d+=t),n[d]=n[d-1]},this.getSize=function(e,i,n,r,o){e.reset(),e.next();for(var s,a=e.next(),h=e.size,l=h-1,u=r||0,c=0;c<l;++c)s=a,a=e.next(),d(s,a,i,n,u),u+=t;o&&(s=e.get(h-1),a=e.get(0),d(s,a,i,n,u),u+=t),n[u]=n[u-1]}}function Ca(t,e){this.polymer=t,this.size=t.residueCount;var i=e||{};this.directional=i.directional||!1,this.positionIterator=i.positionIterator||!1,this.subdiv=i.subdiv||1,this.smoothSheet=i.smoothSheet||!1,isNaN(i.tension)?this.tension=this.polymer.isNucleic()?.5:.9:this.tension=i.tension||.5,this.interpolator=new Ta(this.subdiv,this.tension)}function Oa(t,e,i){e=e||3.5,i=i||40;for(var n=new $f("( ARG and ( .NE or .NH1 or .NH2 ) ) or ( ASP and .ND2 ) or ( GLN and .NE2 ) or ( HIS and ( .ND1 or .NE2 ) ) or ( LYS and .NZ ) or ( SER and .OG ) or ( THR and .OG1 ) or ( TRP and .NE1 ) or ( TYR and .OH ) or ( PROTEIN and .N )"),r=new $f("( ASN and .OD1 ) or ( ASP and ( OD1 or .OD2 ) ) or ( GLN and .OE1 ) or ( GLU and ( .OE1 or .OE2 ) ) or ( HIS and ( .ND1 or .NE2 ) ) or ( SER and .OG ) or ( THR and .OG1 ) or ( TYR and .OH ) or ( PROTEIN and .O )"),o=t.getView(n),s=t.getView(r),a=new Zb(o,s),h=a.within(e),l=h.bondStore,u=t.getAtomProxy(),d=t.getAtomProxy(),c=t.getAtomProxy(),f=t.getAtomProxy(),p=t.getResidueProxy(),m=t.getResidueProxy(),v=new y,g=new y,b=0,_=l.count;b<_;++b)if(u.index=l.atomIndex1[b],d.index=l.atomIndex2[b],"O"===u.atomname&&"N"===d.atomname||"N"===u.atomname&&"O"===d.atomname)h.bondSet.clear(b);else if("N"===u.atomname||"N"===d.atomname){var w,x;if("N"===u.atomname?(w=u,x=d):(w=d,x=u),p.index=w.residueIndex,c.index=p.getAtomIndexByName("CA"),void 0===c.index)continue;var S=p.getPreviousConnectedResidue(m);if(void 0===S)continue;if(f.index=S.getAtomIndexByName("C"),void 0===f.index)continue;v.subVectors(w,f),g.subVectors(w,c),v.add(g).multiplyScalar(.5),g.subVectors(x,w),Vr(v.angleTo(g))>i&&h.bondSet.clear(b)}else("OH"===u.atomname&&"TYR"===u.resname||"OH"===d.atomname&&"TYR"===d.resname)&&(function(t,e,n,r){var o,s;t.atomname===n?(o=t,s=e):(o=e,s=t),p.index=o.residueIndex;var a=p.getAtomIndexByName(r);return v.subVectors(a,o),g.subVectors(a,s),Vr(v.angleTo(g))<i}(u,d,"OH","CZ")||h.bondSet.clear(b));return{atomSet:h.atomSet,bondSet:h.bondSet,bondStore:h.bondStore}}function Pa(t,e,i){e=e||3.5,i=i||40;for(var n=new $f("( PROTEIN and .N )"),r=new $f("( PROTEIN and .O )"),o=t.getView(n),s=t.getView(r),a=new Zb(o,s),h=a.within(e),l=h.bondStore,u=t.getAtomProxy(),d=t.getAtomProxy(),c=t.getAtomProxy(),f=t.getAtomProxy(),p=t.getResidueProxy(),m=t.getResidueProxy(),v=new y,g=new y,b=0,_=l.count;b<_;++b){u.index=l.atomIndex1[b],d.index=l.atomIndex2[b];var w,x;if("N"===u.atomname?(w=u,x=d):(w=d,x=u),p.index=w.residueIndex,c.index=p.getAtomIndexByName("CA"),void 0!==c.index){var S=p.getPreviousConnectedResidue(m);void 0!==S&&(f.index=S.getAtomIndexByName("C"),void 0!==f.index&&(v.subVectors(w,f),g.subVectors(w,c),v.add(g).multiplyScalar(.5),g.subVectors(x,w),Vr(v.angleTo(g))>i&&h.bondSet.clear(b)))}}return{atomSet:h.atomSet,bondSet:h.bondSet,bondStore:h.bondStore}}function Aa(t,e){this.type=t,this.text=e||{}}function Da(t,e,i,n,r){function o(t,n,o){return((t*e+n)*i+o)*r}n=n||Int32Array,r=r||1;var s,a=new n(t*e*i*r);this.data=a,this.index=o,this.set=function(t,e,i){var n=arguments,h=o(t,e,i);for(s=0;s<r;++s)a[h+s]=n[3+s]},this.toArray=function(t,e,i,n,h){var l=o(t,e,i);for(void 0===n&&(n=[]),void 0===h&&(h=0),s=0;s<r;++s)n[h+s]=a[l+s]},this.fromArray=function(t,e,i,n,h){var l=o(t,e,i);for(void 0===h&&(h=0),s=0;s<r;++s)a[l+s]=n[h+s]},this.copy=function(t){this.data.set(t.data)},this.clone=function(){return new Da(t,e,i,n,r).copy(this)}}function Ia(t,e,i){function n(t,e,i,n,o){m=e||1.4,v=i||2,M=o||!0;var s=0;for(var a in f)s=Math.max(s,a);var h=js(P,A,s,v,t?m:0);y=h.dim[0],b=h.dim[1],_=h.dim[2],w=h.matrix,x=h.tran,v=h.scaleFactor,S={},k={},r(t),E=m*v,g=n||m/v,T=new Uint8Array(y*b*_),t&&(C=new Float64Array(y*b*_)),M&&(O=new Int32Array(y*b*_))}function r(t){var e,i,n,r,o,s,a,h,l,u;for(var d in f)if(e=f[d],!S[d]){for(a=t?(e+m)*v+.5:e*v+.5,s=a*a,h=Math.floor(a)+1,l=new Int32Array(h*h),u=0,i=0;i<h;++i)for(n=0;n<h;++n)r=i*i+n*n,r>s?l[u]=-1:(o=Math.sqrt(s-r),l[u]=Math.floor(o)),++u;k[d]=h,S[d]=l}}function o(i){var n,r,o,s,a,h,l,u,d,c,f,p,m,g,w,E,C,P,A=3*i,I=i;n=Math.floor(.5+v*(t[A]+x[0])),r=Math.floor(.5+v*(t[A+1]+x[1])),o=Math.floor(.5+v*(t[A+2]+x[2]));var R,L=e[I],N=S[L],F=0,z=b*_,B=k[L];for(c=0;c<B;++c)for(f=0;f<B;++f){if(-1!==(R=N[F]))for(E=-1;E<2;++E)for(C=-1;C<2;++C)for(P=-1;P<2;++P)if(0!==E&&0!==C&&0!==P)for(l=E*c,d=P*f,p=0;p<=R;++p)if(u=p*C,m=n+l,g=r+u,w=o+d,!(m<0||g<0||w<0||m>=y||g>=b||w>=_)){var j=m*z+g*_+w;if(M)if(T[j]&D){if(T[j]&D){var U=O[j];U!==A&&(s=n+l-Math.floor(.5+v*(t[U]+x[0])),a=r+u-Math.floor(.5+v*(t[U+1]+x[1])),h=o+d-Math.floor(.5+v*(t[U+2]+x[2])),l*l+u*u+d*d<s*s+a*a+h*h&&(O[j]=i))}}else T[j]|=D,O[j]=i;else T[j]|=D}F++}}function s(e){console.time("EDTSurface fillvoxels");var i,n;for(i=0,n=T.length;i<n;++i)T[i]=0,e&&(C[i]=-1),M&&(O[i]=-1);for(i=0,n=t.length/3;i<n;++i)o(i);for(i=0,n=T.length;i<n;++i)T[i]&D&&(T[i]|=I);console.timeEnd("EDTSurface fillvoxels")}function a(i){var n,r,o,s,a,h,l,u,d,c,f,p,m,g,w,E,C,P,A,D=3*i,R=i,L=0;n=Math.floor(.5+v*(t[D]+x[0])),r=Math.floor(.5+v*(t[D+1]+x[1])),o=Math.floor(.5+v*(t[D+2]+x[2]));var N=e[R],F=b*_;for(m=0,A=k[N];m<A;++m)for(g=0;g<A;++g){if(-1!==S[N][L])for(E=-1;E<2;++E)for(C=-1;C<2;++C)for(P=-1;P<2;++P)if(0!==E&&0!==C&&0!==P)for(l=E*m,d=P*g,w=0;w<=S[N][L];++w)if(u=w*C,c=n+l,f=r+u,p=o+d,!(c<0||f<0||p<0||c>=y||f>=b||p>=_)){var z=c*F+f*_+p;if(T[z]&I){if(M){var B=O[z];s=Math.floor(.5+v*(t[B]+x[0])),a=Math.floor(.5+v*(t[B+1]+x[1])),h=Math.floor(.5+v*(t[B+2]+x[2])),l*l+u*u+d*d<s*s+a*a+h*h&&(O[z]=i)}}else T[z]|=I,M&&(O[z]=i)}L++}}function h(){var e,i;for(e=0,i=T.length;e<i;++e)T[e]&=~I;for(e=0,i=t.length/3;e<i;++e)a(e)}function l(){var t,e,i,n=b*_;for(t=0;t<y;++t)for(e=0;e<_;++e)for(i=0;i<b;++i){var r=t*n+i*_+e;if(T[r]&D)for(var o=0;o<26;){var s=t+L[o][0],a=e+L[o][2],h=i+L[o][1];if(s>-1&&s<y&&h>-1&&h<b&&a>-1&&a<_&&!(T[s*n+h*_+a]&D)){T[r]|=R;break}o++}}}function u(){console.time("EDTSurface fastdistancemap");var t,e,i,n,r,o=new Da(y,b,_,Uint16Array,3),s=b*_,a=E*E,h=0;for(t=0;t<y;++t)for(e=0;e<b;++e)for(i=0;i<_;++i)r=t*s+e*_+i,T[r]&=~I,T[r]&D&&T[r]&R&&(o.set(t,e,i,t,e,i),C[r]=0,T[r]|=I,h+=1);var l=new Int32Array(3*h),u=0,c=new Int32Array(3*h),f=0;for(t=0;t<y;++t)for(e=0;e<b;++e)for(i=0;i<_;++i)r=t*s+e*_+i,T[r]&R&&(l[u]=t,l[u+1]=e,l[u+2]=i,u+=3,T[r]&=~R);do{for(f=d(l,o,u,c),u=0,t=0,n=f;t<n;t+=3)r=s*c[t]+_*c[t+1]+c[t+2],T[r]&=~R,C[r]<=1.0404*a&&(l[u]=c[t],l[u+1]=c[t+1],l[u+2]=c[t+2],u+=3)}while(u>0);var p,m=g*g,v=new Uint16Array(3);for(t=0;t<y;++t)for(e=0;e<b;++e)for(i=0;i<_;++i)r=t*s+e*_+i,T[r]&=~R,T[r]&D&&(T[r]&I&&!(T[r]&I&&C[r]>=m)||(T[r]|=R,M&&T[r]&I&&(o.toArray(t,e,i,v),p=v[0]*s+v[1]*_+v[2],O[r]=O[p])));console.timeEnd("EDTSurface fastdistancemap")}function d(t,e,i,n){var r,o,s,a,h,l,u,d,c,f,p,m,v=new Uint16Array(3),g=0;if(0===i)return g;var w=-1,x=-1,S=-1,k=b*_;for(u=0,c=i;u<c;u+=3)for(r=t[u],o=t[u+1],s=t[u+2],e.toArray(r,o,s,v),d=0;d<6;++d)m=L[d],w=r+m[0],x=o+m[1],S=s+m[2],w<y&&w>-1&&x<b&&x>-1&&S<_&&S>-1&&(p=w*k+_*x+S,T[p]&D&&!(T[p]&I)?(e.fromArray(w,x,S,v),a=w-v[0],h=x-v[1],l=S-v[2],f=a*a+h*h+l*l,C[p]=f,T[p]|=I,T[p]|=R,n[g]=w,n[g+1]=x,n[g+2]=S,g+=3):T[p]&D&&T[p]&I&&(a=w-v[0],h=x-v[1],l=S-v[2],(f=a*a+h*h+l*l)<C[p]&&(e.fromArray(w,x,S,v),C[p]=f,T[p]&R||(T[p]|=R,n[g]=w,n[g+1]=x,n[g+2]=S,g+=3))));for(u=0,c=i;u<c;u+=3)for(r=t[u],o=t[u+1],s=t[u+2],e.toArray(r,o,s,v),d=6;d<18;d++)m=L[d],w=r+m[0],x=o+m[1],S=s+m[2],w<y&&w>-1&&x<b&&x>-1&&S<_&&S>-1&&(p=w*k+_*x+S,T[p]&D&&!(T[p]&I)?(e.fromArray(w,x,S,v),a=w-v[0],h=x-v[1],l=S-v[2],f=a*a+h*h+l*l,C[p]=f,T[p]|=I,T[p]|=R,n[g]=w,n[g+1]=x,n[g+2]=S,g+=3):T[p]&D&&T[p]&I&&(a=w-v[0],h=x-v[1],l=S-v[2],(f=a*a+h*h+l*l)<C[p]&&(e.fromArray(w,x,S,v),C[p]=f,T[p]&R||(T[p]|=R,n[g]=w,n[g+1]=x,n[g+2]=S,g+=3))));for(u=0,c=i;u<c;u+=3)for(r=t[u],o=t[u+1],s=t[u+2],e.toArray(r,o,s,v),d=18;d<26;d++)m=L[d],w=r+m[0],x=o+m[1],S=s+m[2],w<y&&w>-1&&x<b&&x>-1&&S<_&&S>-1&&(p=w*k+_*x+S,T[p]&D&&!(T[p]&I)?(e.fromArray(w,x,S,v),a=w-v[0],h=x-v[1],l=S-v[2],f=a*a+h*h+l*l,C[p]=f,T[p]|=I,T[p]|=R,n[g]=w,n[g+1]=x,n[g+2]=S,g+=3):T[p]&D&&T[p]&I&&(a=w-v[0],h=x-v[1],l=S-v[2],(f=a*a+h*h+l*l)<C[p]&&(e.fromArray(w,x,S,v),C[p]=f,T[p]&R||(T[p]|=R,n[g]=w,n[g+1]=x,n[g+2]=S,g+=3))));return g}function c(t){var e,i=T.length;if("vws"===t)for(e=0;e<i;++e)T[e]&=~R,T[e]=T[e]&I?1:0;else if("ms"===t)for(e=0;e<i;++e)T[e]&=~I,T[e]&R&&(T[e]|=I),T[e]&=~R,T[e]=T[e]&I?1:0;else if("ses"===t)for(e=0;e<i;++e)T[e]&R&&T[e]&I?T[e]&=~R:T[e]&R&&!(T[e]&I)&&(T[e]|=I),T[e]=T[e]&I?1:0;else if("sas"===t)for(e=0;e<i;++e)T[e]&=~R,T[e]=T[e]&I?1:0}var f=Bs(e),p=Go(t);0===t.length&&(p[0].set([0,0,0]),p[1].set([0,0,0]));var m,v,g,y,b,_,w,x,S,k,E,M,T,C,O,P=p[0],A=p[1],D=1,I=2,R=4,L=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])];this.getVolume=function(t,e,o,a,d){console.time("EDTSurface.getVolume");var f="vws"!==t;n(f,e,o,a,d),s(f),l(),"ms"!==t&&"ses"!==t||u(),"ses"===t&&(r(!1),h()),c(t);for(var p=0,m=O.length;p<m;++p)O[p]=i[O[p]];return console.timeEnd("EDTSurface.getVolume"),{data:T,nx:_,ny:b,nz:y,atomindex:O}},this.getSurface=function(t,e,i,n,r,o,s){var a=this.getVolume(t,e,i,n,r);return new Us(a.data,a.nx,a.ny,a.nz,a.atomindex).getSurface(1,o,void 0,w,s)}}function Ra(t,e,i,n,r,o,s){function a(t,e){return Math.floor((t-e)/s)}for(var h=t.length,l=r[0],u=r[1],d=r[2],c=o[0],f=o[1],p=o[2],m=a(c,l)+1,v=a(f,u)+1,g=a(p,d)+1,y=m*v*g,b=v*g,_=[],w=0;w<h;w++){var x=function(t,e,i){return(a(t,l)*v+a(e,u))*g+a(i,d)}(t[w],e[w],i[w]);void 0===_[x]?_[x]=[w]:_[x].push(w)}var S=new Uint32Array(y),k=new Uint16Array(y),E=new Uint32Array(h),M=0,T=0;for(w=0;w<y;w++){var C=S[w]=M,O=_[w];if(void 0!==O)for(var P=0;P<O.length;P++)E[M]=O[P],M++;var A=M-C;k[w]=A,A>T&&(T=A)}this.neighbourListLength=27*T+1,this.withinRadii=function(r,o,s,h,c){for(var f=0,p=a(r,l),y=a(o,u),_=a(s,d),w=Math.max(0,p-1),x=Math.max(0,y-1),M=Math.max(0,_-1),T=Math.min(m,p+1),C=Math.min(v,y+1),O=Math.min(g,_+1),P=w;P<=T;++P)for(var A=P*b,D=x;D<=C;++D)for(var I=D*g,R=M;R<=O;++R)for(var L=A+I+R,N=S[L],F=N+k[L],z=N;z<F;z++){var B=E[z],j=t[B]-r,U=e[B]-o,H=i[B]-s,V=n[B]+h;j*j+U*U+H*H<=V*V&&(c[f++]=E[z])}c[f]=-1}}function La(t,e,i){function n(t,i,n,r){T=gr(t,1.4),C=gr(i,2),O=gr(n,!0),P=gr(r,30),k=new Float32Array(g),E=new Float32Array(g);for(var h=0;h<k.length;++h){var l=e[h]+T;k[h]=l,E[h]=l*l}M=0;for(var u=0;u<k.length;++u)k[u]>M&&(M=k[u]);o(),s(),a(),W=-1}function r(t,e,i){for(var n=0;n<t.length;n++)t[n]=e+i*n}function o(){var t=js(V,G,M,C,0);C=t.scaleFactor,A=t.dim,D=t.matrix,H=Math.min(5,2+Math.floor(T*C)),I=yo(A[0]*A[1]*A[2],-1001),R=new Int32Array(I.length),L=new Float32Array(A[0]),N=new Float32Array(A[1]),F=new Float32Array(A[2]),r(L,V[0],1/C),r(N,V[1],1/C),r(F,V[2],1/C)}function s(){var t=0,e=2*Math.PI/P;B=new Float32Array(P),z=new Float32Array(P);for(var i=0;i<P;i++)B[i]=Math.cos(t),z[i]=Math.sin(t),t+=e}function a(){j=new Ra(y,b,_,k,V,G,2.01*M),U=new Int32Array(j.neighbourListLength)}function h(t,e,i,n,r){var o;if(-1!==W){if((o=W)!==n&&o!==r&&l(o,t,e,i))return o;W=-1}var s=0;for(o=U[s];o>=0;){if(o!==n&&o!==r&&l(o,t,e,i))return W=o,o;o=U[++s]}return W=-1,-1}function l(e,i,n,r){var o=3*e,s=E[e],a=t[o]-i,h=t[o+1]-n,l=t[o+2]-r;return a*a+h*h+l*l<s}function u(){for(var t=0;t<g;t++){var e=y[t],i=b[t],n=_[t],r=k[t],o=E[t];j.withinRadii(e,i,n,r,U);for(var s=Math.ceil(r*C),a=Math.floor(C*(e-V[0])),l=Math.floor(C*(i-V[1])),u=Math.floor(C*(n-V[2])),d=Math.max(0,a-s),c=Math.max(0,l-s),f=Math.max(0,u-s),p=Math.min(A[0],a+s+2),m=Math.min(A[1],l+s+2),v=Math.min(A[2],u+s+2),w=d;w<p;w++)for(var x=L[w]-e,S=A[1]*A[2]*w,M=c;M<m;M++)for(var T=N[M]-i,P=x*x+T*T,D=S+A[2]*M,z=f;z<v;z++){var B=F[z]-n,H=P+B*B;if(H<o){var G=z+D;I[G]<0&&(I[G]=-I[G]);var W=Math.sqrt(H),Y=r/W,$=x*Y,q=T*Y,X=B*Y;if($+=e,q+=i,X+=n,-1===h($,q,X,t,-1)){var Z=r-W;Z<I[G]&&(I[G]=Z,O&&(R[G]=t))}}}}}function d(){for(var t=0;t<g;t++){j.withinRadii(y[t],b[t],_[t],k[t],U);for(var e=0,i=U[e];i>=0;)t<i&&c(t,i),i=U[++e]}}function c(t,e){var i=k[t],n=k[e],r=Y[0]=y[e]-y[t],o=Y[1]=b[e]-b[t],s=Y[2]=_[e]-_[t],a=r*r+o*o+s*s,l=Math.sqrt(a),u=(i*i+l*l-n*n)/(2*i*l),d=i*u;es(Y,Y),f($,Y),es($,$),Xo(q,Y,$),es(q,q);var c=Math.sqrt(i*i-d*d);ts($,$,c),ts(q,q,c),ts(Y,Y,d),Y[0]+=y[t],Y[1]+=b[t],Y[2]+=_[t],W=-1;for(var p=H,m=0;m<P;m++){var v=B[m],g=z[m],w=Y[0]+v*$[0]+g*q[0],x=Y[1]+v*$[1]+g*q[1],S=Y[2]+v*$[2]+g*q[2];if(-1===h(w,x,S,t,e))for(var E=Math.floor(C*(w-V[0])),M=Math.floor(C*(x-V[1])),T=Math.floor(C*(S-V[2])),D=Math.max(0,E-p),j=Math.max(0,M-p),U=Math.max(0,T-p),G=Math.min(A[0],E+p+2),X=Math.min(A[1],M+p+2),Z=Math.min(A[2],T+p+2),K=D;K<G;K++){r=w-L[K];for(var Q=A[1]*A[2]*K,J=j;J<X;J++){o=x-N[J];for(var tt=r*r+o*o,et=Q+A[2]*J,it=U;it<Z;it++){s=S-F[it],a=tt+s*s;var nt=it+et,rt=I[nt];rt>0&&a<rt*rt&&(I[nt]=Math.sqrt(a),O&&(R[nt]=t))}}}}}function f(t,e){return t[0]=t[1]=t[2]=1,0!==e[0]?t[0]=(e[1]+e[2])/-e[0]:0!==e[1]?t[1]=(e[0]+e[2])/-e[1]:0!==e[2]&&(t[2]=(e[0]+e[1])/-e[2]),t}function p(){for(var t=0;t<I.length;t++)I[t]<0&&(I[t]=0)}function m(){for(var t=0;t<R.length;t++)R[t]=i[R[t]]}function v(t,e,i){console.time("AVSurface.getVolume"),console.time("AVSurface.init"),n(t,e,i),console.timeEnd("AVSurface.init"),console.time("AVSurface.projectPoints"),u(),console.timeEnd("AVSurface.projectPoints"),console.time("AVSurface.projectTorii"),d(),console.timeEnd("AVSurface.projectTorii"),p(),m(),console.timeEnd("AVSurface.getVolume")}for(var g=e.length,y=new Float32Array(g),b=new Float32Array(g),_=new Float32Array(g),w=0;w<g;w++){var x=3*w;y[w]=t[x],b[w]=t[x+1],_[w]=t[x+2]}var S=Go(t);0===t.length&&(S[0].set([0,0,0]),S[1].set([0,0,0]));var k,E,M,T,C,O,P,A,D,I,R,L,N,F,z,B,j,U,H,V=S[0],G=S[1],W=-1,Y=new Float32Array([0,0,0]),$=new Float32Array([0,0,0]),q=new Float32Array([0,0,0]);this.getSurface=function(t,e,i,n,r,o,s){return v(e,i,r),new Us(I,A[2],A[1],A[0],R).getSurface(e,!1,void 0,D,s)}}function Na(t){function e(t){for(var e=d.atomCount[t],r=d.atomOffset[t],o=new Array(e),s=0;s<e;++s)o[s]=u.atomTypeId[r+s];d.residueTypeId[t]=p.add(i,o,n)}var i,n,r=null,o=null,s=null,a=null,h=null,l=null,u=t.atomStore,d=t.residueStore,c=t.chainStore,f=t.modelStore,p=t.residueMap,m=-1,v=-1,g=-1,y=-1;this.addAtom=function(t,p,b,_,w,x,S,k){var E=!1,M=!1,T=!1;r!==t?(E=!0,M=!0,T=!0,y+=1,g+=1,v+=1):o!==b?(M=!0,T=!0,g+=1,v+=1):a===w&&s===_&&h===k||(T=!0,v+=1),m+=1,E&&(f.growIfFull(),f.chainOffset[y]=g,f.chainCount[y]=0,f.count+=1,c.modelIndex[g]=y),M&&(c.growIfFull(),c.setChainname(g,p),c.setChainid(g,b),c.residueOffset[g]=v,c.residueCount[g]=0,c.count+=1,c.modelIndex[g]=y,f.chainCount[y]+=1,d.chainIndex[v]=g),T&&(i=s,n=l,v>0&&e(v-1),d.growIfFull(),d.resno[v]=w,void 0!==S&&(d.sstruc[v]=S.charCodeAt(0)),void 0!==k&&(d.inscode[v]=k.charCodeAt(0)),d.atomOffset[v]=m,d.atomCount[v]=0,d.count+=1,d.chainIndex[v]=g,c.residueCount[g]+=1),u.count+=1,u.residueIndex[m]=v,d.atomCount[v]+=1,r=t,o=b,s=_,a=w,h=k,l=x},this.finalize=function(){i=s,n=l,v>-1&&e(v)}}function Fa(t){switch(t=t.toLowerCase()){case"polymer":return hv;case"non-polymer":return lv;case"macrolide":return uv;case"water":return dv;default:return av}}function za(t){return!t||t[0]!==t[t.length-1]||"'"!==t[0]&&'"'!==t[0]?t:t.substring(1,t.length-1)}function Ba(t,e){Array.isArray(t[e])||Object.keys(t).forEach(function(e){t[e]=[t[e]]})}function ja(t){return"?"!==t}function Ua(t,e){return ja(t)?t:e}function Ha(t){switch(t.toLowerCase()){case"?":case"sing":return 1;case"doub":return 2;case"trip":return 3;case"quad":return 4}return 0}function Va(t,e,i){var n,r,o=e.atomStore,s=e.atomMap,a=t.chem_comp,h=t.chem_comp_atom,l=t.chem_comp_bond;a&&(a.name&&(e.title=a.name.trim().replace(L_,"")),a.id&&(e.id=a.id.trim().replace(L_,"")));var u={};if(h){var d,c,f,p;for(r=h.comp_id.length,n=0;n<r;++n)o.growIfFull(),d=h.atom_id[n].replace(R_,""),c=h.type_symbol[n],u[d]=n,o.atomTypeId[n]=s.add(d,c),o.x[n]=h.model_Cartn_x[n],o.y[n]=h.model_Cartn_y[n],o.z[n]=h.model_Cartn_z[n],o.serial[n]=n,f=h.pdbx_component_comp_id[n],p=h.pdbx_residue_numbering?h.pdbx_residue_numbering[n]:1,i.addAtom(0,"","",f,p,1);for(n=0;n<r;++n){var m=n+r;o.growIfFull(),d=h.atom_id[n].replace(R_,""),c=h.type_symbol[n],o.atomTypeId[m]=s.add(d,c),o.x[m]=h.pdbx_model_Cartn_x_ideal[n],o.y[m]=h.pdbx_model_Cartn_y_ideal[n],o.z[m]=h.pdbx_model_Cartn_z_ideal[n],o.serial[m]=m,f=h.pdbx_component_comp_id[n],p=h.pdbx_residue_numbering?h.pdbx_residue_numbering[n]:1,i.addAtom(1,"","",f,p,1)}}if(h&&l){var v,g,y;r=l.comp_id.length;var b=h.comp_id.length,_=e.getAtomProxy(),w=e.getAtomProxy();for(n=0;n<r;++n)v=l.atom_id_1[n].replace(R_,""),g=l.atom_id_2[n].replace(R_,""),y=Ha(l.value_order[n]),_.index=u[v],w.index=u[g],e.bondStore.growIfFull(),e.bondStore.addBond(_,w,y),_.index+=b,w.index+=b,e.bondStore.growIfFull(),e.bondStore.addBond(_,w,y)}}function Ga(t,e,i){function n(t){return o.get(r.atomTypeId[t]).covalent}var r=e.atomStore,o=e.atomMap;t.data&&(e.id=t.data,e.name=t.data),e.unitcell=new O_({a:parseFloat(t.cell_length_a),b:parseFloat(t.cell_length_b),c:parseFloat(t.cell_length_c),alpha:parseFloat(t.cell_angle_alpha),beta:parseFloat(t.cell_angle_beta),gamma:parseFloat(t.cell_angle_gamma),spacegroup:za(t.symmetry_space_group_name_H)});for(var s=new y,a=new y,h=t.atom_site_type_symbol.length,l=0;l<h;++l){r.growIfFull();var u=t.atom_site_label[l],d=t.atom_site_type_symbol[l];r.atomTypeId[l]=o.add(u,d),s.set(t.atom_site_fract_x[l],t.atom_site_fract_y[l],t.atom_site_fract_z[l]),s.applyMatrix4(e.unitcell.fracToCart),a.add(s),r.x[l]=s.x,r.y[l]=s.y,r.z[l]=s.z,t.atom_site_occupancy&&(r.occupancy[l]=parseFloat(t.atom_site_occupancy[l])),r.serial[l]=l,i.addAtom(0,"","","HET",1,1)}a.divideScalar(h),e.center=a,ia(e);for(var c=new y,f=new y,p=e.biomolDict.SUPERCELL.partList[0].matrixList,m=h,v=new b,g=0;g<h;++g)!function(t){var e=n(t);s.set(r.x[t],r.y[t],r.z[t]),p.forEach(function(o){if(!v.equals(o)){c.copy(s),c.applyMatrix4(o);for(var a=0;a<h;++a){f.set(r.x[a],r.y[a],r.z[a]);var l=c.distanceToSquared(f),u=n(a)+e,d=u+.3,p=u-.5;if(l<d*d&&l>p*p)return r.growIfFull(),r.atomTypeId[m]=r.atomTypeId[t],r.x[m]=c.x,r.y[m]=c.y,r.z[m]=c.z,r.occupancy[m]=r.occupancy[t],r.serial[m]=m,r.altloc[m]="A".charCodeAt(0),i.addAtom(0,"","","HET",1,1),void(m+=1)}}})}(g)}function Wa(t,e,i){var n,r,o,s,a=[],h=[],l=t.struct_conf;if(l)for(Ba(l,"id"),n=0,r=l.beg_auth_seq_id.length;n<r;++n){var u=parseInt(l.pdbx_PDB_helix_class[n]);Number.isNaN(u)||(o=l.pdbx_beg_PDB_ins_code[n],s=l.pdbx_end_PDB_ins_code[n],a.push([i[l.beg_label_asym_id[n]],parseInt(l.beg_auth_seq_id[n]),Ua(o,""),i[l.end_label_asym_id[n]],parseInt(l.end_auth_seq_id[n]),Ua(s,""),(P_[u]||P_[""]).charCodeAt(0)]))}var d=t.struct_sheet_range;if(d)for(Ba(d,"id"),n=0,r=d.beg_auth_seq_id.length;n<r;++n)o=d.pdbx_beg_PDB_ins_code[n],s=d.pdbx_end_PDB_ins_code[n],h.push([i[d.beg_label_asym_id[n]],parseInt(d.beg_auth_seq_id[n]),Ua(o,""),i[d.end_label_asym_id[n]],parseInt(d.end_auth_seq_id[n]),Ua(s,"")]);return!(!l&&!d)&&{helices:a,sheets:h}}function Ya(t,e,i){var n={},r=e.biomolDict;if(t.pdbx_struct_oper_list){var o=t.pdbx_struct_oper_list;Ba(o,"id"),o.id.forEach(function(t,e){var i=new b,r=i.elements;r[0]=parseFloat(o["matrix[1][1]"][e]),r[1]=parseFloat(o["matrix[1][2]"][e]),r[2]=parseFloat(o["matrix[1][3]"][e]),r[4]=parseFloat(o["matrix[2][1]"][e]),r[5]=parseFloat(o["matrix[2][2]"][e]),r[6]=parseFloat(o["matrix[2][3]"][e]),r[8]=parseFloat(o["matrix[3][1]"][e]),r[9]=parseFloat(o["matrix[3][2]"][e]),r[10]=parseFloat(o["matrix[3][3]"][e]),r[3]=parseFloat(o["vector[1]"][e]),r[7]=parseFloat(o["vector[2]"][e]),r[11]=parseFloat(o["vector[3]"][e]),i.transpose(),n[t]=i})}if(t.pdbx_struct_assembly_gen){var s=t.pdbx_struct_assembly_gen;Ba(s,"assembly_id");var a=function(t){var e={};return t.replace(/[()']/g,"").split(",").forEach(function(t){if(t.includes("-"))for(var i=t.split("-"),r=parseInt(i[0]),o=parseInt(i[1]);r<=o;++r)e[r]=n[r];else e[t]=n[t]}),e};s.assembly_id.forEach(function(t,e){var n={},o=s.oper_expression[e].replace(/['"]\(|['"]/g,"");if(o.includes(")(")||o.indexOf("(")>0){o=o.split("(");var h=a(o[0]),l=a(o[1]);Object.keys(h).forEach(function(t){Object.keys(l).forEach(function(e){var i=new b;i.multiplyMatrices(h[t],l[e]),n[t+"x"+e]=i})})}else n=a(o);var u=[];for(var d in n)u.push(n[d]);var c=t;/^(0|[1-9][0-9]*)$/.test(c)&&(c="BU"+c);for(var f=s.asym_id_list[e].split(","),p=0,m=f.length;p<m;++p)f[p]=i[f[p]];void 0===r[c]&&(r[c]=new rg(c)),r[c].addPart(u,f)})}if(t.struct_ncs_oper){var h=t.struct_ncs_oper;Ba(h,"id");r.NCS=new rg("NCS");var l=r.NCS.addPart();h.id.forEach(function(t,e){if("given"!==h.code[e]){var i=new b,n=i.elements;n[0]=parseFloat(h["matrix[1][1]"][e]),n[1]=parseFloat(h["matrix[1][2]"][e]),n[2]=parseFloat(h["matrix[1][3]"][e]),n[4]=parseFloat(h["matrix[2][1]"][e]),n[5]=parseFloat(h["matrix[2][2]"][e]),n[6]=parseFloat(h["matrix[2][3]"][e]),n[8]=parseFloat(h["matrix[3][1]"][e]),n[9]=parseFloat(h["matrix[3][2]"][e]),n[10]=parseFloat(h["matrix[3][3]"][e]),n[3]=parseFloat(h["vector[1]"][e]),n[7]=parseFloat(h["vector[2]"][e]),n[11]=parseFloat(h["vector[3]"][e]),i.transpose(),l.matrixList.push(i)}}),0===l.matrixList.length&&delete r.NCS}var u={};if(t.cell){var d=t.cell,c=parseFloat(d.length_a),f=parseFloat(d.length_b),p=parseFloat(d.length_c),m=new Float32Array(9);m[0]=c,m[4]=f,m[8]=p,e.boxes.push(m),u.a=c,u.b=f,u.c=p,u.alpha=parseFloat(d.angle_alpha),u.beta=parseFloat(d.angle_beta),u.gamma=parseFloat(d.angle_gamma)}t.symmetry&&(u.spacegroup=za(t.symmetry["space_group_name_H-M"]));var v=new b;if(t.database_PDB_matrix){var g=t.database_PDB_matrix,y=v.elements;y[0]=parseFloat(g["origx[1][1]"]),y[1]=parseFloat(g["origx[1][2]"]),y[2]=parseFloat(g["origx[1][3]"]),y[4]=parseFloat(g["origx[2][1]"]),y[5]=parseFloat(g["origx[2][2]"]),y[6]=parseFloat(g["origx[2][3]"]),y[8]=parseFloat(g["origx[3][1]"]),y[9]=parseFloat(g["origx[3][2]"]),y[10]=parseFloat(g["origx[3][3]"]),y[3]=parseFloat(g["origx_vector[1]"]),y[7]=parseFloat(g["origx_vector[2]"]),y[11]=parseFloat(g["origx_vector[3]"]),v.transpose(),u.origx=v}var _=new b;if(t.atom_sites){var w=t.atom_sites,x=_.elements;x[0]=parseFloat(w["fract_transf_matrix[1][1]"]),x[1]=parseFloat(w["fract_transf_matrix[1][2]"]),x[2]=parseFloat(w["fract_transf_matrix[1][3]"]),x[4]=parseFloat(w["fract_transf_matrix[2][1]"]),x[5]=parseFloat(w["fract_transf_matrix[2][2]"]),x[6]=parseFloat(w["fract_transf_matrix[2][3]"]),x[8]=parseFloat(w["fract_transf_matrix[3][1]"]),x[9]=parseFloat(w["fract_transf_matrix[3][2]"]),x[10]=parseFloat(w["fract_transf_matrix[3][3]"]),x[3]=parseFloat(w["fract_transf_vector[1]"]),x[7]=parseFloat(w["fract_transf_vector[2]"]),x[11]=parseFloat(w["fract_transf_vector[3]"]),_.transpose(),u.scale=_}void 0!==u.a?e.unitcell=new O_(u):e.unitcell=void 0}function $a(t,e,i){var n=t.struct_conn;if(n){Ba(n,"id");for(var r=/"/g,o=e.getAtomProxy(),s=e.getAtomProxy(),a={},h=0,l=n.id.length;h<l;++h){var u=n.conn_type_id[h];if("hydrog"!==u&&"mismat"!==u&&"saltbr"!==u&&("1_555"===n.ptnr1_symmetry[h]&&"1_555"===n.ptnr2_symmetry[h])){var d=n.pdbx_ptnr1_PDB_ins_code[h],c=n.pdbx_ptnr1_label_alt_id[h],f=n.ptnr1_auth_seq_id[h]+(ja(d)?"^"+d:"")+":"+i[n.ptnr1_label_asym_id[h]]+"."+n.ptnr1_label_atom_id[h].replace(r,"")+(ja(c)?"%"+c:""),p=a[f];if(!p){var m=new $f(f);if(m.selection.error){rp&&np.warn("invalid selection for connection",f);continue}p=e.getAtomIndices(m),a[f]=p}var v=n.pdbx_ptnr2_PDB_ins_code[h],g=n.pdbx_ptnr2_label_alt_id[h],y=n.ptnr2_auth_seq_id[h]+(ja(v)?"^"+v:"")+":"+i[n.ptnr2_label_asym_id[h]]+"."+n.ptnr2_label_atom_id[h].replace(r,"")+(ja(g)?"%"+g:""),b=a[y];if(!b){var _=new $f(y);if(_.selection.error){rp&&np.warn("invalid selection for connection",y);continue}b=e.getAtomIndices(_),a[y]=b}var w=p.length,x=b.length;if(w>x){var S=w;w=x,x=S;var k=p;p=b,b=k}if(0!==w&&0!==x)for(var E=0;E<x;++E)o.index=p[E%w],s.index=b[E],o&&s?e.bondStore.addBond(o,s,Ha(n.pdbx_value_order[h])):np.log("atoms for connection not found");else rp&&np.warn("no atoms found for",f,y)}}}}function qa(t,e,i){if(t.entity){Ba(t.entity,"id");for(var n=t.entity,r=n.id.length,o=0;o<r;++o){var s=n.pdbx_description[o],a=n.type[o],h=Array.from(i[n.id[o]]);e.entityList[o]=new T_(e,o,s,a,h)}}}function Xa(t,e,i){return e?new t(e.buffer,e.byteOffset,e.byteLength/(i||1)):void 0}function Za(t){return Xa(DataView,t)}function Ka(t){return Xa(Uint8Array,t)}function Qa(t){return Xa(Int8Array,t)}function Ja(t){return Xa(Int32Array,t,4)}function th(t){return Xa(Float32Array,t,4)}function eh(t,e){var i=t.length/2;e||(e=new Int16Array(i));for(var n=0,r=0;n<i;++n,r+=2)e[n]=t[r]<<8^t[r+1]<<0;return e}function ih(t,e){var i=t.length/4;e||(e=new Int32Array(i));for(var n=0,r=0;n<i;++n,r+=4)e[n]=t[r]<<24^t[r+1]<<16^t[r+2]<<8^t[r+3]<<0;return e}function nh(t,e){var i=t.length;e||(e=new Float32Array(i/4));for(var n=Za(e),r=Za(t),o=0,s=0,a=i/4;o<a;++o,s+=4)n.setFloat32(s,r.getFloat32(s),!0);return e}function rh(t,e,i){var n=t.length,r=1/e;i||(i=new Float32Array(n));for(var o=0;o<n;++o)i[o]=t[o]*r;return i}function oh(t,e){var i,n;if(!e){var r=0;for(i=0,n=t.length;i<n;i+=2)r+=t[i+1];e=new t.constructor(r)}var o=0;for(i=0,n=t.length;i<n;i+=2)for(var s=t[i],a=t[i+1],h=0;h<a;++h)e[o]=s,++o;return e}function sh(t,e){var i=t.length;e||(e=new t.constructor(i)),i&&(e[0]=t[0]);for(var n=1;n<i;++n)e[n]=t[n]+e[n-1];return e}function ah(t,e){var i,n,r=t instanceof Int8Array?127:32767,o=-r-1,s=t.length;if(!e){var a=0;for(i=0;i<s;++i)t[i]<r&&t[i]>o&&++a;e=new Int32Array(a)}for(i=0,n=0;i<s;){for(var h=0;t[i]===r||t[i]===o;)h+=t[i],++i;h+=t[i],++i,e[n]=h,++n}return e}function hh(t,e){return sh(oh(t),e)}function lh(t,e,i){return rh(oh(t,Ja(i)),e,i)}function uh(t,e,i){return rh(sh(t,Ja(i)),e,i)}function dh(t,e,i){return rh(ah(t,Ja(i)),e,i)}function ch(t,e,i){var n=ah(t,Ja(i));return uh(n,e,th(n))}function fh(t){var e=Za(t),i=e.getInt32(0),n=e.getInt32(4),r=t.subarray(8,12),t=t.subarray(12);return[i,t,n,r]}function ph(t){function e(t){for(var e={},i=0;i<t;i++){e[o()]=o()}return e}function i(e){var i=t.subarray(s,s+e);return s+=e,i}function n(e){var i=t.subarray(s,s+e);s+=e;if(e>65535){for(var n=[],r=0;r<i.length;r+=65535)n.push(String.fromCharCode.apply(null,i.subarray(r,r+65535)));return n.join("")}return String.fromCharCode.apply(null,i)}function r(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=o();return e}function o(){var o,h,l=t[s];if(0===(128&l))return s++,l;if(128===(240&l))return h=15&l,s++,e(h);if(144===(240&l))return h=15&l,s++,r(h);if(160===(224&l))return h=31&l,s++,n(h);if(224===(224&l))return o=a.getInt8(s),s++,o;switch(l){case 192:return s++,null;case 194:return s++,!1;case 195:return s++,!0;case 196:return h=a.getUint8(s+1),s+=2,i(h);case 197:return h=a.getUint16(s+1),s+=3,i(h);case 198:return h=a.getUint32(s+1),s+=5,i(h);case 202:return o=a.getFloat32(s+1),s+=5,o;case 203:return o=a.getFloat64(s+1),s+=9,o;case 204:return o=t[s+1],s+=2,o;case 205:return o=a.getUint16(s+1),s+=3,o;case 206:return o=a.getUint32(s+1),s+=5,o;case 208:return o=a.getInt8(s+1),s+=2,o;case 209:return o=a.getInt16(s+1),s+=3,o;case 210:return o=a.getInt32(s+1),s+=5,o;case 217:return h=a.getUint8(s+1),s+=2,n(h);case 218:return h=a.getUint16(s+1),s+=3,n(h);case 219:return h=a.getUint32(s+1),s+=5,n(h);case 220:return h=a.getUint16(s+1),s+=3,r(h);case 221:return h=a.getUint32(s+1),s+=5,r(h);case 222:return h=a.getUint16(s+1),s+=3,e(h);case 223:return h=a.getUint32(s+1),s+=5,e(h)}throw new Error("Unknown type 0x"+l.toString(16))}var s=0,a=new DataView(t.buffer);return o()}function mh(t,e,i,n){switch(t){case 1:return nh(e);case 2:return Qa(e);case 3:return eh(e);case 4:return ih(e);case 5:return Ka(e);case 6:return oh(ih(e),new Uint8Array(i));case 7:return oh(ih(e));case 8:return hh(ih(e));case 9:return lh(ih(e),ih(n)[0]);case 10:return ch(eh(e),ih(n)[0]);case 11:return rh(eh(e),ih(n)[0]);case 12:return dh(eh(e),ih(n)[0]);case 13:return dh(Qa(e),ih(n)[0]);case 14:return ah(eh(e));case 15:return ah(Qa(e))}}function vh(t,e){e=e||{};var i=e.ignoreFields,n={};return j_.forEach(function(e){var r=!!i&&-1!==i.indexOf(e),o=t[e];r||void 0===o||(o instanceof Uint8Array?n[e]=mh.apply(null,fh(o)):n[e]=o)}),n}function gh(){this.regexp={vertex_pattern:/^v\s+([\d|.|+|\-|e|E]+)\s+([\d|.|+|\-|e|E]+)\s+([\d|.|+|\-|e|E]+)/,normal_pattern:/^vn\s+([\d|.|+|\-|e|E]+)\s+([\d|.|+|\-|e|E]+)\s+([\d|.|+|\-|e|E]+)/,uv_pattern:/^vt\s+([\d|.|+|\-|e|E]+)\s+([\d|.|+|\-|e|E]+)/,face_vertex:/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,face_vertex_uv:/^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,face_vertex_uv_normal:/^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,face_vertex_normal:/^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,object_pattern:/^[og]\s*(.+)?/,smoothing_pattern:/^s\s+(\d+|on|off)/,material_library_pattern:/^mtllib /,material_use_pattern:/^usemtl /}}function yh(){this.propertyNameMapping={}}function bh(t){return t.replace(_w,"")}function _h(t){function e(){if(o(/^<\?xml\s*/)){for(var t={attributes:{}};!s()&&!a("?>");){var e=r();if(!e)return t;t.attributes[e.name]=e.value}return o(/\?>\s*/),t}}function i(){var t=o(ww);if(t){for(var e={name:t[1],attributes:{},children:[]};!(s()||a(">")||a("?>")||a("/>"));){var h=r();if(!h)return e;e.attributes[h.name]=h.value}if(o(/^\s*\/>\s*/))return e;o(/\??>\s*/),e.content=n();for(var l;l=i();)e.children.push(l);return o(/^<\/[\w-:.]+>\s*/),e}}function n(){var t=o(xw);return t?t[1]:""}function r(){var t=o(Sw);if(t)return{name:t[1],value:bh(t[2])}}function o(e){var i=t.match(e);if(i)return t=t.slice(i[0].length),i}function s(){return 0===t.length}function a(e){return 0===t.indexOf(e)}return t=t.trim().replace(/<!--[\s\S]*?-->/g,""),function(){return{declaration:e(),root:i()}}()}function wh(t,e,i){var n=t.icode.value,r=t.chain.value,o=t.altcode.value,s=t.resnum.value;return n.trim()&&(s+="^"+n),r.trim()&&(s+=":"+r),e&&(s+="."+e),i&&o.trim()&&(s+="%"+o),s+="/"+(parseInt(t.model.value)-1)}function xh(t,e,i){void 0===t[e]?t[e]=i:t[e]|=i}function Sh(t,e){return void 0!==t&&t.value===e}function kh(t){var e=t.inscode,i=t.chainname,n=t.atomname,r=t.altloc,o=t.resno;return e&&(o+="^"+e),i&&(o+=":"+i),n&&(o+="."+n),r&&(o+="%"+r),o+="/"+t.modelIndex}function Eh(t,e,i){for(var n=0,r=e.getElementsByTagName("clash"),o=0,s=r.length;o<s;++o)if(t[r[o].attributes.cid.value]){n+=1;break}return e.getElementsByTagName("angle-outlier").length>0&&(n+=1),e.getElementsByTagName("bond-outlier").length>0&&(n+=1),e.getElementsByTagName("plane-outlier").length>0&&(n+=1),Sh(i.rota,"OUTLIER")&&(n+=1),Sh(i.rama,"OUTLIER")&&(n+=1),Sh(i.RNApucker,"outlier")&&(n+=1),n}function Mh(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!==typeof i)throw new TypeError(i+"must be non-object");for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}}return t}function Th(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)}function Ch(t,e,i,n,r){if(e.subarray&&t.subarray)return void t.set(e.subarray(i,i+n),r);for(var o=0;o<n;o++)t[r+o]=e[i+o]}function Oh(t){var e,i,n,r,o,s;for(n=0,e=0,i=t.length;e<i;e++)n+=t[e].length;for(s=new Uint8Array(n),r=0,e=0,i=t.length;e<i;e++)o=t[e],s.set(o,r),r+=o.length;return s}function Ph(t,e,i,n){for(var r=65535&t|0,o=t>>>16&65535|0,s=0;0!==i;){s=i>2e3?2e3:i,i-=s;do{r=r+e[n++]|0,o=o+r|0}while(--s);r%=65521,o%=65521}return r|o<<16|0}function Ah(t,e,i,n){var r=Pw,o=n+i;t^=-1;for(var s=n;s<o;s++)t=t>>>8^r[255&(t^e[s])];return-1^t}function Dh(t,e){var i,n,r,o,s,a,h,l,u,d,c,f,p,m,v,g,y,b,_,w,x,S,k,E,M;i=t.state,n=t.next_in,E=t.input,r=n+(t.avail_in-5),o=t.next_out,M=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),h=i.dmax,l=i.wsize,u=i.whave,d=i.wnext,c=i.window,f=i.hold,p=i.bits,m=i.lencode,v=i.distcode,g=(1<<i.lenbits)-1,y=(1<<i.distbits)-1;t:do{p<15&&(f+=E[n++]<<p,p+=8,f+=E[n++]<<p,p+=8),b=m[f&g];e:for(;;){if(_=b>>>24,f>>>=_,p-=_,0===(_=b>>>16&255))M[o++]=65535&b;else{if(!(16&_)){if(0===(64&_)){b=m[(65535&b)+(f&(1<<_)-1)];continue e}if(32&_){i.mode=Dw;break t}t.msg="invalid literal/length code",i.mode=Aw;break t}w=65535&b,_&=15,_&&(p<_&&(f+=E[n++]<<p,p+=8),w+=f&(1<<_)-1,f>>>=_,p-=_),p<15&&(f+=E[n++]<<p,p+=8,f+=E[n++]<<p,p+=8),b=v[f&y];i:for(;;){if(_=b>>>24,f>>>=_,p-=_,!(16&(_=b>>>16&255))){if(0===(64&_)){b=v[(65535&b)+(f&(1<<_)-1)];continue i}t.msg="invalid distance code",i.mode=Aw;break t}if(x=65535&b,_&=15,p<_&&(f+=E[n++]<<p,(p+=8)<_&&(f+=E[n++]<<p,p+=8)),(x+=f&(1<<_)-1)>h){t.msg="invalid distance too far back",i.mode=Aw;break t}if(f>>>=_,p-=_,_=o-s,x>_){if((_=x-_)>u&&i.sane){t.msg="invalid distance too far back",i.mode=Aw;break t}if(S=0,k=c,0===d){if(S+=l-_,_<w){w-=_;do{M[o++]=c[S++]}while(--_);S=o-x,k=M}}else if(d<_){if(S+=l+d-_,(_-=d)<w){w-=_;do{M[o++]=c[S++]}while(--_);if(S=0,d<w){_=d,w-=_;do{M[o++]=c[S++]}while(--_);S=o-x,k=M}}}else if(S+=d-_,_<w){w-=_;do{M[o++]=c[S++]}while(--_);S=o-x,k=M}for(;w>2;)M[o++]=k[S++],M[o++]=k[S++],M[o++]=k[S++],w-=3;w&&(M[o++]=k[S++],w>1&&(M[o++]=k[S++]))}else{S=o-x;do{M[o++]=M[S++],M[o++]=M[S++],M[o++]=M[S++],w-=3}while(w>2);w&&(M[o++]=M[S++],w>1&&(M[o++]=M[S++]))}break}}break}}while(n<r&&o<a);w=p>>3,n-=w,p-=w<<3,f&=(1<<p)-1,t.next_in=n,t.next_out=o,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=o<a?a-o+257:257-(o-a),i.hold=f,i.bits=p}function Ih(t,e,i,n,r,o,s,a){var h,l,u,d,c,f,p,m,v,g=a.bits,y=0,b=0,_=0,w=0,x=0,S=0,k=0,E=0,M=0,T=0,C=null,O=0,P=new Uint16Array(Iw+1),A=new Uint16Array(Iw+1),D=null,I=0;for(y=0;y<=Iw;y++)P[y]=0;for(b=0;b<n;b++)P[e[i+b]]++;for(x=g,w=Iw;w>=1&&0===P[w];w--);if(x>w&&(x=w),0===w)return r[o++]=20971520,r[o++]=20971520,a.bits=1,0;for(_=1;_<w&&0===P[_];_++);for(x<_&&(x=_),E=1,y=1;y<=Iw;y++)if(E<<=1,(E-=P[y])<0)return-1;if(E>0&&(t===Nw||1!==w))return-1;for(A[1]=0,y=1;y<Iw;y++)A[y+1]=A[y]+P[y];for(b=0;b<n;b++)0!==e[i+b]&&(s[A[e[i+b]]++]=b);if(t===Nw?(C=D=s,f=19):t===Fw?(C=Bw,O-=257,D=jw,I-=257,f=256):(C=Uw,D=Hw,f=-1),T=0,b=0,y=_,c=o,S=x,k=0,u=-1,M=1<<x,d=M-1,t===Fw&&M>Rw||t===zw&&M>Lw)return 1;for(;;){p=y-k,s[b]<f?(m=0,v=s[b]):s[b]>f?(m=D[I+s[b]],v=C[O+s[b]]):(m=96,v=0),h=1<<y-k,l=1<<S,_=l;do{l-=h,r[c+(T>>k)+l]=p<<24|m<<16|v|0}while(0!==l);for(h=1<<y-1;T&h;)h>>=1;if(0!==h?(T&=h-1,T+=h):T=0,b++,0===--P[y]){if(y===w)break;y=e[i+s[b]]}if(y>x&&(T&d)!==u){for(0===k&&(k=x),c+=_,S=y-k,E=1<<S;S+k<w&&!((E-=P[S+k])<=0);)S++,E<<=1;if(M+=1<<S,t===Fw&&M>Rw||t===zw&&M>Lw)return 1;u=T&d,r[u]=x<<24|S<<16|c-o|0}}return 0!==T&&(r[c+T]=y-k<<24|64<<16|0),a.bits=x,0}function Rh(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function Lh(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Nh(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=nx,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Lx),e.distcode=e.distdyn=new Int32Array(Nx),e.sane=1,e.back=-1,Xw):Qw}function Fh(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,Nh(t)):Qw}function zh(t,e){var i,n;return t&&t.state?(n=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Qw:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,Fh(t))):Qw}function Bh(t,e){var i,n;return t?(n=new Lh,t.state=n,n.window=null,i=zh(t,e),i!==Xw&&(t.state=null),i):Qw}function jh(t){if(Fx){var e;for(Cw=new Int32Array(512),Ow=new Int32Array(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Ih(Gw,t.lens,0,288,Cw,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Ih(Ww,t.lens,0,32,Ow,0,t.work,{bits:5}),Fx=!1}t.lencode=Cw,t.lenbits=9,t.distcode=Ow,t.distbits=5}function Uh(t,e,i,n){var r,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(Ch(o.window,e,i-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>n&&(r=n),Ch(o.window,e,i-n,r,o.wnext),n-=r,n?(Ch(o.window,e,i-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}function Hh(t,e){var i,n,r,o,s,a,h,l,u,d,c,f,p,m,v,g,y,b,_,w,x,S,k,E,M=0,T=new Uint8Array(4),C=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return Qw;i=t.state,i.mode===px&&(i.mode=mx),s=t.next_out,r=t.output,h=t.avail_out,o=t.next_in,n=t.input,a=t.avail_in,l=i.hold,u=i.bits,d=a,c=h,S=Xw;t:for(;;)switch(i.mode){case nx:if(0===i.wrap){i.mode=mx;break}for(;u<16;){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}if(2&i.wrap&&35615===l){i.check=0,T[0]=255&l,T[1]=l>>>8&255,i.check=Ah(i.check,T,2,0),l=0,u=0,i.mode=rx;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",i.mode=Dx;break}if((15&l)!==ix){t.msg="unknown compression method",i.mode=Dx;break}if(l>>>=4,u-=4,x=8+(15&l),0===i.wbits)i.wbits=x;else if(x>i.wbits){t.msg="invalid window size",i.mode=Dx;break}i.dmax=1<<x,t.adler=i.check=1,i.mode=512&l?cx:px,l=0,u=0;break;case rx:for(;u<16;){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}if(i.flags=l,(255&i.flags)!==ix){t.msg="unknown compression method",i.mode=Dx;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=Dx;break}i.head&&(i.head.text=l>>8&1),512&i.flags&&(T[0]=255&l,T[1]=l>>>8&255,i.check=Ah(i.check,T,2,0)),l=0,u=0,i.mode=ox;case ox:for(;u<32;){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}i.head&&(i.head.time=l),512&i.flags&&(T[0]=255&l,T[1]=l>>>8&255,T[2]=l>>>16&255,T[3]=l>>>24&255,i.check=Ah(i.check,T,4,0)),l=0,u=0,i.mode=sx;case sx:for(;u<16;){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}i.head&&(i.head.xflags=255&l,i.head.os=l>>8),512&i.flags&&(T[0]=255&l,T[1]=l>>>8&255,i.check=Ah(i.check,T,2,0)),l=0,u=0,i.mode=ax;case ax:if(1024&i.flags){for(;u<16;){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}i.length=l,i.head&&(i.head.extra_len=l),512&i.flags&&(T[0]=255&l,T[1]=l>>>8&255,i.check=Ah(i.check,T,2,0)),l=0,u=0}else i.head&&(i.head.extra=null);i.mode=hx;case hx:if(1024&i.flags&&(f=i.length,f>a&&(f=a),f&&(i.head&&(x=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),Ch(i.head.extra,n,o,f,x)),512&i.flags&&(i.check=Ah(i.check,n,f,o)),a-=f,o+=f,i.length-=f),i.length))break t;i.length=0,i.mode=lx;case lx:if(2048&i.flags){if(0===a)break t;f=0;do{x=n[o+f++],i.head&&x&&i.length<65536&&(i.head.name+=String.fromCharCode(x))}while(x&&f<a);if(512&i.flags&&(i.check=Ah(i.check,n,f,o)),a-=f,o+=f,x)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=ux;case ux:if(4096&i.flags){if(0===a)break t;f=0;do{x=n[o+f++],i.head&&x&&i.length<65536&&(i.head.comment+=String.fromCharCode(x))}while(x&&f<a);if(512&i.flags&&(i.check=Ah(i.check,n,f,o)),a-=f,o+=f,x)break t}else i.head&&(i.head.comment=null);i.mode=dx;case dx:if(512&i.flags){for(;u<16;){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}if(l!==(65535&i.check)){t.msg="header crc mismatch",i.mode=Dx;break}l=0,u=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=px;break;case cx:for(;u<32;){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}t.adler=i.check=Rh(l),l=0,u=0,i.mode=fx;case fx:if(0===i.havedict)return t.next_out=s,t.avail_out=h,t.next_in=o,t.avail_in=a,i.hold=l,i.bits=u,Kw;t.adler=i.check=1,i.mode=px;case px:if(e===$w||e===qw)break t;case mx:if(i.last){l>>>=7&u,u-=7&u,i.mode=Ox;break}for(;u<3;){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}switch(i.last=1&l,l>>>=1,u-=1,3&l){case 0:i.mode=vx;break;case 1:if(jh(i),i.mode=xx,e===qw){l>>>=2,u-=2;break t}break;case 2:i.mode=bx;break;case 3:t.msg="invalid block type",i.mode=Dx}l>>>=2,u-=2;break;case vx:for(l>>>=7&u,u-=7&u;u<32;){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}if((65535&l)!==(l>>>16^65535)){t.msg="invalid stored block lengths",i.mode=Dx;break}if(i.length=65535&l,l=0,u=0,i.mode=gx,e===qw)break t;case gx:i.mode=yx;case yx:if(f=i.length){if(f>a&&(f=a),f>h&&(f=h),0===f)break t;Ch(r,n,o,f,s),a-=f,o+=f,h-=f,s+=f,i.length-=f;break}i.mode=px;break;case bx:for(;u<14;){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}if(i.nlen=257+(31&l),l>>>=5,u-=5,i.ndist=1+(31&l),l>>>=5,u-=5,i.ncode=4+(15&l),l>>>=4,u-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=Dx;break}i.have=0,i.mode=_x;case _x:for(;i.have<i.ncode;){for(;u<3;){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}i.lens[C[i.have++]]=7&l,l>>>=3,u-=3}for(;i.have<19;)i.lens[C[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,k={bits:i.lenbits},S=Ih(Vw,i.lens,0,19,i.lencode,0,i.work,k),i.lenbits=k.bits,S){t.msg="invalid code lengths set",i.mode=Dx;break}i.have=0,i.mode=wx;case wx:for(;i.have<i.nlen+i.ndist;){for(;M=i.lencode[l&(1<<i.lenbits)-1],v=M>>>24,g=M>>>16&255,y=65535&M,!(v<=u);){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}if(y<16)l>>>=v,u-=v,i.lens[i.have++]=y;else{if(16===y){for(E=v+2;u<E;){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}if(l>>>=v,u-=v,0===i.have){t.msg="invalid bit length repeat",i.mode=Dx;break}x=i.lens[i.have-1],f=3+(3&l),l>>>=2,u-=2}else if(17===y){for(E=v+3;u<E;){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}l>>>=v,u-=v,x=0,f=3+(7&l),l>>>=3,u-=3}else{for(E=v+7;u<E;){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}l>>>=v,u-=v,x=0,f=11+(127&l),l>>>=7,u-=7}if(i.have+f>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=Dx;break}for(;f--;)i.lens[i.have++]=x}}if(i.mode===Dx)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=Dx;break}if(i.lenbits=9,k={bits:i.lenbits},S=Ih(Gw,i.lens,0,i.nlen,i.lencode,0,i.work,k),i.lenbits=k.bits,S){t.msg="invalid literal/lengths set",i.mode=Dx;break}if(i.distbits=6,i.distcode=i.distdyn,k={bits:i.distbits},S=Ih(Ww,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,k),i.distbits=k.bits,S){t.msg="invalid distances set",i.mode=Dx;break}if(i.mode=xx,e===qw)break t;case xx:i.mode=Sx;case Sx:if(a>=6&&h>=258){t.next_out=s,t.avail_out=h,t.next_in=o,t.avail_in=a,i.hold=l,i.bits=u,Dh(t,c),s=t.next_out,r=t.output,h=t.avail_out,o=t.next_in,n=t.input,a=t.avail_in,l=i.hold,u=i.bits,i.mode===px&&(i.back=-1);break}for(i.back=0;M=i.lencode[l&(1<<i.lenbits)-1],v=M>>>24,g=M>>>16&255,y=65535&M,!(v<=u);){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}if(g&&0===(240&g)){for(b=v,_=g,w=y;M=i.lencode[w+((l&(1<<b+_)-1)>>b)],v=M>>>24,g=M>>>16&255,y=65535&M,!(b+v<=u);){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}l>>>=b,u-=b,i.back+=b}if(l>>>=v,u-=v,i.back+=v,i.length=y,0===g){i.mode=Cx;break}if(32&g){i.back=-1,i.mode=px;break}if(64&g){t.msg="invalid literal/length code",i.mode=Dx;break}i.extra=15&g,i.mode=kx;case kx:if(i.extra){for(E=i.extra;u<E;){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}i.length+=l&(1<<i.extra)-1,l>>>=i.extra,u-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=Ex;case Ex:for(;M=i.distcode[l&(1<<i.distbits)-1],v=M>>>24,g=M>>>16&255,y=65535&M,!(v<=u);){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}if(0===(240&g)){for(b=v,_=g,w=y;M=i.distcode[w+((l&(1<<b+_)-1)>>b)],v=M>>>24,g=M>>>16&255,y=65535&M,!(b+v<=u);){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}l>>>=b,u-=b,i.back+=b}if(l>>>=v,u-=v,i.back+=v,64&g){t.msg="invalid distance code",i.mode=Dx;break}i.offset=y,i.extra=15&g,i.mode=Mx;case Mx:if(i.extra){for(E=i.extra;u<E;){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}i.offset+=l&(1<<i.extra)-1,l>>>=i.extra,u-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=Dx;break}i.mode=Tx;case Tx:if(0===h)break t;if(f=c-h,i.offset>f){if((f=i.offset-f)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=Dx;break}f>i.wnext?(f-=i.wnext,p=i.wsize-f):p=i.wnext-f,f>i.length&&(f=i.length),m=i.window}else m=r,p=s-i.offset,f=i.length;f>h&&(f=h),h-=f,i.length-=f;do{r[s++]=m[p++]}while(--f);0===i.length&&(i.mode=Sx);break;case Cx:if(0===h)break t;r[s++]=i.length,h--,i.mode=Sx;break;case Ox:if(i.wrap){for(;u<32;){if(0===a)break t;a--,l|=n[o++]<<u,u+=8}if(c-=h,t.total_out+=c,i.total+=c,c&&(t.adler=i.check=i.flags?Ah(i.check,r,c,s-c):Ph(i.check,r,c,s-c)),c=h,(i.flags?l:Rh(l))!==i.check){t.msg="incorrect data check",i.mode=Dx;break}l=0,u=0}i.mode=Px;case Px:if(i.wrap&&i.flags){for(;u<32;){if(0===a)break t;a--,l+=n[o++]<<u,u+=8}if(l!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=Dx;break}l=0,u=0}i.mode=Ax;case Ax:S=Zw;break t;case Dx:S=Jw;break t;case Ix:return tx;case Rx:default:return Qw}return t.next_out=s,t.avail_out=h,t.next_in=o,t.avail_in=a,i.hold=l,i.bits=u,(i.wsize||c!==t.avail_out&&i.mode<Dx&&(i.mode<Ox||e!==Yw))&&Uh(t,t.output,t.next_out,c-t.avail_out),d-=t.avail_in,c-=t.avail_out,t.total_in+=d,t.total_out+=c,i.total+=c,i.wrap&&c&&(t.adler=i.check=i.flags?Ah(i.check,r,c,t.next_out-c):Ph(i.check,r,c,t.next_out-c)),t.data_type=i.bits+(i.last?64:0)+(i.mode===px?128:0)+(i.mode===xx||i.mode===gx?256:0),(0===d&&0===c||e===Yw)&&S===Xw&&(S=ex),S}function Vh(t){if(!t||!t.state)return Qw;var e=t.state;return e.window&&(e.window=null),t.state=null,Xw}function Gh(t,e){var i;return t&&t.state?(i=t.state,0===(2&i.wrap)?Qw:(i.head=e,e.done=!1,Xw)):Qw}function Wh(t,e){var i,n,r=e.length;return t&&t.state?(i=t.state,0!==i.wrap&&i.mode!==fx?Qw:i.mode===fx&&(n=1,(n=Ph(n,e,r,0))!==i.check)?Jw:Uh(t,e,r,r)?(i.mode=Ix,tx):(i.havedict=1,Xw)):Qw}function Yh(t){var e,i,n,r,o,s=t.length,a=0;for(r=0;r<s;r++)i=t.charCodeAt(r),55296===(64512&i)&&r+1<s&&56320===(64512&(n=t.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(n-56320),r++),a+=i<128?1:i<2048?2:i<65536?3:4;for(e=new Uint8Array(a),o=0,r=0;o<a;r++)i=t.charCodeAt(r),55296===(64512&i)&&r+1<s&&56320===(64512&(n=t.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(n-56320),r++),i<128?e[o++]=i:i<2048?(e[o++]=192|i>>>6,e[o++]=128|63&i):i<65536?(e[o++]=224|i>>>12,e[o++]=128|i>>>6&63,e[o++]=128|63&i):(e[o++]=240|i>>>18,e[o++]=128|i>>>12&63,e[o++]=128|i>>>6&63,e[o++]=128|63&i);return e}function $h(t,e){if(e<65537&&(t.subarray&&Bx||!t.subarray&&zx))return String.fromCharCode.apply(null,Th(t,e));for(var i="",n=0;n<e;n++)i+=String.fromCharCode(t[n]);return i}function qh(t){for(var e=new Uint8Array(t.length),i=0,n=e.length;i<n;i++)e[i]=t.charCodeAt(i);return e}function Xh(t,e){var i,n,r,o,s=e||t.length,a=new Array(2*s);for(n=0,i=0;i<s;)if((r=t[i++])<128)a[n++]=r;else if((o=jx[r])>4)a[n++]=65533,i+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&i<s;)r=r<<6|63&t[i++],o--;o>1?a[n++]=65533:r<65536?a[n++]=r:(r-=65536,a[n++]=55296|r>>10&1023,a[n++]=56320|1023&r)}return $h(a,n)}function Zh(t,e){var i;for(e=e||t.length,e>t.length&&(e=t.length),i=e-1;i>=0&&128===(192&t[i]);)i--;return i<0?e:0===i?e:i+jx[t[i]]>e?i:e}function Kh(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function Qh(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}function Jh(t){if(!(this instanceof Jh))return new Jh(t);this.options=Mh({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Kh,this.strm.avail_out=0;var i=Bh(this.strm,e.windowBits);if(i!==Hx)throw new Error(Vx[i]);this.header=new Qh,Gh(this.strm,this.header)}function tl(t,e){var i=new Jh(e);if(i.push(t,!0),i.err)throw i.msg;return i.result}function el(t){var e;t instanceof ArrayBuffer&&(t=new Uint8Array(t));try{e=tl(t)}catch(i){e=t}return e}function il(){this.getUrl=function(t){var e,i=br(t),n=i.name.substr(0,4);return!["pdb","cif"].includes(i.ext)||!1!==i.compressed&&"gz"!==i.compressed?"mmtf"===i.ext?e=i.base.endsWith(".bb")?$x+n:Yx+n:i.ext?(np.warn("unsupported ext",i.ext),e=Yx+n):e=Yx+n:e=Wx+i.path,yr()+e},this.getExt=function(t){var e=br(t);if("mmtf"===e.ext||!e.ext)return"mmtf"}}function nl(){this.getUrl=function(t){var e,i=br(t),n=i.name;return i.ext&&"sdf"!==i.ext?(np.warn("unsupported ext",i.ext),e=qx+n+Xx):e=qx+n+Xx,yr()+e},this.getExt=function(t){var e=br(t);if(!e.ext||"sdf"===e.ext)return"sdf"}}function rl(){this.getUrl=function(t){return t}}var ol=i(302),sl=i.n(ol),al=i(305),hl=i.n(al);"undefined"!==typeof window&&function(){window.console=window.console||{};for(var t,e,i=window.console,n={},r=function(){},o="memory".split(","),s="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=o.pop();)i[t]||(i[t]=n);for(;e=s.pop();)i[e]||(i[e]=r)}(),"undefined"===typeof window.HTMLCanvasElement||window.HTMLCanvasElement.prototype.toBlob||Object.defineProperty(window.HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,i){for(var n=window.atob(this.toDataURL(e,i).split(",")[1]),r=n.length,o=r>>2,s=new Uint8Array(r),a=new Uint32Array(s.buffer,0,o),h=0,l=0;h<o;h++)a[h]=n.charCodeAt(l++)|n.charCodeAt(l++)<<8|n.charCodeAt(l++)<<16|n.charCodeAt(l++)<<24;for(var u=3&r;u--;)s[l]=n.charCodeAt(l++);t(new window.Blob([s],{type:e||"image/png"}))}}),Math.cbrt=Math.cbrt||function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},Math.sign||(Math.sign=function(t){return t=+t,0===t||isNaN(t)?Number(t):t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"===typeof t&&isFinite(t)&&t>-9007199254740992&&t<9007199254740992&&Math.floor(t)===t}),Number.isNaN||(Number.isNaN=function(t){return t!==t}),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var e=arguments;if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var i,n=Object(t),r=!1,o=1;o<arguments.length;o++){var s=e[o];if(void 0!==s&&null!==s){for(var a=Object.keys(Object(s)),h=0,l=a.length;h<l;h++){var u=a[h];try{var d=Object.getOwnPropertyDescriptor(s,u);void 0!==d&&d.enumerable&&(n[u]=s[u])}catch(t){r||(r=!0,i=t)}}if(r)throw i}}return n}}),String.prototype.startsWith||function(){var t=function(){var t;try{var e={},i=Object.defineProperty;t=i(e,e,e)&&i}catch(t){}return t}(),e={}.toString,i=function(t){if(null===this)throw TypeError();var i=String(this);if(t&&"[object RegExp]"===e.call(t))throw TypeError();var n=i.length,r=String(t),o=r.length,s=arguments.length>1?arguments[1]:void 0,a=s?Number(s):0;Number.isNaN(a)&&(a=0);var h=Math.min(Math.max(a,0),n);if(o+h>n)return!1;for(var l=-1;++l<o;)if(i.charCodeAt(h+l)!==r.charCodeAt(l))return!1;return!0};t?t(String.prototype,"startsWith",{value:i,configurable:!0,writable:!0}):String.prototype.startsWith=i}(),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var i=this.toString();("number"!==typeof e||!isFinite(e)||Math.floor(e)!==e||e>i.length)&&(e=i.length),e-=t.length;var n=i.indexOf(t,e);return-1!==n&&n===e}),String.prototype.includes||(String.prototype.includes=function(t,e){return"number"!==typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}),Array.prototype.includes||(Array.prototype.includes=function(t){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");var e=Object(this),i=parseInt(e.length,10)||0;if(0===i)return!1;var n,r=parseInt(arguments[1],10)||0;r>=0?n=r:(n=i+r)<0&&(n=0);for(var o;n<i;){if(o=e[n],t===o||Number.isNaN(t)&&Number.isNaN(o))return!0;n++}return!1}),Array.from||(Array.from=function(){var t=Object.prototype.toString,e=function(e){return"function"===typeof e||"[object Function]"===t.call(e)},i=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e},n=Math.pow(2,53)-1,r=function(t){var e=i(t);return Math.min(Math.max(e,0),n)};return function(t){var i=this,n=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,s=arguments.length>1?arguments[1]:void 0;if("undefined"!==typeof s){if(!e(s))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}for(var a,h=r(n.length),l=e(i)?Object(new i(h)):new Array(h),u=0;u<h;)a=n[u],l[u]=s?"undefined"===typeof o?s(a,u):s.call(o,a,u):a,u+=1;return l.length=h,l}}()),"undefined"!==typeof window&&function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-t)),r=window.setTimeout(function(){e(i+n)},n);return t=i+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),"undefined"!==typeof window&&(void 0===window.performance&&(self.performance={}),void 0===window.performance.now&&function(){var t=Date.now();window.performance.now=function(){return Date.now()-t}}());var ll=setTimeout,ul="function"===typeof t&&t||function(t){ll(t,0)},dl=function(t){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var i=new this.constructor(n);return s(this,new u(t,e,i)),i},o.all=function(t){var e=Array.prototype.slice.call(t);return new o(function(t,i){function n(o,s){try{if(s&&("object"===typeof s||"function"===typeof s)){var a=s.then;if("function"===typeof a)return void a.call(s,function(t){n(o,t)},i)}e[o]=s,0===--r&&t(e)}catch(t){i(t)}}if(0===e.length)return t([]);for(var r=e.length,o=0;o<e.length;o++)n(o,e[o])})},o.resolve=function(t){return t&&"object"===typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,i){i(t)})},o.race=function(t){return new o(function(e,i){for(var n=0,r=t.length;n<r;n++)t[n].then(e,i)})},o._setImmediateFn=function(t){ul=t},o._setUnhandledRejectionFn=function(t){dl=t},void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(t){var e=arguments;if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1;n<arguments.length;n++){var r=e[n];if(void 0!==r&&null!==r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i}}(),Object.assign(c.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var i=this._listeners,n=i[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(t){var e=this;if(void 0!==this._listeners){var i=this._listeners,n=i[t.type];if(void 0!==n){t.target=this;for(var r=n.slice(0),o=0,s=r.length;o<s;o++)r[o].call(e,t)}}}});var cl="86",fl=0,pl=1,ml=2,vl=0,gl=1,yl=2,bl=0,_l=1,wl=2,xl=1,Sl=2,kl=0,El=1,Ml=2,Tl=0,Cl=1,Ol=2,Pl=3,Al=4,Dl=5,Il=100,Rl=101,Ll=102,Nl=103,Fl=104,zl=200,Bl=201,jl=202,Ul=203,Hl=204,Vl=205,Gl=206,Wl=207,Yl=208,$l=209,ql=210,Xl=0,Zl=1,Kl=2,Ql=3,Jl=4,tu=5,eu=6,iu=7,nu=0,ru=1,ou=2,su=0,au=1,hu=2,lu=3,uu=4,du=301,cu=302,fu=303,pu=304,mu=305,vu=306,gu=307,yu=1e3,bu=1001,_u=1002,wu=1003,xu=1004,Su=1005,ku=1006,Eu=1007,Mu=1008,Tu=1009,Cu=1010,Ou=1011,Pu=1012,Au=1013,Du=1014,Iu=1015,Ru=1016,Lu=1017,Nu=1018,Fu=1019,zu=1020,Bu=1021,ju=1022,Uu=1023,Hu=1024,Vu=1025,Gu=1026,Wu=1027,Yu=2001,$u=2002,qu=2003,Xu=2004,Zu=2100,Ku=2101,Qu=2102,Ju=2103,td=2151,ed=2201,id=2400,nd=0,rd=1,od=2,sd=3e3,ad=3001,hd=3007,ld=3002,ud=3004,dd=3005,cd=3006,fd=3200,pd=3201,md={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),n=0;return function(){for(var r=0;r<36;r++)8===r||13===r||18===r||23===r?i[r]="-":14===r?i[r]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,i[r]=e[19===r?3&t|8:t]);return i.join("")}}(),clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*md.DEG2RAD},radToDeg:function(t){return t*md.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}};Object.defineProperties(f.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(f.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t=new f,e=new f;return function(i,n){return t.set(i,i),e.set(n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*i-o*n+t.x,this.y=r*n+o*i+t.y,this}});var vd=0;p.DEFAULT_IMAGE=void 0,p.DEFAULT_MAPPING=300,Object.defineProperty(p.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(p.prototype,c.prototype,{constructor:p,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){if(void 0!==t.textures[this.uuid])return t.textures[this.uuid];var e={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=md.generateUUID()),void 0===t.images[i.uuid]&&(t.images[i.uuid]={uuid:i.uuid,url:function(t){var e;return void 0!==t.toDataURL?e=t:(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,t.width,t.height)),e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}(i)}),e.image=i.uuid}return t.textures[this.uuid]=e,e},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300===this.mapping){if(t.multiply(this.repeat),t.add(this.offset),t.x<0||t.x>1)switch(this.wrapS){case yu:t.x=t.x-Math.floor(t.x);break;case bu:t.x=t.x<0?0:1;break;case _u:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case yu:t.y=t.y-Math.floor(t.y);break;case bu:t.y=t.y<0?0:1;break;case _u:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}}),Object.assign(m.prototype,{isVector4:!0,set:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*n+o[12]*r,this.y=o[1]*e+o[5]*i+o[9]*n+o[13]*r,this.z=o[2]*e+o[6]*i+o[10]*n+o[14]*r,this.w=o[3]*e+o[7]*i+o[11]*n+o[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,i,n,r,o=t.elements,s=o[0],a=o[4],h=o[8],l=o[1],u=o[5],d=o[9],c=o[2],f=o[6],p=o[10];if(Math.abs(a-l)<.01&&Math.abs(h-c)<.01&&Math.abs(d-f)<.01){if(Math.abs(a+l)<.1&&Math.abs(h+c)<.1&&Math.abs(d+f)<.1&&Math.abs(s+u+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(s+1)/2,v=(u+1)/2,g=(p+1)/2,y=(a+l)/4,b=(h+c)/4,_=(d+f)/4;return m>v&&m>g?m<.01?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(m),n=y/i,r=b/i):v>g?v<.01?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(v),i=y/n,r=_/n):g<.01?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(g),i=b/r,n=_/r),this.set(i,n,r,e),this}var w=Math.sqrt((f-d)*(f-d)+(h-c)*(h-c)+(l-a)*(l-a));return Math.abs(w)<.001&&(w=1),this.x=(f-d)/w,this.y=(h-c)/w,this.z=(l-a)/w,this.w=Math.acos((s+u+p-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new m,e=new m),t.set(i,i,i,i),e.set(n,n,n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),Object.assign(v.prototype,c.prototype,{isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.assign(g,{slerp:function(t,e,i,n){return i.copy(t).slerp(e,n)},slerpFlat:function(t,e,i,n,r,o,s){var a=i[n+0],h=i[n+1],l=i[n+2],u=i[n+3],d=r[o+0],c=r[o+1],f=r[o+2],p=r[o+3];if(u!==p||a!==d||h!==c||l!==f){var m=1-s,v=a*d+h*c+l*f+u*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,v*g);m=Math.sin(m*_)/b,s=Math.sin(s*_)/b}var w=s*g;if(a=a*m+d*w,h=h*m+c*w,l=l*m+f*w,u=u*m+p*w,m===1-s){var x=1/Math.sqrt(a*a+h*h+l*l+u*u);a*=x,h*=x,l*=x,u*=x}}t[e]=a,t[e+1]=h,t[e+2]=l,t[e+3]=u}}),Object.defineProperties(g.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(g.prototype,{set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t._x,n=t._y,r=t._z,o=t.order,s=Math.cos,a=Math.sin,h=s(i/2),l=s(n/2),u=s(r/2),d=a(i/2),c=a(n/2),f=a(r/2);return"XYZ"===o?(this._x=d*l*u+h*c*f,this._y=h*c*u-d*l*f,this._z=h*l*f+d*c*u,this._w=h*l*u-d*c*f):"YXZ"===o?(this._x=d*l*u+h*c*f,this._y=h*c*u-d*l*f,this._z=h*l*f-d*c*u,this._w=h*l*u+d*c*f):"ZXY"===o?(this._x=d*l*u-h*c*f,this._y=h*c*u+d*l*f,this._z=h*l*f+d*c*u,this._w=h*l*u-d*c*f):"ZYX"===o?(this._x=d*l*u-h*c*f,this._y=h*c*u+d*l*f,this._z=h*l*f-d*c*u,this._w=h*l*u+d*c*f):"YZX"===o?(this._x=d*l*u+h*c*f,this._y=h*c*u+d*l*f,this._z=h*l*f-d*c*u,this._w=h*l*u-d*c*f):"XZY"===o&&(this._x=d*l*u-h*c*f,this._y=h*c*u-d*l*f,this._z=h*l*f+d*c*u,this._w=h*l*u+d*c*f),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,i=t.elements,n=i[0],r=i[4],o=i[8],s=i[1],a=i[5],h=i[9],l=i[2],u=i[6],d=i[10],c=n+a+d;return c>0?(e=.5/Math.sqrt(c+1),this._w=.25/e,this._x=(u-h)*e,this._y=(o-l)*e,this._z=(s-r)*e):n>a&&n>d?(e=2*Math.sqrt(1+n-a-d),this._w=(u-h)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(o+l)/e):a>d?(e=2*Math.sqrt(1+a-n-d),this._w=(o-l)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(h+u)/e):(e=2*Math.sqrt(1+d-n-a),this._w=(s-r)/e,this._x=(o+l)/e,this._y=(h+u)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e=new y;return function(i,n){return void 0===e&&(e=new y),t=i.dot(n)+1,t<1e-6?(t=0,Math.abs(i.x)>Math.abs(i.z)?e.set(-i.y,i.x,0):e.set(0,-i.z,i.y)):e.crossVectors(i,n),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t._x,n=t._y,r=t._z,o=t._w,s=e._x,a=e._y,h=e._z,l=e._w;return this._x=i*l+o*s+n*h-r*a,this._y=n*l+o*a+r*s-i*h,this._z=r*l+o*h+i*a-n*s,this._w=o*l-i*s-n*a-r*h,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,r=this._z,o=this._w,s=o*t._w+i*t._x+n*t._y+r*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=i,this._y=n,this._z=r,this;var a=Math.sqrt(1-s*s);if(Math.abs(a)<.001)return this._w=.5*(o+this._w),this._x=.5*(i+this._x),this._y=.5*(n+this._y),this._z=.5*(r+this._z),this;var h=Math.atan2(a,s),l=Math.sin((1-e)*h)/a,u=Math.sin(e*h)/a;return this._w=o*l+this._w*u,this._x=i*l+this._x*u,this._y=n*l+this._y*u,this._z=r*l+this._z*u,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(y.prototype,{isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t=new g;return function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t=new g;return function(e,i){return this.applyQuaternion(t.setFromAxisAngle(e,i))}}(),applyMatrix3:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*n,this.y=r[1]*e+r[4]*i+r[7]*n,this.z=r[2]*e+r[5]*i+r[8]*n,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements,o=1/(r[3]*e+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*n+r[12])*o,this.y=(r[1]*e+r[5]*i+r[9]*n+r[13])*o,this.z=(r[2]*e+r[6]*i+r[10]*n+r[14])*o,this},applyQuaternion:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,o=t.y,s=t.z,a=t.w,h=a*e+o*n-s*i,l=a*i+s*e-r*n,u=a*n+r*i-o*e,d=-r*e-o*i-s*n;return this.x=h*a+d*-r+l*-s-u*-o,this.y=l*a+d*-o+u*-r-h*-s,this.z=u*a+d*-s+h*-o-l*-r,this},project:function(){var t=new b;return function(e){return t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyMatrix4(t)}}(),unproject:function(){var t=new b;return function(e){return t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyMatrix4(t)}}(),transformDirection:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n,this.y=r[1]*e+r[5]*i+r[9]*n,this.z=r[2]*e+r[6]*i+r[10]*n,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t=new y,e=new y;return function(i,n){return t.set(i,i,i),e.set(n,n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var i=this.x,n=this.y,r=this.z;return this.x=n*t.z-r*t.y,this.y=r*t.x-i*t.z,this.z=i*t.y-n*t.x,this},crossVectors:function(t,e){var i=t.x,n=t.y,r=t.z,o=e.x,s=e.y,a=e.z;return this.x=n*a-r*s,this.y=r*o-i*a,this.z=i*s-n*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new y;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new y;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(md.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(b.prototype,{isMatrix4:!0,set:function(t,e,i,n,r,o,s,a,h,l,u,d,c,f,p,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=i,v[12]=n,v[1]=r,v[5]=o,v[9]=s,v[13]=a,v[2]=h,v[6]=l,v[10]=u,v[14]=d,v[3]=c,v[7]=f,v[11]=p,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new b).fromArray(this.elements)},copy:function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this},copyPosition:function(t){var e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:function(){var t=new y;return function(e){var i=this.elements,n=e.elements,r=1/t.setFromMatrixColumn(e,0).length(),o=1/t.setFromMatrixColumn(e,1).length(),s=1/t.setFromMatrixColumn(e,2).length();return i[0]=n[0]*r,i[1]=n[1]*r,i[2]=n[2]*r,i[4]=n[4]*o,i[5]=n[5]*o,i[6]=n[6]*o,i[8]=n[8]*s,i[9]=n[9]*s,i[10]=n[10]*s,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,i=t.x,n=t.y,r=t.z,o=Math.cos(i),s=Math.sin(i),a=Math.cos(n),h=Math.sin(n),l=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){var d=o*l,c=o*u,f=s*l,p=s*u;e[0]=a*l,e[4]=-a*u,e[8]=h,e[1]=c+f*h,e[5]=d-p*h,e[9]=-s*a,e[2]=p-d*h,e[6]=f+c*h,e[10]=o*a}else if("YXZ"===t.order){var m=a*l,v=a*u,g=h*l,y=h*u;e[0]=m+y*s,e[4]=g*s-v,e[8]=o*h,e[1]=o*u,e[5]=o*l,e[9]=-s,e[2]=v*s-g,e[6]=y+m*s,e[10]=o*a}else if("ZXY"===t.order){var m=a*l,v=a*u,g=h*l,y=h*u;e[0]=m-y*s,e[4]=-o*u,e[8]=g+v*s,e[1]=v+g*s,e[5]=o*l,e[9]=y-m*s,e[2]=-o*h,e[6]=s,e[10]=o*a}else if("ZYX"===t.order){var d=o*l,c=o*u,f=s*l,p=s*u;e[0]=a*l,e[4]=f*h-c,e[8]=d*h+p,e[1]=a*u,e[5]=p*h+d,e[9]=c*h-f,e[2]=-h,e[6]=s*a,e[10]=o*a}else if("YZX"===t.order){var b=o*a,_=o*h,w=s*a,x=s*h;e[0]=a*l,e[4]=x-b*u,e[8]=w*u+_,e[1]=u,e[5]=o*l,e[9]=-s*l,e[2]=-h*l,e[6]=_*u+w,e[10]=b-x*u}else if("XZY"===t.order){var b=o*a,_=o*h,w=s*a,x=s*h;e[0]=a*l,e[4]=-u,e[8]=h*l,e[1]=b*u+x,e[5]=o*l,e[9]=_*u-w,e[2]=w*u-_,e[6]=s*l,e[10]=x*u+b}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,i=t._x,n=t._y,r=t._z,o=t._w,s=i+i,a=n+n,h=r+r,l=i*s,u=i*a,d=i*h,c=n*a,f=n*h,p=r*h,m=o*s,v=o*a,g=o*h;return e[0]=1-(c+p),e[4]=u-g,e[8]=d+v,e[1]=u+g,e[5]=1-(l+p),e[9]=f-m,e[2]=d-v,e[6]=f+m,e[10]=1-(l+c),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t=new y,e=new y,i=new y;return function(n,r,o){var s=this.elements;return i.subVectors(n,r),0===i.lengthSq()&&(i.z=1),i.normalize(),t.crossVectors(o,i),0===t.lengthSq()&&(1===Math.abs(o.z)?i.x+=1e-4:i.z+=1e-4,i.normalize(),t.crossVectors(o,i)),t.normalize(),e.crossVectors(i,t),s[0]=t.x,s[4]=e.x,s[8]=i.x,s[1]=t.y,s[5]=e.y,s[9]=i.y,s[2]=t.z,s[6]=e.z,s[10]=i.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements,r=this.elements,o=i[0],s=i[4],a=i[8],h=i[12],l=i[1],u=i[5],d=i[9],c=i[13],f=i[2],p=i[6],m=i[10],v=i[14],g=i[3],y=i[7],b=i[11],_=i[15],w=n[0],x=n[4],S=n[8],k=n[12],E=n[1],M=n[5],T=n[9],C=n[13],O=n[2],P=n[6],A=n[10],D=n[14],I=n[3],R=n[7],L=n[11],N=n[15];return r[0]=o*w+s*E+a*O+h*I,r[4]=o*x+s*M+a*P+h*R,r[8]=o*S+s*T+a*A+h*L,r[12]=o*k+s*C+a*D+h*N,r[1]=l*w+u*E+d*O+c*I,r[5]=l*x+u*M+d*P+c*R,r[9]=l*S+u*T+d*A+c*L,r[13]=l*k+u*C+d*D+c*N,r[2]=f*w+p*E+m*O+v*I,r[6]=f*x+p*M+m*P+v*R,r[10]=f*S+p*T+m*A+v*L,r[14]=f*k+p*C+m*D+v*N,r[3]=g*w+y*E+b*O+_*I,r[7]=g*x+y*M+b*P+_*R,r[11]=g*S+y*T+b*A+_*L,r[15]=g*k+y*C+b*D+_*N,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new y;return function(e){for(var i=this,n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(i),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],o=t[1],s=t[5],a=t[9],h=t[13],l=t[2],u=t[6],d=t[10],c=t[14];return t[3]*(+r*a*u-n*h*u-r*s*d+i*h*d+n*s*c-i*a*c)+t[7]*(+e*a*c-e*h*d+r*o*d-n*o*c+n*h*l-r*a*l)+t[11]*(+e*h*u-e*s*c-r*o*u+i*o*c+r*s*l-i*h*l)+t[15]*(-n*s*l-e*a*u+e*s*d+n*o*u-i*o*d+i*a*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var i=this.elements,n=t.elements,r=n[0],o=n[1],s=n[2],a=n[3],h=n[4],l=n[5],u=n[6],d=n[7],c=n[8],f=n[9],p=n[10],m=n[11],v=n[12],g=n[13],y=n[14],b=n[15],_=f*y*d-g*p*d+g*u*m-l*y*m-f*u*b+l*p*b,w=v*p*d-c*y*d-v*u*m+h*y*m+c*u*b-h*p*b,x=c*g*d-v*f*d+v*l*m-h*g*m-c*l*b+h*f*b,S=v*f*u-c*g*u-v*l*p+h*g*p+c*l*y-h*f*y,k=r*_+o*w+s*x+a*S;if(0===k){var E="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===e)throw new Error(E);return console.warn(E),this.identity()}var M=1/k;return i[0]=_*M,i[1]=(g*p*a-f*y*a-g*s*m+o*y*m+f*s*b-o*p*b)*M,i[2]=(l*y*a-g*u*a+g*s*d-o*y*d-l*s*b+o*u*b)*M,i[3]=(f*u*a-l*p*a-f*s*d+o*p*d+l*s*m-o*u*m)*M,i[4]=w*M,i[5]=(c*y*a-v*p*a+v*s*m-r*y*m-c*s*b+r*p*b)*M,i[6]=(v*u*a-h*y*a-v*s*d+r*y*d+h*s*b-r*u*b)*M,i[7]=(h*p*a-c*u*a+c*s*d-r*p*d-h*s*m+r*u*m)*M,i[8]=x*M,i[9]=(v*f*a-c*g*a-v*o*m+r*g*m+c*o*b-r*f*b)*M,i[10]=(h*g*a-v*l*a+v*o*d-r*g*d-h*o*b+r*l*b)*M,i[11]=(c*l*a-h*f*a-c*o*d+r*f*d+h*o*m-r*l*m)*M,i[12]=S*M,i[13]=(c*g*s-v*f*s+v*o*p-r*g*p-c*o*y+r*f*y)*M,i[14]=(v*l*s-h*g*s-v*o*u+r*g*u+h*o*y-r*l*y)*M,i[15]=(h*f*s-c*l*s+c*o*u-r*f*u-h*o*p+r*l*p)*M,this},scale:function(t){var e=this.elements,i=t.x,n=t.y,r=t.z;return e[0]*=i,e[4]*=n,e[8]*=r,e[1]*=i,e[5]*=n,e[9]*=r,e[2]*=i,e[6]*=n,e[10]*=r,e[3]*=i,e[7]*=n,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=1-i,o=t.x,s=t.y,a=t.z,h=r*o,l=r*s;return this.set(h*o+i,h*s-n*a,h*a+n*s,0,h*s+n*a,l*s+i,l*a-n*o,0,h*a-n*s,l*a+n*o,r*a*a+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){return this.makeRotationFromQuaternion(e),this.scale(i),this.setPosition(t),this},decompose:function(){var t=new y,e=new b;return function(i,n,r){var o=this.elements,s=t.set(o[0],o[1],o[2]).length(),a=t.set(o[4],o[5],o[6]).length(),h=t.set(o[8],o[9],o[10]).length();this.determinant()<0&&(s=-s),i.x=o[12],i.y=o[13],i.z=o[14],e.copy(this);var l=1/s,u=1/a,d=1/h;return e.elements[0]*=l,e.elements[1]*=l,e.elements[2]*=l,e.elements[4]*=u,e.elements[5]*=u,e.elements[6]*=u,e.elements[8]*=d,e.elements[9]*=d,e.elements[10]*=d,n.setFromRotationMatrix(e),r.x=s,r.y=a,r.z=h,this}}(),makePerspective:function(t,e,i,n,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements,a=2*r/(e-t),h=2*r/(i-n),l=(e+t)/(e-t),u=(i+n)/(i-n),d=-(o+r)/(o-r),c=-2*o*r/(o-r);return s[0]=a,s[4]=0,s[8]=l,s[12]=0,s[1]=0,s[5]=h,s[9]=u,s[13]=0,s[2]=0,s[6]=0,s[10]=d,s[14]=c,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(t,e,i,n,r,o){var s=this.elements,a=1/(e-t),h=1/(i-n),l=1/(o-r),u=(e+t)*a,d=(i+n)*h,c=(o+r)*l;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-u,s[1]=0,s[5]=2*h,s[9]=0,s[13]=-d,s[2]=0,s[6]=0,s[10]=-2*l,s[14]=-c,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(t){for(var e=this.elements,i=t.elements,n=0;n<16;n++)if(e[n]!==i[n])return!1;return!0},fromArray:function(t,e){var i=this;void 0===e&&(e=0);for(var n=0;n<16;n++)i.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}),_.prototype=Object.create(p.prototype),_.prototype.constructor=_,_.prototype.isDataTexture=!0,w.prototype=Object.create(p.prototype),w.prototype.constructor=w,w.prototype.isCubeTexture=!0,Object.defineProperty(w.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var gd=new p,yd=new w,bd=[],_d=[],wd=new Float32Array(16),xd=new Float32Array(9);Q.prototype.setValue=function(t,e){for(var i=this.seq,n=0,r=i.length;n!==r;++n){var o=i[n];o.setValue(t,e[o.id])}};var Sd=/([\w\d_]+)(\])?(\[|\.)?/g;et.prototype.setValue=function(t,e,i){var n=this.map[e];void 0!==n&&n.setValue(t,i,this.renderer)},et.prototype.setOptional=function(t,e,i){var n=e[i];void 0!==n&&this.setValue(t,i,n)},et.upload=function(t,e,i,n){for(var r=0,o=e.length;r!==o;++r){var s=e[r],a=i[s.id];!1!==a.needsUpdate&&s.setValue(t,a.value,n)}},et.seqWithValue=function(t,e){for(var i=[],n=0,r=t.length;n!==r;++n){var o=t[n];o.id in e&&i.push(o)}return i};var kd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(it.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(){function t(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}return function(e,i,n){if(e=md.euclideanModulo(e,1),i=md.clamp(i,0,1),n=md.clamp(n,0,1),0===i)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+i):n+i-n*i,o=2*n-r;this.r=t(o,r,e+1/3),this.g=t(o,r,e),this.b=t(o,r,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n,r=i[1],o=i[2];switch(r){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var s=parseFloat(n[1])/360,a=parseInt(n[2],10)/100,h=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(s,a,h)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l=i[1],u=l.length;if(3===u)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}if(t&&t.length>0){var l=kd[t];void 0!==l?this.setHex(l):console.warn("THREE.Color: Unknown color "+t)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},convertGammaToLinear:function(){var t=this.r,e=this.g,i=this.b;return this.r=t*t,this.g=e*e,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,i,n=t||{h:0,s:0,l:0},r=this.r,o=this.g,s=this.b,a=Math.max(r,o,s),h=Math.min(r,o,s),l=(h+a)/2;if(h===a)e=0,i=0;else{var u=a-h;switch(i=l<=.5?u/(a+h):u/(2-a-h),a){case r:e=(o-s)/u+(o<s?6:0);break;case o:e=(s-r)/u+2;break;case s:e=(r-o)/u+4}e/=6}return n.h=e,n.s=i,n.l=l,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){var n=this.getHSL();return n.h+=t,n.s+=e,n.l+=i,this.setHSL(n.h,n.s,n.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var Ed={common:{diffuse:{value:new it(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new m(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new f(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new it(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new it(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new m(0,0,1,1)}}},Md={merge:function(t){for(var e=this,i={},n=0;n<t.length;n++){var r=e.clone(t[n]);for(var o in r)i[o]=r[o]}return i},clone:function(t){var e={};for(var i in t){e[i]={};for(var n in t[i]){var r=t[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[i][n]=r.clone():Array.isArray(r)?e[i][n]=r.slice():e[i][n]=r}}return e}},Td={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b = 3.45068 + (4.18814 + y) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transpose( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = asin( flipNormal * reflectVec.y ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"},Cd={basic:{uniforms:Md.merge([Ed.common,Ed.aomap,Ed.lightmap,Ed.fog]),vertexShader:Td.meshbasic_vert,fragmentShader:Td.meshbasic_frag},lambert:{uniforms:Md.merge([Ed.common,Ed.aomap,Ed.lightmap,Ed.emissivemap,Ed.fog,Ed.lights,{emissive:{value:new it(0)}}]),vertexShader:Td.meshlambert_vert,fragmentShader:Td.meshlambert_frag},phong:{uniforms:Md.merge([Ed.common,Ed.aomap,Ed.lightmap,Ed.emissivemap,Ed.bumpmap,Ed.normalmap,Ed.displacementmap,Ed.gradientmap,Ed.fog,Ed.lights,{emissive:{value:new it(0)},specular:{value:new it(1118481)},shininess:{value:30}}]),vertexShader:Td.meshphong_vert,fragmentShader:Td.meshphong_frag},standard:{uniforms:Md.merge([Ed.common,Ed.aomap,Ed.lightmap,Ed.emissivemap,Ed.bumpmap,Ed.normalmap,Ed.displacementmap,Ed.roughnessmap,Ed.metalnessmap,Ed.fog,Ed.lights,{emissive:{value:new it(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Td.meshphysical_vert,fragmentShader:Td.meshphysical_frag},points:{uniforms:Md.merge([Ed.points,Ed.fog]),vertexShader:Td.points_vert,fragmentShader:Td.points_frag},dashed:{uniforms:Md.merge([Ed.common,Ed.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Td.linedashed_vert,fragmentShader:Td.linedashed_frag},depth:{uniforms:Md.merge([Ed.common,Ed.displacementmap]),vertexShader:Td.depth_vert,fragmentShader:Td.depth_frag},normal:{uniforms:Md.merge([Ed.common,Ed.bumpmap,Ed.normalmap,Ed.displacementmap,{opacity:{value:1}}]),vertexShader:Td.normal_vert,fragmentShader:Td.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Td.cube_vert,fragmentShader:Td.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:Td.equirect_vert,fragmentShader:Td.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new y}},vertexShader:Td.distanceRGBA_vert,fragmentShader:Td.distanceRGBA_frag}};Cd.physical={uniforms:Md.merge([Cd.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Td.meshphysical_vert,fragmentShader:Td.meshphysical_frag},Object.assign(nt.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){var e=this;this.makeEmpty();for(var i=0,n=t.length;i<n;i++)e.expandByPoint(t[i]);return this},setFromCenterAndSize:function(){var t=new f;return function(e,i){var n=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){var e=t||new f;return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new f;return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return(e||new f).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return(e||new f).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new f;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var Od=0;Object.assign(st.prototype,c.prototype,{isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){var e=this;if(void 0!==t)for(var i in t){var n=t[i];if(void 0!==n){var r=e[i];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):e[i]="overdraw"===i?Number(n):n:console.warn("THREE."+e.type+": '"+i+"' is not a property of this material.")}else console.warn("THREE.Material: '"+i+"' parameter is undefined.")}},toJSON:function(t){function e(t){var e=[];for(var i in t){var n=t[i];delete n.metadata,e.push(n)}return e}var i=void 0===t;i&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Cl&&(n.blending=this.blending),this.shading!==Sl&&(n.shading=this.shading),this.side!==bl&&(n.side=this.side),this.vertexColors!==kl&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),n.skinning=this.skinning,n.morphTargets=this.morphTargets,n.dithering=this.dithering,i){var r=e(t.textures),o=e(t.images);r.length>0&&(n.textures=r),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.shading=t.shading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,i=null;if(null!==e){var n=e.length;i=new Array(n);for(var r=0;r!==n;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),at.prototype=Object.create(st.prototype),at.prototype.constructor=at,at.prototype.isShaderMaterial=!0,at.prototype.copy=function(t){return st.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Md.clone(t.uniforms),this.defines=t.defines,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},at.prototype.toJSON=function(t){var e=st.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},ht.prototype=Object.create(st.prototype),ht.prototype.constructor=ht,ht.prototype.isMeshDepthMaterial=!0,ht.prototype.copy=function(t){return st.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Object.assign(lt.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,o=-1/0,s=-1/0,a=0,h=t.length;a<h;a+=3){var l=t[a],u=t[a+1],d=t[a+2];l<e&&(e=l),u<i&&(i=u),d<n&&(n=d),l>r&&(r=l),u>o&&(o=u),d>s&&(s=d)}return this.min.set(e,i,n),this.max.set(r,o,s),this},setFromBufferAttribute:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,o=-1/0,s=-1/0,a=0,h=t.count;a<h;a++){var l=t.getX(a),u=t.getY(a),d=t.getZ(a);l<e&&(e=l),u<i&&(i=u),d<n&&(n=d),l>r&&(r=l),u>o&&(o=u),d>s&&(s=d)}return this.min.set(e,i,n),this.max.set(r,o,s),this},setFromPoints:function(t){var e=this;this.makeEmpty();for(var i=0,n=t.length;i<n;i++)e.expandByPoint(t[i]);return this},setFromCenterAndSize:function(){var t=new y;return function(e,i){var n=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){var e=t||new y;return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new y;return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t=new y;return function(e){var i=this;return e.updateMatrixWorld(!0),e.traverse(function(e){var n,r,o=e.geometry;if(void 0!==o)if(o.isGeometry){var s=o.vertices;for(n=0,r=s.length;n<r;n++)t.copy(s[n]),t.applyMatrix4(e.matrixWorld),i.expandByPoint(t)}else if(o.isBufferGeometry){var a=o.attributes.position;if(void 0!==a)for(n=0,r=a.count;n<r;n++)t.fromBufferAttribute(a,n).applyMatrix4(e.matrixWorld),i.expandByPoint(t)}}),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return(e||new y).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t=new y;return function(e){return this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=t.constant&&i>=t.constant},clampPoint:function(t,e){return(e||new y).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new y;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new y;return function(e){var i=e||new ut;return this.getCenter(i.center),i.radius=.5*this.getSize(t).length(),i}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new y,new y,new y,new y,new y,new y,new y,new y];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(ut.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new lt;return function(e,i){var n=this.center;void 0!==i?n.copy(i):t.setFromPoints(e).getCenter(n);for(var r=0,o=0,s=e.length;o<s;o++)r=Math.max(r,n.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(this.center.dot(t.normal)-t.constant)<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t),n=e||new y;return n.copy(t),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(t){var e=t||new lt;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(dt.prototype,{isMatrix3:!0,set:function(t,e,i,n,r,o,s,a,h){var l=this.elements;return l[0]=t,l[1]=n,l[2]=s,l[3]=e,l[4]=r,l[5]=a,l[6]=i,l[7]=o,l[8]=h,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t=new y;return function(e){for(var i=this,n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix3(i),e.setXYZ(n,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements,r=this.elements,o=i[0],s=i[3],a=i[6],h=i[1],l=i[4],u=i[7],d=i[2],c=i[5],f=i[8],p=n[0],m=n[3],v=n[6],g=n[1],y=n[4],b=n[7],_=n[2],w=n[5],x=n[8];return r[0]=o*p+s*g+a*_,r[3]=o*m+s*y+a*w,r[6]=o*v+s*b+a*x,r[1]=h*p+l*g+u*_,r[4]=h*m+l*y+u*w,r[7]=h*v+l*b+u*x,r[2]=d*p+c*g+f*_,r[5]=d*m+c*y+f*w,r[8]=d*v+c*b+f*x,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],s=t[5],a=t[6],h=t[7],l=t[8];return e*o*l-e*s*h-i*r*l+i*s*a+n*r*h-n*o*a},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var i=t.elements,n=this.elements,r=i[0],o=i[1],s=i[2],a=i[3],h=i[4],l=i[5],u=i[6],d=i[7],c=i[8],f=c*h-l*d,p=l*u-c*a,m=d*a-h*u,v=r*f+o*p+s*m;if(0===v){var g="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===e)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return n[0]=f*y,n[1]=(s*d-c*o)*y,n[2]=(l*o-s*h)*y,n[3]=p*y,n[4]=(c*r-s*u)*y,n[5]=(s*a-l*r)*y,n[6]=m*y,n[7]=(o*u-d*r)*y,n[8]=(h*r-o*a)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},equals:function(t){for(var e=this.elements,i=t.elements,n=0;n<9;n++)if(e[n]!==i[n])return!1;return!0},fromArray:function(t,e){var i=this;void 0===e&&(e=0);for(var n=0;n<9;n++)i.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}}),Object.assign(ct.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new y,e=new y;return function(i,n,r){var o=t.subVectors(r,n).cross(e.subVectors(i,n)).normalize();return this.setFromNormalAndCoplanarPoint(o,i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var i=this.distanceToPoint(t);return(e||new y).copy(this.normal).multiplyScalar(i)},intersectLine:function(){var t=new y;return function(e,i){var n=i||new y,r=e.delta(t),o=this.normal.dot(r);if(0!==o){var s=-(e.start.dot(this.normal)+this.constant)/o;if(!(s<0||s>1))return n.copy(r).multiplyScalar(s).add(e.start)}else if(0===this.distanceToPoint(e.start))return n.copy(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return(t||new y).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new y,e=new dt;return function(i,n){var r=this.coplanarPoint(t).applyMatrix4(i),o=n||e.getNormalMatrix(i),s=this.normal.applyMatrix3(o).normalize();return this.constant=-r.dot(s),this}}(),translate:function(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(ft.prototype,{set:function(t,e,i,n,r,o){var s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(i),s[3].copy(n),s[4].copy(r),s[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,i=0;i<6;i++)e[i].copy(t.planes[i]);return this},setFromMatrix:function(t){var e=this.planes,i=t.elements,n=i[0],r=i[1],o=i[2],s=i[3],a=i[4],h=i[5],l=i[6],u=i[7],d=i[8],c=i[9],f=i[10],p=i[11],m=i[12],v=i[13],g=i[14],y=i[15];return e[0].setComponents(s-n,u-a,p-d,y-m).normalize(),e[1].setComponents(s+n,u+a,p+d,y+m).normalize(),e[2].setComponents(s+r,u+h,p+c,y+v).normalize(),e[3].setComponents(s-r,u-h,p-c,y-v).normalize(),e[4].setComponents(s-o,u-l,p-f,y-g).normalize(),e[5].setComponents(s+o,u+l,p+f,y+g).normalize(),this},intersectsObject:function(){var t=new ut;return function(e){var i=e.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),t.copy(i.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new ut;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,i=t.center,n=-t.radius,r=0;r<6;r++){if(e[r].distanceToPoint(i)<n)return!1}return!0},intersectsBox:function(){var t=new y,e=new y;return function(i){for(var n=this.planes,r=0;r<6;r++){var o=n[r];t.x=o.normal.x>0?i.min.x:i.max.x,e.x=o.normal.x>0?i.max.x:i.min.x,t.y=o.normal.y>0?i.min.y:i.max.y,e.y=o.normal.y>0?i.max.y:i.min.y,t.z=o.normal.z>0?i.min.z:i.max.z,e.z=o.normal.z>0?i.max.z:i.min.z;var s=o.distanceToPoint(t),a=o.distanceToPoint(e);if(s<0&&a<0)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}}),vt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],vt.DefaultOrder="XYZ",Object.defineProperties(vt.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(vt.prototype,{isEuler:!0,set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var n=md.clamp,r=t.elements,o=r[0],s=r[4],a=r[8],h=r[1],l=r[5],u=r[9],d=r[2],c=r[6],f=r[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(n(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(c,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-n(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(a,f),this._z=Math.atan2(h,l)):(this._y=Math.atan2(-d,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(n(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(h,o))):"ZYX"===e?(this._y=Math.asin(-n(d,-1,1)),Math.abs(d)<.99999?(this._x=Math.atan2(c,f),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-s,l))):"YZX"===e?(this._z=Math.asin(n(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(a,f))):"XZY"===e?(this._z=Math.asin(-n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(c,l),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-u,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new b;return function(e,i,n){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,i,n)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new g;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new y(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(gt.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!==(this.mask&t.mask)}});var Pd=0;yt.DefaultUp=new y(0,1,0),yt.DefaultMatrixAutoUpdate=!0,Object.assign(yt.prototype,c.prototype,{isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new g;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new y(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new y(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new y(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new y;return function(e,i){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(i)),this}}(),translateX:function(){var t=new y(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new y(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new y(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new b;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new b;return function(e){this.isCamera?t.lookAt(this.position,e,this.up):t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){var e=arguments,i=this;if(arguments.length>1){for(var n=0;n<arguments.length;n++)i.add(e[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){var e=arguments,i=this;if(arguments.length>1){for(var n=0;n<arguments.length;n++)i.remove(e[n]);return this}var r=this.children.indexOf(t);return-1!==r&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(r,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){var i=this;if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var o=i.children[n],s=o.getObjectByProperty(t,e);if(void 0!==s)return s}},getWorldPosition:function(t){var e=t||new y;return this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new y,e=new y;return function(i){var n=i||new g;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldRotation:function(){var t=new g;return function(e){var i=e||new vt;return this.getWorldQuaternion(t),i.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new y,e=new g;return function(i){var n=i||new y;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(){var t=new g;return function(e){var i=e||new y;return this.getWorldQuaternion(t),i.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].updateMatrixWorld(t)},toJSON:function(t){function e(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}function i(t){var e=[];for(var i in t){var n=t[i];delete n.metadata,e.push(n)}return e}var n=this,r=void 0===t||""===t,o={};r&&(t={geometries:{},materials:{},textures:{},images:{}},o.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var s={};if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),s.matrix=this.matrix.toArray(),void 0!==this.geometry&&(s.geometry=e(t.geometries,this.geometry)),void 0!==this.material)if(Array.isArray(this.material)){for(var a=[],h=0,l=this.material.length;h<l;h++)a.push(e(t.materials,n.material[h]));s.material=a}else s.material=e(t.materials,this.material);if(this.children.length>0){s.children=[];for(var h=0;h<this.children.length;h++)s.children.push(n.children[h].toJSON(t).object)}if(r){var u=i(t.geometries),d=i(t.materials),c=i(t.textures),f=i(t.images);u.length>0&&(o.geometries=u),d.length>0&&(o.materials=d),c.length>0&&(o.textures=c),f.length>0&&(o.images=f)}return o.object=s,o},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){var i=this;if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var r=t.children[n];i.add(r.clone())}return this}}),bt.prototype=Object.assign(Object.create(yt.prototype),{constructor:bt,isCamera:!0,copy:function(t,e){return yt.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},getWorldDirection:function(){var t=new g;return function(e){var i=e||new y;return this.getWorldQuaternion(t),i.set(0,0,-1).applyQuaternion(t)}}(),updateMatrixWorld:function(t){yt.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),_t.prototype=Object.assign(Object.create(bt.prototype),{constructor:_t,isOrthographicCamera:!0,copy:function(t,e){return bt.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,i,n,r,o){this.view={fullWidth:t,fullHeight:e,offsetX:i,offsetY:n,width:r,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-t,o=i+t,s=n+e,a=n-e;if(null!==this.view){var h=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height;r+=u*(this.view.offsetX/h),o=r+u*(this.view.width/h),s-=d*(this.view.offsetY/l),a=s-d*(this.view.height/l)}this.projectionMatrix.makeOrthographic(r,o,s,a,this.near,this.far)},toJSON:function(t){var e=yt.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),wt.prototype=Object.assign(Object.create(bt.prototype),{constructor:wt,isPerspectiveCamera:!0,copy:function(t,e){return bt.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*md.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*md.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*md.RAD2DEG*Math.atan(Math.tan(.5*md.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,n,r,o){this.aspect=t/e,this.view={fullWidth:t,fullHeight:e,offsetX:i,offsetY:n,width:r,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*md.DEG2RAD*this.fov)/this.zoom,i=2*e,n=this.aspect*i,r=-.5*n,o=this.view;if(null!==o){var s=o.fullWidth,a=o.fullHeight;r+=o.offsetX*n/s,e-=o.offsetY*i/a,n*=o.width/s,i*=o.height/a}var h=this.filmOffset;0!==h&&(r+=t*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,e,e-i,t,this.far)},toJSON:function(t){var e=yt.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),Object.assign(xt.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){var e=this;this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var i=0,n=t.vertexNormals.length;i<n;i++)e.vertexNormals[i]=t.vertexNormals[i].clone();for(var i=0,n=t.vertexColors.length;i<n;i++)e.vertexColors[i]=t.vertexColors[i].clone();return this}});var Ad=0;Object.assign(kt.prototype,c.prototype,{isGeometry:!0,applyMatrix:function(t){for(var e=this,i=(new dt).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++){e.vertices[n].applyMatrix4(t)}for(var n=0,r=this.faces.length;n<r;n++){var o=e.faces[n];o.normal.applyMatrix3(i).normalize();for(var s=0,a=o.vertexNormals.length;s<a;s++)o.vertexNormals[s].applyMatrix3(i).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new b;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new b;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new b;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new b;return function(e,i,n){return t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t=new b;return function(e,i,n){return t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:function(){var t=new yt;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,n,r){var o=void 0!==s?[u[t].clone(),u[e].clone(),u[n].clone()]:[],f=void 0!==a?[i.colors[t].clone(),i.colors[e].clone(),i.colors[n].clone()]:[],p=new xt(t,e,n,o,f,r);i.faces.push(p),void 0!==h&&i.faceVertexUvs[0].push([d[t].clone(),d[e].clone(),d[n].clone()]),void 0!==l&&i.faceVertexUvs[1].push([c[t].clone(),c[e].clone(),c[n].clone()])}var i=this,n=null!==t.index?t.index.array:void 0,r=t.attributes,o=r.position.array,s=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,h=void 0!==r.uv?r.uv.array:void 0,l=void 0!==r.uv2?r.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var u=[],d=[],c=[],p=0,m=0;p<o.length;p+=3,m+=2)i.vertices.push(new y(o[p],o[p+1],o[p+2])),void 0!==s&&u.push(new y(s[p],s[p+1],s[p+2])),void 0!==a&&i.colors.push(new it(a[p],a[p+1],a[p+2])),void 0!==h&&d.push(new f(h[m],h[m+1])),void 0!==l&&c.push(new f(l[m],l[m+1]));var v=t.groups;if(v.length>0)for(var p=0;p<v.length;p++)for(var g=v[p],b=g.start,_=g.count,m=b,w=b+_;m<w;m+=3)void 0!==n?e(n[m],n[m+1],n[m+2],g.materialIndex):e(m,m+1,m+2,g.materialIndex);else if(void 0!==n)for(var p=0;p<n.length;p+=3)e(n[p],n[p+1],n[p+2]);else for(var p=0;p<o.length/3;p+=3)e(p,p+1,p+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,i=0===e?1:1/e,n=new b;return n.set(i,0,0,-i*t.x,0,i,0,-i*t.y,0,0,i,-i*t.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var t=this,e=new y,i=new y,n=0,r=this.faces.length;n<r;n++){var o=t.faces[n],s=t.vertices[o.a],a=t.vertices[o.b],h=t.vertices[o.c];e.subVectors(h,a),i.subVectors(s,a),e.cross(i),e.normalize(),o.normal.copy(e)}},computeVertexNormals:function(t){var e=this;void 0===t&&(t=!0);var i,n,r,o,s,a;for(a=new Array(this.vertices.length),i=0,n=this.vertices.length;i<n;i++)a[i]=new y;if(t){var h,l,u,d=new y,c=new y;for(r=0,o=this.faces.length;r<o;r++)s=e.faces[r],h=e.vertices[s.a],l=e.vertices[s.b],u=e.vertices[s.c],d.subVectors(u,l),c.subVectors(h,l),d.cross(c),a[s.a].add(d),a[s.b].add(d),a[s.c].add(d)}else for(this.computeFaceNormals(),r=0,o=this.faces.length;r<o;r++)s=e.faces[r],a[s.a].add(s.normal),a[s.b].add(s.normal),a[s.c].add(s.normal);for(i=0,n=this.vertices.length;i<n;i++)a[i].normalize();for(r=0,o=this.faces.length;r<o;r++){s=e.faces[r];var f=s.vertexNormals;3===f.length?(f[0].copy(a[s.a]),f[1].copy(a[s.b]),f[2].copy(a[s.c])):(f[0]=a[s.a].clone(),f[1]=a[s.b].clone(),f[2]=a[s.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,i,n=this;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){i=n.faces[t];var r=i.vertexNormals;3===r.length?(r[0].copy(i.normal),r[1].copy(i.normal),r[2].copy(i.normal)):(r[0]=i.normal.clone(),r[1]=i.normal.clone(),r[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,i,n,r,o=this;for(i=0,n=this.faces.length;i<n;i++)for(r=o.faces[i],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var s=new kt;for(s.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!o.morphNormals[t]){o.morphNormals[t]={},o.morphNormals[t].faceNormals=[],o.morphNormals[t].vertexNormals=[];var a,h,l=o.morphNormals[t].faceNormals,u=o.morphNormals[t].vertexNormals;for(i=0,n=this.faces.length;i<n;i++)a=new y,h={a:new y,b:new y,c:new y},l.push(a),u.push(h)}var d=o.morphNormals[t];s.vertices=o.morphTargets[t].vertices,s.computeFaceNormals(),s.computeVertexNormals();var a,h;for(i=0,n=this.faces.length;i<n;i++)r=o.faces[i],a=d.faceNormals[i],h=d.vertexNormals[i],a.copy(r.normal),h.a.copy(r.vertexNormals[0]),h.b.copy(r.vertexNormals[1]),h.c.copy(r.vertexNormals[2])}for(i=0,n=this.faces.length;i<n;i++)r=o.faces[i],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeLineDistances:function(){for(var t=this,e=0,i=this.vertices,n=0,r=i.length;n<r;n++)n>0&&(e+=i[n].distanceTo(i[n-1])),t.lineDistances[n]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new lt),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new ut),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(!t||!t.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);var n,r=this.vertices.length,o=this.vertices,s=t.vertices,a=this.faces,h=t.faces,l=this.faceVertexUvs[0],u=t.faceVertexUvs[0],d=this.colors,c=t.colors;void 0===i&&(i=0),void 0!==e&&(n=(new dt).getNormalMatrix(e));for(var f=0,p=s.length;f<p;f++){var m=s[f],v=m.clone();void 0!==e&&v.applyMatrix4(e),o.push(v)}for(var f=0,p=c.length;f<p;f++)d.push(c[f].clone());for(f=0,p=h.length;f<p;f++){var g,y,b,_=h[f],w=_.vertexNormals,x=_.vertexColors;g=new xt(_.a+r,_.b+r,_.c+r),g.normal.copy(_.normal),void 0!==n&&g.normal.applyMatrix3(n).normalize();for(var S=0,k=w.length;S<k;S++)y=w[S].clone(),void 0!==n&&y.applyMatrix3(n).normalize(),g.vertexNormals.push(y);g.color.copy(_.color);for(var S=0,k=x.length;S<k;S++)b=x[S],g.vertexColors.push(b.clone());g.materialIndex=_.materialIndex+i,a.push(g)}for(f=0,p=u.length;f<p;f++){var E=u[f],M=[];if(void 0!==E){for(var S=0,k=E.length;S<k;S++)M.push(E[S].clone());l.push(M)}}},mergeMesh:function(t){if(!t||!t.isMesh)return void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t);t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)},mergeVertices:function(){var t,e,i,n,r,o,s,a,h=this,l={},u=[],d=[],c=Math.pow(10,4);for(i=0,n=this.vertices.length;i<n;i++)t=h.vertices[i],e=Math.round(t.x*c)+"_"+Math.round(t.y*c)+"_"+Math.round(t.z*c),void 0===l[e]?(l[e]=i,u.push(h.vertices[i]),d[i]=u.length-1):d[i]=d[l[e]];var f=[];for(i=0,n=this.faces.length;i<n;i++){r=h.faces[i],r.a=d[r.a],r.b=d[r.b],r.c=d[r.c],o=[r.a,r.b,r.c];for(var p=0;p<3;p++)if(o[p]===o[(p+1)%3]){f.push(i);break}}for(i=f.length-1;i>=0;i--){var m=f[i];for(h.faces.splice(m,1),s=0,a=this.faceVertexUvs.length;s<a;s++)h.faceVertexUvs[s].splice(m,1)}var v=this.vertices.length-u.length;return this.vertices=u,v},sortFacesByMaterialIndex:function(){function t(t,e){return t.materialIndex-e.materialIndex}for(var e=this.faces,i=e.length,n=0;n<i;n++)e[n]._id=n;e.sort(t);var r,o,s=this.faceVertexUvs[0],a=this.faceVertexUvs[1];s&&s.length===i&&(r=[]),a&&a.length===i&&(o=[]);for(var n=0;n<i;n++){var h=e[n]._id;r&&r.push(s[h]),o&&o.push(a[h])}r&&(this.faceVertexUvs[0]=r),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function t(t,e,i){return i?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==f[e]?f[e]:(f[e]=c.length/3,c.push(t.x,t.y,t.z),f[e])}function i(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==m[e]?m[e]:(m[e]=p.length,p.push(t.getHex()),m[e])}function n(t){var e=t.x.toString()+t.y.toString();return void 0!==g[e]?g[e]:(g[e]=v.length/2,v.push(t.x,t.y),g[e])}var r=this,o={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),void 0!==this.parameters){var s=this.parameters;for(var a in s)void 0!==s[a]&&(o[a]=s[a]);return o}for(var h=[],l=0;l<this.vertices.length;l++){var u=r.vertices[l];h.push(u.x,u.y,u.z)}for(var d=[],c=[],f={},p=[],m={},v=[],g={},l=0;l<this.faces.length;l++){var y=r.faces[l],b=void 0!==r.faceVertexUvs[0][l],_=y.normal.length()>0,w=y.vertexNormals.length>0,x=1!==y.color.r||1!==y.color.g||1!==y.color.b,S=y.vertexColors.length>0,k=0;if(k=t(k,0,0),k=t(k,1,!0),k=t(k,2,!1),k=t(k,3,b),k=t(k,4,_),k=t(k,5,w),k=t(k,6,x),k=t(k,7,S),d.push(k),d.push(y.a,y.b,y.c),d.push(y.materialIndex),b){var E=r.faceVertexUvs[0][l];d.push(n(E[0]),n(E[1]),n(E[2]))}if(_&&d.push(e(y.normal)),w){var M=y.vertexNormals;d.push(e(M[0]),e(M[1]),e(M[2]))}if(x&&d.push(i(y.color)),S){var T=y.vertexColors;d.push(i(T[0]),i(T[1]),i(T[2]))}}return o.data={},o.data.vertices=h,o.data.normals=c,p.length>0&&(o.data.colors=p),v.length>0&&(o.data.uvs=[v]),o.data.faces=d,o},clone:function(){return(new kt).copy(this)},copy:function(t){var e,i,n,r,o,s,a=this;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var h=t.vertices;for(e=0,i=h.length;e<i;e++)a.vertices.push(h[e].clone());var l=t.colors;for(e=0,i=l.length;e<i;e++)a.colors.push(l[e].clone());var u=t.faces;for(e=0,i=u.length;e<i;e++)a.faces.push(u[e].clone());for(e=0,i=t.faceVertexUvs.length;e<i;e++){var d=t.faceVertexUvs[e];for(void 0===a.faceVertexUvs[e]&&(a.faceVertexUvs[e]=[]),n=0,r=d.length;n<r;n++){var c=d[n],f=[];for(o=0,s=c.length;o<s;o++){var p=c[o];f.push(p.clone())}a.faceVertexUvs[e].push(f)}}var m=t.morphTargets;for(e=0,i=m.length;e<i;e++){var v={};if(v.name=m[e].name,void 0!==m[e].vertices)for(v.vertices=[],n=0,r=m[e].vertices.length;n<r;n++)v.vertices.push(m[e].vertices[n].clone());if(void 0!==m[e].normals)for(v.normals=[],n=0,r=m[e].normals.length;n<r;n++)v.normals.push(m[e].normals[n].clone());a.morphTargets.push(v)}var g=t.morphNormals;for(e=0,i=g.length;e<i;e++){var y={};if(void 0!==g[e].vertexNormals)for(y.vertexNormals=[],n=0,r=g[e].vertexNormals.length;n<r;n++){var b=g[e].vertexNormals[n],_={};_.a=b.a.clone(),_.b=b.b.clone(),_.c=b.c.clone(),y.vertexNormals.push(_)}if(void 0!==g[e].faceNormals)for(y.faceNormals=[],n=0,r=g[e].faceNormals.length;n<r;n++)y.faceNormals.push(g[e].faceNormals[n].clone());a.morphNormals.push(y)}var w=t.skinWeights;for(e=0,i=w.length;e<i;e++)a.skinWeights.push(w[e].clone());var x=t.skinIndices;for(e=0,i=x.length;e<i;e++)a.skinIndices.push(x[e].clone());var S=t.lineDistances;for(e=0,i=S.length;e<i;e++)a.lineDistances.push(S[e]);var k=t.boundingBox;null!==k&&(this.boundingBox=k.clone());var E=t.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Et.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Et.prototype,{isBufferAttribute:!0,setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.itemSize:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){var n=this;t*=this.itemSize,i*=e.itemSize;for(var r=0,o=this.itemSize;r<o;r++)n.array[t+r]=e.array[i+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),o=new it),e[i++]=o.r,e[i++]=o.g,e[i++]=o.b}return this},copyIndicesArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];e[i++]=o.a,e[i++]=o.b,e[i++]=o.c}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),o=new f),e[i++]=o.x,e[i++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new y),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new m),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z,e[i++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),Mt.prototype=Object.create(Et.prototype),Mt.prototype.constructor=Mt,Tt.prototype=Object.create(Et.prototype),Tt.prototype.constructor=Tt,Ct.prototype=Object.create(Et.prototype),Ct.prototype.constructor=Ct,Object.assign(Ot.prototype,{computeGroups:function(t){for(var e,i=[],n=void 0,r=t.faces,o=0;o<r.length;o++){var s=r[o];s.materialIndex!==n&&(n=s.materialIndex,void 0!==e&&(e.count=3*o-e.start,i.push(e)),e={start:3*o,materialIndex:n})}void 0!==e&&(e.count=3*o-e.start,i.push(e)),this.groups=i},fromGeometry:function(t){var e,i=this,n=t.faces,r=t.vertices,o=t.faceVertexUvs,s=o[0]&&o[0].length>0,a=o[1]&&o[1].length>0,h=t.morphTargets,l=h.length;if(l>0){e=[];for(var u=0;u<l;u++)e[u]=[];this.morphTargets.position=e}var d,c=t.morphNormals,p=c.length;if(p>0){d=[];for(var u=0;u<p;u++)d[u]=[];this.morphTargets.normal=d}for(var m=t.skinIndices,v=t.skinWeights,g=m.length===r.length,y=v.length===r.length,u=0;u<n.length;u++){var b=n[u];i.vertices.push(r[b.a],r[b.b],r[b.c]);var _=b.vertexNormals;if(3===_.length)i.normals.push(_[0],_[1],_[2]);else{var w=b.normal;i.normals.push(w,w,w)}var x=b.vertexColors;if(3===x.length)i.colors.push(x[0],x[1],x[2]);else{var S=b.color;i.colors.push(S,S,S)}if(!0===s){var k=o[0][u];void 0!==k?i.uvs.push(k[0],k[1],k[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),i.uvs.push(new f,new f,new f))}if(!0===a){var k=o[1][u];void 0!==k?i.uvs2.push(k[0],k[1],k[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),i.uvs2.push(new f,new f,new f))}for(var E=0;E<l;E++){var M=h[E].vertices;e[E].push(M[b.a],M[b.b],M[b.c])}for(var E=0;E<p;E++){var T=c[E].vertexNormals[u];d[E].push(T.a,T.b,T.c)}g&&i.skinIndices.push(m[b.a],m[b.b],m[b.c]),y&&i.skinWeights.push(v[b.a],v[b.b],v[b.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}}),At.MaxIndex=65535,Object.assign(At.prototype,c.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(Pt(t)>65535?Tt:Mt)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(e)):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(t,new Et(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var i=this.attributes.normal;if(void 0!==i){(new dt).getNormalMatrix(t).applyToBufferAttribute(i),i.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new b;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new b;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new b;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new b;return function(e,i,n){return t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t=new b;return function(e,i,n){return t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:function(){var t=new yt;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var i=new Ct(3*e.vertices.length,3),n=new Ct(3*e.colors.length,3);if(this.addAttribute("position",i.copyVector3sArray(e.vertices)),this.addAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new Ct(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var i=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(i=void 0,e.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(e);i.verticesNeedUpdate=e.verticesNeedUpdate,i.normalsNeedUpdate=e.normalsNeedUpdate,i.colorsNeedUpdate=e.colorsNeedUpdate,i.uvsNeedUpdate=e.uvsNeedUpdate,i.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=i}var n;return!0===e.verticesNeedUpdate&&(n=this.attributes.position,void 0!==n&&(n.copyVector3sArray(e.vertices),n.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(n=this.attributes.normal,void 0!==n&&(n.copyVector3sArray(e.normals),n.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(n=this.attributes.color,void 0!==n&&(n.copyColorsArray(e.colors),n.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(n=this.attributes.uv,void 0!==n&&(n.copyVector2sArray(e.uvs),n.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(n=this.attributes.lineDistance,void 0!==n&&(n.copyArray(e.lineDistances),n.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Ot).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=this,i=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new Et(i,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new Et(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.addAttribute("color",new Et(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var o=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new Et(o,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var s=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new Et(s,2).copyVector2sArray(t.uvs2))}if(t.indices.length>0){var a=Pt(t.indices)>65535?Uint32Array:Uint16Array,h=new a(3*t.indices.length);this.setIndex(new Et(h,1).copyIndicesArray(t.indices))}this.groups=t.groups;for(var l in t.morphTargets){for(var u=[],d=t.morphTargets[l],c=0,f=d.length;c<f;c++){var p=d[c],m=new Ct(3*p.length,3);u.push(m.copyVector3sArray(p))}e.morphAttributes[l]=u}if(t.skinIndices.length>0){var v=new Ct(4*t.skinIndices.length,4);this.addAttribute("skinIndex",v.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var g=new Ct(4*t.skinWeights.length,4);this.addAttribute("skinWeight",g.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new lt);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new lt,e=new y;return function(){null===this.boundingSphere&&(this.boundingSphere=new ut);var i=this.attributes.position;if(i){var n=this.boundingSphere.center;t.setFromBufferAttribute(i),t.getCenter(n);for(var r=0,o=0,s=i.count;o<s;o++)e.x=i.getX(o),e.y=i.getY(o),e.z=i.getZ(o),r=Math.max(r,n.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,i=this.groups;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new Et(new Float32Array(n.length),3));else for(var r=e.normal.array,o=0,s=r.length;o<s;o++)r[o]=0;var a,h,l,u=e.normal.array,d=new y,c=new y,f=new y,p=new y,m=new y;if(t){var v=t.array;0===i.length&&this.addGroup(0,v.length);for(var g=0,b=i.length;g<b;++g)for(var _=i[g],w=_.start,x=_.count,o=w,s=w+x;o<s;o+=3)a=3*v[o+0],h=3*v[o+1],l=3*v[o+2],d.fromArray(n,a),c.fromArray(n,h),f.fromArray(n,l),p.subVectors(f,c),m.subVectors(d,c),p.cross(m),u[a]+=p.x,u[a+1]+=p.y,u[a+2]+=p.z,u[h]+=p.x,u[h+1]+=p.y,u[h+2]+=p.z,u[l]+=p.x,u[l+1]+=p.y,u[l+2]+=p.z}else for(var o=0,s=n.length;o<s;o+=9)d.fromArray(n,o),c.fromArray(n,o+3),f.fromArray(n,o+6),p.subVectors(f,c),m.subVectors(d,c),p.cross(m),u[o]=p.x,u[o+1]=p.y,u[o+2]=p.z,u[o+3]=p.x,u[o+4]=p.y,u[o+5]=p.z,u[o+6]=p.x,u[o+7]=p.y,u[o+8]=p.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0);var i=this.attributes;for(var n in i)if(void 0!==t.attributes[n])for(var r=i[n],o=r.array,s=t.attributes[n],a=s.array,h=s.itemSize,l=0,u=h*e;l<a.length;l++,u++)o[u]=a[l];return this},normalizeNormals:function(){for(var t,e,i,n,r=this.attributes.normal,o=0,s=r.count;o<s;o++)t=r.getX(o),e=r.getY(o),i=r.getZ(o),n=1/Math.sqrt(t*t+e*e+i*i),r.setXYZ(o,t*n,e*n,i*n)},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new At,e=this.index.array,i=this.attributes;for(var n in i){for(var r=i[n],o=r.array,s=r.itemSize,a=new o.constructor(e.length*s),h=0,l=0,u=0,d=e.length;u<d;u++){h=e[u]*s;for(var c=0;c<s;c++)a[l++]=o[h++]}t.addAttribute(n,new Et(a,s))}return t},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};var n=this.index;if(null!==n){var r=Array.prototype.slice.call(n.array);t.data.index={type:n.array.constructor.name,array:r}}var o=this.attributes;for(var i in o){var s=o[i],r=Array.prototype.slice.call(s.array);t.data.attributes[i]={itemSize:s.itemSize,type:s.array.constructor.name,array:r,normalized:s.normalized}}var a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));var h=this.boundingSphere;return null!==h&&(t.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),t},clone:function(){return(new At).copy(this)},copy:function(t){var e,i,n,r=this;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var o=t.index;null!==o&&this.setIndex(o.clone());var s=t.attributes;for(e in s){var a=s[e];r.addAttribute(e,a.clone())}var h=t.morphAttributes;for(e in h){var l=[],u=h[e];for(i=0,n=u.length;i<n;i++)l.push(u[i].clone());r.morphAttributes[e]=l}var d=t.groups;for(i=0,n=d.length;i<n;i++){var c=d[i];r.addGroup(c.start,c.count,c.materialIndex)}var f=t.boundingBox;null!==f&&(this.boundingBox=f.clone());var p=t.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Dt.prototype=Object.create(kt.prototype),Dt.prototype.constructor=Dt,It.prototype=Object.create(At.prototype),It.prototype.constructor=It,Rt.prototype=Object.create(kt.prototype),Rt.prototype.constructor=Rt,Lt.prototype=Object.create(At.prototype),Lt.prototype.constructor=Lt,Nt.prototype=Object.create(st.prototype),Nt.prototype.constructor=Nt,Nt.prototype.isMeshBasicMaterial=!0,Nt.prototype.copy=function(t){return st.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Object.assign(Ft.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return(e||new y).copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new y;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var i=e||new y;i.subVectors(t,this.origin);var n=i.dot(this.direction);return n<0?i.copy(this.origin):i.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new y;return function(e){var i=t.subVectors(e,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(i).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new y,e=new y,i=new y;return function(n,r,o,s){t.copy(n).add(r).multiplyScalar(.5),e.copy(r).sub(n).normalize(),i.copy(this.origin).sub(t);var a,h,l,u,d=.5*n.distanceTo(r),c=-this.direction.dot(e),f=i.dot(this.direction),p=-i.dot(e),m=i.lengthSq(),v=Math.abs(1-c*c);if(v>0)if(a=c*p-f,h=c*f-p,u=d*v,a>=0)if(h>=-u)if(h<=u){var g=1/v;a*=g,h*=g,l=a*(a+c*h+2*f)+h*(c*a+h+2*p)+m}else h=d,a=Math.max(0,-(c*h+f)),l=-a*a+h*(h+2*p)+m;else h=-d,a=Math.max(0,-(c*h+f)),l=-a*a+h*(h+2*p)+m;else h<=-u?(a=Math.max(0,-(-c*d+f)),h=a>0?-d:Math.min(Math.max(-d,-p),d),l=-a*a+h*(h+2*p)+m):h<=u?(a=0,h=Math.min(Math.max(-d,-p),d),l=h*(h+2*p)+m):(a=Math.max(0,-(c*d+f)),h=a>0?d:Math.min(Math.max(-d,-p),d),l=-a*a+h*(h+2*p)+m);else h=c>0?-d:d,a=Math.max(0,-(c*h+f)),l=-a*a+h*(h+2*p)+m;return o&&o.copy(this.direction).multiplyScalar(a).add(this.origin),s&&s.copy(e).multiplyScalar(h).add(t),l}}(),intersectSphere:function(){var t=new y;return function(e,i){t.subVectors(e.center,this.origin);var n=t.dot(this.direction),r=t.dot(t)-n*n,o=e.radius*e.radius;if(r>o)return null;var s=Math.sqrt(o-r),a=n-s,h=n+s;return a<0&&h<0?null:a<0?this.at(h,i):this.at(a,i)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null},intersectPlane:function(t,e){var i=this.distanceToPlane(t);return null===i?null:this.at(i,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var i,n,r,o,s,a,h=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,d=this.origin;return h>=0?(i=(t.min.x-d.x)*h,n=(t.max.x-d.x)*h):(i=(t.max.x-d.x)*h,n=(t.min.x-d.x)*h),l>=0?(r=(t.min.y-d.y)*l,o=(t.max.y-d.y)*l):(r=(t.max.y-d.y)*l,o=(t.min.y-d.y)*l),i>o||r>n?null:((r>i||i!==i)&&(i=r),(o<n||n!==n)&&(n=o),u>=0?(s=(t.min.z-d.z)*u,a=(t.max.z-d.z)*u):(s=(t.max.z-d.z)*u,a=(t.min.z-d.z)*u),i>a||s>n?null:((s>i||i!==i)&&(i=s),(a<n||n!==n)&&(n=a),n<0?null:this.at(i>=0?i:n,e)))},intersectsBox:function(){var t=new y;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new y,e=new y,i=new y,n=new y;return function(r,o,s,a,h){e.subVectors(o,r),i.subVectors(s,r),n.crossVectors(e,i);var l,u=this.direction.dot(n);if(u>0){if(a)return null;l=1}else{if(!(u<0))return null;l=-1,u=-u}t.subVectors(this.origin,r);var d=l*this.direction.dot(i.crossVectors(t,i));if(d<0)return null;var c=l*this.direction.dot(e.cross(t));if(c<0)return null;if(d+c>u)return null;var f=-l*t.dot(n);return f<0?null:this.at(f/u,h)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(zt.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return(t||new y).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return(t||new y).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var i=e||new y;return this.delta(i).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new y,e=new y;return function(i,n){t.subVectors(i,this.start),e.subVectors(this.end,this.start);var r=e.dot(e),o=e.dot(t),s=o/r;return n&&(s=md.clamp(s,0,1)),s}}(),closestPointToPoint:function(t,e,i){var n=this.closestPointToPointParameter(t,e),r=i||new y;return this.delta(r).multiplyScalar(n).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Object.assign(Bt,{normal:function(){var t=new y;return function(e,i,n,r){var o=r||new y;o.subVectors(n,i),t.subVectors(e,i),o.cross(t);var s=o.lengthSq();return s>0?o.multiplyScalar(1/Math.sqrt(s)):o.set(0,0,0)}}(),barycoordFromPoint:function(){var t=new y,e=new y,i=new y;return function(n,r,o,s,a){t.subVectors(s,r),e.subVectors(o,r),i.subVectors(n,r);var h=t.dot(t),l=t.dot(e),u=t.dot(i),d=e.dot(e),c=e.dot(i),f=h*d-l*l,p=a||new y;if(0===f)return p.set(-2,-1,-1);var m=1/f,v=(d*u-l*c)*m,g=(h*c-l*u)*m;return p.set(1-v-g,g,v)}}(),containsPoint:function(){var t=new y;return function(e,i,n,r){var o=Bt.barycoordFromPoint(e,i,n,r,t);return o.x>=0&&o.y>=0&&o.x+o.y<=1}}()}),Object.assign(Bt.prototype,{set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new y,e=new y;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),midpoint:function(t){return(t||new y).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return Bt.normal(this.a,this.b,this.c,t)},plane:function(t){return(t||new ct).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return Bt.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return Bt.containsPoint(t,this.a,this.b,this.c)},closestPointToPoint:function(){var t=new ct,e=[new zt,new zt,new zt],i=new y,n=new y;return function(r,o){var s=o||new y,a=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(r,i),!0===this.containsPoint(i))s.copy(i);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var h=0;h<e.length;h++){e[h].closestPointToPoint(i,!0,n);var l=i.distanceToSquared(n);l<a&&(a=l,s.copy(n))}}return s}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),jt.prototype=Object.assign(Object.create(yt.prototype),{constructor:jt,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return yt.prototype.copy.call(this,t),this.drawMode=t.drawMode,this},updateMorphTargets:function(){var t,e,i,n=this,r=this.geometry;if(r.isBufferGeometry){var o=r.morphAttributes,s=Object.keys(o);if(s.length>0){var a=o[s[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)i=a[t].name||String(t),n.morphTargetInfluences.push(0),n.morphTargetDictionary[i]=t}}else{var h=r.morphTargets;if(void 0!==h&&h.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=h.length;t<e;t++)i=h[t].name||String(t),n.morphTargetInfluences.push(0),n.morphTargetDictionary[i]=t}},raycast:function(){function t(t,e,i,n,r,o,s){return Bt.barycoordFromPoint(t,e,i,n,v),r.multiplyScalar(v.x),o.multiplyScalar(v.y),s.multiplyScalar(v.z),r.add(o).add(s),r.clone()}function e(t,e,i,n,r,o,s){var a=t.material;if(null===(a.side===_l?i.intersectTriangle(o,r,n,!0,s):i.intersectTriangle(n,r,o,a.side!==wl,s)))return null;_.copy(s),_.applyMatrix4(t.matrixWorld);var h=e.ray.origin.distanceTo(_);return h<e.near||h>e.far?null:{distance:h,point:_.clone(),object:t}}function i(i,n,r,o,l,u,d,f){s.fromBufferAttribute(o,u),a.fromBufferAttribute(o,d),h.fromBufferAttribute(o,f);var v=e(i,n,r,s,a,h,g);return v&&(l&&(c.fromBufferAttribute(l,u),p.fromBufferAttribute(l,d),m.fromBufferAttribute(l,f),v.uv=t(g,s,a,h,c,p,m)),v.face=new xt(u,d,f,Bt.normal(s,a,h)),v.faceIndex=u),v}var n=new b,r=new Ft,o=new ut,s=new y,a=new y,h=new y,l=new y,u=new y,d=new y,c=new f,p=new f,m=new f,v=new y,g=new y,_=new y;return function(f,v){var y=this,b=this.geometry,_=this.material,w=this.matrixWorld;if(void 0!==_&&(null===b.boundingSphere&&b.computeBoundingSphere(),o.copy(b.boundingSphere),o.applyMatrix4(w),!1!==f.ray.intersectsSphere(o)&&(n.getInverse(w),r.copy(f.ray).applyMatrix4(n),null===b.boundingBox||!1!==r.intersectsBox(b.boundingBox)))){var x;if(b.isBufferGeometry){var S,k,E,M,T,C=b.index,O=b.attributes.position,P=b.attributes.uv;if(null!==C)for(M=0,T=C.count;M<T;M+=3)S=C.getX(M),k=C.getX(M+1),E=C.getX(M+2),(x=i(y,f,r,O,P,S,k,E))&&(x.faceIndex=Math.floor(M/3),v.push(x));else for(M=0,T=O.count;M<T;M+=3)S=M,k=M+1,E=M+2,(x=i(y,f,r,O,P,S,k,E))&&(x.index=S,v.push(x))}else if(b.isGeometry){var A,D,I,R,L=Array.isArray(_),N=b.vertices,F=b.faces,z=b.faceVertexUvs[0];z.length>0&&(R=z);for(var B=0,j=F.length;B<j;B++){var U=F[B],H=L?_[U.materialIndex]:_;if(void 0!==H){if(A=N[U.a],D=N[U.b],I=N[U.c],!0===H.morphTargets){var V=b.morphTargets,G=y.morphTargetInfluences;s.set(0,0,0),a.set(0,0,0),h.set(0,0,0);for(var W=0,Y=V.length;W<Y;W++){var $=G[W];if(0!==$){var q=V[W].vertices;s.addScaledVector(l.subVectors(q[U.a],A),$),a.addScaledVector(u.subVectors(q[U.b],D),$),h.addScaledVector(d.subVectors(q[U.c],I),$)}}s.add(A),a.add(D),h.add(I),A=s,D=a,I=h}if(x=e(y,f,r,A,D,I,g)){if(R&&R[B]){var X=R[B];c.copy(X[0]),p.copy(X[1]),m.copy(X[2]),x.uv=t(g,A,D,I,c,p,m)}x.face=U,x.faceIndex=B,v.push(x)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Dd=0;ve.prototype=Object.assign(Object.create(wt.prototype),{constructor:ve,isArrayCamera:!0}),we.prototype.isFogExp2=!0,we.prototype.clone=function(){return new we(this.color.getHex(),this.density)},we.prototype.toJSON=function(t){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},xe.prototype.isFog=!0,xe.prototype.clone=function(){return new xe(this.color.getHex(),this.near,this.far)},xe.prototype.toJSON=function(t){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Se.prototype=Object.assign(Object.create(yt.prototype),{constructor:Se,copy:function(t,e){return yt.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=yt.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}),ke.prototype=Object.assign(Object.create(yt.prototype),{constructor:ke,isLensFlare:!0,copy:function(t){var e=this;yt.prototype.copy.call(this,t),this.positionScreen.copy(t.positionScreen),this.customUpdateCallback=t.customUpdateCallback;for(var i=0,n=t.lensFlares.length;i<n;i++)e.lensFlares.push(t.lensFlares[i]);return this},add:function(t,e,i,n,r,o){void 0===e&&(e=-1),void 0===i&&(i=0),void 0===o&&(o=1),void 0===r&&(r=new it(16777215)),void 0===n&&(n=Cl),i=Math.min(i,Math.max(0,i)),this.lensFlares.push({texture:t,size:e,distance:i,x:0,y:0,z:0,scale:1,rotation:0,opacity:o,color:r,blending:n})},updateLensFlares:function(){var t,e,i=this,n=this.lensFlares.length,r=2*-this.positionScreen.x,o=2*-this.positionScreen.y;for(t=0;t<n;t++)e=i.lensFlares[t],e.x=i.positionScreen.x+r*e.distance,e.y=i.positionScreen.y+o*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)}}),Ee.prototype=Object.create(st.prototype),Ee.prototype.constructor=Ee,Ee.prototype.isSpriteMaterial=!0,Ee.prototype.copy=function(t){return st.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},Me.prototype=Object.assign(Object.create(yt.prototype),{constructor:Me,isSprite:!0,raycast:function(){var t=new y,e=new y,i=new y;return function(n,r){e.setFromMatrixPosition(this.matrixWorld),n.ray.closestPointToPoint(e,t),i.setFromMatrixScale(this.matrixWorld);var o=i.x*i.y/4;if(!(e.distanceToSquared(t)>o)){var s=n.ray.origin.distanceTo(t);s<n.near||s>n.far||r.push({distance:s,point:t.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),Te.prototype=Object.assign(Object.create(yt.prototype),{constructor:Te,copy:function(t){var e=this;yt.prototype.copy.call(this,t,!1);for(var i=t.levels,n=0,r=i.length;n<r;n++){var o=i[n];e.addLevel(o.object.clone(),o.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var i=this.levels,n=0;n<i.length&&!(e<i[n].distance);n++);i.splice(n,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,i=1,n=e.length;i<n&&!(t<e[i].distance);i++);return e[i-1].object},raycast:function(){var t=new y;return function(e,i){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(t);this.getObjectForDistance(n).raycast(e,i)}}(),update:function(){var t=new y,e=new y;return function(i){var n=this.levels;if(n.length>1){t.setFromMatrixPosition(i.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var r=t.distanceTo(e);n[0].object.visible=!0;for(var o=1,s=n.length;o<s&&r>=n[o].distance;o++)n[o-1].object.visible=!1,n[o].object.visible=!0;for(;o<s;o++)n[o].object.visible=!1}}}(),toJSON:function(t){var e=yt.prototype.toJSON.call(this,t);e.object.levels=[];for(var i=this.levels,n=0,r=i.length;n<r;n++){var o=i[n];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),Object.assign(Ce.prototype,{calculateInverses:function(){var t=this;this.boneInverses=[];for(var e=0,i=this.bones.length;e<i;e++){var n=new b;t.bones[e]&&n.getInverse(t.bones[e].matrixWorld),t.boneInverses.push(n)}},pose:function(){var t,e,i,n=this;for(e=0,i=this.bones.length;e<i;e++)(t=n.bones[e])&&t.matrixWorld.getInverse(n.boneInverses[e]);for(e=0,i=this.bones.length;e<i;e++)(t=n.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new b,e=new b;return function(){for(var i=this.bones,n=this.boneInverses,r=this.boneMatrices,o=this.boneTexture,s=0,a=i.length;s<a;s++){var h=i[s]?i[s].matrixWorld:e;t.multiplyMatrices(h,n[s]),t.toArray(r,16*s)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new Ce(this.bones,this.boneInverses)}}),Oe.prototype=Object.assign(Object.create(yt.prototype),{constructor:Oe,isBone:!0}),Pe.prototype=Object.assign(Object.create(jt.prototype),{constructor:Pe,isSkinnedMesh:!0,initBones:function(){var t,e,i,n,r=this,o=[];if(this.geometry&&void 0!==this.geometry.bones){for(i=0,n=this.geometry.bones.length;i<n;i++)e=r.geometry.bones[i],t=new Oe,o.push(t),t.name=e.name,t.position.fromArray(e.pos),t.quaternion.fromArray(e.rotq),void 0!==e.scl&&t.scale.fromArray(e.scl);for(i=0,n=this.geometry.bones.length;i<n;i++)e=r.geometry.bones[i],-1!==e.parent&&null!==e.parent&&void 0!==o[e.parent]?o[e.parent].add(o[i]):r.add(o[i])}return this.updateMatrixWorld(!0),o},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var t,e,i=this;if(this.geometry&&this.geometry.isGeometry)for(e=0;e<this.geometry.skinWeights.length;e++){var n=i.geometry.skinWeights[e];t=1/n.lengthManhattan(),t!==1/0?n.multiplyScalar(t):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new m,o=this.geometry.attributes.skinWeight;for(e=0;e<o.count;e++)r.x=o.getX(e),r.y=o.getY(e),r.z=o.getZ(e),r.w=o.getW(e),t=1/r.lengthManhattan(),t!==1/0?r.multiplyScalar(t):r.set(1,0,0,0),o.setXYZW(e,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(t){jt.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ae.prototype=Object.create(st.prototype),Ae.prototype.constructor=Ae,Ae.prototype.isLineBasicMaterial=!0,Ae.prototype.copy=function(t){return st.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},De.prototype=Object.assign(Object.create(yt.prototype),{constructor:De,isLine:!0,raycast:function(){var t=new b,e=new Ft,i=new ut;return function(n,r){var o=this,s=n.linePrecision,a=s*s,h=this.geometry,l=this.matrixWorld;if(null===h.boundingSphere&&h.computeBoundingSphere(),i.copy(h.boundingSphere),i.applyMatrix4(l),!1!==n.ray.intersectsSphere(i)){t.getInverse(l),e.copy(n.ray).applyMatrix4(t);var u=new y,d=new y,c=new y,f=new y,p=this&&this.isLineSegments?2:1;if(h.isBufferGeometry){var m=h.index,v=h.attributes,g=v.position.array;if(null!==m)for(var b=m.array,_=0,w=b.length-1;_<w;_+=p){var x=b[_],S=b[_+1];u.fromArray(g,3*x),d.fromArray(g,3*S);var k=e.distanceSqToSegment(u,d,f,c);if(!(k>a)){f.applyMatrix4(o.matrixWorld);var E=n.ray.origin.distanceTo(f);E<n.near||E>n.far||r.push({distance:E,point:c.clone().applyMatrix4(o.matrixWorld),index:_,face:null,faceIndex:null,object:o})}}else for(var _=0,w=g.length/3-1;_<w;_+=p){u.fromArray(g,3*_),d.fromArray(g,3*_+3);var k=e.distanceSqToSegment(u,d,f,c);if(!(k>a)){f.applyMatrix4(o.matrixWorld);var E=n.ray.origin.distanceTo(f);E<n.near||E>n.far||r.push({distance:E,point:c.clone().applyMatrix4(o.matrixWorld),index:_,face:null,faceIndex:null,object:o})}}}else if(h.isGeometry)for(var M=h.vertices,T=M.length,_=0;_<T-1;_+=p){var k=e.distanceSqToSegment(M[_],M[_+1],f,c);if(!(k>a)){f.applyMatrix4(o.matrixWorld);var E=n.ray.origin.distanceTo(f);E<n.near||E>n.far||r.push({distance:E,point:c.clone().applyMatrix4(o.matrixWorld),index:_,face:null,faceIndex:null,object:o})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ie.prototype=Object.assign(Object.create(De.prototype),{constructor:Ie,isLineSegments:!0}),Re.prototype=Object.assign(Object.create(De.prototype),{constructor:Re,isLineLoop:!0}),Le.prototype=Object.create(st.prototype),Le.prototype.constructor=Le,Le.prototype.isPointsMaterial=!0,Le.prototype.copy=function(t){return st.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},Ne.prototype=Object.assign(Object.create(yt.prototype),{constructor:Ne,isPoints:!0,raycast:function(){var t=new b,e=new Ft,i=new ut;return function(n,r){function o(t,i){var o=e.distanceSqToPoint(t);if(o<d){var a=e.closestPointToPoint(t);a.applyMatrix4(h);var l=n.ray.origin.distanceTo(a);if(l<n.near||l>n.far)return;r.push({distance:l,distanceToRay:Math.sqrt(o),point:a.clone(),index:i,face:null,object:s})}}var s=this,a=this.geometry,h=this.matrixWorld,l=n.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),i.copy(a.boundingSphere),i.applyMatrix4(h),i.radius+=l,!1!==n.ray.intersectsSphere(i)){t.getInverse(h),e.copy(n.ray).applyMatrix4(t);var u=l/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,c=new y;if(a.isBufferGeometry){var f=a.index,p=a.attributes,m=p.position.array;if(null!==f)for(var v=f.array,g=0,b=v.length;g<b;g++){var _=v[g];c.fromArray(m,3*_),o(c,_)}else for(var g=0,w=m.length/3;g<w;g++)c.fromArray(m,3*g),o(c,g)}else for(var x=a.vertices,g=0,w=x.length;g<w;g++)o(x[g],g)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Fe.prototype=Object.assign(Object.create(yt.prototype),{constructor:Fe}),ze.prototype=Object.create(p.prototype),ze.prototype.constructor=ze,ze.prototype.isCompressedTexture=!0,Be.prototype=Object.create(p.prototype),Be.prototype.constructor=Be,je.prototype=Object.create(At.prototype),je.prototype.constructor=je,Ue.prototype=Object.create(kt.prototype),Ue.prototype.constructor=Ue,He.prototype=Object.create(At.prototype),He.prototype.constructor=He,Ve.prototype=Object.create(kt.prototype),Ve.prototype.constructor=Ve,Ge.prototype=Object.create(At.prototype),Ge.prototype.constructor=Ge,We.prototype=Object.create(kt.prototype),We.prototype.constructor=We,Ye.prototype=Object.create(Ge.prototype),Ye.prototype.constructor=Ye,$e.prototype=Object.create(kt.prototype),$e.prototype.constructor=$e,qe.prototype=Object.create(Ge.prototype),qe.prototype.constructor=qe,Xe.prototype=Object.create(kt.prototype),Xe.prototype.constructor=Xe,Ze.prototype=Object.create(Ge.prototype),Ze.prototype.constructor=Ze,Ke.prototype=Object.create(kt.prototype),Ke.prototype.constructor=Ke,Qe.prototype=Object.create(Ge.prototype),Qe.prototype.constructor=Qe,Je.prototype=Object.create(kt.prototype),Je.prototype.constructor=Je,ti.prototype=Object.create(At.prototype),ti.prototype.constructor=ti,ei.prototype=Object.create(kt.prototype),ei.prototype.constructor=ei,ii.prototype=Object.create(At.prototype),ii.prototype.constructor=ii,ni.prototype=Object.create(kt.prototype),ni.prototype.constructor=ni,ri.prototype=Object.create(At.prototype),ri.prototype.constructor=ri;var Id={area:function(t){for(var e=t.length,i=0,n=e-1,r=0;r<e;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i},triangulate:function(){function t(t,e,i,n,r,o){var s,a,h,l,u,d,c,f,p;if(a=t[o[e]].x,h=t[o[e]].y,l=t[o[i]].x,u=t[o[i]].y,d=t[o[n]].x,c=t[o[n]].y,(l-a)*(c-h)-(u-h)*(d-a)<=0)return!1;var m,v,g,y,b,_,w,x,S,k,E,M,T,C,O;for(m=d-l,v=c-u,g=a-d,y=h-c,b=l-a,_=u-h,s=0;s<r;s++)if(f=t[o[s]].x,p=t[o[s]].y,!(f===a&&p===h||f===l&&p===u||f===d&&p===c)&&(w=f-a,x=p-h,S=f-l,k=p-u,E=f-d,M=p-c,O=m*k-v*S,T=b*x-_*w,C=g*M-y*E,O>=-Number.EPSILON&&C>=-Number.EPSILON&&T>=-Number.EPSILON))return!1;return!0}return function(e,i){var n=e.length;if(n<3)return null;var r,o,s,a=[],h=[],l=[];if(Id.area(e)>0)for(o=0;o<n;o++)h[o]=o;else for(o=0;o<n;o++)h[o]=n-1-o;var u=n,d=2*u;for(o=u-1;u>2;){if(d--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),i?l:a;if(r=o,u<=r&&(r=0),o=r+1,u<=o&&(o=0),s=o+1,u<=s&&(s=0),t(e,r,o,s,u,h)){var c,f,p,m,v;for(c=h[r],f=h[o],p=h[s],a.push([e[c],e[f],e[p]]),l.push([h[r],h[o],h[s]]),m=o,v=o+1;v<u;m++,v++)h[m]=h[v];u--,d=2*u}}return i?l:a}}(),triangulateShape:function(t,e){function i(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function n(t,e,i){return t.x!==e.x?t.x<e.x?t.x<=i.x&&i.x<=e.x:e.x<=i.x&&i.x<=t.x:t.y<e.y?t.y<=i.y&&i.y<=e.y:e.y<=i.y&&i.y<=t.y}function r(t,e,i,r,o){var s=e.x-t.x,a=e.y-t.y,h=r.x-i.x,l=r.y-i.y,u=t.x-i.x,d=t.y-i.y,c=a*h-s*l,f=a*u-s*d;if(Math.abs(c)>Number.EPSILON){var p;if(c>0){if(f<0||f>c)return[];if((p=l*u-h*d)<0||p>c)return[]}else{if(f>0||f<c)return[];if((p=l*u-h*d)>0||p<c)return[]}if(0===p)return!o||0!==f&&f!==c?[t]:[];if(p===c)return!o||0!==f&&f!==c?[e]:[];if(0===f)return[i];if(f===c)return[r];var m=p/c;return[{x:t.x+m*s,y:t.y+m*a}]}if(0!==f||l*u!==h*d)return[];var v=0===s&&0===a,g=0===h&&0===l;if(v&&g)return t.x!==i.x||t.y!==i.y?[]:[t];if(v)return n(i,r,t)?[t]:[];if(g)return n(t,e,i)?[i]:[];var y,b,_,w,x,S,k,E;return 0!==s?(t.x<e.x?(y=t,_=t.x,b=e,w=e.x):(y=e,_=e.x,b=t,w=t.x),i.x<r.x?(x=i,k=i.x,S=r,E=r.x):(x=r,k=r.x,S=i,E=i.x)):(t.y<e.y?(y=t,_=t.y,b=e,w=e.y):(y=e,_=e.y,b=t,w=t.y),i.y<r.y?(x=i,k=i.y,S=r,E=r.y):(x=r,k=r.y,S=i,E=i.y)),_<=k?w<k?[]:w===k?o?[]:[x]:w<=E?[x,b]:[x,S]:_>E?[]:_===E?o?[]:[y]:w<=E?[y,b]:[y,S]}function o(t,e,i,n){var r=e.x-t.x,o=e.y-t.y,s=i.x-t.x,a=i.y-t.y,h=n.x-t.x,l=n.y-t.y,u=r*a-o*s,d=r*l-o*h;if(Math.abs(u)>Number.EPSILON){var c=h*a-l*s;return u>0?d>=0&&c>=0:d>=0||c>=0}return d>0}i(t),e.forEach(i);for(var s,a,h,l,u,d,c={},f=t.concat(),p=0,m=e.length;p<m;p++)Array.prototype.push.apply(f,e[p]);for(s=0,a=f.length;s<a;s++)u=f[s].x+":"+f[s].y,void 0!==c[u]&&console.warn("THREE.ShapeUtils: Duplicate point",u,s),c[u]=s;var v=function(t,e){for(var i,n,s,a,h,l,u,d,c,f,p,m=t.concat(),v=[],g=[],y=0,b=e.length;y<b;y++)v.push(y);for(var _=0,w=2*v.length;v.length>0;){if(--w<0){console.log("Infinite Loop! Holes left:"+v.length+", Probably Hole outside Shape!");break}for(s=_;s<m.length;s++){a=m[s],n=-1;for(var y=0;y<v.length;y++)if(l=v[y],u=a.x+":"+a.y+":"+l,void 0===g[u]){i=e[l];for(var x=0;x<i.length;x++)if(h=i[x],function(t,e){var n=m.length-1,r=t-1;r<0&&(r=n);var s=t+1;s>n&&(s=0);var a=o(m[t],m[r],m[s],i[e]);if(!a)return!1;var h=i.length-1,l=e-1;l<0&&(l=h);var u=e+1;return u>h&&(u=0),!!(a=o(i[e],i[l],i[u],m[t]))}(s,x)&&!function(t,e){var i,n,o;for(i=0;i<m.length;i++)if(n=i+1,n%=m.length,o=r(t,e,m[i],m[n],!0),o.length>0)return!0;return!1}(a,h)&&!function(t,i){var n,o,s,a,h;for(n=0;n<v.length;n++)for(o=e[v[n]],s=0;s<o.length;s++)if(a=s+1,a%=o.length,h=r(t,i,o[s],o[a],!0),h.length>0)return!0;return!1}(a,h)){n=x,v.splice(y,1),d=m.slice(0,s+1),c=m.slice(s),f=i.slice(n),p=i.slice(0,n+1),m=d.concat(f).concat(p).concat(c),_=s;break}if(n>=0)break;g[u]=!0}if(n>=0)break}}return m}(t,e),g=Id.triangulate(v,!1);for(s=0,a=g.length;s<a;s++)for(l=g[s],h=0;h<3;h++)u=l[h].x+":"+l[h].y,void 0!==(d=c[u])&&(l[h]=d);return g.concat()},isClockWise:function(t){return Id.area(t)<0}};oi.prototype=Object.create(kt.prototype),oi.prototype.constructor=oi,si.prototype=Object.create(At.prototype),si.prototype.constructor=si,si.prototype.getArrays=function(){var t=this.getAttribute("position"),e=t?Array.prototype.slice.call(t.array):[],i=this.getAttribute("uv"),n=i?Array.prototype.slice.call(i.array):[],r=this.index;return{position:e,uv:n,index:r?Array.prototype.slice.call(r.array):[]}},si.prototype.addShapeList=function(t,e){var i=this,n=t.length;e.arrays=this.getArrays();for(var r=0;r<n;r++){var o=t[r];i.addShape(o,e)}this.setIndex(e.arrays.index),this.addAttribute("position",new Ct(e.arrays.position,3)),this.addAttribute("uv",new Ct(e.arrays.uv,2))},si.prototype.addShape=function(t,e){function i(t,e,i){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(i).add(t)}function n(t,e,i){var n,r,o,s=t.x-e.x,a=t.y-e.y,h=i.x-t.x,l=i.y-t.y,u=s*s+a*a,d=s*l-a*h;if(Math.abs(d)>Number.EPSILON){var c=Math.sqrt(u),p=Math.sqrt(h*h+l*l),m=e.x-a/c,v=e.y+s/c,g=i.x-l/p,y=i.y+h/p,b=((g-m)*l-(y-v)*h)/(s*l-a*h);n=m+s*b-t.x,r=v+a*b-t.y;var _=n*n+r*r;if(_<=2)return new f(n,r);o=Math.sqrt(_/2)}else{var w=!1;s>Number.EPSILON?h>Number.EPSILON&&(w=!0):s<-Number.EPSILON?h<-Number.EPSILON&&(w=!0):Math.sign(a)===Math.sign(l)&&(w=!0),w?(n=-a,r=s,o=Math.sqrt(u)):(n=s,r=a,o=Math.sqrt(u/2))}return new f(n/o,r/o)}function r(t,e){var i,n;for(Z=t.length;--Z>=0;){i=Z,n=Z-1,n<0&&(n=t.length-1);var r=0,o=C+2*E;for(r=0;r<o;r++){var s=$*r,h=$*(r+1);a(e+i+s,e+n+s,e+n+h,e+i+h,t,r,o,i,n)}}}function o(t,e,i){w.push(t),w.push(e),w.push(i)}function s(t,e,i){h(t),h(e),h(i);var n=g.length/3,r=A.generateTopUV(L,g,n-3,n-2,n-1);l(r[0]),l(r[1]),l(r[2])}function a(t,e,i,n,r,o,s,a,u){h(t),h(e),h(n),h(e),h(i),h(n);var d=g.length/3,c=A.generateSideWallUV(L,g,d-6,d-3,d-2,d-1);l(c[0]),l(c[1]),l(c[3]),l(c[1]),l(c[2]),l(c[3])}function h(t){b.push(g.length/3),g.push(w[3*t+0]),g.push(w[3*t+1]),g.push(w[3*t+2])}function l(t){_.push(t.x),_.push(t.y)}var u,d,c,p,m,v=e.arrays?e.arrays:this.getArrays(),g=v.position,b=v.index,_=v.uv,w=[],x=void 0!==e.amount?e.amount:100,S=void 0!==e.bevelThickness?e.bevelThickness:6,k=void 0!==e.bevelSize?e.bevelSize:S-2,E=void 0!==e.bevelSegments?e.bevelSegments:3,M=void 0===e.bevelEnabled||e.bevelEnabled,T=void 0!==e.curveSegments?e.curveSegments:12,C=void 0!==e.steps?e.steps:1,O=e.extrudePath,P=!1,A=void 0!==e.UVGenerator?e.UVGenerator:oi.WorldUVGenerator;O&&(u=O.getSpacedPoints(C),P=!0,M=!1,d=void 0!==e.frames?e.frames:O.computeFrenetFrames(C,!1),c=new y,p=new y,m=new y),M||(E=0,S=0,k=0);var D,I,R,L=this,N=t.extractPoints(T),F=N.shape,z=N.holes;if(!Id.isClockWise(F))for(F=F.reverse(),I=0,R=z.length;I<R;I++)D=z[I],Id.isClockWise(D)&&(z[I]=D.reverse());var B=Id.triangulateShape(F,z),j=F;for(I=0,R=z.length;I<R;I++)D=z[I],F=F.concat(D);for(var U,H,V,G,W,Y,$=F.length,q=B.length,X=[],Z=0,K=j.length,Q=K-1,J=Z+1;Z<K;Z++,Q++,J++)Q===K&&(Q=0),J===K&&(J=0),X[Z]=n(j[Z],j[Q],j[J]);var tt,et=[],it=X.concat();for(I=0,R=z.length;I<R;I++){for(D=z[I],tt=[],Z=0,K=D.length,Q=K-1,J=Z+1;Z<K;Z++,Q++,J++)Q===K&&(Q=0),J===K&&(J=0),tt[Z]=n(D[Z],D[Q],D[J]);et.push(tt),it=it.concat(tt)}for(U=0;U<E;U++){for(V=U/E,G=S*Math.cos(V*Math.PI/2),H=k*Math.sin(V*Math.PI/2),Z=0,K=j.length;Z<K;Z++)W=i(j[Z],X[Z],H),o(W.x,W.y,-G);for(I=0,R=z.length;I<R;I++)for(D=z[I],tt=et[I],Z=0,K=D.length;Z<K;Z++)W=i(D[Z],tt[Z],H),o(W.x,W.y,-G)}for(H=k,Z=0;Z<$;Z++)W=M?i(F[Z],it[Z],H):F[Z],P?(p.copy(d.normals[0]).multiplyScalar(W.x),c.copy(d.binormals[0]).multiplyScalar(W.y),m.copy(u[0]).add(p).add(c),o(m.x,m.y,m.z)):o(W.x,W.y,0);var nt;for(nt=1;nt<=C;nt++)for(Z=0;Z<$;Z++)W=M?i(F[Z],it[Z],H):F[Z],P?(p.copy(d.normals[nt]).multiplyScalar(W.x),c.copy(d.binormals[nt]).multiplyScalar(W.y),m.copy(u[nt]).add(p).add(c),o(m.x,m.y,m.z)):o(W.x,W.y,x/C*nt);for(U=E-1;U>=0;U--){for(V=U/E,G=S*Math.cos(V*Math.PI/2),H=k*Math.sin(V*Math.PI/2),Z=0,K=j.length;Z<K;Z++)W=i(j[Z],X[Z],H),o(W.x,W.y,x+G);for(I=0,R=z.length;I<R;I++)for(D=z[I],tt=et[I],Z=0,K=D.length;Z<K;Z++)W=i(D[Z],tt[Z],H),P?o(W.x,W.y+u[C-1].y,u[C-1].x+G):o(W.x,W.y,x+G)}!function(){var t=g.length/3;if(M){var i=0,n=$*i;for(Z=0;Z<q;Z++)Y=B[Z],s(Y[2]+n,Y[1]+n,Y[0]+n);for(i=C+2*E,n=$*i,Z=0;Z<q;Z++)Y=B[Z],s(Y[0]+n,Y[1]+n,Y[2]+n)}else{for(Z=0;Z<q;Z++)Y=B[Z],s(Y[2],Y[1],Y[0]);for(Z=0;Z<q;Z++)Y=B[Z],s(Y[0]+$*C,Y[1]+$*C,Y[2]+$*C)}L.addGroup(t,g.length/3-t,void 0!==e.material?e.material:0)}(),function(){var t=g.length/3,i=0;for(r(j,i),i+=j.length,I=0,R=z.length;I<R;I++)D=z[I],r(D,i),i+=D.length;L.addGroup(t,g.length/3-t,void 0!==e.extrudeMaterial?e.extrudeMaterial:1)}(),e.arrays||(this.setIndex(b),this.addAttribute("position",new Ct(g,3)),this.addAttribute("uv",new Ct(e.arrays.uv,2)))},oi.WorldUVGenerator={generateTopUV:function(t,e,i,n,r){var o=e[3*i],s=e[3*i+1],a=e[3*n],h=e[3*n+1],l=e[3*r],u=e[3*r+1];return[new f(o,s),new f(a,h),new f(l,u)]},generateSideWallUV:function(t,e,i,n,r,o){var s=e[3*i],a=e[3*i+1],h=e[3*i+2],l=e[3*n],u=e[3*n+1],d=e[3*n+2],c=e[3*r],p=e[3*r+1],m=e[3*r+2],v=e[3*o],g=e[3*o+1],y=e[3*o+2];return Math.abs(a-u)<.01?[new f(s,1-h),new f(l,1-d),new f(c,1-m),new f(v,1-y)]:[new f(a,1-h),new f(u,1-d),new f(p,1-m),new f(g,1-y)]}},ai.prototype=Object.create(kt.prototype),ai.prototype.constructor=ai,hi.prototype=Object.create(si.prototype),hi.prototype.constructor=hi,li.prototype=Object.create(kt.prototype),li.prototype.constructor=li,ui.prototype=Object.create(At.prototype),ui.prototype.constructor=ui,di.prototype=Object.create(kt.prototype),di.prototype.constructor=di,ci.prototype=Object.create(At.prototype),ci.prototype.constructor=ci,fi.prototype=Object.create(kt.prototype),fi.prototype.constructor=fi,pi.prototype=Object.create(At.prototype),pi.prototype.constructor=pi,mi.prototype=Object.create(kt.prototype),mi.prototype.constructor=mi,vi.prototype=Object.create(At.prototype),vi.prototype.constructor=vi,gi.prototype=Object.create(At.prototype),gi.prototype.constructor=gi,yi.prototype=Object.create(kt.prototype),yi.prototype.constructor=yi,bi.prototype=Object.create(At.prototype),bi.prototype.constructor=bi,_i.prototype=Object.create(yi.prototype),_i.prototype.constructor=_i,wi.prototype=Object.create(bi.prototype),wi.prototype.constructor=wi,xi.prototype=Object.create(kt.prototype),xi.prototype.constructor=xi,Si.prototype=Object.create(At.prototype),Si.prototype.constructor=Si;var Rd=Object.freeze({WireframeGeometry:je,ParametricGeometry:Ue,ParametricBufferGeometry:He,TetrahedronGeometry:We,TetrahedronBufferGeometry:Ye,OctahedronGeometry:$e,OctahedronBufferGeometry:qe,IcosahedronGeometry:Xe,IcosahedronBufferGeometry:Ze,DodecahedronGeometry:Ke,DodecahedronBufferGeometry:Qe,PolyhedronGeometry:Ve,PolyhedronBufferGeometry:Ge,TubeGeometry:Je,TubeBufferGeometry:ti,TorusKnotGeometry:ei,TorusKnotBufferGeometry:ii,TorusGeometry:ni,TorusBufferGeometry:ri,TextGeometry:ai,TextBufferGeometry:hi,SphereGeometry:li,SphereBufferGeometry:ui,RingGeometry:di,RingBufferGeometry:ci,PlaneGeometry:Rt,PlaneBufferGeometry:Lt,LatheGeometry:fi,LatheBufferGeometry:pi,ShapeGeometry:mi,ShapeBufferGeometry:vi,ExtrudeGeometry:oi,ExtrudeBufferGeometry:si,EdgesGeometry:gi,ConeGeometry:_i,ConeBufferGeometry:wi,CylinderGeometry:yi,CylinderBufferGeometry:bi,CircleGeometry:xi,CircleBufferGeometry:Si,BoxGeometry:Dt,BoxBufferGeometry:It});ki.prototype=Object.create(at.prototype),ki.prototype.constructor=ki,ki.prototype.isShadowMaterial=!0,Ei.prototype=Object.create(at.prototype),Ei.prototype.constructor=Ei,Ei.prototype.isRawShaderMaterial=!0,Mi.prototype=Object.create(st.prototype),Mi.prototype.constructor=Mi,Mi.prototype.isMeshStandardMaterial=!0,Mi.prototype.copy=function(t){return st.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ti.prototype=Object.create(Mi.prototype),Ti.prototype.constructor=Ti,Ti.prototype.isMeshPhysicalMaterial=!0,Ti.prototype.copy=function(t){return Mi.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},Ci.prototype=Object.create(st.prototype),Ci.prototype.constructor=Ci,Ci.prototype.isMeshPhongMaterial=!0,Ci.prototype.copy=function(t){return st.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Oi.prototype=Object.create(Ci.prototype),Oi.prototype.constructor=Oi,Oi.prototype.isMeshToonMaterial=!0,Oi.prototype.copy=function(t){return Ci.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},Pi.prototype=Object.create(st.prototype),Pi.prototype.constructor=Pi,Pi.prototype.isMeshNormalMaterial=!0,Pi.prototype.copy=function(t){return st.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ai.prototype=Object.create(st.prototype),Ai.prototype.constructor=Ai,Ai.prototype.isMeshLambertMaterial=!0,Ai.prototype.copy=function(t){return st.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Di.prototype=Object.create(st.prototype),Di.prototype.constructor=Di,Di.prototype.isLineDashedMaterial=!0,Di.prototype.copy=function(t){return st.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Ld=Object.freeze({ShadowMaterial:ki,SpriteMaterial:Ee,RawShaderMaterial:Ei,ShaderMaterial:at,PointsMaterial:Le,MeshPhysicalMaterial:Ti,MeshStandardMaterial:Mi,MeshPhongMaterial:Ci,MeshToonMaterial:Oi,MeshNormalMaterial:Pi,MeshLambertMaterial:Ai,MeshDepthMaterial:ht,MeshBasicMaterial:Nt,LineDashedMaterial:Di,LineBasicMaterial:Ae,Material:st}),Nd={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},Fd=new Ii;Object.assign(Ri.prototype,{load:function(t,e,i,n){var r=this;void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var o=this,s=Nd.get(t);if(void 0!==s)return o.manager.itemStart(t),setTimeout(function(){e&&e(s),o.manager.itemEnd(t)},0),s;var a=/^data:(.*?)(;base64)?,(.*)$/,h=t.match(a);if(h){var l=h[1],u=!!h[2],d=h[3];d=window.decodeURIComponent(d),u&&(d=window.atob(d));try{var c,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":c=new ArrayBuffer(d.length);for(var p=new Uint8Array(c),m=0;m<d.length;m++)p[m]=d.charCodeAt(m);"blob"===f&&(c=new Blob([c],{type:l}));break;case"document":var v=new DOMParser;c=v.parseFromString(d,l);break;case"json":c=JSON.parse(d);break;default:c=d}window.setTimeout(function(){e&&e(c),o.manager.itemEnd(t)},0)}catch(e){window.setTimeout(function(){n&&n(e),o.manager.itemEnd(t),o.manager.itemError(t)},0)}}else{var g=new XMLHttpRequest;g.open("GET",t,!0),g.addEventListener("load",function(i){var r=i.target.response;Nd.add(t,r),200===this.status?(e&&e(r),o.manager.itemEnd(t)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),e&&e(r),o.manager.itemEnd(t)):(n&&n(i),o.manager.itemEnd(t),o.manager.itemError(t))},!1),void 0!==i&&g.addEventListener("progress",function(t){i(t)},!1),g.addEventListener("error",function(e){n&&n(e),o.manager.itemEnd(t),o.manager.itemError(t)},!1),void 0!==this.responseType&&(g.responseType=this.responseType),void 0!==this.withCredentials&&(g.withCredentials=this.withCredentials),g.overrideMimeType&&g.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var y in r.requestHeader)g.setRequestHeader(y,r.requestHeader[y]);g.send(null)}return o.manager.itemStart(t),g},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(Li.prototype,{load:function(t,e,i,n){var r=this,o=[],s=new ze;s.image=o;var a=new Ri(this.manager);if(a.setPath(this.path),a.setResponseType("arraybuffer"),Array.isArray(t))for(var h=0,l=0,u=t.length;l<u;++l)!function(l){a.load(t[l],function(t){var i=r._parser(t,!0);o[l]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},6===(h+=1)&&(1===i.mipmapCount&&(s.minFilter=ku),s.format=i.format,s.needsUpdate=!0,e&&e(s))},i,n)}(l);else a.load(t,function(t){var i=r._parser(t,!0);if(i.isCubemap)for(var n=i.mipmaps.length/i.mipmapCount,a=0;a<n;a++){o[a]={mipmaps:[]};for(var h=0;h<i.mipmapCount;h++)o[a].mipmaps.push(i.mipmaps[a*i.mipmapCount+h]),o[a].format=i.format,o[a].width=i.width,o[a].height=i.height}else s.image.width=i.width,s.image.height=i.height,s.mipmaps=i.mipmaps;1===i.mipmapCount&&(s.minFilter=ku),s.format=i.format,s.needsUpdate=!0,e&&e(s)},i,n);return s},setPath:function(t){return this.path=t,this}}),Object.assign(Ni.prototype,{load:function(t,e,i,n){var r=this,o=new _,s=new Ri(this.manager);return s.setResponseType("arraybuffer"),s.load(t,function(t){var i=r._parser(t);i&&(void 0!==i.image?o.image=i.image:void 0!==i.data&&(o.image.width=i.width,o.image.height=i.height,o.image.data=i.data),o.wrapS=void 0!==i.wrapS?i.wrapS:bu,o.wrapT=void 0!==i.wrapT?i.wrapT:bu,o.magFilter=void 0!==i.magFilter?i.magFilter:ku,o.minFilter=void 0!==i.minFilter?i.minFilter:Mu,o.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.format&&(o.format=i.format),void 0!==i.type&&(o.type=i.type),void 0!==i.mipmaps&&(o.mipmaps=i.mipmaps),1===i.mipmapCount&&(o.minFilter=ku),o.needsUpdate=!0,e&&e(o,i))},i,n),o}}),Object.assign(Fi.prototype,{load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,o=Nd.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;var s=document.createElementNS("http://www.w3.org/1999/xhtml","img");return s.addEventListener("load",function(){Nd.add(t,this),e&&e(this),r.manager.itemEnd(t)},!1),s.addEventListener("error",function(e){n&&n(e),r.manager.itemEnd(t),r.manager.itemError(t)},!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(t),s.src=t,s},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(zi.prototype,{load:function(t,e,i,n){var r=new w,o=new Fi(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);for(var s=0,a=0;a<t.length;++a)!function(i){o.load(t[i],function(t){r.images[i]=t,6===++s&&(r.needsUpdate=!0,e&&e(r))},void 0,n)}(a);return r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Bi.prototype,{load:function(t,e,i,n){var r=new Fi(this.manager);r.setCrossOrigin(this.crossOrigin),r.setPath(this.path);var o=new p;return o.image=r.load(t,function(){var i=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);o.format=i?ju:Uu,o.needsUpdate=!0,void 0!==e&&e(o)},i,n),o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),ji.prototype=Object.assign(Object.create(yt.prototype),{constructor:ji,isLight:!0,copy:function(t){return yt.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=yt.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Ui.prototype=Object.assign(Object.create(ji.prototype),{constructor:Ui,isHemisphereLight:!0,copy:function(t){return ji.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Hi.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Vi.prototype=Object.assign(Object.create(Hi.prototype),{constructor:Vi,isSpotLightShadow:!0,update:function(t){var e=this.camera,i=2*md.RAD2DEG*t.angle,n=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;i===e.fov&&n===e.aspect&&r===e.far||(e.fov=i,e.aspect=n,e.far=r,e.updateProjectionMatrix())}}),Gi.prototype=Object.assign(Object.create(ji.prototype),{constructor:Gi,isSpotLight:!0,copy:function(t){return ji.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Wi.prototype=Object.assign(Object.create(ji.prototype),{constructor:Wi,isPointLight:!0,copy:function(t){return ji.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Yi.prototype=Object.assign(Object.create(Hi.prototype),{constructor:Yi}),$i.prototype=Object.assign(Object.create(ji.prototype),{constructor:$i,isDirectionalLight:!0,copy:function(t){return ji.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),qi.prototype=Object.assign(Object.create(ji.prototype),{constructor:qi,isAmbientLight:!0}),Xi.prototype=Object.assign(Object.create(ji.prototype),{constructor:Xi,isRectAreaLight:!0,copy:function(t){return ji.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=ji.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}});var zd={arraySlice:function(t,e,i){return zd.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==i?i:t.length)):t.slice(e,i)},convertArray:function(t,e,i){return!t||!i&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,i){return t[e]-t[i]}for(var i=t.length,n=new Array(i),r=0;r!==i;++r)n[r]=r;return n.sort(e),n},sortedArray:function(t,e,i){for(var n=t.length,r=new t.constructor(n),o=0,s=0;s!==n;++o)for(var a=i[o]*e,h=0;h!==e;++h)r[s++]=t[a+h];return r},flattenJSON:function(t,e,i,n){for(var r=1,o=t[0];void 0!==o&&void 0===o[n];)o=t[r++];if(void 0!==o){var s=o[n];if(void 0!==s)if(Array.isArray(s))do{s=o[n],void 0!==s&&(e.push(o.time),i.push.apply(i,s)),o=t[r++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[n],void 0!==s&&(e.push(o.time),s.toArray(i,i.length)),o=t[r++]}while(void 0!==o);else do{s=o[n],void 0!==s&&(e.push(o.time),i.push(s)),o=t[r++]}while(void 0!==o)}}};Object.assign(Zi.prototype,{evaluate:function(t){var e=this,i=this.parameterPositions,n=this._cachedIndex,r=i[n],o=i[n-1];t:{e:{var s;i:{n:if(!(t<r)){for(var a=n+2;;){if(void 0===r){if(t<o)break n;return n=i.length,e._cachedIndex=n,e.afterEnd_(n-1,t,o)}if(n===a)break;if(o=r,r=i[++n],t<r)break e}s=i.length;break i}{if(t>=o)break t;var h=i[1];t<h&&(n=2,o=h);for(var a=n-2;;){if(void 0===o)return e._cachedIndex=0,e.beforeStart_(0,t,r);if(n===a)break;if(r=o,o=i[--n-1],t>=o)break e}s=n,n=0}}for(;n<s;){var l=n+s>>>1;t<i[l]?s=l:n=l+1}if(r=i[n],void 0===(o=i[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=i.length,this._cachedIndex=n,this.afterEnd_(n-1,o,t)}this._cachedIndex=n,this.intervalChanged_(n,o,r)}return this.interpolate_(n,o,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=t*n,o=0;o!==n;++o)e[o]=i[r+o];return e},interpolate_:function(t,e,i,n){throw new Error("call to abstract method")},intervalChanged_:function(t,e,i){}}),Object.assign(Zi.prototype,{beforeStart_:Zi.prototype.copySampleValue_,afterEnd_:Zi.prototype.copySampleValue_}),Ki.prototype=Object.assign(Object.create(Zi.prototype),{constructor:Ki,DefaultSettings_:{endingStart:id,endingEnd:id},intervalChanged_:function(t,e,i){var n=this.parameterPositions,r=t-2,o=t+1,s=n[r],a=n[o];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:r=t,s=2*e-i;break;case 2402:r=n.length-2,s=e+n[r]-n[r+1];break;default:r=t,s=i}if(void 0===a)switch(this.getSettings_().endingEnd){case 2401:o=t,a=2*i-e;break;case 2402:o=1,a=i+n[1]-n[0];break;default:o=t-1,a=e}var h=.5*(i-e),l=this.valueSize;this._weightPrev=h/(e-s),this._weightNext=h/(a-i),this._offsetPrev=r*l,this._offsetNext=o*l},interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,h=a-s,l=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,c=this._weightNext,f=(i-e)/(n-e),p=f*f,m=p*f,v=-d*m+2*d*p-d*f,g=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*f+1,y=(-1-c)*m+(1.5+c)*p+.5*f,b=c*m-c*p,_=0;_!==s;++_)r[_]=v*o[l+_]+g*o[h+_]+y*o[a+_]+b*o[u+_];return r}}),Qi.prototype=Object.assign(Object.create(Zi.prototype),{constructor:Qi,interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,h=a-s,l=(i-e)/(n-e),u=1-l,d=0;d!==s;++d)r[d]=o[h+d]*u+o[a+d]*l;return r}}),Ji.prototype=Object.assign(Object.create(Zi.prototype),{constructor:Ji,interpolate_:function(t,e,i,n){return this.copySampleValue_(t-1)}});var Bd;Bd={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new Ji(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Qi(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Ki(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return void console.warn("THREE.KeyframeTrackPrototype:",i)}this.createInterpolant=e},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]*=t;return this},trim:function(t,e){for(var i=this.times,n=i.length,r=0,o=n-1;r!==n&&i[r]<t;)++r;for(;-1!==o&&i[o]>e;)--o;if(++o,0!==r||o!==n){r>=o&&(o=Math.max(o,1),r=o-1);var s=this.getValueSize();this.times=zd.arraySlice(i,r,o),this.values=zd.arraySlice(this.values,r*s,o*s)}return this},validate:function(){var t=this,e=!0,i=this.getValueSize();i-Math.floor(i)!==0&&(console.error("THREE.KeyframeTrackPrototype: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,o=n.length;0===o&&(console.error("THREE.KeyframeTrackPrototype: Track is empty.",this),e=!1);for(var s=null,a=0;a!==o;a++){var h=n[a];if("number"===typeof h&&isNaN(h)){console.error("THREE.KeyframeTrackPrototype: Time is not a valid number.",t,a,h),e=!1;break}if(null!==s&&s>h){console.error("THREE.KeyframeTrackPrototype: Out of order keys.",t,a,h,s),e=!1;break}s=h}if(void 0!==r&&zd.isTypedArray(r))for(var a=0,l=r.length;a!==l;++a){var u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrackPrototype: Value is not a valid number.",t,a,u),e=!1;break}}return e},optimize:function(){for(var t=this.times,e=this.values,i=this.getValueSize(),n=2302===this.getInterpolation(),r=1,o=t.length-1,s=1;s<o;++s){var a=!1,h=t[s];if(h!==t[s+1]&&(1!==s||h!==h[0]))if(n)a=!0;else for(var l=s*i,u=l-i,d=l+i,c=0;c!==i;++c){var f=e[l+c];if(f!==e[u+c]||f!==e[d+c]){a=!0;break}}if(a){if(s!==r){t[r]=t[s];for(var p=s*i,m=r*i,c=0;c!==i;++c)e[m+c]=e[p+c]}++r}}if(o>0){t[r]=t[o];for(var p=o*i,m=r*i,c=0;c!==i;++c)e[m+c]=e[p+c];++r}return r!==t.length&&(this.times=zd.arraySlice(t,0,r),this.values=zd.arraySlice(e,0,r*i)),this}},en.prototype=Object.assign(Object.create(Bd),{constructor:en,ValueTypeName:"vector"}),nn.prototype=Object.assign(Object.create(Zi.prototype),{constructor:nn,interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,h=(i-e)/(n-e),l=a+s;a!==l;a+=4)g.slerpFlat(r,0,o,a-s,o,a,h);return r}}),rn.prototype=Object.assign(Object.create(Bd),{constructor:rn,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new nn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),on.prototype=Object.assign(Object.create(Bd),{constructor:on,ValueTypeName:"number"}),sn.prototype=Object.assign(Object.create(Bd),{constructor:sn,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),an.prototype=Object.assign(Object.create(Bd),{constructor:an,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),hn.prototype=Object.assign(Object.create(Bd),{constructor:hn,ValueTypeName:"color"}),ln.prototype=Bd,Bd.constructor=ln,Object.assign(ln,{parse:function(t){if(void 0===t.type)throw new Error("track type undefined, can not parse");var e=ln._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var i=[],n=[];zd.flattenJSON(t.keys,i,n,"value"),t.times=i,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e,i=t.constructor;if(void 0!==i.toJSON)e=i.toJSON(t);else{e={name:t.name,times:zd.convertArray(t.times,Array),values:zd.convertArray(t.values,Array)};var n=t.getInterpolation();n!==t.DefaultInterpolation&&(e.interpolation=n)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return on;case"vector":case"vector2":case"vector3":case"vector4":return en;case"color":return hn;case"quaternion":return rn;case"bool":case"boolean":return an;case"string":return sn}throw new Error("Unsupported typeName: "+t)}}),Object.assign(un,{parse:function(t){for(var e=[],i=t.tracks,n=1/(t.fps||1),r=0,o=i.length;r!==o;++r)e.push(ln.parse(i[r]).scale(n));return new un(t.name,t.duration,e)},toJSON:function(t){for(var e=[],i=t.tracks,n={name:t.name,duration:t.duration,tracks:e},r=0,o=i.length;r!==o;++r)e.push(ln.toJSON(i[r]));return n},CreateFromMorphTargetSequence:function(t,e,i,n){for(var r=e.length,o=[],s=0;s<r;s++){var a=[],h=[];a.push((s+r-1)%r,s,(s+1)%r),h.push(0,1,0);var l=zd.getKeyframeOrder(a);a=zd.sortedArray(a,1,l),h=zd.sortedArray(h,1,l),n||0!==a[0]||(a.push(r),h.push(h[0])),o.push(new on(".morphTargetInfluences["+e[s].name+"]",a,h).scale(1/i))}return new un(t,-1,o)},findByName:function(t,e){var i=t;if(!Array.isArray(t)){var n=t;i=n.geometry&&n.geometry.animations||n.animations}for(var r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,i){for(var n={},r=/^([\w-]*?)([\d]+)$/,o=0,s=t.length;o<s;o++){var a=t[o],h=a.name.match(r);if(h&&h.length>1){var l=h[1],u=n[l];u||(n[l]=u=[]),u.push(a)}}var d=[];for(var l in n)d.push(un.CreateFromMorphTargetSequence(l,n[l],e,i));return d},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var i=function(t,e,i,n,r){if(0!==i.length){var o=[],s=[];zd.flattenJSON(i,o,s,n),0!==o.length&&r.push(new t(e,o,s))}},n=[],r=t.name||"default",o=t.length||-1,s=t.fps||30,a=t.hierarchy||[],h=0;h<a.length;h++){var l=a[h].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var u={},d=0;d<l.length;d++)if(l[d].morphTargets)for(var c=0;c<l[d].morphTargets.length;c++)u[l[d].morphTargets[c]]=-1;for(var f in u){for(var p=[],m=[],c=0;c!==l[d].morphTargets.length;++c){var v=l[d];p.push(v.time),m.push(v.morphTarget===f?1:0)}n.push(new on(".morphTargetInfluence["+f+"]",p,m))}o=u.length*(s||1)}else{var g=".bones["+e[h].name+"]";i(en,g+".position",l,"pos",n),i(rn,g+".quaternion",l,"rot",n),i(en,g+".scale",l,"scl",n)}}return 0===n.length?null:new un(r,o,n)}}),Object.assign(un.prototype,{resetDuration:function(){for(var t=this,e=this.tracks,i=0,n=0,r=e.length;n!==r;++n){var o=t.tracks[n];i=Math.max(i,o.times[o.times.length-1])}this.duration=i},trim:function(){for(var t=this,e=0;e<this.tracks.length;e++)t.tracks[e].trim(0,t.duration);return this},optimize:function(){for(var t=this,e=0;e<this.tracks.length;e++)t.tracks[e].optimize();return this}}),Object.assign(dn.prototype,{load:function(t,e,i,n){var r=this;new Ri(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},setTextures:function(t){this.textures=t},parse:function(t){function e(t){return void 0===i[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),i[t]}var i=this.textures,n=new Ld[t.type];if(void 0!==t.uuid&&(n.uuid=t.uuid),void 0!==t.name&&(n.name=t.name),void 0!==t.color&&n.color.setHex(t.color),void 0!==t.roughness&&(n.roughness=t.roughness),void 0!==t.metalness&&(n.metalness=t.metalness),void 0!==t.emissive&&n.emissive.setHex(t.emissive),void 0!==t.specular&&n.specular.setHex(t.specular),void 0!==t.shininess&&(n.shininess=t.shininess),void 0!==t.clearCoat&&(n.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(n.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(n.uniforms=t.uniforms),void 0!==t.vertexShader&&(n.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(n.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(n.vertexColors=t.vertexColors),void 0!==t.fog&&(n.fog=t.fog),void 0!==t.shading&&(n.shading=t.shading),void 0!==t.blending&&(n.blending=t.blending),void 0!==t.side&&(n.side=t.side),void 0!==t.opacity&&(n.opacity=t.opacity),void 0!==t.transparent&&(n.transparent=t.transparent),void 0!==t.alphaTest&&(n.alphaTest=t.alphaTest),void 0!==t.depthTest&&(n.depthTest=t.depthTest),void 0!==t.depthWrite&&(n.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(n.colorWrite=t.colorWrite),void 0!==t.wireframe&&(n.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(n.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(n.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(n.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.skinning&&(n.skinning=t.skinning),void 0!==t.morphTargets&&(n.morphTargets=t.morphTargets),void 0!==t.size&&(n.size=t.size),void 0!==t.sizeAttenuation&&(n.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(n.map=e(t.map)),void 0!==t.alphaMap&&(n.alphaMap=e(t.alphaMap),n.transparent=!0),void 0!==t.bumpMap&&(n.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(n.bumpScale=t.bumpScale),void 0!==t.normalMap&&(n.normalMap=e(t.normalMap)),void 0!==t.normalScale){var r=t.normalScale;!1===Array.isArray(r)&&(r=[r,r]),n.normalScale=(new f).fromArray(r)}return void 0!==t.displacementMap&&(n.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(n.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(n.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(n.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(n.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(n.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(n.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(n.specularMap=e(t.specularMap)),void 0!==t.envMap&&(n.envMap=e(t.envMap)),void 0!==t.reflectivity&&(n.reflectivity=t.reflectivity),void 0!==t.lightMap&&(n.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(n.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(n.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(n.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(n.gradientMap=e(t.gradientMap)),n}}),Object.assign(cn.prototype,{load:function(t,e,i,n){var r=this;new Ri(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},parse:function(t){var e=new At,i=t.data.index;if(void 0!==i){var n=new jd[i.type](i.array);e.setIndex(new Et(n,1))}var r=t.data.attributes;for(var o in r){var s=r[o],n=new jd[s.type](s.array);e.addAttribute(o,new Et(n,s.itemSize,s.normalized))}var a=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==a)for(var h=0,l=a.length;h!==l;++h){var u=a[h];e.addGroup(u.start,u.count,u.materialIndex)}var d=t.data.boundingSphere;if(void 0!==d){var c=new y;void 0!==d.center&&c.fromArray(d.center),e.boundingSphere=new ut(c,d.radius)}return e}});var jd={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};fn.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,i=0,n=e.length;i<n;i+=2){var r=e[i],o=e[i+1];if(r.test(t))return o}return null}},Object.assign(fn.prototype,{crossOrigin:void 0,extractUrlBase:function(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(t,e,i){for(var n=this,r=[],o=0;o<t.length;++o)r[o]=n.createMaterial(t[o],e,i);return r},createMaterial:function(){var t={NoBlending:Tl,NormalBlending:Cl,AdditiveBlending:Ol,SubtractiveBlending:Pl,MultiplyBlending:Al,CustomBlending:Dl},e=new it,i=new Bi,n=new dn;return function(r,o,s){function a(t,e,n,r,a){var l,u=o+t,d=fn.Handlers.get(u);null!==d?l=d.load(u):(i.setCrossOrigin(s),l=i.load(u)),void 0!==e&&(l.repeat.fromArray(e),1!==e[0]&&(l.wrapS=yu),1!==e[1]&&(l.wrapT=yu)),void 0!==n&&l.offset.fromArray(n),void 0!==r&&("repeat"===r[0]&&(l.wrapS=yu),"mirror"===r[0]&&(l.wrapS=_u),"repeat"===r[1]&&(l.wrapT=yu),"mirror"===r[1]&&(l.wrapT=_u)),void 0!==a&&(l.anisotropy=a);var c=md.generateUUID();return h[c]=l,c}var h={},l={uuid:md.generateUUID(),type:"MeshLambertMaterial"};for(var u in r){var d=r[u];switch(u){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=d;break;case"blending":l.blending=t[d];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",u,"is no longer supported.");break;case"colorDiffuse":l.color=e.fromArray(d).getHex();break;case"colorSpecular":l.specular=e.fromArray(d).getHex();break;case"colorEmissive":l.emissive=e.fromArray(d).getHex();break;case"specularCoef":l.shininess=d;break;case"shading":"basic"===d.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===d.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===d.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=a(d,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=a(d,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=a(d,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=a(d,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=a(d,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=d;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=a(d,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=[d,d];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=a(d,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=a(d,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=a(d,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=a(d,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=_l;break;case"doubleSided":l.side=wl;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),l.opacity=d;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[u]=d;break;case"vertexColors":!0===d&&(l.vertexColors=Ml),"face"===d&&(l.vertexColors=El);break;default:console.error("THREE.Loader.createMaterial: Unsupported",u,d)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),n.setTextures(h),n.parse(l)}}()}),Object.assign(pn.prototype,{load:function(t,e,i,n){var r=this,o=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:fn.prototype.extractUrlBase(t),s=new Ri(this.manager);s.setWithCredentials(this.withCredentials),s.load(t,function(i){var n=JSON.parse(i),s=n.metadata;if(void 0!==s){var a=s.type;if(void 0!==a){if("object"===a.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if("scene"===a.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.SceneLoader instead.")}}var h=r.parse(n,o);e(h.geometry,h.materials)},i,n)},setTexturePath:function(t){this.texturePath=t},parse:function(){function t(t,e){function i(t,e){return t&1<<e}var n,r,o,s,a,h,l,u,d,c,p,m,v,g,b,_,w,x,S,k,E,M,T,C,O,P,A,D=t.faces,I=t.vertices,R=t.normals,L=t.colors,N=t.scale,F=0;if(void 0!==t.uvs){for(n=0;n<t.uvs.length;n++)t.uvs[n].length&&F++;for(n=0;n<F;n++)e.faceVertexUvs[n]=[]}for(s=0,a=I.length;s<a;)x=new y,x.x=I[s++]*N,x.y=I[s++]*N,x.z=I[s++]*N,e.vertices.push(x);for(s=0,a=D.length;s<a;)if(c=D[s++],p=i(c,0),m=i(c,1),v=i(c,3),g=i(c,4),b=i(c,5),_=i(c,6),w=i(c,7),p){if(k=new xt,k.a=D[s],k.b=D[s+1],k.c=D[s+3],E=new xt,E.a=D[s+1],E.b=D[s+2],E.c=D[s+3],s+=4,m&&(d=D[s++],k.materialIndex=d,E.materialIndex=d),o=e.faces.length,v)for(n=0;n<F;n++)for(C=t.uvs[n],e.faceVertexUvs[n][o]=[],e.faceVertexUvs[n][o+1]=[],r=0;r<4;r++)u=D[s++],P=C[2*u],A=C[2*u+1],O=new f(P,A),2!==r&&e.faceVertexUvs[n][o].push(O),0!==r&&e.faceVertexUvs[n][o+1].push(O);if(g&&(l=3*D[s++],k.normal.set(R[l++],R[l++],R[l]),E.normal.copy(k.normal)),b)for(n=0;n<4;n++)l=3*D[s++],T=new y(R[l++],R[l++],R[l]),2!==n&&k.vertexNormals.push(T),0!==n&&E.vertexNormals.push(T);if(_&&(h=D[s++],M=L[h],k.color.setHex(M),E.color.setHex(M)),w)for(n=0;n<4;n++)h=D[s++],M=L[h],2!==n&&k.vertexColors.push(new it(M)),0!==n&&E.vertexColors.push(new it(M));e.faces.push(k),e.faces.push(E)}else{if(S=new xt,S.a=D[s++],S.b=D[s++],S.c=D[s++],m&&(d=D[s++],S.materialIndex=d),o=e.faces.length,v)for(n=0;n<F;n++)for(C=t.uvs[n],e.faceVertexUvs[n][o]=[],r=0;r<3;r++)u=D[s++],P=C[2*u],A=C[2*u+1],O=new f(P,A),e.faceVertexUvs[n][o].push(O);if(g&&(l=3*D[s++],S.normal.set(R[l++],R[l++],R[l])),b)for(n=0;n<3;n++)l=3*D[s++],T=new y(R[l++],R[l++],R[l]),S.vertexNormals.push(T);if(_&&(h=D[s++],S.color.setHex(L[h])),w)for(n=0;n<3;n++)h=D[s++],S.vertexColors.push(new it(L[h]));e.faces.push(S)}}function e(t,e){var i=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var n=0,r=t.skinWeights.length;n<r;n+=i){var o=t.skinWeights[n],s=i>1?t.skinWeights[n+1]:0,a=i>2?t.skinWeights[n+2]:0,h=i>3?t.skinWeights[n+3]:0;e.skinWeights.push(new m(o,s,a,h))}if(t.skinIndices)for(var n=0,r=t.skinIndices.length;n<r;n+=i){var l=t.skinIndices[n],u=i>1?t.skinIndices[n+1]:0,d=i>2?t.skinIndices[n+2]:0,c=i>3?t.skinIndices[n+3]:0;e.skinIndices.push(new m(l,u,d,c))}e.bones=t.bones,e.bones&&e.bones.length>0&&(e.skinWeights.length!==e.skinIndices.length||e.skinIndices.length!==e.vertices.length)&&console.warn("When skinning, number of vertices ("+e.vertices.length+"), skinIndices ("+e.skinIndices.length+"), and skinWeights ("+e.skinWeights.length+") should match.")}function i(t,e){var i=t.scale;if(void 0!==t.morphTargets)for(var n=0,r=t.morphTargets.length;n<r;n++){e.morphTargets[n]={},e.morphTargets[n].name=t.morphTargets[n].name,e.morphTargets[n].vertices=[];for(var o=e.morphTargets[n].vertices,s=t.morphTargets[n].vertices,a=0,h=s.length;a<h;a+=3){var l=new y;l.x=s[a]*i,l.y=s[a+1]*i,l.z=s[a+2]*i,o.push(l)}}if(void 0!==t.morphColors&&t.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var u=e.faces,d=t.morphColors[0].colors,n=0,r=u.length;n<r;n++)u[n].color.fromArray(d,3*n)}}function n(t,e){var i=[],n=[];void 0!==t.animation&&n.push(t.animation),void 0!==t.animations&&(t.animations.length?n=n.concat(t.animations):n.push(t.animations));for(var r=0;r<n.length;r++){var o=un.parseAnimation(n[r],e.bones);o&&i.push(o)}if(e.morphTargets){var s=un.CreateClipsFromMorphTargetSequences(e.morphTargets,10);i=i.concat(s)}i.length>0&&(e.animations=i)}return function(r,o){void 0!==r.data&&(r=r.data),void 0!==r.scale?r.scale=1/r.scale:r.scale=1;var s=new kt;return t(r,s),e(r,s),i(r,s),n(r,s),s.computeFaceNormals(),s.computeBoundingSphere(),void 0===r.materials||0===r.materials.length?{geometry:s}:{geometry:s,materials:fn.prototype.initMaterials(r.materials,o,this.crossOrigin)}}}()}),Object.assign(mn.prototype,{load:function(t,e,i,n){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var r=this;new Ri(r.manager).load(t,function(i){var o=null;try{o=JSON.parse(i)}catch(e){return void 0!==n&&n(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var s=o.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())return void console.error("THREE.ObjectLoader: Can't load "+t+". Use THREE.JSONLoader instead.");r.parse(o,e)},i,n)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var i=this.parseGeometries(t.geometries),n=this.parseImages(t.images,function(){void 0!==e&&e(s)}),r=this.parseTextures(t.textures,n),o=this.parseMaterials(t.materials,r),s=this.parseObject(t.object,i,o);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseGeometries:function(t){var e=this,i={};if(void 0!==t)for(var n=new pn,r=new cn,o=0,s=t.length;o<s;o++){var a,h=t[o];switch(h.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Rd[h.type](h.width,h.height,h.widthSegments,h.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Rd[h.type](h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Rd[h.type](h.radius,h.segments,h.thetaStart,h.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Rd[h.type](h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Rd[h.type](h.radius,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Rd[h.type](h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":a=new Rd[h.type](h.radius,h.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Rd[h.type](h.innerRadius,h.outerRadius,h.thetaSegments,h.phiSegments,h.thetaStart,h.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Rd[h.type](h.radius,h.tube,h.radialSegments,h.tubularSegments,h.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Rd[h.type](h.radius,h.tube,h.tubularSegments,h.radialSegments,h.p,h.q);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Rd[h.type](h.points,h.segments,h.phiStart,h.phiLength);break;case"BufferGeometry":a=r.parse(h);break;case"Geometry":a=n.parse(h,e.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+h.type+'"');continue}a.uuid=h.uuid,void 0!==h.name&&(a.name=h.name),i[h.uuid]=a}return i},parseMaterials:function(t,e){var i={};if(void 0!==t){var n=new dn;n.setTextures(e);for(var r=0,o=t.length;r<o;r++){var s=t[r];if("MultiMaterial"===s.type){for(var a=[],h=0;h<s.materials.length;h++)a.push(n.parse(s.materials[h]));i[s.uuid]=a}else i[s.uuid]=n.parse(s)}}return i},parseAnimations:function(t){for(var e=[],i=0;i<t.length;i++){var n=un.parse(t[i]);e.push(n)}return e},parseImages:function(t,e){var i=this,n={};if(void 0!==t&&t.length>0){var r=new Ii(e),o=new Fi(r);o.setCrossOrigin(this.crossOrigin);for(var s=0,a=t.length;s<a;s++){var h=t[s],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h.url)?h.url:i.texturePath+h.url;n[h.uuid]=function(t){return i.manager.itemStart(t),o.load(t,function(){i.manager.itemEnd(t)},void 0,function(){i.manager.itemEnd(t),i.manager.itemError(t)})}(l)}}return n},parseTextures:function(t,e){function i(t,e){return"number"===typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var n={};if(void 0!==t)for(var r=0,o=t.length;r<o;r++){var s=t[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var a=new p(e[s.image]);a.needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=i(s.mapping,Ud)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.wrap&&(a.wrapS=i(s.wrap[0],Hd),a.wrapT=i(s.wrap[1],Hd)),void 0!==s.minFilter&&(a.minFilter=i(s.minFilter,Vd)),void 0!==s.magFilter&&(a.magFilter=i(s.magFilter,Vd)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),n[s.uuid]=a}return n},parseObject:function(){var t=new b;return function(e,i,n){function r(t){return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),i[t]}function o(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length;i<r;i++){var o=t[i];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),e.push(n[o])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}var s,a=this;switch(e.type){case"Scene":s=new Se,void 0!==e.background&&Number.isInteger(e.background)&&(s.background=new it(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?s.fog=new xe(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(s.fog=new we(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":s=new wt(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(s.focus=e.focus),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.filmGauge&&(s.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(s.filmOffset=e.filmOffset),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new _t(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":s=new qi(e.color,e.intensity);break;case"DirectionalLight":s=new $i(e.color,e.intensity);break;case"PointLight":s=new Wi(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new Xi(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new Gi(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new Ui(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var h=r(e.geometry),l=o(e.material);s=h.bones&&h.bones.length>0?new Pe(h,l):new jt(h,l);break;case"LOD":s=new Te;break;case"Line":s=new De(r(e.geometry),o(e.material),e.mode);break;case"LineLoop":s=new Re(r(e.geometry),o(e.material));break;case"LineSegments":s=new Ie(r(e.geometry),o(e.material));break;case"PointCloud":case"Points":s=new Ne(r(e.geometry),o(e.material));break;case"Sprite":s=new Me(o(e.material));break;case"Group":s=new Fe;break;default:s=new yt}if(s.uuid=e.uuid,void 0!==e.name&&(s.name=e.name),void 0!==e.matrix?(t.fromArray(e.matrix),t.decompose(s.position,s.quaternion,s.scale)):(void 0!==e.position&&s.position.fromArray(e.position),void 0!==e.rotation&&s.rotation.fromArray(e.rotation),void 0!==e.quaternion&&s.quaternion.fromArray(e.quaternion),void 0!==e.scale&&s.scale.fromArray(e.scale)),void 0!==e.castShadow&&(s.castShadow=e.castShadow),void 0!==e.receiveShadow&&(s.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(s.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(s.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&s.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(s.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.userData&&(s.userData=e.userData),void 0!==e.children)for(var u in e.children)s.add(a.parseObject(e.children[u],i,n));if("LOD"===e.type)for(var d=e.levels,c=0;c<d.length;c++){var f=d[c],u=s.getObjectByProperty("uuid",f.object);void 0!==u&&s.addLevel(u,f.distance)}return s}}()});var Ud={UVMapping:300,CubeReflectionMapping:du,CubeRefractionMapping:cu,EquirectangularReflectionMapping:fu,EquirectangularRefractionMapping:pu,SphericalReflectionMapping:mu,CubeUVReflectionMapping:vu,CubeUVRefractionMapping:gu},Hd={RepeatWrapping:yu,ClampToEdgeWrapping:bu,MirroredRepeatWrapping:_u},Vd={NearestFilter:wu,NearestMipMapNearestFilter:xu,NearestMipMapLinearFilter:Su,LinearFilter:ku,LinearMipMapNearestFilter:Eu,LinearMipMapLinearFilter:Mu};Object.assign(Mn.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},getPoints:function(t){var e=this;void 0===t&&(t=5);for(var i=[],n=0;n<=t;n++)i.push(e.getPoint(n/t));return i},getSpacedPoints:function(t){var e=this;void 0===t&&(t=5);for(var i=[],n=0;n<=t;n++)i.push(e.getPointAt(n/t));return i},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){var e=this;if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var i,n,r=[],o=this.getPoint(0),s=0;for(r.push(0),n=1;n<=t;n++)i=e.getPoint(n/t),s+=i.distanceTo(o),r.push(s),o=i;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var i,n=this.getLengths(),r=0,o=n.length;i=e||t*n[o-1];for(var s,a=0,h=o-1;a<=h;)if(r=Math.floor(a+(h-a)/2),(s=n[r]-i)<0)a=r+1;else{if(!(s>0)){h=r;break}h=r-1}if(r=h,n[r]===i)return r/(o-1);var l=n[r];return(r+(i-l)/(n[r+1]-l))/(o-1)},getTangent:function(t){var e=t-1e-4,i=t+1e-4;e<0&&(e=0),i>1&&(i=1);var n=this.getPoint(e);return this.getPoint(i).clone().sub(n).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var i,n,r,o=this,s=new y,a=[],h=[],l=[],u=new y,d=new b;for(i=0;i<=t;i++)n=i/t,a[i]=o.getTangentAt(n),a[i].normalize();h[0]=new y,l[0]=new y;var c=Number.MAX_VALUE,f=Math.abs(a[0].x),p=Math.abs(a[0].y),m=Math.abs(a[0].z);for(f<=c&&(c=f,s.set(1,0,0)),p<=c&&(c=p,s.set(0,1,0)),m<=c&&s.set(0,0,1),u.crossVectors(a[0],s).normalize(),h[0].crossVectors(a[0],u),l[0].crossVectors(a[0],h[0]),i=1;i<=t;i++)h[i]=h[i-1].clone(),l[i]=l[i-1].clone(),u.crossVectors(a[i-1],a[i]),u.length()>Number.EPSILON&&(u.normalize(),r=Math.acos(md.clamp(a[i-1].dot(a[i]),-1,1)),h[i].applyMatrix4(d.makeRotationAxis(u,r))),l[i].crossVectors(a[i],h[i]);if(!0===e)for(r=Math.acos(md.clamp(h[0].dot(h[t]),-1,1)),r/=t,a[0].dot(u.crossVectors(h[0],h[t]))>0&&(r=-r),i=1;i<=t;i++)h[i].applyMatrix4(d.makeRotationAxis(a[i],r*i)),l[i].crossVectors(a[i],h[i]);return{tangents:a,normals:h,binormals:l}}}),Tn.prototype=Object.create(Mn.prototype),Tn.prototype.constructor=Tn,Tn.prototype.isLineCurve=!0,Tn.prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},Tn.prototype.getPointAt=function(t){return this.getPoint(t)},Tn.prototype.getTangent=function(t){return this.v2.clone().sub(this.v1).normalize()},Cn.prototype=Object.assign(Object.create(Mn.prototype),{constructor:Cn,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Tn(e,t))},getPoint:function(t){for(var e=this,i=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=i){var o=n[r]-i,s=e.curves[r],a=s.getLength(),h=0===a?0:1-o/a;return s.getPointAt(h)}r++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){var t=this;if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],i=0,n=0,r=this.curves.length;n<r;n++)i+=t.curves[n].getLength(),e.push(i);return this.cacheLengths=e,e},getSpacedPoints:function(t){var e=this;void 0===t&&(t=40);for(var i=[],n=0;n<=t;n++)i.push(e.getPoint(n/t));return this.autoClose&&i.push(i[0]),i},getPoints:function(t){t=t||12;for(var e,i=[],n=0,r=this.curves;n<r.length;n++)for(var o=r[n],s=o&&o.isEllipseCurve?2*t:o&&o.isLineCurve?1:o&&o.isSplineCurve?t*o.points.length:t,a=o.getPoints(s),h=0;h<a.length;h++){var l=a[h];e&&e.equals(l)||(i.push(l),e=l)}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},createPointsGeometry:function(t){var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){for(var e=new kt,i=0,n=t.length;i<n;i++){var r=t[i];e.vertices.push(new y(r.x,r.y,r.z||0))}return e}}),On.prototype=Object.create(Mn.prototype),On.prototype.constructor=On,On.prototype.isEllipseCurve=!0,On.prototype.getPoint=function(t){for(var e=2*Math.PI,i=this.aEndAngle-this.aStartAngle,n=Math.abs(i)<Number.EPSILON;i<0;)i+=e;for(;i>e;)i-=e;i<Number.EPSILON&&(i=n?0:e),!0!==this.aClockwise||n||(i===e?i=-e:i-=e);var r=this.aStartAngle+t*i,o=this.aX+this.xRadius*Math.cos(r),s=this.aY+this.yRadius*Math.sin(r);if(0!==this.aRotation){var a=Math.cos(this.aRotation),h=Math.sin(this.aRotation),l=o-this.aX,u=s-this.aY;o=l*a-u*h+this.aX,s=l*h+u*a+this.aY}return new f(o,s)},Pn.prototype=Object.create(Mn.prototype),Pn.prototype.constructor=Pn,Pn.prototype.isSplineCurve=!0,Pn.prototype.getPoint=function(t){var e=this.points,i=(e.length-1)*t,n=Math.floor(i),r=i-n,o=e[0===n?n:n-1],s=e[n],a=e[n>e.length-2?e.length-1:n+1],h=e[n>e.length-3?e.length-1:n+2];return new f(vn(r,o.x,s.x,a.x,h.x),vn(r,o.y,s.y,a.y,h.y))},An.prototype=Object.create(Mn.prototype),An.prototype.constructor=An,An.prototype.getPoint=function(t){var e=this.v0,i=this.v1,n=this.v2,r=this.v3;return new f(En(t,e.x,i.x,n.x,r.x),En(t,e.y,i.y,n.y,r.y))},Dn.prototype=Object.create(Mn.prototype),Dn.prototype.constructor=Dn,Dn.prototype.getPoint=function(t){var e=this.v0,i=this.v1,n=this.v2;return new f(_n(t,e.x,i.x,n.x),_n(t,e.y,i.y,n.y))};var Gd=Object.assign(Object.create(Cn.prototype),{fromPoints:function(t){var e=this;this.moveTo(t[0].x,t[0].y);for(var i=1,n=t.length;i<n;i++)e.lineTo(t[i].x,t[i].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var i=new Tn(this.currentPoint.clone(),new f(t,e));this.curves.push(i),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,i,n){var r=new Dn(this.currentPoint.clone(),new f(t,e),new f(i,n));this.curves.push(r),this.currentPoint.set(i,n)},bezierCurveTo:function(t,e,i,n,r,o){var s=new An(this.currentPoint.clone(),new f(t,e),new f(i,n),new f(r,o));this.curves.push(s),this.currentPoint.set(r,o)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),i=new Pn(e);this.curves.push(i),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,i,n,r,o){var s=this.currentPoint.x,a=this.currentPoint.y;this.absarc(t+s,e+a,i,n,r,o)},absarc:function(t,e,i,n,r,o){this.absellipse(t,e,i,i,n,r,o)},ellipse:function(t,e,i,n,r,o,s,a){var h=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(t+h,e+l,i,n,r,o,s,a)},absellipse:function(t,e,i,n,r,o,s,a){var h=new On(t,e,i,n,r,o,s,a);if(this.curves.length>0){var l=h.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(h);var u=h.getPoint(1);this.currentPoint.copy(u)}});In.prototype=Gd,Gd.constructor=In,Rn.prototype=Object.assign(Object.create(Gd),{constructor:Rn,getPointsHoles:function(t){for(var e=this,i=[],n=0,r=this.holes.length;n<r;n++)i[n]=e.holes[n].getPoints(t);return i},extractAllPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},extractPoints:function(t){return this.extractAllPoints(t)}}),Object.assign(Ln.prototype,{moveTo:function(t,e){this.currentPath=new In,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,i,n){this.currentPath.quadraticCurveTo(t,e,i,n)},bezierCurveTo:function(t,e,i,n,r,o){this.currentPath.bezierCurveTo(t,e,i,n,r,o)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function i(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i],o=new Rn;o.curves=r.curves,e.push(o)}return e}var n=Id.isClockWise,r=this.subPaths;if(0===r.length)return[];if(!0===e)return i(r);var o,s,a,h=[];if(1===r.length)return s=r[0],a=new Rn,a.curves=s.curves,h.push(a),h;var l=!n(r[0].getPoints());l=t?!l:l;var u,d=[],c=[],f=[],p=0;c[p]=void 0,f[p]=[];for(var m=0,v=r.length;m<v;m++)s=r[m],u=s.getPoints(),o=n(u),o=t?!o:o,o?(!l&&c[p]&&p++,c[p]={s:new Rn,p:u},c[p].s.curves=s.curves,l&&p++,f[p]=[]):f[p].push({h:s,p:u[0]});if(!c[0])return i(r);if(c.length>1){for(var g=!1,y=[],b=0,_=c.length;b<_;b++)d[b]=[];for(var b=0,_=c.length;b<_;b++)for(var w=f[b],x=0;x<w.length;x++){for(var S=w[x],k=!0,E=0;E<c.length;E++)(function(t,e){for(var i=e.length,n=!1,r=i-1,o=0;o<i;r=o++){var s=e[r],a=e[o],h=a.x-s.x,l=a.y-s.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(s=e[o],h=-h,a=e[r],l=-l),t.y<s.y||t.y>a.y)continue;if(t.y===s.y){if(t.x===s.x)return!0}else{var u=l*(t.x-s.x)-h*(t.y-s.y);if(0===u)return!0;if(u<0)continue;n=!n}}else{if(t.y!==s.y)continue;if(a.x<=t.x&&t.x<=s.x||s.x<=t.x&&t.x<=a.x)return!0}}return n})(S.p,c[E].p)&&(b!==E&&y.push({froms:b,tos:E,hole:x}),k?(k=!1,d[E].push(S)):g=!0);k&&d[b].push(S)}y.length>0&&(g||(f=d))}for(var M,m=0,T=c.length;m<T;m++){a=c[m].s,h.push(a),M=f[m];for(var C=0,O=M.length;C<O;C++)a.holes.push(M[C].h)}return h}}),Object.assign(Nn.prototype,{isFont:!0,generateShapes:function(t,e,i){function n(t,e,i,n){var o=r.glyphs[t]||r.glyphs["?"];if(o){var s,a,h,l,u,d,c,f,p,m=new Ln,v=[];if(o.o)for(var g=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),y=0,b=g.length;y<b;){var _=g[y++];switch(_){case"m":s=g[y++]*e+i,a=g[y++]*e+n,m.moveTo(s,a);break;case"l":s=g[y++]*e+i,a=g[y++]*e+n,m.lineTo(s,a);break;case"q":h=g[y++]*e+i,l=g[y++]*e+n,u=g[y++]*e+i,d=g[y++]*e+n,m.quadraticCurveTo(u,d,h,l),p=v[v.length-1],p&&(p.x,p.y);break;case"b":h=g[y++]*e+i,l=g[y++]*e+n,u=g[y++]*e+i,d=g[y++]*e+n,c=g[y++]*e+i,f=g[y++]*e+n,m.bezierCurveTo(u,d,c,f,h,l),p=v[v.length-1],p&&(p.x,p.y)}}return{offsetX:o.ha*e,path:m}}}void 0===e&&(e=100),void 0===i&&(i=4);for(var r=this.data,o=function(t){for(var i=String(t).split(""),o=e/r.resolution,s=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*o,a=0,h=0,l=[],u=0;u<i.length;u++){var d=i[u];if("\n"===d)a=0,h-=s;else{var c=n(d,o,a,h);a+=c.offsetX,l.push(c.path)}}return l}(t),s=[],a=0,h=o.length;a<h;a++)Array.prototype.push.apply(s,o[a].toShapes());return s}}),Object.assign(Fn.prototype,{load:function(t,e,i,n){var r=this;new Ri(this.manager).load(t,function(t){var i;try{i=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(t.substring(65,t.length-2))}var n=r.parse(i);e&&e(n)},i,n)},parse:function(t){return new Nn(t)}});var Wd,Yd={getContext:function(){return void 0===Wd&&(Wd=new(window.AudioContext||window.webkitAudioContext)),Wd},setContext:function(t){Wd=t}};Object.assign(zn.prototype,{load:function(t,e,i,n){var r=new Ri(this.manager);r.setResponseType("arraybuffer"),r.load(t,function(t){Yd.getContext().decodeAudioData(t,function(t){e(t)})},i,n)}}),Object.assign(Bn.prototype,{update:function(){var t,e,i,n,r,o,s,a,h=new b,l=new b;return function(u){if(t!==this||e!==u.focus||i!==u.fov||n!==u.aspect*this.aspect||r!==u.near||o!==u.far||s!==u.zoom||a!==this.eyeSep){t=this,e=u.focus,i=u.fov,n=u.aspect*this.aspect,r=u.near,o=u.far,s=u.zoom;var d=u.projectionMatrix.clone();a=this.eyeSep/2;var c,f,p=a*r/e,m=r*Math.tan(md.DEG2RAD*i*.5)/s;l.elements[12]=-a,h.elements[12]=a,c=-m*n+p,f=m*n+p,d.elements[0]=2*r/(f-c),d.elements[8]=(f+c)/(f-c),this.cameraL.projectionMatrix.copy(d),c=-m*n-p,f=m*n-p,d.elements[0]=2*r/(f-c),d.elements[8]=(f+c)/(f-c),this.cameraR.projectionMatrix.copy(d)}this.cameraL.matrixWorld.copy(u.matrixWorld).multiply(l),this.cameraR.matrixWorld.copy(u.matrixWorld).multiply(h)}}()}),jn.prototype=Object.assign(Object.create(yt.prototype),{constructor:jn,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:function(){var t=new y,e=new g,i=new y,n=new y;return function(r){yt.prototype.updateMatrixWorld.call(this,r);var o=this.context.listener,s=this.up;this.matrixWorld.decompose(t,e,i),n.set(0,0,-1).applyQuaternion(e),o.positionX?(o.positionX.setValueAtTime(t.x,this.context.currentTime),o.positionY.setValueAtTime(t.y,this.context.currentTime),o.positionZ.setValueAtTime(t.z,this.context.currentTime),o.forwardX.setValueAtTime(n.x,this.context.currentTime),o.forwardY.setValueAtTime(n.y,this.context.currentTime),o.forwardZ.setValueAtTime(n.z,this.context.currentTime),o.upX.setValueAtTime(s.x,this.context.currentTime),o.upY.setValueAtTime(s.y,this.context.currentTime),o.upZ.setValueAtTime(s.z,this.context.currentTime)):(o.setPosition(t.x,t.y,t.z),o.setOrientation(n.x,n.y,n.z,s.x,s.y,s.z))}}()}),Un.prototype=Object.assign(Object.create(yt.prototype),{constructor:Un,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),t.start(0,this.startTime),this.isPlaying=!0,this.source=t,this.connect()},pause:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){var t=this;if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,i=this.filters.length;e<i;e++)t.filters[e-1].connect(t.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){var t=this;if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,i=this.filters.length;e<i;e++)t.filters[e-1].disconnect(t.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),Hn.prototype=Object.assign(Object.create(Un.prototype),{constructor:Hn,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new y;return function(e){yt.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),Object.assign(Vn.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),i=0;i<e.length;i++)t+=e[i];return t/e.length}}),Object.assign(Gn.prototype,{accumulate:function(t,e){var i=this.buffer,n=this.valueSize,r=t*n+n,o=this.cumulativeWeight;if(0===o){for(var s=0;s!==n;++s)i[r+s]=i[s];o=e}else{o+=e;var a=e/o;this._mixBufferRegion(i,r,0,a,n)}this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,i=this.buffer,n=t*e+e,r=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,r<1){var s=3*e;this._mixBufferRegion(i,n,s,1-r,e)}for(var a=e,h=e+e;a!==h;++a)if(i[a]!==i[a+e]){o.setValue(i,n);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,i=this.valueSize,n=3*i;t.getValue(e,n);for(var r=i,o=n;r!==o;++r)e[r]=e[n+r%i];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,i,n,r){if(n>=.5)for(var o=0;o!==r;++o)t[e+o]=t[i+o]},_slerp:function(t,e,i,n){g.slerpFlat(t,e,t,e,t,i,n)},_lerp:function(t,e,i,n,r){for(var o=1-n,s=0;s!==r;++s){var a=e+s;t[a]=t[a]*o+t[i+s]*n}}}),Object.assign(Wn.prototype,{getValue:function(t,e){this.bind();var i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(t,e)},setValue:function(t,e){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}),Object.assign(Yn,{Composite:Wn,create:function(t,e,i){return t&&t.isAnimationObjectGroup?new Yn.Composite(t,e,i):new Yn(t,e,i)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(/[^\w-]/g,"")},parseTrackName:function(){var t=/((?:[\w-]+[\/:])*)/,e=/([\w-\.]+)?/,i=/(?:\.([\w-]+)(?:\[(.+)\])?)?/,n=/\.([\w-]+)(?:\[(.+)\])?/,r=new RegExp("^"+t.source+e.source+i.source+n.source+"$"),o=["material","materials","bones"];return function(t){var e=r.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){var s=i.nodeName.substring(n+1);-1!==o.indexOf(s)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=s)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}}(),findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var i=function(t){for(var i=0;i<t.bones.length;i++){var n=t.bones[i];if(n.name===e)return n}return null}(t.skeleton);if(i)return i}if(t.children){var n=function(t){for(var i=0;i<t.length;i++){var r=t[i];if(r.name===e||r.uuid===e)return r;var o=n(r.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}}),Object.assign(Yn.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)t[e++]=i[n]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.node[this.propertyName]=t[e]},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,i=e.objectName,n=e.propertyName,r=e.propertyIndex;if(t||(t=Yn.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(i){var o=e.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var a=t[n];if(void 0===a){var h=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+n+" but it wasn't found.",t)}var l=this.Versioning.None;void 0!==t.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t);var u=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(var s=0;s<this.node.geometry.morphAttributes.position.length;s++)if(t.geometry.morphAttributes.position[s].name===r){r=s;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(var s=0;s<this.node.geometry.morphTargets.length;s++)if(t.geometry.morphTargets[s].name===r){r=s;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Yn.prototype,{_getValue_unbound:Yn.prototype.getValue,_setValue_unbound:Yn.prototype.setValue}),Object.assign($n.prototype,{isAnimationObjectGroup:!0,add:function(t){for(var e=arguments,i=this._objects,n=i.length,r=this.nCachedObjects_,o=this._indicesByUUID,s=this._paths,a=this._parsedPaths,h=this._bindings,l=h.length,u=0,d=arguments.length;u!==d;++u){var c=e[u],f=c.uuid,p=o[f],m=void 0;if(void 0===p){p=n++,o[f]=p,i.push(c);for(var v=0,g=l;v!==g;++v)h[v].push(new Yn(c,s[v],a[v]))}else if(p<r){m=i[p];var y=--r,b=i[y];o[b.uuid]=p,i[p]=b,o[f]=y,i[y]=c;for(var v=0,g=l;v!==g;++v){var _=h[v],w=_[y],x=_[p];_[p]=w,void 0===x&&(x=new Yn(c,s[v],a[v])),_[y]=x}}else i[p]!==m&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(t){for(var e=arguments,i=this._objects,n=this.nCachedObjects_,r=this._indicesByUUID,o=this._bindings,s=o.length,a=0,h=arguments.length;a!==h;++a){var l=e[a],u=l.uuid,d=r[u];if(void 0!==d&&d>=n){var c=n++,f=i[c];r[f.uuid]=d,i[d]=f,r[u]=c,i[c]=l;for(var p=0,m=s;p!==m;++p){var v=o[p],g=v[c],y=v[d];v[d]=g,v[c]=y}}}this.nCachedObjects_=n},uncache:function(t){for(var e=arguments,i=this._objects,n=i.length,r=this.nCachedObjects_,o=this._indicesByUUID,s=this._bindings,a=s.length,h=0,l=arguments.length;h!==l;++h){var u=e[h],d=u.uuid,c=o[d];if(void 0!==c)if(delete o[d],c<r){var f=--r,p=i[f],m=--n,v=i[m];o[p.uuid]=c,i[c]=p,o[v.uuid]=f,i[f]=v,i.pop();for(var g=0,y=a;g!==y;++g){var b=s[g],_=b[f],w=b[m];b[c]=_,b[f]=w,b.pop()}}else{var m=--n,v=i[m];o[v.uuid]=c,i[c]=v,i.pop();for(var g=0,y=a;g!==y;++g){var b=s[g];b[c]=b[m],b.pop()}}}this.nCachedObjects_=r},subscribe_:function(t,e){var i=this._bindingsIndicesByPath,n=i[t],r=this._bindings;if(void 0!==n)return r[n];var o=this._paths,s=this._parsedPaths,a=this._objects,h=a.length,l=this.nCachedObjects_,u=new Array(h);n=r.length,i[t]=n,o.push(t),s.push(e),r.push(u);for(var d=l,c=a.length;d!==c;++d){var f=a[d];u[d]=new Yn(f,t,e)}return u},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,i=e[t];if(void 0!==i){var n=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s];e[t[s]]=i,o[i]=a,o.pop(),r[i]=r[s],r.pop(),n[i]=n[s],n.pop()}}}),Object.assign(qn.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){var n=this._clip.duration,r=t._clip.duration,o=r/n,s=n/r;t.warp(1,o,e),this.warp(s,1,e)}return this},crossFadeTo:function(t,e,i){return t.crossFadeFrom(this,e,i)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,i){var n=this._mixer,r=n.time,o=this._timeScaleInterpolant,s=this.timeScale;null===o&&(o=n._lendControlInterpolant(),this._timeScaleInterpolant=o);var a=o.parameterPositions,h=o.sampleValues;return a[0]=r,a[1]=r+i,h[0]=t/s,h[1]=e/s,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,i,n){if(!this.enabled)return void this._updateWeight(t);var r=this._startTime;if(null!==r){var o=(t-r)*i;if(o<0||0===i)return;this._startTime=null,e=i*o}e*=this._updateTimeScale(t);var s=this._updateTime(e),a=this._updateWeight(t);if(a>0)for(var h=this._interpolants,l=this._propertyBindings,u=0,d=h.length;u!==d;++u)h[u].evaluate(s),l[u].accumulate(n,a)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var i=this._weightInterpolant;if(null!==i){var n=i.evaluate(t)[0];e*=n,t>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var i=this._timeScaleInterpolant;if(null!==i){e*=i.evaluate(t)[0],t>i.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var i=this._clip.duration,n=this.loop,r=this._loopCount;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=i)e=i;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{var o=2202===n;if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=i||e<0){var s=Math.floor(e/i);e-=i*s,r+=Math.abs(s);var a=this.repetitions-r;if(a<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(0===a){var h=t<0;this._setEndings(h,!h,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}if(o&&1===(1&r))return this.time=e,i-e}return this.time=e,e},_setEndings:function(t,e,i){var n=this._interpolantSettings;i?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=t?this.zeroSlopeAtStart?2401:id:2402,n.endingEnd=e?this.zeroSlopeAtEnd?2401:id:2402)},_scheduleFading:function(t,e,i){var n=this._mixer,r=n.time,o=this._weightInterpolant;null===o&&(o=n._lendControlInterpolant(),this._weightInterpolant=o);var s=o.parameterPositions,a=o.sampleValues;return s[0]=r,a[0]=e,s[1]=r+t,a[1]=i,this}}),Object.assign(Xn.prototype,c.prototype,{_bindAction:function(t,e){var i=this,n=t._localRoot||this._root,r=t._clip.tracks,o=r.length,s=t._propertyBindings,a=t._interpolants,h=n.uuid,l=this._bindingsByRootAndName,u=l[h];void 0===u&&(u={},l[h]=u);for(var d=0;d!==o;++d){var c=r[d],f=c.name,p=u[f];if(void 0!==p)s[d]=p;else{if(void 0!==(p=s[d])){null===p._cacheIndex&&(++p.referenceCount,i._addInactiveBinding(p,h,f));continue}var m=e&&e._propertyBindings[d].binding.parsedPath;p=new Gn(Yn.create(n,f,m),c.ValueTypeName,c.getValueSize()),++p.referenceCount,i._addInactiveBinding(p,h,f),s[d]=p}a[d].resultBuffer=p.buffer}},_activateAction:function(t){var e=this;if(!this._isActiveAction(t)){if(null===t._cacheIndex){var i=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,i)}for(var o=t._propertyBindings,s=0,a=o.length;s!==a;++s){var h=o[s];0===h.useCount++&&(e._lendBinding(h),h.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){var e=this;if(this._isActiveAction(t)){for(var i=t._propertyBindings,n=0,r=i.length;n!==r;++n){var o=i[n];0===--o.useCount&&(o.restoreOriginalState(),e._takeBackBinding(o))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,i){var n=this._actions,r=this._actionsByClip,o=r[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=o;else{var s=o.knownActions;t._byClipCacheIndex=s.length,s.push(t)}t._cacheIndex=n.length,n.push(t),o.actionByRoot[i]=t},_removeInactiveAction:function(t){var e=this._actions,i=e[e.length-1],n=t._cacheIndex;i._cacheIndex=n,e[n]=i,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,o=this._actionsByClip,s=o[r],a=s.knownActions,h=a[a.length-1],l=t._byClipCacheIndex;h._byClipCacheIndex=l,a[l]=h,a.pop(),t._byClipCacheIndex=null,delete s.actionByRoot[(t._localRoot||this._root).uuid],0===a.length&&delete o[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=this,i=t._propertyBindings,n=0,r=i.length;n!==r;++n){var o=i[n];0===--o.referenceCount&&e._removeInactiveBinding(o)}},_lendAction:function(t){var e=this._actions,i=t._cacheIndex,n=this._nActiveActions++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackAction:function(t){var e=this._actions,i=t._cacheIndex,n=--this._nActiveActions,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_addInactiveBinding:function(t,e,i){var n=this._bindingsByRootAndName,r=n[e],o=this._bindings;void 0===r&&(r={},n[e]=r),r[i]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,i=t.binding,n=i.rootNode.uuid,r=i.path,o=this._bindingsByRootAndName,s=o[n],a=e[e.length-1],h=t._cacheIndex;a._cacheIndex=h,e[h]=a,e.pop(),delete s[r];t:{for(var l in s)break t;delete o[n]}},_lendBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=this._nActiveBindings++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=--this._nActiveBindings,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,i=t[e];return void 0===i&&(i=new Qi(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=e,t[e]=i),i},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,i=t.__cacheIndex,n=--this._nActiveControlInterpolants,r=e[n];t.__cacheIndex=n,e[n]=t,r.__cacheIndex=i,e[i]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var i=e||this._root,n=i.uuid,r="string"===typeof t?un.findByName(i,t):t,o=null!==r?r.uuid:t,s=this._actionsByClip[o],a=null;if(void 0!==s){var h=s.actionByRoot[n];if(void 0!==h)return h;a=s.knownActions[0],null===r&&(r=a._clip)}if(null===r)return null;var l=new qn(this,r,e);return this._bindAction(l,a),this._addInactiveAction(l,o,n),l},existingAction:function(t,e){var i=e||this._root,n=i.uuid,r="string"===typeof t?un.findByName(i,t):t,o=r?r.uuid:t,s=this._actionsByClip[o];return void 0!==s?s.actionByRoot[n]||null:null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,i=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==e;++r)t[r].reset();for(var r=0;r!==n;++r)i[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,i=this._nActiveActions,n=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1,s=0;s!==i;++s){e[s]._update(n,t,r,o)}for(var a=this._bindings,h=this._nActiveBindings,s=0;s!==h;++s)a[s].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this,i=this._actions,n=t.uuid,r=this._actionsByClip,o=r[n];if(void 0!==o){for(var s=o.knownActions,a=0,h=s.length;a!==h;++a){var l=s[a];e._deactivateAction(l);var u=l._cacheIndex,d=i[i.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,d._cacheIndex=u,i[u]=d,i.pop(),e._removeInactiveBindingsForAction(l)}delete r[n]}},uncacheRoot:function(t){var e=this,i=t.uuid,n=this._actionsByClip;for(var r in n){var o=n[r].actionByRoot,s=o[i];void 0!==s&&(e._deactivateAction(s),e._removeInactiveAction(s))}var a=this._bindingsByRootAndName,h=a[i];if(void 0!==h)for(var l in h){var u=h[l];u.restoreOriginalState(),e._removeInactiveBinding(u)}},uncacheAction:function(t,e){var i=this.existingAction(t,e);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}),Zn.prototype.clone=function(){return new Zn(void 0===this.value.clone?this.value:this.value.clone())},Kn.prototype=Object.assign(Object.create(At.prototype),{constructor:Kn,isInstancedBufferGeometry:!0,addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:i})},copy:function(t){var e=this,i=t.index;null!==i&&this.setIndex(i.clone());var n=t.attributes;for(var r in n){var o=n[r];e.addAttribute(r,o.clone())}for(var s=t.groups,a=0,h=s.length;a<h;a++){var l=s[a];e.addGroup(l.start,l.count,l.materialIndex)}return this}}),Object.defineProperties(Qn.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Qn.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=r,this}}),Object.defineProperty(Jn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Jn.prototype,{isInterleavedBuffer:!0,setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.stride:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){var n=this;t*=this.stride,i*=e.stride;for(var r=0,o=this.stride;r<o;r++)n.array[t+r]=e.array[i+r];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),tr.prototype=Object.assign(Object.create(Jn.prototype),{constructor:tr,isInstancedInterleavedBuffer:!0,copy:function(t){return Jn.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),er.prototype=Object.assign(Object.create(Et.prototype),{constructor:er,isInstancedBufferAttribute:!0,copy:function(t){return Et.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(ir.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e){var i=[];return rr(t,this,i,e),i.sort(nr),i},intersectObjects:function(t,e){var i=this,n=[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var r=0,o=t.length;r<o;r++)rr(t[r],i,n,e);return n.sort(nr),n}}),Object.assign(or.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"===typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),Object.assign(sr.prototype,{set:function(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(md.clamp(t.y/this.radius,-1,1))),this}}),Object.assign(ar.prototype,{set:function(t,e,i){return this.radius=t,this.theta=e,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.radius=Math.sqrt(t.x*t.x+t.z*t.z),this.theta=Math.atan2(t.x,t.z),this.y=t.y,this}}),hr.prototype=Object.create(Ie.prototype),hr.prototype.constructor=hr,hr.prototype.update=function(){var t=new y,e=new y,i=new dt;return function(){var n=this,r=["a","b","c"];this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);var o=this.object.matrixWorld,s=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var h=a.vertices,l=a.faces,u=0,d=0,c=l.length;d<c;d++)for(var f=l[d],p=0,m=f.vertexNormals.length;p<m;p++){var v=h[f[r[p]]],g=f.vertexNormals[p];t.copy(v).applyMatrix4(o),e.copy(g).applyMatrix3(i).normalize().multiplyScalar(n.size).add(t),s.setXYZ(u,t.x,t.y,t.z),u+=1,s.setXYZ(u,e.x,e.y,e.z),u+=1}else if(a&&a.isBufferGeometry)for(var y=a.attributes.position,b=a.attributes.normal,u=0,p=0,m=y.count;p<m;p++)t.set(y.getX(p),y.getY(p),y.getZ(p)).applyMatrix4(o),e.set(b.getX(p),b.getY(p),b.getZ(p)),e.applyMatrix3(i).normalize().multiplyScalar(n.size).add(t),s.setXYZ(u,t.x,t.y,t.z),u+=1,s.setXYZ(u,e.x,e.y,e.z),u+=1;s.needsUpdate=!0}}(),ur.prototype=Object.create(Ie.prototype),ur.prototype.constructor=ur,ur.prototype.onBeforeRender=function(){var t=new y,e=new b,i=new b;return function(){var n=this.bones,r=this.geometry,o=r.getAttribute("position");i.getInverse(this.root.matrixWorld);for(var s=0,a=0;s<n.length;s++){var h=n[s];h.parent&&h.parent.isBone&&(e.multiplyMatrices(i,h.matrixWorld),t.setFromMatrixPosition(e),o.setXYZ(a,t.x,t.y,t.z),e.multiplyMatrices(i,h.parent.matrixWorld),t.setFromMatrixPosition(e),o.setXYZ(a+1,t.x,t.y,t.z),a+=2)}r.getAttribute("position").needsUpdate=!0}}(),dr.prototype=Object.create(yt.prototype),dr.prototype.constructor=dr,dr.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},dr.prototype.update=function(){var t=new y,e=new it,i=new it;return function(){var n=this.children[0],r=n.geometry.getAttribute("color");e.copy(this.light.color),i.copy(this.light.groundColor);for(var o=0,s=r.count;o<s;o++){var a=o<s/2?e:i;r.setXYZ(o,a.r,a.g,a.b)}n.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()),r.needsUpdate=!0}}(),cr.prototype=Object.create(Ie.prototype),cr.prototype.constructor=cr,cr.prototype.update=function(){var t=new y,e=new y,i=new dt;return function(){var n=this;this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,o=this.geometry.attributes.position,s=this.object.geometry,a=s.vertices,h=s.faces,l=0,u=0,d=h.length;u<d;u++){var c=h[u],f=c.normal;t.copy(a[c.a]).add(a[c.b]).add(a[c.c]).divideScalar(3).applyMatrix4(r),e.copy(f).applyMatrix3(i).normalize().multiplyScalar(n.size).add(t),o.setXYZ(l,t.x,t.y,t.z),l+=1,o.setXYZ(l,e.x,e.y,e.z),l+=1}o.needsUpdate=!0}}(),fr.prototype=Object.create(Ie.prototype),fr.prototype.constructor=fr,fr.prototype.update=function(){function t(t,o,s,a){n.set(o,s,a).unproject(r);var h=i[t];if(void 0!==h)for(var l=e.getAttribute("position"),u=0,d=h.length;u<d;u++)l.setXYZ(h[u],n.x,n.y,n.z)}var e,i,n=new y,r=new bt;return function(){e=this.geometry,i=this.pointMap;r.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-1,-1,-1),t("n2",1,-1,-1),t("n3",-1,1,-1),t("n4",1,1,-1),t("f1",-1,-1,1),t("f2",1,-1,1),t("f3",-1,1,1),t("f4",1,1,1),t("u1",.7,1.1,-1),t("u2",-.7,1.1,-1),t("u3",0,2,-1),t("cf1",-1,0,1),t("cf2",1,0,1),t("cf3",0,-1,1),t("cf4",0,1,1),t("cn1",-1,0,-1),t("cn2",1,0,-1),t("cn3",0,-1,-1),t("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}();var $d=new y,qd=new pr,Xd=new pr,Zd=new pr;mr.prototype=Object.create(Mn.prototype),mr.prototype.constructor=mr,mr.prototype.getPoint=function(t){var e=this.points,i=e.length,n=(i-(this.closed?0:1))*t,r=Math.floor(n),o=n-r;this.closed?r+=r>0?0:(Math.floor(Math.abs(r)/e.length)+1)*e.length:0===o&&r===i-1&&(r=i-2,o=1);var s,a,h,l;if(this.closed||r>0?s=e[(r-1)%i]:($d.subVectors(e[0],e[1]).add(e[0]),s=$d),a=e[r%i],h=e[(r+1)%i],this.closed||r+2<i?l=e[(r+2)%i]:($d.subVectors(e[i-1],e[i-2]).add(e[i-1]),l=$d),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var u="chordal"===this.type?.5:.25,d=Math.pow(s.distanceToSquared(a),u),c=Math.pow(a.distanceToSquared(h),u),f=Math.pow(h.distanceToSquared(l),u);c<1e-4&&(c=1),d<1e-4&&(d=c),f<1e-4&&(f=c),qd.initNonuniformCatmullRom(s.x,a.x,h.x,l.x,d,c,f),Xd.initNonuniformCatmullRom(s.y,a.y,h.y,l.y,d,c,f),Zd.initNonuniformCatmullRom(s.z,a.z,h.z,l.z,d,c,f)}else if("catmullrom"===this.type){var p=void 0!==this.tension?this.tension:.5;qd.initCatmullRom(s.x,a.x,h.x,l.x,p),Xd.initCatmullRom(s.y,a.y,h.y,l.y,p),Zd.initCatmullRom(s.z,a.z,h.z,l.z,p)}return new y(qd.calc(o),Xd.calc(o),Zd.calc(o))},Mn.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Mn.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},vr.prototype=Object.create(mr.prototype),Object.assign(vr.prototype,{initFromArray:function(t){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(t){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(t){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),ur.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(nt.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(lt.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),zt.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},md.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(dt.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t,e,i){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(t,e,i){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(b.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new y),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t,e,i){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(t,e,i){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,i,n,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,n,i,r,o)}}),ct.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},g.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(Ft.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(Rn.prototype,{extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new oi(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new mi(this,t)}}),Object.assign(f.prototype,{fromAttribute:function(t,e,i){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)}}),Object.assign(y.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,i){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)}}),Object.assign(m.prototype,{fromAttribute:function(t,e,i){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)}}),kt.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(yt.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)}}),Object.defineProperties(yt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Te.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Ce.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Mn.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),wt.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(ji.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Et.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(At.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(At.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Zn.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(st.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new it}}}),Object.defineProperties(Ci.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(at.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(_e.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(_e.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=t}}}),Object.defineProperties(pt.prototype,{cullFace:{get:function(){return this.renderReverseSided?ml:pl},set:function(t){var e=t!==pl;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+e+"."),this.renderReverseSided=e}}}),Object.defineProperties(v.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Un.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new zn).load(t,function(t){e.setBuffer(t)}),this},Vn.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};var Kd=function(t){this.name=t,this._dict={}},Qd={names:{}};Kd.prototype.add=function(t,e){this._dict[Fr(t)]=e},Kd.prototype.get=function(t){return this._dict[Fr(t)]},Qd.names.get=function(){return Object.keys(this._dict)},Object.defineProperties(Kd.prototype,Qd);var Jd=function(){this.activeWorkerCount=0,this._funcDict={},this._depsDict={},this._blobDict={}};Jd.prototype.add=function(t,e,i){this._funcDict[t]=e,this._depsDict[t]=i},Jd.prototype.get=function(t){return this._blobDict[t]||(this._blobDict[t]=Ur(this._funcDict[t],this._depsDict[t])),this._blobDict[t]};var tc,ec,ic,nc,rc,oc,sc,ac,hc,lc,uc,dc,cc,fc,pc,mc,vc,gc,yc,bc,_c,wc,xc,Sc,kc,Ec,Mc,Tc,Cc,Oc,Pc,Ac,Dc,Ic,Rc,Lc,Nc,Fc,zc,Bc,jc,Uc,Hc,Vc,Gc,Wc,Yc,$c,qc,Xc,Zc,Kc,Qc,Jc,tf,ef,nf,rf,of,sf,af,hf,lf,uf,df,cf,ff,pf,mf,vf,gf,yf,bf,_f,wf,xf,Sf,kf,Ef,Mf="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),Tf=new Array(36),Cf=[].slice;wf=function(){var t,e,i,n,r;for(t={},r="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),n=0,e=r.length;n<e;n++)i=r[n],t["[object "+i+"]"]=i.toLowerCase();return function(e){var i;return i=Object.prototype.toString.call(e),t[i]||"object"}}(),Gc=function(t,e,i){return null==e&&(e=0),null==i&&(i=1),t<e&&(t=e),t>i&&(t=i),t},xf=function(t){return t.length>=3?[].slice.call(t):t[0]},bc=function(t){var e,i;for(t._clipped=!1,t._unclipped=t.slice(0),e=i=0;i<3;e=++i)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]<0&&(t[e]=0),t[e]>255&&(t[e]=255)):3===e&&(t[e]<0&&(t[e]=0),t[e]>1&&(t[e]=1));return t._clipped||delete t._unclipped,t},nc=Math.PI,vf=Math.round,wc=Math.cos,Mc=Math.floor,Jc=Math.pow,Wc=Math.log,yf=Math.sin,bf=Math.sqrt,cc=Math.atan2,qc=Math.max,dc=Math.abs,sc=2*nc,rc=nc/3,ec=nc/180,oc=180/nc,yc=function(){return arguments[0]instanceof tc?arguments[0]:function(t,e,i){i.prototype=t.prototype;var n=new i,r=t.apply(n,e);return Object(r)===r?r:n}(tc,arguments,function(){})},uc=[],yc.version="1.3.3",lc={},ac=[],hc=!1,tc=function(){function t(){var t,e,i,n,r,o,s,a,h,l=arguments;for(o=this,e=[],a=0,n=arguments.length;a<n;a++)null!=(t=l[a])&&e.push(t);if(s=e[e.length-1],null!=lc[s])o._rgb=bc(lc[s](xf(e.slice(0,-1))));else{for(hc||(ac=ac.sort(function(t,e){return e.p-t.p}),hc=!0),h=0,r=ac.length;h<r&&(i=ac[h],!(s=i.test.apply(i,e)));h++);s&&(o._rgb=bc(lc[s].apply(lc,e)))}null==o._rgb&&console.warn("unknown format: "+e),null==o._rgb&&(o._rgb=[0,0,0]),3===o._rgb.length&&o._rgb.push(1)}return t.prototype.toString=function(){return this.hex()},t}(),yc._input=lc,yc.brewer=vc={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var t,e;e=[];for(t in vc)e.push(vc[t.toLowerCase()]=vc[t])}(),Sf={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},yc.colors=Sf,Bc=function(){var t,e,i,n,r,o,s,a,h;return e=xf(arguments),r=e[0],t=e[1],i=e[2],a=(r+16)/116,s=isNaN(t)?a:a+t/500,h=isNaN(i)?a:a-i/200,a=ic.Yn*jc(a),s=ic.Xn*jc(s),h=ic.Zn*jc(h),o=Ef(3.2404542*s-1.5371385*a-.4985314*h),n=Ef(-.969266*s+1.8760108*a+.041556*h),i=Ef(.0556434*s-.2040259*a+1.0572252*h),[o,n,i,e.length>3?e[3]:1]},Ef=function(t){return 255*(t<=.00304?12.92*t:1.055*Jc(t,1/2.4)-.055)},jc=function(t){return t>ic.t1?t*t*t:ic.t2*(t-ic.t0)},ic={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},hf=function(){var t,e,i,n,r,o,s,a;return n=xf(arguments),i=n[0],e=n[1],t=n[2],r=ff(i,e,t),o=r[0],s=r[1],a=r[2],[116*s-16,500*(o-s),200*(s-a)]},pf=function(t){return(t/=255)<=.04045?t/12.92:Jc((t+.055)/1.055,2.4)},kf=function(t){return t>ic.t3?Jc(t,1/3):t/ic.t2+ic.t0},ff=function(){var t,e,i,n,r,o,s;return n=xf(arguments),i=n[0],e=n[1],t=n[2],i=pf(i),e=pf(e),t=pf(t),r=kf((.4124564*i+.3575761*e+.1804375*t)/ic.Xn),o=kf((.2126729*i+.7151522*e+.072175*t)/ic.Yn),s=kf((.0193339*i+.119192*e+.9503041*t)/ic.Zn),[r,o,s]},yc.lab=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,r=t.apply(n,e);return Object(r)===r?r:n}(tc,Cf.call(arguments).concat(["lab"]),function(){})},lc.lab=Bc,tc.prototype.lab=function(){return hf(this._rgb)},fc=function(t){var e,i,n,r,o,s,a,h,l,u,d;return t=function(){var e,i,n;for(n=[],i=0,e=t.length;i<e;i++)r=t[i],n.push(yc(r));return n}(),2===t.length?(l=function(){var e,i,n;for(n=[],i=0,e=t.length;i<e;i++)r=t[i],n.push(r.lab());return n}(),o=l[0],s=l[1],e=function(t){var e,i;return i=function(){var i,n;for(n=[],e=i=0;i<=2;e=++i)n.push(o[e]+t*(s[e]-o[e]));return n}(),yc.lab.apply(yc,i)}):3===t.length?(u=function(){var e,i,n;for(n=[],i=0,e=t.length;i<e;i++)r=t[i],n.push(r.lab());return n}(),o=u[0],s=u[1],a=u[2],e=function(t){var e,i;return i=function(){var i,n;for(n=[],e=i=0;i<=2;e=++i)n.push((1-t)*(1-t)*o[e]+2*(1-t)*t*s[e]+t*t*a[e]);return n}(),yc.lab.apply(yc,i)}):4===t.length?(d=function(){var e,i,n;for(n=[],i=0,e=t.length;i<e;i++)r=t[i],n.push(r.lab());return n}(),o=d[0],s=d[1],a=d[2],h=d[3],e=function(t){var e,i;return i=function(){var i,n;for(n=[],e=i=0;i<=2;e=++i)n.push((1-t)*(1-t)*(1-t)*o[e]+3*(1-t)*(1-t)*t*s[e]+3*(1-t)*t*t*a[e]+t*t*t*h[e]);return n}(),yc.lab.apply(yc,i)}):5===t.length&&(i=fc(t.slice(0,3)),n=fc(t.slice(2,5)),e=function(t){return t<.5?i(2*t):n(2*(t-.5))}),e},yc.bezier=function(t){var e;return e=fc(t),e.scale=function(){return yc.scale(e)},e},yc.cubehelix=function(t,e,i,n,r){var o,s,a;return null==t&&(t=300),null==e&&(e=-1.5),null==i&&(i=1),null==n&&(n=1),null==r&&(r=[0,1]),o=0,"array"===wf(r)?s=r[1]-r[0]:(s=0,r=[r,r]),a=function(a){var h,l,u,d,c,f,p,m,v;return h=sc*((t+120)/360+e*a),p=Jc(r[0]+s*a,n),f=0!==o?i[0]+a*o:i,l=f*p*(1-p)/2,d=wc(h),v=yf(h),m=p+l*(-.14861*d+1.78277*v),c=p+l*(-.29227*d-.90649*v),u=p+l*(1.97294*d),yc(bc([255*m,255*c,255*u]))},a.start=function(e){return null==e?t:(t=e,a)},a.rotations=function(t){return null==t?e:(e=t,a)},a.gamma=function(t){return null==t?n:(n=t,a)},a.hue=function(t){return null==t?i:(i=t,"array"===wf(i)?0===(o=i[1]-i[0])&&(i=i[1]):o=0,a)},a.lightness=function(t){return null==t?r:("array"===wf(t)?(r=t,s=t[1]-t[0]):(r=[t,t],s=0),a)},a.scale=function(){return yc.scale(a)},a.hue(i),a},yc.random=function(){var t,e,i;for(e="0123456789abcdef",t="#",i=0;i<6;++i)t+=e.charAt(Mc(16*Math.random()));return new tc(t)},yc.average=function(t,e){var i,n,r,o,s,a,h,l,u,d,c,f,p;null==e&&(e="rgb"),u=t.length,t=t.map(function(t){return yc(t)}),h=t.splice(0,1)[0],f=h.get(e),o=[],s=0,a=0;for(l in f)f[l]=f[l]||0,o.push(isNaN(f[l])?0:1),"h"!==e.charAt(l)||isNaN(f[l])||(i=f[l]/180*nc,s+=wc(i),a+=yf(i));for(n=h.alpha(),c=0,d=t.length;c<d;c++){r=t[c],p=r.get(e),n+=r.alpha();for(l in f)isNaN(p[l])||(f[l]+=p[l],o[l]+=1,"h"===e.charAt(l)&&(i=f[l]/180*nc,s+=wc(i),a+=yf(i)))}for(l in f)if(f[l]=f[l]/o[l],"h"===e.charAt(l)){for(i=cc(a/o[l],s/o[l])/nc*180;i<0;)i+=360;for(;i>=360;)i-=360;f[l]=i}return yc(f,e).alpha(n/u)},lc.rgb=function(){var t,e,i,n;e=xf(arguments),i=[];for(t in e)n=e[t],i.push(n);return i},yc.rgb=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,r=t.apply(n,e);return Object(r)===r?r:n}(tc,Cf.call(arguments).concat(["rgb"]),function(){})},tc.prototype.rgb=function(t){return null==t&&(t=!0),t?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},tc.prototype.rgba=function(t){return null==t&&(t=!0),t?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},ac.push({p:3,test:function(t){var e;return e=xf(arguments),"array"===wf(e)&&3===e.length?"rgb":4===e.length&&"number"===wf(e[3])&&e[3]>=0&&e[3]<=1?"rgb":void 0}}),Cc=function(t){var e,i,n,r,o,s;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),s=parseInt(t,16),r=s>>16,n=s>>8&255,i=255&s,[r,n,i,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),s=parseInt(t,16),r=s>>24&255,n=s>>16&255,i=s>>8&255,e=vf((255&s)/255*100)/100,[r,n,i,e];if(null!=lc.css&&(o=lc.css(t)))return o;throw"unknown color: "+t},rf=function(t,e){var i,n,r,o,s,a,h;return null==e&&(e="rgb"),s=t[0],r=t[1],n=t[2],i=t[3],s=Math.round(s),r=Math.round(r),n=Math.round(n),h=s<<16|r<<8|n,a="000000"+h.toString(16),a=a.substr(a.length-6),o="0"+vf(255*i).toString(16),o=o.substr(o.length-2),"#"+function(){switch(e.toLowerCase()){case"rgba":return a+o;case"argb":return o+a;default:return a}}()},lc.hex=function(t){return Cc(t)},yc.hex=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,r=t.apply(n,e);return Object(r)===r?r:n}(tc,Cf.call(arguments).concat(["hex"]),function(){})},tc.prototype.hex=function(t){return null==t&&(t="rgb"),rf(this._rgb,t)},ac.push({p:4,test:function(t){if(1===arguments.length&&"string"===wf(t))return"hex"}}),Ac=function(){var t,e,i,n,r,o,s,a,h,l,u,d,c,f;if(t=xf(arguments),r=t[0],u=t[1],s=t[2],0===u)h=n=e=255*s;else{for(f=[0,0,0],i=[0,0,0],c=s<.5?s*(1+u):s+u-s*u,d=2*s-c,r/=360,f[0]=r+1/3,f[1]=r,f[2]=r-1/3,o=a=0;a<=2;o=++a)f[o]<0&&(f[o]+=1),f[o]>1&&(f[o]-=1),6*f[o]<1?i[o]=d+6*(c-d)*f[o]:2*f[o]<1?i[o]=c:3*f[o]<2?i[o]=d+(c-d)*(2/3-f[o])*6:i[o]=d;l=[vf(255*i[0]),vf(255*i[1]),vf(255*i[2])],h=l[0],n=l[1],e=l[2]}return t.length>3?[h,n,e,t[3]]:[h,n,e]},sf=function(t,e,i){var n,r,o,s,a;return void 0!==t&&t.length>=3&&(s=t,t=s[0],e=s[1],i=s[2]),t/=255,e/=255,i/=255,o=Math.min(t,e,i),qc=Math.max(t,e,i),r=(qc+o)/2,qc===o?(a=0,n=Number.NaN):a=r<.5?(qc-o)/(qc+o):(qc-o)/(2-qc-o),t===qc?n=(e-i)/(qc-o):e===qc?n=2+(i-t)/(qc-o):i===qc&&(n=4+(t-e)/(qc-o)),n*=60,n<0&&(n+=360),[n,a,r]},yc.hsl=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,r=t.apply(n,e);return Object(r)===r?r:n}(tc,Cf.call(arguments).concat(["hsl"]),function(){})},lc.hsl=Ac,tc.prototype.hsl=function(){return sf(this._rgb)},Dc=function(){var t,e,i,n,r,o,s,a,h,l,u,d,c,f,p,m,v,g;if(t=xf(arguments),r=t[0],m=t[1],g=t[2],g*=255,0===m)h=n=e=g;else switch(360===r&&(r=0),r>360&&(r-=360),r<0&&(r+=360),r/=60,o=Mc(r),i=r-o,s=g*(1-m),a=g*(1-m*i),v=g*(1-m*(1-i)),o){case 0:l=[g,v,s],h=l[0],n=l[1],e=l[2];break;case 1:u=[a,g,s],h=u[0],n=u[1],e=u[2];break;case 2:d=[s,g,v],h=d[0],n=d[1],e=d[2];break;case 3:c=[s,a,g],h=c[0],n=c[1],e=c[2];break;case 4:f=[v,s,g],h=f[0],n=f[1],e=f[2];break;case 5:p=[g,s,a],h=p[0],n=p[1],e=p[2]}return[h,n,e,t.length>3?t[3]:1]},af=function(){var t,e,i,n,r,o,s,a,h;return s=xf(arguments),o=s[0],i=s[1],t=s[2],r=Math.min(o,i,t),qc=Math.max(o,i,t),e=qc-r,h=qc/255,0===qc?(n=Number.NaN,a=0):(a=e/qc,o===qc&&(n=(i-t)/e),i===qc&&(n=2+(t-o)/e),t===qc&&(n=4+(o-i)/e),(n*=60)<0&&(n+=360)),[n,a,h]},yc.hsv=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,r=t.apply(n,e);return Object(r)===r?r:n}(tc,Cf.call(arguments).concat(["hsv"]),function(){})},lc.hsv=Dc,tc.prototype.hsv=function(){return af(this._rgb)},Kc=function(t){var e,i,n;return"number"===wf(t)&&t>=0&&t<=16777215?(n=t>>16,i=t>>8&255,e=255&t,[n,i,e,1]):(console.warn("unknown num color: "+t),[0,0,0,1])},df=function(){var t,e,i,n;return n=xf(arguments),i=n[0],e=n[1],t=n[2],(i<<16)+(e<<8)+t},yc.num=function(t){return new tc(t,"num")},tc.prototype.num=function(t){return null==t&&(t="rgb"),df(this._rgb,t)},lc.num=Kc,ac.push({p:1,test:function(t){if(1===arguments.length&&"number"===wf(t)&&t>=0&&t<=16777215)return"num"}}),Tc=function(){var t,e,i,n,r,o,s,a,h,l,u,d,c,f,p,m,v,g,y,b;if(i=xf(arguments),a=i[0],r=i[1],e=i[2],r/=100,s=s/100*255,t=255*r,0===r)d=s=n=e;else switch(360===a&&(a=0),a>360&&(a-=360),a<0&&(a+=360),a/=60,h=Mc(a),o=a-h,l=e*(1-r),u=l+t*(1-o),y=l+t*o,b=l+t,h){case 0:c=[b,y,l],d=c[0],s=c[1],n=c[2];break;case 1:f=[u,b,l],d=f[0],s=f[1],n=f[2];break;case 2:p=[l,b,y],d=p[0],s=p[1],n=p[2];break;case 3:m=[l,u,b],d=m[0],s=m[1],n=m[2];break;case 4:v=[y,l,b],d=v[0],s=v[1],n=v[2];break;case 5:g=[b,l,u],d=g[0],s=g[1],n=g[2]}return[d,s,n,i.length>3?i[3]:1]},nf=function(){var t,e,i,n,r,o,s,a,h;return h=xf(arguments),a=h[0],r=h[1],e=h[2],s=Math.min(a,r,e),qc=Math.max(a,r,e),n=qc-s,i=100*n/255,t=s/(255-n)*100,0===n?o=Number.NaN:(a===qc&&(o=(r-e)/n),r===qc&&(o=2+(e-a)/n),e===qc&&(o=4+(a-r)/n),(o*=60)<0&&(o+=360)),[o,i,t]},yc.hcg=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,r=t.apply(n,e);return Object(r)===r?r:n}(tc,Cf.call(arguments).concat(["hcg"]),function(){})},lc.hcg=Tc,tc.prototype.hcg=function(){return nf(this._rgb)},xc=function(t){var e,i,n,r,o,s,a,h;if(t=t.toLowerCase(),null!=yc.colors&&yc.colors[t])return Cc(yc.colors[t]);if(o=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(a=o.slice(1,4),r=s=0;s<=2;r=++s)a[r]=+a[r];a[3]=1}else if(o=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(a=o.slice(1,5),r=h=0;h<=3;r=++h)a[r]=+a[r];else if(o=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(a=o.slice(1,4),r=e=0;e<=2;r=++e)a[r]=vf(2.55*a[r]);a[3]=1}else if(o=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(a=o.slice(1,5),r=i=0;i<=2;r=++i)a[r]=vf(2.55*a[r]);a[3]=+a[3]}else(o=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(n=o.slice(1,4),n[1]*=.01,n[2]*=.01,a=Ac(n),a[3]=1):(o=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(n=o.slice(1,4),n[1]*=.01,n[2]*=.01,a=Ac(n),a[3]=+o[4]);return a},ef=function(t){var e;return e=t[3]<1?"rgba":"rgb","rgb"===e?e+"("+t.slice(0,3).map(vf).join(",")+")":"rgba"===e?e+"("+t.slice(0,3).map(vf).join(",")+","+t[3]+")":void 0},mf=function(t){return vf(100*t)/100},Pc=function(t,e){var i;return i=e<1?"hsla":"hsl",t[0]=mf(t[0]||0),t[1]=mf(100*t[1])+"%",t[2]=mf(100*t[2])+"%","hsla"===i&&(t[3]=e),i+"("+t.join(",")+")"},lc.css=function(t){return xc(t)},yc.css=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,r=t.apply(n,e);return Object(r)===r?r:n}(tc,Cf.call(arguments).concat(["css"]),function(){})},tc.prototype.css=function(t){return null==t&&(t="rgb"),"rgb"===t.slice(0,3)?ef(this._rgb):"hsl"===t.slice(0,3)?Pc(this.hsl(),this.alpha()):void 0},lc.named=function(t){return Cc(Sf[t])},ac.push({p:5,test:function(t){if(1===arguments.length&&null!=Sf[t])return"named"}}),tc.prototype.name=function(t){var e,i;arguments.length&&(Sf[t]&&(this._rgb=Cc(Sf[t])),this._rgb[3]=1),e=this.hex();for(i in Sf)if(e===Sf[i])return i;return e},Uc=function(){var t,e,i,n;return n=xf(arguments),i=n[0],t=n[1],e=n[2],e*=ec,[i,wc(e)*t,yf(e)*t]},Hc=function(){var t,e,i,n,r,o,s,a,h,l,u;return i=xf(arguments),a=i[0],r=i[1],s=i[2],l=Uc(a,r,s),t=l[0],e=l[1],n=l[2],u=Bc(t,e,n),h=u[0],o=u[1],n=u[2],[h,o,n,i.length>3?i[3]:1]},zc=function(){var t,e,i,n,r,o;return o=xf(arguments),r=o[0],t=o[1],e=o[2],i=bf(t*t+e*e),n=(cc(e,t)*oc+360)%360,0===vf(1e4*i)&&(n=Number.NaN),[r,i,n]},lf=function(){var t,e,i,n,r,o,s;return o=xf(arguments),r=o[0],i=o[1],e=o[2],s=hf(r,i,e),n=s[0],t=s[1],e=s[2],zc(n,t,e)},yc.lch=function(){var t;return t=xf(arguments),new tc(t,"lch")},yc.hcl=function(){var t;return t=xf(arguments),new tc(t,"hcl")},lc.lch=Hc,lc.hcl=function(){var t,e,i,n;return n=xf(arguments),e=n[0],t=n[1],i=n[2],Hc([i,t,e])},tc.prototype.lch=function(){return lf(this._rgb)},tc.prototype.hcl=function(){return lf(this._rgb).reverse()},tf=function(t){var e,i,n,r,o,s,a,h,l;return null==t&&(t="rgb"),h=xf(arguments),a=h[0],r=h[1],e=h[2],a/=255,r/=255,e/=255,o=1-Math.max(a,Math.max(r,e)),n=o<1?1/(1-o):0,i=(1-a-o)*n,s=(1-r-o)*n,l=(1-e-o)*n,[i,s,l,o]},_c=function(){var t,e,i,n,r,o,s,a,h;return e=xf(arguments),n=e[0],s=e[1],h=e[2],o=e[3],t=e.length>4?e[4]:1,1===o?[0,0,0,t]:(a=n>=1?0:255*(1-n)*(1-o),r=s>=1?0:255*(1-s)*(1-o),i=h>=1?0:255*(1-h)*(1-o),[a,r,i,t])},lc.cmyk=function(){return _c(xf(arguments))},yc.cmyk=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,r=t.apply(n,e);return Object(r)===r?r:n}(tc,Cf.call(arguments).concat(["cmyk"]),function(){})},tc.prototype.cmyk=function(){return tf(this._rgb)},lc.gl=function(){var t,e,i,n,r;for(n=function(){var t,i;t=xf(arguments),i=[];for(e in t)r=t[e],i.push(r);return i}.apply(this,arguments),t=i=0;i<=2;t=++i)n[t]*=255;return n},yc.gl=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,r=t.apply(n,e);return Object(r)===r?r:n}(tc,Cf.call(arguments).concat(["gl"]),function(){})},tc.prototype.gl=function(){var t;return t=this._rgb,[t[0]/255,t[1]/255,t[2]/255,t[3]]},uf=function(t,e,i){var n;return n=xf(arguments),t=n[0],e=n[1],i=n[2],t=Yc(t),e=Yc(e),i=Yc(i),.2126*t+.7152*e+.0722*i},Yc=function(t){return t/=255,t<=.03928?t/12.92:Jc((t+.055)/1.055,2.4)},uc=[],Ic=function(t,e,i,n){var r,o,s,a;for(null==i&&(i=.5),null==n&&(n="rgb"),"object"!==wf(t)&&(t=yc(t)),"object"!==wf(e)&&(e=yc(e)),s=0,o=uc.length;s<o;s++)if(r=uc[s],n===r[0]){a=r[1](t,e,i,n);break}if(null==a)throw"color mode "+n+" is not supported";return a.alpha(t.alpha()+i*(e.alpha()-t.alpha()))},yc.interpolate=Ic,tc.prototype.interpolate=function(t,e,i){return Ic(this,t,e,i)},yc.mix=Ic,tc.prototype.mix=tc.prototype.interpolate,Fc=function(t,e,i,n){var r,o;return r=t._rgb,o=e._rgb,new tc(r[0]+i*(o[0]-r[0]),r[1]+i*(o[1]-r[1]),r[2]+i*(o[2]-r[2]),n)},uc.push(["rgb",Fc]),tc.prototype.luminance=function(t,e){var i,n,r,o;return null==e&&(e="rgb"),arguments.length?(0===t?this._rgb=[0,0,0,this._rgb[3]]:1===t?this._rgb=[255,255,255,this._rgb[3]]:(n=1e-7,r=20,o=function(i,s){var a,h;return h=i.interpolate(s,.5,e),a=h.luminance(),Math.abs(t-a)<n||!r--?h:a>t?o(i,h):o(h,s)},i=uf(this._rgb),this._rgb=(i>t?o(yc("black"),this):o(this,yc("white"))).rgba()),this):uf(this._rgb)},_f=function(t){var e,i,n,r;return r=t/100,r<66?(n=255,i=-155.25485562709179-.44596950469579133*(i=r-2)+104.49216199393888*Wc(i),e=r<20?0:.8274096064007395*(e=r-10)-254.76935184120902+115.67994401066147*Wc(e)):(n=351.97690566805693+.114206453784165*(n=r-55)-40.25366309332127*Wc(n),i=325.4494125711974+.07943456536662342*(i=r-50)-28.0852963507957*Wc(i),e=255),[n,i,e]},cf=function(){var t,e,i,n,r,o,s,a;for(o=xf(arguments),r=o[0],o[1],t=o[2],n=1e3,i=4e4,e=.4;i-n>e;)a=.5*(i+n),s=_f(a),s[2]/s[0]>=t/r?i=a:n=a;return vf(a)},yc.temperature=yc.kelvin=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,r=t.apply(n,e);return Object(r)===r?r:n}(tc,Cf.call(arguments).concat(["temperature"]),function(){})},lc.temperature=lc.kelvin=lc.K=_f,tc.prototype.temperature=function(){return cf(this._rgb)},tc.prototype.kelvin=tc.prototype.temperature,yc.contrast=function(t,e){var i,n,r,o;return"string"!==(r=wf(t))&&"number"!==r||(t=new tc(t)),"string"!==(o=wf(e))&&"number"!==o||(e=new tc(e)),i=t.luminance(),n=e.luminance(),i>n?(i+.05)/(n+.05):(n+.05)/(i+.05)},yc.distance=function(t,e,i){var n,r,o,s,a,h,l;null==i&&(i="lab"),"string"!==(a=wf(t))&&"number"!==a||(t=new tc(t)),"string"!==(h=wf(e))&&"number"!==h||(e=new tc(e)),o=t.get(i),s=e.get(i),l=0;for(r in o)n=(o[r]||0)-(s[r]||0),l+=n*n;return Math.sqrt(l)},yc.deltaE=function(t,e,i,n){var r,o,s,a,h,l,u,d,c,f,p,m,v,g,y,b,_,w,x,S,k,E,M,T,C,O,P;for(null==i&&(i=1),null==n&&(n=1),"string"!==(_=wf(t))&&"number"!==_||(t=new tc(t)),"string"!==(w=wf(e))&&"number"!==w||(e=new tc(e)),x=t.lab(),r=x[0],s=x[1],h=x[2],S=e.lab(),o=S[0],a=S[1],l=S[2],u=bf(s*s+h*h),d=bf(a*a+l*l),M=r<16?.511:.040975*r/(1+.01765*r),k=.0638*u/(1+.0131*u)+.638,b=u<1e-6?0:180*cc(h,s)/nc;b<0;)b+=360;for(;b>=360;)b-=360;return T=b>=164&&b<=345?.56+dc(.2*wc(nc*(b+168)/180)):.36+dc(.4*wc(nc*(b+35)/180)),c=u*u*u*u,y=bf(c/(c+1900)),E=k*(y*T+1-y),g=r-o,v=u-d,p=s-a,m=h-l,f=p*p+m*m-v*v,C=g/(i*M),O=v/(n*k),P=E,bf(C*C+O*O+f/(P*P))},tc.prototype.get=function(t){var e,i,n,r,o,s;return n=this,o=t.split("."),r=o[0],e=o[1],s=n[r](),e?(i=r.indexOf(e),i>-1?s[i]:console.warn("unknown channel "+e+" in mode "+r)):s},tc.prototype.set=function(t,e){var i,n,r,o,s,a;if(r=this,s=t.split("."),o=s[0],i=s[1],i)if(a=r[o](),(n=o.indexOf(i))>-1)if("string"===wf(e))switch(e.charAt(0)){case"+":case"-":a[n]+=+e;break;case"*":a[n]*=+e.substr(1);break;case"/":a[n]/=+e.substr(1);break;default:a[n]=+e}else a[n]=e;else console.warn("unknown channel "+i+" in mode "+o);else a=e;return yc(a,o).alpha(r.alpha())},tc.prototype.clipped=function(){return this._rgb._clipped||!1},tc.prototype.alpha=function(t){return arguments.length?yc.rgb([this._rgb[0],this._rgb[1],this._rgb[2],t]):this._rgb[3]},tc.prototype.darken=function(t){var e,i;return null==t&&(t=1),i=this,e=i.lab(),e[0]-=ic.Kn*t,yc.lab(e).alpha(i.alpha())},tc.prototype.brighten=function(t){return null==t&&(t=1),this.darken(-t)},tc.prototype.darker=tc.prototype.darken,tc.prototype.brighter=tc.prototype.brighten,tc.prototype.saturate=function(t){var e,i;return null==t&&(t=1),i=this,e=i.lch(),e[1]+=t*ic.Kn,e[1]<0&&(e[1]=0),yc.lch(e).alpha(i.alpha())},tc.prototype.desaturate=function(t){return null==t&&(t=1),this.saturate(-t)},tc.prototype.premultiply=function(){var t,e;return e=this.rgb(),t=this.alpha(),yc(e[0]*t,e[1]*t,e[2]*t,t)},pc=function(t,e,i){if(!pc[i])throw"unknown blend mode "+i;return pc[i](t,e)},mc=function(t){return function(e,i){var n,r;return n=yc(i).rgb(),r=yc(e).rgb(),yc(t(n,r),"rgb")}},Ec=function(t){return function(e,i){var n,r,o;for(o=[],n=r=0;r<=3;n=++r)o[n]=t(e[n],i[n]);return o}},Zc=function(t,e){return t},Xc=function(t,e){return t*e/255},Sc=function(t,e){return t>e?e:t},Vc=function(t,e){return t>e?t:e},gf=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},Qc=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},gc=function(t,e){return 255*(1-(1-e/255)/(t/255))},kc=function(t,e){return 255===t?255:(t=e/255*255/(1-t/255),t>255?255:t)},pc.normal=mc(Ec(Zc)),pc.multiply=mc(Ec(Xc)),pc.screen=mc(Ec(gf)),pc.overlay=mc(Ec(Qc)),pc.darken=mc(Ec(Sc)),pc.lighten=mc(Ec(Vc)),pc.dodge=mc(Ec(kc)),pc.burn=mc(Ec(gc)),yc.blend=pc,yc.analyze=function(t){var e,i,n,r;for(n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},i=0,e=t.length;i<e;i++)null==(r=t[i])||isNaN(r)||(n.values.push(r),n.sum+=r,r<n.min&&(n.min=r),r>n.max&&(n.max=r),n.count+=1);return n.domain=[n.min,n.max],n.limits=function(t,e){return yc.limits(n,t,e)},n},yc.scale=function(t,e){var i,n,r,o,s,a,h,l,u,d,c,f,p,m,v,g,y,b,_,w;return l="rgb",u=yc("#ccc"),p=0,s=[0,1],f=[],c=[0,0],i=!1,r=[],d=!1,h=0,a=1,o=!1,n={},m=!0,_=function(t){var e,i,n,o,s,a;if(null==t&&(t=["#fff","#000"]),null!=t&&"string"===wf(t)&&null!=yc.brewer&&(t=yc.brewer[t]||yc.brewer[t.toLowerCase()]||t),"array"===wf(t)){for(t=t.slice(0),e=n=0,o=t.length-1;0<=o?n<=o:n>=o;e=0<=o?++n:--n)i=t[e],"string"===wf(i)&&(t[e]=yc(i));for(f.length=0,e=a=0,s=t.length-1;0<=s?a<=s:a>=s;e=0<=s?++a:--a)f.push(e/(t.length-1))}return b(),r=t},g=function(t){var e,n;if(null!=i){for(n=i.length-1,e=0;e<n&&t>=i[e];)e++;return e-1}return 0},w=function(t){return t},y=function(t,e){var o,s,d,p,v,y,b,_;if(null==e&&(e=!1),isNaN(t))return u;if(e?_=t:i&&i.length>2?(o=g(t),_=o/(i.length-2),_=c[0]+_*(1-c[0]-c[1])):a!==h?(_=(t-h)/(a-h),_=c[0]+_*(1-c[0]-c[1]),_=Math.min(1,Math.max(0,_))):_=1,e||(_=w(_)),p=Math.floor(1e4*_),m&&n[p])s=n[p];else{if("array"===wf(r))for(d=v=0,b=f.length-1;0<=b?v<=b:v>=b;d=0<=b?++v:--v){if(y=f[d],_<=y){s=r[d];break}if(_>=y&&d===f.length-1){s=r[d];break}if(_>y&&_<f[d+1]){_=(_-y)/(f[d+1]-y),s=yc.interpolate(r[d],r[d+1],_,l);break}}else"function"===wf(r)&&(s=r(_));m&&(n[p]=s)}return s},b=function(){return n={}},_(t),v=function(t){var e;return e=yc(y(t)),d&&e[d]?e[d]():e},v.classes=function(t){var e;return null!=t?("array"===wf(t)?(i=t,s=[t[0],t[t.length-1]]):(e=yc.analyze(s),i=0===t?[e.min,e.max]:yc.limits(e,"e",t)),v):i},v.domain=function(t){var e,i,n,o,l,u,d;if(!arguments.length)return s;if(h=t[0],a=t[t.length-1],f=[],n=r.length,t.length===n&&h!==a)for(l=0,o=t.length;l<o;l++)i=t[l],f.push((i-h)/(a-h));else for(e=d=0,u=n-1;0<=u?d<=u:d>=u;e=0<=u?++d:--d)f.push(e/(n-1));return s=[h,a],v},v.mode=function(t){return arguments.length?(l=t,b(),v):l},v.range=function(t,e){return _(t,e),v},v.out=function(t){return d=t,v},v.spread=function(t){return arguments.length?(p=t,v):p},v.correctLightness=function(t){return null==t&&(t=!0),o=t,b(),w=o?function(t){var e,i,n,r,o,s,a,h,l;for(e=y(0,!0).lab()[0],i=y(1,!0).lab()[0],a=e>i,n=y(t,!0).lab()[0],o=e+(i-e)*t,r=n-o,h=0,l=1,s=20;Math.abs(r)>.01&&s-- >0;)!function(){a&&(r*=-1),r<0?(h=t,t+=.5*(l-t)):(l=t,t+=.5*(h-t)),n=y(t,!0).lab()[0],r=n-o}();return t}:function(t){return t},v},v.padding=function(t){return null!=t?("number"===wf(t)&&(t=[t,t]),c=t,v):c},v.colors=function(e,n){var o,a,h,l,u,d,c;if(null==n&&(n="hex"),0===arguments.length)return r.map(function(t){return t[n]()});if(e)return 1===e?v(.5)[n]():(a=s[0],o=s[1]-a,function(){u=[];for(var t=0;0<=e?t<e:t>e;0<=e?t++:t--)u.push(t);return u}.apply(this).map(function(t){return v(a+t/(e-1)*o)[n]()}));if(t=[],d=[],i&&i.length>2)for(h=c=1,l=i.length;1<=l?c<l:c>l;h=1<=l?++c:--c)d.push(.5*(i[h-1]+i[h]));else d=s;return d.map(function(t){return v(t)[n]()})},v.cache=function(t){return null!=t?m=t:m},v},null==yc.scales&&(yc.scales={}),yc.scales.cool=function(){return yc.scale([yc.hsl(180,1,.9),yc.hsl(250,.7,.4)])},yc.scales.hot=function(){return yc.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},yc.analyze=function(t,e,i){var n,r,o,s,a,h,l;if(a={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==i&&(i=function(){return!0}),n=function(t){null==t||isNaN(t)||(a.values.push(t),a.sum+=t,t<a.min&&(a.min=t),t>a.max&&(a.max=t),a.count+=1)},l=function(t,r){if(i(t,r))return n(null!=e&&"function"===wf(e)?e(t):null!=e&&"string"===wf(e)||"number"===wf(e)?t[e]:t)},"array"===wf(t))for(s=0,o=t.length;s<o;s++)h=t[s],l(h);else for(r in t)h=t[r],l(h,r);return a.domain=[a.min,a.max],a.limits=function(t,e){return yc.limits(a,t,e)},a},yc.limits=function(t,e,i){var n,r,o,s,a,h,l,u,d,c,f,p,m,v,g,y,b,_,w,x,S,k,E,M,T,C,O,P,A,D,I,R,L,N,F,z,B,j,U,H,V,G,W,Y,$,q,X,Z,K,Q,J,tt,et,it,nt;if(null==e&&(e="equal"),null==i&&(i=7),"array"===wf(t)&&(t=yc.analyze(t)),T=t.min,qc=t.max,t.sum,it=t.values.sort(function(t,e){return t-e}),1===i)return[T,qc];if(E=[],"c"===e.substr(0,1)&&(E.push(T),E.push(qc)),"e"===e.substr(0,1)){for(E.push(T),x=I=1,F=i-1;1<=F?I<=F:I>=F;x=1<=F?++I:--I)E.push(T+x/i*(qc-T));E.push(qc)}else if("l"===e.substr(0,1)){if(T<=0)throw"Logarithmic scales are only possible for values > 0";for(C=Math.LOG10E*Wc(T),M=Math.LOG10E*Wc(qc),E.push(T),x=nt=1,z=i-1;1<=z?nt<=z:nt>=z;x=1<=z?++nt:--nt)E.push(Jc(10,C+x/i*(M-C)));E.push(qc)}else if("q"===e.substr(0,1)){for(E.push(T),x=n=1,G=i-1;1<=G?n<=G:n>=G;x=1<=G?++n:--n)R=(it.length-1)*x/i,L=Mc(R),L===R?E.push(it[L]):(N=R-L,E.push(it[L]*(1-N)+it[L+1]*N));E.push(qc)}else if("k"===e.substr(0,1)){for(P=it.length,v=new Array(P),_=new Array(i),Q=!0,A=0,y=null,y=[],y.push(T),x=r=1,W=i-1;1<=W?r<=W:r>=W;x=1<=W?++r:--r)y.push(T+x/i*(qc-T));for(y.push(qc);Q;){for(S=o=0,Y=i-1;0<=Y?o<=Y:o>=Y;S=0<=Y?++o:--o)_[S]=0;for(x=s=0,$=P-1;0<=$?s<=$:s>=$;x=0<=$?++s:--s){for(et=it[x],O=Number.MAX_VALUE,S=a=0,q=i-1;0<=q?a<=q:a>=q;S=0<=q?++a:--a)(w=dc(y[S]-et))<O&&(O=w,g=S);_[g]++,v[x]=g}for(D=new Array(i),S=h=0,X=i-1;0<=X?h<=X:h>=X;S=0<=X?++h:--h)D[S]=null;for(x=l=0,Z=P-1;0<=Z?l<=Z:l>=Z;x=0<=Z?++l:--l)b=v[x],null===D[b]?D[b]=it[x]:D[b]+=it[x];for(S=u=0,K=i-1;0<=K?u<=K:u>=K;S=0<=K?++u:--u)D[S]*=1/_[S];for(Q=!1,S=d=0,B=i-1;0<=B?d<=B:d>=B;S=0<=B?++d:--d)if(D[S]!==y[x]){Q=!0;break}y=D,A++,A>200&&(Q=!1)}for(k={},S=c=0,j=i-1;0<=j?c<=j:c>=j;S=0<=j?++c:--c)k[S]=[];for(x=f=0,U=P-1;0<=U?f<=U:f>=U;x=0<=U?++f:--f)b=v[x],k[b].push(it[x]);for(J=[],S=p=0,H=i-1;0<=H?p<=H:p>=H;S=0<=H?++p:--p)J.push(k[S][0]),J.push(k[S][k[S].length-1]);for(J=J.sort(function(t,e){return t-e}),E.push(J[0]),x=m=1,V=J.length-1;m<=V;x=m+=2)tt=J[x],isNaN(tt)||-1!==E.indexOf(tt)||E.push(tt)}return E},Oc=function(t,e,i){var n,r,o,s;return n=xf(arguments),t=n[0],e=n[1],i=n[2],isNaN(t)&&(t=0),t/=360,t<1/3?(r=(1-e)/3,s=(1+e*wc(sc*t)/wc(rc-sc*t))/3,o=1-(r+s)):t<2/3?(t-=1/3,s=(1-e)/3,o=(1+e*wc(sc*t)/wc(rc-sc*t))/3,r=1-(s+o)):(t-=2/3,o=(1-e)/3,r=(1+e*wc(sc*t)/wc(rc-sc*t))/3,s=1-(o+r)),s=Gc(i*s*3),o=Gc(i*o*3),r=Gc(i*r*3),[255*s,255*o,255*r,n.length>3?n[3]:1]},of=function(){var t,e,i,n,r,o,s,a;return s=xf(arguments),o=s[0],e=s[1],t=s[2],sc=2*Math.PI,o/=255,e/=255,t/=255,r=Math.min(o,e,t),n=(o+e+t)/3,a=1-r/n,0===a?i=0:(i=(o-e+(o-t))/2,i/=Math.sqrt((o-e)*(o-e)+(o-t)*(e-t)),i=Math.acos(i),t>e&&(i=sc-i),i/=sc),[360*i,a,n]},yc.hsi=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,r=t.apply(n,e);return Object(r)===r?r:n}(tc,Cf.call(arguments).concat(["hsi"]),function(){})},lc.hsi=Oc,tc.prototype.hsi=function(){return of(this._rgb)},Rc=function(t,e,i,n){var r,o,s,a,h,l,u,d,c,f,p,m;return"hsl"===n?(p=t.hsl(),m=e.hsl()):"hsv"===n?(p=t.hsv(),m=e.hsv()):"hcg"===n?(p=t.hcg(),m=e.hcg()):"hsi"===n?(p=t.hsi(),m=e.hsi()):"lch"!==n&&"hcl"!==n||(n="hcl",p=t.hcl(),m=e.hcl()),"h"===n.substr(0,1)&&(s=p[0],c=p[1],l=p[2],a=m[0],f=m[1],u=m[2]),isNaN(s)||isNaN(a)?isNaN(s)?isNaN(a)?o=Number.NaN:(o=a,1!==l&&0!==l||"hsv"===n||(d=f)):(o=s,1!==u&&0!==u||"hsv"===n||(d=c)):(r=a>s&&a-s>180?a-(s+360):a<s&&s-a>180?a+360-s:a-s,o=s+i*r),null==d&&(d=c+i*(f-c)),h=l+i*(u-l),yc[n](o,d,h)},uc=uc.concat(function(){var t,e,i,n;for(i=["hsv","hsl","hsi","hcl","lch","hcg"],n=[],e=0,t=i.length;e<t;e++)$c=i[e],n.push([$c,Rc]);return n}()),Nc=function(t,e,i,n){var r,o;return r=t.num(),o=e.num(),yc.num(r+(o-r)*i,"num")},uc.push(["num",Nc]),Lc=function(t,e,i,n){var r,o;return r=t.lab(),o=e.lab(),new tc(r[0]+i*(o[0]-r[0]),r[1]+i*(o[1]-r[1]),r[2]+i*(o[2]-r[2]),n)},uc.push(["lab",Lc]);var Of=yc,Pf=function(t){var e=t||{};this.scale=gr(e.scale,"uniform"),this.mode=gr(e.mode,"hcl"),this.domain=gr(e.domain,[0,1]),this.value=new it(gr(e.value,16777215)).getHex(),this.reverse=gr(e.reverse,!1),this.structure=e.structure,this.volume=e.volume,this.surface=e.surface,this.structure&&(this.atomProxy=this.structure.getAtomProxy())};Pf.prototype.getScale=function(t){var e=t||{},i=gr(e.scale,this.scale);"rainbow"===i?i=["red","orange","yellow","green","blue"]:"rwb"===i&&(i=["red","white","blue"]);var n=gr(e.domain,this.domain);return this.reverse&&(n=n.slice().reverse()),Of.scale(i).mode(gr(e.mode,this.mode)).domain(n).out("num")},Pf.prototype.colorToArray=function(t,e,i){return void 0===e&&(e=[]),void 0===i&&(i=0),e[i+0]=(t>>16&255)/255,e[i+1]=(t>>8&255)/255,e[i+2]=(255&t)/255,e},Pf.prototype.atomColorToArray=function(t,e,i){return this.colorToArray(this.atomColor(t),e,i)},Pf.prototype.bondColor=function(t,e){return this.atomProxy.index=e?t.atomIndex1:t.atomIndex2,this.atomColor(this.atomProxy)},Pf.prototype.bondColorToArray=function(t,e,i,n){return this.colorToArray(this.bondColor(t,e),i,n)},Pf.prototype.volumeColorToArray=function(t,e,i){return this.colorToArray(this.volumeColor(t),e,i)},Pf.prototype.positionColorToArray=function(t,e,i){return this.colorToArray(this.positionColor(t),e,i)},to.prototype={active:!0,params:null,execute:function(t){var e,i;return this.active&&this._listener&&(i=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,i),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},io.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,e,i,n){var r,o=this._indexOfListener(t,i);if(-1!==o){if(r=this._bindings[o],r.isOnce()!==e)throw new Error("You cannot add"+(e?"":"Once")+"() then add"+(e?"Once":"")+"() the same listener without removing the relationship first.")}else r=new to(this,t,e,i,n),this._addBinding(r);return this.memorize&&this._prevParams&&r.execute(this._prevParams),r},_addBinding:function(t){var e=this._bindings.length;do{--e}while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var i,n=this,r=this._bindings.length;r--;)if(i=n._bindings[r],i._listener===t&&i.context===e)return r;return-1},has:function(t,e){return-1!==this._indexOfListener(t,e)},add:function(t,e,i){return eo(t,"add"),this._registerListener(t,!1,e,i)},addOnce:function(t,e,i){return eo(t,"addOnce"),this._registerListener(t,!0,e,i)},remove:function(t,e){eo(t,"remove");var i=this._indexOfListener(t,e);return-1!==i&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),t},removeAll:function(){for(var t=this,e=this._bindings.length;e--;)t._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(t){if(this.active){var e,i=Array.prototype.slice.call(arguments),n=this._bindings.length;if(this.memorize&&(this._prevParams=i),n){e=this._bindings.slice(),this._shouldPropagate=!0;do{n--}while(e[n]&&this._shouldPropagate&&!1!==e[n].execute(i))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var Af={PROTEIN:1,NUCLEIC:2,RNA:3,DNA:4,POLYMER:5,WATER:6,HELIX:7,SHEET:8,TURN:9,BACKBONE:10,SIDECHAIN:11,ALL:12,HETERO:13,ION:14,SACCHARIDE:15,SUGAR:15,BONDED:16,RING:17},Df=["*","","ALL"],If=[Af.BACKBONE,Af.SIDECHAIN,Af.BONDED,Af.RING],Rf=[Af.POLYMER,Af.WATER],Lf=["ALA","GLY","SER"],Nf=["CYS","SER","THR"],Ff=["ALA","ILE","LEU","MET","PHE","PRO","TRP","VAL"],zf=["PHE","TRP","TYR","HIS"],Bf=["ASN","GLN"],jf=["ASP","GLU"],Uf=["ARG","HIS","LYS"],Hf=["ARG","ASP","GLU","HIS","LYS"],Vf=["ASN","ARG","ASP","CYS","GLY","GLN","GLU","HIS","LYS","SER","THR","TYR"],Gf=["ALA","ILE","LEU","MET","PHE","PRO","TRP","VAL"],Wf=["HIS","PHE","PRO","TRP","TYR"],Yf=["ALA","GLY","ILE","LEU","VAL"],$f=function(t){this.signals={stringChanged:new io},this.setString(t)},qf={type:{}};qf.type.get=function(){return"selection"},$f.prototype.setString=function(t,e){if(void 0===t&&(t=this.string||""),t!==this.string){try{this.parse(t)}catch(t){this.selection={error:t.message}}this.string=t,this.test=this.makeAtomTest(),this.residueTest=this.makeResidueTest(),this.chainTest=this.makeChainTest(),this.modelTest=this.makeModelTest(),this.atomOnlyTest=this.makeAtomTest(!0),this.residueOnlyTest=this.makeResidueTest(!0),this.chainOnlyTest=this.makeChainTest(!0),this.modelOnlyTest=this.makeModelTest(!0),e||this.signals.stringChanged.dispatch(this.string)}},$f.prototype.parse=function(t){var e=this;if(this.selection={operator:void 0,rules:[]},t){var i,n,r=this.selection,o=[];t=t.replace(/\(/g," ( ").replace(/\)/g," ) ").trim(),"("===t.charAt(0)&&")"===t.substr(-1)&&(t=t.slice(1,-1).trim());for(var s,a=t.split(/\s+/),h=function(t){i={operator:t,rules:[]},void 0===r?(r=i,e.selection=i):(r.rules.push(i),o.push(r),r=i)},l=function(t){n=r,void 0===(r=o.pop())&&(h(t),u(n))},u=function(t){r.rules.push(t)},d=0;d<a.length;++d){var c=a[d],f=c.toUpperCase();if("("!==c)if(")"!==c){if(s>0)if("NOT"===f)s=1;else if(1===s)s=2;else{if(2!==s)throw new Error("something went wrong with 'not'");s=!1,l()}if("AND"!==f)if("OR"!==f)if("NOT"!==c.toUpperCase()){var p=Af[f];if(void 0===p)if("HYDROGEN"!==f)if("SMALL"!==f)if("NUCLEOPHILIC"!==f)if("HYDROPHOBIC"!==f)if("AROMATIC"!==f)if("AMIDE"!==f)if("ACIDIC"!==f)if("BASIC"!==f)if("CHARGED"!==f)if("POLAR"!==f)if("NONPOLAR"!==f)if("CYCLIC"!==f)if("ALIPHATIC"!==f)if("SIDECHAINATTACHED"!==f)if("LIGAND"!==f)if(-1===Df.indexOf(f))if("@"!==c.charAt(0))if("#"!==c.charAt(0))if("_"!==c.charAt(0))if("["!==c[0]||"]"!==c[c.length-1])if(c.length>=1&&c.length<=4&&"^"!==c[0]&&":"!==c[0]&&"."!==c[0]&&"%"!==c[0]&&"/"!==c[0]&&isNaN(parseInt(c)))u({resname:f});else{var m={operator:"AND",rules:[]},v=c.split("/");if(v.length>1&&v[1]){if(isNaN(parseInt(v[1])))throw new Error("model must be an integer");m.rules.push({model:parseInt(v[1])})}var g=v[0].split("%");g.length>1&&m.rules.push({altloc:g[1]});var y=g[0].split(".");if(y.length>1&&y[1]){if(y[1].length>4)throw new Error("atomname must be one to four characters");m.rules.push({atomname:y[1].substring(0,4).toUpperCase()})}var b=y[0].split(":");b.length>1&&b[1]&&m.rules.push({chainname:b[1]});var _=b[0].split("^");if(_.length>1&&m.rules.push({inscode:_[1]}),_[0]){var w=void 0,x=void 0;"-"===_[0][0]&&(_[0]=_[0].substr(1),w=!0),_[0].includes("--")&&(_[0]=_[0].replace("--","-"),x=!0);var S=_[0].split("-");if(1===S.length){if(S=parseInt(S[0]),isNaN(S))throw new Error("resi must be an integer");w&&(S*=-1),m.rules.push({resno:S})}else{if(2!==S.length)throw new Error("resi range must contain one '-'");w&&(S[0]*=-1),x&&(S[1]*=-1),m.rules.push({resno:[parseInt(S[0]),parseInt(S[1])]})}}if(1===m.rules.length)u(m.rules[0]);else{if(!(m.rules.length>1))throw new Error("empty selection chunk");u(m)}}else{var k=f.substr(1,c.length-2).split(","),E=k.length>1?k:k[0];u({resname:E})}else u({element:f.substr(1)});else console.error("# for element selection deprecated, use _"),u({element:f.substr(1)});else{for(var M=c.substr(1).split(","),T=0,C=M.length;T<C;++T)M[T]=parseInt(M[T]);M.sort(function(t,e){return t-e}),u({atomindex:M})}else u({keyword:Af.ALL});else u({operator:"AND",rules:[{operator:"OR",rules:[{keyword:Af.HETERO},{negate:!0,operator:void 0,rules:[{keyword:Af.POLYMER}]}]},{negate:!0,operator:void 0,rules:[{operator:"OR",rules:[{keyword:Af.WATER},{keyword:Af.ION}]}]}]});else u({operator:"OR",rules:[{keyword:Af.SIDECHAIN},{operator:"AND",negate:!1,rules:[{keyword:Af.PROTEIN},{operator:"OR",negate:!1,rules:[{atomname:"CA"},{atomname:"BB"}]}]},{operator:"AND",negate:!1,rules:[{resname:"PRO"},{atomname:"N"}]},{operator:"AND",negate:!1,rules:[{keyword:Af.NUCLEIC},{operator:"OR",negate:!0,rules:[{atomname:"P"},{atomname:"OP1"},{atomname:"OP2"},{atomname:"O3'"},{atomname:"O3*"},{atomname:"O5'"},{atomname:"O5*"},{atomname:"C5'"},{atomname:"C5*"}]}]}]});else u({resname:Yf});else u({resname:Wf});else u({resname:Gf});else u({resname:Vf});else u({resname:Hf});else u({resname:Uf});else u({resname:jf});else u({resname:Bf});else u({resname:zf});else u({resname:Ff});else u({resname:Nf});else u({resname:Lf});else u({element:"H"});else u({keyword:p})}else s=1,h(),r.negate=!0;else"AND"===r.operator?l("OR"):r.operator="OR";else if("OR"===r.operator){var O=r.rules.pop();h("AND"),u(O)}else r.operator="AND"}else l(),r.negate&&l();else s=!1,h()}void 0===this.selection.operator&&1===this.selection.rules.length&&this.selection.rules[0].hasOwnProperty("operator")&&(this.selection=this.selection.rules[0])}},$f.prototype._makeTest=function(t,e){var i=this;if(void 0===e&&(e=this.selection),null===e)return!1;if(e.error)return!1;var n=e.rules.length;if(0===n)return!1;for(var r=!e.negate,o=!!e.negate,s=[],a=0;a<n;++a){var h=e.rules[a];h.hasOwnProperty("operator")&&(s[a]=i._makeTest(t,h))}return function(i){for(var a="AND"===e.operator,h=!1,l=0;l<n;++l){var u=e.rules[l],d=void 0;if(u.hasOwnProperty("operator")){if(-1===(d=s[l]?s[l](i):-1)){h=!0;continue}if(!0===d){if(a)continue;return r}if(a)return o}else{if(u.keyword===Af.ALL){if(a)continue;return r}if(-1!==(d=t(i,u))){if(!0===d){if(a)continue;return r}if(a)return o}else h=!0}}return h?-1:a?r:o}},$f.prototype._filter=function(t,e){var i=this;if(void 0===e&&(e=this.selection),e.error)return e;var n=e.rules.length;if(0===n)return e;var r={operator:e.operator,rules:[]};e.hasOwnProperty("negate")&&(r.negate=e.negate);for(var o=0;o<n;++o){var s=e.rules[o];if(s.hasOwnProperty("operator")){var a=i._filter(t,s);null!==a&&r.rules.push(a)}else t(s)||r.rules.push(s)}return r.rules.length>0?e:null},$f.prototype.makeAtomTest=function(t){var e;return e=t?this._filter(function(t){return void 0!==t.keyword&&!If.includes(t.keyword)||(void 0!==t.model||(void 0!==t.chainname||(void 0!==t.resname||(void 0!==t.resno||void 0!==t.sstruc))))}):this.selection,this._makeTest(no,e)},$f.prototype.makeResidueTest=function(t){var e;return e=t?this._filter(function(t){return!(void 0===t.keyword||!If.includes(t.keyword))||(void 0!==t.model||(void 0!==t.chainname||(void 0!==t.atomname||(void 0!==t.element||void 0!==t.altloc))))}):this.selection,this._makeTest(ro,e)},$f.prototype.makeChainTest=function(t){var e;return e=t?this._filter(function(t){return void 0!==t.keyword&&!Rf.includes(t.keyword)||(void 0!==t.resname||(void 0!==t.resno||(void 0!==t.atomname||(void 0!==t.element||(void 0!==t.altloc||(void 0!==t.sstruc||void 0!==t.inscode))))))}):this.selection,this._makeTest(oo,e)},$f.prototype.makeModelTest=function(t){var e;return e=t?this._filter(function(t){return void 0!==t.keyword||(void 0!==t.chainname||(void 0!==t.resname||(void 0!==t.resno||(void 0!==t.atomname||(void 0!==t.element||(void 0!==t.altloc||(void 0!==t.sstruc||void 0!==t.inscode)))))))}):this.selection,this._makeTest(so,e)},Object.defineProperties($f.prototype,qf);var Xf=function(t){function e(e){var i=this;t.call(this,e);var n=e.dataList||[];this.colormakerList=[],this.selectionList=[],n.forEach(function(t){var e=t[0],n=t[1],r=t[2];void 0===r&&(r={}),ap.hasScheme(e)?Object.assign(r,{scheme:e,structure:i.structure}):Object.assign(r,{scheme:"uniform",value:new it(e).getHex()}),i.colormakerList.push(ap.getScheme(r)),i.selectionList.push(new $f(n))})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.atomColor=function(t){for(var e=this,i=0,n=this.selectionList.length;i<n;++i)if(e.selectionList[i].test(t))return e.colormakerList[i].atomColor(t);return 16777215},e}(Pf),Zf={"":"",OrRd:"[S] Orange-Red",PuBu:"[S] Purple-Blue",BuPu:"[S] Blue-Purple",Oranges:"[S] Oranges",BuGn:"[S] Blue-Green",YlOrBr:"[S] Yellow-Orange-Brown",YlGn:"[S] Yellow-Green",Reds:"[S] Reds",RdPu:"[S] Red-Purple",Greens:"[S] Greens",YlGnBu:"[S] Yellow-Green-Blue",Purples:"[S] Purples",GnBu:"[S] Green-Blue",Greys:"[S] Greys",YlOrRd:"[S] Yellow-Orange-Red",PuRd:"[S] Purple-Red",Blues:"[S] Blues",PuBuGn:"[S] Purple-Blue-Green",Viridis:"[D] Viridis",Spectral:"[D] Spectral",RdYlGn:"[D] Red-Yellow-Green",RdBu:"[D] Red-Blue",PiYG:"[D] Pink-Yellowgreen",PRGn:"[D] Purplered-Green",RdYlBu:"[D] Red-Yellow-Blue",BrBG:"[D] Brown-Bluegreen",RdGy:"[D] Red-Grey",PuOr:"[D] Purple-Orange",Set1:"[Q] Set1",Set2:"[Q] Set2",Set3:"[Q] Set3",Dark2:"[Q] Dark2",Paired:"[Q] Paired",Pastel1:"[Q] Pastel1",Pastel2:"[Q] Pastel2",Accent:"[Q] Accent",rainbow:"[?] Rainbow",rwb:"[?] Red-White-Blue"},Kf={"":"",rgb:"Red Green Blue",hsv:"Hue Saturation Value",hsl:"Hue Saturation Lightness",hsi:"Hue Saturation Intensity",lab:"CIE L*a*b*",hcl:"Hue Chroma Lightness"},Qf=function(){this.schemes={},this.userSchemes={}};Qf.prototype.getScheme=function(t){var e=t||{},i=e.scheme||"";return new(i in this.schemes?this.schemes[i]:i in this.userSchemes?this.userSchemes[i]:Pf)(t)},Qf.prototype.getSchemes=function(){var t={};return Object.keys(this.schemes).forEach(function(e){t[e]=e}),Object.keys(this.userSchemes).forEach(function(e){t[e]=e.split("|")[1]}),t},Qf.prototype.getScales=function(){return Zf},Qf.prototype.getModes=function(){return Kf},Qf.prototype.add=function(t,e){this.schemes[t]=e},Qf.prototype.addScheme=function(t,e){return t instanceof Pf||(t=this._createScheme(t,e)),this._addUserScheme(t,e)},Qf.prototype._addUserScheme=function(t,e){e=e||"";var i=Gr()+"|"+e;return this.userSchemes[i]=t,i},Qf.prototype.removeScheme=function(t){delete this.userSchemes[t]},Qf.prototype._createScheme=function(t,e){var i=function(i){Pf.call(this,i),this.label=e||"",t.call(this,i)};return i.prototype=Pf.prototype,i.prototype.constructor=Pf,i},Qf.prototype.addSelectionScheme=function(t,e){var i=function(e){function i(i){e.call(this,Object.assign({dataList:t},i))}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i}(Xf);return this._addUserScheme(i,e)},Qf.prototype.hasScheme=function(t){return t in this.schemes||t in this.userSchemes};var Jf=function(){if("undefined"===typeof window)return!1;var t=window.navigator.userAgent;return/Opera|OPR/.test(t)?"Opera":/Chrome/i.test(t)?"Chrome":/Firefox/i.test(t)?"Firefox":/Mobile(\/.*)? Safari/i.test(t)?"Mobile Safari":/MSIE/i.test(t)?"Internet Explorer":!!/Safari/i.test(t)&&"Safari"}(),tp="undefined"!==typeof window&&"undefined"!==typeof window.orientation,ep=!1,ip=!1,np={log:Function.prototype.bind.call(console.log,console),info:Function.prototype.bind.call(console.info,console),warn:Function.prototype.bind.call(console.warn,console),error:Function.prototype.bind.call(console.error,console),time:Function.prototype.bind.call(console.time,console),timeEnd:Function.prototype.bind.call(console.timeEnd,console)},rp=function(t){return!!t&&("string"!==typeof t||/^1|true|t|yes|y$/i.test(t))}(function(t){if("undefined"!==typeof window){var e=new RegExp(t+"=([^&#=]*)"),i=e.exec(window.location.search);return i?decodeURIComponent(i[1]):void 0}}("debug")),op='<div style="display:flex;align-items:center;justify-content:center;height:100%;"><p style="padding:15px;text-align:center;">Your browser/graphics card does not seem to support <a target="_blank" href="https://en.wikipedia.org/wiki/WebGL">WebGL</a>.<br/><br/>Find out how to get it <a target="_blank" href="http://get.webgl.org/">here</a>.</p></div>',sp=new Jd,ap=new Qf,hp=new Kd("datasource"),lp=new Kd("representatation"),up=new Kd("parser"),dp=new Kd("shader"),cp=new Kd("decompressor"),fp=new Kd("component"),pp=function(t,e){var i=e||{};this.compressed=gr(i.compressed,!1),this.binary=gr(i.binary,!1),this.json=gr(i.json,!1),this.xml=gr(i.xml,!1),this.src=t,this.chunkSize=10485760,this.newline="\n",this.__pointer=0,this.__partialLine="",this.__srcName&&(this[this.__srcName]=t)},mp={type:{},__srcName:{}};mp.type.get=function(){return""},mp.__srcName.get=function(){},pp.prototype.isBinary=function(){return this.binary||this.compressed},pp.prototype.onload=function(){},pp.prototype.onprogress=function(){},pp.prototype.onerror=function(){},pp.prototype.read=function(){var t=this;return new Promise(function(e,i){try{t._read(function(i){var n=cp.get(t.compressed);t.compressed&&n?t.data=n(i):((t.binary||t.compressed)&&i instanceof ArrayBuffer&&(i=new Uint8Array(i)),t.data=i),e(t.data)})}catch(t){i(t)}})},pp.prototype._read=function(t){t(this.src)},pp.prototype._chunk=function(t,e){return e=Math.min(this.data.length,e),0===t&&this.data.length===e?this.data:this.isBinary()?this.data.subarray(t,e):this.data.substring(t,e)},pp.prototype.chunk=function(t){var e=t+this.chunkSize;return this._chunk(t,e)},pp.prototype.peekLines=function(t){var e,i=this.data,n=i.length,r=this.isBinary()?this.newline.charCodeAt(0):this.newline,o=0;for(e=0;e<n&&(i[e]===r&&++o,o!==t);++e);var s=this._chunk(0,e+1);return this.chunkToLines(s,"",e>n).lines},pp.prototype.chunkCount=function(){return Math.floor(this.data.length/this.chunkSize)+1},pp.prototype.asText=function(){return this.isBinary()?Mr(this.data):this.data},pp.prototype.chunkToLines=function(t,e,i){var n=this.newline;if(!this.isBinary()&&t.length===this.data.length)return{lines:t.split(n),partialLine:""};var r=[],o=this.isBinary()?Mr(t):t,s=o.lastIndexOf(n);if(-1===s)e+=o;else{var a=e+o.substr(0,s);r=r.concat(a.split(n)),e=s===o.length-n.length?"":o.substr(s+n.length)}return i&&""!==e&&r.push(e),{lines:r,partialLine:e}},pp.prototype.nextChunk=function(){var t=this.__pointer;if(!(t>this.data.length))return this.__pointer+=this.chunkSize,this.chunk(t)},pp.prototype.nextChunkOfLines=function(){var t=this.nextChunk();if(void 0!==t){var e=this.__pointer>this.data.length,i=this.chunkToLines(t,this.__partialLine,e);return this.__partialLine=i.partialLine,i.lines}},pp.prototype.eachChunk=function(t){for(var e=this,i=this.chunkSize,n=this.data.length,r=this.chunkCount(),o=0;o<n;o+=i){t(e.chunk(o),Math.round(o/i),r)}},pp.prototype.eachChunkOfLines=function(t){var e=this;this.eachChunk(function(i,n,r){var o=n===r+1,s=e.chunkToLines(i,e.__partialLine,o);e.__partialLine=s.partialLine,t(s.lines,n,r)})},pp.prototype.dispose=function(){delete this.src,this.__srcName&&delete this[this.__srcName]},Object.defineProperties(pp.prototype,mp);var vp=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{},__srcName:{}};return i.type.get=function(){return"file"},i.__srcName.get=function(){return"file"},e.prototype._read=function(t){var e,i=this;if("function"===typeof importScripts){e=new window.FileReaderSync;var n;n=this.binary||this.compressed?e.readAsArrayBuffer(this.file):e.readAsText(this.file),t(n)}else e=new window.FileReader,e.onload=function(e){t(e.target.result)},"function"===typeof this.onprogress&&(e.onprogress=function(t){i.onprogress(t)}),"function"===typeof this.onerror&&(e.onerror=function(t){i.onerror(t)}),this.binary||this.compressed?e.readAsArrayBuffer(this.file):e.readAsText(this.file)},Object.defineProperties(e.prototype,i),e}(pp),gp=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{},__srcName:{}};return i.type.get=function(){return"network"},i.__srcName.get=function(){return"url"},e.prototype._read=function(t){var e=this.src;"function"===typeof importScripts&&"../"===e.substr(0,3)&&(e="../"+e);var i=new window.XMLHttpRequest;i.open("GET",e,!0),i.addEventListener("load",function(){if(200!==i.status&&304!==i.status&&0!==i.status)throw"function"===typeof this.onerror&&this.onerror(i.status),new Error("NetworkStreamer._read: status code "+i.status);try{t(i.response)}catch(t){this.onerror(t)}}.bind(this),!1),"function"===typeof this.onerror&&i.addEventListener("error",function(t){this.onerror(t)}.bind(this),!1),this.isBinary()?i.responseType="arraybuffer":this.json?i.responseType="json":this.xml?i.responseType="document":i.responseType="text",i.send(null)},Object.defineProperties(e.prototype,i),e}(pp),yp=["mmtf","dcd","mrc","ccp4","map","dsn6","brix","dxbin"],bp=["json"],_p=["xml","validation"],wp=function(t,e){var i=Object.assign({},e),n=yp.includes(i.ext);this.compressed=gr(i.compressed,!1),this.binary=gr(i.binary,n),this.name=gr(i.name,""),this.ext=gr(i.ext,""),this.dir=gr(i.dir,""),this.path=gr(i.path,""),this.protocol=gr(i.protocol,""),this.params=e;var r={compressed:this.compressed,binary:this.binary,json:bp.includes(this.ext),xml:_p.includes(this.ext)};"undefined"!==typeof File&&t instanceof window.File||"undefined"!==typeof Blob&&t instanceof window.Blob?this.streamer=new vp(t,r):this.streamer=new gp(t,r),"function"===typeof i.onProgress&&(this.streamer.onprogress=i.onprogress)};wp.prototype.load=function(){return Promise.reject(new Error("not implemented"))};var xp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){return new(up.get(this.ext))(this.streamer,this.params).parse()},e}(wp),Sp=function(t,e,i){this.signals={elementAdded:new io,elementRemoved:new io,nameChanged:new io},this.name=e,this.path=i,this.dir=i.substring(0,i.lastIndexOf("/")+1);try{this.fn=new Function("stage","panel","__name__","__path__","__dir__",t)}catch(t){np.error("Script compilation failed",t),this.fn=function(){}}},kp={type:{}};kp.type.get=function(){return"Script"},Sp.prototype.call=function(t){var e=this,i={add:function(){this.signals.elementAdded.dispatch(arguments)}.bind(this),remove:function(){this.signals.elementRemoved.dispatch(arguments)}.bind(this),setName:function(t){this.signals.nameChanged.dispatch(t)}.bind(this)};return new Promise(function(n,r){var o=[t,i,e.name,e.path,e.dir];try{e.fn.apply(null,o),n()}catch(t){np.error("Script.fn",t),r(t)}})},Object.defineProperties(Sp.prototype,kp);var Ep=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;return this.streamer.read().then(function(){return new Sp(t.streamer.asText(),t.name,t.path)})},e}(wp),Mp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t,e=this;return t=this.protocol?this.protocol+"://"+this.dir:this.dir,this.streamer.read().then(function(){var i=JSON.parse(e.streamer.asText()),n=[];return i.files.map(function(e){n.push(uo(t+e,{ext:"text",useWorker:!1}))}),Promise.all(n).then(function(t){var n=t.reduce(function(t,e){return t+"\n\n"+e.data},"");return n+=i.source||"",new Sp(n,e.name,e.path)})})},e}(wp),Tp=function(){this.count=0,this.signals={countChanged:new io}};Tp.prototype.clear=function(){this.change(-this.count)},Tp.prototype.change=function(t){this.count+=t,this.signals.countChanged.dispatch(t,this.count),this.count<0&&np.warn("Counter.count below zero",this.count)},Tp.prototype.increment=function(){this.change(1)},Tp.prototype.decrement=function(){this.change(-1)},Tp.prototype.listen=function(t){this.change(t.count),t.signals.countChanged.add(this.change,this)},Tp.prototype.unlisten=function(t){var e=t.signals.countChanged;e.has(this.change,this)&&e.remove(this.change,this)},Tp.prototype.onZeroOnce=function(t,e){if(0===this.count)t.call(e,0,0);else{var i=function(){0===this.count&&(this.signals.countChanged.remove(i,this),t.apply(e,arguments))};this.signals.countChanged.add(i,this)}},Tp.prototype.dispose=function(){this.clear(),this.signals.countChanged.dispose()},dp.add("shader/BasicLine.vert","void main(){\n#include begin_vertex\n#include project_vertex\n}"),dp.add("shader/BasicLine.frag","uniform vec3 uColor;\n#include common\n#include fog_pars_fragment\nvoid main(){\ngl_FragColor = vec4( uColor, 1.0 );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n}"),dp.add("shader/Quad.vert","varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}"),dp.add("shader/Quad.frag","varying vec2 vUv;\nuniform sampler2D tForeground;\nuniform float scale;\nvoid main() {\nvec4 foreground = texture2D( tForeground, vUv );\ngl_FragColor = foreground * scale;\n}"),co.prototype={update:function(){this.startTime=this.end(),this.currentTime=this.startTime,this.signals.updated.dispatch()},begin:function(){this.startTime=window.performance.now(),this.lastFrames=this.frames},end:function(){var t=window.performance.now();return this.count+=1,this.frames+=1,this.lastDuration=t-this.startTime,this.minDuration=Math.min(this.minDuration,this.lastDuration),this.maxDuration=Math.max(this.maxDuration,this.lastDuration),this.avgDuration-=this.avgDuration/30,this.avgDuration+=this.lastDuration/30,t>this.prevFpsTime+1e3&&(this.lastFps=this.frames,this.prevFpsTime=t,this.frames=0),t}},dp.add("shader/chunk/dull_interior_fragment.glsl","#ifdef DULL_INTERIOR\nif( gl_FrontFacing == false ){\nnormal = vec3( 0.0, 0.0, 0.4 );\n}\n#endif"),dp.add("shader/chunk/fog_fragment.glsl","#ifdef USE_FOG\nfloat depth = length( vViewPosition );\n#ifdef FOG_EXP2\nfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n#else\nfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n#endif\ngl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif"),dp.add("shader/chunk/matrix_scale.glsl","float matrixScale( in mat4 m ){\nvec4 r = m[ 0 ];\nreturn sqrt( r[ 0 ] * r[ 0 ] + r[ 1 ] * r[ 1 ] + r[ 2 ] * r[ 2 ] );\n}"),dp.add("shader/chunk/nearclip_vertex.glsl","#ifdef NEAR_CLIP\nif( vViewPosition.z < nearClip - 5.0 )\ngl_Position.z = 2.0 * gl_Position.w;\n#endif"),dp.add("shader/chunk/nearclip_fragment.glsl","#ifdef NEAR_CLIP\nif( vViewPosition.z < nearClip )\ndiscard;\n#endif"),dp.add("shader/chunk/opaque_back_fragment.glsl","#ifdef OPAQUE_BACK\n#ifdef FLIP_SIDED\nif( gl_FrontFacing == true ){\ngl_FragColor.a = 1.0;\n}\n#else\nif( gl_FrontFacing == false ){\ngl_FragColor.a = 1.0;\n}\n#endif\n#endif"),dp.add("shader/chunk/radiusclip_vertex.glsl","#ifdef RADIUS_CLIP\nif( distance( vViewPosition, vClipCenter ) > clipRadius + 5.0 )\ngl_Position.z = 2.0 * gl_Position.w;\n#endif"),dp.add("shader/chunk/radiusclip_fragment.glsl","#ifdef RADIUS_CLIP\nif( distance( vViewPosition, vClipCenter ) > clipRadius )\ndiscard;\n#endif"),dp.add("shader/chunk/unpack_color.glsl","vec3 unpackColor(float f) {\nvec3 color;\ncolor.r = floor(f / 256.0 / 256.0);\ncolor.g = floor((f - color.r * 256.0 * 256.0) / 256.0);\ncolor.b = floor(f - color.r * 256.0 * 256.0 - color.g * 256.0);\nreturn color / 255.0;\n}");var Cp=/^(?!\/\/)\s*#include\s+(\S+)/gim,Op={};if("undefined"!==typeof window&&window.WebGLRenderingContext){var Pp=window.WebGLRenderingContext.prototype,Ap=Pp.getShaderParameter;Pp.getShaderParameter=function(){return!rp||Ap.apply(this,arguments)};var Dp=Pp.getShaderInfoLog;Pp.getShaderInfoLog=function(){return rp?Dp.apply(this,arguments):""};var Ip=Pp.getProgramParameter;Pp.getProgramParameter=function(t,e){return!rp&&e===Pp.LINK_STATUS||Ip.apply(this,arguments)};var Rp=Pp.getProgramInfoLog;Pp.getProgramInfoLog=function(){return rp?Rp.apply(this,arguments):""}}var Lp=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]];Lp.forEach(function(t){t.forEach(function(t){t[0]*=.0625,t[1]*=.0625})}),mo.prototype.constructor=mo;var Np=2*Math.PI,Fp=new y,zp=new b,Bp=new b,jp=new b,Up=new b,Hp=new Float32Array(4),Vp=new Uint8Array(4),Gp=new b;Fo.prototype.constructor=Fo;var Wp=function(t,e){this.signals={moved:new io,scrolled:new io,dragged:new io,dropped:new io,clicked:new io,hovered:new io};var i=Object.assign({},e);this.hoverTimeout=gr(i.hoverTimeout,50),this.handleScroll=gr(i.handleScroll,!0),this.domElement=t,this.position=new f,this.prevPosition=new f,this.down=new f,this.canvasPosition=new f,this.moving=!1,this.hovering=!0,this.scrolled=!1,this.lastMoved=1/0,this.which=void 0,this.buttons=void 0,this.pressed=void 0,this.altKey=void 0,this.ctrlKey=void 0,this.metaKey=void 0,this.shiftKey=void 0,this._listen=this._listen.bind(this),this._onMousewheel=this._onMousewheel.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMousedown=this._onMousedown.bind(this),this._onMouseup=this._onMouseup.bind(this),this._onContextmenu=this._onContextmenu.bind(this),this._onTouchstart=this._onTouchstart.bind(this),this._onTouchend=this._onTouchend.bind(this),this._onTouchmove=this._onTouchmove.bind(this),this._listen(),document.addEventListener("mousewheel",this._onMousewheel),document.addEventListener("wheel",this._onMousewheel),document.addEventListener("MozMousePixelScroll",this._onMousewheel),document.addEventListener("mousemove",this._onMousemove),document.addEventListener("mousedown",this._onMousedown),document.addEventListener("mouseup",this._onMouseup),document.addEventListener("contextmenu",this._onContextmenu),document.addEventListener("touchstart",this._onTouchstart),document.addEventListener("touchend",this._onTouchend),document.addEventListener("touchmove",this._onTouchmove)},Yp={key:{}};Yp.key.get=function(){var t=0;return this.altKey&&(t+=1),this.ctrlKey&&(t+=2),this.metaKey&&(t+=4),this.shiftKey&&(t+=8),t},Wp.prototype.setParameters=function(t){var e=Object.assign({},t);this.hoverTimeout=gr(e.hoverTimeout,this.hoverTimeout)},Wp.prototype._listen=function(){if(window.performance.now()-this.lastMoved>this.hoverTimeout&&(this.moving=!1),(this.scrolled||!this.moving&&!this.hovering)&&(this.scrolled=!1,-1!==this.hoverTimeout&&this.overElement)){this.hovering=!0;var t=this.canvasPosition;this.signals.hovered.dispatch(t.x,t.y)}window.requestAnimationFrame(this._listen)},Wp.prototype._onMousewheel=function(t){var e=this;if(t.target===this.domElement&&this.handleScroll){t.preventDefault(),this._setKeys(t);var i=0;i=t.wheelDelta?t.wheelDelta/40:t.detail?-t.detail/3:-t.deltaY/(t.deltaMode?.33:30),this.signals.scrolled.dispatch(i),setTimeout(function(){e.scrolled=!0},this.hoverTimeout)}},Wp.prototype._onMousemove=function(t){t.target===this.domElement?(t.preventDefault(),this.overElement=!0):this.overElement=!1,this._setKeys(t),this.moving=!0,this.hovering=!1,this.lastMoved=window.performance.now(),this.prevPosition.copy(this.position),this.position.set(t.clientX,t.clientY),this._setCanvasPosition(t);var e=this.prevPosition.x-this.position.x,i=this.prevPosition.y-this.position.y;this.signals.moved.dispatch(e,i),this.pressed&&this.signals.dragged.dispatch(e,i)},Wp.prototype._onMousedown=function(t){t.target===this.domElement&&(t.preventDefault(),this._setKeys(t),this.moving=!1,this.hovering=!1,this.down.set(t.clientX,t.clientY),this.position.set(t.clientX,t.clientY),this.which=t.which,this.buttons=Bo(t),this.pressed=!0,this._setCanvasPosition(t))},Wp.prototype._onMouseup=function(t){t.target===this.domElement&&t.preventDefault(),this._setKeys(t);var e=this.canvasPosition;this.signals.clicked.dispatch(e.x,e.y),this.which=void 0,this.buttons=void 0,this.pressed=void 0},Wp.prototype._onContextmenu=function(t){t.target===this.domElement&&t.preventDefault()},Wp.prototype._onTouchstart=function(t){if(t.target===this.domElement)switch(t.preventDefault(),this.pressed=!0,t.touches.length){case 1:this.moving=!1,this.hovering=!1,this.down.set(t.touches[0].pageX,t.touches[0].pageY),this.position.set(t.touches[0].pageX,t.touches[0].pageY),this._setCanvasPosition(t.touches[0]);break;case 2:this.down.set((t.touches[0].pageX+t.touches[1].pageX)/2,(t.touches[0].pageY+t.touches[1].pageY)/2),this.position.set((t.touches[0].pageX+t.touches[1].pageX)/2,(t.touches[0].pageY+t.touches[1].pageY)/2),this.lastTouchDistance=zo(t)}},Wp.prototype._onTouchend=function(t){t.target===this.domElement&&t.preventDefault(),this.pressed=!1},Wp.prototype._onTouchmove=function(t){switch(t.target===this.domElement?(t.preventDefault(),this.overElement=!0):this.overElement=!1,t.touches.length){case 1:this._setKeys(t),this.which=void 0,this.buttons=void 0,this.moving=!0,this.hovering=!1,this.lastMoved=window.performance.now(),this.prevPosition.copy(this.position),this.position.set(t.touches[0].pageX,t.touches[0].pageY),this._setCanvasPosition(t.touches[0]);var e=this.prevPosition.x-this.position.x,i=this.prevPosition.y-this.position.y;this.signals.moved.dispatch(e,i),this.pressed&&this.signals.dragged.dispatch(e,i);break;case 2:this.which=3,this.buttons=2;var n=zo(t),r=n-this.lastTouchDistance;if(this.lastTouchDistance=n,Math.abs(r)>1)this.signals.scrolled.dispatch(r/2);else{this.prevPosition.copy(this.position),this.position.set((t.touches[0].pageX+t.touches[1].pageX)/2,(t.touches[0].pageY+t.touches[1].pageY)/2);var o=this.prevPosition.x-this.position.x,s=this.prevPosition.y-this.position.y;this.signals.moved.dispatch(o,s),this.pressed&&this.signals.dragged.dispatch(o,s)}}},Wp.prototype._distance=function(){return this.position.distanceTo(this.down)},Wp.prototype._setCanvasPosition=function(t){var e,i,n=this.domElement.getBoundingClientRect();"offsetX"in t&&"offsetY"in t?(e=t.offsetX,i=t.offsetY):(e=t.clientX-n.left,i=t.clientY-n.top),this.canvasPosition.set(e,n.height-i)},Wp.prototype._setKeys=function(t){this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.metaKey=t.metaKey,this.shiftKey=t.shiftKey},Wp.prototype.dispose=function(){document.removeEventListener("mousewheel",this._onMousewheel),document.removeEventListener("wheel",this._onMousewheel),document.removeEventListener("MozMousePixelScroll",this._onMousewheel),document.removeEventListener("mousemove",this._onMousemove),document.removeEventListener("mousedown",this._onMousedown),document.removeEventListener("mouseup",this._onMouseup),document.removeEventListener("contextmenu",this._onContextmenu),document.removeEventListener("touchstart",this._onTouchstart),document.removeEventListener("touchend",this._onTouchend),document.removeEventListener("touchmove",this._onTouchmove)},Object.defineProperties(Wp.prototype,Yp);var $p=new b,qp=new b,Xp=new b,Zp=new y,Kp=new g,Qp=new b,Jp=new y,tm=function(t,e){var i=e||{};this.rotateSpeed=gr(i.rotateSpeed,2),this.zoomSpeed=gr(i.zoomSpeed,1.2),this.panSpeed=gr(i.panSpeed,1),this.stage=t,this.viewer=t.viewer,this.mouse=t.mouseObserver,this.controls=t.viewerControls},em={component:{}};em.component.get=function(){return this.stage.transformComponent},tm.prototype._setPanVector=function(t,e){var i,n=this.viewer.camera;if("OrthographicCamera"===n.type)i=1/n.zoom;else{var r=Hr(n.fov);i=-2*n.position.z*Math.tan(r/2)/this.viewer.height}Jp.set(t,e,0),Jp.multiplyScalar(this.panSpeed*i)},tm.prototype._getRotateXY=function(t,e){return[this.rotateSpeed*-t*.01,this.rotateSpeed*e*.01]},tm.prototype.zoom=function(t){this.controls.zoom(this.zoomSpeed*t*.02)},tm.prototype.pan=function(t,e){this._setPanVector(t,e),Qp.getInverse(this.viewer.rotationGroup.matrix),Jp.applyMatrix4(Qp),this.controls.translate(Jp)},tm.prototype.panComponent=function(t,e){this.component&&(this._setPanVector(t,e),Qp.extractRotation(this.component.transform),Qp.premultiply(this.viewer.rotationGroup.matrix),Qp.getInverse(Qp),Jp.applyMatrix4(Qp),this.component.position.add(Jp),this.component.updateMatrix())},tm.prototype.rotate=function(t,e){var i=this._getRotateXY(t,e),n=i[0],r=i[1];$p.makeRotationX(r),qp.makeRotationY(n),$p.multiply(qp),this.controls.applyMatrix($p)},tm.prototype.rotateComponent=function(t,e){if(this.component){var i=this._getRotateXY(t,e),n=i[0],r=i[1];Xp.extractRotation(this.component.transform),Xp.premultiply(this.viewer.rotationGroup.matrix),Xp.getInverse(Xp),Zp.set(1,0,0),Zp.applyMatrix4(Xp),$p.makeRotationAxis(Zp,r),Zp.set(0,1,0),Zp.applyMatrix4(Xp),qp.makeRotationAxis(Zp,n),$p.multiply(qp),Kp.setFromRotationMatrix($p),this.component.quaternion.premultiply(Kp),this.component.updateMatrix()}},Object.defineProperties(tm.prototype,em);var im=function(t,e){this.pid=t.pid,this.picker=t.picker,this.instance=t.instance,this.stage=e,this.controls=e.viewerControls,this.mouse=e.mouseObserver},nm={type:{},altKey:{},ctrlKey:{},metaKey:{},shiftKey:{},canvasPosition:{},component:{},object:{},position:{},closestBondAtom:{},arrow:{},atom:{},axes:{},bond:{},cone:{},clash:{},contact:{},cylinder:{},distance:{},ellipsoid:{},mesh:{},slice:{},sphere:{},surface:{},unitcell:{},unknown:{},volume:{}};nm.type.get=function(){return this.picker.type},nm.altKey.get=function(){return this.mouse.altKey},nm.ctrlKey.get=function(){return this.mouse.ctrlKey},nm.metaKey.get=function(){return this.mouse.metaKey},nm.shiftKey.get=function(){return this.mouse.shiftKey},nm.canvasPosition.get=function(){return this.mouse.canvasPosition},nm.component.get=function(){return this.stage.getComponentsByObject(this.picker.data).list[0]},nm.object.get=function(){return this.picker.getObject(this.pid)},nm.position.get=function(){return this.picker.getPosition(this.pid,this.instance,this.component)},nm.closestBondAtom.get=function(){if("bond"===this.type){var t=this.bond,e=this.controls;return jo(this.canvasPosition,e.getPositionOnCanvas(t.atom1),e.getPositionOnCanvas(t.atom2))?t.atom1:t.atom2}},nm.arrow.get=function(){return this._objectIfType("arrow")},nm.atom.get=function(){return this._objectIfType("atom")},nm.axes.get=function(){return this._objectIfType("axes")},nm.bond.get=function(){return this._objectIfType("bond")},nm.cone.get=function(){return this._objectIfType("cone")},nm.clash.get=function(){return this._objectIfType("clash")},nm.contact.get=function(){return this._objectIfType("contact")},nm.cylinder.get=function(){return this._objectIfType("cylinder")},nm.distance.get=function(){return this._objectIfType("distance")},nm.ellipsoid.get=function(){return this._objectIfType("ellipsoid")},nm.mesh.get=function(){return this._objectIfType("mesh")},nm.slice.get=function(){return this._objectIfType("slice")},nm.sphere.get=function(){return this._objectIfType("sphere")},nm.surface.get=function(){return this._objectIfType("surface")},nm.unitcell.get=function(){return this._objectIfType("unitcell")},nm.unknown.get=function(){return this._objectIfType("unknown")},nm.volume.get=function(){return this._objectIfType("volume")},im.prototype._objectIfType=function(t){return this.type===t?this.object:void 0},im.prototype.getLabel=function(){var t="nothing";return this.arrow?t="arrow: "+(this.arrow.name||this.pid)+" ("+this.arrow.shape.name+")":this.atom?t="atom: "+this.atom.qualifiedName()+" ("+this.atom.structure.name+")":this.axes?t="axes":this.bond?t="bond: "+this.bond.atom1.qualifiedName()+" - "+this.bond.atom2.qualifiedName()+" ("+this.bond.structure.name+")":this.cone?t="cone: "+(this.cone.name||this.pid)+" ("+this.cone.shape.name+")":this.clash?t="clash: "+this.clash.clash.sele1+" - "+this.clash.clash.sele2:this.contact?t="contact: "+this.contact.atom1.qualifiedName()+" - "+this.contact.atom2.qualifiedName()+" ("+this.contact.structure.name+")":this.cylinder?t="cylinder: "+(this.cylinder.name||this.pid)+" ("+this.cylinder.shape.name+")":this.distance?t="distance: "+this.distance.atom1.qualifiedName()+" - "+this.distance.atom2.qualifiedName()+" ("+this.distance.structure.name+")":this.ellipsoid?t="ellipsoid: "+(this.ellipsoid.name||this.pid)+" ("+this.ellipsoid.shape.name+")":this.mesh?t="mesh: "+(this.mesh.name||this.mesh.serial)+" ("+this.mesh.shape.name+")":this.slice?t="slice: "+this.slice.value.toPrecision(3)+" ("+this.slice.volume.name+")":this.sphere?t="sphere: "+(this.sphere.name||this.pid)+" ("+this.sphere.shape.name+")":this.surface?t="surface: "+this.surface.surface.name:this.unitcell?t="unitcell: "+this.unitcell.unitcell.spacegroup+" ("+this.unitcell.structure.name+")":this.unknown?t="unknown":this.volume&&(t="volume: "+this.volume.value.toPrecision(3)+" ("+this.volume.volume.name+")"),t},Object.defineProperties(im.prototype,nm);var rm=function(t){this.stage=t,this.viewer=t.viewer};rm.prototype.pick=function(t,e){var i=this.viewer.pick(t,e);if(i.picker&&"ignore"!==i.picker.type&&void 0!==i.pid){var n=i.picker.array;if(!(n&&i.pid>=n.length))return new im(i,this.stage);console.error("pid >= picker.array.length")}};var om=new g,sm=new y,am=new y,hm=new y,lm=new y,um=new b,dm=new y,cm=new b,fm=function(t){this.stage=t,this.viewer=t.viewer,this.signals={changed:new io}},pm={position:{},rotation:{}};pm.position.get=function(){return this.viewer.translationGroup.position},pm.rotation.get=function(){return this.viewer.rotationGroup.quaternion},fm.prototype.changed=function(){this.viewer.requestRender(),this.signals.changed.dispatch()},fm.prototype.getPositionOnCanvas=function(t,e){var i=Dr(e),n=this.viewer;return hm.copy(t).add(n.translationGroup.position).applyMatrix4(n.rotationGroup.matrix).project(n.camera),i.set((hm.x+1)*n.width/2,(hm.y+1)*n.height/2)},fm.prototype.getOrientation=function(t){var e=Rr(t);e.copy(this.viewer.rotationGroup.matrix);var i=-this.viewer.camera.position.z;return e.scale(lm.set(i,i,i)),e.setPosition(this.viewer.translationGroup.position),e},fm.prototype.orient=function(t){Rr(t).decompose(sm,om,am);var e=this.viewer;e.rotationGroup.setRotationFromQuaternion(om),e.translationGroup.position.copy(sm),e.camera.position.z=-am.z,e.updateZoom(),this.changed()},fm.prototype.translate=function(t){this.viewer.translationGroup.position.add(Ir(t)),this.changed()},fm.prototype.center=function(t){this.viewer.translationGroup.position.copy(Ir(t)).negate(),this.changed()},fm.prototype.zoom=function(t){this.distance(this.viewer.camera.position.z*(1-t))},fm.prototype.distance=function(t){this.viewer.camera.position.z=t,this.viewer.updateZoom(),this.changed()},fm.prototype.spin=function(t,e){um.getInverse(this.viewer.rotationGroup.matrix),dm.copy(Ir(t)).applyMatrix4(um),this.viewer.rotationGroup.rotateOnAxis(dm,e),this.changed()},fm.prototype.rotate=function(t){this.viewer.rotationGroup.setRotationFromQuaternion(Lr(t)),this.changed()},fm.prototype.align=function(t){cm.getInverse(Rr(t)),this.viewer.rotationGroup.setRotationFromMatrix(cm),this.changed()},fm.prototype.applyMatrix=function(t){this.viewer.rotationGroup.applyMatrix(Rr(t)),this.changed()},Object.defineProperties(fm.prototype,pm);var mm=function(t,e){for(var i=[],n=arguments.length-2;n-- >0;)i[n]=arguments[n+2];this.duration=gr(t,1e3),this.controls=e,this.startTime=window.performance.now(),this.pausedTime=-1,this.elapsedDuration=0,this.pausedDuration=0,this.ignoreGlobalToggle=!1,this._paused=!1,this._resolveList=[],(r=this)._init.apply(r,i);var r},vm={done:{},paused:{}};vm.done.get=function(){return 1===this.alpha},vm.paused.get=function(){return this._paused},mm.prototype._init=function(){},mm.prototype._tick=function(){},mm.prototype.tick=function(t){if(!this._paused)return this.elapsedDuration=t.currentTime-this.startTime-this.pausedDuration,0===this.duration?this.alpha=1:this.alpha=Qr(0,1,this.elapsedDuration/this.duration),this._tick(t),this.done&&this._resolveList.forEach(function(t){return t()}),this.done},mm.prototype.pause=function(t){t&&(this._hold=!0),-1===this.pausedTime&&(this.pausedTime=window.performance.now()),this._paused=!0},mm.prototype.resume=function(t){!t&&this._hold||(this.pausedDuration+=window.performance.now()-this.pausedTime,this._paused=!1,this._hold=!1,this.pausedTime=-1)},mm.prototype.toggle=function(){this._paused?this.resume():this.pause()},mm.prototype.then=function(t){var e,i=this;return e=this.done?Promise.resolve():new Promise(function(t){return i._resolveList.push(t)}),e.then(t)},Object.defineProperties(mm.prototype,vm);var gm=function(t){function e(e){for(var i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];t.apply(this,[gr(e,1/0)].concat(i))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._init=function(t,e){Array.isArray(t)?this.axis=(new y).fromArray(t):this.axis=gr(t,new y(0,1,0)),this.angle=gr(e,.01)},e.prototype._tick=function(t){this.axis&&this.angle&&this.controls.spin(this.axis,this.angle*t.lastDuration/16)},e}(mm),ym=function(t){function e(e){for(var i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];t.apply(this,[gr(e,1/0)].concat(i))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._init=function(t,e,i){Array.isArray(t)?this.axis=(new y).fromArray(t):this.axis=gr(t,new y(0,1,0)),this.angleStep=gr(e,.01),this.angleEnd=gr(i,.2),this.angleSum=0,this.direction=1},e.prototype._tick=function(t){if(this.axis&&this.angleStep&&this.angleEnd){var e=Qr(0,1,Math.abs(this.angleSum)/this.angleEnd),i=this.angleStep*this.direction*(1.1-e);this.controls.spin(this.axis,i*t.lastDuration/16),this.angleSum+=this.angleStep,this.angleSum>=this.angleEnd&&(this.direction*=-1,this.angleSum=-this.angleEnd)}},e}(mm),bm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._init=function(t,e){this.moveFrom=Ir(gr(t,new y)),this.moveTo=Ir(gr(e,new y))},e.prototype._tick=function(){this.controls.position.lerpVectors(this.moveFrom,this.moveTo,this.alpha).negate(),this.controls.changed()},e}(mm),_m=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._init=function(t,e){this.zoomFrom=t,this.zoomTo=e},e.prototype._tick=function(){this.controls.distance(Zr(this.zoomFrom,this.zoomTo,this.alpha))},e}(mm),wm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._init=function(t,e){this.rotateFrom=Lr(t),this.rotateTo=Lr(e),this._currentRotation=new g},e.prototype._tick=function(){this._currentRotation.copy(this.rotateFrom).slerp(this.rotateTo,this.alpha),this.controls.rotate(this._currentRotation)},e}(mm),xm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._init=function(t,e,i){this.valueFrom=t,this.valueTo=e,this.callback=i},e.prototype._tick=function(){this.callback(Zr(this.valueFrom,this.valueTo,this.alpha))},e}(mm),Sm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._init=function(t){this.callback=t},e.prototype._tick=function(){1===this.alpha&&this.callback()},e}(mm),km=function(t){this._list=t||[],this._resolveList=[]},Em={done:{}};Em.done.get=function(){return this._list.every(function(t){return t.done})},km.prototype.then=function(t){var e,i=this;return e=this.done?Promise.resolve():new Promise(function(t){i._resolveList.push(t),i._list.forEach(function(t){t.then(function(){i._resolveList.forEach(function(t){t()}),i._resolveList.length=0})})}),e.then(t)},Object.defineProperties(km.prototype,Em);var Mm=function(t){this.stage=t,this.viewer=t.viewer,this.controls=t.viewerControls,this.animationList=[],this.finishedList=[]},Tm={paused:{}};Tm.paused.get=function(){return this.animationList.every(function(t){return t.paused})},Mm.prototype.add=function(t){return 0===t.duration?t.tick(this.viewer.stats):this.animationList.push(t),t},Mm.prototype.remove=function(t){var e=this.animationList,i=e.indexOf(t);i>-1&&e.splice(i,1)},Mm.prototype.run=function(t){for(var e=this,i=this.finishedList,n=this.animationList,r=n.length,o=0;o<r;++o){var s=n[o];s.tick(t)&&i.push(s)}var a=i.length;if(a){for(var h=0;h<a;++h)e.remove(i[h]);i.length=0}},Mm.prototype.spin=function(t,e,i){return this.add(new gm(i,this.controls,t,e))},Mm.prototype.rock=function(t,e,i,n){return this.add(new ym(n,this.controls,t,e,i))},Mm.prototype.rotate=function(t,e){var i=this.viewer.rotationGroup.quaternion.clone();return this.add(new wm(e,this.controls,i,t))},Mm.prototype.move=function(t,e){var i=this.controls.position.clone().negate();return this.add(new bm(e,this.controls,i,t))},Mm.prototype.zoom=function(t,e){var i=this.viewer.camera.position.z;return this.add(new _m(e,this.controls,i,t))},Mm.prototype.zoomMove=function(t,e,i){return new km([this.move(t,i),this.zoom(e,i)])},Mm.prototype.orient=function(t,e){var i=new y,n=new g,r=new y;return Rr(t).decompose(i,n,r),new km([this.move(i.negate(),e),this.rotate(n,e),this.zoom(-r.x,e)])},Mm.prototype.value=function(t,e,i,n){return this.add(new xm(n,this.controls,t,e,i))},Mm.prototype.timeout=function(t,e){return this.add(new Sm(e,this.controls,t))},Mm.prototype.spinComponent=function(t,e,i,n){return this.add(new gm(n,t.controls,e,i))},Mm.prototype.rockComponent=function(t,e,i,n,r){return this.add(new ym(r,t.controls,e,i,n))},Mm.prototype.moveComponent=function(t,e,i){var n=t.controls.position.clone().negate();return this.add(new bm(i,t.controls,n,e))},Mm.prototype.pause=function(){this.animationList.forEach(function(t){return t.pause()})},Mm.prototype.resume=function(){this.animationList.forEach(function(t){return t.resume()})},Mm.prototype.toggle=function(){this.paused?this.resume():this.pause()},Mm.prototype.clear=function(){this.animationList.length=0},Mm.prototype.dispose=function(){this.clear()},Object.defineProperties(Mm.prototype,Tm);var Cm=function(){};Cm.zoomScroll=function(t,e){t.trackballControls.zoom(e)},Cm.clipNearScroll=function(t,e){var i=t.getParameters();t.setParameters({clipNear:i.clipNear+e/10})},Cm.focusScroll=function(t,e){var i=t.getParameters(),n=2*i.clipNear,r=Math.sign(e),o=r*Jr((100-n)/10,5,.2);t.setFocus(n+o)},Cm.isolevelScroll=function(t,e){var i=Math.sign(e)/5;t.eachRepresentation(function(t){if("surface"===t.repr.type){var e=t.getParameters().isolevel;t.setParameters({isolevel:e+i})}},"volume")},Cm.panDrag=function(t,e,i){t.trackballControls.pan(e,i)},Cm.rotateDrag=function(t,e,i){t.trackballControls.rotate(e,i)},Cm.zoomDrag=function(t,e,i){t.trackballControls.zoom((e+i)/-2)},Cm.zoomFocusDrag=function(t,e,i){t.trackballControls.zoom((e+i)/-2);var n=t.viewer.camera.position.z;t.setFocus(100-Math.abs(n/8))},Cm.panComponentDrag=function(t,e,i){t.trackballControls.panComponent(e,i)},Cm.rotateComponentDrag=function(t,e,i){t.trackballControls.rotateComponent(e,i)},Cm.movePick=function(t,e){e&&t.animationControls.move(e.position.clone())},Cm.tooltipPick=function(t,e){var i=t.tooltip;if(t.getParameters().tooltip&&e){var n=e.mouse.position;i.innerText=e.getLabel(),i.style.bottom=window.innerHeight-n.y+3+"px",i.style.left=n.x+3+"px",i.style.display="block"}else i.style.display="none"};var Om={default:[["scroll",Cm.zoomScroll],["scroll-ctrl",Cm.clipNearScroll],["scroll-shift",Cm.focusScroll],["scroll-alt",Cm.isolevelScroll],["drag-right",Cm.panDrag],["drag-left",Cm.rotateDrag],["drag-middle",Cm.zoomDrag],["drag-shift-right",Cm.zoomDrag],["drag-left+right",Cm.zoomDrag],["drag-ctrl-right",Cm.panComponentDrag],["drag-ctrl-left",Cm.rotateComponentDrag],["clickPick-middle",Cm.movePick],["hoverPick",Cm.tooltipPick]],pymol:[["drag-left",Cm.rotateDrag],["drag-middle",Cm.panDrag],["drag-right",Cm.zoomDrag],["drag-shift-right",Cm.focusScroll],["clickPick-ctrl+shift-middle",Cm.movePick],["hoverPick",Cm.tooltipPick]],coot:[["scroll",Cm.isolevelScroll],["drag-left",Cm.rotateDrag],["drag-middle",Cm.panDrag],["drag-ctrl-left",Cm.panDrag],["drag-right",Cm.zoomFocusDrag],["drag-ctrl-right",Cm.focusScroll],["clickPick-middle",Cm.movePick],["hoverPick",Cm.tooltipPick]]},Pm=function(t,e){var i=e||{};this.stage=t,this.mouse=t.mouseObserver,this.actionList=[],this.preset(i.preset||"default")};Pm.prototype.run=function(t){for(var e=this,i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];var r=this.mouse.key||0,o=this.mouse.buttons||0;this.actionList.forEach(function(n){n.type===t&&n.key===r&&n.button===o&&n.callback.apply(n,[e.stage].concat(i))})},Pm.prototype.add=function(t,e){var i=Uo(t),n=i[0],r=i[1],o=i[2];this.actionList.push({type:n,key:r,button:o,callback:e})},Pm.prototype.remove=function(t,e){var i=t.includes("*"),n=Uo(t),r=n[0],o=n[1],s=n[2],a=this.actionList.filter(function(t){return!((t.type===r||i&&""===r)&&(t.key===o||i&&0===o)&&(t.button===s||i&&0===s)&&(t.callback===e||void 0===e))});this.actionList=a},Pm.prototype.preset=function(t){var e=this;this.clear(),(Om[t]||[]).forEach(function(t){(i=e).add.apply(i,t);var i})},Pm.prototype.clear=function(){this.actionList.length=0};var Am=function(t){this.stage=t,this.mouse=t.mouseObserver,this.controls=t.mouseControls,this.mouse.signals.clicked.add(this._onClick,this),this.mouse.signals.hovered.add(this._onHover,this)};Am.prototype._onClick=function(t,e){var i=this.stage.pickingControls.pick(t,e);this.stage.signals.clicked.dispatch(i),this.controls.run("clickPick",i)},Am.prototype._onHover=function(t,e){var i=this.stage.pickingControls.pick(t,e);i&&this.mouse.down.equals(this.mouse.position)&&(this.stage.transformComponent=i.component),this.stage.signals.hovered.dispatch(i),this.controls.run("hoverPick",i)},Am.prototype.dispose=function(){this.mouse.signals.clicked.remove(this._onClick,this),this.mouse.signals.hovered.remove(this._onHover,this)};var Dm=function(t){this.stage=t,this.mouse=t.mouseObserver,this.controls=t.mouseControls,this.mouse.signals.moved.add(this._onMove,this),this.mouse.signals.scrolled.add(this._onScroll,this),this.mouse.signals.dragged.add(this._onDrag,this),this.mouse.signals.clicked.add(this._onClick,this),this.mouse.signals.hovered.add(this._onHover,this)};Dm.prototype._onMove=function(){this.stage.tooltip.style.display="none"},Dm.prototype._onScroll=function(t){this.controls.run("scroll",t)},Dm.prototype._onDrag=function(t,e){this.controls.run("drag",t,e)},Dm.prototype._onClick=function(t,e){this.controls.run("click",t,e)},Dm.prototype._onHover=function(t,e){this.controls.run("hover",t,e)},Dm.prototype.dispose=function(){this.mouse.signals.moved.remove(this._onMove,this),this.mouse.signals.scrolled.remove(this._onScroll,this),this.mouse.signals.dragged.remove(this._onDrag,this),this.mouse.signals.clicked.remove(this._onClick,this),this.mouse.signals.hovered.remove(this._onHover,this)};var Im=function(t){this.viewer=t.viewer,this.animationControls=t.animationControls,this.viewer.signals.ticked.add(this._onTick,this)};Im.prototype._onTick=function(t){this.animationControls.run(t)},Im.prototype.dispose=function(){this.viewer.signals.ticked.remove(this._onTick,this)};var Rm=function(t){this.stage=t,this._onKeydown=this._onKeydown.bind(this),this._onKeyup=this._onKeyup.bind(this),this._onKeypress=this._onKeypress.bind(this),document.addEventListener("keydown",this._onKeydown),document.addEventListener("keyup",this._onKeyup),document.addEventListener("keypress",this._onKeypress)};Rm.prototype._onKeydown=function(){},Rm.prototype._onKeyup=function(){},Rm.prototype._onKeypress=function(t){switch(t.keyCode){case 73:case 105:this.stage.toggleSpin();break;case 75:case 107:this.stage.toggleRock();break;case 80:case 112:this.stage.animationControls.toggle()}},Rm.prototype.dispose=function(){document.removeEventListener("keydown",this._onKeypress),document.removeEventListener("keyup",this._onKeypress),document.removeEventListener("keypress",this._onKeypress)};var Lm=function(t,e,i,n){var r=n||{};this.offsetX=gr(r.offsetX,0),this.offsetY=gr(r.offsetY,0),this.visible=gr(r.visible,!0),this.component=t,this.stage=t.stage,this.viewer=this.stage.viewer,this.position=e,this._viewerPosition=new y,this._updateViewerPosition(),this._canvasPosition=new y,this._cameraPosition=new y,this.element=document.createElement("div"),Object.assign(this.element.style,{display:"block",position:"fixed",zIndex:1+(parseInt(this.viewer.container.style.zIndex)||0),pointerEvents:"none",backgroundColor:"rgba( 0, 0, 0, 0.6 )",color:"lightgrey",padding:"8px",fontFamily:"sans-serif",left:"-10000px"}),this.viewer.container.appendChild(this.element),this.setContent(i),this.updateVisibility(),this.viewer.signals.ticked.add(this._update,this),this.component.signals.matrixChanged.add(this._updateViewerPosition,this)};Lm.prototype.setContent=function(t){var e=this.element.style.display;"none"===e&&(this.element.style.left="-10000px",this.element.style.display="block"),t instanceof window.Element?(this.element.innerHTML="",this.element.appendChild(t)):this.element.innerHTML=t,this._clientRect=this.element.getBoundingClientRect(),"none"===e&&(this.element.style.display=e)},Lm.prototype.setVisibility=function(t){this.visible=t,this.updateVisibility()},Lm.prototype.getVisibility=function(){return this.visible&&this.component.visible},Lm.prototype.updateVisibility=function(){this.element.style.display=this.getVisibility()?"block":"none"},Lm.prototype._updateViewerPosition=function(){this._viewerPosition.copy(this.position).applyMatrix4(this.component.matrix)},Lm.prototype._update=function(){if(this.getVisibility()){var t=this.element.style,e=this._canvasPosition,i=this._viewerPosition,n=this._clientRect;if(this._cameraPosition.copy(i).add(this.viewer.translationGroup.position).applyMatrix4(this.viewer.rotationGroup.matrix).sub(this.viewer.camera.position),this._cameraPosition.z<0)return void(t.display="none");t.display="block",t.opacity=1-Qr(this.viewer.scene.fog.near,this.viewer.scene.fog.far,this._cameraPosition.length()),this.stage.viewerControls.getPositionOnCanvas(i,e),t.bottom=this.offsetX+e.y+n.height/2+"px",t.left=this.offsetY+e.x-n.width/2+"px"}},Lm.prototype.dispose=function(){this.viewer.container.removeChild(this.element),this.viewer.signals.ticked.remove(this._update,this),this.component.signals.matrixChanged.remove(this._updateViewerPosition,this)};var Nm=new b,Fm=new y,zm=new g,Bm=function(t){this.component=t,this.stage=t.stage,this.viewer=t.stage.viewer,this.signals={changed:new io}},jm={position:{},rotation:{}};jm.position.get=function(){return this.component.position},jm.rotation.get=function(){return this.component.quaternion},Bm.prototype.changed=function(){this.component.updateMatrix(),this.viewer.requestRender(),this.signals.changed.dispatch()},Bm.prototype.spin=function(t,e){Nm.getInverse(this.viewer.rotationGroup.matrix),Fm.copy(Ir(t)).applyMatrix4(Nm),Nm.extractRotation(this.component.transform),Nm.premultiply(this.viewer.rotationGroup.matrix),Nm.getInverse(Nm),Fm.copy(Ir(t)),Fm.applyMatrix4(Nm),Nm.makeRotationAxis(Fm,e),zm.setFromRotationMatrix(Nm),this.component.quaternion.premultiply(zm),this.changed()},Object.defineProperties(Bm.prototype,jm),Jo.__deps=[ts],es.__deps=[ts,Qo];var Um=function(t){this.array=t};Um.prototype.getIndex=function(t){return this.array?this.array[t]:t},Um.prototype.getObject=function(){return{}},Um.prototype._applyTransformations=function(t,e,i){return e&&t.applyMatrix4(e.matrix),i&&t.applyMatrix4(i.matrix),t},Um.prototype._getPosition=function(){return new y},Um.prototype.getPosition=function(t,e,i){return this._applyTransformations(this._getPosition(t),e,i)};var Hm=function(t){function e(e){t.call(this),this.shape=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={data:{}};return i.data.get=function(){return this.shape},Object.defineProperties(e.prototype,i),e}(Um),Vm=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"cylinder"},e.prototype.getObject=function(t){var e=this.shape;return{shape:e,color:(new it).fromArray(e.cylinderColor,3*t),radius:e.cylinderRadius[t],position1:(new y).fromArray(e.cylinderPosition1,3*t),position2:(new y).fromArray(e.cylinderPosition2,3*t),name:e.cylinderName[t]}},e.prototype._getPosition=function(t){var e=this.shape,i=(new y).fromArray(e.cylinderPosition1,3*t),n=(new y).fromArray(e.cylinderPosition2,3*t);return i.add(n).multiplyScalar(.5)},Object.defineProperties(e.prototype,i),e}(Hm),Gm=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"arrow"},e.prototype.getObject=function(t){var e=this.shape;return{shape:e,position:this._getPosition(t),position1:(new y).fromArray(e.arrowPosition1,3*t),position2:(new y).fromArray(e.arrowPosition2,3*t),color:(new it).fromArray(e.arrowColor,3*t),radius:e.arrowRadius[t],name:e.arrowName[t]}},e.prototype._getPosition=function(t){var e=this.shape,i=(new y).fromArray(e.arrowPosition1,3*t),n=(new y).fromArray(e.arrowPosition2,3*t);return i.add(n).multiplyScalar(.5)},Object.defineProperties(e.prototype,i),e}(Hm),Wm=function(t){function e(e,i){t.call(this,e),this.structure=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{},data:{}};return i.type.get=function(){return"atom"},i.data.get=function(){return this.structure},e.prototype.getObject=function(t){return this.structure.getAtomProxy(this.getIndex(t))},e.prototype._getPosition=function(t){return(new y).copy(this.getObject(t))},Object.defineProperties(e.prototype,i),e}(Um),Ym=function(t){function e(e){t.call(this),this.axes=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{},data:{}};return i.type.get=function(){return"axes"},i.data.get=function(){return this.axes},e.prototype.getObject=function(){return{axes:this.axes}},e.prototype._getPosition=function(){return this.axes.center.clone()},Object.defineProperties(e.prototype,i),e}(Um),$m=function(t){function e(e,i,n){t.call(this,e),this.structure=i,this.bondStore=n||i.bondStore}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{},data:{}};return i.type.get=function(){return"bond"},i.data.get=function(){return this.structure},e.prototype.getObject=function(t){var e=this.structure.getBondProxy(this.getIndex(t));return e.bondStore=this.bondStore,e},e.prototype._getPosition=function(t){var e=this.getObject(t);return(new y).copy(e.atom1).add(e.atom2).multiplyScalar(.5)},Object.defineProperties(e.prototype,i),e}(Um),qm=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"contact"},Object.defineProperties(e.prototype,i),e}($m),Xm=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"cone"},e.prototype.getObject=function(t){var e=this.shape;return{shape:e,position:this._getPosition(t),position1:(new y).fromArray(e.conePosition1,3*t),position2:(new y).fromArray(e.conePosition2,3*t),color:(new it).fromArray(e.coneColor,3*t),radius:e.coneRadius[t],name:e.coneName[t]}},e.prototype._getPosition=function(t){var e=this.shape,i=(new y).fromArray(e.conePosition1,3*t),n=(new y).fromArray(e.conePosition2,3*t);return i.add(n).multiplyScalar(.5)},Object.defineProperties(e.prototype,i),e}(Hm),Zm=function(t){function e(e,i,n){t.call(this,e),this.validation=i,this.structure=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{},data:{}};return i.type.get=function(){return"clash"},i.data.get=function(){return this.validation},e.prototype.getObject=function(t){var e=this.validation,i=this.getIndex(t);return{validation:e,index:i,clash:e.clashArray[i]}},e.prototype._getAtomProxyFromSele=function(t){var e=new $f(t),i=this.structure.getAtomIndices(e)[0];return this.structure.getAtomProxy(i)},e.prototype._getPosition=function(t){var e=this.getObject(t).clash,i=this._getAtomProxyFromSele(e.sele1),n=this._getAtomProxyFromSele(e.sele2);return(new y).copy(i).add(n).multiplyScalar(.5)},Object.defineProperties(e.prototype,i),e}(Um),Km=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"distance"},Object.defineProperties(e.prototype,i),e}($m),Qm=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"ellipsoid"},e.prototype.getObject=function(t){var e=this.shape;return{shape:e,position:this._getPosition(t),color:(new it).fromArray(e.ellipsoidColor,3*t),radius:e.ellipsoidRadius[t],majorAxis:(new y).fromArray(e.ellipsoidMajorAxis,3*t),minorAxis:(new y).fromArray(e.ellipsoidMinorAxis,3*t),name:e.ellipsoidName[t]}},e.prototype._getPosition=function(t){return(new y).fromArray(this.shape.ellipsoidPosition,3*t)},Object.defineProperties(e.prototype,i),e}(Hm),Jm=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"ignore"},Object.defineProperties(e.prototype,i),e}(Um),tv=function(t){function e(e,i){t.call(this,e),this.mesh=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"mesh"},e.prototype.getObject=function(){var t=this.mesh;return{shape:this.shape,name:t.name,serial:t.serial}},e.prototype._getPosition=function(){return this.__position||(this.__position=Ho(this.mesh.position)),this.__position},Object.defineProperties(e.prototype,i),e}(Hm),ev=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"sphere"},e.prototype.getObject=function(t){var e=this.shape;return{shape:e,position:this._getPosition(t),color:(new it).fromArray(e.sphereColor,3*t),radius:e.sphereRadius[t],name:e.sphereName[t]}},e.prototype._getPosition=function(t){return(new y).fromArray(this.shape.spherePosition,3*t)},Object.defineProperties(e.prototype,i),e}(Hm),iv=function(t){function e(e,i){t.call(this,e),this.surface=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{},data:{}};return i.type.get=function(){return"surface"},i.data.get=function(){return this.surface},e.prototype.getObject=function(t){return{surface:this.surface,index:this.getIndex(t)}},e.prototype._getPosition=function(){return this.surface.center.clone()},Object.defineProperties(e.prototype,i),e}(Um),nv=function(t){function e(e,i){t.call(this),this.unitcell=e,this.structure=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{},data:{}};return i.type.get=function(){return"unitcell"},i.data.get=function(){return this.unitcell},e.prototype.getObject=function(){return{unitcell:this.unitcell,structure:this.structure}},e.prototype._getPosition=function(){return this.unitcell.getCenter(this.structure)},Object.defineProperties(e.prototype,i),e}(Um),rv=(function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};i.type.get=function(){return"unknown"},Object.defineProperties(e.prototype,i)}(Um),function(t){function e(e,i){t.call(this,e),this.volume=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{},data:{}};return i.type.get=function(){return"volume"},i.data.get=function(){return this.volume},e.prototype.getObject=function(t){var e=this.volume,i=this.getIndex(t);return{volume:e,index:i,value:e.data[i]}},e.prototype._getPosition=function(t){var e=this.volume.position,i=this.getIndex(t);return new y(e[3*i],e[3*i+1],e[3*i+2])},Object.defineProperties(e.prototype,i),e}(Um)),ov=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"slice"},Object.defineProperties(e.prototype,i),e}(rv),sv=function(t,e){this.length=t,this._words=new Uint32Array(t+32>>>5),!0===e&&this.setAll()};sv.prototype.get=function(t){return 0!==(this._words[t>>>5]&1<<t)},sv.prototype.set=function(t){this._words[t>>>5]|=1<<t},sv.prototype.clear=function(t){this._words[t>>>5]&=~(1<<t)},sv.prototype.flip=function(t){this._words[t>>>5]^=1<<t},sv.prototype._assignRange=function(t,e,i){for(var n=this._words,r=!0===i?4294967295:0,o=t>>>5,s=e>>>5,a=o;a<s;++a)n[a]=r;var h=o<<5,l=s<<5;if(!0===i)if(e-t<32)for(var u=t,d=e+1;u<d;++u)n[u>>>5]|=1<<u;else{for(var c=t,f=h;c<f;++c)n[c>>>5]|=1<<c;for(var p=l,m=e+1;p<m;++p)n[p>>>5]|=1<<p}else if(e-t<32)for(var v=t,g=e+1;v<g;++v)n[v>>>5]&=~(1<<v);else{for(var y=t,b=h;y<b;++y)n[y>>>5]&=~(1<<y);for(var _=l,w=e+1;_<w;++_)n[_>>>5]&=~(1<<_)}return this},sv.prototype.setRange=function(t,e){return this._assignRange(t,e,!0)},sv.prototype.clearRange=function(t,e){return this._assignRange(t,e,!1)},sv.prototype.setBits=function(){for(var t=arguments,e=this._words,i=arguments.length,n=0;n<i;++n){var r=t[n];e[r>>>5]|=1<<r}return this},sv.prototype.clearBits=function(){for(var t=arguments,e=this._words,i=arguments.length,n=0;n<i;++n){var r=t[n];e[r>>>5]&=~(1<<r)}return this},sv.prototype.setAll=function(){return this._assignRange(0,this.length-1,!0)},sv.prototype.clearAll=function(){return this._assignRange(0,this.length-1,!1)},sv.prototype.flipAll=function(){for(var t=this._words.length,e=this._words,i=32-this.length%32,n=0;n<t-1;++n)e[n]=~e[n];return e[t-1]=~(e[t-1]<<i)>>>i,this},sv.prototype._isRangeValue=function(t,e,i){for(var n=this._words,r=!0===i?4294967295:0,o=t>>>5,s=e>>>5,a=o;a<s;++a)if(n[a]!==r)return!1;if(e-t<32){for(var h=t,l=e+1;h<l;++h)if(!!(n[h>>>5]&1<<h)!==i)return!1}else{for(var u=o<<5,d=s<<5,c=t,f=u<<5;c<f;++c)if(!!(n[c>>>5]&1<<c)!==i)return!1;for(var p=d,m=e+1;p<m;++p)if(!!(n[p>>>5]&1<<p)!==i)return!1}return!0},sv.prototype.isRangeSet=function(t,e){return this._isRangeValue(t,e,!0)},sv.prototype.isRangeClear=function(t,e){return this._isRangeValue(t,e,!1)},sv.prototype.isAllSet=function(){return this._isRangeValue(0,this.length-1,!0)},sv.prototype.isAllClear=function(){return this._isRangeValue(0,this.length-1,!1)},sv.prototype.isSet=function(){for(var t=arguments,e=this._words,i=arguments.length,n=0;n<i;++n){var r=t[n];if(0===(e[r>>>5]&1<<r))return!1}return!0},sv.prototype.isClear=function(){for(var t=arguments,e=this._words,i=arguments.length,n=0;n<i;++n){var r=t[n];if(0!==(e[r>>>5]&1<<r))return!1}return!0},sv.prototype.isEqualTo=function(t){for(var e=this._words,i=t._words,n=Math.min(e.length,i.length),r=0;r<n;++r)if(e[r]!==i[r])return!1;return!0},sv.prototype.getSize=function(){for(var t=this._words.length,e=this._words,i=0,n=0;n<t;++n)i+=as(e[n]);return i},sv.prototype.difference=function(t){for(var e=this._words,i=t._words,n=Math.min(e.length,i.length),r=0;r<n;++r)e[r]=e[r]&~i[r];for(var o=e.length;o<n;++o)e[o]=0;return this},sv.prototype.union=function(t){for(var e=this._words,i=t._words,n=Math.min(e.length,i.length),r=0;r<n;++r)e[r]|=i[r];for(var o=e.length;o<n;++o)e[o]=0;return this},sv.prototype.intersection=function(t){for(var e=this._words,i=t._words,n=Math.min(e.length,i.length),r=0;r<n;++r)e[r]&=i[r];for(var o=e.length;o<n;++o)e[o]=0;return this},sv.prototype.intersects=function(t){for(var e=this._words,i=t._words,n=Math.min(e.length,i.length),r=0;r<n;++r)if(0!==(e[r]&i[r]))return!0;return!1},sv.prototype.getIntersectionSize=function(t){for(var e=this._words,i=t._words,n=Math.min(e.length,i.length),r=0,o=0;o<n;++o)r+=as(e[o]&i[o]);return r},sv.prototype.makeIntersection=function(t){var e=this._words,i=t._words,n=Math.min(e.length,i.length),r=new Uint32Array(n),o=Object.create(sv.prototype);o._words=r,o.length=Math.min(this.length,t.length);for(var s=0;s<n;++s)r[s]=e[s]&i[s];return o},sv.prototype.forEach=function(t){for(var e=this._words.length,i=this._words,n=0,r=0;r<e;++r)for(var o=i[r];0!==o;){var s=o&-o,a=(r<<5)+as(s-1);t(a,n),o^=s,++n}},sv.prototype.toArray=function(){for(var t=this._words,e=new Array(this.getSize()),i=this._words.length,n=0,r=0;r<i;++r)for(var o=t[r];0!==o;){var s=o&-o;e[n++]=(r<<5)+as(s-1),o^=s}return e},sv.prototype.toString=function(){return"{"+this.toArray().join(",")+"}"},sv.prototype.toSeleString=function(){var t=this.toArray().join(",");return t?"@"+t:"NONE"},sv.prototype.clone=function(){var t=Object.create(sv.prototype);return t.length=this.length,t._words=new Uint32Array(this._words),t};var av=0,hv=1,lv=2,uv=3,dv=4,cv=0,fv=["D-BETA-PEPTIDE, C-GAMMA LINKING","D-GAMMA-PEPTIDE, C-DELTA LINKING","D-PEPTIDE COOH CARBOXY TERMINUS","D-PEPTIDE NH3 AMINO TERMINUS","D-PEPTIDE LINKING","L-BETA-PEPTIDE, C-GAMMA LINKING","L-GAMMA-PEPTIDE, C-DELTA LINKING","L-PEPTIDE COOH CARBOXY TERMINUS","L-PEPTIDE NH3 AMINO TERMINUS","L-PEPTIDE LINKING","PEPTIDE LINKING","PEPTIDE-LIKE"],pv=["RNA OH 3 PRIME TERMINUS","RNA OH 5 PRIME TERMINUS","RNA LINKING"],mv=["DNA OH 3 PRIME TERMINUS","DNA OH 5 PRIME TERMINUS","DNA LINKING","L-DNA LINKING","L-RNA LINKING"],vv=["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","SACCHARIDE"],gv=["OTHER"],yv=["NON-POLYMER"],bv=yv.concat(gv,vv),_v=["h","g","i"],wv=["e","b"],xv=["s","t","l",""],Sv={H:1.1,HE:1.4,LI:1.81,BE:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,NE:1.54,NA:2.27,MG:1.73,AL:1.84,SI:2.1,P:1.8,S:1.8,CL:1.75,AR:1.88,K:2.75,CA:2.31,SC:2.3,TI:2.15,V:2.05,CR:2.05,MN:2.05,FE:2.05,CO:2,NI:2,CU:2,ZN:2.1,GA:1.87,GE:2.11,AS:1.85,SE:1.9,BR:1.83,KR:2.02,RB:3.03,SR:2.49,Y:2.4,ZR:2.3,NB:2.15,MO:2.1,TC:2.05,RU:2.05,RH:2,PD:2.05,AG:2.1,CD:2.2,IN:2.2,SN:1.93,SB:2.17,TE:2.06,I:1.98,XE:2.16,CS:3.43,BA:2.68,LA:2.5,CE:2.48,PR:2.47,ND:2.45,PM:2.43,SM:2.42,EU:2.4,GD:2.38,TB:2.37,DY:2.35,HO:2.33,ER:2.32,TM:2.3,YB:2.28,LU:2.27,HF:2.25,TA:2.2,W:2.1,RE:2.05,OS:2,IR:2,PT:2.05,AU:2.1,HG:2.05,TL:1.96,PB:2.02,BI:2.07,PO:1.97,AT:2.02,RN:2.2,FR:3.48,RA:2.83,AC:2,TH:2.4,PA:2,U:2.3,NP:2,PU:2,AM:2,CM:2,BK:2,CF:2,ES:2,FM:2,MD:2,NO:2,LR:2,RF:2,DB:2,SG:2,BH:2,HS:2,MT:2,DS:2,RG:2,CN:2,UUT:2,FL:2,UUP:2,LV:2,UUH:2},kv={H:.31,HE:.28,LI:1.28,BE:.96,B:.84,C:.76,N:.71,O:.66,F:.57,NE:.58,NA:1.66,MG:1.41,AL:1.21,SI:1.11,P:1.07,S:1.05,CL:1.02,AR:1.06,K:2.03,CA:1.76,SC:1.7,TI:1.6,V:1.53,CR:1.39,MN:1.39,FE:1.32,CO:1.26,NI:1.24,CU:1.32,ZN:1.22,GA:1.22,GE:1.2,AS:1.19,SE:1.2,BR:1.2,KR:1.16,RB:2.2,SR:1.95,Y:1.9,ZR:1.75,NB:1.64,MO:1.54,TC:1.47,RU:1.46,RH:1.42,PD:1.39,AG:1.45,CD:1.44,IN:1.42,SN:1.39,SB:1.39,TE:1.38,I:1.39,XE:1.4,CS:2.44,BA:2.15,LA:2.07,CE:2.04,PR:2.03,ND:2.01,PM:1.99,SM:1.98,EU:1.98,GD:1.96,TB:1.94,DY:1.92,HO:1.92,ER:1.89,TM:1.9,YB:1.87,LU:1.87,HF:1.75,TA:1.7,W:1.62,RE:1.51,OS:1.44,IR:1.41,PT:1.36,AU:1.36,HG:1.32,TL:1.45,PB:1.46,BI:1.48,PO:1.4,AT:1.5,RN:1.5,FR:2.6,RA:2.21,AC:2.15,TH:2.06,PA:2,U:1.96,NP:1.9,PU:1.87,AM:1.8,CM:1.69,BK:1.6,CF:1.6,ES:1.6,FM:1.6,MD:1.6,NO:1.6,LR:1.6,RF:1.6,DB:1.6,SG:1.6,BH:1.6,HS:1.6,MT:1.6,DS:1.6,RG:1.6,CN:1.6,UUT:1.6,FL:1.6,UUP:1.6,LV:1.6,UUH:1.6},Ev={ALA:[.17,.5,.33],ARG:[.81,1.81,1],ASN:[.42,.85,.43],ASP:[1.23,3.64,2.41],ASH:[-.07,.43,.5],CYS:[-.24,-.02,.22],GLN:[.58,.77,.19],GLU:[2.02,3.63,1.61],GLH:[-.01,.11,.12],GLY:[.01,1.15,1.14],HIS:[.17,.11,-.06],ILE:[-.31,-1.12,-.81],LEU:[-.56,-1.25,-.69],LYS:[.99,2.8,1.81],MET:[-.23,-.67,-.44],PHE:[-1.13,-1.71,-.58],PRO:[.45,.14,-.31],SER:[.13,.46,.33],THR:[.14,.25,.11],TRP:[-1.85,-2.09,-.24],TYR:[-.94,-.71,.23],VAL:[.07,-.46,-.53]},Mv=[0,0,0],Tv={HIS:"H",ARG:"R",LYS:"K",ILE:"I",PHE:"F",LEU:"L",TRP:"W",ALA:"A",MET:"M",PRO:"P",CYS:"C",ASN:"N",VAL:"V",GLY:"G",SER:"S",GLN:"Q",TYR:"Y",ASP:"D",GLU:"E",THR:"T",ASH:"D",GLH:"E",UNK:""},Cv=Object.keys(Tv),Ov=["A","C","T","G","U"],Pv=["DA","DC","DT","DG","DU","TCY","MCY","5CM"],Av=["A","G","DA","DG"],Dv=["SOL","WAT","HOH","H2O","W","DOD","D3O","TIP3","TIP4"],Iv=["118","119","1AL","1CU","2FK","2HP","2OF","3CO","3MT","3NI","3OF","3P8","4MO","4PU","543","6MO","ACT","AG","AL","ALF","AM","ATH","AU","AU3","AUC","AZI","BA","BCT","BEF","BF4","BO4","BR","BS3","BSY","CA","CAC","CD","CD1","CD3","CD5","CE","CHT","CL","CO","CO3","CO5","CON","CR","CS","CSB","CU","CU1","CU3","CUA","CUZ","CYN","DME","DMI","DSC","DTI","DY","E4N","EDR","EMC","ER3","EU","EU3","F","FE","FE2","FPO","GA","GD3","GEP","HAI","HG","HGC","IN","IOD","IR","IR3","IRI","IUM","K","KO4","LA","LCO","LCP","LI","LU","MAC","MG","MH2","MH3","MLI","MLT","MMC","MN","MN3","MN5","MN6","MO1","MO2","MO3","MO4","MO5","MO6","MOO","MOS","MOW","MW1","MW2","MW3","NA","NA2","NA5","NA6","NAO","NAW","NCO","NET","NH4","NI","NI1","NI2","NI3","NO2","NO3","NRU","O4M","OAA","OC1","OC2","OC3","OC4","OC5","OC6","OC7","OC8","OCL","OCM","OCN","OCO","OF1","OF2","OF3","OH","OS","OS4","OXL","PB","PBM","PD","PDV","PER","PI","PO3","PO4","PR","PT","PT4","PTN","RB","RH3","RHD","RU","SB","SCN","SE4","SEK","SM","SMO","SO3","SO4","SR","T1A","TB","TBA","TCN","TEA","TH","THE","TL","TMA","TRA","UNX","V","VN3","VO4","W","WO5","Y1","YB","YB2","YH","YT3","ZCM","ZN","ZN2","ZN3","ZNO","ZO3","OHX"],Rv=["045","0AT","0BD","0MK","0NZ","0TS","0V4","0XY","0YT","10M","147","149","14T","15L","16G","18T","18Y","1AR","1BW","1GL","1GN","1JB","1LL","1NA","1S3","26M","26Q","26R","26V","26W","26Y","27C","289","291","293","2DG","2F8","2FG","2FL","2FP","2GL","2M4","2M5","32O","34V","3CM","3DO","3DY","3FM","3LR","3MF","3MG","3SA","3ZW","46D","46M","46Z","48Z","4CQ","4GC","4NN","50A","5DI","5GF","5MM","5RP","5SA","5SP","64K","6PG","6SA","7JZ","7SA","A1Q","A2G","AAB","AAL","AAO","ABC","ABD","ABE","ABF","ABL","ACG","ACI","ACR","ACX","ADA","ADG","ADR","AF1","AFD","AFL","AFO","AFP","AFR","AGC","AGH","AGL","AHR","AIG","ALL","ALX","AMU","AOG","AOS","ARA","ARB","ARE","ARI","ASG","ASO","AXP","AXR","B0D","B16","B2G","B4G","B6D","B8D","B9D","BBK","BCD","BDG","BDP","BDR","BEM","BFP","BGC","BGL","BGP","BGS","BHG","BMA","BMX","BNG","BNX","BOG","BRI","BXF","BXP","BXX","BXY","C3X","C4X","C5X","CAP","CBI","CBK","CBS","CDR","CEG","CGF","CHO","CR1","CR6","CRA","CT3","CTO","CTR","CTT","D6G","DAF","DAG","DDA","DDB","DDL","DEL","DFR","DFX","DG0","DGC","DGD","DGM","DGS","DIG","DLF","DLG","DMU","DNO","DOM","DP5","DQQ","DQR","DR2","DR3","DR4","DRI","DSR","DT6","DVC","E4P","E5G","EAG","EBG","EBQ","EGA","EJT","EPG","ERE","ERI","F1P","F1X","F6P","FBP","FCA","FCB","FCT","FDP","FDQ","FFC","FIX","FMO","FRU","FSI","FU4","FUB","FUC","FUD","FUL","FXP","G16","G1P","G2F","G3I","G4D","G4S","G6D","G6P","G6S","GAC","GAD","GAL","GC1","GC4","GCD","GCN","GCO","GCS","GCT","GCU","GCV","GCW","GCX","GE1","GFG","GFP","GIV","GL0","GL2","GL5","GL6","GL7","GL9","GLA","GLB","GLC","GLD","GLF","GLG","GLO","GLP","GLS","GLT","GLW","GMH","GN1","GNX","GP1","GP4","GPH","GPM","GQ1","GQ2","GQ4","GS1","GS4","GSA","GSD","GTE","GTH","GTK","GTR","GTZ","GU0","GU1","GU2","GU3","GU4","GU5","GU6","GU8","GU9","GUF","GUP","GUZ","GYP","GYV","H2P","HDL","HMS","HS2","HSD","HSG","HSH","HSJ","HSQ","HSR","HSU","HSX","HSY","HSZ","IAB","IDG","IDR","IDS","IDT","IDU","IDX","IDY","IMK","IN1","IPT","ISL","KBG","KD2","KDA","KDM","KDO","KFN","KO1","KO2","KTU","L6S","LAG","LAI","LAK","LAO","LAT","LB2","LBT","LCN","LDY","LGC","LGU","LM2","LMT","LMU","LOG","LOX","LPK","LSM","LTM","LVZ","LXB","LXZ","M1F","M3M","M6P","M8C","MA1","MA2","MA3","MAB","MAG","MAL","MAN","MAT","MAV","MAW","MBG","MCU","MDA","MDM","MDP","MFA","MFB","MFU","MG5","MGA","MGL","MLB","MMA","MMN","MN0","MRP","MTT","MUG","MVP","MXY","N1L","N9S","NAA","NAG","NBG","NDG","NED","NG1","NG6","NGA","NGB","NGC","NGE","NGF","NGL","NGS","NGY","NHF","NM6","NM9","NTF","NTO","NTP","NXD","NYT","OPG","OPM","ORP","OX2","P3M","P53","P6P","PA5","PNA","PNG","PNW","PRP","PSJ","PSV","PTQ","QDK","QPS","QV4","R1P","R1X","R2B","R5P","RAA","RAE","RAF","RAM","RAO","RAT","RB5","RBL","RCD","RDP","REL","RER","RF5","RG1","RGG","RHA","RIB","RIP","RNS","RNT","ROB","ROR","RPA","RST","RUB","RUU","RZM","S6P","S7P","SA0","SCR","SDD","SF6","SF9","SG4","SG5","SG6","SG7","SGA","SGC","SGD","SGN","SGS","SHB","SHG","SI3","SIO","SOE","SOL","SSG","SUC","SUP","SUS","T6P","T6T","TAG","TCB","TDG","TGK","TGY","TH1","TIA","TM5","TM6","TM9","TMR","TMX","TOA","TOC","TRE","TYV","UCD","UDC","VG1","X0X","X1X","X2F","X4S","X5S","X6X","XBP","XDN","XDP","XIF","XIM","XLF","XLS","XMM","XUL","XXR","XYP","XYS","YO5","Z3Q","Z6J","Z9M","ZDC","ZDM"],Lv=["CA","C","N","O","O1","O2","OC1","OC2","OX1","OXT","H","H1","H2","H3","HA","BB"],Nv=["P","O3'","O5'","C5'","C4'","C3'","OP1","OP2","O3*","O5*","C5*","C4*","C3*"],Fv={};Fv[1]={trace:"CA",direction1:"C",direction2:["O","OC1","O1","OX1","OXT"],backboneStart:"N",backboneEnd:"C"},Fv[2]={trace:["C4'","C4*"],direction1:["C1'","C1*"],direction2:["C3'","C3*"],backboneStart:"P",backboneEnd:["O3'","O3*"]},Fv[3]={trace:["C3'","C3*"],direction1:["C2'","C2*"],direction2:["O4'","O4*"],backboneStart:"P",backboneEnd:["O3'","O3*"]},Fv[4]={trace:["CA","BB"],backboneStart:["CA","BB"],backboneEnd:["CA","BB"]},Fv[5]={trace:["C4'","C4*","P"],backboneStart:["C4'","C4*","P"],backboneEnd:["C4'","C4*","P"]},Fv[6]={trace:["C3'","C3*","C2'","P"],backboneStart:["C3'","C3*","C2'","P"],backboneEnd:["C3'","C3*","C2'","P"]},Fv[cv]={},hs.prototype={constructor:hs,atomRadius:function(t){var e,i=this.type,n=this.scale;switch(i){case"vdw":e=Sv[t.element]||2;break;case"covalent":e=kv[t.element]||1.6;break;case"bfactor":e=t.bfactor||1;break;case"sstruc":var r=t.sstruc;e="h"===r?.25:"g"===r?.25:"i"===r?.25:"e"===r?.25:"b"===r?.25:Nv.includes(t.atomname)?.4:.1;break;default:e=i||1}return Math.min(e*n,this.max)}},hs.types={"":"",vdw:"by vdW radius",covalent:"by covalent radius",sstruc:"by secondary structure",bfactor:"by bfactor",size:"size"},ls.prototype={copyTo:function(t){t.data.set(this.data)}};var zv=1.192092896e-7,Bv=1e-37;Es.__deps=[Ss],Ms.__deps=[Ss],Ts.__deps=[Ss],Os.__deps=[qo,Xo];var jv=new y(-1,-1,-1),Uv=new b,Hv=function(t){var e=t.rows,i=e/3,n=new ls(e,3),r=new ls(3,3),o=new ls(1,3),s=new ls(3,3),a=new ls(3,3),h=ms(t);vs(t,h),us(n,t),ds(r,n,n),ws(r,o,s,a);var l=new y(h[0],h[1],h[2]),u=new y(s.data[0],s.data[3],s.data[6]),d=new y(s.data[1],s.data[4],s.data[7]),c=new y(s.data[2],s.data[5],s.data[8]),f=u.clone().multiplyScalar(Math.sqrt(o.data[0]/i)),p=d.clone().multiplyScalar(Math.sqrt(o.data[1]/i)),m=c.clone().multiplyScalar(Math.sqrt(o.data[2]/i));this.begA=l.clone().sub(f),this.endA=l.clone().add(f),this.begB=l.clone().sub(p),this.endB=l.clone().add(p),this.begC=l.clone().sub(m),this.endC=l.clone().add(m),this.center=l,this.vecA=f,this.vecB=p,this.vecC=m,this.normVecA=u,this.normVecB=d,this.normVecC=c};Hv.prototype.getBasisMatrix=function(t){var e=t||new b;return e.makeBasis(this.normVecB,this.normVecA,this.normVecC),e.determinant()<0&&e.scale(jv),e},Hv.prototype.getRotationQuaternion=function(t){var e=t||new g;return e.setFromRotationMatrix(this.getBasisMatrix(Uv)),e.inverse()},Hv.prototype.getProjectedScaleForAtoms=function(t){var e=-1/0,i=-1/0,n=-1/0,r=-1/0,o=-1/0,s=-1/0,a=new y,h=new y,l=this.center,u=this.normVecA,d=this.normVecB,c=this.normVecC;return t.eachAtom(function(t){Vo(a.copy(t),u,l);var f=h.subVectors(a,l).normalize().dot(u),p=a.distanceTo(l);f>0?p>e&&(e=p):p>i&&(i=p),Vo(a.copy(t),d,l);var m=h.subVectors(a,l).normalize().dot(d),v=a.distanceTo(l);m>0?v>n&&(n=v):v>r&&(r=v),Vo(a.copy(t),c,l);var g=h.subVectors(a,l).normalize().dot(c),y=a.distanceTo(l);g>0?y>o&&(o=y):y>s&&(s=y)}),{d1a:e,d2a:n,d3a:o,d1b:-i,d2b:-r,d3b:-s}},As.prototype.constructor=As,Ds.prototype.constructor=Ds,Ns.__deps=[Is,Rs,Ls,Or],Fs.__deps=[zs],zs.__deps=[Zo,Xo,Ko,$o],js.__deps=[Hr,is,ns,Jo,ts,rs,os,Zo,ss,xs,ks,Ms,Es,Ts];var Vv=function(t,e,i){this.name=t||"",this.path=e||"",this.info={},this.center=new y,this.boundingBox=new lt,i instanceof kt||i instanceof At||i instanceof Fe?this.fromGeometry(i):i&&(this.set(i.position,i.index,i.normal,i.color,i.atomindex,i.contour),this.boundingBox.setFromArray(i.position),this.boundingBox.getCenter(this.center))},Gv={type:{}};Gv.type.get=function(){return"Surface"},Vv.prototype.set=function(t,e,i,n,r,o){this.position=t,this.index=e,this.normal=i,this.color=n,this.atomindex=r,this.size=t.length/3,this.contour=o},Vv.prototype.fromGeometry=function(t){rp&&np.time("GeometrySurface.fromGeometry");var e;t instanceof kt?(t.computeVertexNormals(!0),e=(new At).fromGeometry(t)):e=t instanceof At?t:t[0],e.boundingBox||e.computeBoundingBox(),this.boundingBox.copy(e.boundingBox),this.boundingBox.getCenter(this.center);var i,n,r;if(e instanceof At){var o=e.attributes,s=!!o.normal&&o.normal.array;(!s||0===s[0]&&0===s[1]&&0===s[2])&&e.computeVertexNormals(),i=o.position.array,n=o.index?o.index.array:null,r=o.normal.array}this.set(i,n,r,void 0,void 0),rp&&np.timeEnd("GeometrySurface.setGeometry")},Vv.prototype.getPosition=function(){return this.position},Vv.prototype.getColor=function(t){var e=t||{};e.surface=this;var i=this.size,n=new Float32Array(3*i),r=ap.getScheme(e);if(r.volumeColor||"random"===e.scheme)for(var o=0;o<i;++o)r.volumeColorToArray(o,n,3*o);else if(r.positionColor)for(var s=new y,a=this.position,h=0;h<i;++h){var l=3*h;s.set(a[l],a[l+1],a[l+2]),r.positionColorToArray(s,n,l)}else if(r.atomColor&&this.atomindex)for(var u=e.structure.getAtomProxy(),d=this.atomindex,c=0;c<i;++c)u.index=d[c],r.atomColorToArray(u,n,3*c);else{var f=new it(e.value);bo(i,f.r,f.g,f.b,n)}return n},Vv.prototype.getPicking=function(t){return this.atomindex&&t?new Wm(this.atomindex,t):new iv(wo(this.size),this)},Vv.prototype.getNormal=function(){return this.normal},Vv.prototype.getSize=function(t,e){return yo(this.size,t*e)},Vv.prototype.getIndex=function(){return this.index},Vv.prototype.getFilteredIndex=function(t,e){if(t&&this.atomindex){for(var i=new $f(t),n=e.getAtomSet(i),r=[],o=this.atomindex,s=this.index,a=s.length,h=this.contour?2:3,l=0,u=0;u<a;u+=h){for(var d=!0,c=0;c<h;c++){var f=s[u+c],p=o[f];if(!n.get(p)){d=!1;break}}if(d)for(var m=0;m<h;m++,l++)r[l]=s[u+m]}return Or(r,this.position.length/3)}return this.index},Vv.prototype.getAtomindex=function(){return this.atomindex},Vv.prototype.dispose=function(){},Object.defineProperties(Vv.prototype,Gv),Us.__deps=[Fs,zs,Ns,Wo,Yo,Cs,Os],sp.add("surf",function(t,e){var i=t.data.args,n=t.data.params;if(i&&(self.volsurf=new Us(i[0],i[1],i[2],i[3],i[4])),n){var r=self.volsurf.getSurface(n.isolevel,n.smooth,n.box,n.matrix,n.contour,n.wrap),o=[r.position.buffer,r.index.buffer];r.normal&&o.push(r.normal.buffer),r.atomindex&&o.push(r.atomindex.buffer);e({sd:r,p:n},o)}},[Us]);var Wv=function(t,e,i,n,r,o,s){this.name=t,this.path=e,this.matrix=new b,this.normalMatrix=new dt,this.inverseMatrix=new b,this.center=new y,this.boundingBox=new lt,this.setData(i,n,r,o,s)},Yv={type:{},position:{},min:{},max:{},sum:{},mean:{},rms:{}};Yv.type.get=function(){return"Volume"},Wv.prototype.setData=function(t,e,i,n,r){this.nx=e||1,this.ny=i||1,this.nz=n||1,this.data=t||new Float32Array(1),this.setAtomindex(r),delete this._position,delete this._min,delete this._max,delete this._mean,delete this._rms,this.worker&&this.worker.terminate()},Wv.prototype.setMatrix=function(t){this.matrix.copy(t);var e=this.boundingBox,i=this.center,n=this.nx-1,r=this.ny-1,o=this.nz-1;e.makeEmpty(),e.expandByPoint(i.set(n,r,o)),e.expandByPoint(i.set(n,r,0)),e.expandByPoint(i.set(n,0,o)),e.expandByPoint(i.set(n,0,0)),e.expandByPoint(i.set(0,r,o)),e.expandByPoint(i.set(0,0,o)),e.expandByPoint(i.set(0,r,0)),e.expandByPoint(i.set(0,0,0)),e.applyMatrix4(this.matrix),e.getCenter(this.center);var s=this.matrix.elements,a=new y(s[0],s[1],s[2]),h=new y(s[4],s[5],s[6]),l=new y(s[8],s[9],s[10]),u=new y,d=this.normalMatrix.elements;u.crossVectors(h,l),d[0]=u.x,d[1]=u.y,d[2]=u.z,u.crossVectors(l,a),d[3]=u.x,d[4]=u.y,d[5]=u.z,u.crossVectors(a,h),d[6]=u.x,d[7]=u.y,d[8]=u.z,this.inverseMatrix.getInverse(this.matrix)},Wv.prototype.setAtomindex=function(t){this.atomindex=t},Wv.prototype.getBox=function(t,e,i){return i||(i=new lt),i.set(t,t),i.expandByScalar(e),i.applyMatrix4(this.inverseMatrix),i.min.round(),i.max.round(),i},Wv.prototype._getBox=function(t,e){if(t&&e){this.__box||(this.__box=new lt);var i=this.getBox(t,e,this.__box);return[i.min.toArray(),i.max.toArray()]}},Wv.prototype._makeSurface=function(t,e,i){var n=this.name+"@"+e.toPrecision(2),r=new Vv(n,"",t);return r.info.isolevel=e,r.info.smooth=i,r.info.volume=this,r},Wv.prototype.getSurface=function(t,e,i,n,r,o){t=isNaN(t)?this.getValueForSigma(2):t,e=gr(e,0),void 0===this.volsurf&&(this.volsurf=new Us(this.data,this.nx,this.ny,this.nz,this.atomindex));var s=this._getBox(i,n),a=this.volsurf.getSurface(t,e,s,this.matrix.elements,r,o);return this._makeSurface(a,t,e)},Wv.prototype.getSurfaceWorker=function(t,e,i,n,r,o,s){var a=this;if(t=isNaN(t)?this.getValueForSigma(2):t,e=e||0,window.Worker){void 0===this.workerPool&&(this.workerPool=new Ds("surf",2));var h={},l=this.workerPool.getNextWorker();0===l.postCount&&(h.args=[this.data,this.nx,this.ny,this.nz,this.atomindex]),h.params={isolevel:t,smooth:e,box:this._getBox(i,n),matrix:this.matrix.elements,contour:r,wrap:o},l.post(h,void 0,function(t){var e=t.data.sd,i=t.data.p;s(a._makeSurface(e,i.isolevel,i.smooth))},function(h){console.warn("Volume.getSurfaceWorker error - trying without worker",h);var l=a.getSurface(t,e,i,n,r,o);s(l)})}else{var u=this.getSurface(t,e,i,n,r,o);s(u)}},Wv.prototype.getValueForSigma=function(t){return this.mean+gr(t,2)*this.rms},Wv.prototype.getSigmaForValue=function(t){return(gr(t,0)-this.mean)/this.rms},Yv.position.get=function(){if(!this._position){for(var t=this.nz,e=this.ny,i=this.nx,n=new Float32Array(i*e*t*3),r=0,o=0;o<t;++o)for(var s=0;s<e;++s)for(var a=0;a<i;++a)n[r+0]=a,n[r+1]=s,n[r+2]=o,r+=3;Wo(this.matrix.elements,n),this._position=n}return this._position},Wv.prototype.getDataAtomindex=function(){return this.atomindex},Wv.prototype.getDataPosition=function(){return this.position},Wv.prototype.getDataColor=function(t){var e=t||{};e.volume=this,e.scale=e.scale||"Spectral",e.domain=e.domain||[this.min,this.max];for(var i=ap.getScheme(e),n=this.position.length/3,r=new Float32Array(3*n),o=0;o<n;++o)i.volumeColorToArray(o,r,3*o);return r},Wv.prototype.getDataPicking=function(){var t=wo(this.position.length/3);return new rv(t,this)},Wv.prototype.getDataSize=function(t,e){var i,n=this.data,r=this.position.length/3;switch(t){case"value":i=new Float32Array(n);break;case"abs-value":i=new Float32Array(n);for(var o=0;o<r;++o)i[o]=Math.abs(i[o]);break;case"value-min":i=new Float32Array(n);for(var s=this.min,a=0;a<r;++a)i[a]-=s;break;case"deviation":i=new Float32Array(n);break;default:i=yo(r,t)}if(1!==e)for(var h=0;h<r;++h)i[h]*=e;return i},Yv.min.get=function(){return void 0===this._min&&(this._min=Co(this.data)),this._min},Yv.max.get=function(){return void 0===this._max&&(this._max=To(this.data)),this._max},Yv.sum.get=function(){return void 0===this._sum&&(this._sum=Oo(this.data)),this._sum},Yv.mean.get=function(){return void 0===this._mean&&(this._mean=Po(this.data)),this._mean},Yv.rms.get=function(){return void 0===this._rms&&(this._rms=Ao(this.data)),this._rms},Wv.prototype.clone=function(){var t=new Wv(this.name,this.path,this.data,this.nx,this.ny,this.nz,this.atomindex);return t.matrix.copy(this.matrix),t.header=Object.assign({},this.header),t},Wv.prototype.dispose=function(){this.workerPool&&this.workerPool.terminate()},Object.defineProperties(Wv.prototype,Yv);var $v=function(t,e,i,n){this.volume=t,this.setFilter(e,i,n)},qv={header:{},matrix:{},normalMatrix:{},inverseMatrix:{},center:{},boundingBox:{},min:{},max:{},mean:{},rms:{}};qv.header.get=function(){return this.volume.header},qv.matrix.get=function(){return this.volume.matrix},qv.normalMatrix.get=function(){return this.volume.normalMatrix},qv.inverseMatrix.get=function(){return this.volume.inverseMatrix},qv.center.get=function(){return this.volume.center},qv.boundingBox.get=function(){return this.volume.boundingBox},qv.min.get=function(){return this.volume.min},qv.max.get=function(){return this.volume.max},qv.mean.get=function(){return this.volume.mean},qv.rms.get=function(){return this.volume.rms},$v.prototype._getFilterHash=function(t,e,i){return JSON.stringify([t,e,i])},$v.prototype.setFilter=function(t,e,i){isNaN(t)&&this.header&&(t=this.header.DMEAN+2*this.header.ARMS),t=void 0===t||isNaN(t)?-1/0:t,e=gr(e,1/0),i=gr(i,!1);var n=this.volume.data,r=this.volume.position,o=this.volume.atomindex,s=this._getFilterHash(t,e,i);if(s!==this._filterHash){if(t===-1/0&&e===1/0)this.data=n,this.position=r,this.atomindex=o;else{var a=n.length;this._dataBuffer||(this._dataBuffer=new ArrayBuffer(4*a),this._positionBuffer=new ArrayBuffer(3*a*4),o&&(this._atomindexBuffer=new ArrayBuffer(4*a)));var h,l=new Float32Array(this._dataBuffer),u=new Float32Array(this._positionBuffer);o&&(h=new Uint32Array(this._atomindexBuffer));for(var d=0,c=0;c<a;++c){var f=3*c,p=n[c];if(!i&&p>=t&&p<=e||i&&(p<t||p>e)){var m=3*d;l[d]=p,u[m+0]=r[f+0],u[m+1]=r[f+1],u[m+2]=r[f+2],o&&(h[d]=o[c]),d+=1}}this.data=new Float32Array(this._dataBuffer,0,d),this.position=new Float32Array(this._positionBuffer,0,3*d),o&&(this.atomindex=new Float32Array(this._atomindexBuffer,0,d))}this._filterHash=s}},Object.defineProperties($v.prototype,qv),$v.prototype.getValueForSigma=Wv.prototype.getValueForSigma,$v.prototype.getSigmaForValue=Wv.prototype.getSigmaForValue,$v.prototype.getDataAtomindex=Wv.prototype.getDataAtomindex,$v.prototype.getDataPosition=Wv.prototype.getDataPosition,$v.prototype.getDataColor=Wv.prototype.getDataColor,$v.prototype.getDataPicking=Wv.prototype.getDataPicking,$v.prototype.getDataSize=Wv.prototype.getDataSize;var Xv=function(t,e){rp&&np.time("BondHash init");for(var i=t.count,n=t.atomIndex1,r=t.atomIndex2,o=new Uint8Array(e),s=new Int32Array(e),a=0;a<i;++a)o[n[a]]+=1,o[r[a]]+=1;for(var h=1;h<e;++h)s[h]+=s[h-1]+o[h-1];for(var l=2*i,u=new Int32Array(l),d=0;d<l;++d)u[d]=-1;for(var c=0;c<i;++c){for(var f=n[c],p=r[c],m=s[f];-1!==u[m];)m+=1;u[m]=c;for(var v=s[p];-1!==u[v];)v+=1;u[v]=c}rp&&np.timeEnd("BondHash init"),this.countArray=o,this.offsetArray=s,this.indexArray=u},Zv=function(t){Number.isInteger(t)?this._init(t):this._init(0)};Zv.prototype._init=function(t){var e=this;this.length=t,this.count=0;for(var i=0,n=this.__fields.length;i<n;++i){var r=e.__fields[i][0],o=e.__fields[i][1],s=e.__fields[i][2],a=e.length*o;e[r]=Cr(s,a)}},Zv.prototype.resize=function(t){var e=this;this.length=Math.round(t||0),this.count=Math.min(this.count,this.length);for(var i=0,n=this.__fields.length;i<n;++i){var r=e.__fields[i][0],o=e.__fields[i][1],s=e.length*o,a=new e[r].constructor(s);e[r].length>s?a.set(e[r].subarray(0,s)):a.set(e[r]),e[r]=a}},Zv.prototype.growIfFull=function(){if(this.count>=this.length){var t=Math.round(1.5*this.length);this.resize(Math.max(256,t))}},Zv.prototype.copyFrom=function(t,e,i,n){for(var r=this,o=0,s=this.__fields.length;o<s;++o)for(var a=r.__fields[o][0],h=r.__fields[o][1],l=r[a],u=t[a],d=0;d<n;++d)for(var c=h*(e+d),f=h*(i+d),p=0;p<h;++p)l[c+p]=u[f+p]},Zv.prototype.copyWithin=function(t,e,i){for(var n=this,r=0,o=this.__fields.length;r<o;++r)for(var s=n.__fields[r][0],a=n.__fields[r][1],h=n[s],l=0;l<i;++l)for(var u=a*(t+l),d=a*(e+l),c=0;c<a;++c)h[u+c]=h[d+c]},Zv.prototype.sort=function(t){function e(t,e){t!==e&&(r.copyFrom(n,0,t,1),n.copyWithin(t,e,1),n.copyFrom(r,e,0,1))}function i(n,r){if(n<r){var o=Math.floor((n+r)/2),s=n,a=r;do{for(;t(s,o)<0;)s+=1;for(;t(a,o)>0;)a-=1;s<=a&&(s===o?o=a:a===o&&(o=s),e(s,a),s+=1,a-=1)}while(s<=a);i(n,a),i(s,r)}}np.time("Store.sort");var n=this,r=new this.constructor(1);i(0,this.count-1),np.timeEnd("Store.sort")},Zv.prototype.clear=function(){this.count=0},Zv.prototype.dispose=function(){var t=this;delete this.length,delete this.count;for(var e=0,i=this.__fields.length;e<i;++e){delete t[t.__fields[e][0]]}};var Kv=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={__fields:{}};return i.__fields.get=function(){return[["atomIndex1",1,"int32"],["atomIndex2",1,"int32"],["bondOrder",1,"int8"]]},e.prototype.addBond=function(t,e,i){this.growIfFull();var n=this.count,r=t.index,o=e.index;r<o?(this.atomIndex1[n]=r,this.atomIndex2[n]=o):(this.atomIndex2[n]=r,this.atomIndex1[n]=o),i&&(this.bondOrder[n]=i),this.count+=1},e.prototype.addBondIfConnected=function(t,e,i){return!!t.connectedTo(e)&&(this.addBond(t,e,i),!0)},Object.defineProperties(e.prototype,i),e}(Zv),Qv=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={__fields:{}};return i.__fields.get=function(){return[["residueIndex",1,"uint32"],["atomTypeId",1,"uint16"],["x",1,"float32"],["y",1,"float32"],["z",1,"float32"],["serial",1,"int32"],["bfactor",1,"float32"],["altloc",1,"uint8"],["occupancy",1,"float32"]]},e.prototype.setAltloc=function(t,e){this.altloc[t]=e.charCodeAt(0)},e.prototype.getAltloc=function(t){var e=this.altloc[t];return e?String.fromCharCode(e):""},Object.defineProperties(e.prototype,i),e}(Zv),Jv=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={__fields:{}};return i.__fields.get=function(){return[["chainIndex",1,"uint32"],["atomOffset",1,"uint32"],["atomCount",1,"uint16"],["residueTypeId",1,"uint16"],["resno",1,"int32"],["sstruc",1,"uint8"],["inscode",1,"uint8"]]},e.prototype.setSstruc=function(t,e){this.sstruc[t]=e.charCodeAt(0)},e.prototype.getSstruc=function(t){var e=this.sstruc[t];return e?String.fromCharCode(e):""},e.prototype.setInscode=function(t,e){this.inscode[t]=e.charCodeAt(0)},e.prototype.getInscode=function(t){var e=this.inscode[t];return e?String.fromCharCode(e):""},Object.defineProperties(e.prototype,i),e}(Zv),tg=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={__fields:{}};return i.__fields.get=function(){return[["entityIndex",1,"uint16"],["modelIndex",1,"uint16"],["residueOffset",1,"uint32"],["residueCount",1,"uint32"],["chainname",4,"uint8"],["chainid",4,"uint8"]]},e.prototype.setChainname=function(t,e){var i=4*t;this.chainname[i]=e.charCodeAt(0),this.chainname[i+1]=e.charCodeAt(1),this.chainname[i+2]=e.charCodeAt(2),this.chainname[i+3]=e.charCodeAt(3)},e.prototype.getChainname=function(t){for(var e=this,i="",n=0;n<4;++n){var r=e.chainname[4*t+n];if(!r)break;i+=String.fromCharCode(r)}return i},e.prototype.setChainid=function(t,e){var i=4*t;this.chainid[i]=e.charCodeAt(0),this.chainid[i+1]=e.charCodeAt(1),this.chainid[i+2]=e.charCodeAt(2),this.chainid[i+3]=e.charCodeAt(3)},e.prototype.getChainid=function(t){for(var e=this,i="",n=0;n<4;++n){var r=e.chainid[4*t+n];if(!r)break;i+=String.fromCharCode(r)}return i},Object.defineProperties(e.prototype,i),e}(Zv),eg=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={__fields:{}};return i.__fields.get=function(){return[["chainOffset",1,"uint32"],["chainCount",1,"uint32"]]},Object.defineProperties(e.prototype,i),e}(Zv);Hs.prototype={constructor:Hs,getCenterIterator:function(t){function e(){var t=this.get(a);return a+=1,t}function i(e){e=Math.min(o-1,Math.max(0,e));var i=h[s%4],n=3*e;if(i.fromArray(r,n),t){var a,l,u,d=Math.min(t,e,o-e-1);for(l=1;l<=d;++l)a=3*l,u=(d+1-l)/(d+1),i.x+=u*r[n-a+0]+u*r[n+a+0],i.y+=u*r[n-a+1]+u*r[n+a+1],i.z+=u*r[n-a+2]+u*r[n+a+2];i.x/=d+1,i.y/=d+1,i.z/=d+1}return s+=1,i}function n(){s=0,a=-1}var r=this.getPosition().center,o=r.length/3,s=0,a=-1,h=[new y,new y,new y,new y];return{size:o,next:e,get:i,reset:n}},getColor:function(t){var e=this.polymer,i=e.structure,n=e.residueCount,r=e.residueIndexStart,o=new Float32Array(3*n),s=t||{};s.structure=i;for(var a=ap.getScheme(s),h=i.getResidueProxy(),l=i.getAtomProxy(),u=0;u<n;++u)h.index=r+u,l.index=h.traceAtomIndex,a.atomColorToArray(l,o,3*u);return{color:o}},getPicking:function(){for(var t=this.polymer,e=t.structure,i=t.residueCount,n=t.residueIndexStart,r=new Float32Array(i),o=e.getResidueProxy(),s=0;s<i;++s)o.index=n+s,r[s]=o.traceAtomIndex;return{picking:new Wm(r,e)}},getSize:function(t,e){for(var i=this.polymer,n=i.structure,r=i.residueCount,o=i.residueIndexStart,s=new Float32Array(r),a=new hs(t,e),h=n.getResidueProxy(),l=n.getAtomProxy(),u=0;u<r;++u)h.index=o+u,l.index=h.traceAtomIndex,s[u]=a.atomRadius(l);return{size:s}},getPosition:function(){var t,e,i,n,r,o=this.polymer,s=o.structure,a=o.residueCount,h=a-3,l=new Float32Array(3*a),u=new Float32Array(3*a),d=new Float32Array(a),c=new Float32Array(a),f=new Float32Array(a),p=new Float32Array(a),m=new Float32Array(3*a),v=new y,g=new y,b=new y,_=new y,w=new y,x=new y,S=new y,k=new y,E=new y,M=new y,T=new y,C=new y(0,0,0),O="trace",P=s.getAtomProxy(),A=s.getAtomProxy(o.getAtomIndexByType(0,O)),D=s.getAtomProxy(o.getAtomIndexByType(1,O)),I=s.getAtomProxy(o.getAtomIndexByType(2,O));for(i=0;i<h;++i)P.index=A.index,A.index=D.index,D.index=I.index,I.index=o.getAtomIndexByType(i+3,O),e=3*i,v.subVectors(A,P),g.subVectors(D,A),b.subVectors(I,D),_.subVectors(v,g),w.subVectors(g,b),E.crossVectors(_,w).normalize(),E.toArray(u,e),i>0&&(d[i]=E.angleTo(M)),t=Math.cos(_.angleTo(w)),p[i]=180/Math.PI*Math.acos(t),n=_.length(),r=w.length(),c[i]=Math.sqrt(r*n)/Math.max(2,2*(1-t)),f[i]=Math.abs(g.dot(E)),x.copy(_).multiplyScalar(c[i]/n),S.copy(w).multiplyScalar(c[i]/r),x.subVectors(A,x),S.subVectors(D,S),x.toArray(l,e+3),S.toArray(l,e+6),T.subVectors(P,C),T.toArray(m,e),M.copy(E),C.copy(x);for(x.fromArray(l,3),S.fromArray(l,6),E.subVectors(x,S).normalize(),P.index=o.getAtomIndexByType(0,O),C.copy(P),k.copy(P),Vo(k,E,x),k.toArray(l,0),T.subVectors(C,x),T.toArray(m,0),x.fromArray(l,3*a-6),S.fromArray(l,3*a-9),E.subVectors(x,S).normalize(),P.index=o.getAtomIndexByType(a-1,O),C.copy(P),k.copy(P),Vo(k,E,x),k.toArray(l,3*a-3),i=a-3;i<a;++i)x.fromArray(l,3*i),P.index=o.getAtomIndexByType(i,O),C.copy(P),T.subVectors(C,x),T.toArray(m,3*i);var R=new Float32Array(a),L=new Float32Array(a),N=new Float32Array(a),F=new Float32Array(a);for(R[1]=c[0],L[1]=p[0],N[1]=c[0],i=2;i<a-2;++i)R[i]=.5*(c[i-2]+c[i-1]),L[i]=.5*(p[i-2]+p[i-1]),N[i]=.5*(f[i-2]+f[i-1]),x.fromArray(u,3*(i-2)),S.fromArray(u,3*(i-1)),F[i]=180/Math.PI*Math.acos(Math.cos(x.angleTo(S)));R[a-2]=c[a-4],L[a-2]=p[a-4],N[a-2]=f[a-4];var z=new Float32Array(3*a);for(ko(u,z,0,0,3),ko(u,z,0,3,3),i=2;i<a-2;++i)x.fromArray(u,3*(i-2)),S.fromArray(u,3*(i-1)),E.addVectors(S,x).multiplyScalar(.5).normalize(),E.toArray(z,3*i);return ko(u,z,3*a-12,3*a-6,3),ko(u,z,3*a-12,3*a-3,3),{center:l,axis:z,bending:F,radius:R,rise:N,twist:L,resdir:m}}},Vs.prototype={constructor:Vs,getAxis:function(t,e,i,n,r,o){t=t||30,e=e||2.5,i=void 0!==i&&i;var s=this.polymer,a=s.structure,h=s.residueCount,l=s.residueIndexStart,u=this.position,d=n||{};d.structure=a;for(var c,f,p=ap.getScheme(d),m=new hs(r,o),v=0,g=0,b=[],_=[],w=[],x=[],S=[],k=[],E=[],M=[],T=[],C=[],O=[],P=new y,A=new y,D=a.getResidueProxy(),I=a.getResidueProxy(),R=a.getAtomProxy(),L=new y,N=new y,F=!1,z=0;z<h;++z)if(D.index=l+z,L.fromArray(u.center,3*z),z===h-1?F=!0:(I.index=l+z+1,N.fromArray(u.center,3*z+3),i&&D.sstruc!==I.sstruc?F=!0:L.distanceTo(N)>e?F=!0:u.bending[z]>t&&(F=!0)),F){if(z-v<4){v=z,F=!1;continue}R.index=D.traceAtomIndex,C=u.axis.subarray(3*v+3,3*z),O=u.center.subarray(3*v,3*z+3),c=Ho(C).normalize(),f=Ho(O),P.fromArray(O),Vo(P,c,f),A.fromArray(O,O.length-3),Vo(A,c,f),c.subVectors(A,P),c.toArray(b,g),f.toArray(_,g),P.toArray(w,g),A.toArray(x,g),p.atomColorToArray(R,S,g),k.push(R.index),E.push(m.atomRadius(R)),M.push(l+v),T.push(l+z+1-v),g+=3,v=z,F=!1}var B=new Float32Array(k);return{axis:new Float32Array(b),center:new Float32Array(_),begin:new Float32Array(w),end:new Float32Array(x),color:new Float32Array(S),picking:new Wm(B,a),size:new Float32Array(E),residueOffset:M,residueCount:T}}},Gs.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var e=this,i=this.content.length,n=0;n<i;n++)if(e.content[n]===t){var r=e.content.pop();return void(n!==i-1&&(e.content[n]=r,e.scoreFunction(r)<e.scoreFunction(t)?e.bubbleUp(n):e.sinkDown(n)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this,i=this.content[t];t>0;){var n=Math.floor((t+1)/2)-1,r=e.content[n];if(!(e.scoreFunction(i)<e.scoreFunction(r)))break;e.content[n]=i,e.content[t]=r,t=n}},sinkDown:function(t){for(var e,i,n=this,r=this.content.length,o=this.content[t],s=this.scoreFunction(o);;){var a=2*(t+1),h=a-1,l=null;if(h<r){var u=n.content[h];e=n.scoreFunction(u),e<s&&(l=h)}if(a<r){var d=n.content[a];i=n.scoreFunction(d),i<(null===l?s:e)&&(l=a)}if(null===l)break;n.content[t]=n.content[l],n.content[l]=o,t=l}}},Ys.prototype={nearest:function(){var t=new Float32Array(3);return function(e,i,n){e.toArray?e.toArray(t):e.positionToArray&&e.positionToArray(t);for(var r=this.kdtree.nearest(t,i,n),o=this.kdtree.indices,s=this.kdtree.nodes,a=this.atomIndices,h=[],l=0,u=r.length;l<u;++l){var d=r[l],c=d[0],f=d[1];h.push({index:a[o[s[c]]],distance:f})}return h}}()};var ig={" ":"X","!":"Y","#":"Z",$:"-X","%":"-Y","&":"-Z","'":"Y+1/2","(":"1/2+X",")":"1/2+Y","*":"1/2-X","+":"1/2+Z",",":"1/2-Y","-":"1/2-Z",".":"X+1/2","/":"Z+1/2",0:"-X+1/2",1:"-Y+1/2",2:"-Z+1/2",3:"1/4+X",4:"1/4-Y",5:"1/4+Z",6:"1/4-X",7:"1/4+Y",8:"3/4-Y",9:"3/4+Z",":":"3/4+Y",";":"3/4+X","<":"3/4-X","=":"1/4-Z",">":"3/4-Z","?":"X-Y","@":"Y-X",A:"Z+1/3",B:"Z+2/3",C:"X+2/3",D:"Y+1/3",E:"-Y+2/3",F:"X-Y+1/3",G:"Y-X+2/3",H:"-X+1/3",I:"X+1/3",J:"Y+2/3",K:"-Y+1/3",L:"X-Y+2/3",M:"Y-X+1/3",N:"-X+2/3",O:"2/3+X",P:"1/3+Y",Q:"1/3+Z",R:"2/3-Y",S:"1/3+X-Y",T:"2/3+Y-X",U:"1/3-X",V:"2/3-X",W:"1/3-Y",X:"1/3-Z",Y:"2/3+Y",Z:"1/3+Y-X","[":"2/3+X-Y","]":"1/3+X","^":"2/3+Z",_:"2/3-Z","`":"5/6+Z",a:"1/6+Z",b:"5/6-Z",c:"1/6-Z",d:"Z+5/6",e:"Z+1/6",f:"Z+1/4",g:"+Y"},ng={"P 1":" !#","P -1":" !#$%&","P 1 2 1":" !#$!&","P 1 21 1":" !#$'&","C 1 2 1":" !#$!&()#*)&","P 1 m 1":" !# %#","P 1 c 1":" !# %+","C 1 m 1":" !# %#()#(,#","C 1 c 1":" !# %+()#(,+","P 1 2/m 1":" !# %#$!&$%&","P 1 21/m 1":" !#$)&$%& ,#","C 1 2/m 1":" !# %#$!&$%&()#(,#*)&*,&","P 1 2/c 1":" !#$!-$%& %+","P 1 21/c 1":" !#$%&$)- ,+","C 1 2/c 1":" !#$!-$%& %+()#*)-*,&(,+","P 2 2 2":" !#$%#$!& %&","P 2 2 21":" !#$%+$!- %&","P 21 21 2":" !#$%#*)&(,&","P 21 21 21":" !#*%+$)-(,&","C 2 2 21":" !#$%+$!- %&()#*,+*)-(,&","C 2 2 2":" !#$%#$!& %&()#*,#*)&(,&","F 2 2 2":" !#$%#$!& %& )+$,+$)- ,-(!+*%+*!-(%-()#*,#*)&(,&","I 2 2 2":" !#$%# %&$!&.'/01/.120'2","I 21 21 21":" !#*%+$)-(,&()+$,#*!& %-","P m m 2":" !#$%# %#$!#","P m c 21":" !#$%+ %+$!#","P c c 2":" !#$%# %+$!+","P m a 2":" !#$%#(%#*!#","P c a 21":" !#$%+(%#*!+","P n c 2":" !#$%# ,+$)+","P m n 21":" !#*%+(%+$!#","P b a 2":" !#$%#(,#*)#","P n a 21":" !#$%+(,#*)+","P n n 2":" !#$%#(,+*)+","C m m 2":" !#$%# %#$!#()#*,#(,#*)#","C m c 21":" !#$%+ %+$!#()#*,+(,+*)#","C c c 2":" !#$%# %+$!+()#*,#(,+*)+","A m m 2":" !#$%# %#$!# )+$,+ ,+$)+","A b m 2":" !#$%# ,#$)# )+$,+ %+$!+","A m a 2":" !#$%#(%#*!# )+$,+(,+*)+","A b a 2":" !#$%#(,#*)# )+$,+(%+*!+","F m m 2":" !#$%# %#$!# )+$,+ ,+$)+(!+*%+(%+*!+()#*,#(,#*)#","F d d 2":" !#$%#345675 )+$,+3896:9(!+*%+;49<79()#*,#;85<:5","I m m 2":" !#$%# %#$!#()+*,+(,+*)+","I b a 2":" !#$%#(,#*)#()+*,+ %+$!+","I m a 2":" !#$%#(%#*!#()+*,+ ,+$)+","P 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!#","P 2/n 2/n 2/n":" !#$%#$!& %&*,-()-(,+*)+","P 2/c 2/c 2/m":" !#$%#$!- %-$%& !& %+$!+","P 2/b 2/a 2/n":" !#$%#$!& %&*,&()&(,#*)#","P 21/m 2/m 2/a":" !#*%#$!&(%&$%&(!& %#*!#","P 2/n 21/n 2/a":" !#*%#*)- ,-$%&(!&(,+$)+","P 2/m 2/n 21/a":" !#*%+*!- %&$%&(!-(%+$!#","P 21/c 2/c 2/a":" !#*%#$!-(%-$%&(!& %+*!+","P 21/b 21/a 2/m":" !#$%#*)&(,&$%& !&(,#*)#","P 21/c 21/c 2/n":" !#*,#$)-(%-$%&()& ,+*!+","P 2/b 21/c 21/m":" !#$%+$)- ,&$%& !- ,+$)#","P 21/n 21/n 2/m":" !#$%#*)-(,-$%& !&(,+*)+","P 21/m 21/m 2/n":" !#$%#*'&.,&*,&.'& %#$!#","P 21/b 2/c 21/n":" !#*,+$!-(,&$%&()- %+*)#","P 21/b 21/c 21/a":" !#*%+$)-(,&$%&(!- ,+*)#","P 21/n 21/m 21/a":" !#0%/$'&.12$%&.!2 1#0'/","C 2/m 2/c 21/m":" !#$%+$!- %&$%& !- %+$!#()#*,+*)-(,&*,&()-(,+*)#","C 2/m 2/c 21/a":" !#$,+$)- %&$%& )- ,+$!#()#*%+*!-(,&*,&(!-(%+*)#","C 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!#()#*,#*)&(,&*,&()&(,#*)#","C 2/c 2/c 2/m":" !#$%#$!- %-$%& !& %+$!+()#*,#*)-(,-*,&()&(,+*)+","C 2/m 2/m 2/a":" !#$,#$)& %&$%& )& ,#$!#()#*%#*!&(,&*,&(!&(%#*)#","C 2/c 2/c 2/a":" !#*,#$!&(,&$,-(!- ,+*!+()#$%#*)& %&*%- )-(%+$)+","F 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!# )+$,+$)- ,-$,- )- ,+$)+(!+*%+*!-(%-*%-(!-(%+*!+()#*,#*)&(,&*,&()&(,#*)#","F 2/d 2/d 2/d":" !#$%#$!& %&64=37=345675 )+$,+$)- ,-68>3:>3896:9(!+*%+*!-(%-<4>;7>;49<79()#*,#*)&(,&<8=;:=;85<:5","I 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!#()+*,+*)-(,-*,-()-(,+*)+","I 2/b 2/a 2/m":" !#$%#*)&(,&$%& !&(,#*)#()+*,+$!- %-*,-()- %+$!+","I 21/b 21/c 21/a":" !#*%+$)-(,&$%&(!- ,+*)#()+$,#*!& %-*,- )&(%#$!+","I 21/m 21/m 21/a":" !#$,#$)& %&$%& )& ,#$!#()+*%+*!-(,-*,-(!-(%+*)+","P 4":" !#$%#% #!$#","P 41":" !#$%+% 5!$9","P 42":" !#$%#% +!$+","P 43":" !#$%+% 9!$5","I 4":" !#$%#% #!$#()+*,+,(+)*+","I 41":" !#*,+%(5)$9()+$%#, 9!*5","P -4":" !#$%#!$&% &","I -4":" !#$%#!$&% &()+*,+)*-,(-","P 4/m":" !#$%#% #!$#$%& !&!$&% &","P 42/m":" !#$%#% +!$+$%& !&!$-% -","P 4/n":" !#$%#,(#)*#*,&()&!$&% &","P 42/n":" !#$%#,(+)*+*,-()-!$&% &","I 4/m":" !#$%#% #!$#$%& !&!$&% &()+*,+,(+)*+*,-()-)*-,(-","I 41/a":" !#*,+%(5)$9$,=(!>!$&,(-()+$%#, 9!*5*%> )=)*-% &","P 4 2 2":" !#$%#% #!$#$!& %&! &%$&","P 4 21 2":" !#$%#,(#)*#*)&(,&! &%$&","P 41 2 2":" !#$%+% 5!$9$!& %-! >%$=","P 41 21 2":" !#$%+,(5)*9*)=(,>! &%$-","P 42 2 2":" !#$%#% +!$+$!& %&! -%$-","P 42 21 2":" !#$%#,(+)*+*)-(,-! &%$&","P 43 2 2":" !#$%+% 9!$5$!& %-! =%$>","P 43 21 2":" !#$%+,(9)*5*)>(,=! &%$-","I 4 2 2":" !#$%#% #!$#$!& %&! &%$&()+*,+,(+)*+*)-(,-)(-,*-","I 41 2 2":" !#*,+%(5)$9*!> ,=)(-%$&()+$%#, 9!*5$)=(%>! &,*-","P 4 m m":" !#$%#% #!$# %#$!#%$#! #","P 4 b m":" !#$%#% #!$#(,#*)#,*#)(#","P 42 c m":" !#$%#% +!$+ %+$!+%$#! #","P 42 n m":" !#$%#,(+)*+(,+*)+%$#! #","P 4 c c":" !#$%#% #!$# %+$!+%$+! +","P 4 n c":" !#$%#% #!$#(,+*)+,*+)(+","P 42 m c":" !#$%#% +!$+ %#$!#%$+! +","P 42 b c":" !#$%#% +!$+(,#*)#,*+)(+","I 4 m m":" !#$%#% #!$# %#$!#%$#! #()+*,+,(+)*+(,+*)+,*+)(+","I 4 c m":" !#$%#% #!$# %+$!+%$+! +()+*,+,(+)*+(,#*)#,*#)(#","I 41 m d":" !#*,+%(5)$9 %#*)+%*5) 9()+$%#, 9!*5(,+$!#,$9!(5","I 41 c d":" !#*,+%(5)$9 %+*)#%*9) 5()+$%#, 9!*5(,#$!+,$5!(9","P -4 2 m":" !#$%#% &!$&$!& %&%$#! #","P -4 2 c":" !#$%#% &!$&$!- %-%$+! +","P -4 21 m":" !#$%#% &!$&*)&(,&,*#)(#","P -4 21 c":" !#$%#% &!$&*)-(,-,*+)(+","P -4 m 2":" !#$%#!$&% & %#$!#! &%$&","P -4 c 2":" !#$%#% &!$& %+$!+! -%$-","P -4 b 2":" !#$%#% &!$&(,#*)#)(&,*&","P -4 n 2":" !#$%#% &!$&(,+*)+)(-,*-","I -4 m 2":" !#$%#% &!$& %#$!#! &%$&()+*,+,(-)*-(,+*)+)(-,*-","I -4 c 2":" !#$%#% &!$& %+$!+! -%$-()+*,+,(-)*-(,#*)#)(&,*&","I -4 2 m":" !#$%#% &!$&$!& %&%$#! #()+*,+,(-)*-*)-(,-,*+)(+","I -4 2 d":" !#$%#% &!$&*!>(%>,$9) 9()+*,+,(-)*-$)= ,=%*5!(5","P 4/m 2/m 2/m":" !#$%#% #!$#$!& %&! &%$&$%& !&!$&% & %#$!#%$#! #","P 4/m 2/c 2/c":" !#$%#% #!$#$!- %-! -%$-$%& !&!$&% & %+$!+%$+! +","P 4/n 2/b 2/m":" !#$%#% #!$#$!& %&! &%$&*,&()&)*&,(&(,#*)#,*#)(#","P 4/n 2/n 2/c":" !#$%#% #!$#$!& %&! &%$&*,-()-)*-,(-(,+*)+,*+)(+","P 4/m 21/b 2/m":" !#$%#% #!$#*)&(,&)(&,*&$%& !&!$&% &(,#*)#,*#)(#","P 4/m 21/n 2/c":" !#$%#% #!$#*)-(,-)(-,*-$%& !&!$&% &(,+*)+,*+)(+","P 4/n 21/m 2/m":" !#$%#,(#)*#*)&(,&! &%$&*,&()&!$&% & %#$!#,*#)(#","P 4/n 2/c 2/c":" !#$%#,(#)*#*)-(,-! -%$-*,&()&!$&% & %+$!+,*+)(+","P 42/m 2/m 2/c":" !#$%#% +!$+$!& %&! -%$-$%& !&!$-% - %#$!#%$+! +","P 42/m 2/c 2/m":" !#$%#% +!$+$!- %-! &%$&$%& !&!$-% - %+$!+%$#! #","P 42/n 2/b 2/c":" !#$%#,(+)*+$!- %-)(&,*&*,-()-!$&% &(,#*)#%$+! +","P 42/n 2/n 2/m":" !#$%#,(+)*+$!& %&)(-,*-*,-()-!$&% &(,+*)+%$#! #","P 42/m 21/b 2/c":" !#$%#% +!$+*)&(,&)(-,*-$%& !&!$-% -(,#*)#,*+)(+","P 42/m 21/n 2/m":" !#$%#,./'*/*'-.,-! &%$&$%& !&'*-,.-.,/*'/%$#! #","P 42/n 21/m 2/c":" !#$%#,(+)*+*)-(,-! &%$&*,-()-!$&% & %#$!#,*+)(+","P 42/n 21/c 2/m":" !#$%#,(+)*+*)&(,&! -%$-*,-()-!$&% & %+$!+,*#)(#","I 4/m 2/m 2/m":" !#$%#% #!$#$!& %&! &%$&$%& !&!$&% & %#$!#%$#! #()+*,+,(+)*+*)-(,-)(-,*-*,-()-)*-,(-(,+*)+,*+)(+","I 4/m 2/c 2/m":" !#$%#% #!$#$!- %-! -%$-$%& !&!$&% & %+$!+%$+! +()+*,+,(+)*+*)&(,&)(&,*&*,-()-)*-,(-(,#*)#,*#)(#","I 41/a 2/m 2/d":" !#*,+%(5)$9*!> ,=)(-%$&$,=(!>!$&,(-(,+$!#,$9!(5()+$%#, 9!*5$)=(%>! &,*-*%> )=)*-% & %#*)+%*5) 9","I 41/a 2/c 2/d":" !#*,+%(5)$9*!= ,>)(&%$-$,=(!>!$&,(-(,#$!+,$5!(9()+$%#, 9!*5$)>(%=! -,*&*%> )=)*-% & %+*)#%*9) 5","P 3":" !#%?#@$#","P 31":" !#%?A@$B","P 32":" !#%?B@$A","H 3":" !#%?#@$#CDAEFAGHAIJBKLBMNB","R 3":" !## !!# ","P -3":" !#%?#@$#$%&!@&? &","H -3":" !#%?#@$#$%&!@&? &OPQRSQTUQVWXYZX[]X]Y^W[^ZV^UR_PT_SO_","R -3":" !## !!# $%&&$%%&$","P 3 1 2":" !#%?#@$#%$&@!& ?&","P 3 2 1":" !#%?#@$#! &?%&$@&","P 31 1 2":" !#%?Q@$^%$_@!X ?&","P 31 2 1":" !#%?A@$B! &?%_$@X","P 32 1 2":" !#%?^@$Q%$X@!_ ?&","P 32 2 1":" !#%?B@$A! &?%X$@_","H 3 2":" !#%?#@$#! &?%&$@&OPQRSQTUQY]X[WXVZX]Y^W[^ZV^PO_SR_UT_","R 3 2":" !## !!# %$&$&%&%$","P 3 m 1":" !#%?#@$#%$#@!# ?#","P 3 1 m":" !#%?#@$#! #?%#$@#","P 3 c 1":" !#%?#@$#%$+@!+ ?+","P 3 1 c":" !#%?#@$#! +?%+$@+","H 3 m":" !#%?#@$#%$#@!# ?#OPQRSQTUQRUQTPQOSQ]Y^W[^ZV^WV^ZY^][^","R 3 m":" !## !!# ! # #!#! ","H 3 c":" !#%?#@$#%$+@!+ ?+OPQRSQTUQRU`TP`OS`]Y^W[^ZV^WVaZYa][a","R 3 c":" !## !!# '././'/'.","P -3 1 2/m":" !#%?#@$#%$&@!& ?&$%&!@&? &! #?%#$@#","P -3 1 2/c":" !#%?#@$#%$-@!- ?-$%&!@&? &! +?%+$@+","P -3 2/m 1":" !#%?#@$#! &?%&$@&$%&!@&? &%$#@!# ?#","P -3 2/c 1":" !#%?#@$#! -?%-$@-$%&!@&? &%$+@!+ ?+","H -3 2/m":" !#%?#@$#! &?%&$@&$%&!@&? &%$#@!# ?#OPQRSQTUQY]X[WXVZXVWXYZX[]XRUQTPQOSQ]Y^W[^ZV^PO_SR_UT_UR_PT_SO_WV^ZY^][^","R -3 2/m":" !## !!# %$&$&%&%$$%&&$%%&$! # #!#! ","H -3 2/c":" !#%?#@$#! -?%-$@-$%&!@&? &%$+@!+ ?+OPQRSQTUQY]b[WbVZbVWXYZX[]XRU`TP`OS`]Y^W[^ZV^POcSRcUTcUR_PT_SO_WVaZYa][a","R -3 2/c":" !## !!# 102021210$%&&$%%&$'././'/'.","P 6":" !#%?#@$#$%#!@#? #","P 61":" !#%?A@$B$%/!@d? e","P 65":" !#%?B@$A$%/!@e? d","P 62":" !#%?^@$Q$%#!@^? Q","P 64":" !#%?Q@$^$%#!@Q? ^","P 63":" !#%?#@$#$%+!@+? +","P -6":" !#%?#@$# !&%?&@$&","P 6/m":" !#%?#@$#$%#!@#? #$%&!@&? & !&%?&@$&","P 63/m":" !#%?#@$#$%+!@+? +$%&!@&? & !-%?-@$-","P 6 2 2":" !#%?#@$#$%#!@#? #! &?%&$@&%$&@!& ?&","P 61 2 2":" !#%?Q@$^$%+!@`? a! X?%&$@_%$b@!- ?c","P 65 2 2":" !#%?^@$Q$%+!@a? `! _?%&$@X%$c@!- ?b","P 62 2 2":" !#%?^@$Q$%#!@^? Q! _?%&$@X%$_@!& ?X","P 64 2 2":" !#%?Q@$^$%#!@Q? ^! X?%&$@_%$X@!& ?_","P 63 2 2":" !#%?#@$#$%+!@+? +! &?%&$@&%$-@!- ?-","P 6 m m":" !#%?#@$#$%#!@#? #%$#@!# ?#! #?%#$@#","P 6 c c":" !#%?#@$#$%#!@#? #%$+@!+ ?+! +?%+$@+","P 63 c m":" !#%?#@$#$%+!@+? +%$+@!+ ?+! #?%#$@#","P 63 m c":" !#%?#@$#$%+!@+? +%$#@!# ?#! +?%+$@+","P -6 m 2":" !#%?#@$# !&%?&@$&%$#@!# ?#%$&@!& ?&","P -6 c 2":" !#%?#@$# !-%?-@$-%$+@!+ ?+%$&@!& ?&","P -6 2 m":" !#%?#@$# !&%?&@$&! &?%&$@&! #?%#$@#","P -6 2 c":" !#%?#@$# !-%?-@$-! &?%&$@&! +?%+$@+","P 6/m 2/m 2/m":" !#%?#@$#$%#!@#? #! &?%&$@&%$&@!& ?&$%&!@&? & !&@$&%?&%$#@!# ?#! #?%#$@#","P 6/m 2/c 2/c":" !#%?#@$#$%#!@#? #! -?%-$@-%$-@!- ?-$%&!@&? & !&@$&%?&%$+@!+ ?+! +?%+$@+","P 63/m 2/c 2/m":" !#%?#@$#$%+!@+? +! -?%-$@-%$&@!& ?&$%&!@&? & !-@$-%?-%$+@!+ ?+! #?%#$@#","P 63/m 2/m 2/c":" !#%?#@$#$%+!@+? +! &?%&$@&%$-@!- ?-$%&!@&? & !-@$-%?-%$#@!# ?#! +?%+$@+","P 2 3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ","F 2 3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%&  )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-((!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- ","I 2 3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-(","P 21 3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(","I 21 3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- ","P 2/m -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& $%& !& %#$!#&$%& !# %#$!%&$!& %# !#$","P 2/n -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& *,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*","F 2/m -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& $%& !& %#$!#&$%& !# %#$!%&$!& %# !#$ )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-($,- )- ,+$)+&*,&()#(,#*)%-*!-(%+(!+*(!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(*%-(!-(%+*!+-$,- )+ ,+$),&*)&(,#()#*()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- *,&()&(,#*)#-*%-(!+(%+*!,-$)- ,+ )+$","F 2/d -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& 64=37=345675=64=375345674=67=3453756 )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(68>3:>3896:9=<8=;:5;85<:4><7>;49;79<(!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(<4>;7>;49<79>68>3:93896:8=<:=;85;:5<()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- <8=;:=;8f<:f><4>;79;49<78>6:>3893:96","I 2/m -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& $%& !& %#$!#&$%& !# %#$!%&$!& %# !#$()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-(*,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*","P 21/a -3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&($%&(!- ,+*)#&$%-(!+ ,#*)%&$!-(,+ )#*","I 21/a -3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&($%&(!- ,+*)#&$%-(!+ ,#*)%&$!-(,+ )#*()+$,#*g& %-+()#$,&*!- %)+(,#$!&*%- *,- )&(%#$!+-*,& )#(%+$!,-*)& %#(!+$","P 4 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$","P 42 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*","F 4 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$ )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(!(-%*-!*+%(+ +,$+)$-, -)#)*#,(&)(&,*(!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&() -,$-)$+, +(#,*#)*&,(&)+!*+%(-!(-%*()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- )(&,*&)*#,(#(+%*+!*-%(-!+)$+, -) -,$","F 41 3 2":" !#$,+*)&(%-# !+$,&*)-(%!# ,+$)&*%-(:3>46=7<98;5;58<976=43>:97<58;>:3=46 )+$%#*!-(,&#()+*%&$!- ,!+(,#*)-$%& :;=4<>765839;94<5:6>83=79:6543>7;=8<(!+*,#$)- %&+ )#$%-*!&(,)#(%+*!&$,- 73=86>:<54;935469:<=8;>7576983=:;>4<()#*%+$!& ,-+(!#*,-$)& %)+ %#$!-*,&(7;>8<=:69435398657<>4;=:5:<94;=73>86","I 4 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-()(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*","P 43 3 2":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(7;>46=:<5839398<5:6=4;>75:<983>7;=46","P 41 3 2":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(:3=8<>7694;5;54697<>83=:97654;=:3>8<","I 41 3 2":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(:3=8<>7694;5;54697<>83=:97654;=:3>8<()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- 7;>46=:<5839398<5:6=4;>75:<983>7;=46","P -4 3 m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! #%$#!$&% & #!$#%$&! &%#! #%$&!$&% ","F -4 3 m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! #%$#!$&% & #!$#%$&! &%#! #%$&!$&%  )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(!(+%*+!*-%(- +)$+,$-) -,#)(#,*&)*&,((!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&() +,$+)$-, -(#)*#,*&)(&,+!(+%*-!*-%(()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- )(#,*#)*&,(&(+!*+%*-!(-%+) +,$-)$-, ","I -4 3 m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! #%$#!$&% & #!$#%$&! &%#! #%$&!$&% ()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-()(+,*+)*-,(-(+)*+,*-)(-,+)(+,*-)*-,(","P -4 3 n":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(+,*+)*-,(-(+)*+,*-)(-,+)(+,*-)*-,(","F -4 3 c":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(+,*+)*-,(-(+)*+,*-)(-,+)(+,*-)*-,( )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-() #,$#)$&, &(#!*#%*&!(&%+! +%$-!$-% (!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(!(#%*#!*&%(& +!$+%$-! -%#) #,$&)$&, ()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- ! +%$+!$-% - #)$#,$&) &,#!(#%*&!*&%(","I -4 3 d":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(7354<9:6>8;=357<946>:;=857394<>:6=8;()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- :;98657<=43>;9:658<=73>49:;586=7<>43","P 4/m -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$%$#! #% &!$&$&! &% #!$#%&% &!$#%$#! ","P 4/n -3 2/n":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$*,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)(","P 42/m -3 2/n":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)(","P 42/n -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,**,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*%$#! #% &!$&$&! &% #!$#%&% &!$#%$#! ","F 4/m -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$%$#! #% &!$&$&! &% #!$#%&% &!$#%$#!  )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(!(-%*-!*+%(+ +,$+)$-, -)#)*#,(&)(&,*$,- )- ,+$)+&*,&()#(,#*)%-*!-(%+(!+*%*+!(+%(-!*-$-) -, +)$+,&,(&)*#,*#)((!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&() -,$-)$+, +(#,*#)*&,(&)+!*+%(-!(-%**%-(!-(%+*!+-$,- )+ ,+$),&*)&(,#()#*,$+) +, -)$-*&)(&,(#)*#,-%(-!*+%*+!(()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- )(&,*&)*#,(#(+%*+!*-%(-!+)$+, -) -,$*,&()&(,#*)#-*%-(!+(%+*!,-$)- ,+ )+$,*#)(#,(&)*&*-!(-%(+!*+%-, -)$+,$+) ","F 4/m -3 2/c":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)( )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-() &,$&)$#, #(#%*#!*&%(&!+!$+% -! -%$$,- )- ,+$)+&*,&()#(,#*)%-*!-(%+(!+*,$#) #, &)$&*&!(&%(#!*#%-% -!$+%$+! (!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(!(&%*&!*#%(# +%$+!$-% -!#)$#, &) &,$*%-(!-(%+*!+-$,- )+ ,+$),&*)&(,#()#*%*#!(#%(&!*&$-! -% +!$+%&, &)$#,$#) ()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- ! -%$-!$+% + #,$#)$&, &)#!*#%(&!(&%**,&()&(,#*)#-*%-(!+(%+*!,-$)- ,+ )+$%$+! +% -!$-$&) &, #)$#,&%(&!*#%*#!(","F 41/d -3 2/m":" !#$,+*)&(%-# !+$,&*)-(%!# ,+$)&*%-(:3>46=7<98;5;58<976=43>:97<58;>:3=4664=3:>;85<79=64>3:5;89<74=6:>385;79<,$+! #%(-)*&*&)(-% #!$+,-%(&)*+,$#!  )+$%#*!-(,&#()+*%&$!- ,!+(,#*)-$%& :;=4<>765839;94<5:6>83=79:6543>7;=8<68>37=;49<:5=<8>;753496:4><:=;893756,*#!(+% &)$-*-!(&, +)$#%-, &!$+%*#)((!+*,#$)- %&+ )#$%-*!&(,)#(%+*!&$,- 73=86>:<54;935469:<=8;>7576983=:;>4<<4>;:=389675>68=379;45<:8=<7>;453:96%$#) +,(&!*-$&! -,(#)*+%&% -)$#,*+!(()#*%+$!& ,-+(!#*,-$)& %)+ %#$!-*,&(7;>8<=:69435398657<>4;=:5:<94;=73>86<8=;7>3456:9><4=;:9385678>67=349;:5<%*+)(#, -!$&$-) &%(+!*#,&,(-!*#%$+) ","F 41/d -3 2/c":" !#$,+*)&(%-# !+$,&*)-(%!# ,+$)&*%-(:3>46=7<98;5;58<976=43>:97<58;>:3=46<8>;7=3496:5><8=;793456:8><7=;493:56%*#)(+, &!$-$-! &,(+)*#%&, -!$#%*+)( )+$%#*!-(,&#()+*%&$!- ,!+(,#*)-$%& :;=4<>765839;94<5:6>83=79:6543>7;=8<<4=;:>385679>64=3:9;85<78=67>345;:9<%$+) #,(-!*&$&) -%(#!*+,&%(-)*#,$+! (!+*,#$)- %&+ )#$%-*!&(,)#(%+*!&$,- 73=86>:<54;935469:<=8;>7576983=:;>4<68=37>;45<:9=<4>;:5389674>6:=389;75<,*+!(#% -)$&*-)(&% +!$#,-,(&!*+%$#) ()#*%+$!& ,-+(!#*,-$)& %)+ %#$!-*,&(7;>8<=:69435398657<>4;=:5:<94;=73>8664>3:=;89<75=68>375;49<:4=<:>;853796,$#! +%(&)*-*&!(-, #)$+%-% &)$+,*#!(","I 4/m -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$%$#! #% &!$&$&! &% #!$#%&% &!$#%$#! ()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-()(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,**,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)(","I 41/a -3 2/d":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(:3=8<>7694;5;54697<>83=:97654;=:3>8<$%&(!- ,+*)#&$%-(!+ ,#*)%&$!-(,+ )#*4<97358;=:6>6>:;=8357<94=8;>:694<573()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- 7;>46=:<5839398<5:6=4;>75:<983>7;=46*,- )&(%#$!+-*,& )#(%+$!,-*)& %#(!+$865:;943>7<=<=73>4;9:658>43=7<5869:;","P 1 1 2":" !#$%#","P 1 1 21":" !#$%+","B 1 1 2":" !#$%#(g+*%+","A 1 2 1":" !#$!& )+$)-","C 1 21 1":" !#$)&()#*!&","I 1 2 1":" !#$!&.'/0'2","I 1 21 1":" !#$)&.'/0!-","P 1 1 m":" !# !&","P 1 1 b":" !# )&","B 1 1 m":" !# !&(!+(!-","B 1 1 b":" !# )&(!+()-","P 1 1 2/m":" !# !&$%#$%&","P 1 1 21/m":" !#$%+$%& !-","B 1 1 2/m":" !# !&$%#$%&(!+(!-*%+*%-","P 1 1 2/b":" !#$,#$%& )&","P 1 1 21/b":" !#$%&$,+ )-","B 1 1 2/b":" !#$,#$%& )&(!+*,+*%-()-","P 21 2 2":" !#$!&(%&*%#","P 2 21 2":" !# ,&$)&$%#","P 21 21 2 (a)":" !#*,#.%&$'&","P 21 2 21":" !#$!&(%-*%+","P 2 21 21":" !# %&$)-$,+","C 2 2 21a)":" !#*%+(,&$)-()#$,+ %&*!-","C 2 2 2a":" !#*,#.%&$'&()#$%# ,&*!&","F 2 2 2a":" !#*,#.%&$'& '/*%/.12$!2.!/$,/ %20'2.'#$%# 1&0!&","I 2 2 2a":" !#*,#.%&$'&()+$%+*!- ,-","P 21/m 21/m 2/n a":" !#*,#$)&(%&$%&.'& ,#*!#","P 42 21 2a":" !#*,#%.+'$+$'&.%&! -,*-","I 2 3a":" !#*,#.%&$'&!# ,- '&$%/$# !-*!/$%&.%()+$%+ ,-*!-)+(%&(!-*,#*+()&$)#*,- ,"},rg=function(t){this.name=t||"",this.partList=[]},og={type:{}};og.type.get=function(){return"Assembly"},rg.prototype.addPart=function(t,e){var i=new sg(t,e);return this.partList.push(i),i},rg.prototype._getCount=function(t,e){var i=0;return this.partList.forEach(function(n){i+=n[e](t)}),i},rg.prototype.getAtomCount=function(t){return this._getCount(t,"getAtomCount")},rg.prototype.getResidueCount=function(t){return this._getCount(t,"getResidueCount")},rg.prototype.getInstanceCount=function(){var t=0;return this.partList.forEach(function(e){t+=e.matrixList.length}),t},rg.prototype.isIdentity=function(t){if(1!==this.partList.length)return!1;var e=this.partList[0];if(1!==e.matrixList.length)return!1;if(!(new b).equals(e.matrixList[0]))return!1;var i=[];return t.eachChain(function(t){i.push(t.chainname)}),i=Er(i),e.chainList.length===i.length},rg.prototype.getBoundingBox=function(t){var e=new lt;return this.partList.forEach(function(i){var n=i.getBoundingBox(t);e.expandByPoint(n.min),e.expandByPoint(n.max)}),e},rg.prototype.getCenter=function(t){return this.getBoundingBox(t).getCenter()},rg.prototype.getSelection=function(){var t=[];return this.partList.forEach(function(e){t=t.concat(e.chainList)}),qs(t)},Object.defineProperties(rg.prototype,og);var sg=function(t,e){this.matrixList=t||[],this.chainList=e||[]},ag={type:{}};ag.type.get=function(){return"AssemblyPart"},sg.prototype._getCount=function(t,e){var i=0,n=this.chainList;return t.eachChain(function(t){(0===n.length||n.includes(t.chainname))&&(i+=t[e])}),this.matrixList.length*i},sg.prototype.getAtomCount=function(t){return this._getCount(t,"atomCount")},sg.prototype.getResidueCount=function(t){return this._getCount(t,"residueCount")},sg.prototype.getBoundingBox=function(t){var e=new lt,i=new lt,n=this.getSelection(),r=t.getBoundingBox(n);return this.matrixList.forEach(function(t){i.copy(r).applyMatrix4(t),e.expandByPoint(i.min),e.expandByPoint(i.max)}),e},sg.prototype.getSelection=function(){return qs(this.chainList)},sg.prototype.getView=function(t){var e=this.getSelection();return e?t.getView(e):t},sg.prototype.getInstanceList=function(){for(var t=this,e=[],i=0,n=this.matrixList.length;i<n;++i)e.push({id:i+1,name:i,matrix:t.matrixList[i]});return e},Object.defineProperties(sg.prototype,ag);var hg=function(){var t=function(t,e,i,n){for(var r=t.structure,o=t.residueIndexStart,s=r.getResidueProxy(),a=r.getResidueProxy(),h=r.getAtomProxy(),l=r.getAtomProxy(),u=Math.max(0,e-2);u<=e;++u)for(var d=2;d<5;++d)if(!(u+d>=t.residueCount)){s.index=o+u,a.index=o+u+d,h.index=s.traceAtomIndex,l.index=a.traceAtomIndex;var c=h.distanceTo(l);if(Math.abs(c-i[d-2])>n)return!1}return!0},e=function(e,i){return t(e,i,[5.45,5.18,6.37],2.1)},i=function(e,i){return t(e,i,[6.1,10.4,13],1.42)},n=function(t){for(var n=t.residueStore,r=t.residueIndexStart,o=0,s=t.residueCount;o<s;++o){var a="c";e(t,o)?a="h":i(t,o)&&(a="s"),n.sstruc[r+o]=a.charCodeAt(0)}},r=function(t){for(var e=t.residueStore,i=t.residueIndexStart,n=new Vs(t),r=n.position,o=new y,s=new y,a=0,h=t.residueCount;a<h;++a){o.fromArray(r.center,3*a),s.fromArray(r.center,3*a+3);var l=o.distanceTo(s);l<2&&l>1&&r.bending[a]<20&&(e.sstruc[i+a]="h".charCodeAt(0),e.sstruc[i+a+1]="h".charCodeAt(0))}};return function(t){rp&&np.time("calculateSecondaryStructure"),t.eachPolymer(function(t){if(!(t.residueCount<4)){if(t.isCg())r(t);else{if(!t.isProtein())return;n(t)}var e,i=0;t.eachResidue(function(t){t.sstruc===e?i+=1:(1===i&&(t.index-=1,t.sstruc="c"),i=1,e=t.sstruc)})}}),rp&&np.timeEnd("calculateSecondaryStructure")}}(),lg=["H","C","O","N","S","P"],ug=["NA","CL","FE"],dg=function(t,e,i){this.structure=t,i=i||na(e),this.atomname=e,this.element=i,this.vdw=Sv[i],this.covalent=kv[i]},cg=function(t){this.structure=t,this.dict={},this.list=[]};cg.prototype.add=function(t,e){t=t.toUpperCase(),e=e?e.toUpperCase():na(t);var i=oa(t,e),n=this.dict[i];if(void 0===n){var r=new dg(this.structure,t,e);n=this.list.length,this.dict[i]=n,this.list.push(r)}return n},cg.prototype.get=function(t){return this.list[t]};var fg=function(t,e,i,n,r,o){this.structure=t,this.resname=e,this.atomTypeIdList=i,this.hetero=n?1:0,this.chemCompType=r,this.bonds=o,this.rings=void 0,this.atomCount=i.length,this.moleculeType=this.getMoleculeType(),this.backboneType=this.getBackboneType(0),this.backboneEndType=this.getBackboneType(-1),this.backboneStartType=this.getBackboneType(1),this.backboneIndexList=this.getBackboneIndexList();var s=Fv[this.backboneType],a=Fv[this.backboneStartType],h=Fv[this.backboneEndType],l=this.getAtomIndexByName(s.trace);this.traceAtomIndex=void 0!==l?l:-1;var u=this.getAtomIndexByName(s.direction1);this.direction1AtomIndex=void 0!==u?u:-1;var d=this.getAtomIndexByName(s.direction2);this.direction2AtomIndex=void 0!==d?d:-1;var c=this.getAtomIndexByName(a.backboneStart);this.backboneStartAtomIndex=void 0!==c?c:-1;var f=this.getAtomIndexByName(h.backboneEnd);this.backboneEndAtomIndex=void 0!==f?f:-1;var p;p=Av.includes(e)?this.getAtomIndexByName("N1"):this.getAtomIndexByName("N3"),this.rungEndAtomIndex=void 0!==p?p:-1,this.bondReferenceAtomIndices=[]};fg.prototype.getBackboneIndexList=function(){var t,e=[];switch(this.moleculeType){case 3:t=Lv;break;case 4:case 5:t=Nv;break;default:return e}for(var i=this.structure.atomMap,n=this.atomTypeIdList,r=0,o=this.atomCount;r<o;++r){var s=i.get(n[r]);t.includes(s.atomname)&&e.push(r)}return e},fg.prototype.getMoleculeType=function(){return this.isProtein()?3:this.isRna()?4:this.isDna()?5:this.isWater()?1:this.isIon()?2:this.isSaccharide()?6:0},fg.prototype.getBackboneType=function(t){return this.hasProteinBackbone(t)?1:this.hasRnaBackbone(t)?2:this.hasDnaBackbone(t)?3:this.hasCgProteinBackbone(t)?4:this.hasCgRnaBackbone(t)?5:this.hasCgDnaBackbone(t)?6:cv},fg.prototype.isProtein=function(){return this.chemCompType?fv.includes(this.chemCompType):this.hasAtomWithName("CA","C","N")||Cv.includes(this.resname)},fg.prototype.isCg=function(){var t=this.backboneType;return 4===t||5===t||6===t},fg.prototype.isNucleic=function(){return this.isRna()||this.isDna()},fg.prototype.isRna=function(){return this.chemCompType?pv.includes(this.chemCompType):this.hasAtomWithName(["P","O3'","O3*"],["C4'","C4*"],["O2'","O2*","F2'","F2*"])||Ov.includes(this.resname)&&this.hasAtomWithName(["O2'","O2*","F2'","F2*"])},fg.prototype.isDna=function(){return this.chemCompType?mv.includes(this.chemCompType):this.hasAtomWithName(["P","O3'","O3*"],["C3'","C3*"])&&!this.hasAtomWithName(["O2'","O2*","F2'","F2*"])||Pv.includes(this.resname)},fg.prototype.isHetero=function(){return 1===this.hetero},fg.prototype.isIon=function(){return Iv.includes(this.resname)},fg.prototype.isWater=function(){return Dv.includes(this.resname)},fg.prototype.isSaccharide=function(){return this.chemCompType?vv.includes(this.chemCompType):Rv.includes(this.resname)},fg.prototype.hasBackboneAtoms=function(t,e){var i=Fv[e];return-1===t?this.hasAtomWithName(i.trace,i.backboneEnd,i.direction1,i.direction2):0===t?this.hasAtomWithName(i.trace,i.direction1,i.direction2):1===t?this.hasAtomWithName(i.trace,i.backboneStart,i.direction1,i.direction2):this.hasAtomWithName(i.trace,i.backboneStart,i.backboneEnd,i.direction1,i.direction2)},fg.prototype.hasProteinBackbone=function(t){return this.isProtein()&&this.hasBackboneAtoms(t,1)},fg.prototype.hasRnaBackbone=function(t){return this.isRna()&&this.hasBackboneAtoms(t,2)},fg.prototype.hasDnaBackbone=function(t){return this.isDna()&&this.hasBackboneAtoms(t,3)},fg.prototype.hasCgProteinBackbone=function(t){return this.isProtein()&&this.hasBackboneAtoms(t,4)},fg.prototype.hasCgRnaBackbone=function(t){return this.isRna()&&this.hasBackboneAtoms(t,5)},fg.prototype.hasCgDnaBackbone=function(t){return this.isDna()&&this.hasBackboneAtoms(t,6)},fg.prototype.hasBackbone=function(t){return this.hasProteinBackbone(t)||this.hasRnaBackbone(t)||this.hasDnaBackbone(t)||this.hasCgProteinBackbone(t)||this.hasCgRnaBackbone(t)||this.hasCgDnaBackbone(t)},fg.prototype.getAtomIndexByName=function(t){var e=this.atomCount,i=this.structure.atomMap,n=this.atomTypeIdList;if(Array.isArray(t))for(var r=0;r<e;++r){var o=n[r];if(t.includes(i.get(o).atomname))return r}else for(var s=0;s<e;++s){var a=n[s];if(t===i.get(a).atomname)return s}},fg.prototype.hasAtomWithName=function(){for(var t=arguments,e=this,i=arguments.length,n=0;n<i;++n)if(void 0!==t[n]&&void 0===e.getAtomIndexByName(t[n]))return!1;return!0},fg.prototype.getBonds=function(t){return void 0===this.bonds&&(this.bonds=Qs(t)),this.bonds},fg.prototype.getRings=function(){return void 0===this.rings&&this.calculateRings(),this.rings},fg.prototype.getBondGraph=function(){return void 0===this.bondGraph&&this.calculateBondGraph(),this.bondGraph},fg.prototype.calculateBondGraph=function(){for(var t=this.bondGraph={},e=this.getBonds(),i=e.atomIndices1.length,n=e.atomIndices1,r=e.atomIndices2,o=0;o<i;++o){var s=n[o],a=r[o];(t[s]=t[s]||[]).push(a);(t[a]=t[a]||[]).push(s)}},fg.prototype.calculateRings=function(){function t(s,a,h){if(i[s])throw new Error("DFS revisited atom");i[s]=1,o.push(s);for(var l=a.length,u=0;u<l;++u){var d=a[u];if(0===i[d])e[d]&&e[d].length>=2?t(d,e[d],s):i[d]=2;else if(1===i[d]&&h&&h!==d){var c=[d];n[d]=1,r.push(c);for(var f=o.length-1;f>=0;--f){var p=o[f];if(p===d)break;c.push(p),n[p]=1}}}i[s]=2,o.pop()}for(var e=this.getBondGraph(),i=new Int8Array(this.atomCount),n=new Int8Array(this.atomCount),r=[],o=[],s=0;s<this.atomCount;++s)if(!i[s]){var a=e[s];!a||a.length<2?i[s]=2:(o.length=0,t(s,a))}this.rings={flags:n,rings:r}},fg.prototype.assignBondReferenceAtomIndices=function(){var t=this.getBondGraph(),e=this.getRings(),i=e.flags,n=e.rings,r=this.bonds.atomIndices1,o=this.bonds.atomIndices2,s=this.bonds.bondOrders,a=this.bondReferenceAtomIndices,h=this.bonds.atomIndices1.length;a.length=0;for(var l=0;l<h;++l)if(!(s[l]<=1)){var u=r[l],d=o[l];if(i[u]&&i[d]){for(var c=0;c<n.length&&void 0===a[l];++c)for(var f=n[c],p=null,m=!1,v=0;v<f.length;++v){var g=f[v];if(g===u||g===d?m=!0:p=g,m&&null!==p){a[l]=p;break}}if(void 0!==a[l])continue}if(t[u].length>1)for(var y=0;y<t[u].length;++y){var b=t[u][y];if(b!==d){a[l]=b;break}}else if(t[d].length>1)for(var _=0;_<t[d].length;++_){var w=t[d][_];if(w!==u){a[l]=w;break}}else;}},fg.prototype.getBondIndex=function(t,e){for(var i=this.bonds,n=i.atomIndices1,r=i.atomIndices2,o=n.indexOf(t),s=r.indexOf(e),a=s;-1!==o;){for(;-1!==s;){if(o===s)return o;s=r.indexOf(e,s+1)}o=n.indexOf(t,o+1),s=a}},fg.prototype.getBondReferenceAtomIndex=function(t,e){var i=this.getBondIndex(t,e);if(void 0!==i)return 0===this.bondReferenceAtomIndices.length&&this.assignBondReferenceAtomIndices(),this.bondReferenceAtomIndices[i]};var pg=function(t){this.structure=t,this.dict={},this.list=[]};pg.prototype.add=function(t,e,i,n,r){t=t.toUpperCase();var o=sa(t,e,i,n),s=this.dict[o];if(void 0===s){var a=new fg(this.structure,t,e,i,n,r);s=this.list.length,this.dict[o]=s,this.list.push(a)}return s},pg.prototype.get=function(t){return this.list[t]};var mg=function(t,e){this.structure=t,this.bondStore=t.bondStore,this.index=e,this._v12=new y,this._v13=new y,this._ap1=this.structure.getAtomProxy(),this._ap2=this.structure.getAtomProxy(),this._ap3=this.structure.getAtomProxy()},vg={atom1:{},atom2:{},atomIndex1:{},atomIndex2:{},bondOrder:{}};vg.atom1.get=function(){return this.structure.getAtomProxy(this.atomIndex1)},vg.atom2.get=function(){return this.structure.getAtomProxy(this.atomIndex2)},vg.atomIndex1.get=function(){return this.bondStore.atomIndex1[this.index]},vg.atomIndex1.set=function(t){this.bondStore.atomIndex1[this.index]=t},vg.atomIndex2.get=function(){return this.bondStore.atomIndex2[this.index]},vg.atomIndex2.set=function(t){this.bondStore.atomIndex2[this.index]=t},vg.bondOrder.get=function(){return this.bondStore.bondOrder[this.index]},vg.bondOrder.set=function(t){this.bondStore.bondOrder[this.index]=t},mg.prototype.getReferenceAtomIndex=function(){var t=this._ap1,e=this._ap2;if(t.index=this.atomIndex1,e.index=this.atomIndex2,t.residueIndex===e.residueIndex){var i=t.index-t.residueAtomOffset,n=e.index-e.residueAtomOffset,r=t.residueType,o=r.getBondReferenceAtomIndex(i,n);if(void 0!==o)return o+t.residueAtomOffset;console.warn("No reference atom found",t.index,e.index)}},mg.prototype.calculateShiftDir=function(t){t||(t=new y);var e=this._ap1,i=this._ap2,n=this._ap3,r=this._v12,o=this._v13;e.index=this.atomIndex1,i.index=this.atomIndex2;var s=this.getReferenceAtomIndex();r.subVectors(e,i).normalize(),void 0!==s?(n.index=s,o.subVectors(e,n)):o.copy(e),o.normalize();var a=r.dot(o);return 1-Math.abs(a)<1e-5&&(o.set(1,0,0),a=r.dot(o),1-Math.abs(a)<1e-5&&(o.set(0,1,0),a=r.dot(o))),t.copy(o.sub(r.multiplyScalar(a))).normalize()},mg.prototype.qualifiedName=function(){return this.atomIndex1+"="+this.atomIndex2},mg.prototype.clone=function(){return new this.constructor(this.structure,this.index)},mg.prototype.toObject=function(){return{atomIndex1:this.atomIndex1,atomIndex2:this.atomIndex2,bondOrder:this.bondOrder}},Object.defineProperties(mg.prototype,vg);var gg=function(t,e){this.structure=t,this.chainStore=t.chainStore,this.residueStore=t.residueStore,this.atomStore=t.atomStore,this.residueMap=t.residueMap,this.atomMap=t.atomMap,this.index=e},yg={bondHash:{},entity:{},entityIndex:{},modelIndex:{},chainIndex:{},residue:{},residueIndex:{},sstruc:{},inscode:{},resno:{},chainname:{},chainid:{},residueType:{},atomType:{},residueAtomOffset:{},resname:{},hetero:{},atomname:{},element:{},vdw:{},covalent:{},x:{},y:{},z:{},serial:{},bfactor:{},occupancy:{},altloc:{}};yg.bondHash.get=function(){return this.structure.bondHash},yg.entity.get=function(){return this.structure.entityList[this.entityIndex]},yg.entityIndex.get=function(){return this.chainStore.entityIndex[this.chainIndex]},yg.modelIndex.get=function(){return this.chainStore.modelIndex[this.chainIndex]},yg.chainIndex.get=function(){return this.residueStore.chainIndex[this.residueIndex]},yg.residue.get=function(){return console.warn("residue - might be expensive"),this.structure.getResidueProxy(this.residueIndex)},yg.residueIndex.get=function(){return this.atomStore.residueIndex[this.index]},yg.residueIndex.set=function(t){this.atomStore.residueIndex[this.index]=t},yg.sstruc.get=function(){return this.residueStore.getSstruc(this.residueIndex)},yg.inscode.get=function(){return this.residueStore.getInscode(this.residueIndex)},yg.resno.get=function(){return this.residueStore.resno[this.residueIndex]},yg.chainname.get=function(){return this.chainStore.getChainname(this.chainIndex)},yg.chainid.get=function(){return this.chainStore.getChainid(this.chainIndex)},yg.residueType.get=function(){return this.residueMap.get(this.residueStore.residueTypeId[this.residueIndex])},yg.atomType.get=function(){return this.atomMap.get(this.atomStore.atomTypeId[this.index])},yg.residueAtomOffset.get=function(){return this.residueStore.atomOffset[this.residueIndex]},yg.resname.get=function(){return this.residueType.resname},yg.hetero.get=function(){return this.residueType.hetero},yg.atomname.get=function(){return this.atomType.atomname},yg.element.get=function(){return this.atomType.element},yg.vdw.get=function(){return this.atomType.vdw},yg.covalent.get=function(){return this.atomType.covalent},yg.x.get=function(){return this.atomStore.x[this.index]},yg.x.set=function(t){this.atomStore.x[this.index]=t},yg.y.get=function(){return this.atomStore.y[this.index]},yg.y.set=function(t){this.atomStore.y[this.index]=t},yg.z.get=function(){return this.atomStore.z[this.index]},yg.z.set=function(t){this.atomStore.z[this.index]=t},yg.serial.get=function(){return this.atomStore.serial[this.index]},yg.serial.set=function(t){this.atomStore.serial[this.index]=t},yg.bfactor.get=function(){return this.atomStore.bfactor[this.index]},yg.bfactor.set=function(t){this.atomStore.bfactor[this.index]=t},yg.occupancy.get=function(){return this.atomStore.occupancy[this.index]},yg.occupancy.set=function(t){this.atomStore.occupancy[this.index]=t},yg.altloc.get=function(){return this.atomStore.getAltloc(this.index)},yg.altloc.set=function(t){this.atomStore.setAltloc(this.index,t)},gg.prototype.eachBond=function(t,e){e=e||this.structure._bp;for(var i=this.index,n=this.bondHash,r=n.indexArray,o=n.countArray[i],s=n.offsetArray[i],a=0;a<o;++a)e.index=r[s+a],t(e)},gg.prototype.eachBondedAtom=function(t,e){e=e||this.structure._ap;var i=this.index;this.eachBond(function(n){i!==n.atomIndex1?e.index=n.atomIndex1:e.index=n.atomIndex2,t(e)})},gg.prototype.isBackbone=function(){var t=this.residueType.backboneIndexList;if(t.length>0){var e=this.residueStore.atomOffset[this.residueIndex];return t.includes(this.index-e)}return!1},gg.prototype.isPolymer=function(){if(this.structure.entityList.length>0)return this.entity.isPolymer();var t=this.residueType.moleculeType;return 3===t||4===t||5===t},gg.prototype.isSidechain=function(){return this.isPolymer()&&!this.isBackbone()},gg.prototype.isCg=function(){var t=this.residueType.backboneType;return 4===t||5===t||6===t},gg.prototype.isHetero=function(){return 1===this.residueType.hetero},gg.prototype.isProtein=function(){return 3===this.residueType.moleculeType},gg.prototype.isNucleic=function(){var t=this.residueType.moleculeType;return 4===t||5===t},gg.prototype.isRna=function(){return 4===this.residueType.moleculeType},gg.prototype.isDna=function(){return 5===this.residueType.moleculeType},gg.prototype.isWater=function(){return 1===this.residueType.moleculeType},gg.prototype.isIon=function(){return 2===this.residueType.moleculeType},gg.prototype.isSaccharide=function(){return 6===this.residueType.moleculeType},gg.prototype.isHelix=function(){return _v.includes(this.sstruc)},gg.prototype.isSheet=function(){return wv.includes(this.sstruc)},gg.prototype.isTurn=function(){return xv.includes(this.sstruc)&&this.isProtein()},gg.prototype.isBonded=function(){return 0!==this.bondHash.countArray[this.index]},gg.prototype.isRing=function(){return 1===this.residueType.getRings().flags[this.index-this.residueAtomOffset]},gg.prototype.distanceTo=function(t){var e=this.atomStore,i=t.atomStore,n=this.index,r=t.index,o=e.x[n]-i.x[r],s=e.y[n]-i.y[r],a=e.z[n]-i.z[r],h=o*o+s*s+a*a;return Math.sqrt(h)},gg.prototype.connectedTo=function(t){var e=this.atomStore,i=t.atomStore,n=this.index,r=t.index;if(e.altloc&&i.altloc){var o=e.altloc[n],s=i.altloc[r];if(0!==o&&0!==s&&32!==o&&32!==s&&o!==s)return!1}var a=e.x[n]-i.x[r],h=e.y[n]-i.y[r],l=e.z[n]-i.z[r],u=a*a+h*h+l*l;if(u<64&&this.isCg())return!0;if(isNaN(u))return!1;var d=this.covalent+t.covalent,c=d+.3,f=d-.5;return u<c*c&&u>f*f},gg.prototype.positionFromArray=function(t,e){return void 0===e&&(e=0),this.x=t[e+0],this.y=t[e+1],this.z=t[e+2],this},gg.prototype.positionToArray=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.index,n=this.atomStore;return t[e+0]=n.x[i],t[e+1]=n.y[i],t[e+2]=n.z[i],t},gg.prototype.positionToVector3=function(t){return void 0===t&&(t=new y),t.x=this.x,t.y=this.y,t.z=this.z,t},gg.prototype.positionFromVector3=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},gg.prototype.getResidueBonds=function(t){var e,i,n,r,o=this.residueAtomOffset,s=this.index-this.residueAtomOffset,a=this.residueType.getBonds(),h=a.atomIndices1,l=a.atomIndices2;for(t||(r=[]),e=h.indexOf(s);-1!==e;){if(n=l[e]+o,t)return n;r.push(n),e=h.indexOf(s,e+1)}for(i=l.indexOf(s);-1!==i;){if(n=h[i]+o,t)return n;r.push(n),i=l.indexOf(s,i+1)}return r},gg.prototype.qualifiedName=function(t){var e="";return this.resname&&!t&&(e+="["+this.resname+"]"),void 0!==this.resno&&(e+=this.resno),this.inscode&&(e+="^"+this.inscode),this.chainname&&(e+=":"+this.chainname),this.atomname&&(e+="."+this.atomname),this.altloc&&(e+="%"+this.altloc),this.structure.modelStore.count>1&&(e+="/"+this.modelIndex),e},gg.prototype.clone=function(){return new this.constructor(this.structure,this.index)},gg.prototype.toObject=function(){return{index:this.index,residueIndex:this.residueIndex,atomno:this.atomno,resname:this.resname,x:this.x,y:this.y,z:this.z,element:this.element,chainname:this.chainname,resno:this.resno,serial:this.serial,vdw:this.vdw,covalent:this.covalent,hetero:this.hetero,bfactor:this.bfactor,altloc:this.altloc,atomname:this.atomname,modelindex:this.modelindex}},Object.defineProperties(gg.prototype,yg);var bg=function(t,e){this.structure=t,this.chainStore=t.chainStore,this.residueStore=t.residueStore,this.atomStore=t.atomStore,this.residueMap=t.residueMap,this.atomMap=t.atomMap,this.index=e},_g={entity:{},entityIndex:{},chain:{},chainIndex:{},atomOffset:{},atomCount:{},atomEnd:{},modelIndex:{},chainname:{},chainid:{},resno:{},sstruc:{},inscode:{},residueType:{},resname:{},hetero:{},moleculeType:{},backboneType:{},backboneStartType:{},backboneEndType:{},traceAtomIndex:{},direction1AtomIndex:{},direction2AtomIndex:{},backboneStartAtomIndex:{},backboneEndAtomIndex:{},rungEndAtomIndex:{}};_g.entity.get=function(){return this.structure.entityList[this.entityIndex]},_g.entityIndex.get=function(){return this.chainStore.entityIndex[this.chainIndex]},_g.chain.get=function(){return this.structure.getChainProxy(this.chainIndex)},_g.chainIndex.get=function(){return this.residueStore.chainIndex[this.index]},_g.chainIndex.set=function(t){this.residueStore.chainIndex[this.index]=t},_g.atomOffset.get=function(){return this.residueStore.atomOffset[this.index]},_g.atomOffset.set=function(t){this.residueStore.atomOffset[this.index]=t},_g.atomCount.get=function(){return this.residueStore.atomCount[this.index]},_g.atomCount.set=function(t){this.residueStore.atomCount[this.index]=t},_g.atomEnd.get=function(){return this.atomOffset+this.atomCount-1},_g.modelIndex.get=function(){return this.chainStore.modelIndex[this.chainIndex]},_g.chainname.get=function(){return this.chainStore.getChainname(this.chainIndex)},_g.chainid.get=function(){return this.chainStore.getChainid(this.chainIndex)},_g.resno.get=function(){return this.residueStore.resno[this.index]},_g.resno.set=function(t){this.residueStore.resno[this.index]=t},_g.sstruc.get=function(){return this.residueStore.getSstruc(this.index)},_g.sstruc.set=function(t){this.residueStore.setSstruc(this.index,t)},_g.inscode.get=function(){return this.residueStore.getInscode(this.index)},_g.inscode.set=function(t){this.residueStore.getInscode(this.index,t)},_g.residueType.get=function(){return this.residueMap.get(this.residueStore.residueTypeId[this.index])},_g.resname.get=function(){return this.residueType.resname},_g.hetero.get=function(){return this.residueType.hetero},_g.moleculeType.get=function(){return this.residueType.moleculeType},_g.backboneType.get=function(){return this.residueType.backboneType},_g.backboneStartType.get=function(){return this.residueType.backboneStartType},_g.backboneEndType.get=function(){return this.residueType.backboneEndType},_g.traceAtomIndex.get=function(){return this.residueType.traceAtomIndex+this.atomOffset},_g.direction1AtomIndex.get=function(){return this.residueType.direction1AtomIndex+this.atomOffset},_g.direction2AtomIndex.get=function(){return this.residueType.direction2AtomIndex+this.atomOffset},_g.backboneStartAtomIndex.get=function(){return this.residueType.backboneStartAtomIndex+this.atomOffset},_g.backboneEndAtomIndex.get=function(){return this.residueType.backboneEndAtomIndex+this.atomOffset},_g.rungEndAtomIndex.get=function(){return this.residueType.rungEndAtomIndex+this.atomOffset},bg.prototype.eachAtom=function(t,e){var i,n=this.atomCount,r=this.atomOffset,o=this.structure._ap,s=r+n;if(e&&e.atomOnlyTest){var a=e.atomOnlyTest;for(i=r;i<s;++i)o.index=i,a(o)&&t(o)}else for(i=r;i<s;++i)o.index=i,t(o)},bg.prototype.isProtein=function(){return 3===this.residueType.moleculeType},bg.prototype.isNucleic=function(){var t=this.residueType.moleculeType;return 4===t||5===t},bg.prototype.isRna=function(){return 4===this.residueType.moleculeType},bg.prototype.isDna=function(){return 5===this.residueType.moleculeType},bg.prototype.isCg=function(){var t=this.residueType.backboneType;return 4===t||5===t||6===t},bg.prototype.isPolymer=function(){if(this.structure.entityList.length>0)return this.entity.isPolymer();var t=this.residueType.moleculeType;return 3===t||4===t||5===t},bg.prototype.isHetero=function(){return 1===this.residueType.hetero},bg.prototype.isWater=function(){return 1===this.residueType.moleculeType},bg.prototype.isIon=function(){return 2===this.residueType.moleculeType},bg.prototype.isSaccharide=function(){return 6===this.residueType.moleculeType},bg.prototype.isHelix=function(){return _v.includes(this.sstruc)},bg.prototype.isSheet=function(){return wv.includes(this.sstruc)},bg.prototype.isTurn=function(){return xv.includes(this.sstruc)&&this.isProtein()},bg.prototype.getAtomType=function(t){return this.atomMap.get(this.atomStore.atomTypeId[t])},bg.prototype.getResname1=function(){return Tv[this.resname.toUpperCase()]||"X"},bg.prototype.getBackboneType=function(t){switch(t){case-1:return this.residueType.backboneStartType;case 1:return this.residueType.backboneEndType;default:return this.residueType.backboneType}},bg.prototype.getAtomIndexByName=function(t){var e=this.residueType.getAtomIndexByName(t);return void 0!==e&&(e+=this.atomOffset),e},bg.prototype.getAtomByName=function(t){return this.residueType.getAtomByName(t)},bg.prototype.hasAtomWithName=function(t){return this.residueType.hasAtomWithName(t)},bg.prototype.getAtomnameList=function(){var t=this;console.warn("getAtomnameList - might be expensive");for(var e=this.atomCount,i=this.atomOffset,n=new Array(e),r=0;r<e;++r)n[r]=t.getAtomType(i+r).atomname;return n},bg.prototype.connectedTo=function(t){var e=this.structure.getAtomProxy(this.backboneEndAtomIndex),i=this.structure.getAtomProxy(t.backboneStartAtomIndex);return!(!e||!i)&&e.connectedTo(i)},bg.prototype.getNextConnectedResidue=function(){var t=this.chainStore.residueOffset[this.chainIndex],e=this.chainStore.residueCount[this.chainIndex],i=this.index+1;if(i<t+e){var n=this.structure.getResidueProxy(i);if(this.connectedTo(n))return n}else if(i===t+e){var r=this.structure.getResidueProxy(t);if(this.connectedTo(r))return r}},bg.prototype.getPreviousConnectedResidue=function(){var t=this.chainStore.residueOffset[this.chainIndex],e=this.index-1;if(e>=t){var i=this.structure.getResidueProxy(e);if(i.connectedTo(this))return i}else if(e===t-1){var n=this.chainStore.residueCount[this.chainIndex],r=this.structure.getResidueProxy(t+n-1);if(r.connectedTo(this))return r}},bg.prototype.getBonds=function(){return this.residueType.getBonds(this)},bg.prototype.getRings=function(){return this.residueType.getRings()},bg.prototype.qualifiedName=function(t){var e="";return this.resname&&!t&&(e+="["+this.resname+"]"),void 0!==this.resno&&(e+=this.resno),this.inscode&&(e+="^"+this.inscode),this.chain&&(e+=":"+this.chainname),e+="/"+this.modelIndex},bg.prototype.clone=function(){return new this.constructor(this.structure,this.index)},bg.prototype.toObject=function(){return{index:this.index,chainIndex:this.chainIndex,atomOffset:this.atomOffset,atomCount:this.atomCount,resno:this.resno,resname:this.resname,sstruc:this.sstruc}},Object.defineProperties(bg.prototype,_g);var wg=function(t,e,i){this.structure=t,this.chainStore=t.chainStore,this.residueStore=t.residueStore,this.atomStore=t.atomStore,this.residueIndexStart=e,this.residueIndexEnd=i,this.residueCount=i-e+1;var n=this.structure.getResidueProxy(this.residueIndexStart),r=this.structure.getResidueProxy(this.residueIndexEnd);this.isPrevConnected=void 0!==n.getPreviousConnectedResidue();var o=r.getNextConnectedResidue();this.isNextConnected=void 0!==o,this.isNextNextConnected=this.isNextConnected&&void 0!==o.getNextConnectedResidue(),this.isCyclic=r.connectedTo(n),this.__residueProxy=this.structure.getResidueProxy()},xg={chainIndex:{},modelIndex:{},chainname:{}};xg.chainIndex.get=function(){return this.residueStore.chainIndex[this.residueIndexStart]},xg.modelIndex.get=function(){return this.chainStore.modelIndex[this.chainIndex]},xg.chainname.get=function(){return this.chainStore.getChainname(this.chainIndex)},wg.prototype.isProtein=function(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.isProtein()},wg.prototype.isCg=function(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.isCg()},wg.prototype.isNucleic=function(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.isNucleic()},wg.prototype.getMoleculeType=function(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.moleculeType},wg.prototype.getBackboneType=function(t){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.getBackboneType(t)},wg.prototype.getAtomIndexByType=function(t,e){this.isCyclic?-1===t?t=this.residueCount-1:t===this.residueCount&&(t=0):(-1!==t||this.isPrevConnected||(t+=1),t!==this.residueCount||this.isNextNextConnected||(t-=1));var i=this.__residueProxy;i.index=this.residueIndexStart+t;var n;switch(e){case"trace":n=i.traceAtomIndex;break;case"direction1":n=i.direction1AtomIndex;break;case"direction2":n=i.direction2AtomIndex;break;default:var r=i.getAtomByName(e);n=r?r.index:void 0}return n},wg.prototype.eachAtom=function(t,e){this.eachResidue(function(i){i.eachAtom(t,e)},e)},wg.prototype.eachAtomN=function(t,e,i){var n,r=this,o=this.residueCount,s=new Array(t);for(n=0;n<t;++n)s[n]=r.structure.getAtomProxy(r.getAtomIndexByType(n,i));e.apply(this,s);for(var a=t;a<o;++a){for(n=1;n<t;++n)s[n-1].index=s[n].index;s[t-1].index=r.getAtomIndexByType(a,i),e.apply(r,s)}},wg.prototype.eachAtomN2=function(t,e,i){var n=this,r=this.atomOffset,o=this.atomCount,s=r+o;if(!(o<t)){for(var a=new Array(t),h=0;h<t;++h)a[h]=n.structure.getAtomProxy();var l=this.structure.atomSetCache["__"+i];void 0===l&&(np.warn("no precomputed atomSet for: "+i),l=this.structure.getAtomSet(!1),this.eachResidue(function(t){var e=t.getAtomByName(i);l.set(e.index)}));var u=0;l.forEach(function(i){if(i>=r&&i<s){for(var n=1;n<t;++n)a[n-1].index=a[n].index;a[t-1].index=i,u+=1,u>=t&&e.apply(this,a)}})}},wg.prototype.eachResidue=function(t){for(var e=this.structure.getResidueProxy(),i=this.residueCount,n=this.residueIndexStart,r=0;r<i;++r)e.index=n+r,t(e)},wg.prototype.qualifiedName=function(){var t=this.structure.getResidueProxy(this.residueIndexStart),e=this.structure.getResidueProxy(this.residueIndexEnd);return t.qualifiedName()+" - "+e.qualifiedName()},Object.defineProperties(wg.prototype,xg);var Sg=function(t,e){this.structure=t,this.chainStore=t.chainStore,this.residueStore=t.residueStore,this.index=e},kg={entity:{},model:{},entityIndex:{},modelIndex:{},residueOffset:{},residueCount:{},residueEnd:{},atomOffset:{},atomEnd:{},atomCount:{},chainname:{},chainid:{}};kg.entity.get=function(){return this.structure.entityList[this.entityIndex]},kg.model.get=function(){return this.structure.getModelProxy(this.modelIndex)},kg.entityIndex.get=function(){return this.chainStore.entityIndex[this.index]},kg.entityIndex.set=function(t){this.chainStore.entityIndex[this.index]=t},kg.modelIndex.get=function(){return this.chainStore.modelIndex[this.index]},kg.modelIndex.set=function(t){this.chainStore.modelIndex[this.index]=t},kg.residueOffset.get=function(){return this.chainStore.residueOffset[this.index]},kg.residueOffset.set=function(t){this.chainStore.residueOffset[this.index]=t},kg.residueCount.get=function(){return this.chainStore.residueCount[this.index]},kg.residueCount.set=function(t){this.chainStore.residueCount[this.index]=t},kg.residueEnd.get=function(){return this.residueOffset+this.residueCount-1},kg.atomOffset.get=function(){return this.residueStore.atomOffset[this.residueOffset]},kg.atomEnd.get=function(){return this.residueStore.atomOffset[this.residueEnd]+this.residueStore.atomCount[this.residueEnd]-1},kg.atomCount.get=function(){return 0===this.residueCount?0:this.atomEnd-this.atomOffset+1},kg.chainname.get=function(){return this.chainStore.getChainname(this.index)},kg.chainname.set=function(t){this.chainStore.setChainname(this.index,t)},kg.chainid.get=function(){return this.chainStore.getChainid(this.index)},kg.chainid.set=function(t){this.chainStore.setChainid(this.index,t)},Sg.prototype.eachAtom=function(t,e){this.eachResidue(function(i){i.eachAtom(t,e)},e)},Sg.prototype.eachResidue=function(t,e){var i,n=this.residueCount,r=this.residueOffset,o=this.structure._rp,s=r+n;if(e&&e.test){var a=e.residueOnlyTest;if(a)for(i=r;i<s;++i)o.index=i,a(o)&&t(o,e);else for(i=r;i<s;++i)o.index=i,t(o,e)}else for(i=r;i<s;++i)o.index=i,t(o)},Sg.prototype.eachResidueN=function(t,e){var i,n=this,r=this.residueCount,o=this.residueOffset,s=o+r;if(!(r<t)){var a=new Array(t);for(i=0;i<t;++i)a[i]=n.structure.getResidueProxy(o+i);e.apply(this,a);for(var h=o+t;h<s;++h){for(i=0;i<t;++i)a[i].index+=1;e.apply(n,a)}}},Sg.prototype.eachPolymer=function(t,e){for(var i,n,r=e?e.residueOnlyTest:void 0,o=this.model.structure,s=this.residueCount,a=this.residueOffset,h=a+s,l=this.structure.getResidueProxy(),u=this.structure.getResidueProxy(a),d=this.structure.getAtomProxy(),c=this.structure.getAtomProxy(),f=!0,p=a+1;p<h;++p){l.index=u.index,u.index=p,f&&(i=l.index,f=!1),n=u.index;var m=f?l.backboneEndType:l.backboneType,v=u.backboneType;m!==cv&&m===v?(d.index=l.backboneEndAtomIndex,c.index=u.backboneStartAtomIndex,d&&c&&d.connectedTo(c)&&(!r||r(l)&&r(u))||(l.index-i>1&&t(new wg(o,i,l.index)),i=n)):(m!==cv&&l.index-i>1&&t(new wg(o,i,l.index)),i=n)}n-i>1&&this.structure.getResidueProxy(i).backboneStartType&&t(new wg(o,i,n))},Sg.prototype.qualifiedName=function(){return":"+this.chainname+"/"+this.modelIndex},Sg.prototype.clone=function(){return new this.constructor(this.structure,this.index)},Sg.prototype.toObject=function(){return{index:this.index,residueOffset:this.residueOffset,residueCount:this.residueCount,chainname:this.chainname}},Object.defineProperties(Sg.prototype,kg);var Eg=function(t,e){this.structure=t,this.modelStore=t.modelStore,this.chainStore=t.chainStore,this.residueStore=t.residueStore,this.index=e},Mg={chainOffset:{},chainCount:{},residueOffset:{},atomOffset:{},chainEnd:{},residueEnd:{},atomEnd:{},residueCount:{},atomCount:{}};Mg.chainOffset.get=function(){return this.modelStore.chainOffset[this.index]},Mg.chainOffset.set=function(t){this.modelStore.chainOffset[this.index]=t},Mg.chainCount.get=function(){return this.modelStore.chainCount[this.index]},Mg.chainCount.set=function(t){this.modelStore.chainCount[this.index]=t},Mg.residueOffset.get=function(){return this.chainStore.residueOffset[this.chainOffset]},Mg.atomOffset.get=function(){return this.residueStore.atomOffset[this.residueOffset]},Mg.chainEnd.get=function(){return this.chainOffset+this.chainCount-1},Mg.residueEnd.get=function(){return this.chainStore.residueOffset[this.chainEnd]+this.chainStore.residueCount[this.chainEnd]-1},Mg.atomEnd.get=function(){return this.residueStore.atomOffset[this.residueEnd]+this.residueStore.atomCount[this.residueEnd]-1},Mg.residueCount.get=function(){return 0===this.chainCount?0:this.residueEnd-this.residueOffset+1},Mg.atomCount.get=function(){return 0===this.residueCount?0:this.atomEnd-this.atomOffset+1},Eg.prototype.eachAtom=function(t,e){this.eachChain(function(i){i.eachAtom(t,e)},e)},Eg.prototype.eachResidue=function(t,e){this.eachChain(function(i){i.eachResidue(t,e)},e)},Eg.prototype.eachPolymer=function(t,e){if(e&&e.chainOnlyTest){var i=e.chainOnlyTest;this.eachChain(function(n){i(n)&&n.eachPolymer(t,e)})}else this.eachChain(function(i){i.eachPolymer(t,e)})},Eg.prototype.eachChain=function(t,e){var i,n=this.chainCount,r=this.chainOffset,o=this.structure._cp,s=r+n;if(e&&e.test){var a=e.chainOnlyTest;if(a)for(i=r;i<s;++i)o.index=i,a(o)&&t(o,e);else for(i=r;i<s;++i)o.index=i,t(o,e)}else for(i=r;i<s;++i)o.index=i,t(o)},Eg.prototype.qualifiedName=function(){return"/"+this.index},Eg.prototype.clone=function(){return new this.constructor(this.structure,this.index)},Eg.prototype.toObject=function(){return{index:this.index,chainOffset:this.chainOffset,chainCount:this.chainCount}},Object.defineProperties(Eg.prototype,Mg);var Tg=function(t,e){this.signals={refreshed:new io},this.init(t,e)},Cg={type:{}};Tg.prototype.init=function(t,e){this.name=t,this.path=e,this.title="",this.id="",this.header={},this.extraData={},this.atomSetCache=void 0,this.atomSetDict={},this.biomolDict={},this.entityList=[],this.unitcell=void 0,this.frames=[],this.boxes=[],this.validation=void 0,this.bondStore=new Kv(0),this.backboneBondStore=new Kv(0),this.rungBondStore=new Kv(0),this.atomStore=new Qv(0),this.residueStore=new Jv(0),this.chainStore=new tg(0),this.modelStore=new eg(0),this.atomMap=new cg(this),this.residueMap=new pg(this),this.bondHash=void 0,this.spatialHash=void 0,this.atomSet=void 0,this.bondSet=void 0,this.center=void 0,this.boundingBox=void 0,this._bp=this.getBondProxy(),this._ap=this.getAtomProxy(),this._rp=this.getResidueProxy(),this._cp=this.getChainProxy()},Cg.type.get=function(){return"Structure"},Tg.prototype.finalizeAtoms=function(){this.atomSet=this.getAtomSet(),this.atomCount=this.atomStore.count,this.boundingBox=this.getBoundingBox(),this.center=this.boundingBox.getCenter(),this.spatialHash=new Ps(this.atomStore,this.boundingBox)},Tg.prototype.finalizeBonds=function(){var t=this;this.bondSet=this.getBondSet(),this.bondCount=this.bondStore.count,this.bondHash=new Xv(this.bondStore,this.atomStore.count),this.atomSetCache={},this.atomSetDict.rung||(this.atomSetDict.rung=this.getAtomSet(!1));for(var e in t.atomSetDict)t.atomSetCache["__"+e]=t.atomSetDict[e].clone()},Tg.prototype.getBondProxy=function(t){return new mg(this,t)},Tg.prototype.getAtomProxy=function(t){return new gg(this,t)},Tg.prototype.getResidueProxy=function(t){return new bg(this,t)},Tg.prototype.getChainProxy=function(t){return new Sg(this,t)},Tg.prototype.getModelProxy=function(t){return new Eg(this,t)},Tg.prototype.getBondSet=function(){var t=this.bondStore.count,e=new sv(t),i=this.atomSet;if(i)for(var n=this.getBondProxy(),r=0;r<t;++r)n.index=r,i.isSet(n.atomIndex1,n.atomIndex2)&&e.set(n.index);else e.setAll();return e},Tg.prototype.getBackboneBondSet=function(){var t=this.backboneBondStore.count,e=new sv(t),i=this.atomSetCache.__backbone;if(i){var n=this.getBondProxy();n.bondStore=this.backboneBondStore;for(var r=0;r<t;++r)n.index=r,i.isSet(n.atomIndex1,n.atomIndex2)&&e.set(n.index)}else e.set_all(!0);return e},Tg.prototype.getRungBondSet=function(){var t=this.rungBondStore.count,e=new sv(t),i=this.atomSetCache.__rung;if(i){var n=this.getBondProxy();n.bondStore=this.rungBondStore;for(var r=0;r<t;++r)n.index=r,i.isSet(n.atomIndex1,n.atomIndex2)&&e.set(n.index)}else e.set_all(!0);return e},Tg.prototype.getAtomSet=function(t){var e,i=this.atomStore.count;if(t instanceof sv)e=t;else if(t&&t.test){var n=t.string;n in this.atomSetCache?e=this.atomSetCache[n]:(e=new sv(i),this.eachAtom(function(t){e.set(t.index)},t),this.atomSetCache[n]=e)}else e=!1===t?new sv(i):new sv(i,!0);return e},Tg.prototype.getAtomSetWithinSelection=function(t,e){var i=this.spatialHash,n=this.getAtomSet(!1),r=this.getAtomProxy();return this.getAtomSet(t).forEach(function(t){r.index=t,i.within(r.x,r.y,r.z,e).forEach(function(t){n.set(t)})}),n},Tg.prototype.getAtomSetWithinPoint=function(t,e){var i=t,n=this.getAtomSet(!1);return this.spatialHash.within(i.x,i.y,i.z,e).forEach(function(t){n.set(t)}),n},Tg.prototype.getAtomSetWithinVolume=function(t,e,i,n,r){for(var o=this,s=new $v(t,i,n,r),a=s.getDataPosition(),h=a.length,l=s.matrix.getMaxScaleOnAxis(),u=this.getAtomSet(!1),d=0;d<h;d+=3)o.spatialHash.within(a[d],a[d+1],a[d+2],l).forEach(function(t){u.set(t)});return u},Tg.prototype.getAtomSetWithinGroup=function(t){var e=this.atomStore.residueIndex,i=this.getAtomSet(!1),n=this.getResidueProxy();return this.getAtomSet(t).forEach(function(t){n.index=e[t];for(var r=n.atomOffset;r<=n.atomEnd;++r)i.set(r)}),i},Tg.prototype.getSelection=function(){return!1},Tg.prototype.getStructure=function(){return this},Tg.prototype.eachEntity=function(t,e){this.entityList.forEach(function(i){void 0!==e&&i.getEntityType()!==e||t(i)})},Tg.prototype.eachBond=function(t,e){var i,n=this.getBondProxy();if(e&&e.test&&(i=this.getBondSet(e),this.bondSet&&i.intersection(this.bondSet)),i)i.forEach(function(e){n.index=e,t(n)});else for(var r=this.bondStore.count,o=0;o<r;++o)n.index=o,t(n)},Tg.prototype.eachAtom=function(t,e){if(e&&e.test)this.eachModel(function(i){i.eachAtom(t,e)},e);else for(var i=this.atomStore.count,n=this.getAtomProxy(),r=0;r<i;++r)n.index=r,t(n)},Tg.prototype.eachResidue=function(t,e){var i;if(e&&e.test){var n=this.modelStore.count,r=this.getModelProxy(),o=e.modelOnlyTest;if(o)for(i=0;i<n;++i)r.index=i,o(r)&&r.eachResidue(t,e);else for(i=0;i<n;++i)r.index=i,r.eachResidue(t,e)}else{var s=this.residueStore.count,a=this.getResidueProxy();for(i=0;i<s;++i)a.index=i,t(a)}},Tg.prototype.eachResidueN=function(t,e){var i,n,r=this,o=this.residueStore.count;if(!(o<t)){var s=new Array(t);for(i=0;i<t;++i)s[i]=r.getResidueProxy(i);for(e.apply(this,s),n=t;n<o;++n){for(i=0;i<t;++i)s[i].index+=1;e.apply(r,s)}}},Tg.prototype.eachPolymer=function(t,e){if(e&&e.modelOnlyTest){var i=e.modelOnlyTest;this.eachModel(function(n){i(n)&&n.eachPolymer(t,e)})}else this.eachModel(function(i){i.eachPolymer(t,e)})},Tg.prototype.eachChain=function(t,e){if(e&&e.test)this.eachModel(function(i){i.eachChain(t,e)});else for(var i=this.chainStore.count,n=this.getChainProxy(),r=0;r<i;++r)n.index=r,t(n)},Tg.prototype.eachModel=function(t,e){var i,n=this.modelStore.count,r=this.getModelProxy();if(e&&e.test){var o=e.modelOnlyTest;if(o)for(i=0;i<n;++i)r.index=i,o(r)&&t(r,e);else for(i=0;i<n;++i)r.index=i,t(r,e)}else for(i=0;i<n;++i)r.index=i,t(r)},Tg.prototype.getAtomData=function(t){var e=Object.assign({},t);e.colorParams&&(e.colorParams.structure=this.getStructure());var i,n,r,o,s,a,h,l=e.what,u=gr(e.atomSet,this.atomSet),d={},c=this.getAtomProxy(),f=u.getSize();return l&&!l.position||(r=new Float32Array(3*f),d.position=r),l&&!l.color||(o=new Float32Array(3*f),d.color=o,n=ap.getScheme(e.colorParams)),l&&!l.picking||(s=new Float32Array(f),d.picking=new Wm(s,this.getStructure())),l&&!l.radius||(a=new Float32Array(f),d.radius=a,i=new hs(e.radiusParams.radius,e.radiusParams.scale)),l&&!l.index||(h=new Float32Array(f),d.index=h),u.forEach(function(t,e){var l=3*e;c.index=t,r&&c.positionToArray(r,l),o&&n.atomColorToArray(c,o,l),s&&(s[e]=t),a&&(a[e]=i.atomRadius(c)),h&&(h[e]=t)}),d},Tg.prototype.getBondData=function(t){var e=Object.assign({},t);e.colorParams&&(e.colorParams.structure=this.getStructure());var i,n,r,o,s,a,h,l,u,d=e.what,c=gr(e.bondSet,this.bondSet),f=gr(e.multipleBond,"off"),p="off"!==f,m="offset"===f,v=gr(e.bondScale,.4),g=gr(e.bondSpacing,1),b={},_=this.getBondProxy();e.bondStore&&(_.bondStore=e.bondStore);var w,x=this.getAtomProxy(),S=this.getAtomProxy();if(p){var k=_.bondStore.bondOrder;w=0,c.forEach(function(t){w+=k[t]})}else w=c.getSize();d&&!d.position||(r=new Float32Array(3*w),o=new Float32Array(3*w),b.position1=r,b.position2=o),d&&!d.color||(s=new Float32Array(3*w),a=new Float32Array(3*w),b.color=s,b.color2=a,n=ap.getScheme(e.colorParams)),d&&!d.picking||(h=new Float32Array(w),b.picking=new $m(h,this.getStructure(),e.bondStore)),(!d||d.radius||p&&d.position)&&(i=new hs(e.radiusParams.radius,e.radiusParams.scale)),d&&!d.radius||(l=new Float32Array(w),b.radius=l,e.radius2&&(u=new Float32Array(w),b.radius2=u));var E,M,T,C,O,P,A,D=0,I=new y,R=new y,L=new y;return c.forEach(function(t){if(M=3*D,_.index=t,x.index=_.atomIndex1,S.index=_.atomIndex2,C=_.bondOrder,r&&(p&&C>1?(O=i.atomRadius(x),P=O*v/(.5*C),_.calculateShiftDir(L),m?(A=2*g*O,L.multiplyScalar(A),L.negate(),R.subVectors(S,x).multiplyScalar(Math.max(.1,A/1.88)),x.positionToArray(r,M),S.positionToArray(o,M),C>=2&&(I.addVectors(x,L).add(R).toArray(r,M+3),I.addVectors(S,L).sub(R).toArray(o,M+3),C>=3&&(I.subVectors(x,L).add(R).toArray(r,M+6),I.subVectors(S,L).sub(R).toArray(o,M+6)))):(A=(g-v)*O,L.multiplyScalar(A),2===C?(I.addVectors(x,L).toArray(r,M),I.subVectors(x,L).toArray(r,M+3),I.addVectors(S,L).toArray(o,M),I.subVectors(S,L).toArray(o,M+3)):3===C?(x.positionToArray(r,M),I.addVectors(x,L).toArray(r,M+3),I.subVectors(x,L).toArray(r,M+6),S.positionToArray(o,M),I.addVectors(S,L).toArray(o,M+3),I.subVectors(S,L).toArray(o,M+6)):(x.positionToArray(r,M),S.positionToArray(o,M)))):(x.positionToArray(r,M),S.positionToArray(o,M))),s&&(n.bondColorToArray(_,1,s,M),n.bondColorToArray(_,0,a,M),p&&C>1))for(E=1;E<C;++E)T=3*E+M,Eo(s,M,T,3),Eo(a,M,T,3);if(h&&(h[D]=t,p&&C>1))for(E=1;E<C;++E)h[D+E]=t;if(l&&(l[D]=i.atomRadius(x),p&&C>1))for(P=l[D]*v/(m?1:.5*C),E=m?1:0;E<C;++E)l[D+E]=P;if(u&&(u[D]=i.atomRadius(S),p&&C>1))for(P=u[D]*v/(m?1:.5*C),E=m?1:0;E<C;++E)u[D+E]=P;D+=p?C:1}),b},Tg.prototype.getBackboneAtomData=function(t){return t=Object.assign({atomSet:this.atomSetCache.__backbone},t),this.getAtomData(t)},Tg.prototype.getBackboneBondData=function(t){return t=Object.assign({bondSet:this.getBackboneBondSet(),bondStore:this.backboneBondStore},t),this.getBondData(t)},Tg.prototype.getRungAtomData=function(t){return t=Object.assign({atomSet:this.atomSetCache.__rung},t),this.getAtomData(t)},Tg.prototype.getRungBondData=function(t){return t=Object.assign({bondSet:this.getRungBondSet(),bondStore:this.rungBondStore},t),this.getBondData(t)},Tg.prototype.getBoundingBox=function(t,e){rp&&np.time("getBoundingBox"),e=e||new lt;var i=1/0,n=1/0,r=1/0,o=-1/0,s=-1/0,a=-1/0;return this.eachAtom(function(t){var e=t.x,h=t.y,l=t.z;e<i&&(i=e),h<n&&(n=h),l<r&&(r=l),e>o&&(o=e),h>s&&(s=h),l>a&&(a=l)},t),e.min.set(i,n,r),e.max.set(o,s,a),rp&&np.timeEnd("getBoundingBox"),e},Tg.prototype.getPrincipalAxes=function(t){rp&&np.time("getPrincipalAxes");var e=0,i=new ls(3,this.atomCount),n=i.data;return this.eachAtom(function(t){n[e+0]=t.x,n[e+1]=t.y,n[e+2]=t.z,e+=3},t),rp&&np.timeEnd("getPrincipalAxes"),new Hv(i)},Tg.prototype.atomCenter=function(t){return t?this.getBoundingBox(t).getCenter():this.center.clone()},Tg.prototype.getSequence=function(t){var e=[],i=this.getResidueProxy();return this.eachAtom(function(t){i.index=t.residueIndex,t.index===i.traceAtomIndex&&e.push(i.getResname1())},t),e},Tg.prototype.getAtomIndices=function(t){var e;if(t&&t.string)e=[],this.eachAtom(function(t){e.push(t.index)},t);else{var i={what:{index:!0}};e=this.getAtomData(i).index}return e},Tg.prototype.getChainnameCount=function(t){var e=new Set;return this.eachChain(function(t){t.residueCount&&e.add(t.chainname)},t),e.size},Tg.prototype.updatePosition=function(t){var e=0;this.eachAtom(function(i){i.positionFromArray(t,e),e+=3})},Tg.prototype.refreshPosition=function(){this.getBoundingBox(void 0,this.boundingBox),this.boundingBox.getCenter(this.center),this.spatialHash=new Ps(this.atomStore,this.boundingBox)},Tg.prototype.dispose=function(){this.frames&&(this.frames.length=0),this.boxes&&(this.boxes.length=0),this.bondStore.dispose(),this.backboneBondStore.dispose(),this.rungBondStore.dispose(),this.atomStore.dispose(),this.residueStore.dispose(),this.chainStore.dispose(),this.modelStore.dispose(),delete this.bondStore,delete this.atomStore,delete this.residueStore,delete this.chainStore,delete this.modelStore,delete this.frames,delete this.boxes,delete this.cif,delete this.bondSet,delete this.atomSet},Object.defineProperties(Tg.prototype,Cg);var Og=function(t,e){var i;"function"===typeof t.eachAtom?i=t.atomCount:t instanceof Float32Array&&(i=t.length/3);var n=new ls(3,i),r=new ls(3,i);this.coords1t=new ls(i,3),this.coords2t=new ls(i,3),this.A=new ls(3,3),this.W=new ls(1,3),this.U=new ls(3,3),this.V=new ls(3,3),this.VH=new ls(3,3),this.R=new ls(3,3),this.tmp=new ls(3,3),this.c=new ls(3,3),this.c.data.set([1,0,0,0,1,0,0,0,-1]),this.prepCoords(t,n),this.prepCoords(e,r),this._superpose(n,r)};Og.prototype._superpose=function(t,e){this.mean1=ms(t),this.mean2=ms(e),vs(t,this.mean1),vs(e,this.mean2),us(this.coords1t,t),us(this.coords2t,e),ds(this.A,this.coords2t,this.coords1t),ws(this.A,this.W,this.U,this.V),cs(this.V,this.VH),ps(this.R,this.U,this.VH),fs(this.R)<0&&(rp&&np.log("R not a right handed system"),ps(this.tmp,this.c,this.VH),ps(this.R,this.U,this.tmp))},Og.prototype.prepCoords=function(t,e){var i=0,n=e.data;"function"===typeof t.eachAtom?t.eachAtom(function(t){n[i+0]=t.x,n[i+1]=t.y,n[i+2]=t.z,i+=3}):t instanceof Float32Array?n.set(t):np.warn("prepCoords: input type unknown")},Og.prototype.transform=function(t){var e;"function"===typeof t.eachAtom?e=t.atomCount:t instanceof Float32Array&&(e=t.length/3);var i=new ls(3,e),n=new ls(e,3);this.prepCoords(t,i),vs(i,this.mean1),ds(n,this.R,i),us(i,n),gs(i,this.mean2);var r=0,o=i.data;"function"===typeof t.eachAtom?t.eachAtom(function(t){t.x=o[r+0],t.y=o[r+1],t.z=o[r+2],r+=3}):t instanceof Float32Array?t.set(o.subarray(0,3*e)):np.warn("transform: input type unknown")};var Pg=function(t,e){this.signals={startedRunning:new io,haltedRunning:new io};var i=Object.assign({},e);t.signals.playerChanged.add(function(t){t!==this&&this.pause()},this);var n=gr(t.numframes,1);this.traj=t,this.start=gr(i.start,0),this.end=Math.min(gr(i.end,n-1),n-1),this.step=gr(i.step,Math.ceil((n+1)/100)),this.timeout=gr(i.timeout,50),this.interpolateType=gr(i.interpolateType,""),this.interpolateStep=gr(i.interpolateStep,5),this.mode=gr(i.mode,"loop"),this.direction=gr(i.direction,"forward"),this._stopFlag=!1,this._running=!1,t.signals.gotNumframes.add(function(t){this.end=Math.min(gr(i.end,t-1),t-1)},this)};Pg.prototype._animate=function(){var t;if(this._running=!0,this.traj.inProgress||this._stopFlag||(t="forward"===this.direction?this.traj.currentFrame+this.step:this.traj.currentFrame-this.step,(t>=this.end||t<this.start)&&("once"===this.mode?(this.pause(),t="forward"===this.direction?this.end:this.start):t="forward"===this.direction?this.start:this.end),this.interpolateType||this.traj.setFrame(t)),this._stopFlag)this._running=!1;else if(!this.traj.inProgress&&this.interpolateType){var e,i,n;"forward"===this.direction?(e=Math.max(this.start,t-this.step),i=Math.max(this.start,t-2*this.step),n=Math.max(this.start,t-3*this.step)):(e=Math.min(this.end,t+this.step),i=Math.min(this.end,t+2*this.step),n=Math.min(this.end,t+3*this.step)),this._interpolate(t,e,i,n,1/this.interpolateStep,0)}else setTimeout(this._animate.bind(this),this.timeout)},Pg.prototype._interpolate=function(t,e,i,n,r,o){if((o+=r)<=1){var s=Math.round(this.timeout*r);this.traj.setFrameInterpolated(t,e,i,n,o,this.interpolateType,function(){setTimeout(function(){this._interpolate(t,e,i,n,r,o)}.bind(this),s)}.bind(this))}else setTimeout(this._animate.bind(this),0)},Pg.prototype.toggle=function(){this._running?this.pause():this.play()},Pg.prototype.play=function(){if(!this._running){this.traj.player!==this&&this.traj.setPlayer(this);var t=this.traj.currentFrame,e=Math.ceil(t/this.step)*this.step;"forward"===this.direction&&t>=this.end?e=this.start:"backward"===this.direction&&t<=this.start&&(e=this.end),this.traj.setFrame(e),this._stopFlag=!1,this._animate(),this.signals.startedRunning.dispatch()}},Pg.prototype.pause=function(){this._running&&(this._stopFlag=!0,this.signals.haltedRunning.dispatch())},Pg.prototype.stop=function(){this.traj.setFrame(this.start),this.pause()};var Ag=function(t,e,i){this.signals={gotNumframes:new io,frameChanged:new io,selectionChanged:new io,playerChanged:new io};var n=i||{};n.centerPbc=gr(n.centerPbc,!0),n.removePbc=gr(n.removePbc,!0),n.superpose=gr(n.superpose,!0),this.setParameters(n),this.name=t.replace(/^.*[\\/]/,""),this.selection=new $f(gr(n.sele,"backbone and not hydrogen")),this.selection.signals.stringChanged.add(function(){this.makeIndices(),this.resetCache()},this),this.setStructure(e),this.setPlayer(new Pg(this)),this.trajPath=t,this.numframes=void 0,this.getNumframes()};Ag.prototype.setStructure=function(t){this.structure=t,this.atomCount=t.atomCount,this.makeAtomIndices(),this.saveInitialStructure(),this.backboneIndices=this.getIndices(new $f("backbone and not hydrogen")),this.makeIndices(),this.frameCache=[],this.boxCache=[],this.pathCache=[],this.frameCacheSize=0,this.currentFrame=-1},Ag.prototype.saveInitialStructure=function(){var t=0,e=new Float32Array(3*this.atomCount);this.structure.eachAtom(function(i){e[t+0]=i.x,e[t+1]=i.y,e[t+2]=i.z,t+=3}),this.initialStructure=e},Ag.prototype.setSelection=function(t){return this.selection.setString(t),this},Ag.prototype.getIndices=function(t){var e;if(t&&t.test){var i=0,n=t.test;e=[],this.structure.eachAtom(function(t){n(t)&&e.push(i),i+=1})}else e=this.structure.getAtomIndices(this.selection);return e},Ag.prototype.makeIndices=function(){var t=this;this.indices=this.getIndices(this.selection);var e,i,n=3*this.indices.length;this.coords1=new Float32Array(n),this.coords2=new Float32Array(n);var r=this.initialStructure,o=this.coords2;for(e=0;e<n;e+=3)i=3*t.indices[e/3],o[e+0]=r[i+0],o[e+1]=r[i+1],o[e+2]=r[i+2]},Ag.prototype.makeAtomIndices=function(){np.error("Trajectory.makeAtomIndices not implemented")},Ag.prototype.getNumframes=function(){np.error("Trajectory.loadFrame not implemented")},Ag.prototype.resetCache=function(){return this.frameCache=[],this.boxCache=[],this.pathCache=[],this.frameCacheSize=0,this.setFrame(this.currentFrame),this},Ag.prototype.setParameters=function(t){var e=t,i=!1;void 0!==e.centerPbc&&e.centerPbc!==this.centerPbc&&(this.centerPbc=e.centerPbc,i=!0),void 0!==e.removePbc&&e.removePbc!==this.removePbc&&(this.removePbc=e.removePbc,i=!0),void 0!==e.superpose&&e.superpose!==this.superpose&&(this.superpose=e.superpose,i=!0),i&&this.resetCache()},Ag.prototype.setFrame=function(t,e){return void 0===t?this:(this.inProgress=!0,t=parseInt(t),-1===t||this.frameCache[t]?this.updateStructure(t,e):this.loadFrame(t,function(){this.updateStructure(t,e)}.bind(this)),this)},Ag.prototype.interpolate=function(t,e,i,n,r,o,s){var a,h=this.frameCache,l=h[t],u=h[e],d=h[i],c=h[n],f=l.length,p=new Float32Array(f);if("spline"===o)for(a=0;a<f;a+=3)p[a+0]=Kr(c[a+0],d[a+0],u[a+0],l[a+0],r,1),p[a+1]=Kr(c[a+1],d[a+1],u[a+1],l[a+1],r,1),p[a+2]=Kr(c[a+2],d[a+2],u[a+2],l[a+2],r,1);else for(a=0;a<f;a+=3)p[a+0]=Zr(u[a+0],l[a+0],r),p[a+1]=Zr(u[a+1],l[a+1],r),p[a+2]=Zr(u[a+2],l[a+2],r);this.structure.updatePosition(p),this.currentFrame=t,this.signals.frameChanged.dispatch(t),"function"===typeof s&&s()},Ag.prototype.setFrameInterpolated=function(t,e,i,n,r,o,s){if(void 0===t)return this;var a=this.frameCache,h=[];return a[n]||h.push(n),a[i]||h.push(i),a[e]||h.push(e),a[t]||h.push(t),h.length?this.loadFrame(h,function(){this.interpolate(t,e,i,n,r,o,s)}.bind(this)):this.interpolate(t,e,i,n,r,o,s),this},Ag.prototype.loadFrame=function(t,e){if(Array.isArray(t)){var i,n=function(t,n){this._loadFrame(t,n),0===i.length()&&"function"===typeof e&&e()}.bind(this);i=new aa(n,t)}else this._loadFrame(t,e)},Ag.prototype._loadFrame=function(t,e){np.error("Trajectory._loadFrame not implemented",t,e)},Ag.prototype.updateStructure=function(t,e){this._disposed||(-1===t?this.structure.updatePosition(this.initialStructure):this.structure.updatePosition(this.frameCache[t]),this.structure.trajectory={name:this.trajPath,frame:t},"function"===typeof e&&e(),this.currentFrame=t,this.inProgress=!1,this.signals.frameChanged.dispatch(t))},Ag.prototype.getCircularMean=function(t,e,i){return[vo(e,i[0],3,0,t),vo(e,i[1],3,1,t),vo(e,i[2],3,2,t)]},Ag.prototype.doSuperpose=function(t){var e,i,n=this,r=3*this.indices.length,o=this.coords1,s=this.coords2;for(e=0;e<r;e+=3)i=3*n.indices[e/3],o[e+0]=t[i+0],o[e+1]=t[i+1],o[e+2]=t[i+2];new Og(o,s).transform(t)},Ag.prototype.process=function(t,e,i,n){if(this.setNumframes(n),e){if(this.backboneIndices.length>0&&this.centerPbc){var r=[e[0],e[4],e[8]];ha(i,this.getCircularMean(this.backboneIndices,i,r),r)}this.removePbc&&la(i,e)}this.indices.length>0&&this.superpose&&this.doSuperpose(i),this.frameCache[t]=i,this.boxCache[t]=e,this.frameCacheSize+=1},Ag.prototype.setNumframes=function(t){t!==this.numframes&&(this.numframes=t,this.signals.gotNumframes.dispatch(t))},Ag.prototype.dispose=function(){this.frameCache=[],this._disposed=!0,this.player&&this.player.stop()},Ag.prototype.setPlayer=function(t){this.player=t,this.signals.playerChanged.dispatch(t)},Ag.prototype.getPath=function(t,e){np.error("Trajectory.getPath not implemented",t,e)},dp.add("shader/Mesh.vert","#define STANDARD\nuniform float nearClip;\nuniform vec3 clipCenter;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )\nvarying vec3 vViewPosition;\n#endif\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#if defined( PICKING )\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#elif defined( NOLIGHT )\nvarying vec3 vColor;\n#else\n#include color_pars_vertex\n#ifndef FLAT_SHADED\nvarying vec3 vNormal;\n#endif\n#endif\n#include common\nvoid main(){\n#if defined( PICKING )\nvPickingColor = unpackColor( primitiveId );\n#elif defined( NOLIGHT )\nvColor = color;\n#else\n#include color_vertex\n#include beginnormal_vertex\n#include defaultnormal_vertex\n#ifndef FLAT_SHADED\nvNormal = normalize( transformedNormal );\n#endif\n#endif\n#include begin_vertex\n#include project_vertex\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )\nvViewPosition = -mvPosition.xyz;\n#endif\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n#include nearclip_vertex\n}"),dp.add("shader/Mesh.frag","#define STANDARD\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float nearClip;\nuniform float clipRadius;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )\nvarying vec3 vViewPosition;\n#endif\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#if defined( PICKING )\nuniform float objectId;\nvarying vec3 vPickingColor;\n#elif defined( NOLIGHT )\nvarying vec3 vColor;\n#else\n#ifndef FLAT_SHADED\nvarying vec3 vNormal;\n#endif\n#include common\n#include color_pars_fragment\n#include fog_pars_fragment\n#include bsdfs\n#include lights_pars\n#include lights_physical_pars_fragment\n#endif\nvoid main(){\n#include nearclip_fragment\n#include radiusclip_fragment\n#if defined( PICKING )\nif( opacity < 0.7 )\ndiscard;\ngl_FragColor = vec4( vPickingColor, objectId );\n#elif defined( NOLIGHT )\ngl_FragColor = vec4( vColor, opacity );\n#else\nvec4 diffuseColor = vec4( diffuse, opacity );\nReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\nvec3 totalEmissiveLight = emissive;\n#include color_fragment\n#include roughnessmap_fragment\n#include metalnessmap_fragment\n#include normal_flip\n#include normal_fragment\n#include dull_interior_fragment\n#include lights_physical_fragment\n#include lights_template\nvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#include opaque_back_fragment\n#endif\n}");var Dg={f:1,v2:2,v3:3,c:3},Ig=function(t,e){var i=t||{},n=e||{};this.opaqueBack=gr(n.opaqueBack,!1),this.dullInterior=gr(n.dullInterior,!1),this.side=gr(n.side,"double"),this.opacity=gr(n.opacity,1),this.depthWrite=gr(n.depthWrite,!0),this.clipNear=gr(n.clipNear,0),this.clipRadius=gr(n.clipRadius,0),this.clipCenter=gr(n.clipCenter,new y),this.flatShaded=gr(n.flatShaded,!1),this.background=gr(n.background,!1),this.linewidth=gr(n.linewidth,1),this.wireframe=gr(n.wireframe,!1),this.wireframeLinewidth=gr(n.wireframeLinewidth,1),this.roughness=gr(n.roughness,.4),this.metalness=gr(n.metalness,0),this.diffuse=gr(n.diffuse,16777215),this.forceTransparent=gr(n.forceTransparent,!1),this.disablePicking=gr(n.disablePicking,!1),this.geometry=new At,this.indexVersion=0,this.wireframeIndexVersion=-1,this.uniforms=Md.merge([Ed.common,{fogColor:{value:null},fogNear:{value:0},fogFar:{value:0},opacity:{value:this.opacity},nearClip:{value:0},clipRadius:{value:this.clipRadius},clipCenter:{value:this.clipCenter}},{emissive:{value:new it(0)},roughness:{value:this.roughness},metalness:{value:this.metalness}},Ed.ambient,Ed.lights]),this.uniforms.diffuse.value.set(this.diffuse),this.pickingUniforms={nearClip:{value:0},objectId:{value:0},opacity:{value:this.opacity}},this.group=new Fe,this.wireframeGroup=new Fe,this.pickingGroup=new Fe,this.matrix=gr(n.matrix,new b);var r=i.position||i.position1;this._positionDataSize=r?r.length/3:0,this.addAttributes({position:{type:"v3",value:i.position},color:{type:"c",value:i.color},primitiveId:{type:"f",value:i.primitiveId}}),i.index&&this.initIndex(i.index),this.picking=i.picking,this.makeWireframeGeometry()},Rg={parameters:{},matrix:{},transparent:{},size:{},attributeSize:{},pickable:{},dynamic:{},vertexShader:{},fragmentShader:{}};Rg.parameters.get=function(){return{opaqueBack:{updateShader:!0},dullInterior:{updateShader:!0},side:{updateShader:!0,property:!0},opacity:{uniform:!0},depthWrite:{property:!0},clipNear:{updateShader:!0,property:!0},clipRadius:{updateShader:!0,property:!0,uniform:!0},clipCenter:{uniform:!0},flatShaded:{updateShader:!0},background:{updateShader:!0},linewidth:{property:!0},wireframe:{updateVisibility:!0},roughness:{uniform:!0},metalness:{uniform:!0},diffuse:{uniform:!0},matrix:{}}},Rg.matrix.set=function(t){this.setMatrix(t)},Rg.matrix.get=function(){return this.group.matrix.clone()},Rg.transparent.get=function(){return this.opacity<1||this.forceTransparent},Rg.size.get=function(){return this._positionDataSize},Rg.attributeSize.get=function(){return this.size},Rg.pickable.get=function(){return!!this.picking&&!this.disablePicking},Rg.dynamic.get=function(){return!0},Rg.vertexShader.get=function(){},Rg.fragmentShader.get=function(){},Ig.prototype.setMatrix=function(t){da(this.group,t),da(this.wireframeGroup,t),da(this.pickingGroup,t)},Ig.prototype.initIndex=function(t){this.geometry.setIndex(new Et(t,1)),this.geometry.getIndex().setDynamic(this.dynamic)},Ig.prototype.makeMaterial=function(){var t=ua(this.side),e=new at({uniforms:this.uniforms,vertexShader:"",fragmentShader:"",depthTest:!0,transparent:this.transparent,depthWrite:this.depthWrite,lights:!0,fog:!0,side:t,linewidth:this.linewidth});e.vertexColors=Ml,e.extensions.derivatives=this.flatShaded,e.extensions.fragDepth=this.isImpostor,e.clipNear=this.clipNear;var i=new at({uniforms:this.uniforms,vertexShader:"",fragmentShader:"",depthTest:!0,transparent:this.transparent,depthWrite:this.depthWrite,lights:!1,fog:!0,side:t,linewidth:this.linewidth});i.vertexColors=Ml,i.clipNear=this.clipNear;var n=new at({uniforms:this.pickingUniforms,vertexShader:"",fragmentShader:"",depthTest:!0,transparent:!1,depthWrite:this.depthWrite,lights:!1,fog:!1,side:t,linewidth:this.linewidth,blending:Tl});n.vertexColors=Ml,n.extensions.fragDepth=this.isImpostor,n.clipNear=this.clipNear,this.material=e,this.wireframeMaterial=i,this.pickingMaterial=n,this.updateShader()},Ig.prototype.makeWireframeGeometry=function(){this.makeWireframeIndex();var t=this.geometry,e=this.wireframeIndex,i=new At;i.attributes=t.attributes,e&&(i.setIndex(new Et(e,1).setDynamic(this.dynamic)),i.setDrawRange(0,this.wireframeIndexCount)),this.wireframeGeometry=i},Ig.prototype.makeWireframeIndex=function(){function t(t,i){if(t>i){var n=t;t=i,i=n}var r=e[t];return void 0===r?(e[t]=[i],!0):!r.includes(i)&&(r.push(i),!0)}var e=[],i=this.geometry,n=i.index;if(this.wireframe)if(n){var r=n.array,o=r.length;i.drawRange.count!==1/0&&(o=i.drawRange.count);var s;if(this.wireframeIndex&&this.wireframeIndex.length>2*o)s=this.wireframeIndex;else{var a=i.attributes.position.count;s=Or(2*o,a)}var h=0;e.length=0;for(var l=0;l<o;l+=3){var u=r[l+0],d=r[l+1],c=r[l+2];t(u,d)&&(s[h+0]=u,s[h+1]=d,h+=2),t(d,c)&&(s[h+0]=d,s[h+1]=c,h+=2),t(c,u)&&(s[h+0]=c,s[h+1]=u,h+=2)}this.wireframeIndex=s,this.wireframeIndexCount=h,this.wireframeIndexVersion=this.indexVersion}else{var f,p=i.attributes.position.count;f=this.wireframeIndex&&this.wireframeIndex.length>2*p?this.wireframeIndex:Or(2*p,p);for(var m=0,v=0;m<p;m+=3)f[v+0]=m,f[v+1]=m+1,f[v+2]=m+1,f[v+3]=m+2,f[v+4]=m+2,f[v+5]=m,v+=6;this.wireframeIndex=f,this.wireframeIndexCount=2*p,this.wireframeIndexVersion=this.indexVersion}else this.wireframeIndex=new Uint16Array(0),this.wireframeIndexCount=0},Ig.prototype.updateWireframeIndex=function(){if(this.wireframeGeometry.setDrawRange(0,1/0),this.wireframeIndexVersion<this.indexVersion&&this.makeWireframeIndex(),this.wireframeIndex.length>this.wireframeGeometry.index.array.length)this.wireframeGeometry.setIndex(new Et(this.wireframeIndex,1).setDynamic(this.dynamic));else{var t=this.wireframeGeometry.getIndex();t.set(this.wireframeIndex),t.needsUpdate=this.wireframeIndexCount>0,t.updateRange.count=this.wireframeIndexCount}this.wireframeGeometry.setDrawRange(0,this.wireframeIndexCount)},Ig.prototype.getRenderOrder=function(){var t=0;return this.isText?t=1:this.transparent&&(t=this.isSurface?3:2),t},Ig.prototype._getMesh=function(t){this.material||this.makeMaterial();var e,i=this.geometry,n=this[t];return this.isLine?e=new Ie(i,n):this.isPoint?(e=new Ne(i,n),this.sortParticles&&(e.sortParticles=!0)):e=new jt(i,n),e.frustumCulled=!1,e.renderOrder=this.getRenderOrder(),e},Ig.prototype.getMesh=function(){return this._getMesh("material")},Ig.prototype.getWireframeMesh=function(){var t;return this.material||this.makeMaterial(),this.wireframeGeometry||this.makeWireframeGeometry(),t=new Ie(this.wireframeGeometry,this.wireframeMaterial),t.frustumCulled=!1,t.renderOrder=this.getRenderOrder(),t},Ig.prototype.getPickingMesh=function(){return this._getMesh("pickingMaterial")},Ig.prototype.getShader=function(t,e){return po(t,this.getDefines(e))},Ig.prototype.getVertexShader=function(t){return this.getShader(this.vertexShader,t)},Ig.prototype.getFragmentShader=function(t){return this.getShader(this.fragmentShader,t)},Ig.prototype.getDefines=function(t){var e={};return this.clipNear&&(e.NEAR_CLIP=1),this.clipRadius&&(e.RADIUS_CLIP=1),"picking"===t?e.PICKING=1:(("background"===t||this.background)&&(e.NOLIGHT=1),this.flatShaded&&(e.FLAT_SHADED=1),this.opaqueBack&&(e.OPAQUE_BACK=1),this.dullInterior&&(e.DULL_INTERIOR=1)),e},Ig.prototype.getParameters=function(){var t=this,e={};for(var i in t.parameters)e[i]=t[i];return e},Ig.prototype.addUniforms=function(t){this.uniforms=Md.merge([this.uniforms,t]),this.pickingUniforms=Md.merge([this.pickingUniforms,t])},Ig.prototype.addAttributes=function(t){var e=this;for(var i in t){var n=void 0,r=t[i],o=e.attributeSize*Dg[r.type];r.value?(o!==r.value.length&&np.error("attribute value has wrong length",i),n=r.value):n=Cr("float32",o),e.geometry.addAttribute(i,new Et(n,Dg[r.type]).setDynamic(e.dynamic))}},Ig.prototype.updateRenderOrder=function(){function t(t){t.renderOrder=e}var e=this.getRenderOrder();this.group.children.forEach(t),this.pickingGroup&&this.pickingGroup.children.forEach(t)},Ig.prototype.updateShader=function(){var t=this.material,e=this.wireframeMaterial,i=this.pickingMaterial;t.vertexShader=this.getVertexShader(),t.fragmentShader=this.getFragmentShader(),t.needsUpdate=!0,e.vertexShader=this.getShader("Line.vert"),e.fragmentShader=this.getShader("Line.frag"),e.needsUpdate=!0,i.vertexShader=this.getVertexShader("picking"),i.fragmentShader=this.getFragmentShader("picking"),i.needsUpdate=!0},Ig.prototype.setParameters=function(t){var e=this;if(t){var i=t,n=this.parameters,r={},o={},s=!1,a=!1;for(var h in i){var l=i[h];void 0!==l&&(void 0!==n[h]&&(e[h]=l,n[h].property&&(!0!==n[h].property?r[n[h].property]=l:r[h]=l),n[h].uniform&&(!0!==n[h].uniform?o[n[h].uniform]=l:o[h]=l),n[h].updateShader&&(s=!0),n[h].updateVisibility&&(a=!0),e.dynamic&&"wireframe"===h&&!0===l&&e.updateWireframeIndex(),"flatShaded"===h&&(e.material.extensions.derivatives=e.flatShaded),"forceTransparent"===h&&(r.transparent=e.transparent)))}this.setProperties(r),this.setUniforms(o),s&&this.updateShader(),a&&this.setVisibility(this.visible)}},Ig.prototype.setAttributes=function(t){var e=this,i=this.geometry,n=i.attributes;for(var r in t)if("picking"!==r){var o=t[r],s=o.length;if("index"===r){var a=i.getIndex();i.setDrawRange(0,1/0),s>a.array.length?i.setIndex(new Et(o,1).setDynamic(e.dynamic)):(a.set(o),a.needsUpdate=s>0,a.updateRange.count=s,i.setDrawRange(0,s)),e.indexVersion++,e.wireframe&&e.updateWireframeIndex()}else{var h=n[r];s>h.array.length?i.addAttribute(r,new Et(o,h.itemSize).setDynamic(e.dynamic)):(n[r].set(o),n[r].needsUpdate=s>0,n[r].updateRange.count=s)}}},Ig.prototype.setUniforms=function(t){var e=this;if(t){var i=this.material.uniforms,n=this.wireframeMaterial.uniforms,r=this.pickingMaterial.uniforms;for(var o in t)"opacity"===o&&e.setProperties({transparent:e.transparent}),void 0!==i[o]&&(i[o].value.isVector3?i[o].value.copy(t[o]):i[o].value.set?i[o].value.set(t[o]):i[o].value=t[o]),void 0!==n[o]&&(n[o].value.isVector3?n[o].value.copy(t[o]):n[o].value.set?n[o].value.set(t[o]):n[o].value=t[o]),void 0!==r[o]&&(r[o].value.isVector3?r[o].value.copy(t[o]):r[o].value.set?r[o].value.set(t[o]):r[o].value=t[o])}},Ig.prototype.setProperties=function(t){var e=this;if(t){var i=this.material,n=this.wireframeMaterial,r=this.pickingMaterial;for(var o in t){var s=t[o];"transparent"===o?e.updateRenderOrder():"side"===o&&(s=ua(s)),void 0!==i[o]&&(i[o]=s),void 0!==n[o]&&(n[o]=s),void 0!==r[o]&&(r[o]=s)}i.needsUpdate=!0,n.needsUpdate=!0,r.needsUpdate=!0}},Ig.prototype.setVisibility=function(t){this.visible=t,this.wireframe?(this.group.visible=!1,this.wireframeGroup.visible=t,this.pickable&&(this.pickingGroup.visible=!1)):(this.group.visible=t,this.wireframeGroup.visible=!1,this.pickable&&(this.pickingGroup.visible=t))},Ig.prototype.dispose=function(){this.material&&this.material.dispose(),this.wireframeMaterial&&this.wireframeMaterial.dispose(),this.pickingMaterial&&this.pickingMaterial.dispose(),this.geometry.dispose(),this.wireframeGeometry&&this.wireframeGeometry.dispose()},Object.defineProperties(Ig.prototype,Rg);var Lg=function(t){function e(e,i){var n=e||{};!n.primitiveId&&n.position&&(n.primitiveId=wo(n.position.length/3)),t.call(this,n,i),this.addAttributes({normal:{type:"v3",value:n.normal}}),void 0===n.normal&&this.geometry.computeVertexNormals()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={vertexShader:{},fragmentShader:{}};return i.vertexShader.get=function(){return"Mesh.vert"},i.fragmentShader.get=function(){return"Mesh.frag"},Object.defineProperties(e.prototype,i),e}(Ig),Ng=new b,Fg=new dt,zg=function(t){function e(e,i,n){var r,o=e||{},s=i||{},a=n.attributes.position.array,h=n.attributes.normal.array,l=n.index?n.index.array:void 0,u=o.position.length/3,d=a.length/3,c=u*d,f=new Float32Array(3*c),p=new Float32Array(3*c),m=new Float32Array(3*c);l&&(r=Or(u*l.length,c)),t.call(this,{position:f,color:m,index:r,normal:p,primitiveId:o.primitiveId||xo(u,d),picking:o.picking},s),this.setAttributes(o),this.geoPosition=a,this.geoNormal=h,this.geoIndex=l,this.positionCount=u,this.geoPositionCount=d,this.transformedGeoPosition=new Float32Array(3*d),this.transformedGeoNormal=new Float32Array(3*d),this.meshPosition=f,this.meshColor=m,this.meshIndex=r,this.meshNormal=p,this.meshIndex=r,this.makeIndex()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={updateNormals:{}};return e.prototype.applyPositionTransform=function(){},e.prototype.setAttributes=function(t,e){var i,n,r,o,s,a,h,l,u,d=this,c=this.geometry.attributes,f=this.updateNormals;t.position&&(i=t.position,r=this.geoPosition,h=this.meshPosition,s=this.transformedGeoPosition,c.position.needsUpdate=!0,(f||e)&&(o=this.geoNormal,u=this.meshNormal,a=this.transformedGeoNormal,c.normal.needsUpdate=!0)),t.color&&(n=t.color,l=this.meshColor,c.color.needsUpdate=!0);for(var p=this.positionCount,m=this.geoPositionCount,v=0;v<p;++v){var g=void 0,y=void 0,b=v*m*3,_=3*v;if(i&&(s.set(r),Ng.makeTranslation(i[_],i[_+1],i[_+2]),d.applyPositionTransform(Ng,v,_),Wo(Ng.elements,s),h.set(s,b),f?(a.set(o),Fg.getNormalMatrix(Ng),Yo(Fg.elements,a),u.set(a,b)):e&&u.set(o,b)),n)for(g=0;g<m;++g)y=b+3*g,l[y]=n[_],l[y+1]=n[_+1],l[y+2]=n[_+2]}},e.prototype.makeIndex=function(){var t=this.geoIndex,e=this.meshIndex;if(t)for(var i=this.positionCount,n=this.geoPositionCount,r=t.length/3,o=3*r,s=0;s<i;++s){var a=s*o,h=a+o;e.set(t,a);for(var l=a;l<h;++l)e[l]+=s*n}},i.updateNormals.get=function(){return!1},Object.defineProperties(e.prototype,i),e}(Lg),Bg=new y,jg=function(t){function e(e,i){var n=i||{},r=gr(n.sphereDetail,1),o=new Ze(1,r);t.call(this,e,n,o),this.setAttributes(e,!0)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyPositionTransform=function(t,e){var i=this._radius[e];Bg.set(i,i,i),t.scale(Bg)},e.prototype.setAttributes=function(e,i){e.radius&&(this._radius=e.radius),t.prototype.setAttributes.call(this,e,i)},e}(zg);dp.add("shader/SphereImpostor.vert","uniform mat4 projectionMatrixInverse;\nuniform float nearClip;\nvarying float vRadius;\nvarying float vRadiusSq;\nvarying vec3 vPoint;\nvarying vec3 vPointViewPosition;\nattribute vec2 mapping;\nattribute float radius;\n#ifdef PICKING\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\n#include color_pars_vertex\n#endif\n#include matrix_scale\nconst mat4 D = mat4(\n1.0, 0.0, 0.0, 0.0,\n0.0, 1.0, 0.0, 0.0,\n0.0, 0.0, 1.0, 0.0,\n0.0, 0.0, 0.0, -1.0\n);\nmat4 transpose( in mat4 inMatrix ) {\nvec4 i0 = inMatrix[0];\nvec4 i1 = inMatrix[1];\nvec4 i2 = inMatrix[2];\nvec4 i3 = inMatrix[3];\nmat4 outMatrix = mat4(\nvec4(i0.x, i1.x, i2.x, i3.x),\nvec4(i0.y, i1.y, i2.y, i3.y),\nvec4(i0.z, i1.z, i2.z, i3.z),\nvec4(i0.w, i1.w, i2.w, i3.w)\n);\nreturn outMatrix;\n}\nvoid ComputePointSizeAndPositionInClipCoordSphere(){\nvec2 xbc;\nvec2 ybc;\nmat4 T = mat4(\nradius, 0.0, 0.0, 0.0,\n0.0, radius, 0.0, 0.0,\n0.0, 0.0, radius, 0.0,\nposition.x, position.y, position.z, 1.0\n);\nmat4 R = transpose( projectionMatrix * modelViewMatrix * T );\nfloat A = dot( R[ 3 ], D * R[ 3 ] );\nfloat B = -2.0 * dot( R[ 0 ], D * R[ 3 ] );\nfloat C = dot( R[ 0 ], D * R[ 0 ] );\nxbc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\nxbc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\nfloat sx = abs( xbc[ 0 ] - xbc[ 1 ] ) * 0.5;\nA = dot( R[ 3 ], D * R[ 3 ] );\nB = -2.0 * dot( R[ 1 ], D * R[ 3 ] );\nC = dot( R[ 1 ], D * R[ 1 ] );\nybc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\nybc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\nfloat sy = abs( ybc[ 0 ] - ybc[ 1 ] ) * 0.5;\ngl_Position.xy = vec2( 0.5 * ( xbc.x + xbc.y ), 0.5 * ( ybc.x + ybc.y ) );\ngl_Position.xy -= mapping * vec2( sx, sy );\ngl_Position.xy *= gl_Position.w;\n}\nvoid main(void){\n#ifdef PICKING\nvPickingColor = unpackColor( primitiveId );\n#else\n#include color_vertex\n#endif\nvRadius = radius * matrixScale( modelViewMatrix );\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\nmvPosition.z -= vRadius;\ngl_Position = projectionMatrix * vec4( mvPosition.xyz, 1.0 );\nComputePointSizeAndPositionInClipCoordSphere();\nvRadiusSq = vRadius * vRadius;\nvec4 vPoint4 = projectionMatrixInverse * gl_Position;\nvPoint = vPoint4.xyz / vPoint4.w;\nvPointViewPosition = -mvPosition.xyz / mvPosition.w;\n}"),dp.add("shader/SphereImpostor.frag","#define STANDARD\n#define IMPOSTOR\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float nearClip;\nuniform mat4 projectionMatrix;\nuniform float ortho;\nvarying float vRadius;\nvarying float vRadiusSq;\nvarying vec3 vPoint;\nvarying vec3 vPointViewPosition;\n#ifdef PICKING\nuniform float objectId;\nvarying vec3 vPickingColor;\n#else\n#include common\n#include color_pars_fragment\n#include fog_pars_fragment\n#include bsdfs\n#include lights_pars\n#include lights_physical_pars_fragment\n#endif\nbool flag2 = false;\nbool interior = false;\nvec3 cameraPos;\nvec3 cameraNormal;\nfloat calcDepth( in vec3 cameraPos ){\nvec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;\nreturn 0.5 + 0.5 * clipZW.x / clipZW.y;\n}\nfloat calcClip( vec3 cameraPos ){\nreturn dot( vec4( cameraPos, 1.0 ), vec4( 0.0, 0.0, 1.0, nearClip - 0.5 ) );\n}\nbool Impostor( out vec3 cameraPos, out vec3 cameraNormal ){\nvec3 cameraSpherePos = -vPointViewPosition;\ncameraSpherePos.z += vRadius;\nvec3 rayOrigin = mix( vec3( 0.0, 0.0, 0.0 ), vPoint, ortho );\nvec3 rayDirection = mix( normalize( vPoint ), vec3( 0.0, 0.0, 1.0 ), ortho );\nvec3 cameraSphereDir = mix( cameraSpherePos, rayOrigin - cameraSpherePos, ortho );\nfloat B = dot( rayDirection, cameraSphereDir );\nfloat det = B * B + vRadiusSq - dot( cameraSphereDir, cameraSphereDir );\nif( det < 0.0 ){\ndiscard;\nreturn false;\n}else{\nfloat sqrtDet = sqrt( det );\nfloat posT = mix( B + sqrtDet, B + sqrtDet, ortho );\nfloat negT = mix( B - sqrtDet, sqrtDet - B, ortho );\ncameraPos = rayDirection * negT + rayOrigin;\n#ifdef NEAR_CLIP\nif( calcDepth( cameraPos ) <= 0.0 ){\ncameraPos = rayDirection * posT + rayOrigin;\ninterior = true;\nreturn false;\n}else if( calcClip( cameraPos ) > 0.0 ){\ncameraPos = rayDirection * posT + rayOrigin;\ninterior = true;\nflag2 = true;\nreturn false;\n}else{\ncameraNormal = normalize( cameraPos - cameraSpherePos );\n}\n#else\nif( calcDepth( cameraPos ) <= 0.0 ){\ncameraPos = rayDirection * posT + rayOrigin;\ninterior = true;\nreturn false;\n}else{\ncameraNormal = normalize( cameraPos - cameraSpherePos );\n}\n#endif\nreturn true;\n}\nreturn false;\n}\nvoid main(void){\nbool flag = Impostor( cameraPos, cameraNormal );\n#ifdef NEAR_CLIP\nif( calcClip( cameraPos ) > 0.0 )\ndiscard;\n#endif\ngl_FragDepthEXT = calcDepth( cameraPos );\nif( !flag ){\n#ifdef NEAR_CLIP\nif( flag2 ){\ngl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( nearClip - 0.5 ) ) ) + ( 0.0000001 / vRadius ) );\n}else if( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );\n}\n#else\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );\n}\n#endif\n}\nif (gl_FragDepthEXT < 0.0)\ndiscard;\nif (gl_FragDepthEXT > 1.0)\ndiscard;\n#ifdef PICKING\ngl_FragColor = vec4( vPickingColor, objectId );\n#else\nvec3 vNormal = cameraNormal;\nvec3 vViewPosition = -cameraPos;\nvec4 diffuseColor = vec4( diffuse, opacity );\nReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\nvec3 totalEmissiveLight = emissive;\n#include color_fragment\n#include roughnessmap_fragment\n#include metalnessmap_fragment\n#include normal_flip\n#include normal_fragment\nif( interior ){\nnormal = vec3( 0.0, 0.0, 0.4 );\n}\n#include lights_physical_fragment\n#include lights_template\nvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#endif\n}");var Ug=function(t){function e(e,i){t.call(this,e,i),this.index=Or(this.indexSize,this.attributeSize),this.makeIndex(),this.initIndex(this.index,1),this.addAttributes({mapping:{type:this.mappingType,value:null}}),this.setAttributes({primitiveId:wo(this.size)})}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={attributeSize:{},indexSize:{},mapping:{},mappingIndices:{},mappingIndicesSize:{},mappingType:{},mappingSize:{},mappingItemSize:{}};return i.attributeSize.get=function(){return this.size*this.mappingSize},i.indexSize.get=function(){return this.size*this.mappingIndicesSize},i.mapping.get=function(){},i.mappingIndices.get=function(){},i.mappingIndicesSize.get=function(){},i.mappingType.get=function(){},i.mappingSize.get=function(){},i.mappingItemSize.get=function(){},e.prototype.addAttributes=function(e){var i={};for(var n in e){var r=e[n];i[n]={type:r.type,value:null}}t.prototype.addAttributes.call(this,i)},e.prototype.getAttributeIndex=function(t){return 3*t*this.mappingSize},e.prototype.setAttributes=function(t){t&&!t.position&&t.position1&&t.position2&&(t.position=go(t.position1,t.position2));var e,i,n,r,o,s,a,h=this.size,l=this.mappingSize,u=this.geometry.attributes;for(var d in t)if("index"!==d&&"picking"!==d){i=t[d],e=u[d],n=e.itemSize,r=e.array;for(var c=0;c<h;++c){o=c*n,s=o*l;for(var f=0;f<l;++f){a=s+n*f;for(var p=0;p<n;++p)r[a+p]=i[o+p]}}e.needsUpdate=!0}},e.prototype.makeMapping=function(){for(var t=this.size,e=this.mapping,i=this.mappingSize,n=this.mappingItemSize,r=this.geometry.attributes.mapping.array,o=0;o<t;o++)r.set(e,o*n*i)},e.prototype.makeIndex=function(){for(var t,e,i=this.size,n=this.mappingSize,r=this.mappingIndices,o=this.mappingIndicesSize,s=this.index,a=0;a<i;a++){t=a*o,e=a*n,s.set(r,t);for(var h=0;h<o;++h)s[t+h]+=e}},Object.defineProperties(e.prototype,i),e}(Ig),Hg=new Float32Array([-1,1,-1,-1,1,1,1,-1]),Vg=new Uint16Array([0,1,2,1,3,2]),Gg=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={mapping:{},mappingIndices:{},mappingIndicesSize:{},mappingType:{},mappingSize:{},mappingItemSize:{}};return i.mapping.get=function(){return Hg},i.mappingIndices.get=function(){return Vg},i.mappingIndicesSize.get=function(){return 6},i.mappingType.get=function(){return"v2"},i.mappingSize.get=function(){return 4},i.mappingItemSize.get=function(){return 2},Object.defineProperties(e.prototype,i),e}(Ug),Wg=function(t){function e(e,i){t.call(this,e,i),this.addUniforms({projectionMatrixInverse:{value:new b},ortho:{value:0}}),this.addAttributes({radius:{type:"f",value:null}}),this.setAttributes(e),this.makeMapping()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={isImpostor:{},vertexShader:{},fragmentShader:{}};return i.isImpostor.get=function(){return!0},i.vertexShader.get=function(){return"SphereImpostor.vert"},i.fragmentShader.get=function(){return"SphereImpostor.frag"},Object.defineProperties(e.prototype,i),e}(Gg),Yg=function(t,e){return!ip||e&&e.disableImpostor?new jg(t,e):new Wg(t,e)},$g=new y,qg=new y,Xg=new y,Zg=new y(0,0,0),Kg=function(t){function e(e,i){var n=i||{},r=gr(n.sphereDetail,2),o=new Ze(1,r);t.call(this,e,n,o),this.setAttributes(e,!0)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={updateNormals:{}};return e.prototype.applyPositionTransform=function(t,e,i){qg.fromArray(this._majorAxis,i),Xg.fromArray(this._minorAxis,i),t.lookAt(Zg,qg,Xg),$g.set(this._radius[e],Xg.length(),qg.length()),t.scale($g)},e.prototype.setAttributes=function(e,i){e.radius&&(this._radius=e.radius),e.majorAxis&&(this._majorAxis=e.majorAxis),e.minorAxis&&(this._minorAxis=e.minorAxis),t.prototype.setAttributes.call(this,e,i)},i.updateNormals.get=function(){return!0},Object.defineProperties(e.prototype,i),e}(zg),Qg=function(t,e){return new Kg(t,e)},Jg=new y,ty=new y,ey=new y,iy=new y(0,1,0),ny=function(t){function e(e,i){var n=e||{},r=i||{},o=gr(r.radialSegments,10),s=gr(r.openEnded,!0),a=(new b).makeRotationX(Math.PI/2),h=new bi(1,1,1,o,1,s);h.applyMatrix(a);var l=n.position1.length,u=n.radius.length,d=h.attributes.position.array.length/3,c=l/3,f=new Float32Array(2*c*d);xo(c,d,0,f),xo(c,d,c*d,f);var p=new Float32Array(2*l),m=new Float32Array(2*l);t.call(this,{position:p,color:m,primitiveId:f,picking:n.picking},r,h),this.__center=new Float32Array(l),this._position=p,this._color=m,this._from=new Float32Array(2*l),this._to=new Float32Array(2*l),this._radius=new Float32Array(2*u),this.setAttributes(n,!0)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={updateNormals:{}};return e.prototype.applyPositionTransform=function(t,e,i){ty.fromArray(this._from,i),ey.fromArray(this._to,i),t.lookAt(ty,ey,iy);var n=this._radius[e];Jg.set(n,n,ty.distanceTo(ey)),t.scale(Jg)},e.prototype.setAttributes=function(e,i){var n={};e.position1&&e.position2&&(go(e.position1,e.position2,this.__center),go(e.position1,this.__center,this._position),go(this.__center,e.position2,this._position,e.position1.length),this._from.set(e.position1),this._from.set(this.__center,e.position1.length),this._to.set(this.__center),this._to.set(e.position2,this.__center.length),n.position=this._position),e.color&&e.color2&&(this._color.set(e.color),this._color.set(e.color2,e.color.length),n.color=this._color),e.radius&&(this._radius.set(e.radius),this._radius.set(e.radius,e.radius.length),n.radius=this._radius),t.prototype.setAttributes.call(this,n,i)},i.updateNormals.get=function(){return!0},Object.defineProperties(e.prototype,i),e}(zg);dp.add("shader/CylinderImpostor.vert","\nattribute vec3 mapping;\nattribute vec3 position1;\nattribute vec3 position2;\nattribute float radius;\nvarying vec3 axis;\nvarying vec4 base_radius;\nvarying vec4 end_b;\nvarying vec3 U;\nvarying vec3 V;\nvarying vec4 w;\n#ifdef PICKING\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\nattribute vec3 color2;\nvarying vec3 vColor1;\nvarying vec3 vColor2;\n#endif\nuniform mat4 modelViewMatrixInverse;\nuniform float ortho;\n#include matrix_scale\nvoid main(){\n#ifdef PICKING\nvPickingColor = unpackColor( primitiveId );\n#else\nvColor1 = color;\nvColor2 = color2;\n#endif\nbase_radius.w = radius * matrixScale( modelViewMatrix );\nvec3 center = position;\nvec3 dir = normalize( position2 - position1 );\nfloat ext = length( position2 - position1 ) / 2.0;\nvec3 cam_dir;\nif( ortho == 0.0 ){\ncam_dir = ( modelViewMatrixInverse * vec4( 0, 0, 0, 1 ) ).xyz - center;\n}else{\ncam_dir = ( modelViewMatrixInverse * vec4( 0, 0, 1, 0 ) ).xyz;\n}\ncam_dir = normalize( cam_dir );\nvec3 ldir;\nfloat b = dot( cam_dir, dir );\nend_b.w = b;\nif( b < 0.0 )\nldir = -ext * dir;\nelse\nldir = ext * dir;\nvec3 left = normalize( cross( cam_dir, ldir ) );\nleft = radius * left;\nvec3 up = radius * normalize( cross( left, ldir ) );\naxis = normalize( normalMatrix * ldir );\nU = normalize( normalMatrix * up );\nV = normalize( normalMatrix * left );\nvec4 base4 = modelViewMatrix * vec4( center - ldir, 1.0 );\nbase_radius.xyz = base4.xyz / base4.w;\nvec4 top_position = modelViewMatrix * vec4( center + ldir, 1.0 );\nvec4 end4 = top_position;\nend_b.xyz = end4.xyz / end4.w;\nw = modelViewMatrix * vec4(\ncenter + mapping.x*ldir + mapping.y*left + mapping.z*up, 1.0\n);\ngl_Position = projectionMatrix * w;\ngl_Position.z = 0.99;\n}"),dp.add("shader/CylinderImpostor.frag","#define STANDARD\n#define IMPOSTOR\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float nearClip;\nuniform mat4 projectionMatrix;\nuniform float ortho;\nvarying vec3 axis;\nvarying vec4 base_radius;\nvarying vec4 end_b;\nvarying vec3 U;\nvarying vec3 V;\nvarying vec4 w;\n#ifdef PICKING\nuniform float objectId;\nvarying vec3 vPickingColor;\n#else\nvarying vec3 vColor1;\nvarying vec3 vColor2;\n#include common\n#include fog_pars_fragment\n#include bsdfs\n#include lights_pars\n#include lights_physical_pars_fragment\n#endif\nbool interior = false;\nfloat distSq3( vec3 v3a, vec3 v3b ){\nreturn (\n( v3a.x - v3b.x ) * ( v3a.x - v3b.x ) +\n( v3a.y - v3b.y ) * ( v3a.y - v3b.y ) +\n( v3a.z - v3b.z ) * ( v3a.z - v3b.z )\n);\n}\nfloat calcDepth( in vec3 cameraPos ){\nvec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;\nreturn 0.5 + 0.5 * clipZW.x / clipZW.y;\n}\nfloat calcClip( vec3 cameraPos ){\nreturn dot( vec4( cameraPos, 1.0 ), vec4( 0.0, 0.0, 1.0, nearClip - 0.5 ) );\n}\nvoid main(){\nvec3 point = w.xyz / w.w;\nvec3 base = base_radius.xyz;\nfloat vRadius = base_radius.w;\nvec3 end = end_b.xyz;\nfloat b = end_b.w;\nvec3 end_cyl = end;\nvec3 surface_point = point;\nvec3 ray_target = surface_point;\nvec3 ray_origin = vec3(0.0);\nvec3 ray_direction = mix(normalize(ray_origin - ray_target), vec3(0.0, 0.0, 1.0), ortho);\nmat3 basis = mat3( U, V, axis );\nvec3 diff = ray_target - 0.5 * (base + end_cyl);\nvec3 P = diff * basis;\nfloat dz = dot( axis, ray_direction );\nfloat radius2 = vRadius*vRadius;\nvec3 D = vec3(dot(U, ray_direction),\ndot(V, ray_direction),\ndz);\nfloat a0 = P.x*P.x + P.y*P.y - radius2;\nfloat a1 = P.x*D.x + P.y*D.y;\nfloat a2 = D.x*D.x + D.y*D.y;\nfloat d = a1*a1 - a0*a2;\nif (d < 0.0)\ndiscard;\nfloat dist = (-a1 + sqrt(d)) / a2;\nvec3 new_point = ray_target + dist * ray_direction;\nvec3 tmp_point = new_point - base;\nvec3 _normal = normalize( tmp_point - axis * dot(tmp_point, axis) );\nray_origin = mix( ray_origin, surface_point, ortho );\nfloat front_cap_test = dot( tmp_point, axis );\nfloat end_cap_test = dot((new_point - end_cyl), axis);\n#ifndef CAP\nvec3 new_point2 = ray_target + ( (-a1 - sqrt(d)) / a2 ) * ray_direction;\nvec3 tmp_point2 = new_point2 - base;\n#endif\nif (front_cap_test < 0.0)\n{\nfloat dNV = dot(-axis, ray_direction);\nif (dNV < 0.0)\ndiscard;\nfloat near = dot(-axis, (base)) / dNV;\nvec3 front_point = ray_direction * near + ray_origin;\nif (dot(front_point - base, front_point-base) > radius2)\ndiscard;\n#ifdef CAP\nnew_point = front_point;\n_normal = axis;\n#else\nnew_point = ray_target + ( (-a1 - sqrt(d)) / a2 ) * ray_direction;\ndNV = dot(-axis, ray_direction);\nnear = dot(axis, end_cyl) / dNV;\nnew_point2 = ray_direction * near + ray_origin;\nif (dot(new_point2 - end_cyl, new_point2-base) < radius2)\ndiscard;\ninterior = true;\n#endif\n}\nif( end_cap_test > 0.0 )\n{\nfloat dNV = dot(axis, ray_direction);\nif (dNV < 0.0)\ndiscard;\nfloat near = dot(axis, end_cyl) / dNV;\nvec3 end_point = ray_direction * near + ray_origin;\nif( dot(end_point - end_cyl, end_point-base) > radius2 )\ndiscard;\n#ifdef CAP\nnew_point = end_point;\n_normal = axis;\n#else\nnew_point = ray_target + ( (-a1 - sqrt(d)) / a2 ) * ray_direction;\ndNV = dot(-axis, ray_direction);\nnear = dot(-axis, (base)) / dNV;\nnew_point2 = ray_direction * near + ray_origin;\nif (dot(new_point2 - base, new_point2-base) < radius2)\ndiscard;\ninterior = true;\n#endif\n}\ngl_FragDepthEXT = calcDepth( new_point );\n#ifdef NEAR_CLIP\nif( calcClip( new_point ) > 0.0 ){\ndist = (-a1 - sqrt(d)) / a2;\nnew_point = ray_target + dist * ray_direction;\nif( calcClip( new_point ) > 0.0 )\ndiscard;\ninterior = true;\ngl_FragDepthEXT = calcDepth( new_point );\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( nearClip - 0.5 ) ) ) + ( 0.0000001 / vRadius ) );\n}\n}else if( gl_FragDepthEXT <= 0.0 ){\ndist = (-a1 - sqrt(d)) / a2;\nnew_point = ray_target + dist * ray_direction;\ninterior = true;\ngl_FragDepthEXT = calcDepth( new_point );\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );\n}\n}\n#else\nif( gl_FragDepthEXT <= 0.0 ){\ndist = (-a1 - sqrt(d)) / a2;\nnew_point = ray_target + dist * ray_direction;\ninterior = true;\ngl_FragDepthEXT = calcDepth( new_point );\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );\n}\n}\n#endif\nif (gl_FragDepthEXT < 0.0)\ndiscard;\nif (gl_FragDepthEXT > 1.0)\ndiscard;\n#ifdef PICKING\ngl_FragColor = vec4( vPickingColor, objectId );\n#else\nvec3 vViewPosition = -new_point;\nvec3 vNormal = _normal;\nvec3 vColor;\nif( distSq3( new_point, end_cyl ) < distSq3( new_point, base ) ){\nif( b < 0.0 ){\nvColor = vColor1;\n}else{\nvColor = vColor2;\n}\n}else{\nif( b > 0.0 ){\nvColor = vColor1;\n}else{\nvColor = vColor2;\n}\n}\nvec4 diffuseColor = vec4( diffuse, opacity );\nReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\nvec3 totalEmissiveLight = emissive;\n#include color_fragment\n#include roughnessmap_fragment\n#include metalnessmap_fragment\nvec3 normal = normalize( vNormal );\nif( interior ){\nnormal = vec3( 0.0, 0.0, 0.4 );\n}\n#include lights_physical_fragment\n#include lights_template\nvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#endif\n}");var ry=new Float32Array([-1,1,-1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1]),oy=new Uint16Array([0,1,2,1,4,2,2,4,3,4,5,3]),sy=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={mapping:{},mappingIndices:{},mappingIndicesSize:{},mappingType:{},mappingSize:{},mappingItemSize:{}};return i.mapping.get=function(){return ry},i.mappingIndices.get=function(){return oy},i.mappingIndicesSize.get=function(){return 12},i.mappingType.get=function(){return"v3"},i.mappingSize.get=function(){return 6},i.mappingItemSize.get=function(){return 3},Object.defineProperties(e.prototype,i),e}(Ug),ay=function(t){function e(e,i){t.call(this,e,i);var n=i||{};this.openEnded=gr(n.openEnded,!1),this.addUniforms({modelViewMatrixInverse:{value:new b},ortho:{value:0}}),this.addAttributes({position1:{type:"v3",value:null},position2:{type:"v3",value:null},color2:{type:"c",value:null},radius:{type:"f",value:null}}),this.setAttributes(e),this.makeMapping()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={parameters:{},isImpostor:{},vertexShader:{},fragmentShader:{}};return i.parameters.get=function(){return Object.assign.call(this,{openEnded:{updateShader:!0}},t.prototype.parameters)},e.prototype.getDefines=function(e){var i=t.prototype.getDefines.call(this,e);return this.openEnded||(i.CAP=1),i},i.isImpostor.get=function(){return!0},i.vertexShader.get=function(){return"CylinderImpostor.vert"},i.fragmentShader.get=function(){return"CylinderImpostor.frag"},Object.defineProperties(e.prototype,i),e}(sy),hy=function(t,e){return!ip||e&&e.disableImpostor?new ny(t,e):new ay(t,e)},ly=new y,uy=new y,dy=new y,cy=new y(0,1,0),fy=function(t){function e(e,i){var n=i||{},r=gr(n.radialSegments,60),o=gr(n.openEnded,!1),s=(new b).makeRotationX(-Math.PI/2),a=new wi(1,1,r,1,o);a.applyMatrix(s);var h=e.position1.length,l=e.radius.length,u=new Float32Array(h);t.call(this,{position:u,color:e.color,picking:e.picking},n,a),this._position=u,this._from=new Float32Array(h),this._to=new Float32Array(h),this._radius=new Float32Array(l),this.setAttributes(e,!0)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={updateNormals:{}};return e.prototype.applyPositionTransform=function(t,e,i){uy.fromArray(this._from,i),dy.fromArray(this._to,i),t.lookAt(uy,dy,cy);var n=this._radius[e];ly.set(n,n,uy.distanceTo(dy)),t.scale(ly)},e.prototype.setAttributes=function(e,i){var n={};e.position1&&e.position2&&(go(e.position1,e.position2,this._position),this._from.set(e.position1),this._to.set(e.position2),n.position=this._position),e.color&&(n.color=e.color),e.radius&&this._radius.set(e.radius),t.prototype.setAttributes.call(this,n,i)},i.updateNormals.get=function(){return!0},Object.defineProperties(e.prototype,i),e}(zg),py=function(t,e){return new fy(t,e)},my=function(t){this.geometryList=t,this.boundingBox=null};my.prototype.computeBoundingBox=function(){var t=this;this.boundingBox?this.boundingBox.empty():this.boundingBox=new lt,this.geometryList.forEach(function(e){e.boundingBox||e.computeBoundingBox(),t.boundingBox.union(e.boundingBox)})};var vy=function(t,e){var i=t||{},n=e||{};this.aspectRatio=gr(n.aspectRatio,1.5),this.wireframe=gr(n.wireframe,!1),this.splitPosition=new Float32Array(i.position1.length),this.cylinderRadius=new Float32Array(i.radius.length);var r=this.makeAttributes(i),o={radialSegments:gr(n.radialSegments,50),openEnded:gr(n.openEnded,!1),disableImpostor:gr(n.disableImpostor,!1)};this.cylinderBuffer=new hy(r.cylinder,o),this.coneBuffer=new py(r.cone,o),this.geometry=new my([this.cylinderBuffer.geometry,this.coneBuffer.geometry]),this.group=new Fe,this.wireframeGroup=new Fe,this.pickingGroup=new Fe,this.matrix=gr(n.matrix,new b),this.picking=i.picking},gy={matrix:{},pickable:{}};gy.matrix.set=function(t){Ig.prototype.setMatrix.call(this,t)},gy.matrix.get=function(){return this.group.matrix.clone()},gy.pickable.get=function(){return!!this.picking},vy.prototype.makeAttributes=function(t){var e,i,n=this.splitPosition,r=this.cylinderRadius,o=this.aspectRatio,s={},a={};if(t.radius){for(e=0,i=r.length;e<i;++e)r[e]=t.radius[e]/o;s.radius=r,a.radius=t.radius}if(t.position1&&t.position2){var h=new y,l=new y,u=new y,d=new y;for(e=0,i=n.length;e<i;e+=3){h.fromArray(t.position1,e),l.fromArray(t.position2,e),u.subVectors(h,l);var c=u.length(),f=r[e/3]*o*2,p=Math.min(c,f);u.setLength(p),d.copy(l).add(u),d.toArray(n,e)}s.position1=t.position1,s.position2=n,a.position1=n,a.position2=t.position2}return t.color&&(s.color=t.color,s.color2=t.color,a.color=t.color),{cylinder:s,cone:a}},vy.prototype.getMesh=function(t){return(new Fe).add(this.cylinderBuffer.getMesh(t),this.coneBuffer.getMesh(t))},vy.prototype.getWireframeMesh=function(){return(new Fe).add(this.cylinderBuffer.getWireframeMesh(),this.coneBuffer.getWireframeMesh())},vy.prototype.getPickingMesh=function(){return(new Fe).add(this.cylinderBuffer.getPickingMesh(),this.coneBuffer.getPickingMesh())},vy.prototype.setAttributes=function(t){var e=this.makeAttributes(t);this.cylinderBuffer.setAttributes(e.cylinder),this.coneBuffer.setAttributes(e.cone)},vy.prototype.setParameters=function(t){t=Object.assign({},t),t&&void 0!==t.matrix&&(this.matrix=t.matrix),delete t.matrix,t&&void 0!==t.wireframe&&(this.wireframe=t.wireframe,this.setVisibility(this.visible)),this.cylinderBuffer.setParameters(t),this.coneBuffer.setParameters(t)},vy.prototype.setVisibility=function(){Ig.prototype.setVisibility.apply(this,arguments)},vy.prototype.dispose=function(){this.cylinderBuffer.dispose(),this.coneBuffer.dispose()},Object.defineProperties(vy.prototype,gy),dp.add("shader/SDFFont.vert","uniform float nearClip;\nuniform float clipRadius;\nuniform vec3 clipCenter;\nuniform float xOffset;\nuniform float yOffset;\nuniform float zOffset;\nuniform bool ortho;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )\nvarying vec3 vViewPosition;\n#endif\nvarying vec2 texCoord;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#if defined( PICKING )\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\n#include color_pars_vertex\n#endif\nattribute vec2 mapping;\nattribute vec2 inputTexCoord;\nattribute float inputSize;\n#include matrix_scale\n#include common\nvoid main(void){\n#if defined( PICKING )\nvPickingColor = unpackColor( primitiveId );\n#else\n#include color_vertex\n#endif\ntexCoord = inputTexCoord;\nfloat scale = matrixScale( modelViewMatrix );\nfloat _zOffset = zOffset * scale;\nif( texCoord.x == 10.0 ){\n_zOffset -= 0.001;\n}\nvec3 pos = position;\nif( ortho ){\npos += normalize( cameraPosition ) * _zOffset;\n}\nvec4 cameraPos = modelViewMatrix * vec4( pos, 1.0 );\nvec4 cameraCornerPos = vec4( cameraPos.xyz, 1.0 );\ncameraCornerPos.xy += mapping * inputSize * 0.01 * scale;\ncameraCornerPos.x += xOffset * scale;\ncameraCornerPos.y += yOffset * scale;\nif( !ortho ){\ncameraCornerPos.xyz += normalize( -cameraCornerPos.xyz ) * _zOffset;\n}\ngl_Position = projectionMatrix * cameraCornerPos;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )\nvViewPosition = -cameraCornerPos.xyz;\n#endif\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n#include nearclip_vertex\n#include radiusclip_vertex\n}"),dp.add("shader/SDFFont.frag","uniform sampler2D fontTexture;\nuniform float opacity;\nuniform bool showBorder;\nuniform vec3 borderColor;\nuniform float borderWidth;\nuniform vec3 backgroundColor;\nuniform float backgroundOpacity;\nuniform float nearClip;\nuniform float clipRadius;\nvarying vec3 vViewPosition;\nvarying vec2 texCoord;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#if defined( PICKING )\nuniform float objectId;\nvarying vec3 vPickingColor;\nconst vec3 vColor = vec3( 0.0 );\n#else\n#include common\n#include color_pars_fragment\n#include fog_pars_fragment\n#endif\n#ifdef SDF\nconst float smoothness = 16.0;\n#else\nconst float smoothness = 256.0;\n#endif\nconst float gamma = 2.2;\nvoid main(){\n#include nearclip_fragment\n#include radiusclip_fragment\nif( texCoord.x > 1.0 ){\ngl_FragColor = vec4( backgroundColor, backgroundOpacity );\n}else{\nfloat sdf = texture2D( fontTexture, texCoord ).a;\nif( showBorder ) sdf += borderWidth;\nfloat w = clamp(\nsmoothness * ( abs( dFdx( texCoord.x ) ) + abs( dFdy( texCoord.y ) ) ),\n0.0,\n0.5\n);\nfloat a = smoothstep( 0.5 - w, 0.5 + w, sdf );\na = pow( a, 1.0 / gamma );\nif( a < 0.2 ) discard;\na *= opacity;\nvec3 outgoingLight = vColor;\nif( showBorder && sdf < ( 0.5 + borderWidth ) ){\noutgoingLight = borderColor;\n}\ngl_FragColor = vec4( outgoingLight, a );\n}\n#if defined( PICKING )\ngl_FragColor = vec4( vPickingColor, objectId );\n#else\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#endif\n}");var yy={},by=function(t){var e=Object.assign({},t);if(this.font=gr(e.font,["sans-serif"]),this.size=gr(e.size,36),this.style=gr(e.style,"normal"),this.variant=gr(e.variant,"normal"),this.weight=gr(e.weight,"normal"),this.outline=gr(e.outline,0),this.width=gr(e.width,2048),this.height=gr(e.height,2048),this.gamma=1,"undefined"!==typeof navigator){var i=navigator.userAgent;i.match(/Chrome/)&&i.match(/OS X/)&&(this.gamma=.5)}this.mapped={},this.scratchW=0,this.scratchH=0,this.currentX=0,this.currentY=0,this.build(),this.populate(),this.texture=new Be(this.canvas2),this.texture.flipY=!1,this.texture.needsUpdate=!0};by.prototype.build=function(){var t=this.size+2*this.outline+Math.round(this.size/4),e=this.width/4,i=document.createElement("canvas");i.width=e,i.height=t;var n=i.getContext("2d");n.font=this.style+" "+this.variant+" "+this.weight+" "+this.size+"px "+this.font,n.fillStyle="#FF0000",n.textAlign="left",n.textBaseline="bottom",n.lineJoin="round";for(var r=[],o=3*this.outline,s=0;s<o;++s){var a=Math.max(0,8*-s+128-8*!s),h=("00"+a.toString(16)).slice(-2);r.push("#"+h+h+h)}var l=new Uint8Array(e*t*2);this.canvas=i,this.context=n,this.lineHeight=t,this.maxWidth=e,this.colors=r,this.scratch=l,this.data=new Uint8Array(this.width*this.height*4),this.canvas2=document.createElement("canvas"),this.canvas2.width=this.width,this.canvas2.height=this.height,this.context2=this.canvas2.getContext("2d")},by.prototype.map=function(t){return void 0===this.mapped[t]&&(this.draw(t),this.currentX+this.scratchW>this.width&&(this.currentX=0,this.currentY+=this.scratchH),this.currentY+this.scratchH>this.height&&console.warn("canvas to small"),this.mapped[t]={x:this.currentX,y:this.currentY,w:this.scratchW,h:this.scratchH},this.context2.drawImage(this.canvas,0,0,this.scratchW,this.scratchH,this.currentX,this.currentY,this.scratchW,this.scratchH),this.currentX+=this.scratchW),this.mapped[t]},by.prototype.get=function(t){return this.mapped[t]||this.placeholder},by.prototype.draw=function(t){var e=this.lineHeight,i=this.outline,n=this.context,r=this.scratch,o=this.maxWidth,s=this.colors,a=i,h=e-this.outline,l=n.measureText(t),u=Math.min(o,Math.ceil(l.width+2*a+1));n.clearRect(0,0,u,e);var d,c,f,p,m;if(0===this.outline)for(n.fillText(t,a,h),p=n.getImageData(0,0,u,e),m=p.data,f=3,d=0,c=m.length/4;d<c;++d)r[d]=m[f],f+=4;else{for(n.globalCompositeOperation="source-over",d=i+1;d>0;--d)f=d>1?2*d-2:d,n.strokeStyle=s[f-1],n.lineWidth=f,n.strokeText(t,a,h);n.globalCompositeOperation="multiply",n.fillStyle="#FF00FF",n.fillText(t,a,h),p=n.getImageData(0,0,u,e),m=p.data,f=0;var v=this.gamma;for(d=0,c=m.length/4;d<c;++d){var g=m[f],y=g?m[f+1]/g:1;.5===v&&(y=Math.sqrt(y)),y=Math.min(1,Math.max(0,y));var b=256-g,_=b+(g-b)*y;r[d]=Math.max(0,Math.min(255,_+2)),m[f+3]=r[d],f+=4}}n.putImageData(p,0,0),this.scratchW=u,this.scratchH=e},by.prototype.populate=function(){var t=this;this.placeholder=this.map(String.fromCharCode(65533));for(var e=0;e<127;++e)t.map(String.fromCharCode(e));for(var i=128;i<255;++i)t.map(String.fromCharCode(i));for(var n=880;n<1023;++n)t.map(String.fromCharCode(n));for(var r=1024;r<1279;++r)t.map(String.fromCharCode(r));this.map(String.fromCharCode(8491))};var _y=function(t){function e(e,i){var n=e||{},r=i||{};r.forceTransparent=!0;for(var o=n.position.length/3,s=0,a=0;a<o;++a)s+=n.text[a].length;var h=s;r.showBackground&&(h+=o),t.call(this,{position:new Float32Array(3*h),color:new Float32Array(3*h),picking:new Jm},r),this.fontFamily=gr(r.fontFamily,"sans-serif"),this.fontStyle=gr(r.fontStyle,"normal"),this.fontWeight=gr(r.fontWeight,"bold"),this.fontSize=gr(r.fontSize,48),this.sdf=gr(r.sdf,"Chrome"===Jf),this.xOffset=gr(r.xOffset,0),this.yOffset=gr(r.yOffset,0),this.zOffset=gr(r.zOffset,.5),this.attachment=gr(r.attachment,"bottom-left"),this.showBorder=gr(r.showBorder,!1),this.borderColor=gr(r.borderColor,"lightgrey"),this.borderWidth=gr(r.borderWidth,.15),this.showBackground=gr(r.showBackground,!1),this.backgroundColor=gr(r.backgroundColor,"lightgrey"),this.backgroundMargin=gr(r.backgroundMargin,.5),this.backgroundOpacity=gr(r.backgroundOpacity,1),this.text=n.text,this.positionCount=o,this.addUniforms({fontTexture:{value:null},xOffset:{value:this.xOffset},yOffset:{value:this.yOffset},zOffset:{value:this.zOffset},ortho:{value:!1},showBorder:{value:this.showBorder},borderColor:{value:new it(this.borderColor)},borderWidth:{value:this.borderWidth},backgroundColor:{value:new it(this.backgroundColor)},backgroundOpacity:{value:this.backgroundOpacity}}),this.addAttributes({inputTexCoord:{type:"v2",value:null},inputSize:{type:"f",value:null}}),this.setAttributes(e),this.makeTexture(),this.makeMapping()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={parameters:{},wireframe:{},isText:{},vertexShader:{},fragmentShader:{}};return i.parameters.get=function(){return Object.assign.call(this,{fontFamily:{uniform:!0},fontStyle:{uniform:!0},fontWeight:{uniform:!0},fontSize:{uniform:!0},sdf:{updateShader:!0,uniform:!0},xOffset:{uniform:!0},yOffset:{uniform:!0},zOffset:{uniform:!0},showBorder:{uniform:!0},borderColor:{uniform:!0},borderWidth:{uniform:!0},backgroundColor:{uniform:!0},backgroundOpacity:{uniform:!0}},t.prototype.parameters,{flatShaded:void 0})},e.prototype.makeMaterial=function(){t.prototype.makeMaterial.call(this);var e=this.texture,i=this.material;i.extensions.derivatives=!0,i.lights=!1,i.uniforms.fontTexture.value=e,i.needsUpdate=!0;var n=this.wireframeMaterial;n.extensions.derivatives=!0,n.lights=!1,n.uniforms.fontTexture.value=e,n.needsUpdate=!0;var r=this.pickingMaterial;r.extensions.derivatives=!0,r.lights=!1,r.uniforms.fontTexture.value=e,r.needsUpdate=!0},e.prototype.setAttributes=function(t){var e,i,n,r,o,s,a=this,h=this.text,l=this.geometry.attributes;t.position&&(e=t.position,r=l.position.array,l.position.needsUpdate=!0),t.size&&(i=t.size,o=l.inputSize.array,l.inputSize.needsUpdate=!0),t.color&&(n=t.color,s=l.color.array,l.color.needsUpdate=!0);for(var u,d,c,f,p,m=this.positionCount,v=0,g=0;g<m;++g)for(d=3*g,c=h[g],p=c.length,a.showBackground&&(p+=1),f=0;f<p;++f,++v)for(var y=0;y<4;y++)u=4*v*3+3*y,e&&(r[u]=e[d],r[u+1]=e[d+1],r[u+2]=e[d+2]),i&&(o[4*v+y]=i[g]),n&&(s[u]=n[d],s[u+1]=n[d+1],s[u+2]=n[d+2])},e.prototype.makeTexture=function(){this.textAtlas=ca({font:[this.fontFamily],style:this.fontStyle,weight:this.fontWeight,size:this.fontSize,outline:this.sdf?5:0}),this.texture=this.textAtlas.texture},e.prototype.makeMapping=function(){for(var t,e,i,n,r,o,s,a,h=this,l=this.textAtlas,u=this.text,d=this.attachment,c=l.lineHeight*this.backgroundMargin*.1-10,f=this.geometry.attributes.inputTexCoord.array,p=this.geometry.attributes.mapping.array,m=this.positionCount,v=0,g=0;g<m;++g){for(i=u[g],n=0,o=i.length,r=0;r<o;++r)t=l.get(i[r]),n+=t.w-2*l.outline;for(a=d.startsWith("top")?l.lineHeight/1.25:d.startsWith("middle")?l.lineHeight/2.5:0,s=d.endsWith("right")?n:d.endsWith("center")?n/2:0,s+=l.outline,a+=l.outline,h.showBackground&&(e=2*v*4,p[e+0]=-l.lineHeight/6-s-c,p[e+1]=l.lineHeight-a+c,p[e+2]=-l.lineHeight/6-s-c,p[e+3]=0-a-c,p[e+4]=n+l.lineHeight/6-s+2*l.outline+c,p[e+5]=l.lineHeight-a+c,p[e+6]=n+l.lineHeight/6-s+2*l.outline+c,p[e+7]=0-a-c,f[e+0]=10,f[e+2]=10,f[e+4]=10,f[e+6]=10,v+=1),n=0,r=0;r<o;++r,++v){t=l.get(i[r]),e=2*v*4,p[e+0]=n-s,p[e+1]=t.h-a,p[e+2]=n-s,p[e+3]=0-a,p[e+4]=n+t.w-s,p[e+5]=t.h-a,p[e+6]=n+t.w-s,p[e+7]=0-a;var y=l.width,b=l.height,_=[t.x/y,t.y/b,t.x/y,(t.y+t.h)/b,(t.x+t.w)/y,t.y/b,(t.x+t.w)/y,(t.y+t.h)/b];f.set(_,e),n+=t.w-2*l.outline}}this.geometry.attributes.inputTexCoord.needsUpdate=!0,this.geometry.attributes.mapping.needsUpdate=!0},e.prototype.getDefines=function(e){var i=t.prototype.getDefines.call(this,e);return this.sdf&&(i.SDF=1),i},e.prototype.setUniforms=function(e){!e||void 0===e.fontFamily&&void 0===e.fontStyle&&void 0===e.fontWeight&&void 0===e.fontSize&&void 0===e.sdf||(this.makeTexture(),this.makeMapping(),this.texture.needsUpdate=!0,e.fontTexture=this.texture),t.prototype.setUniforms.call(this,e)},i.wireframe.set=function(t){},i.wireframe.get=function(){return!1},i.isText.get=function(){return!0},i.vertexShader.get=function(){return"SDFFont.vert"},i.fragmentShader.get=function(){return"SDFFont.frag"},Object.defineProperties(e.prototype,i),e}(Gg),wy=new y,xy=new lt,Sy=function(t,e){this.name=gr(t,"shape");var i=e||{};this.aspectRatio=gr(i.aspectRatio,1.5),this.sphereDetail=gr(i.sphereDetail,2),this.radialSegments=gr(i.radialSegments,50),this.disableImpostor=gr(i.disableImpostor,!1),this.openEnded=gr(i.openEnded,!1),this.labelParams=gr(i.labelParams,{}),this.boundingBox=new lt,this.bufferList=[],this.meshCount=0,this.spherePosition=[],this.sphereColor=[],this.sphereRadius=[],this.sphereName=[],this.ellipsoidPosition=[],this.ellipsoidColor=[],this.ellipsoidRadius=[],this.ellipsoidMajorAxis=[],this.ellipsoidMinorAxis=[],this.ellipsoidName=[],this.cylinderPosition1=[],this.cylinderPosition2=[],this.cylinderColor=[],this.cylinderRadius=[],this.cylinderName=[],this.conePosition1=[],this.conePosition2=[],this.coneColor=[],this.coneRadius=[],this.coneName=[],this.arrowPosition1=[],this.arrowPosition2=[],this.arrowColor=[],this.arrowRadius=[],this.arrowName=[],this.labelPosition=[],this.labelColor=[],this.labelSize=[],this.labelText=[]},ky={center:{},type:{}};Sy.prototype.addBuffer=function(t){this.bufferList.push(t);var e=t.geometry;return e.boundingBox||e.computeBoundingBox(),this.boundingBox.union(e.boundingBox),this},Sy.prototype.addMesh=function(t,e,i,n,r){t=Nr(t),e=Nr(e),Array.isArray(i)&&(i=Or(i,t.length)),n&&(n=Nr(n));var o={position:t,color:e,index:i,normal:n},s=new tv(this,Object.assign({serial:this.meshCount,name:r},o)),a=new Lg(Object.assign({picking:s},o));return this.bufferList.push(a),xy.setFromArray(t),this.boundingBox.union(xy),this.meshCount+=1,this},Sy.prototype.addSphere=function(t,e,i,n){return fa(t,this.spherePosition),fa(e,this.sphereColor),this.sphereRadius.push(i),this.sphereName.push(n),this.boundingBox.expandByPoint(wy.fromArray(t)),this},Sy.prototype.addEllipsoid=function(t,e,i,n,r,o){return fa(t,this.ellipsoidPosition),fa(e,this.ellipsoidColor),this.ellipsoidRadius.push(i),fa(n,this.ellipsoidMajorAxis),fa(r,this.ellipsoidMinorAxis),this.ellipsoidName.push(o),this.boundingBox.expandByPoint(wy.fromArray(t)),this},Sy.prototype.addCylinder=function(t,e,i,n,r){return fa(t,this.cylinderPosition1),fa(e,this.cylinderPosition2),fa(i,this.cylinderColor),this.cylinderRadius.push(n),this.cylinderName.push(r),this.boundingBox.expandByPoint(wy.fromArray(t)),this.boundingBox.expandByPoint(wy.fromArray(e)),this},Sy.prototype.addCone=function(t,e,i,n,r){return fa(t,this.conePosition1),fa(e,this.conePosition2),fa(i,this.coneColor),this.coneRadius.push(n),this.coneName.push(r),this.boundingBox.expandByPoint(wy.fromArray(t)),this.boundingBox.expandByPoint(wy.fromArray(e)),this},Sy.prototype.addArrow=function(t,e,i,n,r){return fa(t,this.arrowPosition1),fa(e,this.arrowPosition2),fa(i,this.arrowColor),this.arrowRadius.push(n),this.arrowName.push(r),this.boundingBox.expandByPoint(wy.fromArray(t)),this.boundingBox.expandByPoint(wy.fromArray(e)),this},Sy.prototype.addLabel=function(t,e,i,n){return fa(t,this.labelPosition),fa(e,this.labelColor),this.labelSize.push(i),this.labelText.push(n),this.boundingBox.expandByPoint(wy.fromArray(t)),this},Sy.prototype.getBufferList=function(){var t=[];if(this.spherePosition.length){var e=new Yg({position:new Float32Array(this.spherePosition),color:new Float32Array(this.sphereColor),radius:new Float32Array(this.sphereRadius),picking:new ev(this)},{sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor});t.push(e)}if(this.ellipsoidPosition.length){var i=new Qg({position:new Float32Array(this.ellipsoidPosition),color:new Float32Array(this.ellipsoidColor),radius:new Float32Array(this.ellipsoidRadius),majorAxis:new Float32Array(this.ellipsoidMajorAxis),minorAxis:new Float32Array(this.ellipsoidMinorAxis),picking:new Qm(this)},{sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor});t.push(i)}if(this.cylinderPosition1.length){var n=new hy({position1:new Float32Array(this.cylinderPosition1),position2:new Float32Array(this.cylinderPosition2),color:new Float32Array(this.cylinderColor),color2:new Float32Array(this.cylinderColor),radius:new Float32Array(this.cylinderRadius),picking:new Vm(this)},{radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,openEnded:this.openEnded});t.push(n)}if(this.conePosition1.length){var r=new py({position1:new Float32Array(this.conePosition1),position2:new Float32Array(this.conePosition2),color:new Float32Array(this.coneColor),radius:new Float32Array(this.coneRadius),picking:new Xm(this)},{radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,openEnded:this.openEnded});t.push(r)}if(this.arrowPosition1.length){var o=new vy({position1:new Float32Array(this.arrowPosition1),position2:new Float32Array(this.arrowPosition2),color:new Float32Array(this.arrowColor),radius:new Float32Array(this.arrowRadius),picking:new Gm(this)},{aspectRatio:this.aspectRatio,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,openEnded:this.openEnded});t.push(o)}if(this.labelPosition.length){var s=new _y({position:new Float32Array(this.labelPosition),color:new Float32Array(this.labelColor),size:new Float32Array(this.labelSize),text:this.labelText},this.labelParams);t.push(s)}return this.bufferList.concat(t)},Sy.prototype.dispose=function(){this.bufferList.forEach(function(t){t.dispose()}),this.bufferList.length=0,this.spherePosition.length=0,this.sphereColor.length=0,this.sphereRadius.length=0,this.sphereName.length=0,this.ellipsoidPosition.length=0,this.ellipsoidColor.length=0,this.ellipsoidRadius.length=0,this.ellipsoidMajorAxis.length=0,this.ellipsoidMinorAxis.length=0,this.ellipsoidName.length=0,this.cylinderPosition1.length=0,this.cylinderPosition2.length=0,this.cylinderColor.length=0,this.cylinderRadius.length=0,this.cylinderName.length=0,this.conePosition1.length=0,this.conePosition2.length=0,this.coneColor.length=0,this.coneRadius.length=0,this.coneName.length=0,this.arrowPosition1.length=0,this.arrowPosition2.length=0,this.arrowColor.length=0,this.arrowRadius.length=0,this.arrowName.length=0,this.labelPosition.length=0,this.labelColor.length=0,this.labelSize.length=0,this.labelText.length=0},ky.center.get=function(){return this._center||(this._center=this.boundingBox.getCenter()),this._center},ky.type.get=function(){return"Shape"},Object.defineProperties(Sy.prototype,ky);var Ey=function(t,e,i){this.type="",this.parameters={lazy:{type:"boolean"},clipNear:{type:"range",step:1,max:100,min:0,buffer:!0},clipRadius:{type:"number",precision:1,max:1e3,min:0,buffer:!0},clipCenter:{type:"vector3",precision:1,buffer:!0},flatShaded:{type:"boolean",buffer:!0},opacity:{type:"range",step:.01,max:1,min:0,buffer:!0},depthWrite:{type:"boolean",buffer:!0},side:{type:"select",buffer:!0,options:{front:"front",back:"back",double:"double"}},wireframe:{type:"boolean",buffer:!0},linewidth:{type:"integer",max:50,min:1,buffer:!0},colorScheme:{type:"select",update:"color",options:{}},colorScale:{type:"select",update:"color",options:ap.getScales()},colorReverse:{type:"boolean",update:"color"},colorValue:{type:"color",update:"color"},colorDomain:{type:"hidden",update:"color"},colorMode:{type:"select",update:"color",options:ap.getModes()},roughness:{type:"range",step:.01,max:1,min:0,buffer:!0},metalness:{type:"range",step:.01,max:1,min:0,buffer:!0},diffuse:{type:"color",buffer:!0},matrix:{type:"hidden",buffer:!0},disablePicking:{type:"boolean",rebuild:!0}},this.viewer=e,this.tasks=new Tp,this.queue=new aa(this.make.bind(this)),this.bufferList=[],this.parameters.colorScheme&&(this.parameters.colorScheme.options=ap.getSchemes())};Ey.prototype.init=function(t){var e=t||{};this.clipNear=gr(e.clipNear,0),this.clipRadius=gr(e.clipRadius,0),this.clipCenter=gr(e.clipCenter,new y),this.flatShaded=gr(e.flatShaded,!1),this.side=gr(e.side,"double"),this.opacity=gr(e.opacity,1),this.depthWrite=gr(e.depthWrite,!0),this.wireframe=gr(e.wireframe,!1),this.linewidth=gr(e.linewidth,2),this.setColor(e.color,e),this.colorScheme=gr(e.colorScheme,"uniform"),this.colorScale=gr(e.colorScale,""),this.colorReverse=gr(e.colorReverse,!1),this.colorValue=gr(e.colorValue,9474192),this.colorDomain=gr(e.colorDomain,void 0),this.colorMode=gr(e.colorMode,"hcl"),this.visible=gr(e.visible,!0),this.quality=gr(e.quality,void 0),this.roughness=gr(e.roughness,.4),this.metalness=gr(e.metalness,0),this.diffuse=gr(e.diffuse,16777215),this.lazy=gr(e.lazy,!1),this.lazyProps={build:!1,bufferParams:{},what:{}},this.matrix=gr(e.matrix,new b),this.disablePicking=gr(e.disablePicking,!1);var i=this.parameters;!0===i.sphereDetail&&(i.sphereDetail={type:"integer",max:3,min:0,rebuild:"impostor"}),!0===i.radialSegments&&(i.radialSegments={type:"integer",max:25,min:5,rebuild:"impostor"}),!0===i.openEnded&&(i.openEnded={type:"boolean",rebuild:"impostor",buffer:!0}),!0===i.disableImpostor&&(i.disableImpostor={type:"boolean",rebuild:!0}),"low"===e.quality?(i.sphereDetail&&(this.sphereDetail=0),i.radialSegments&&(this.radialSegments=5)):"medium"===e.quality?(i.sphereDetail&&(this.sphereDetail=1),i.radialSegments&&(this.radialSegments=10)):"high"===e.quality?(i.sphereDetail&&(this.sphereDetail=2),i.radialSegments&&(this.radialSegments=20)):(i.sphereDetail&&(this.sphereDetail=gr(e.sphereDetail,1)),i.radialSegments&&(this.radialSegments=gr(e.radialSegments,10))),i.openEnded&&(this.openEnded=gr(e.openEnded,!0)),i.disableImpostor&&(this.disableImpostor=gr(e.disableImpostor,!1))},Ey.prototype.getColorParams=function(t){return Object.assign({scheme:this.colorScheme,scale:this.colorScale,reverse:this.colorReverse,value:this.colorValue,domain:this.colorDomain,mode:this.colorMode},t)},Ey.prototype.getBufferParams=function(t){return Object.assign({clipNear:this.clipNear,clipRadius:this.clipRadius,clipCenter:this.clipCenter,flatShaded:this.flatShaded,opacity:this.opacity,depthWrite:this.depthWrite,side:this.side,wireframe:this.wireframe,linewidth:this.linewidth,roughness:this.roughness,metalness:this.metalness,diffuse:this.diffuse,matrix:this.matrix,disablePicking:this.disablePicking},t)},Ey.prototype.setColor=function(t,e){return Object.keys(ap.getSchemes()).includes(t)?e?e.colorScheme=t:this.setParameters({colorScheme:t}):void 0!==t&&(t=new it(t).getHex(),e?(e.colorScheme="uniform",e.colorValue=t):this.setParameters({colorScheme:"uniform",colorValue:t})),this},Ey.prototype.create=function(){},Ey.prototype.update=function(){this.build()},Ey.prototype.build=function(t){return this.lazy&&!this.visible?void(this.lazyProps.build=!0):this.prepare?(this.queue.length()>0?(this.tasks.change(1-this.queue.length()),this.queue.kill()):this.tasks.increment(),void this.queue.push(t||!1)):(this.tasks.increment(),void this.make())},Ey.prototype.make=function(t,e){rp&&np.time("Representation.make "+this.type);var i=function(){t?(this.update(t),this.viewer.requestRender(),this.tasks.decrement(),e&&e()):(this.clear(),this.create(),this.manualAttach||this.disposed||(rp&&np.time("Representation.attach "+this.type),this.attach(function(){rp&&np.timeEnd("Representation.attach "+this.type),this.tasks.decrement(),e&&e()}.bind(this)))),rp&&np.timeEnd("Representation.make "+this.type)}.bind(this);this.prepare?this.prepare(i):i()},Ey.prototype.attach=function(t){this.setVisibility(this.visible),t()},Ey.prototype.setVisibility=function(t,e){if(this.visible=t,this.visible){var i=this.lazyProps,n=i.bufferParams,r=i.what;if(i.build)return i.build=!1,void this.build();(Object.keys(n).length||Object.keys(r).length)&&(i.bufferParams={},i.what={},this.updateParameters(n,r))}return this.bufferList.forEach(function(e){e.setVisibility(t)}),e||this.viewer.requestRender(),this},Ey.prototype.setParameters=function(t,e,i){var n=this,r=t||{},o=this.parameters;e=e||{},i=i||!1;var s={};for(var a in r)void 0!==r[a]&&void 0!==o[a]&&(o[a].int&&(r[a]=parseInt(r[a])),o[a].float&&(r[a]=parseFloat(r[a])),(r[a]!==n[a]||r[a].equals&&!r[a].equals(n[a]))&&(n[a].set?n[a].set(r[a]):n[a]=r[a],o[a].buffer&&(!0===o[a].buffer?s[a]=r[a]:s[o[a].buffer]=r[a]),o[a].update&&(e[o[a].update]=!0),!o[a].rebuild||"impostor"===o[a].rebuild&&ip&&!n.disableImpostor||(i=!0)));return i?this.build():this.updateParameters(s,e),this},Ey.prototype.updateParameters=function(t,e){if(this.lazy&&!this.visible)return Object.assign(this.lazyProps.bufferParams,t),void Object.assign(this.lazyProps.what,e);this.bufferList.forEach(function(e){e.setParameters(t)}),Object.keys(e).length&&this.update(e),this.viewer.requestRender()},Ey.prototype.getParameters=function(){var t=this,e={lazy:this.lazy,visible:this.visible,quality:this.quality};return Object.keys(this.parameters).forEach(function(i){null!==t.parameters[i]&&(e[i]=t[i])}),e},Ey.prototype.clear=function(){var t=this;this.bufferList.forEach(function(e){t.viewer.remove(e),e.dispose()}),this.bufferList.length=0,this.viewer.requestRender()},Ey.prototype.dispose=function(){this.disposed=!0,this.queue.kill(),this.tasks.dispose(),this.clear()};var My=function(t){function e(e,i,n){Array.isArray(e)||(e=[e]),t.call(this,e,i,n),this.type="buffer",this.parameters=Object.assign({},this.parameters,{colorScheme:null,colorScale:null,colorValue:null,colorDomain:null,colorMode:null}),this.buffer=e,this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){t.prototype.init.call(this,e),this.build()},e.prototype.create=function(){this.bufferList.push.apply(this.bufferList,this.buffer)},e.prototype.attach=function(t){var e=this;this.bufferList.forEach(function(t){e.viewer.add(t),t.setParameters(e.getBufferParams())}),this.setVisibility(this.visible),t()},e}(Ey),Ty=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={isSurface:{}};return i.isSurface.get=function(){return!0},Object.defineProperties(e.prototype,i),e}(Lg),Cy=function(t){this.size=t.size,this.side=t.side,this.wireframe=t.wireframe,this.visible=t.visible,this.geometry=t.geometry,this.picking=t.picking,this.background=t.background,this.disablePicking=t.disablePicking,this.group=new Fe,this.wireframeGroup=new Fe,this.pickingGroup=new Fe,this.matrix=t.matrix,this.frontMeshes=[],this.backMeshes=[];var e=t,i=new t.constructor;e.makeMaterial(),i.makeMaterial(),i.picking=t.picking,i.geometry=t.geometry,i.wireframeGeometry=t.wireframeGeometry,i.setParameters(t.getParameters()),i.updateShader(),e.setParameters({side:"front"}),i.setParameters({side:"back",opacity:i.opacity}),this.buffer=t,this.frontBuffer=e,this.backBuffer=i},Oy={matrix:{},pickable:{}};Oy.matrix.set=function(t){Ig.prototype.setMatrix.call(this,t)},Oy.matrix.get=function(){return this.group.matrix.clone()},Oy.pickable.get=function(){return!!this.picking&&!this.disablePicking},Cy.prototype.getMesh=function(t){var e,i;return t?(i=this.backBuffer.getPickingMesh(),e=this.frontBuffer.getPickingMesh()):(i=this.backBuffer.getMesh(),e=this.frontBuffer.getMesh()),this.frontMeshes.push(e),this.backMeshes.push(i),this.setParameters({side:this.side}),(new Fe).add(i,e)},Cy.prototype.getWireframeMesh=function(){return this.buffer.getWireframeMesh()},Cy.prototype.getPickingMesh=function(){return this.getMesh(!0)},Cy.prototype.setAttributes=function(t){this.buffer.setAttributes(t)},Cy.prototype.setParameters=function(t){t=Object.assign({},t),"front"===t.side?(this.frontMeshes.forEach(pa),this.backMeshes.forEach(ma)):"back"===t.side?(this.frontMeshes.forEach(ma),this.backMeshes.forEach(pa)):"double"===t.side&&(this.frontMeshes.forEach(pa),this.backMeshes.forEach(pa)),void 0!==t.matrix&&(this.matrix=t.matrix),delete t.matrix,void 0!==t.side&&(this.side=t.side),delete t.side,this.frontBuffer.setParameters(t),void 0!==t.wireframe&&(this.wireframe=t.wireframe,this.setVisibility(this.visible)),delete t.wireframe,this.backBuffer.setParameters(t)},Cy.prototype.dispose=function(){this.frontBuffer.dispose(),this.backBuffer.dispose()},Object.defineProperties(Cy.prototype,Oy),Cy.prototype.setVisibility=Ig.prototype.setVisibility,dp.add("shader/Line.vert","uniform float nearClip;\nuniform vec3 clipCenter;\nvarying vec3 vViewPosition;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#include color_pars_vertex\nvoid main(){\n#include color_vertex\n#include begin_vertex\n#include project_vertex\nvViewPosition = -mvPosition.xyz;\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n#include nearclip_vertex\n}"),dp.add("shader/Line.frag","uniform float opacity;\nuniform float nearClip;\nuniform float clipRadius;\nvarying vec3 vViewPosition;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#include common\n#include color_pars_fragment\n#include fog_pars_fragment\nvoid main(){\n#include nearclip_fragment\n#include radiusclip_fragment\ngl_FragColor = vec4( vColor, opacity );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n}");var Py=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={isLine:{},vertexShader:{},fragmentShader:{}};return i.isLine.get=function(){return!0},i.vertexShader.get=function(){return"Line.vert"},i.fragmentShader.get=function(){return"Line.frag"},Object.defineProperties(e.prototype,i),e}(Ig),Ay=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="surface",this.parameters=Object.assign({isolevelType:{type:"select",options:{value:"value",sigma:"sigma"}},isolevel:{type:"number",precision:2,max:1e3,min:-1e3},negateIsolevel:{type:"boolean"},smooth:{type:"integer",precision:1,max:10,min:0},background:{type:"boolean",rebuild:!0},opaqueBack:{type:"boolean",buffer:!0},boxSize:{type:"integer",precision:1,max:100,min:0},colorVolume:{type:"hidden"},contour:{type:"boolean",rebuild:!0},useWorker:{type:"boolean",rebuild:!0},wrap:{type:"boolean",rebuild:!0}},this.parameters),e instanceof Wv?(this.surface=void 0,this.volume=e):(this.surface=e,this.volume=void 0),this.boxCenter=new y,this.__boxCenter=new y,this.box=new lt,this.__box=new lt,this._position=new y,this.setBox=function(){this._position.copy(i.translationGroup.position).negate(),this._position.equals(this.boxCenter)||this.setParameters({boxCenter:this._position})},this.viewer.signals.ticked.add(this.setBox,this),this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.colorScheme=gr(i.colorScheme,"uniform"),i.colorValue=gr(i.colorValue,14540253),this.isolevelType=gr(i.isolevelType,"sigma"),this.isolevel=gr(i.isolevel,2),this.negateIsolevel=gr(i.negateIsolevel,!1),this.smooth=gr(i.smooth,0),this.background=gr(i.background,!1),this.opaqueBack=gr(i.opaqueBack,!0),this.boxSize=gr(i.boxSize,0),this.colorVolume=gr(i.colorVolume,void 0),this.contour=gr(i.contour,!1),this.useWorker=gr(i.useWorker,!0),this.wrap=gr(i.wrap,!1),t.prototype.init.call(this,i),this.build()},e.prototype.attach=function(t){var e=this;this.bufferList.forEach(function(t){e.viewer.add(t)}),this.setVisibility(this.visible),t()},e.prototype.prepare=function(t){var e=this;if(this.volume){var i;if(i="sigma"===this.isolevelType?this.volume.getValueForSigma(this.isolevel):this.isolevel,this.negateIsolevel&&(i*=-1),!this.surface||this.__isolevel!==i||this.__smooth!==this.smooth||this.__contour!==this.contour||this.__wrap!==this.wrap||this.__boxSize!==this.boxSize||this.boxSize>0&&!this.__boxCenter.equals(this.boxCenter)){this.__isolevel=i,this.__smooth=this.smooth,this.__contour=this.contour,this.__wrap=this.wrap,this.__boxSize=this.boxSize,this.__boxCenter.copy(this.boxCenter),this.__box.copy(this.box);var n=function(i){e.surface=i,t()};this.useWorker?this.volume.getSurfaceWorker(i,this.smooth,this.boxCenter,this.boxSize,this.contour,this.wrap,n):n(this.volume.getSurface(i,this.smooth,this.boxCenter,this.boxSize,this.contour,this.wrap))}else t()}else t()},e.prototype.create=function(){var t,e={position:this.surface.getPosition(),color:this.surface.getColor(this.getColorParams()),index:this.surface.getIndex()};if(this.contour)t=new Py(e,this.getBufferParams({wireframe:!1}));else{e.normal=this.surface.getNormal(),e.picking=this.surface.getPicking();var i=new Ty(e,this.getBufferParams({background:this.background,opaqueBack:this.opaqueBack,dullInterior:!1}));t=new Cy(i)}this.bufferList.push(t)},e.prototype.update=function(t){if(0!==this.bufferList.length){t=t||{};var e={};t.position&&(e.position=this.surface.getPosition()),t.color&&(e.color=this.surface.getColor(this.getColorParams())),t.index&&(e.index=this.surface.getIndex()),t.normal&&(e.normal=this.surface.getNormal()),this.bufferList.forEach(function(t){t.setAttributes(e)})}},e.prototype.setParameters=function(e,i,n){return e&&void 0!==e.isolevelType&&this.volume&&("value"===this.isolevelType&&"sigma"===e.isolevelType?this.isolevel=this.volume.getSigmaForValue(this.isolevel):"sigma"===this.isolevelType&&"value"===e.isolevelType&&(this.isolevel=this.volume.getValueForSigma(this.isolevel)),this.isolevelType=e.isolevelType),e&&e.boxCenter&&(this.boxCenter.copy(e.boxCenter),delete e.boxCenter),e&&e.wireframe&&(e.contour||void 0===e.contour&&this.contour)&&(e.wireframe=!1),t.prototype.setParameters.call(this,e,i,n),this.volume&&this.volume.getBox(this.boxCenter,this.boxSize,this.box),e&&void 0!==e.colorVolume&&(i.color=!0),this.surface&&(void 0!==e.isolevel||void 0!==e.negateIsolevel||void 0!==e.smooth||void 0!==e.wrap||void 0!==e.boxSize||this.boxSize>0&&!this.__box.equals(this.box))&&this.build({position:!0,color:!0,index:!0,normal:!this.contour}),this},e.prototype.getColorParams=function(){var e=t.prototype.getColorParams.call(this);return e.volume=this.colorVolume,e},e.prototype.dispose=function(){this.viewer.signals.ticked.remove(this.setBox,this),t.prototype.dispose.call(this)},e}(Ey);dp.add("shader/Point.vert","uniform float nearClip;\nuniform float clipRadius;\nuniform vec3 clipCenter;\nuniform float size;\nuniform float canvasHeight;\nuniform float pixelRatio;\nvarying vec3 vViewPosition;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#if defined( PICKING )\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\n#include color_pars_vertex\n#endif\n#include common\nvoid main(){\n#if defined( PICKING )\nvPickingColor = unpackColor( primitiveId );\n#else\n#include color_vertex\n#endif\n#include begin_vertex\n#include project_vertex\n#ifdef USE_SIZEATTENUATION\ngl_PointSize = size * pixelRatio * ( ( canvasHeight / 2.0 ) / -mvPosition.z );\n#else\ngl_PointSize = size * pixelRatio;\n#endif\nvViewPosition = -mvPosition.xyz;\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n#include nearclip_vertex\n#include radiusclip_vertex\n}"),dp.add("shader/Point.frag","uniform vec3 diffuse;\nuniform float opacity;\nuniform float nearClip;\nuniform float clipRadius;\nvarying vec3 vViewPosition;\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#ifdef USE_MAP\nuniform sampler2D map;\n#endif\n#if defined( PICKING )\nuniform float objectId;\nvarying vec3 vPickingColor;\n#else\n#include common\n#include color_pars_fragment\n#include fog_pars_fragment\n#endif\nvoid main(){\n#include nearclip_fragment\n#include radiusclip_fragment\n#if defined( PICKING )\n#ifdef USE_MAP\nif( texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) ).a < 0.5 )\ndiscard;\n#endif\ngl_FragColor = vec4( vPickingColor, objectId );\n#else\nvec3 outgoingLight = vec3( 0.0 );\nvec4 diffuseColor = vec4( diffuse, 1.0 );\n#ifdef USE_MAP\ndiffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n#endif\n#include color_fragment\n#include alphatest_fragment\noutgoingLight = diffuseColor.rgb;\ngl_FragColor = vec4( outgoingLight, diffuseColor.a * opacity );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#endif\n}");var Dy=function(t){function e(e,i){var n=e||{},r=i||{};n.primitiveId||(n.primitiveId=wo(n.position.length/3)),t.call(this,n,r),this.pointSize=gr(r.pointSize,1),this.sizeAttenuation=gr(r.sizeAttenuation,!0),this.sortParticles=gr(r.sortParticles,!1),this.alphaTest=gr(r.alphaTest,.5),this.useTexture=gr(r.useTexture,!1),this.forceTransparent=gr(r.forceTransparent,!1),this.edgeBleach=gr(r.edgeBleach,0),this.addUniforms({size:{value:this.pointSize},canvasHeight:{value:1},pixelRatio:{value:1},map:{value:null}})}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={parameters:{},isPoint:{},vertexShader:{},fragmentShader:{}};return i.parameters.get=function(){return Object.assign.call(this,{pointSize:{uniform:"size"},sizeAttenuation:{updateShader:!0},sortParticles:{},alphaTest:{updateShader:!0},useTexture:{updateShader:!0},forceTransparent:{},edgeBleach:{uniform:!0}},t.prototype.parameters)},e.prototype.makeMaterial=function(){t.prototype.makeMaterial.call(this),this.makeTexture();var e=this.material,i=this.wireframeMaterial,n=this.pickingMaterial;e.uniforms.map.value=this.tex,e.needsUpdate=!0,i.uniforms.map.value=this.tex,i.needsUpdate=!0,n.uniforms.map.value=this.tex,n.needsUpdate=!0},e.prototype.makeTexture=function(){this.tex&&this.tex.dispose(),this.tex=ga({delta:this.edgeBleach})},e.prototype.getDefines=function(e){var i=t.prototype.getDefines.call(this,e);return this.sizeAttenuation&&(i.USE_SIZEATTENUATION=1),this.useTexture&&(i.USE_MAP=1),this.alphaTest>0&&this.alphaTest<=1&&(i.ALPHATEST=this.alphaTest.toPrecision(2)),i},e.prototype.setUniforms=function(e){e&&void 0!==e.edgeBleach&&(this.makeTexture(),e.map=this.tex),t.prototype.setUniforms.call(this,e)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.tex&&this.tex.dispose()},i.isPoint.get=function(){return!0},i.vertexShader.get=function(){return"Point.vert"},i.fragmentShader.get=function(){return"Point.frag"},Object.defineProperties(e.prototype,i),e}(Ig),Iy=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="dot",this.parameters=Object.assign({thresholdType:{type:"select",rebuild:!0,options:{value:"value",sigma:"sigma"}},thresholdMin:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},thresholdMax:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},thresholdOut:{type:"boolean",rebuild:!0},dotType:{type:"select",rebuild:!0,options:{"":"",sphere:"sphere",point:"point"}},radiusType:{type:"select",options:{"":"",value:"value","abs-value":"abs-value","value-min":"value-min",deviation:"deviation",size:"size"}},radius:{type:"number",precision:3,max:10,min:.001,property:"size"},scale:{type:"number",precision:3,max:10,min:.001},sphereDetail:!0,disableImpostor:!0,pointSize:{type:"number",precision:1,max:100,min:0,buffer:!0},sizeAttenuation:{type:"boolean",buffer:!0},sortParticles:{type:"boolean",rebuild:!0},useTexture:{type:"boolean",buffer:!0},alphaTest:{type:"range",step:.001,max:1,min:0,buffer:!0},forceTransparent:{type:"boolean",buffer:!0},edgeBleach:{type:"range",step:.001,max:1,min:0,buffer:!0}},this.parameters,{colorScheme:{type:"select",update:"color",options:{"":"",value:"value",uniform:"uniform",random:"random"}}}),e instanceof Wv?(this.surface=void 0,this.volume=new $v(e)):(this.surface=e,this.volume=void 0),this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.colorScheme=gr(i.colorScheme,"uniform"),i.colorValue=gr(i.colorValue,14540253),this.thresholdType=gr(i.thresholdType,"sigma"),this.thresholdMin=gr(i.thresholdMin,2),this.thresholdMax=gr(i.thresholdMax,1/0),this.thresholdOut=gr(i.thresholdOut,!1),this.dotType=gr(i.dotType,"point"),this.radius=gr(i.radius,.1),this.scale=gr(i.scale,1),this.pointSize=gr(i.pointSize,1),this.sizeAttenuation=gr(i.sizeAttenuation,!0),this.sortParticles=gr(i.sortParticles,!1),this.useTexture=gr(i.useTexture,!1),this.alphaTest=gr(i.alphaTest,.5),this.forceTransparent=gr(i.forceTransparent,!1),this.edgeBleach=gr(i.edgeBleach,0),t.prototype.init.call(this,i),this.build()},e.prototype.attach=function(t){var e=this;this.bufferList.forEach(function(t){e.viewer.add(t)}),this.setVisibility(this.visible),t()},e.prototype.create=function(){var t={};if(this.volume){var e,i,n=this.volume;"sigma"===this.thresholdType?(e=n.getValueForSigma(this.thresholdMin),i=n.getValueForSigma(this.thresholdMax)):(e=this.thresholdMin,i=this.thresholdMax),n.setFilter(e,i,this.thresholdOut),t.position=n.getDataPosition(),t.color=n.getDataColor(this.getColorParams()),"sphere"===this.dotType&&(t.radius=n.getDataSize(this.radius,this.scale),t.picking=n.getDataPicking())}else{var r=this.surface;t.position=r.getPosition(),t.color=r.getColor(this.getColorParams()),"sphere"===this.dotType&&(t.radius=r.getSize(this.radius,this.scale),t.picking=r.getPicking())}"sphere"===this.dotType?this.dotBuffer=new Yg(t,this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!1})):this.dotBuffer=new Dy(t,this.getBufferParams({pointSize:this.pointSize,sizeAttenuation:this.sizeAttenuation,sortParticles:this.sortParticles,useTexture:this.useTexture,alphaTest:this.alphaTest,forceTransparent:this.forceTransparent,edgeBleach:this.edgeBleach})),this.bufferList.push(this.dotBuffer)},e.prototype.update=function(t){if(0!==this.bufferList.length){t=t||{};var e={};t.color&&(this.volume?e.color=this.volume.getDataColor(this.getColorParams()):e.color=this.surface.getColor(this.getColorParams())),"sphere"===this.dotType&&(t.radius||t.scale)&&(this.volume?e.radius=this.volume.getDataSize(this.radius,this.scale):e.radius=this.surface.getSize(this.radius,this.scale)),this.dotBuffer.setAttributes(e)}},e.prototype.setParameters=function(e,i,n){return i=i||{},e&&void 0!==e.thresholdType&&this.volume instanceof Wv&&("value"===this.thresholdType&&"sigma"===e.thresholdType?(this.thresholdMin=this.volume.getSigmaForValue(this.thresholdMin),this.thresholdMax=this.volume.getSigmaForValue(this.thresholdMax)):"sigma"===this.thresholdType&&"value"===e.thresholdType&&(this.thresholdMin=this.volume.getValueForSigma(this.thresholdMin),this.thresholdMax=this.volume.getValueForSigma(this.thresholdMax)),this.thresholdType=e.thresholdType),e&&void 0!==e.radiusType&&("radius"===e.radiusType?this.radius=.1:this.radius=e.radiusType,i.radius=!0,"sphere"!==this.dotType||ip&&!this.disableImpostor||(n=!0)),e&&void 0!==e.radius&&(i.radius=!0,"sphere"!==this.dotType||ip&&!this.disableImpostor||(n=!0)),e&&void 0!==e.scale&&(i.scale=!0,"sphere"!==this.dotType||ip&&!this.disableImpostor||(n=!0)),t.prototype.setParameters.call(this,e,i,n),this},e}(Ey);dp.add("shader/Image.vert","uniform float clipRadius;\nuniform vec3 clipCenter;\nvarying vec2 vUv;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )\nvarying vec3 vViewPosition;\n#endif\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\nvoid main() {\n#include begin_vertex\n#include project_vertex\nvUv = uv;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )\nvViewPosition = -mvPosition.xyz;\n#endif\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n}"),dp.add("shader/Image.frag","uniform sampler2D map;\nuniform float opacity;\nuniform vec2 mapSize;\nuniform float nearClip;\nuniform float clipRadius;\nvarying vec2 vUv;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )\nvarying vec3 vViewPosition;\n#endif\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\n#if defined( PICKING )\nuniform sampler2D pickingMap;\nuniform float objectId;\n#else\n#include fog_pars_fragment\n#endif\n#if defined( CUBIC_INTERPOLATION )\n#if defined( CATMULROM_FILTER ) || defined( MITCHELL_FILTER )\n#if defined( CATMULROM_FILTER )\nconst float B = 0.0;\nconst float C = 0.5;\n#elif defined( MITCHELL_FILTER )\nconst float B = 0.333;\nconst float C = 0.333;\n#endif\nfloat filter( float x ){\nfloat f = x;\nif( f < 0.0 ){\nf = -f;\n}\nif( f < 1.0 ){\nreturn ( ( 12.0 - 9.0 * B - 6.0 * C ) * ( f * f * f ) +\n( -18.0 + 12.0 * B + 6.0 *C ) * ( f * f ) +\n( 6.0 - 2.0 * B ) ) / 6.0;\n}else if( f >= 1.0 && f < 2.0 ){\nreturn ( ( -B - 6.0 * C ) * ( f * f * f )\n+ ( 6.0 * B + 30.0 * C ) * ( f *f ) +\n( - ( 12.0 * B ) - 48.0 * C ) * f +\n8.0 * B + 24.0 * C ) / 6.0;\n}else{\nreturn 0.0;\n}\n}\n#elif defined( BSPLINE_FILTER )\nfloat filter( float x ){\nfloat f = x;\nif( f < 0.0 ){\nf = -f;\n}\nif( f >= 0.0 && f <= 1.0 ){\nreturn ( 2.0 / 3.0 ) + ( 0.5 ) * ( f * f * f ) - ( f * f );\n}else if( f > 1.0 && f <= 2.0 ){\nreturn 1.0 / 6.0 * pow( ( 2.0 - f ), 3.0 );\n}\nreturn 1.0;\n}\n#else\nfloat filter( float x ){\nreturn 1.0;\n}\n#endif\nvec4 biCubic( sampler2D tex, vec2 texCoord ){\nvec2 texelSize = 1.0 / mapSize;\ntexCoord -= texelSize / 2.0;\nvec4 nSum = vec4( 0.0 );\nfloat nDenom = 0.0;\nvec2 cell = fract( texCoord * mapSize );\nfor( float m = -1.0; m <= 2.0; ++m ){\nfor( float n = -1.0; n <= 2.0; ++n ){\nvec4 vecData = texture2D(\ntex, texCoord + texelSize * vec2( m, n )\n);\nfloat c = filter( m - cell.x ) * filter( -n + cell.y );\nnSum += vecData * c;\nnDenom += c;\n}\n}\nreturn nSum / nDenom;\n}\n#endif\nvoid main(){\n#include nearclip_fragment\n#include radiusclip_fragment\n#if defined( CUBIC_INTERPOLATION )\ngl_FragColor = biCubic( map, vUv );\n#else\ngl_FragColor = texture2D( map, vUv );\n#endif\n#if defined( PICKING )\nif( gl_FragColor.a < 0.7 )\ndiscard;\ngl_FragColor = vec4( texture2D( pickingMap, vUv ).xyz, objectId );\n#else\nif( gl_FragColor.a < 0.01 )\ndiscard;\ngl_FragColor.a *= opacity;\n#include fog_fragment\n#endif\n}");var Ry=new Uint16Array([0,1,2,1,3,2]),Ly=new Float32Array([0,1,0,0,1,1,1,0]),Ny=function(t){function e(e,i){var n=e||{},r=i||{};t.call(this,{position:n.position,index:Ry,picking:n.picking},r),this.forceTransparent=!0,this.filter=gr(r.filter,"nearest");var o=new _(n.imageData,n.width,n.height);o.flipY=!0,this.tex=o;for(var s=n.imageData.length,a=new Uint8Array(s),h=0;h<s;h+=4){var l=h/4;a[h]=l>>16&255,a[h+1]=l>>8&255,a[h+2]=255&l}var u=new _(a,n.width,n.height);u.flipY=!0,u.minFilter=wu,u.magFilter=wu,this.pickingTex=u,this.addUniforms({map:{value:o},pickingMap:{value:u},mapSize:{value:new f(n.width,n.height)}}),this.geometry.addAttribute("uv",new Et(Ly,2))}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={parameters:{},vertexShader:{},fragmentShader:{}};return i.parameters.get=function(){return Object.assign.call(this,{filter:{updateShader:!0,uniform:!0}},t.prototype.parameters)},e.prototype.getDefines=function(e){var i=t.prototype.getDefines.call(this,e);return this.filter.startsWith("cubic")&&(i.CUBIC_INTERPOLATION=1,this.filter.endsWith("bspline")?i.BSPLINE_FILTER=1:this.filter.endsWith("catmulrom")?i.CATMULROM_FILTER=1:this.filter.endsWith("mitchell")&&(i.MITCHELL_FILTER=1)),i},e.prototype.updateTexture=function(){var t=this.tex;this.filter.startsWith("cubic")?(t.minFilter=wu,t.magFilter=wu):"linear"===this.filter?(t.minFilter=ku,t.magFilter=ku):(t.minFilter=wu,t.magFilter=wu),t.needsUpdate=!0,this.pickingTex.needsUpdate=!0},e.prototype.makeMaterial=function(){t.prototype.makeMaterial.call(this),this.updateTexture();var e=this.material;e.uniforms.map.value=this.tex,e.blending=Cl,e.needsUpdate=!0;var i=this.wireframeMaterial;i.uniforms.map.value=this.tex,i.blending=Cl,i.needsUpdate=!0;var n=this.pickingMaterial;n.uniforms.map.value=this.tex,n.uniforms.pickingMap.value=this.pickingTex,n.blending=Cl,n.needsUpdate=!0},e.prototype.setUniforms=function(e){e&&void 0!==e.filter&&(this.updateTexture(),e.map=this.tex),t.prototype.setUniforms.call(this,e)},i.vertexShader.get=function(){return"Image.vert"},i.fragmentShader.get=function(){return"Image.frag"},Object.defineProperties(e.prototype,i),e}(Ig),Fy=function(t,e){var i=e||{};this.dimension=gr(i.dimension,"x"),this.positionType=gr(i.positionType,"percent"),this.position=gr(i.position,30),this.thresholdType=gr(i.thresholdType,"sigma"),this.thresholdMin=gr(i.thresholdMin,-1/0),this.thresholdMax=gr(i.thresholdMax,1/0),this.normalize=gr(i.normalize,!1),this.volume=t};Fy.prototype.getPositionFromCoordinate=function(t){var e,i=this.dimension,n=this.volume,r=n.matrix,o=(new y).setFromMatrixPosition(r)[i],s=(new y).setFromMatrixScale(r)[i];return e="x"===i?n.nx:"y"===i?n.ny:n.nz,Math.round(((t-o)/(e/100)+1)/s)},Fy.prototype.getData=function(t){function e(t){return Math.round(t/100*(o-1))}function i(t,e,i,n){return 3*(i*s.ny*s.nx+e*s.nx+t)+n}function n(t,e,i,n){m.set(t,e,i).applyMatrix4(h).toArray(p,n)}var r=this;t=t||{};var o,s=this.volume,a=s.data,h=s.matrix;o="coordinate"===this.positionType?this.getPositionFromCoordinate(this.position):this.position;var l,u,d,c,f,p=new Float32Array(12),m=new y,v=0,g=0,b=0,_=s.nx,w=s.ny,x=s.nz;"x"===this.dimension?(d=e(s.nx),c=s.ny-1,f=s.nz-1,l=s.nz,u=s.ny,v=d,_=v+1,n(d,0,0,0),n(d,c,0,3),n(d,0,f,6),n(d,c,f,9)):"y"===this.dimension?(d=s.nx-1,c=e(s.ny),f=s.nz-1,l=s.nz,u=s.nx,g=c,w=g+1,n(0,c,0,0),n(d,c,0,3),n(0,c,f,6),n(d,c,f,9)):"z"===this.dimension&&(d=s.nx-1,c=s.ny-1,f=e(s.nz),l=s.nx,u=s.ny,b=f,x=b+1,n(0,0,f,0),n(0,c,f,3),n(d,0,f,6),n(d,c,f,9));var S,k,E=0,M=0,T=new Uint8Array(l*u*4),C=new Float32Array(l*u);"sigma"===this.thresholdType?(S=s.getValueForSigma(this.thresholdMin),k=s.getValueForSigma(this.thresholdMax)):(S=this.thresholdMin,k=this.thresholdMax);var O=Object.assign({},t.colorParams,{volume:s});this.normalize&&(O.domain=[0,1]);var P,A,D,I=ap.getScheme(O),R=new Float32Array(3),L=I.getScale();if(this.normalize){P=1/0,A=-1/0;for(var N=g;N<w;++N)for(var F=v;F<_;++F)for(var z=b;z<x;++z){var B=i(F,N,z,0)/3,j=a[B];j<P&&(P=j),j>A&&(A=j)}D=A-P}for(var U=g;U<w;++U)for(var H=v;H<_;++H)for(var V=b;V<x;++V){var G=i(H,U,V,0)/3,W=a[G];r.normalize&&(W=(W-P)/D),I.colorToArray(L(W),R),T[E]=Math.round(255*R[0]),T[E+1]=Math.round(255*R[1]),T[E+2]=Math.round(255*R[2]),T[E+3]=W>S&&W<k?255:0,C[M]=G,++M,E+=4}var Y=new ov(C,s);return{position:p,imageData:T,width:l,height:u,picking:Y}};var zy=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="slice",this.parameters=Object.assign({filter:{type:"select",buffer:!0,options:{nearest:"nearest",linear:"linear","cubic-bspline":"cubic-bspline","cubic-catmulrom":"cubic-catmulrom","cubic-mitchell":"cubic-mitchell"}},positionType:{type:"select",rebuild:!0,options:{percent:"percent",coordinate:"coordinate"}},position:{type:"range",step:.1,max:100,min:1,rebuild:!0},dimension:{type:"select",rebuild:!0,options:{x:"x",y:"y",z:"z"}},thresholdType:{type:"select",rebuild:!0,options:{value:"value",sigma:"sigma"}},thresholdMin:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},thresholdMax:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},normalize:{type:"boolean",rebuild:!0}},this.parameters,{flatShaded:null,side:null,wireframe:null,linewidth:null,colorScheme:null,roughness:null,metalness:null,diffuse:null}),this.volume=e,this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=this.volume,n=e||{};n.colorDomain=gr(n.colorDomain,[i.min,i.max]),n.colorScheme=gr(n.colorScheme,"value"),n.colorScale=gr(n.colorScale,"Spectral"),this.colorScheme="value",this.dimension=gr(n.dimension,"x"),this.filter=gr(n.filter,"cubic-bspline"),this.positionType=gr(n.positionType,"percent"),this.position=gr(n.position,30),this.thresholdType=gr(n.thresholdType,"sigma"),this.thresholdMin=gr(n.thresholdMin,-1/0),this.thresholdMax=gr(n.thresholdMax,1/0),this.normalize=gr(n.normalize,!1),t.prototype.init.call(this,n),this.build()},e.prototype.attach=function(t){var e=this;this.bufferList.forEach(function(t){e.viewer.add(t)}),this.setVisibility(this.visible),t()},e.prototype.create=function(){var t=new Fy(this.volume,{positionType:this.positionType,position:this.position,dimension:this.dimension,thresholdType:this.thresholdType,thresholdMin:this.thresholdMin,thresholdMax:this.thresholdMax,normalize:this.normalize}),e=new Ny(t.getData({colorParams:this.getColorParams()}),this.getBufferParams({filter:this.filter}));this.bufferList.push(e)},e}(Ey),By=function(t){function e(e,i,n){var r=n||{};if(t.call(this,e,i,r),this.type="structure",this.parameters=Object.assign({radiusType:{type:"select",options:hs.types},radius:{type:"number",precision:3,max:10,min:.001},scale:{type:"number",precision:3,max:10,min:.001},assembly:null,defaultAssembly:{type:"hidden"}},this.parameters),this.selection=new $f(r.sele),this.dataList=[],this.structure=e,this.structureView=this.structure.getView(this.selection),e.biomolDict){var o={default:"default","":e.unitcell?"AU":"FULL"};Object.keys(e.biomolDict).forEach(function(t){o[t]=t}),this.parameters.assembly={type:"select",options:o,rebuild:!0}}else this.parameters.assembly=null}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={defaultScale:{}};return i.defaultScale.get=function(){return{vdw:1,covalent:1,bfactor:.01,sstruc:1}},e.prototype.init=function(e){var i=e||{};i.colorScheme=gr(i.colorScheme,"element"),this.radius=gr(i.radius,"vdw"),this.scale=gr(i.scale,1),this.assembly=gr(i.assembly,"default"),this.defaultAssembly=gr(i.defaultAssembly,""),"auto"===i.quality&&(i.quality=this.getQuality()),t.prototype.init.call(this,i),this.selection.signals.stringChanged.add(function(){this.build()},this),this.build()},e.prototype.getAssembly=function(){var t="default"===this.assembly?this.defaultAssembly:this.assembly;return this.structure.biomolDict[t]},e.prototype.getQuality=function(){var t,e=this.structureView,i=this.getAssembly();return t=i?i.getAtomCount(e):e.atomCount,tp&&(t*=4),e.atomStore.count/e.residueStore.count<2&&(t*=10),t<15e3?"high":t<8e4?"medium":"low"},e.prototype.create=function(){if(0!==this.structureView.atomCount){var t=this.getAssembly();if(t)t.partList.forEach(function(t,e){var i=t.getView(this.structureView);if(0!==i.atomCount){var n=this.createData(i,e);n&&(n.sview=i,n.instanceList=t.getInstanceList(),this.dataList.push(n))}},this);else{var e=this.createData(this.structureView,0);e&&(e.sview=this.structureView,this.dataList.push(e))}}},e.prototype.createData=function(){console.error("createData not implemented")},e.prototype.update=function(t){if(this.lazy&&!this.visible)return void Object.assign(this.lazyProps.what,t);this.dataList.forEach(function(e){e.bufferList.length>0&&this.updateData(t,e)},this)},e.prototype.updateData=function(){this.build()},e.prototype.getColorParams=function(){var e=t.prototype.getColorParams.call(this);return e.structure=this.structure,e},e.prototype.getAtomParams=function(t,e){return Object.assign({what:t,colorParams:this.getColorParams(),radiusParams:{radius:this.radius,scale:this.scale}},e)},e.prototype.getBondParams=function(t,e){return Object.assign({what:t,colorParams:this.getColorParams(),radiusParams:{radius:this.radius,scale:this.scale}},e)},e.prototype.setSelection=function(t,e){return this.selection.setString(t,e),this},e.prototype.setParameters=function(e,i,n){return i=i||{},e&&void 0!==e.radiusType&&("size"===e.radiusType?this.radius=1:this.radius=e.radiusType,delete e.radiusType,i.radius=!0,ip&&!this.disableImpostor||(n=!0)),e&&void 0!==e.radius&&(i.radius=!0,ip&&!this.disableImpostor||(n=!0)),e&&void 0!==e.scale&&(i.radius=!0,ip&&!this.disableImpostor||(n=!0)),e&&void 0!==e.defaultAssembly&&(n=!0),t.prototype.setParameters.call(this,e,i,n),this},e.prototype.getParameters=function(){return Object.assign(t.prototype.getParameters.call(this),{sele:this.selection?this.selection.string:void 0,defaultAssembly:this.defaultAssembly})},e.prototype.attach=function(t){var e=this.viewer,i=this.bufferList;this.dataList.forEach(function(t){t.bufferList.forEach(function(n){i.push(n),e.add(n,t.instanceList)})}),this.setVisibility(this.visible),t()},e.prototype.clear=function(){this.dataList.length=0,t.prototype.clear.call(this)},e.prototype.dispose=function(){this.structureView.dispose(),delete this.structure,delete this.structureView,t.prototype.dispose.call(this)},Object.defineProperties(e.prototype,i),e}(Ey),jy=function(t){function e(e,i){var n=e.position1.length/3,r=4*n;t.call(this,{position:new Float32Array(3*r),color:new Float32Array(3*r)},i),this.setAttributes(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={isLine:{},vertexShader:{},fragmentShader:{}};return e.prototype.setAttributes=function(t){var e,i,n,r,o,s,a=this.geometry.attributes;t.position1&&t.position2&&(e=t.position1,i=t.position2,o=a.position.array,a.position.needsUpdate=!0),t.color&&t.color2&&(n=t.color,r=t.color2,s=a.color.array,a.color.needsUpdate=!0);for(var h,l,u,d,c,f,p,m,v,g,y,b=this.size,_=0;_<b;_++)l=3*_,h=4*_*3,e&&i&&(f=e[l],p=e[l+1],m=e[l+2],v=i[l],g=i[l+1],y=i[l+2],u=(f+v)/2,d=(p+g)/2,c=(m+y)/2,o[h]=f,o[h+1]=p,o[h+2]=m,o[h+3]=u,o[h+4]=d,o[h+5]=c,o[h+6]=u,o[h+7]=d,o[h+8]=c,o[h+9]=v,o[h+10]=g,o[h+11]=y),n&&r&&(s[h]=s[h+3]=n[l],s[h+1]=s[h+4]=n[l+1],s[h+2]=s[h+5]=n[l+2],s[h+6]=s[h+9]=r[l],s[h+7]=s[h+10]=r[l+1],s[h+8]=s[h+11]=r[l+2])},i.isLine.get=function(){return!0},i.vertexShader.get=function(){return"Line.vert"},i.fragmentShader.get=function(){return"Line.frag"},Object.defineProperties(e.prototype,i),e}(Ig),Uy=function(t){function e(e,i,n){t.call(this,e.structure,i,n),this.type="trajectory",this.parameters=Object.assign({drawLine:{type:"boolean",rebuild:!0},drawCylinder:{type:"boolean",rebuild:!0},drawPoint:{type:"boolean",rebuild:!0},drawSphere:{type:"boolean",rebuild:!0},linewidth:{type:"integer",max:20,min:1,rebuild:!0},pointSize:{type:"integer",max:20,min:1,rebuild:!0},sizeAttenuation:{type:"boolean",rebuild:!0},sort:{type:"boolean",rebuild:!0}},this.parameters),this.manualAttach=!0,this.trajectory=e,this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.colorScheme=gr(i.colorScheme,"uniform"),i.colorValue=gr(i.colorValue,14540253),this.drawLine=gr(i.drawLine,!0),this.drawCylinder=gr(i.drawCylinder,!1),this.drawPoint=gr(i.drawPoint,!1),this.drawSphere=gr(i.drawSphere,!1),this.pointSize=gr(i.pointSize,1),this.sizeAttenuation=gr(i.sizeAttenuation,!1),this.sort=gr(i.sort,!0),t.prototype.init.call(this,i)},e.prototype.attach=function(t){var e=this;this.bufferList.forEach(function(t){e.viewer.add(t)}),this.setVisibility(this.visible),t()},e.prototype.prepare=function(t){t()},e.prototype.create=function(){if(0!==this.atomSet.atomCount){var t=this,e=this.atomSet.atoms[0].index;this.trajectory.getPath(e,function(e){var i=e.length/3,n=new it(t.colorValue);if(t.drawSphere){var r=new Yg({position:e,color:bo(i,n.r,n.g,n.b),radius:yo(i,.2)},t.getBufferParams({sphereDetail:t.sphereDetail,dullInterior:!0,disableImpostor:t.disableImpostor}));t.bufferList.push(r)}if(t.drawCylinder){var o=new hy({position1:e.subarray(0,-3),position2:e.subarray(3),color:bo(i-1,n.r,n.g,n.b),color2:bo(i-1,n.r,n.g,n.b),radius:yo(i,.05)},t.getBufferParams({openEnded:!1,radialSegments:t.radialSegments,disableImpostor:t.disableImpostor,dullInterior:!0}));t.bufferList.push(o)}if(t.drawPoint){var s=new Dy({position:e,color:bo(i,n.r,n.g,n.b)},t.getBufferParams({pointSize:t.pointSize,sizeAttenuation:t.sizeAttenuation,sort:t.sort}));t.bufferList.push(s)}if(t.drawLine){var a=new jy({position1:e.subarray(0,-3),position2:e.subarray(3),color:bo(i-1,n.r,n.g,n.b),color2:bo(i-1,n.r,n.g,n.b)},t.getBufferParams());t.bufferList.push(a)}t.attach()})}},e}(By),Hy=0,Vy=new b,Gy=new y,Wy=function(t,e){Object.defineProperty(this,"id",{value:Hy++});var i=e||{};this.name=i.name,this.uuid=Gr(),this.visible=void 0===i.visible||i.visible,this.signals={representationAdded:new io,representationRemoved:new io,visibilityChanged:new io,matrixChanged:new io,statusChanged:new io,nameChanged:new io,disposed:new io},this.stage=t,this.viewer=t.viewer,this.reprList=[],this.annotationList=[],this.matrix=new b,this.position=new y,this.quaternion=new g,this.scale=new y(1,1,1),this.transform=new b,this.controls=new Bm(this)},Yy={type:{}};Yy.type.get=function(){return"component"},Wy.prototype.setPosition=function(t){return Array.isArray(t)?this.position.fromArray(t):this.position.copy(t),this.updateMatrix(),this},Wy.prototype.setRotation=function(t){if(Array.isArray(t))if(3===t.length){var e=(new vt).fromArray(t);this.quaternion.setFromEuler(e)}else this.quaternion.fromArray(t);else t instanceof vt?this.quaternion.setFromEuler(t):this.quaternion.copy(t);return this.updateMatrix(),this},Wy.prototype.setScale=function(t){return this.scale.set(t,t,t),this.updateMatrix(),this},Wy.prototype.setTransform=function(t){return this.transform.copy(t),this.updateMatrix(),this},Wy.prototype.updateMatrix=function(){var t=this,e=this.getCenterUntransformed(Gy);this.matrix.makeTranslation(-e.x,-e.y,-e.z),Vy.makeRotationFromQuaternion(this.quaternion),this.matrix.premultiply(Vy),Vy.makeScale(this.scale.x,this.scale.y,this.scale.z),this.matrix.premultiply(Vy);var i=this.position;Vy.makeTranslation(i.x+e.x,i.y+e.y,i.z+e.z),this.matrix.premultiply(Vy),this.matrix.premultiply(this.transform),this.reprList.forEach(function(e){e.setParameters({matrix:t.matrix})}),this.stage.viewer.updateBoundingBox(),this.signals.matrixChanged.dispatch(this.matrix)},Wy.prototype.addAnnotation=function(t,e,i){var n=new Lm(this,t,e,i);return this.annotationList.push(n),n},Wy.prototype.removeAnnotation=function(t){var e=this.annotationList.indexOf(t);-1!==e&&(this.annotationList.splice(e,1),t.dispose())},Wy.prototype.removeAllAnnotations=function(){this.annotationList.forEach(function(t){t.dispose()}),this.annotationList.length=0},Wy.prototype.addRepresentation=function(t,e,i){var n=i||{},r=this.stage.getParameters();n.matrix=this.matrix.clone(),n.quality=n.quality||r.quality,n.disableImpostor=gr(n.disableImpostor,!r.impostor),n.useWorker=gr(n.useWorker,r.workerDefault),n.visible=gr(n.visible,!0);var o=Object.assign({},n,{visible:this.visible&&n.visible}),s=ba(t,e,this.viewer,o),a=this.__getRepresentationComponent(s,n);return this.reprList.push(a),this.signals.representationAdded.dispatch(a),a},Wy.prototype.addBufferRepresentation=function(t,e){return Wy.prototype.addRepresentation.call(this,"buffer",t,e)},Wy.prototype.hasRepresentation=function(t){return-1!==this.reprList.indexOf(t)},Wy.prototype.removeRepresentation=function(t){var e=this.reprList.indexOf(t);-1!==e&&(this.reprList.splice(e,1),t.dispose(),this.signals.representationRemoved.dispatch(t))},Wy.prototype.updateRepresentations=function(t){this.reprList.forEach(function(e){e.update(t)}),this.stage.viewer.requestRender()},Wy.prototype.removeAllRepresentations=function(){this.reprList.slice(0).forEach(function(t){t.dispose()})},Wy.prototype.dispose=function(){this.removeAllAnnotations(),this.removeAllRepresentations(),delete this.annotationList,delete this.reprList,this.signals.disposed.dispatch()},Wy.prototype.setVisibility=function(t){return this.visible=t,this.eachRepresentation(function(t){t.updateVisibility()}),this.annotationList.forEach(function(t){t.updateVisibility()}),this.signals.visibilityChanged.dispatch(t),this},Wy.prototype.setStatus=function(t){return this.status=t,this.signals.statusChanged.dispatch(t),this},Wy.prototype.setName=function(t){return this.name=t,this.signals.nameChanged.dispatch(t),this},Wy.prototype.getBox=function(){return(t=this).getBoxUntransformed.apply(t,arguments).clone().applyMatrix4(this.matrix);var t},Wy.prototype.getCenter=function(){return(t=this).getCenterUntransformed.apply(t,arguments).clone().applyMatrix4(this.matrix);var t},Wy.prototype.getZoom=function(){return this.stage.getZoomForBox((t=this).getBox.apply(t,arguments));var t},Wy.prototype.getBoxUntransformed=function(){},Wy.prototype.getCenterUntransformed=function(){return this.getBoxUntransformed().getCenter()},Wy.prototype.autoView=function(t){this.stage.animationControls.zoomMove(this.getCenter(),this.getZoom(),gr(t,0))},Wy.prototype.eachRepresentation=function(t){this.reprList.forEach(t)},Object.defineProperties(Wy.prototype,Yy),Wy.prototype.__getRepresentationComponent=function(t,e){return new $y(this.stage,t,e,this)};var $y=function(t){function e(e,i,n,r){var o=n||{};o.name=gr(o.name,i.type),t.call(this,e,o),this.signals=Object.assign(this.signals,{parametersChanged:new io}),this.parent=r,this.setRepresentation(i)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"representation"},e.prototype.getType=function(){return this.repr.type},e.prototype.setRepresentation=function(t){this.disposeRepresentation(),this.repr=t,this.stage.tasks.listen(this.repr.tasks),this.updateVisibility()},e.prototype.addRepresentation=function(){},e.prototype.removeRepresentation=function(){},e.prototype.hasRepresentation=function(){},e.prototype.disposeRepresentation=function(){this.repr&&(this.stage.tasks.unlisten(this.repr.tasks),this.repr.dispose())},e.prototype.dispose=function(){this.parent&&this.parent.hasRepresentation(this)?this.parent.removeRepresentation(this):(this.disposeRepresentation(),this.signals.disposed.dispatch())},e.prototype.setVisibility=function(t){return this.visible=t,this.updateVisibility(),this.signals.visibilityChanged.dispatch(this.visible),this},e.prototype.getVisibility=function(){return this.parent?this.parent.visible&&this.visible:this.visible},e.prototype.toggleVisibility=function(){return this.setVisibility(!this.visible)},e.prototype.updateVisibility=function(){this.repr.setVisibility(this.getVisibility())},e.prototype.update=function(t){return this.repr.update(t),this},e.prototype.build=function(t){return this.repr.build(t),this},e.prototype.setSelection=function(t){return this.repr.setSelection(t),this},e.prototype.setParameters=function(t){return this.repr.setParameters(t),this.signals.parametersChanged.dispatch(this.repr.getParameters()),this},e.prototype.getParameters=function(){return this.repr.getParameters()},e.prototype.setColor=function(t){return this.repr.setColor(t),this},e.prototype.getCenter=function(){},e.prototype.getZoom=function(){},e.prototype.getBox=function(){},Object.defineProperties(e.prototype,i),e}(Wy),qy=function(t){var e=this;this.list=t||[];for(var i=this.list.length,n=0;n<i;++n){e.list[n].signals.disposed.add(e._remove,e)}};qy.prototype._remove=function(t){var e=this.list.indexOf(t);-1!==e&&this.list.splice(e,1)},qy.prototype._invoke=function(t,e){for(var i=this,n=this.list.length,r=0;r<n;++r){var o=i.list[r],s=o[t];"function"===typeof s&&s.apply(o,e)}return this},qy.prototype.setVisibility=function(t){return this._invoke("setVisibility",[t])},qy.prototype.setSelection=function(t){return this._invoke("setSelection",[t])},qy.prototype.dispose=function(){return this._invoke("dispose")};var Xy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addRepresentation=function(t,e){return this._invoke("addRepresentation",[t,e])},e.prototype.autoView=function(t){return this._invoke("autoView",[t])},e}(qy),Zy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setParameters=function(t){return this._invoke("setParameters",[t])},e.prototype.setColor=function(t){return this._invoke("setColor",[t])},e}(qy),Ky=new y,Qy=function(t,e){if(this.signals={parametersChanged:new io,fullscreenChanged:new io,componentAdded:new io,componentRemoved:new io,clicked:new io,hovered:new io},this.tasks=new Tp,this.compList=[],this.defaultFileParams={},this.viewer=new Fo(t),this.viewer.renderer){this.tooltip=document.createElement("div"),Object.assign(this.tooltip.style,{display:"none",position:"fixed",zIndex:2+(parseInt(this.viewer.container.style.zIndex)||0),pointerEvents:"none",backgroundColor:"rgba( 0, 0, 0, 0.6 )",color:"lightgrey",padding:"8px",fontFamily:"sans-serif"}),document.body.appendChild(this.tooltip),this.mouseObserver=new Wp(this.viewer.renderer.domElement),this.viewerControls=new fm(this),this.trackballControls=new tm(this),this.pickingControls=new rm(this),this.animationControls=new Mm(this),this.mouseControls=new Pm(this),this.pickingBehavior=new Am(this),this.mouseBehavior=new Dm(this),this.animationBehavior=new Im(this),this.keyBehavior=new Rm(this),this.spinAnimation=this.animationControls.spin([0,1,0],.005),this.spinAnimation.pause(!0),this.rockAnimation=this.animationControls.rock([0,1,0],.005),this.rockAnimation.pause(!0);var i=Object.assign({impostor:!0,quality:"medium",workerDefault:!0,sampleLevel:0,backgroundColor:"black",rotateSpeed:2,zoomSpeed:1.2,panSpeed:1,clipNear:0,clipFar:100,clipDist:10,fogNear:50,fogFar:100,cameraFov:40,cameraType:"perspective",lightColor:14540253,lightIntensity:1,ambientColor:14540253,ambientIntensity:.2,hoverTimeout:0,tooltip:!0,mousePreset:"default"},e);this.parameters={backgroundColor:{type:"color"},quality:{type:"select",options:{auto:"auto",low:"low",medium:"medium",high:"high"}},sampleLevel:{type:"range",step:1,max:5,min:-1},impostor:{type:"boolean"},workerDefault:{type:"boolean"},rotateSpeed:{type:"number",precision:1,max:10,min:0},zoomSpeed:{type:"number",precision:1,max:10,min:0},panSpeed:{type:"number",precision:1,max:10,min:0},clipNear:{type:"range",step:1,max:100,min:0},clipFar:{type:"range",step:1,max:100,min:0},clipDist:{type:"integer",max:200,min:0},fogNear:{type:"range",step:1,max:100,min:0},fogFar:{type:"range",step:1,max:100,min:0},cameraType:{type:"select",options:{perspective:"perspective",orthographic:"orthographic"}},cameraFov:{type:"range",step:1,max:120,min:15},lightColor:{type:"color"},lightIntensity:{type:"number",precision:2,max:10,min:0},ambientColor:{type:"color"},ambientIntensity:{type:"number",precision:2,max:10,min:0},hoverTimeout:{type:"integer",max:1e4,min:-1},tooltip:{type:"boolean"},mousePreset:{type:"select",options:{default:"default",pymol:"pymol",coot:"coot"}}},this.setParameters(i),this.viewer.animate()}};Qy.prototype.setParameters=function(t){var e=Object.assign({},t),i=this.parameters,n=this.viewer,r=this.trackballControls;for(var o in e)void 0!==e[o]&&i[o]&&(i[o].int&&(e[o]=parseInt(e[o])),i[o].float&&(e[o]=parseFloat(e[o])),i[o].value=e[o]);return void 0!==e.quality&&this.setQuality(e.quality),void 0!==e.impostor&&this.setImpostor(e.impostor),void 0!==e.rotateSpeed&&(r.rotateSpeed=e.rotateSpeed),void 0!==e.zoomSpeed&&(r.zoomSpeed=e.zoomSpeed),void 0!==e.panSpeed&&(r.panSpeed=e.panSpeed),void 0!==e.mousePreset&&this.mouseControls.preset(e.mousePreset),this.mouseObserver.setParameters({hoverTimeout:e.hoverTimeout}),n.setClip(e.clipNear,e.clipFar,e.clipDist),n.setFog(void 0,e.fogNear,e.fogFar),n.setCamera(e.cameraType,e.cameraFov),n.setSampling(e.sampleLevel),n.setBackground(e.backgroundColor),n.setLight(e.lightColor,e.lightIntensity,e.ambientColor,e.ambientIntensity),this.signals.parametersChanged.dispatch(this.getParameters()),this},Qy.prototype.getParameters=function(){var t=this,e={};for(var i in t.parameters)e[i]=t.parameters[i].value;return e},Qy.prototype.defaultFileRepresentation=function(t){if("structure"===t.type){t.setSelection("/0");var e,i,n,r=t.structure;if(r.biomolDict.BU1){var o=r.biomolDict.BU1;e=o.getAtomCount(r),i=o.getResidueCount(r),n=o.getInstanceCount(),t.setDefaultAssembly("BU1")}else e=r.getModelProxy(0).atomCount,i=r.getModelProxy(0).residueCount,n=1;var s=e;tp&&(s*=4);var a=r.atomStore.count/r.residueStore.count<2;a&&(s*=10);var h="chainname",l="RdYlBu",u=!1;if(1===r.getChainnameCount("polymer and /0")&&(h="residueindex",l="spectral",u=!0),rp&&console.log(s,e,n,a),i/n<4)t.addRepresentation("ball+stick",{colorScheme:"element",scale:2,aspectRatio:1.5,bondScale:.3,bondSpacing:.75,quality:"auto"});else if(n>5&&s>15e3||s>7e5){var d=Math.min(1.5,Math.max(.1,2e3/(s/n)));a&&(d=Math.min(d,.15)),t.addRepresentation("surface",{sele:"polymer",surfaceType:"sas",probeRadius:1.4,scaleFactor:d,colorScheme:h,colorScale:l,colorReverse:u,useWorker:!1})}else s>25e4?t.addRepresentation("backbone",{lineOnly:!0,colorScheme:h,colorScale:l,colorReverse:u}):s>1e5?t.addRepresentation("backbone",{quality:"low",disableImpostor:!0,colorScheme:h,colorScale:l,colorReverse:u,scale:2}):s>8e4?t.addRepresentation("backbone",{colorScheme:h,colorScale:l,colorReverse:u,scale:2}):(t.addRepresentation("cartoon",{colorScheme:h,colorScale:l,colorReverse:u,scale:.7,aspectRatio:5,quality:"auto"}),s<5e4&&t.addRepresentation("base",{colorScheme:h,colorScale:l,colorReverse:u,quality:"auto"}),t.addRepresentation("ball+stick",{sele:"ligand",colorScheme:"element",scale:2,aspectRatio:1.5,bondScale:.3,bondSpacing:.75,quality:"auto"}));t.structure.frames.length&&t.addTrajectory()}else"surface"!==t.type&&"volume"!==t.type||t.addRepresentation("surface");this.tasks.onZeroOnce(this.autoView,this)},Qy.prototype.loadFile=function(t,e){var i=Object.assign({},this.defaultFileParams,e),n=new Wy(this,i);n.name=br(t).name,this.addComponent(n);var r=this.tasks;r.increment();var o,s=function(t){return this.removeComponent(n),n=this.addComponentFromObject(t,i),"script"===n.type?n.run():i.defaultRepresentation&&this.defaultFileRepresentation(n),r.decrement(),n}.bind(this),a=function(t){throw n.setStatus(t),r.decrement(),t},h=gr(i.ext,br(t).ext);return o="dcd"===h?Promise.reject(new Error("loadFile: ext 'dcd' must be loaded into a structure component")):uo(t,i),o.then(s,a)},Qy.prototype.addComponent=function(t){if(!t)return void np.warn("Stage.addComponent: no component given");this.compList.push(t),this.signals.componentAdded.dispatch(t)},Qy.prototype.addComponentFromObject=function(t,e){var i=fp.get(t.type);if(i){var n=new i(this,t,e);return this.addComponent(n),n}np.warn("no component for object type",t.type)},Qy.prototype.removeComponent=function(t){var e=this.compList.indexOf(t);-1!==e&&(this.compList.splice(e,1),t.dispose(),this.signals.componentRemoved.dispatch(t))},Qy.prototype.removeAllComponents=function(t){this.compList.slice().forEach(function(e){t&&e.type!==t||this.removeComponent(e)},this)},Qy.prototype.handleResize=function(){this.viewer.handleResize()},Qy.prototype.setSize=function(t,e){var i=this.viewer.container;i!==document.body&&(void 0!==t&&(i.style.width=t),void 0!==e&&(i.style.height=e),this.handleResize())},Qy.prototype.toggleFullscreen=function(t){function e(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement}function i(){if(!e()&&n.lastFullscreenElement){var t=n.lastFullscreenElement;t.style.width=t.dataset.normalWidth,t.style.height=t.dataset.normalHeight,document.removeEventListener("fullscreenchange",i),document.removeEventListener("mozfullscreenchange",i),document.removeEventListener("webkitfullscreenchange",i),document.removeEventListener("MSFullscreenChange",i),n.handleResize(),n.signals.fullscreenChanged.dispatch(!1)}}if(!document.fullscreenEnabled&&!document.mozFullScreenEnabled&&!document.webkitFullscreenEnabled&&!document.msFullscreenEnabled)return void np.log("fullscreen mode (currently) not possible");var n=this;t=t||this.viewer.container,this.lastFullscreenElement=t,e()?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(t.dataset.normalWidth=t.style.width,t.dataset.normalHeight=t.style.height,t.style.width=window.screen.width+"px",t.style.height=window.screen.height+"px",t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen(),document.addEventListener("fullscreenchange",i),document.addEventListener("mozfullscreenchange",i),document.addEventListener("webkitfullscreenchange",i),document.addEventListener("MSFullscreenChange",i),this.handleResize(),this.signals.fullscreenChanged.dispatch(!0),setTimeout(function(){n.handleResize()},100))},Qy.prototype.setSpin=function(t){t?(this.spinAnimation.resume(!0),this.rockAnimation.pause(!0)):this.spinAnimation.pause(!0)},Qy.prototype.setRock=function(t){t?(this.rockAnimation.resume(!0),this.spinAnimation.pause(!0)):this.rockAnimation.pause(!0)},Qy.prototype.toggleSpin=function(){this.setSpin(this.spinAnimation.paused)},Qy.prototype.toggleRock=function(){this.setRock(this.rockAnimation.paused)},Qy.prototype.setFocus=function(t){var e=$r(t/2,0,49.9),i=100-e,n=(i-e)/2;this.setParameters({clipNear:e,clipFar:i,fogNear:qr(i-n),fogFar:qr(i+n)})},Qy.prototype.getZoomForBox=function(t){var e=t.getSize(Ky),i=Math.max(e.x,e.y,e.z),n=Math.min(e.x,e.y,e.z),r=i+Math.sqrt(n),o=Hr(this.viewer.perspectiveCamera.fov),s=this.viewer.width,a=this.viewer.height,h=s/a,l=a<s?1:h;return r=Math.abs(.5*r/l/Math.sin(o/2)),-(r+=this.parameters.clipDist.value)},Qy.prototype.getBox=function(){return this.viewer.boundingBox},Qy.prototype.getZoom=function(){return this.getZoomForBox(this.getBox())},Qy.prototype.getCenter=function(t){return this.getBox().getCenter(t)},Qy.prototype.autoView=function(t){this.animationControls.zoomMove(this.getCenter(),this.getZoom(),gr(t,0))},Qy.prototype.makeImage=function(t){var e=this.viewer,i=this.tasks;return new Promise(function(n,r){function o(){i.increment(),e.makeImage(t).then(function(t){i.decrement(),n(t)}).catch(function(t){i.decrement(),r(t)})}i.onZeroOnce(o)})},Qy.prototype.setImpostor=function(t){this.parameters.impostor.value=t;var e=["spacefill","ball+stick","licorice","hyperball","backbone","rocket","helixorient","contact","distance","dot"];this.eachRepresentation(function(i){if("script"!==i.type&&e.includes(i.getType())){var n=i.getParameters();n.disableImpostor=!t,i.build(n)}})},Qy.prototype.setQuality=function(t){this.parameters.quality.value=t;var e=["tube","cartoon","ribbon","trace","rope"],i=["spacefill","ball+stick","licorice","hyperball","backbone","rocket","helixorient","contact","distance","dot"];this.eachRepresentation(function(n){if("script"!==n.type){var r=n.getParameters();if(!e.includes(n.getType())){if(!i.includes(n.getType()))return;if(!r.disableImpostor)return void(n.repr.quality=t)}r.quality=t,n.build(r)}})},Qy.prototype.eachComponent=function(t,e){this.compList.slice().forEach(function(i,n){e&&i.type!==e||t(i,n)})},Qy.prototype.eachRepresentation=function(t,e){this.eachComponent(function(e){e.reprList.slice().forEach(function(i){t(i,e)})},e)},Qy.prototype.getComponentsByName=function(t,e){var i=[];return this.eachComponent(function(e){(void 0===t||_a(t,e))&&i.push(e)},e),new Xy(i)},Qy.prototype.getComponentsByObject=function(t){var e=[];return this.eachComponent(function(i){i[i.type]===t&&e.push(i)}),new Xy(e)},Qy.prototype.getRepresentationsByName=function(t,e){var i,n;"object"!==typeof t||t instanceof RegExp?(i=void 0,n=t):(i=t.comp,n=t.repr);var r=[];return this.eachRepresentation(function(t,e){(void 0===i||_a(i,e))&&(void 0===n||_a(n,t))&&r.push(t)},e),new Zy(r)},Qy.prototype.getAnythingByName=function(t){var e=this.getComponentsByName(t).list,i=this.getRepresentationsByName(t).list;return new qy(e.concat(i))},Qy.prototype.dispose=function(){this.tasks.dispose()};var Jy=[[4,0,-2,-1,-2,0,-2,-1,-1,-1,-1,-2,-1,-1,-1,1,0,0,-3,-2],[0,9,-3,-4,-2,-3,-3,-1,-3,-1,-1,-3,-3,-3,-3,-1,-1,-1,-2,-2],[-2,-3,6,2,-3,-1,-1,-3,-1,-4,-3,1,-1,0,-2,0,-1,-3,-4,-3],[-1,-4,2,5,-3,-2,0,-3,1,-3,-2,0,-1,2,0,0,-1,-2,-3,-2],[-2,-2,-3,-3,6,-3,-1,0,-3,0,0,-3,-4,-3,-3,-2,-2,-1,1,3],[0,-3,-1,-2,-3,6,-2,-4,-2,-4,-3,0,-2,-2,-2,0,-2,-3,-2,-3],[-2,-3,-1,0,-1,-2,8,-3,-1,-3,-2,1,-2,0,0,-1,-2,-3,-2,2],[-1,-1,-3,-3,0,-4,-3,4,-3,2,1,-3,-3,-3,-3,-2,-1,3,-3,-1],[-1,-3,-1,1,-3,-2,-1,-3,5,-2,-1,0,-1,1,2,0,-1,-2,-3,-2],[-1,-1,-4,-3,0,-4,-3,2,-2,4,2,-3,-3,-2,-2,-2,-1,1,-2,-1],[-1,-1,-3,-2,0,-3,-2,1,-1,2,5,-2,-2,0,-1,-1,-1,1,-1,-1],[-2,-3,1,0,-3,0,1,-3,0,-3,-2,6,-2,0,0,1,0,-3,-4,-2],[-1,-3,-1,-1,-4,-2,-2,-3,-1,-3,-2,-2,7,-1,-2,-1,-1,-2,-4,-3],[-1,-3,0,2,-3,-2,0,-3,1,-2,0,0,-1,5,1,0,-1,-2,-2,-1],[-1,-3,-2,0,-3,-2,0,-3,2,-2,-1,0,-2,1,5,-1,-1,-3,-3,-2],[1,-1,0,0,-2,0,-1,-2,0,-2,-1,1,-1,0,-1,4,1,-2,-3,-2],[0,-1,-1,-1,-2,-2,-2,-1,-1,-1,-1,0,-1,-1,-1,1,5,0,-2,-2],[0,-1,-3,-2,-1,-3,-3,3,-2,1,1,-3,-2,-2,-3,-2,0,4,-3,-1],[-3,-2,-4,-3,1,-2,-2,-3,-3,-2,-1,-4,-4,-2,-3,-3,-2,-3,11,2],[-2,-2,-3,-2,3,-3,2,-1,-2,-1,-1,-2,-3,-1,-2,-2,-2,-1,2,7]],tb=[[4,-1,-2,-2,0,-1,-1,0,-2,-1,-1,-1,-1,-2,-1,1,0,-3,-2,0,-2,-1,0],[-1,5,0,-2,-3,1,0,-2,0,-3,-2,2,-1,-3,-2,-1,-1,-3,-2,-3,-1,0,-1],[-2,0,6,1,-3,0,0,0,1,-3,-3,0,-2,-3,-2,1,0,-4,-2,-3,3,0,-1],[-2,-2,1,6,-3,0,2,-1,-1,-3,-4,-1,-3,-3,-1,0,-1,-4,-3,-3,4,1,-1],[0,-3,-3,-3,9,-3,-4,-3,-3,-1,-1,-3,-1,-2,-3,-1,-1,-2,-2,-1,-3,-3,-2],[-1,1,0,0,-3,5,2,-2,0,-3,-2,1,0,-3,-1,0,-1,-2,-1,-2,0,3,-1],[-1,0,0,2,-4,2,5,-2,0,-3,-3,1,-2,-3,-1,0,-1,-3,-2,-2,1,4,-1],[0,-2,0,-1,-3,-2,-2,6,-2,-4,-4,-2,-3,-3,-2,0,-2,-2,-3,-3,-1,-2,-1],[-2,0,1,-1,-3,0,0,-2,8,-3,-3,-1,-2,-1,-2,-1,-2,-2,2,-3,0,0,-1],[-1,-3,-3,-3,-1,-3,-3,-4,-3,4,2,-3,1,0,-3,-2,-1,-3,-1,3,-3,-3,-1],[-1,-2,-3,-4,-1,-2,-3,-4,-3,2,4,-2,2,0,-3,-2,-1,-2,-1,1,-4,-3,-1],[-1,2,0,-1,-3,1,1,-2,-1,-3,-2,5,-1,-3,-1,0,-1,-3,-2,-2,0,1,-1],[-1,-1,-2,-3,-1,0,-2,-3,-2,1,2,-1,5,0,-2,-1,-1,-1,-1,1,-3,-1,-1],[-2,-3,-3,-3,-2,-3,-3,-3,-1,0,0,-3,0,6,-4,-2,-2,1,3,-1,-3,-3,-1],[-1,-2,-2,-1,-3,-1,-1,-2,-2,-3,-3,-1,-2,-4,7,-1,-1,-4,-3,-2,-2,-1,-2],[1,-1,1,0,-1,0,0,0,-1,-2,-2,0,-1,-2,-1,4,1,-3,-2,-2,0,0,0],[0,-1,0,-1,-1,-1,-1,-2,-2,-1,-1,-1,-1,-2,-1,1,5,-2,-2,0,-1,-1,0],[-3,-3,-4,-4,-2,-2,-3,-2,-2,-3,-2,-3,-1,1,-4,-3,-2,11,2,-3,-4,-3,-2],[-2,-2,-2,-3,-2,-1,-2,-3,2,-1,-1,-2,-1,3,-3,-2,-2,2,7,-1,-3,-2,-1],[0,-3,-3,-3,-1,-2,-2,-3,-3,3,1,-2,1,-1,-2,-2,0,-3,-1,4,-3,-2,-1],[-2,-1,3,4,-3,0,1,-1,0,-3,-4,0,-3,-3,-2,0,-1,-4,-3,-3,4,1,-1],[-1,0,0,1,-3,3,4,-2,0,-3,-3,1,-1,-3,-1,0,-1,-3,-2,-2,1,4,-1],[0,-1,-1,-1,-2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-2,0,0,-2,-1,-1,-1,-1,-1]],eb=function(){return{blosum62:wa("ARNDCQEGHILKMFPSTWYVBZ?",tb),blosum62x:wa("ACDEFGHIKLMNPQRSTVWY",Jy)}}(),ib=function(t,e,i,n,r){this.seq1=t,this.seq2=e,this.gapPenalty=i||-10,this.gapExtensionPenalty=n||-1,this.substMatrix=r||"blosum62",this.substMatrix&&(this.substMatrix=eb[this.substMatrix])};ib.prototype.initMatrices=function(){var t=this;this.n=this.seq1.length,this.m=this.seq2.length,this.score=void 0,this.ali="",this.S=[],this.V=[],this.H=[];var e,i;for(e=0;e<=this.n;++e)for(t.S[e]=[],t.V[e]=[],t.H[e]=[],i=0;i<=this.m;++i)t.S[e][i]=0,t.V[e][i]=0,t.H[e][i]=0;for(e=0;e<=this.n;++e)t.S[e][0]=t.gap(0),t.H[e][0]=-1/0;for(i=0;i<=this.m;++i)t.S[0][i]=t.gap(0),t.V[0][i]=-1/0;this.S[0][0]=0},ib.prototype.gap=function(t){return this.gapPenalty+t*this.gapExtensionPenalty},ib.prototype.makeScoreFn=function(){var t,e,i=this.seq1,n=this.seq2,r=this.substMatrix;return r?function(o,s){t=i[o],e=n[s];try{return r[t][e]}catch(t){return-4}}:(np.warn("Alignment: no subst matrix"),function(r,o){return t=i[r],e=n[o],t===e?5:-3})},ib.prototype.calc=function(){rp&&np.time("Alignment.calc"),this.initMatrices();var t,e,i,n,r,o,s,a=this.gap(0),h=this.makeScoreFn(),l=this.gapExtensionPenalty,u=this.V,d=this.H,c=this.S,f=this.n,p=this.m;for(o=1;o<=f;++o)for(e=c[o-1],t=u[o-1],i=u[o],n=d[o],r=c[o],s=1;s<=p;++s)i[s]=Math.max(e[s]+a,t[s]+l),n[s]=Math.max(r[s-1]+a,n[s-1]+l),r[s]=Math.max(e[s-1]+h(o-1,s-1),i[s],n[s]);rp&&np.timeEnd("Alignment.calc"),rp&&np.log(this.S,this.V,this.H)},ib.prototype.trace=function(){var t=this;rp&&np.time("Alignment.trace"),this.ali1="",this.ali2="";var e,i=this.makeScoreFn(),n=this.n,r=this.m;for(this.S[n][r]>=this.V[n][r]?(e="S",this.score=this.S[n][r]):this.V[n][r]>=this.H[n][r]?(e="V",this.score=this.V[n][r]):(e="H",this.score=this.H[n][r]),rp&&np.log("Alignment: SCORE",this.score),rp&&np.log("Alignment: S, V, H",this.S[n][r],this.V[n][r],this.H[n][r]);n>0&&r>0;)"S"===e?t.S[n][r]===t.S[n-1][r-1]+i(n-1,r-1)?(t.ali1=t.seq1[n-1]+t.ali1,t.ali2=t.seq2[r-1]+t.ali2,--n,--r,e="S"):t.S[n][r]===t.V[n][r]?e="V":t.S[n][r]===t.H[n][r]?e="H":(--n,--r):"V"===e?t.V[n][r]===t.V[n-1][r]+t.gapExtensionPenalty?(t.ali1=t.seq1[n-1]+t.ali1,t.ali2="-"+t.ali2,--n,e="V"):t.V[n][r]===t.S[n-1][r]+t.gap(0)?(t.ali1=t.seq1[n-1]+t.ali1,t.ali2="-"+t.ali2,--n,e="S"):--n:"H"===e?t.H[n][r]===t.H[n][r-1]+t.gapExtensionPenalty?(t.ali1="-"+t.ali1,t.ali2=t.seq2[r-1]+t.ali2,--r,e="H"):t.H[n][r]===t.S[n][r-1]+t.gap(0)?(t.ali1="-"+t.ali1,t.ali2=t.seq2[r-1]+t.ali2,--r,e="S"):--r:np.error("Alignment: no matrix");for(;n>0;)t.ali1=t.seq1[n-1]+t.ali1,t.ali2="-"+t.ali2,--n;for(;r>0;)t.ali1="-"+t.ali1,t.ali2=t.seq2[r-1]+t.ali2,--r;rp&&np.timeEnd("Alignment.trace"),rp&&np.log([this.ali1,this.ali2])};var nb=function(t){function e(e){var i=this;t.call(this,e),e.scale||(this.scale="rainbow",this.reverse=gr(e.reverse,!0)),this.scalePerModel={},this.structure.eachModel(function(t){i.domain=[t.atomOffset,t.atomEnd],i.scalePerModel[t.index]=i.getScale()})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.atomColor=function(t){return this.scalePerModel[t.modelIndex](t.index)},e}(Pf);ap.add("atomindex",nb);var rb=function(t){function e(e){if(t.call(this,e),e.scale||(this.scale="OrRd"),!e.domain){var i,n=1/0,r=-1/0;e.sele&&(i=new $f(e.sele)),this.structure.eachAtom(function(t){var e=t.bfactor;n=Math.min(n,e),r=Math.max(r,e)},i),this.domain=[n,r]}this.bfactorScale=this.getScale()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.atomColor=function(t){return this.bfactorScale(t.bfactor)},e}(Pf);ap.add("bfactor",rb);var ob=function(t){function e(e){t.call(this,e),e.scale||(this.scale="Spectral");var i={},n={};this.structure.eachModel(function(t){var e=0,r={};t.eachChain(function(t){void 0===r[t.chainid]&&(r[t.chainid]=e,e+=1)}),this.domain=[0,e-1],i[t.index]=r,n[t.index]=this.getScale()}.bind(this)),this.atomColor=function(t){var e=i[t.modelIndex];return n[t.modelIndex](e[t.chainid])}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pf);ap.add("chainid",ob);var sb=function(t){function e(e){if(t.call(this,e),e.scale||(this.scale="Spectral"),e.domain){var i=this.getScale();this.atomColor=function(t){return i(t.chainIndex)}}else{var n={};this.structure.eachModel(function(t){this.domain=[t.chainOffset,t.chainEnd],n[t.index]=this.getScale()}.bind(this)),this.atomColor=function(t){return n[t.modelIndex](t.chainIndex)}}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pf);ap.add("chainindex",sb);var ab=function(t){function e(e){t.call(this,e),e.scale||(this.scale="Spectral");var i={},n={};this.structure.eachModel(function(t){var e=0,r={};t.eachChain(function(t){void 0===r[t.chainname]&&(r[t.chainname]=e,e+=1)}),this.domain=[0,e-1],i[t.index]=r,n[t.index]=this.getScale()}.bind(this)),this.atomColor=function(t){var e=i[t.modelIndex];return n[t.modelIndex](e[t.chainname])}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pf);ap.add("chainname",ab);var hb=function(t){function e(e){t.call(this,e),e.scale||(this.scale="RdYlBu"),this.rsrzScale=this.getScale({domain:[2,0]}),this.rsccScale=this.getScale({domain:[.678,1]});var i=e.structure.validation||{};this.rsrzDict=i.rsrzDict||{},this.rsccDict=i.rsccDict||{}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.atomColor=function(t){var e=t.resno;t.inscode&&(e+="^"+t.inscode),t.chainname&&(e+=":"+t.chainname),e+="/"+t.modelIndex;var i=this.rsrzDict[e];if(void 0!==i)return this.rsrzScale(i);var n=this.rsccDict[e];return void 0!==n?this.rsccScale(n):9474192},e}(Pf);ap.add("densityfit",hb);var lb={ARG:{CD:.1,CZ:.5,NE:-.1},ASN:{CG:.55,OD1:-.55},ASP:{CB:-.16,CG:.36,OD1:-.6,OD2:-.6},CYS:{CB:.19,SG:-.19},GLN:{CD:.55,OE1:-.55},GLU:{CD:.36,CG:-.16,OE1:-.6,OE2:-.6},HIS:{CB:.1,CD2:.2,CE1:.45,CG:.15,ND1:.05,NE2:.05},LYS:{CE:.25,NZ:.75},MET:{CE:.06,CG:.06,SD:-.12},PTR:{C:.55,CA:.1,CZ:.25,N:-.35,O:-.55,O1P:-.85,O2P:-.85,O3P:-.85,OG1:-1.1,P:1.4},SEP:{C:.55,CA:.1,CB:.25,N:-.35,O:-.55,O1P:-.85,O2P:-.85,O3P:-.85,OG1:-1.1,P:1.4},SER:{CB:.25,OG:-.25},THR:{CB:.25,OG1:-.25},TPO:{C:.55,CA:.1,CB:.25,N:-.35,O:-.55,OG1:-1.1,O1P:-.85,O2P:-.85,O3P:-.85,P:1.4},TRP:{CD1:.06,CD2:.1,CE2:-.04,CE3:-.03,CG:-.03,NE1:-.06},TYR:{CZ:.25,OH:-.25},backbone:{C:.55,O:-.55,N:-.35,CA:.1}},ub=12,db=1.04,cb=.25,fb=function(t){function e(e){function i(t){return t.isProtein()?lb[t.resname]&&lb[t.resname][t.atomname]||lb.backbone[t.atomname]||0:0}t.call(this,e),e.scale||(this.scale="rwb"),e.domain||(this.domain=[-.5,0,.5]);var n=this.getScale(),r=this.structure,o=new Float32Array(r.atomCount),s=[],a=[];r.eachAtom(function(t){if(o[t.index]=i(t)*t.occupancy,"N"===t.atomname){var e=Sa(t);void 0!==e&&(s.push(e),a.push(cb*t.occupancy))}});var h=this.structure.getBoundingBox();h.expandByScalar(db);var l=ka(s),u=new Ps(l,h),d=new Ps(this.structure.atomStore,h),c=this.atomProxy,f=new y,p=ub*ub;this.positionColor=function(t){for(var e=0,i=d.within(t.x,t.y,t.z,ub),r=0;r<i.length;r++){var s=i[r],h=o[s];if(0!==h){c.index=s,f.x=t.x-c.x,f.y=t.y-c.y,f.z=t.z-c.z;var m=f.lengthSq();m<p&&(e+=h/m)}}for(var v=u.within(t.x,t.y,t.z,ub),g=0;g<v.length;g++){var y=v[g];f.x=t.x-l.x[y],f.y=t.y-l.y[y],f.z=t.z-l.z[y];var b=f.lengthSq();b<p&&(e+=a[y]/b)}return n(e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pf);ap.add("electrostatic",fb);var pb={H:16777215,HE:14286847,LI:13402367,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,NE:11789301,NA:11230450,MG:9109248,AL:12560038,SI:1578e4,P:16744448,S:16777008,CL:2093087,AR:8442339,K:9388244,CA:4062976,SC:15132390,TI:12567239,V:10921643,CR:9083335,MN:10255047,FE:14706227,CO:15765664,NI:5296208,CU:13140019,ZN:8224944,GA:12750735,GE:6721423,AS:12419299,SE:16752896,BR:10889513,KR:6076625,RB:7351984,SR:65280,Y:9764863,ZR:9756896,NB:7586505,MO:5551541,TC:3907230,RU:2396047,RH:687500,PD:27013,AG:12632256,CD:16767375,IN:10909043,SN:6717568,SB:10380213,TE:13924864,I:9699476,XE:9699476,CS:5707663,BA:51456,LA:7394559,CE:16777159,PR:14286791,ND:13107143,PM:10747847,SM:9437127,EU:6422471,GD:4587463,TB:3211207,DY:2097095,HO:65436,ER:58997,TM:54354,YB:48952,LU:43812,HF:5096191,TA:5089023,W:2200790,RE:2522539,OS:2516630,IR:1528967,PT:13684960,AU:16765219,HG:12105936,TL:10900557,PB:5724513,BI:10375093,PO:11230208,AT:7688005,RN:4358806,FR:4325478,RA:32e3,AC:7384058,TH:47871,PA:41471,U:36863,NP:33023,PU:27647,AM:5528818,CM:7888099,BK:9064419,CF:10565332,ES:11739092,FM:11739066,MD:11734438,NO:12389767,LR:13041766,RF:13369433,DB:13697103,SG:14221381,BH:14680120,HS:15073326,MT:15400998,DS:16777215,RG:16777215,CN:16777215,UUT:16777215,FL:16777215,UUP:16777215,LV:16777215,UUH:16777215,D:16777152,T:16777120},mb=function(t){function e(e){var i=e||{};i.value=gr(i.value,pb.C),t.call(this,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.atomColor=function(t){var e=t.element;return"C"===e?this.value:pb[e]||16777215},e}(Pf);ap.add("element",mb);var vb=function(t){function e(e){t.call(this,e),e.scale||(this.scale="Spectral"),e.domain||(this.domain=[0,this.structure.entityList.length-1]);var i=this.getScale();this.atomColor=function(t){return i(t.entityIndex)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pf);ap.add("entityindex",vb);var gb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.atomColor=function(t){var e=t.entity;switch(e?e.entityType:void 0){case hv:return 8374655;case lv:return 16629894;case uv:return 12496596;case dv:return 3697840;default:return 16777113}},e}(Pf);ap.add("entitytype",gb);var yb=function(t){function e(e){t.call(this,e);var i=e.structure.validation||{};this.geoAtomDict=i.geoAtomDict||{},this.geoDict=i.geoDict||{}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.atomColor=function(t){var e=t.resno;t.inscode&&(e+="^"+t.inscode),t.chainname&&(e+=":"+t.chainname),e+="/"+t.modelIndex;var i,n=this.geoAtomDict[e];if(void 0!==n){i=Wr(n[t.atomname]||0)}else i=this.geoDict[e]||0;return 0===i?2188972:1===i?16703627:2===i?16018755:i>=3?10813478:9474192},e}(Pf);ap.add("geoquality",yb);var bb=function(t){function e(e){t.call(this,e),e.scale||(this.scale="RdYlGn");var i,n={};for(i in Ev)n[i]=Ev[i][0];if(!e.domain){var r,o=1/0,s=-1/0;for(i in n)r=n[i],o=Math.min(o,r),s=Math.max(s,r);this.domain=[o,0,s]}var a=this.getScale();this.atomColor=function(t){return a(n[t.resname]||Mv)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pf);ap.add("hydrophobicity",bb);var _b=function(t){function e(e){t.call(this,e),e.scale||(this.scale="rainbow"),e.domain||(this.domain=[0,this.structure.modelStore.count]);var i=this.getScale();this.atomColor=function(t){return i(t.modelIndex)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pf);ap.add("modelindex",_b);var wb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.atomColor=function(t){switch(t.residueType.moleculeType){case 1:return 3697840;case 2:return 15729279;case 3:return 12496596;case 4:return 16629894;case 5:return 12540695;case 6:return 8374655;default:return 16777113}},e}(Pf);ap.add("moleculetype",wb);var xb=function(t){function e(e){t.call(this,e),e.scale||(this.scale="PuBu"),e.domain||(this.domain=[0,1]);var i=this.getScale();this.atomColor=function(t){return i(t.occupancy)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pf);ap.add("occupancy",xb);var Sb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.atomColor=function(){return Ea()},e.prototype.volumeColor=function(){return Ea()},e.prototype.positionColor=function(){return Ea()},e}(Pf);ap.add("random",Sb);var kb=function(t){function e(e){var i=this;if(t.call(this,e),e.scale||(this.scale="rainbow",this.reverse=gr(e.reverse,!0)),e.domain){var n=this.getScale();this.atomColor=function(t){return n(t.residueIndex)}}else{var r={};this.structure.eachChain(function(t){i.domain=[t.residueOffset,t.residueEnd],r[t.index]=i.getScale()}),this.atomColor=function(t){return r[t.chainIndex](t.residueIndex)}}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pf);ap.add("residueindex",kb);var Eb={ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935,ASH:16711935,GLH:16711935,A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576,DA:10526975,DG:16740464,DI:8454143,DC:16747595,DT:10551200,DU:16744576},Mb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.atomColor=function(t){return Eb[t.resname]||16711935},e}(Pf);ap.add("resname",Mb);var Tb={alphaHelix:16711808,threeTenHelix:10485888,piHelix:6291584,betaStrand:16762880,betaTurn:6324479,coil:16777215,dna:11403518,rna:16580962,carbohydrate:10921722},Cb=function(t){function e(e){t.call(this,e),this.rp=this.structure.getResidueProxy()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.atomColor=function(t){var e=t.sstruc,i=this.rp;return"h"===e?Tb.alphaHelix:"g"===e?Tb.threeTenHelix:"i"===e?Tb.piHelix:"e"===e||"b"===e?Tb.betaStrand:"t"===e?Tb.betaTurn:(i.index=t.residueIndex,i.isDna()?Tb.dna:i.isRna()?Tb.rna:i.isSaccharide()?Tb.carbohydrate:i.isProtein()||"s"===e||"l"===e?Tb.coil:8421504)},e}(Pf);ap.add("sstruc",Cb);var Ob=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.atomColor=function(){return this.value},e.prototype.bondColor=function(){return this.value},e.prototype.valueColor=function(){return this.value},e.prototype.volumeColor=function(){return this.value},e}(Pf);ap.add("uniform",Ob);var Pb=function(t){function e(e){t.call(this,e),this.valueScale=this.getScale()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.volumeColor=function(t){return this.valueScale(this.volume.data[t])},e}(Pf);ap.add("value",Pb);var Ab=function(t){function e(e){t.call(this,e);var i=this.volume;if(i&&i.inverseMatrix){var n=this.getScale(),r=i.inverseMatrix,o=i.data,s=i.nx,a=i.ny,h=s*a,l=new y;this.positionColor=function(t){l.copy(t),l.applyMatrix4(r);var e=Math.floor(l.x),i=Math.floor(l.y),u=Math.floor(l.z),d=(u*a+i)*s+e,c=d+1,f=d+s,p=d+h,m=f+1,v=p+1,g=f+h,y=g+1,b=o[d],_=o[c],w=o[f],x=o[p],S=o[m],k=o[v],E=o[g],M=o[y],T=l.x-e,C=l.y-i,O=l.z-u,P=Zr(b,_,T),A=Zr(x,k,T),D=Zr(w,S,T),I=Zr(E,M,T),R=Zr(P,D,C),L=Zr(A,I,C),N=Zr(R,L,O);return n(N)}}else{var u=this.value;this.positionColor=function(){return u}}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.positionColor=function(){},e}(Pf);ap.add("volume",Ab);var Db=function(t){function e(e,i,n){var r=this,o=n||{};o.name=gr(o.name,i.name),t.call(this,e,o),this.script=i,this.status="loaded",this.script.signals.nameChanged.add(function(t){r.setName(t)})}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"script"},e.prototype.addRepresentation=function(){},e.prototype.removeRepresentation=function(){},e.prototype.run=function(){var t=this;this.setStatus("running"),this.script.call(this.stage).then(function(){t.setStatus("finished")}),this.setStatus("called")},e.prototype.dispose=function(){this.signals.disposed.dispatch()},e.prototype.setVisibility=function(){},e.prototype.getCenter=function(){},e.prototype.getZoom=function(){},e.prototype.getBox=function(){},Object.defineProperties(e.prototype,i),e}(Wy);fp.add("script",Db);var Ib=function(t){function e(e,i,n){var r=n||{};r.name=gr(r.name,i.name),t.call(this,e,r),this.shape=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"shape"},e.prototype.addRepresentation=function(e,i){return t.prototype.addRepresentation.call(this,e,this.shape,i)},e.prototype.getBoxUntransformed=function(){return this.shape.boundingBox},e.prototype.getCenterUntransformed=function(){return this.shape.center},e.prototype.dispose=function(){this.shape.dispose(),t.prototype.dispose.call(this)},Object.defineProperties(e.prototype,i),e}(Wy);fp.add("shape",Ib);var Rb=function(t){function e(e,i,n,r){var o=this,s=n||{};s.name=gr(s.name,i.name),t.call(this,e,s),this.signals=Object.assign(this.signals,{frameChanged:new io,playerChanged:new io,gotNumframes:new io,parametersChanged:new io}),this.trajectory=i,this.parent=r,this.status="loaded",this.defaultStep=gr(s.defaultStep,void 0),this.defaultTimeout=gr(s.defaultTimeout,50),this.defaultInterpolateType=gr(s.defaultInterpolateType,""),this.defaultInterpolateStep=gr(s.defaultInterpolateStep,5),this.defaultMode=gr(s.defaultMode,"loop"),this.defaultDirection=gr(s.defaultDirection,"forward"),i.signals.frameChanged.add(function(t){o.signals.frameChanged.dispatch(t)}),i.signals.playerChanged.add(function(t){o.signals.playerChanged.dispatch(t)}),i.signals.gotNumframes.add(function(t){o.signals.gotNumframes.dispatch(t)}),void 0!==s.initialFrame&&this.setFrame(s.initialFrame)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"trajectory"},e.prototype.addRepresentation=function(e,i){return t.prototype.addRepresentation.call(this,e,this.trajectory,i)},e.prototype.setFrame=function(t){this.trajectory.setFrame(t)},e.prototype.setParameters=function(t){this.trajectory.setParameters(t),this.signals.parametersChanged.dispatch(t)},e.prototype.dispose=function(){this.trajectory.dispose(),t.prototype.dispose.call(this)},e.prototype.getCenter=function(){},Object.defineProperties(e.prototype,i),e}(Wy),Lb=function(t){function e(e,i,n){t.call(this,"",i,n),this.name=e.name,this.path=e.path,this.frames=e.coordinates,this.boxes=e.boxes,this.getNumframes()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"frames"},e.prototype.makeAtomIndices=function(){"StructureView"===this.structure.type?this.atomIndices=this.structure.getAtomIndices():this.atomIndices=null},e.prototype._loadFrame=function(t,e){var i,n=this.frames[t];if(this.atomIndices){var r=this.atomIndices,o=r.length;i=new Float32Array(3*o);for(var s=0;s<o;++s){var a=3*s,h=3*r[s];i[a+0]=n[h+0],i[a+1]=n[h+1],i[a+2]=n[h+2]}}else i=new Float32Array(n);var l=this.boxes[t],u=this.frames.length;this.process(t,l,i,u),"function"===typeof e&&e()},e.prototype.getNumframes=function(){this.frames&&this.setNumframes(this.frames.length)},e.prototype.getPath=function(t,e){var i,n,r,o=this,s=this.numframes,a=3*t,h=new Float32Array(3*s);for(i=0;i<s;++i)n=3*i,r=o.frames[i],h[n+0]=r[a+0],h[n+1]=r[a+1],h[n+2]=r[a+2];e(h)},Object.defineProperties(e.prototype,i),e}(Ag),Nb=function(t){function e(e,i,n){t.call(this,"",i,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"structure"},e.prototype.makeAtomIndices=function(){this.structure.atomSet.getSize()<this.structure.atomStore.count?this.atomIndices=this.structure.getAtomIndices():this.atomIndices=null},e.prototype._loadFrame=function(t,e){var i,n=this.structure,r=n.frames[t];if(this.atomIndices){var o=this.atomIndices,s=o.length;i=new Float32Array(3*s);for(var a=0;a<s;++a){var h=3*a,l=3*o[a];i[h+0]=r[l+0],i[h+1]=r[l+1],i[h+2]=r[l+2]}}else i=new Float32Array(r);var u=n.boxes[t],d=n.frames.length;this.process(t,u,i,d),"function"===typeof e&&e()},e.prototype.getNumframes=function(){this.setNumframes(this.structure.frames.length)},e.prototype.getPath=function(t,e){var i,n,r,o=this,s=this.numframes,a=3*t,h=new Float32Array(3*s);for(i=0;i<s;++i)n=3*i,r=o.structure.frames[i],h[n+0]=r[a+0],h[n+1]=r[a+1],h[n+2]=r[a+2];e(h)},Object.defineProperties(e.prototype,i),e}(Ag),Fb=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"remote"},e.prototype.makeAtomIndices=function(){var t=[];if("StructureView"===this.structure.type){var e,i,n=this.structure.getAtomIndices(),r=n[0],o=n[0],s=n.length;for(e=1;e<s;++e)i=n[e],o+1<i&&(t.push([r,o+1]),r=i),o=i;t.push([r,o+1])}else t.push([0,this.atomCount]);this.atomIndices=t},e.prototype._loadFrame=function(t,e){var i=new window.XMLHttpRequest,n=hp.trajectory,r=n.getFrameUrl(this.trajPath,t),o=n.getFrameParams(this.trajPath,this.atomIndices);i.open("POST",r,!0),i.responseType="arraybuffer",i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.addEventListener("load",function(){var n=i.response;if(!n)return void np.error("empty arrayBuffer for '"+r+"'");var o=new Int32Array(n,0,1)[0],s=new Float32Array(n,8,9),a=new Float32Array(n,44);this.process(t,s,a,o),"function"===typeof e&&e()}.bind(this),!1),i.send(o)},e.prototype.getNumframes=function(){var t=new window.XMLHttpRequest,e=hp.trajectory,i=e.getNumframesUrl(this.trajPath);t.open("GET",i,!0),t.addEventListener("load",function(){this.setNumframes(parseInt(t.response))}.bind(this),!1),t.send(null)},e.prototype.getPath=function(t,e){if(this.pathCache[t])return void e(this.pathCache[t]);np.time("loadPath");var i=new window.XMLHttpRequest,n=hp.trajectory,r=n.getPathUrl(this.trajPath,t);i.open("POST",r,!0),i.responseType="arraybuffer",i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.addEventListener("load",function(){np.timeEnd("loadPath");var n=i.response;if(!n)return void np.error("empty arrayBuffer for '"+r+"'");var o=new Float32Array(n);this.pathCache[t]=o,e(o)}.bind(this),!1),i.send("")},Object.defineProperties(e.prototype,i),e}(Ag);Tg.prototype.getView=function(t){return new zb(this,t)};var zb=function(t){function e(e,i){t.call(this),this.structure=e,this.selection=i,this.center=new y,this.boundingBox=new lt,this._bp=this.getBondProxy(),this._ap=this.getAtomProxy(),this._rp=this.getResidueProxy(),this._cp=this.getChainProxy(),this.selection&&this.selection.signals.stringChanged.add(this.refresh,this),this.structure.signals.refreshed.add(this.refresh,this),this.refresh()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{},name:{},path:{},title:{},id:{},atomSetDict:{},biomolDict:{},entityList:{},unitcell:{},frames:{},boxes:{},validation:{},bondStore:{},backboneBondStore:{},rungBondStore:{},atomStore:{},residueStore:{},chainStore:{},modelStore:{},atomMap:{},residueMap:{},bondHash:{},spatialHash:{}};return e.prototype.init=function(){},i.type.get=function(){return"StructureView"},i.name.get=function(){return this.structure.name},i.path.get=function(){return this.structure.path},i.title.get=function(){return this.structure.title},i.id.get=function(){return this.structure.id},i.atomSetDict.get=function(){return this.structure.atomSetDict},i.biomolDict.get=function(){return this.structure.biomolDict},i.entityList.get=function(){return this.structure.entityList},i.unitcell.get=function(){return this.structure.unitcell},i.frames.get=function(){return this.structure.frames},i.boxes.get=function(){return this.structure.boxes},i.validation.get=function(){return this.structure.validation},i.bondStore.get=function(){return this.structure.bondStore},i.backboneBondStore.get=function(){return this.structure.backboneBondStore},i.rungBondStore.get=function(){return this.structure.rungBondStore},i.atomStore.get=function(){return this.structure.atomStore},i.residueStore.get=function(){return this.structure.residueStore},i.chainStore.get=function(){return this.structure.chainStore},i.modelStore.get=function(){return this.structure.modelStore},i.atomMap.get=function(){return this.structure.atomMap},i.residueMap.get=function(){return this.structure.residueMap},i.bondHash.get=function(){return this.structure.bondHash},i.spatialHash.get=function(){return this.structure.spatialHash},e.prototype.refresh=function(){var t=this;rp&&np.time("StructureView.refresh"),this.atomSetCache={},this.atomSet=this.getAtomSet(this.selection,!0),this.structure.atomSet&&(this.atomSet=this.atomSet.intersection(this.structure.atomSet)),this.bondSet=this.getBondSet();for(var e in t.atomSetDict){var i=t.atomSetDict[e];t.atomSetCache["__"+e]=i.makeIntersection(t.atomSet)}this.atomCount=this.atomSet.getSize(),this.bondCount=this.bondSet.getSize(),this.boundingBox=this.getBoundingBox(),this.center=this.boundingBox.getCenter(),rp&&np.timeEnd("StructureView.refresh"),this.signals.refreshed.dispatch()},e.prototype.setSelection=function(t){this.selection=t,this.refresh()},e.prototype.getSelection=function(t){var e=[];t&&t.string&&e.push(t.string);var i=this.structure.getSelection();i&&i.string&&e.push(i.string),this.selection&&this.selection.string&&e.push(this.selection.string);var n="";return e.length>0&&(n="( "+e.join(" ) AND ( ")+" )"),new $f(n)},e.prototype.getStructure=function(){return this.structure.getStructure()},e.prototype.eachBond=function(t,e){this.structure.eachBond(t,this.getSelection(e))},e.prototype.eachAtom=function(t,e){var i=this.getAtomProxy(),n=this.getAtomSet(e),r=this.atomStore.count;if(n.getSize()<r)n.forEach(function(e){i.index=e,t(i)});else for(var o=0;o<r;++o)i.index=o,t(i)},e.prototype.eachResidue=function(t,e){this.structure.eachResidue(t,this.getSelection(e))},e.prototype.eachResidueN=function(){console.error("StructureView.eachResidueN() not implemented")},e.prototype.eachChain=function(t,e){this.structure.eachChain(t,this.getSelection(e))},e.prototype.eachModel=function(t,e){this.structure.eachModel(t,this.getSelection(e))},e.prototype.getAtomSet=function(t,e){var i=this.structure.getAtomSet(t);return!e&&this.atomSet&&(i=i.makeIntersection(this.atomSet)),i},e.prototype.getAtomIndices=function(t){return this.structure.getAtomIndices(this.getSelection(t))},e.prototype.refreshPosition=function(){return this.structure.refreshPosition()},e.prototype.dispose=function(){this.selection&&this.selection.signals.stringChanged.remove(this.refresh,this),this.structure.signals.refreshed.remove(this.refresh,this),delete this.structure,delete this.atomSet,delete this.bondSet,delete this.atomCount,delete this.bondCount},Object.defineProperties(e.prototype,i),e}(Tg),Bb=function(t){function e(e,i,n){var r=n||{};r.name=gr(r.name,i.name),t.call(this,e,r),this.signals=Object.assign(this.signals,{trajectoryAdded:new io,trajectoryRemoved:new io,defaultAssemblyChanged:new io}),this.structure=i,this.trajList=[],this.initSelection(r.sele),this.setDefaultAssembly(r.assembly||"")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"structure"},e.prototype.initSelection=function(t){var e=this;this.selection=new $f(t),this.structureView=new zb(this.structure,this.selection),this.selection.signals.stringChanged.add(function(){e.structureView.setSelection(e.selection),e.rebuildRepresentations(),e.rebuildTrajectories()})},e.prototype.setSelection=function(t){return this.selection.setString(t),this},e.prototype.setDefaultAssembly=function(t){var e=this;this.defaultAssembly=t,this.reprList.forEach(function(t){t.setParameters({defaultAssembly:e.defaultAssembly})}),this.signals.defaultAssemblyChanged.dispatch(t)},e.prototype.rebuildRepresentations=function(){this.reprList.forEach(function(t){t.build()})},e.prototype.rebuildTrajectories=function(){var t=this;this.trajList.slice().forEach(function(e){e.trajectory.setStructure(t.structureView)})},e.prototype.addRepresentation=function(e,i){var n=i||{};return n.defaultAssembly=this.defaultAssembly,t.prototype.addRepresentation.call(this,e,this.structureView,n)},e.prototype.addTrajectory=function(t,e){var i=this,n=Ma(t,this.structureView,e);n.signals.frameChanged.add(function(){i.updateRepresentations({position:!0})});var r=new Rb(this.stage,n,e,this);return this.trajList.push(r),this.signals.trajectoryAdded.dispatch(r),r},e.prototype.removeTrajectory=function(t){var e=this.trajList.indexOf(t);-1!==e&&this.trajList.splice(e,1),t.dispose(),this.signals.trajectoryRemoved.dispatch(t)},e.prototype.dispose=function(){this.trajList.slice().forEach(function(t){t.dispose()}),this.trajList.length=0,this.structure.dispose(),t.prototype.dispose.call(this)},e.prototype.autoView=function(t,e){Number.isInteger(t)&&(e=t,t=void 0),this.stage.animationControls.zoomMove(this.getCenter(t),this.getZoom(t),gr(e,0))},e.prototype.getBoxUntransformed=function(t){return t?this.structureView.getBoundingBox(new $f(t)):this.structureView.boundingBox},e.prototype.getCenterUntransformed=function(t){return t&&"string"===typeof t?this.structure.atomCenter(new $f(t)):this.structure.center},e.prototype.superpose=function(t,e,i,n){return xa(this.structureView,t.structureView,e,i,n),this.updateRepresentations({position:!0}),this},e.prototype.setVisibility=function(e){return t.prototype.setVisibility.call(this,e),this.trajList.forEach(function(t){t.setVisibility(e)}),this},Object.defineProperties(e.prototype,i),e}(Wy);fp.add("structure",Bb),fp.add("structureview",Bb);var jb=function(t){function e(e,i,n){var r=n||{};r.name=gr(r.name,i.name),t.call(this,e,r),this.surface=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"surface"},e.prototype.addRepresentation=function(e,i){return t.prototype.addRepresentation.call(this,e,this.surface,i)},e.prototype.getBoxUntransformed=function(){return this.surface.boundingBox},e.prototype.getCenterUntransformed=function(){return this.surface.center},e.prototype.dispose=function(){this.surface.dispose(),t.prototype.dispose.call(this)},Object.defineProperties(e.prototype,i),e}(Wy);fp.add("surface",jb);var Ub=function(t){function e(e,i,n){var r=n||{};r.name=gr(r.name,i.name),t.call(this,e,r),this.volume=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"volume"},e.prototype.addRepresentation=function(e,i){return t.prototype.addRepresentation.call(this,e,this.volume,i)},e.prototype.getBoxUntransformed=function(){return this.volume.boundingBox},e.prototype.getCenterUntransformed=function(){return this.volume.center},e.prototype.dispose=function(){this.volume.dispose(),t.prototype.dispose.call(this)},Object.defineProperties(e.prototype,i),e}(Wy);fp.add("volume",Ub);var Hb=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="axes",this.parameters=Object.assign({radius:{type:"number",precision:3,max:10,min:.001},sphereDetail:!0,radialSegments:!0,disableImpostor:!0,showAxes:{type:"boolean",rebuild:!0},showBox:{type:"boolean",rebuild:!0}},this.parameters,{assembly:null}),this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.radius=gr(i.radius,.5),i.colorValue=gr(i.colorValue,"lightgreen"),this.showAxes=gr(i.showAxes,!0),this.showBox=gr(i.showBox,!1),t.prototype.init.call(this,i)},e.prototype.getPrincipalAxes=function(){var t,e=this.getAssembly();return e&&(t=e.partList[0].getSelection()),this.structureView.getPrincipalAxes(t)},e.prototype.getAxesData=function(t){var e=this.getPrincipalAxes(t),i=new it(this.colorValue),n=0,r=0;this.showAxes&&(n+=6,r+=3),this.showBox&&(n+=8,r+=12);var o=new Float32Array(3*n),s=bo(n,i.r,i.g,i.b),a=yo(n,this.radius),h=new Float32Array(3*r),l=new Float32Array(3*r),u=bo(r,i.r,i.g,i.b),d=yo(r,this.radius),c=0;if(this.showAxes){var f=function(t,e){t.toArray(o,2*c),e.toArray(o,2*c+3),t.toArray(h,c),e.toArray(l,c),c+=3};f(e.begA,e.endA),f(e.begB,e.endB),f(e.begC,e.endC)}if(this.showBox){var p=new y,m=e.getProjectedScaleForAtoms(t),v=m.d1a,g=m.d2a,b=m.d3a,_=m.d1b,w=m.d2b,x=m.d3b;console.log(v,g,b,_,w,x);var S=2*c,k=function(t,i,n){p.copy(e.center).addScaledVector(e.normVecA,t).addScaledVector(e.normVecB,i).addScaledVector(e.normVecC,n),p.toArray(o,S),S+=3};k(v,g,b),k(v,g,x),k(v,w,x),k(v,w,b),k(_,w,x),k(_,w,b),k(_,g,b),k(_,g,x);var E=c,M=function(t,e){p.fromArray(o,2*c+3*t).toArray(h,E),p.fromArray(o,2*c+3*e).toArray(l,E),E+=3};M(0,1),M(0,3),M(0,6),M(1,2),M(1,7),M(2,3),M(2,4),M(3,5),M(4,5),M(4,7),M(5,6),M(6,7)}var T=new Ym(e);return{vertex:{position:o,color:s,radius:a,picking:T},edge:{position1:h,position2:l,color:u,color2:u,radius:d,picking:T}}},e.prototype.create=function(){var t=this.getAxesData(this.structureView);this.sphereBuffer=new Yg(t.vertex,this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0})),this.cylinderBuffer=new hy(t.edge,this.getBufferParams({openEnded:!0,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0})),this.dataList.push({sview:this.structureView,bufferList:[this.sphereBuffer,this.cylinderBuffer]})},e.prototype.updateData=function(t,e){var i=this.getAxesData(e.sview),n={},r={};t&&!t.position||(n.position=i.vertex.position,r.position1=i.edge.position1,r.position2=i.edge.position2),t&&!t.color||(n.color=i.vertex.color,r.color=i.edge.color,r.color2=i.edge.color),t&&!t.radius||(n.radius=i.vertex.radius,r.radius=i.edge.radius),this.sphereBuffer.setAttributes(n),this.cylinderBuffer.setAttributes(r)},e}(By);lp.add("axes",Hb);var Vb=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="ball+stick",this.parameters=Object.assign({sphereDetail:!0,radialSegments:!0,openEnded:!0,disableImpostor:!0,aspectRatio:{type:"number",precision:1,max:10,min:1},lineOnly:{type:"boolean",rebuild:!0},cylinderOnly:{type:"boolean",rebuild:!0},multipleBond:{type:"select",rebuild:!0,options:{off:"off",symmetric:"symmetric",offset:"offset"}},bondScale:{type:"number",precision:2,max:1,min:.01},bondSpacing:{type:"number",precision:2,max:2,min:.5}},this.parameters),this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.radius=gr(i.radius,.15),this.aspectRatio=gr(i.aspectRatio,2),this.lineOnly=gr(i.lineOnly,!1),this.cylinderOnly=gr(i.cylinderOnly,!1),this.multipleBond=gr(i.multipleBond,"off"),this.bondSpacing=gr(i.bondSpacing,1),this.bondScale=gr(i.bondScale,.4),t.prototype.init.call(this,i)},e.prototype.getAtomParams=function(e,i){return i=Object.assign({radiusParams:{radius:this.radius,scale:this.scale*this.aspectRatio}},i),t.prototype.getAtomParams.call(this,e,i)},e.prototype.getAtomData=function(t,e,i){return t.getAtomData(this.getAtomParams(e,i))},e.prototype.getBondParams=function(e,i){return i=Object.assign({multipleBond:this.multipleBond,bondSpacing:this.bondSpacing,bondScale:this.bondScale},i),t.prototype.getBondParams.call(this,e,i)},e.prototype.getBondData=function(t,e,i){return t.getBondData(this.getBondParams(e,i))},e.prototype.createData=function(t){var e=this.getBondData(t),i=[];if(this.lineOnly)this.lineBuffer=new jy(e,this.getBufferParams()),i.push(this.lineBuffer);else{var n=new hy(e,this.getBufferParams({openEnded:this.openEnded,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0}));if(i.push(n),!this.cylinderOnly){var r=new Yg(this.getAtomData(t),this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0}));i.push(r)}}return{bufferList:i}},e.prototype.updateData=function(t,e){"off"!==this.multipleBond&&t&&t.radius&&(t.position=!0);var i=this.getBondData(e.sview,t);if(this.lineOnly){var n={};t&&!t.position||(n.position1=i.position1,n.position2=i.position2),t&&!t.color||(n.color=i.color,n.color2=i.color2),e.bufferList[0].setAttributes(n)}else{var r={};if(t&&!t.position||(r.position1=i.position1,r.position2=i.position2),t&&!t.color||(r.color=i.color,r.color2=i.color2),t&&!t.radius||(r.radius=i.radius),e.bufferList[0].setAttributes(r),!this.cylinderOnly){var o=this.getAtomData(e.sview,t),s={};t&&!t.position||(s.position=o.position),t&&!t.color||(s.color=o.color),t&&!t.radius||(s.radius=o.radius),e.bufferList[1].setAttributes(s)}}},e.prototype.setParameters=function(e){var i=!1,n={};return e&&(e.aspectRatio||e.bondSpacing||e.bondScale)&&(n.radius=!0,ip&&!this.disableImpostor||(i=!0)),t.prototype.setParameters.call(this,e,n,i),this},e}(By);lp.add("ball+stick",Vb);var Gb=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="backbone",this.parameters=Object.assign({},this.parameters,{multipleBond:null,bondSpacing:null}),this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.aspectRatio=gr(i.aspectRatio,1),i.radius=gr(i.radius,.25),t.prototype.init.call(this,i)},e.prototype.getAtomData=function(t,e,i){return t.getBackboneAtomData(this.getAtomParams(e,i))},e.prototype.getBondData=function(t,e,i){return t.getBackboneBondData(this.getBondParams(e,i))},e}(Vb);lp.add("backbone",Gb);var Wb=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="base",this.parameters=Object.assign({},this.parameters,{multipleBond:null,bondSpacing:null})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.aspectRatio=gr(i.aspectRatio,1),i.radius=gr(i.radius,.3),t.prototype.init.call(this,i)},e.prototype.getAtomData=function(t,e,i){return t.getRungAtomData(this.getAtomParams(e,i))},e.prototype.getBondData=function(t,e,i){var n=this.getBondParams(e,i);return n.colorParams.rung=!0,t.getRungBondData(n)},e}(Vb);lp.add("base",Wb),Ca.prototype={constructor:Ca,getAtomIterator:function(t,e){function i(){var t=this.get(l);return l+=1,t}function n(i){var n=u[h%4];if(n.index=o.getAtomIndexByType(i,t),e&&i>0&&i<a&&"e"===n.sstruc){var r=d[h%4];return c.index=o.getAtomIndexByType(i+1,t),f.index=o.getAtomIndexByType(i-1,t),r.addVectors(c,f).add(n).add(n).multiplyScalar(.25),h+=1,r}return h+=1,n}function r(){h=0,l=-1}var o=this.polymer,s=o.structure,a=o.residueCount,h=0,l=-1,u=[s.getAtomProxy(),s.getAtomProxy(),s.getAtomProxy(),s.getAtomProxy()],d=[new y,new y,new y,new y],c=s.getAtomProxy(),f=s.getAtomProxy();return{size:a,next:i,get:n,reset:r}},getSubdividedColor:function(t){function e(t,e,i){u.atomColorToArray(t,e,i)}var i=this.subdiv,n=this.polymer,r=n.residueCount,o=r-1,s=o*i*3+3;n.isCyclic&&(s+=3*i);var a=new Float32Array(s),h=this.getAtomIterator("trace"),l=t||{};l.structure=n.structure;var u=ap.getScheme(l);return this.interpolator.getColor(h,e,a,0,n.isCyclic),{color:a}},getSubdividedPicking:function(){function t(t){return t.index}var e=this.subdiv,i=this.polymer,n=i.residueCount,r=n-1,o=r*e+1;i.isCyclic&&(o+=e);var s=i.structure,a=this.getAtomIterator("trace"),h=new Float32Array(o);return this.interpolator.getPicking(a,t,h,0,i.isCyclic),{picking:new Wm(h,s)}},getSubdividedPosition:function(){return{position:this.getPosition()}},getSubdividedOrientation:function(){var t=this.getTangent(),e=this.getNormals(t);return{tangent:t,normal:e.normal,binormal:e.binormal}},getSubdividedSize:function(t,e){function i(t){return u.atomRadius(t)}var n=this.subdiv,r=this.polymer,o=r.residueCount,s=o-1,a=s*n+1;r.isCyclic&&(a+=n);var h=new Float32Array(a),l=this.getAtomIterator("trace"),u=new hs(t,e);return this.interpolator.getSize(l,i,h,0,r.isCyclic),{size:h}},getPosition:function(){var t=this.subdiv,e=this.polymer,i=e.residueCount,n=i-1,r=n*t*3+3;e.isCyclic&&(r+=3*t);var o=new Float32Array(r),s=this.positionIterator||this.getAtomIterator("trace",this.smoothSheet);return this.interpolator.getPosition(s,o,0,e.isCyclic),o},getTangent:function(){var t=this.subdiv,e=this.polymer,i=this.size,n=i-1,r=n*t*3+3;e.isCyclic&&(r+=3*t);var o=new Float32Array(r),s=this.positionIterator||this.getAtomIterator("trace",this.smoothSheet);return this.interpolator.getTangent(s,o,0,e.isCyclic),o},getNormals:function(t){var e=this.subdiv,i=this.polymer,n=i.isProtein(),r=this.size,o=r-1,s=o*e*3+3;i.isCyclic&&(s+=3*e);var a=new Float32Array(s),h=new Float32Array(s);if(this.directional&&!this.polymer.isCg()){var l=this.getAtomIterator("direction1"),u=this.getAtomIterator("direction2");this.interpolator.getNormalDir(l,u,t,a,h,0,i.isCyclic,n)}else this.interpolator.getNormal(r,t,a,h,0,i.isCyclic,n);return{normal:a,binormal:h}}};var Yb=new y,$b=new y,qb=function(t){function e(e,i){var n=e||{},r=i||{},o=gr(r.radialSegments,4),s=gr(r.capped,!1),a=s?o:0,h=s?o-2:0,l=n.position.length/3,u=l-1,d=l*o*3+2*a*3,c=2*u*o*3+2*h*3,f=new Float32Array(d),p=new Float32Array(d),m=new Float32Array(d),v=Or(c,d/3);t.call(this,{position:f,color:p,index:v,normal:m,picking:n.picking},r),this.aspectRatio=gr(r.aspectRatio,1),this.radialSegments=o,this.capped=s,this.capVertices=a,this.capTriangles=h,this.size2=l,n.primitiveId=wo(l),this.setAttributes(n),this.meshIndex=v,this.makeIndex()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setAttributes=function(t){var e,i,n,r,o,s,a,h,l,u,d,c=this.aspectRatio,f=this.size2,p=f-1,m=this.radialSegments,v=this.geometry.attributes;t.position&&(e=t.position,i=t.normal,n=t.binormal,r=t.tangent,s=t.size,h=v.position.array,u=v.normal.array,v.position.needsUpdate=!0,v.normal.needsUpdate=!0),t.color&&(o=t.color,l=v.color.array,v.color.needsUpdate=!0),t.primitiveId&&(a=t.primitiveId,d=v.primitiveId.array,v.primitiveId.needsUpdate=!0);var g,y,b,_,w,x,S,k,E,M,T,C,O,P,A,D,I,R,L,N,F,z,B,j=[],U=[],H=[],V=[],G=[],W=[];if(e)for(y=0;y<m;++y)S=y/m*2*Math.PI,j[y]=c*Math.cos(S),U[y]=Math.sin(S),H[y]=c*Math.cos(S-.01),V[y]=Math.sin(S-.01),G[y]=c*Math.cos(S+.01),W[y]=Math.sin(S+.01);for(g=0;g<f;++g)for(b=3*g,_=b*m,e&&(Yb.set(r[b],r[b+1],r[b+2]),A=i[b],D=i[b+1],I=i[b+2],R=n[b],L=n[b+1],N=n[b+2],F=e[b],z=e[b+1],B=e[b+2],P=s[g]),y=0;y<m;++y)w=_+3*y,e&&(k=-P*j[y],E=P*U[y],M=-P*H[y],T=P*V[y],C=-P*G[y],O=P*W[y],h[w]=F+k*A+E*R,h[w+1]=z+k*D+E*L,h[w+2]=B+k*I+E*N,$b.set(C*A+O*R-(M*A+T*R),C*D+O*L-(M*D+T*L),C*I+O*N-(M*I+T*N)).cross(Yb),u[w]=$b.x,u[w+1]=$b.y,u[w+2]=$b.z),o&&(l[w]=o[b],l[w+1]=o[b+1],l[w+2]=o[b+2]),a&&(d[g*m+y]=a[g]);for(b=0,_=3*f*m,y=0;y<m;++y)w=b+3*y,x=_+3*y,e&&(h[x]=h[w],h[x+1]=h[w+1],h[x+2]=h[w+2],u[x]=r[b],u[x+1]=r[b+1],u[x+2]=r[b+2]),o&&(l[x]=l[w],l[x+1]=l[w+1],l[x+2]=l[w+2]),a&&(d[f*m+y]=d[0+y]);for(b=3*(f-1)*m,_=3*(f+1)*m,y=0;y<m;++y)w=b+3*y,x=_+3*y,e&&(h[x]=h[w],h[x+1]=h[w+1],h[x+2]=h[w+2],u[x]=r[3*p],u[x+1]=r[3*p+1],u[x+2]=r[3*p+2]),o&&(l[x]=l[w],l[x+1]=l[w+1],l[x+2]=l[w+2]),a&&(d[(f+1)*m+y]=d[(f-1)*m+y])},e.prototype.makeIndex=function(){var t,e,i,n,r,o,s=this.meshIndex,a=this.size2,h=a-1,l=this.capTriangles,u=this.radialSegments,d=this.radialSegments+1;for(t=0;t<h;++t)for(e=t*u*3*2,i=t*u,n=(t+1)*u,o=0;o<u;++o)r=e+3*o*2,s[r]=i+o,s[r+1]=i+(o+1)%u,s[r+2]=n+o,s[r+3]=n+o,s[r+4]=i+(o+1)%u,s[r+5]=n+(o+1)%u;var c=[0];for(o=1;o<d/2;++o)c.push(o),u-o!==o&&c.push(u-o);for(r=h*u*3*2,e=a*u,o=0;o<c.length-2;++o)o%2===0?(s[r+3*o+0]=e+c[o+0],s[r+3*o+1]=e+c[o+1],s[r+3*o+2]=e+c[o+2]):(s[r+3*o+0]=e+c[o+2],s[r+3*o+1]=e+c[o+1],s[r+3*o+2]=e+c[o+0]);for(r=h*u*3*2+3*l,e=a*u+u,o=0;o<c.length-2;++o)o%2===0?(s[r+3*o+0]=e+c[o+0],s[r+3*o+1]=e+c[o+1],s[r+3*o+2]=e+c[o+2]):(s[r+3*o+0]=e+c[o+2],s[r+3*o+1]=e+c[o+1],s[r+3*o+2]=e+c[o+0])},e}(Lg),Xb=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="cartoon",this.parameters=Object.assign({aspectRatio:{type:"number",precision:1,max:10,min:1},subdiv:{type:"integer",max:50,min:1,rebuild:!0},radialSegments:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1},capped:{type:"boolean",rebuild:!0},smoothSheet:{type:"boolean",rebuild:!0}},this.parameters),this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.colorScheme=gr(i.colorScheme,"chainname"),i.colorScale=gr(i.colorScale,"RdYlBu"),i.radius=gr(i.radius,"sstruc"),i.scale=gr(i.scale,.7),this.aspectRatio=gr(i.aspectRatio,5),this.tension=gr(i.tension,NaN),this.capped=gr(i.capped,!0),this.smoothSheet=gr(i.smoothSheet,!1),"low"===i.quality?(this.subdiv=3,this.radialSegments=6):"medium"===i.quality?this.subdiv=6:"high"===i.quality?this.subdiv=12:this.subdiv=gr(i.subdiv,6),t.prototype.init.call(this,i)},e.prototype.getSplineParams=function(t){return Object.assign({subdiv:this.subdiv,tension:this.tension,directional:1!==this.aspectRatio,smoothSheet:this.smoothSheet},t)},e.prototype.getSpline=function(t){return new Ca(t,this.getSplineParams())},e.prototype.getScale=function(t){return t.isCg()?this.scale*this.aspectRatio:this.scale},e.prototype.getAspectRatio=function(t){return t.isCg()?1:this.aspectRatio},e.prototype.createData=function(t){var e=this,i=[],n=[];return this.structure.eachPolymer(function(t){if(!(t.residueCount<4)){n.push(t);var r=e.getSpline(t),o=r.getSubdividedPosition(),s=r.getSubdividedOrientation(),a=r.getSubdividedColor(e.getColorParams()),h=r.getSubdividedPicking(),l=r.getSubdividedSize(e.radius,e.getScale(t));i.push(new qb(Object.assign({},o,s,a,h,l),e.getBufferParams({radialSegments:e.radialSegments,aspectRatio:e.getAspectRatio(t),capped:e.capped,dullInterior:!0})))}},t.getSelection()),{bufferList:i,polymerList:n}},e.prototype.updateData=function(t,e){var i=this;rp&&np.time(this.type+" repr update"),t=t||{};for(var n=0,r=e.polymerList.length;n<r;++n){var o={},s=e.polymerList[n],a=i.getSpline(s);if(e.bufferList[n].aspectRatio=i.getAspectRatio(s),t.position||t.radius){var h=a.getSubdividedPosition(),l=a.getSubdividedOrientation(),u=a.getSubdividedSize(i.radius,i.getScale(s));o.position=h.position,o.normal=l.normal,o.binormal=l.binormal,o.tangent=l.tangent,o.size=u.size}if(t.color){var d=a.getSubdividedColor(i.getColorParams());o.color=d.color}if(t.picking){var c=a.getSubdividedPicking();o.picking=c.picking}e.bufferList[n].setAttributes(o)}rp&&np.timeEnd(this.type+" repr update")},e.prototype.setParameters=function(e){var i={};return e&&e.aspectRatio&&(i.radius=!0),e&&e.tension&&(i.position=!0),t.prototype.setParameters.call(this,e,i,!1),this},e}(By);lp.add("cartoon",Xb);var Zb=function(t,e){this.sview1=t,this.sview2=e,this.kdtree2=new Ys(e)};Zb.prototype.within=function(t,e){np.time("Contact within");var i=this.kdtree2,n=this.sview1.getAtomProxy(),r=this.sview1.getAtomSet(!1),o=new Kv;this.sview1.eachAtom(function(s){for(var a=!1,h=i.nearest(s,1/0,t),l=0,u=h.length;l<u;++l){var d=h[l];n.index=d.index,s.residueIndex!==n.residueIndex&&(!e||d.distance>e)&&(a=!0,r.set(n.index),o.addBond(s,n,1))}a&&r.set(s.index)});var s=new sv(o.count,!0);return np.timeEnd("Contact within"),{atomSet:r,bondSet:s,bondStore:o}};var Kb=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="contact",this.parameters=Object.assign({contactType:{type:"select",rebuild:!0,options:{polar:"polar",polarBackbone:"polar backbone"}},maxDistance:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxAngle:{type:"integer",max:180,min:0,rebuild:!0},radialSegments:!0,disableImpostor:!0},this.parameters),this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.radius=gr(i.radius,.25),this.contactType=gr(i.contactType,"polarBackbone"),this.maxDistance=gr(i.maxDistance,3.5),this.maxAngle=gr(i.maxAngle,40),t.prototype.init.call(this,i)},e.prototype.getContactData=function(t){return{polar:Oa,polarBackbone:Pa}[this.contactType](t,this.maxDistance,this.maxAngle)},e.prototype.getBondData=function(t,e,i){var n=t.getBondData(this.getBondParams(e,i));return n.picking&&(n.picking=new qm(n.picking.array,n.picking.structure,i.bondStore)),n},e.prototype.createData=function(t){var e=this.getContactData(t);return{bufferList:[new hy(this.getBondData(t,void 0,{bondSet:e.bondSet,bondStore:e.bondStore}),this.getBufferParams({openEnded:!1,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0}))],bondSet:e.bondSet,bondStore:e.bondStore}},e.prototype.updateData=function(t,e){if(!t||t.position){var i=this.getContactData(e.sview);e.bondSet=i.bondSet,e.bondStore=i.bondStore}var n={bondSet:e.bondSet,bondStore:e.bondStore},r=this.getBondData(e.sview,t,n),o={};t&&!t.position||(o.position=go(r.position1,r.position2),o.position1=r.position1,o.position2=r.position2),t&&!t.color||(o.color=r.color,o.color2=r.color2),t&&!t.radius||(o.radius=r.radius),e.bufferList[0].setAttributes(o)},e}(By);lp.add("contact",Kb);var Qb=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="distance",this.parameters=Object.assign({labelSize:{type:"number",precision:3,max:10,min:.001},labelColor:{type:"color"},labelVisible:{type:"boolean"},labelZOffset:{type:"number",precision:1,max:20,min:-20,buffer:"zOffset"},labelUnit:{type:"select",rebuild:!0,options:{"":"",angstrom:"angstrom",nm:"nm"}},atomPair:{type:"hidden",rebuild:!0},radialSegments:!0,disableImpostor:!0},this.parameters,{flatShaded:null,assembly:null}),this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.radius=gr(i.radius,.15),this.fontFamily=gr(i.fontFamily,"sans-serif"),this.fontStyle=gr(i.fontStyle,"normal"),this.fontWeight=gr(i.fontWeight,"bold"),this.sdf=gr(i.sdf,"Firefox"!==Jf),this.labelSize=gr(i.labelSize,2),this.labelColor=gr(i.labelColor,16777215),this.labelVisible=gr(i.labelVisible,!0),this.labelZOffset=gr(i.labelZOffset,.5),this.labelUnit=gr(i.labelUnit,""),this.atomPair=gr(i.atomPair,[]),t.prototype.init.call(this,i)},e.prototype.getDistanceData=function(t,e){var i=e.length,n=new Array(i),r=new Float32Array(3*i),o=new $f,s=new $f,a=new Kv,h=t.getAtomProxy(),l=t.getAtomProxy(),u=0;e.forEach(function(e,i){var d=e[0],c=e[1];if(Number.isInteger(d)&&Number.isInteger(c))h.index=d,l.index=c;else{o.setString(d),s.setString(c);var f=t.getAtomIndices(o),p=t.getAtomIndices(s);if(!f.length||!p.length)return void(u+=1);h.index=f[0],l.index=p[0]}a.addBond(h,l,1),i-=u;var m=h.distanceTo(l);switch(this.labelUnit){case"angstrom":n[i]=m.toFixed(2)+" "+String.fromCharCode(8491);break;case"nm":n[i]=(m/10).toFixed(2)+" nm";break;default:n[i]=m.toFixed(2)}var v=3*i;r[v+0]=(h.x+l.x)/2,r[v+1]=(h.y+l.y)/2,r[v+2]=(h.z+l.z)/2},this),u>0&&(i-=u,r=r.subarray(0,3*i));var d=new sv(a.count,!0);return{text:n,position:r,bondSet:d,bondStore:a}},e.prototype.getBondData=function(t,e,i){var n=t.getBondData(this.getBondParams(e,i));return n.picking&&(n.picking=new Km(n.picking.array,n.picking.structure,i.bondStore)),n},e.prototype.create=function(){if(0!==this.structureView.atomCount){var t=this.atomPair.length;if(0!==t){var e=this.getDistanceData(this.structureView,this.atomPair),i=new it(this.labelColor);this.textBuffer=new _y({position:e.position,size:yo(t,this.labelSize),color:bo(t,i.r,i.g,i.b),text:e.text},this.getBufferParams({fontFamily:this.fontFamily,fontStyle:this.fontStyle,fontWeight:this.fontWeight,sdf:this.sdf,zOffset:this.labelZOffset,opacity:1,visible:this.labelVisible}));var n={bondSet:e.bondSet,bondStore:e.bondStore},r=this.getBondData(this.structureView,void 0,n);this.cylinderBuffer=new hy(r,this.getBufferParams({openEnded:!1,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0})),this.dataList.push({sview:this.structureView,bondSet:e.bondSet,bondStore:e.bondStore,position:e.position,bufferList:[this.textBuffer,this.cylinderBuffer]})}}},e.prototype.update=function(e){e.position?this.build():t.prototype.update.call(this,e)},e.prototype.updateData=function(t,e){var i={bondSet:e.bondSet,bondStore:e.bondStore},n=this.getBondData(e.sview,t,i),r={},o={},s=this.atomPair.length;if(t.labelSize&&(o.size=yo(s,this.labelSize)),t.labelColor){var a=new it(this.labelColor);o.color=bo(s,a.r,a.g,a.b)}t.color&&(r.color=n.color,r.color2=n.color2),(t.radius||t.scale)&&(r.radius=n.radius),this.textBuffer.setAttributes(o),this.cylinderBuffer.setAttributes(r)},e.prototype.setVisibility=function(e,i){return t.prototype.setVisibility.call(this,e,!0),this.textBuffer&&this.textBuffer.setVisibility(this.labelVisible&&this.visible),i||this.viewer.requestRender(),this},e.prototype.setParameters=function(e){var i={};return e&&e.labelSize&&(i.labelSize=!0),e&&(e.labelColor||0===e.labelColor)&&(i.labelColor=!0),t.prototype.setParameters.call(this,e,i,!1),e&&void 0!==e.labelVisible&&this.setVisibility(this.visible),this},e}(By);lp.add("distance",Qb);var Jb=function(t){function e(e,i){var n=i||{},r=e.position.length/3,o=2*r,s=new it(gr(n.color,"grey")),a=new Float32Array(3*o),h=bo(o,s.r,s.g,s.b);t.call(this,{position:a,color:h},n),this.scale=gr(n.scale,1),this.setAttributes(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={isLine:{},vertexShader:{},fragmentShader:{}};return e.prototype.setAttributes=function(t){var e,i,n,r=this.geometry.attributes;t.position&&t.vector&&(e=t.position,i=t.vector,n=r.position.array,r.position.needsUpdate=!0);var o,s,a=this.size/2,h=this.scale;if(t.position&&t.vector)for(var l=0;l<a;l++)o=2*l*3,s=3*l,n[o+0]=e[s+0],n[o+1]=e[s+1],n[o+2]=e[s+2],n[o+3]=e[s+0]+i[s+0]*h,n[o+4]=e[s+1]+i[s+1]*h,n[o+5]=e[s+2]+i[s+2]*h},i.isLine.get=function(){return!0},i.vertexShader.get=function(){return"Line.vert"},i.fragmentShader.get=function(){return"Line.frag"},Object.defineProperties(e.prototype,i),e}(Ig),t_=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="helixorient",this.parameters=Object.assign({sphereDetail:!0,disableImpostor:!0},this.parameters),this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.colorScheme=gr(i.colorScheme,"sstruc"),i.radius=gr(i.radius,.15),i.scale=gr(i.scale,1),t.prototype.init.call(this,i)},e.prototype.createData=function(t){var e=this,i=[],n=[];return this.structure.eachPolymer(function(t){if(!(t.residueCount<4)){n.push(t);var r=new Hs(t),o=r.getPosition(),s=r.getColor(e.getColorParams()),a=r.getSize(e.radius,e.scale),h=r.getPicking();i.push(new Yg({position:o.center,color:s.color,radius:a.size,picking:h.picking},e.getBufferParams({sphereDetail:e.sphereDetail,disableImpostor:e.disableImpostor,dullInterior:!0})),new Jb({position:o.center,vector:o.axis},e.getBufferParams({color:"skyblue",scale:1})),new Jb({position:o.center,vector:o.resdir},e.getBufferParams({color:"lightgreen",scale:1})))}},t.getSelection()),{bufferList:i,polymerList:n}},e.prototype.updateData=function(t,e){rp&&np.time(this.type+" repr update"),t=t||{};for(var i=0,n=e.polymerList.length;i<n;++i){var r=3*i,o={},s=e.polymerList[i],a=new Hs(s);if(t.position){var h=a.getPosition();o.position=h.center,e.bufferList[r+1].setAttributes({position:h.center,vector:h.axis}),e.bufferList[r+2].setAttributes({position:h.center,vector:h.resdir})}e.bufferList[r].setAttributes(o)}rp&&np.timeEnd(this.type+" repr update")},e}(By);lp.add("helixorient",t_);var e_=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="licorice",this.parameters=Object.assign({},this.parameters,{aspectRatio:null})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.aspectRatio=1,t.prototype.init.call(this,i)},e}(Vb);lp.add("licorice",e_),dp.add("shader/HyperballStickImpostor.vert","\nattribute vec3 mapping;\nattribute float radius;\nattribute float radius2;\nattribute vec3 position1;\nattribute vec3 position2;\nvarying mat4 matrix_near;\nvarying vec4 prime1;\nvarying vec4 prime2;\nvarying float vRadius;\nvarying float vRadius2;\n#ifdef PICKING\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\nattribute vec3 color2;\nvarying vec3 vColor1;\nvarying vec3 vColor2;\n#endif\nuniform float shrink;\nuniform mat4 modelViewProjectionMatrix;\nuniform mat4 modelViewProjectionMatrixInverse;\nvoid main(){\nvRadius = radius;\nvRadius2 = radius2;\nvec4 spaceposition;\nvec3 position_atom1;\nvec3 position_atom2;\nvec4 vertex_position;\n#ifdef PICKING\nvPickingColor = unpackColor( primitiveId );\n#else\nvColor1 = color;\nvColor2 = color2;\n#endif\nfloat radius1 = radius;\nposition_atom1 = position1;\nposition_atom2 = position2;\nfloat distance = distance( position_atom1, position_atom2 );\nspaceposition.z = mapping.z * distance;\nif (radius1 > radius2) {\nspaceposition.y = mapping.y * 1.5 * radius1;\nspaceposition.x = mapping.x * 1.5 * radius1;\n} else {\nspaceposition.y = mapping.y * 1.5 * radius2;\nspaceposition.x = mapping.x * 1.5 * radius2;\n}\nspaceposition.w = 1.0;\nvec4 e3 = vec4( 1.0 );\nvec3 e1, e1_temp, e2, e2_temp;\ne3.xyz = normalize(position_atom1-position_atom2);\nif (e3.z == 0.0) { e3.z = 0.0000000000001;}\nif ( (position_atom1.x - position_atom2.x) == 0.0) { position_atom1.x += 0.001;}\nif ( (position_atom1.y - position_atom2.y) == 0.0) { position_atom1.y += 0.001;}\nif ( (position_atom1.z - position_atom2.z) == 0.0) { position_atom1.z += 0.001;}\nvec4 focus = vec4( 1.0 );\nfocus.x = ( position_atom1.x*position_atom1.x - position_atom2.x*position_atom2.x +\n( radius2*radius2 - radius1*radius1 )*e3.x*e3.x/shrink )/(2.0*(position_atom1.x - position_atom2.x));\nfocus.y = ( position_atom1.y*position_atom1.y - position_atom2.y*position_atom2.y +\n( radius2*radius2 - radius1*radius1 )*e3.y*e3.y/shrink )/(2.0*(position_atom1.y - position_atom2.y));\nfocus.z = ( position_atom1.z*position_atom1.z - position_atom2.z*position_atom2.z +\n( radius2*radius2 - radius1*radius1 )*e3.z*e3.z/shrink )/(2.0*(position_atom1.z - position_atom2.z));\ne1.x = 1.0;\ne1.y = 1.0;\ne1.z = ( (e3.x*focus.x + e3.y*focus.y + e3.z*focus.z) - e1.x*e3.x - e1.y*e3.y)/e3.z;\ne1_temp = e1 - focus.xyz;\ne1 = normalize(e1_temp);\ne2_temp = e1.yzx * e3.zxy - e1.zxy * e3.yzx;\ne2 = normalize(e2_temp);\nmat3 R= mat3( e1.xyz, e2.xyz, e3.xyz );\nvertex_position.xyz = R * spaceposition.xyz;\nvertex_position.w = 1.0;\nvertex_position.x += (position_atom1.x+position_atom2.x) / 2.0;\nvertex_position.y += (position_atom1.y+position_atom2.y) / 2.0;\nvertex_position.z += (position_atom1.z+position_atom2.z) / 2.0;\ngl_Position = modelViewProjectionMatrix * vertex_position;\nvec4 i_near, i_far;\nvec4 near = gl_Position;\nnear.z = 0.0 ;\nnear = modelViewProjectionMatrixInverse * near;\ni_near = near;\nvec4 far = gl_Position;\nfar.z = far.w ;\ni_far = modelViewProjectionMatrixInverse * far;\nprime1 = vec4( position_atom1 - (position_atom1 - focus.xyz)*shrink, 1.0 );\nprime2 = vec4( position_atom2 - (position_atom2 - focus.xyz)*shrink, 1.0 );\nfloat Rsquare = (radius1*radius1/shrink) - (\n(position_atom1.x - focus.x)*(position_atom1.x - focus.x) +\n(position_atom1.y - focus.y)*(position_atom1.y - focus.y) +\n(position_atom1.z - focus.z)*(position_atom1.z - focus.z)\n);\nfocus.w = Rsquare;\nmatrix_near = mat4( i_near, i_far, focus, e3 );\ngl_Position.z = 1.0;\n}"),dp.add("shader/HyperballStickImpostor.frag","#define STANDARD\n#define IMPOSTOR\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float nearClip;\nuniform float shrink;\nuniform mat4 modelViewMatrix;\nuniform mat4 modelViewProjectionMatrix;\nuniform mat4 modelViewMatrixInverseTranspose;\nuniform mat4 projectionMatrix;\nvarying mat4 matrix_near;\nvarying vec4 prime1;\nvarying vec4 prime2;\nvarying float vRadius;\nvarying float vRadius2;\n#ifdef PICKING\nuniform float objectId;\nvarying vec3 vPickingColor;\n#else\nvarying vec3 vColor1;\nvarying vec3 vColor2;\n#include common\n#include fog_pars_fragment\n#include bsdfs\n#include lights_pars\n#include lights_physical_pars_fragment\n#endif\nbool interior = false;\nfloat calcClip( vec4 cameraPos ){\nreturn dot( cameraPos, vec4( 0.0, 0.0, 1.0, nearClip - 0.5 ) );\n}\nfloat calcClip( vec3 cameraPos ){\nreturn calcClip( vec4( cameraPos, 1.0 ) );\n}\nfloat calcDepth( in vec3 cameraPos ){\nvec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;\nreturn 0.5 + 0.5 * clipZW.x / clipZW.y;\n}\nstruct Ray {\nvec3 origin ;\nvec3 direction ;\n};\nbool cutoff_plane (vec3 M, vec3 cutoff, vec3 x3){\nfloat a = x3.x;\nfloat b = x3.y;\nfloat c = x3.z;\nfloat d = -x3.x*cutoff.x-x3.y*cutoff.y-x3.z*cutoff.z;\nfloat l = a*M.x+b*M.y+c*M.z+d;\nif (l<0.0) {return true;}\nelse{return false;}\n}\nvec3 isect_surf(Ray r, mat4 matrix_coef){\nvec4 direction = vec4(r.direction, 0.0);\nvec4 origin = vec4(r.origin, 1.0);\nfloat a = dot(direction,(matrix_coef*direction));\nfloat b = dot(origin,(matrix_coef*direction));\nfloat c = dot(origin,(matrix_coef*origin));\nfloat delta =b*b-a*c;\ngl_FragColor.a = 1.0;\nif (delta<0.0){\ndiscard;\n}\nfloat t1 =(-b-sqrt(delta))/a;\nreturn r.origin+t1*r.direction;\n}\nvec3 isect_surf2(Ray r, mat4 matrix_coef){\nvec4 direction = vec4(r.direction, 0.0);\nvec4 origin = vec4(r.origin, 1.0);\nfloat a = dot(direction,(matrix_coef*direction));\nfloat b = dot(origin,(matrix_coef*direction));\nfloat c = dot(origin,(matrix_coef*origin));\nfloat delta =b*b-a*c;\ngl_FragColor.a = 1.0;\nif (delta<0.0){\ndiscard;\n}\nfloat t2 =(-b+sqrt(delta))/a;\nreturn r.origin+t2*r.direction;\n}\nRay primary_ray(vec4 near1, vec4 far1){\nvec3 near=near1.xyz/near1.w;\nvec3 far=far1.xyz/far1.w;\nreturn Ray(near,far-near);\n}\nfloat update_z_buffer(vec3 M, mat4 ModelViewP){\nfloat depth1;\nvec4 Ms=(ModelViewP*vec4(M,1.0));\nreturn depth1=(1.0+Ms.z/Ms.w)/2.0;\n}\nvoid main(){\nfloat radius = max( vRadius, vRadius2 );\nvec4 i_near, i_far, focus;\nvec3 e3, e1, e1_temp, e2;\ni_near = vec4(matrix_near[0][0],matrix_near[0][1],matrix_near[0][2],matrix_near[0][3]);\ni_far = vec4(matrix_near[1][0],matrix_near[1][1],matrix_near[1][2],matrix_near[1][3]);\nfocus = vec4(matrix_near[2][0],matrix_near[2][1],matrix_near[2][2],matrix_near[2][3]);\ne3 = vec3(matrix_near[3][0],matrix_near[3][1],matrix_near[3][2]);\ne1.x = 1.0;\ne1.y = 1.0;\ne1.z = ( (e3.x*focus.x + e3.y*focus.y + e3.z*focus.z) - e1.x*e3.x - e1.y*e3.y)/e3.z;\ne1_temp = e1 - focus.xyz;\ne1 = normalize(e1_temp);\ne2 = normalize(cross(e1,e3));\nvec4 equation = focus;\nfloat shrinkfactor = shrink;\nfloat t1 = -1.0/(1.0-shrinkfactor);\nfloat t2 = 1.0/(shrinkfactor);\nvec4 colonne1, colonne2, colonne3, colonne4;\nmat4 mat;\nvec3 equation1 = vec3(t2,t2,t1);\nfloat A1 = - e1.x*equation.x - e1.y*equation.y - e1.z*equation.z;\nfloat A2 = - e2.x*equation.x - e2.y*equation.y - e2.z*equation.z;\nfloat A3 = - e3.x*equation.x - e3.y*equation.y - e3.z*equation.z;\nfloat A11 = equation1.x*e1.x*e1.x + equation1.y*e2.x*e2.x + equation1.z*e3.x*e3.x;\nfloat A21 = equation1.x*e1.x*e1.y + equation1.y*e2.x*e2.y + equation1.z*e3.x*e3.y;\nfloat A31 = equation1.x*e1.x*e1.z + equation1.y*e2.x*e2.z + equation1.z*e3.x*e3.z;\nfloat A41 = equation1.x*e1.x*A1 + equation1.y*e2.x*A2 + equation1.z*e3.x*A3;\nfloat A22 = equation1.x*e1.y*e1.y + equation1.y*e2.y*e2.y + equation1.z*e3.y*e3.y;\nfloat A32 = equation1.x*e1.y*e1.z + equation1.y*e2.y*e2.z + equation1.z*e3.y*e3.z;\nfloat A42 = equation1.x*e1.y*A1 + equation1.y*e2.y*A2 + equation1.z*e3.y*A3;\nfloat A33 = equation1.x*e1.z*e1.z + equation1.y*e2.z*e2.z + equation1.z*e3.z*e3.z;\nfloat A43 = equation1.x*e1.z*A1 + equation1.y*e2.z*A2 + equation1.z*e3.z*A3;\nfloat A44 = equation1.x*A1*A1 + equation1.y*A2*A2 + equation1.z*A3*A3 - equation.w;\ncolonne1 = vec4(A11,A21,A31,A41);\ncolonne2 = vec4(A21,A22,A32,A42);\ncolonne3 = vec4(A31,A32,A33,A43);\ncolonne4 = vec4(A41,A42,A43,A44);\nmat = mat4(colonne1,colonne2,colonne3,colonne4);\nRay ray = primary_ray(i_near,i_far) ;\nvec3 M;\nM = isect_surf(ray, mat);\nif (cutoff_plane(M, prime1.xyz, -e3) || cutoff_plane(M, prime2.xyz, e3)){ discard; }\nvec4 M1 = vec4(M,1.0);\nvec4 M2 = mat*M1;\nvec3 _normal = ( modelViewMatrixInverseTranspose * M2 ).xyz;\ngl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix) ;\n#ifdef NEAR_CLIP\nif( calcClip( modelViewMatrix * vec4( M, 1.0 ) ) > 0.0 ){\nM = isect_surf2(ray, mat);\nif( calcClip( modelViewMatrix * vec4( M, 1.0 ) ) > 0.0 )\ndiscard;\ninterior = true;\ngl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix) ;\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( nearClip - 0.5 ) ) ) + ( 0.0000001 / radius ) );\n}\n}else if( gl_FragDepthEXT <= 0.0 ){\nM = isect_surf2(ray, mat);\ninterior = true;\ngl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix);\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = 0.0 + ( 0.0000001 / radius );\n}\n}\n#else\nif( gl_FragDepthEXT <= 0.0 ){\nM = isect_surf2(ray, mat);\ninterior = true;\ngl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix) ;\nif( gl_FragDepthEXT >= 0.0 ){\ngl_FragDepthEXT = 0.0 + ( 0.0000001 / radius );\n}\n}\n#endif\nif (cutoff_plane(M, prime1.xyz, -e3) || cutoff_plane(M, prime2.xyz, e3)){ discard; }\nif (gl_FragDepthEXT < 0.0)\ndiscard;\nif (gl_FragDepthEXT > 1.0)\ndiscard;\nfloat distance_ratio = ((M.x-prime2.x)*e3.x + (M.y-prime2.y)*e3.y +(M.z-prime2.z)*e3.z) /\ndistance(prime2.xyz,prime1.xyz);\n#ifdef PICKING\ngl_FragColor = vec4( vPickingColor, objectId );\n#else\nvec3 vViewPosition = -( modelViewMatrix * vec4( M, 1.0 ) ).xyz;\nvec3 vNormal = _normal;\nvec3 vColor;\nif( distance_ratio>0.5 ){\nvColor = vColor1;\n}else{\nvColor = vColor2;\n}\nvec4 diffuseColor = vec4( diffuse, opacity );\nReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\nvec3 totalEmissiveLight = emissive;\n#include color_fragment\n#include roughnessmap_fragment\n#include metalnessmap_fragment\nvec3 normal = normalize( vNormal );\nif( interior ){\nnormal = vec3( 0.0, 0.0, 0.4 );\n}\n#include lights_physical_fragment\n#include lights_template\nvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\n#include premultiplied_alpha_fragment\n#include tonemapping_fragment\n#include encodings_fragment\n#include fog_fragment\n#endif\n}");var i_=new Float32Array([-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,1,1,1,-1,1,1]),n_=new Uint16Array([0,1,2,0,2,3,1,5,6,1,6,2,4,6,5,4,7,6,0,7,4,0,3,7,0,5,1,0,4,5,3,2,6,3,6,7]),r_=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={mapping:{},mappingIndices:{},mappingIndicesSize:{},mappingType:{},mappingSize:{},mappingItemSize:{}};return i.mapping.get=function(){return i_},i.mappingIndices.get=function(){return n_},i.mappingIndicesSize.get=function(){return 36},i.mappingType.get=function(){return"v3"},i.mappingSize.get=function(){return 8},i.mappingItemSize.get=function(){return 3},Object.defineProperties(e.prototype,i),e}(Ug),o_=function(t){function e(e,i){t.call(this,e,i);var n=e||{},r=i||{},o=gr(r.shrink,.14);this.addUniforms({modelViewProjectionMatrix:{value:new b},modelViewProjectionMatrixInverse:{value:new b},modelViewMatrixInverseTranspose:{value:new b},shrink:{value:o}}),this.addAttributes({position1:{type:"v3",value:null},position2:{type:"v3",value:null},color2:{type:"c",value:null},radius:{type:"f",value:null},radius2:{type:"f",value:null}}),this.setAttributes(n),this.makeMapping()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={parameters:{},isImpostor:{},vertexShader:{},fragmentShader:{}};return i.parameters.get=function(){return Object.assign.call(this,{shrink:{uniform:!0}},t.prototype.parameters)},i.isImpostor.get=function(){return!0},i.vertexShader.get=function(){return"HyperballStickImpostor.vert"},i.fragmentShader.get=function(){return"HyperballStickImpostor.frag"},Object.defineProperties(e.prototype,i),e}(r_),s_=function(t,e){return!ip||e&&e.disableImpostor?(t.radius=So(t.radius1,t.radius2),new ny(t,e)):new o_(t,e)},a_=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="hyperball",this.parameters=Object.assign({shrink:{type:"number",precision:3,max:1,min:.001,buffer:!0}},this.parameters,{multipleBond:null,bondSpacing:null})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.scale=gr(i.scale,.2),i.radius=gr(i.radius,"vdw"),this.shrink=gr(i.shrink,.12),t.prototype.init.call(this,i)},e.prototype.getBondParams=function(e,i){return e&&!e.radius||(i=Object.assign({radius2:!0},i)),t.prototype.getBondParams.call(this,e,i)},e.prototype.createData=function(t){var e=new Yg(t.getAtomData(this.getAtomParams()),this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0}));return this.__center=new Float32Array(3*t.bondCount),{bufferList:[e,new s_(t.getBondData(this.getBondParams()),this.getBufferParams({shrink:this.shrink,radialSegments:this.radialSegments,dullInterior:!0}))]}},e.prototype.updateData=function(t,e){var i=e.sview.getAtomData(this.getAtomParams()),n=e.sview.getBondData(this.getBondParams()),r={},o={};if(!t||t.position){r.position=i.position;var s=n.position1,a=n.position2;o.position=go(s,a,this.__center),o.position1=s,o.position2=a}t&&!t.color||(r.color=i.color,o.color=n.color,o.color2=n.color2),t&&!t.radius||(r.radius=i.radius,o.radius=n.radius,o.radius2=n.radius2),e.bufferList[0].setAttributes(r),e.bufferList[1].setAttributes(o)},e}(e_);lp.add("hyperball",a_),Aa.prototype={constructor:Aa,atomLabel:function(t){var e,i=this.type;switch(i){case"atomname":e=t.atomname;break;case"atomindex":e=""+t.index;break;case"occupancy":e=t.occupancy.toFixed(2);break;case"bfactor":e=t.bfactor.toFixed(2);break;case"serial":e=""+t.serial;break;case"element":e=t.element;break;case"atom":e=t.atomname+"|"+t.index;break;case"resname":e=t.resname;break;case"resno":e=""+t.resno;break;case"res":var n=t.resname.toUpperCase();e=(Tv[n]||n)+t.resno;break;case"text":e=this.text[t.index];break;default:e=t.qualifiedName()}return void 0===e?"":e}},Aa.types={"":"",atomname:"atom name",atomindex:"atom index",occupancy:"occupancy",bfactor:"b-factor",serial:"serial",element:"element",atom:"atom name + index",resname:"residue name",resno:"residue no",res:"residue name + no",text:"text",qualified:"qualified name"};var h_=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="label",this.parameters=Object.assign({labelType:{type:"select",options:Aa.types,rebuild:!0},labelText:{type:"hidden",rebuild:!0},fontFamily:{type:"select",options:{"sans-serif":"sans-serif",monospace:"monospace",serif:"serif"},buffer:!0},fontStyle:{type:"select",options:{normal:"normal",italic:"italic"},buffer:!0},fontWeight:{type:"select",options:{normal:"normal",bold:"bold"},buffer:!0},sdf:{type:"boolean",buffer:!0},xOffset:{type:"number",precision:1,max:20,min:-20,buffer:!0},yOffset:{type:"number",precision:1,max:20,min:-20,buffer:!0},zOffset:{type:"number",precision:1,max:20,min:-20,buffer:!0},attachment:{type:"select",options:{"bottom-left":"bottom-left","bottom-center":"bottom-center","bottom-right":"bottom-right","middle-left":"middle-left","middle-center":"middle-center","middle-right":"middle-right","top-left":"top-left","top-center":"top-center","top-right":"top-right"},rebuild:!0},showBorder:{type:"boolean",buffer:!0},borderColor:{type:"color",buffer:!0},borderWidth:{type:"number",precision:2,max:.3,min:0,buffer:!0},showBackground:{type:"boolean",rebuild:!0},backgroundColor:{type:"color",buffer:!0},backgroundMargin:{type:"number",precision:2,max:2,min:0,rebuild:!0},backgroundOpacity:{type:"range",step:.01,max:1,min:0,buffer:!0}},this.parameters,{side:null,flatShaded:null,wireframe:null,linewidth:null,roughness:null,metalness:null,diffuse:null}),this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};this.labelType=gr(i.labelType,"res"),this.labelText=gr(i.labelText,{}),this.fontFamily=gr(i.fontFamily,"sans-serif"),this.fontStyle=gr(i.fontStyle,"normal"),this.fontWeight=gr(i.fontWeight,"bold"),this.sdf=gr(i.sdf,"Chrome"===Jf),this.xOffset=gr(i.xOffset,0),this.yOffset=gr(i.yOffset,0),this.zOffset=gr(i.zOffset,.5),this.attachment=gr(i.attachment,"bottom-left"),this.showBorder=gr(i.showBorder,!1),this.borderColor=gr(i.borderColor,"lightgrey"),this.borderWidth=gr(i.borderWidth,.15),this.showBackground=gr(i.showBackground,!1),this.backgroundColor=gr(i.backgroundColor,"lightgrey"),this.backgroundMargin=gr(i.backgroundMargin,.5),this.backgroundOpacity=gr(i.backgroundOpacity,1),t.prototype.init.call(this,i)},e.prototype.createData=function(t){var e={position:!0,color:!0,radius:!0},i=t.getAtomData(this.getAtomParams(e)),n=[],r=new Aa(this.labelType,this.labelText);return t.eachAtom(function(t){n.push(r.atomLabel(t))}),{bufferList:[new _y({position:i.position,size:i.radius,color:i.color,text:n},this.getBufferParams({fontFamily:this.fontFamily,fontStyle:this.fontStyle,fontWeight:this.fontWeight,sdf:this.sdf,xOffset:this.xOffset,yOffset:this.yOffset,zOffset:this.zOffset,attachment:this.attachment,showBorder:this.showBorder,borderColor:this.borderColor,borderWidth:this.borderWidth,showBackground:this.showBackground,backgroundColor:this.backgroundColor,backgroundMargin:this.backgroundMargin,backgroundOpacity:this.backgroundOpacity}))]}},e.prototype.updateData=function(t,e){var i=e.sview.getAtomData(this.getAtomParams(t)),n={};t&&!t.position||(n.position=i.position),t&&!t.radius||(n.size=i.radius),t&&!t.color||(n.color=i.color),e.bufferList[0].setAttributes(n)},e}(By);lp.add("label",h_);var l_=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="line",this.parameters=Object.assign({multipleBond:{type:"select",rebuild:!0,options:{off:"off",symmetric:"symmetric",offset:"offset"}},bondSpacing:{type:"number",precision:2,max:2,min:.5}},this.parameters,{flatShaded:null,side:null,wireframe:null,roughness:null,metalness:null,diffuse:null}),this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};this.multipleBond=gr(i.multipleBond,"off"),this.bondSpacing=gr(i.bondSpacing,1),t.prototype.init.call(this,i)},e.prototype.getBondParams=function(e,i){return i=Object.assign({multipleBond:this.multipleBond,bondSpacing:this.bondSpacing,radiusParams:{radius:.1,scale:1}},i),t.prototype.getBondParams.call(this,e,i)},e.prototype.createData=function(t){var e={position:!0,color:!0},i=t.getBondData(this.getBondParams(e));return{bufferList:[new jy(i,this.getBufferParams())]}},e.prototype.updateData=function(t,e){var i=e.sview.getBondData(this.getBondParams(t)),n={};t&&!t.position||(n.position1=i.position1,n.position2=i.position2),t&&!t.color||(n.color=i.color,n.color2=i.color2),e.bufferList[0].setAttributes(n)},e.prototype.setParameters=function(e){var i={};return e&&e.bondSpacing&&(i.position=!0),t.prototype.setParameters.call(this,e,i,!1),this},e}(By);lp.add("line",l_),Ia.__deps=[js,Bs,Us,Go,Da],La.__deps=[js,Us,yo,Go,ts,Xo,es,Ra,gr],sp.add("molsurf",function(t,e){var i=t.data.args,n=t.data.params;if(i&&n){var r="av"===n.type?La:Ia,o=new r(i.coordList,i.radiusList,i.indexList),s=o.getSurface(n.type,n.probeRadius,n.scaleFactor,n.cutoff,!0,n.smooth,n.contour),a=[s.position.buffer,s.index.buffer];s.normal&&a.push(s.normal.buffer),s.atomindex&&a.push(s.atomindex.buffer);e({sd:s,p:n},a)}},[Ia,La]);var u_=function(t){this.structure=t};u_.prototype._getAtomData=function(){return this.structure.getAtomData({what:{position:!0,radius:!0,index:!0},radiusParams:{radius:"vdw",scale:1}})},u_.prototype._makeSurface=function(t,e){var i=new Vv(e.name,"",t);return i.info.type=e.type,i.info.probeRadius=e.probeRadius,i.info.scaleFactor=e.scaleFactor,i.info.smooth=e.smooth,i.info.cutoff=e.cutoff,i},u_.prototype.getSurface=function(t){var e=t||{},i=this._getAtomData(),n=i.position,r=i.radius,o=i.index,s="av"===e.type?La:Ia,a=new s(n,r,o),h=a.getSurface(e.type,e.probeRadius,e.scaleFactor,e.cutoff,!0,e.smooth,e.contour);return this._makeSurface(h,e)},u_.prototype.getSurfaceWorker=function(t,e){var i=this,n=Object.assign({},t);if(window.Worker){void 0===this.worker&&(this.worker=new As("molsurf"));var r=this._getAtomData(),o=r.position,s=r.radius,a=r.index,h={args:{coordList:o,radiusList:s,indexList:a},params:n},l=[o.buffer,s.buffer,a.buffer];this.worker.post(h,l,function(t){e(i._makeSurface(t.data.sd,n))},function(t){console.warn("MolecularSurface.getSurfaceWorker error - trying without worker",t),i.worker.terminate(),i.worker=void 0;var r=i.getSurface(n);e(r)})}else{var u=this.getSurface(n);e(u)}},u_.prototype.dispose=function(){this.worker&&this.worker.terminate()};var d_=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="surface",this.parameters=Object.assign({surfaceType:{type:"select",rebuild:!0,options:{vws:"vws",sas:"sas",ms:"ms",ses:"ses",av:"av"}},probeRadius:{type:"number",precision:1,max:20,min:0,rebuild:!0},smooth:{type:"integer",precision:1,max:10,min:0,rebuild:!0},scaleFactor:{type:"number",precision:1,max:5,min:0,rebuild:!0},cutoff:{type:"number",precision:2,max:50,min:0,rebuild:!0},contour:{type:"boolean",rebuild:!0},background:{type:"boolean",rebuild:!0},opaqueBack:{type:"boolean",buffer:!0},filterSele:{type:"text",rebuild:!0},colorVolume:{type:"hidden"},useWorker:{type:"boolean",rebuild:!0}},this.parameters,{radiusType:null,radius:null,scale:null}),this.__infoList=[],this.structure.signals.refreshed.add(function(){this.__forceNewMolsurf=!0},this),this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.colorScheme=gr(i.colorScheme,"uniform"),i.colorValue=gr(i.colorValue,14540253),i.disablePicking=gr(i.disablePicking,!0),this.surfaceType=gr(i.surfaceType,"ms"),this.probeRadius=gr(i.probeRadius,1.4),this.smooth=gr(i.smooth,2),this.scaleFactor=gr(i.scaleFactor,2),this.cutoff=gr(i.cutoff,0),this.contour=gr(i.contour,!1),this.background=gr(i.background,!1),this.opaqueBack=gr(i.opaqueBack,!0),this.filterSele=gr(i.filterSele,""),this.colorVolume=gr(i.colorVolume,void 0),this.useWorker=gr(i.useWorker,!0),t.prototype.init.call(this,e)},e.prototype.prepareData=function(t,e,i){var n=this.__infoList[e];if(n||(n={},this.__infoList[e]=n),n.molsurf&&n.sele===t.selection.string)i(e);else{if(this.filterSele){var r=t.structure.getView(new $f(this.filterSele)),o=r.boundingBox.getSize(),s=Math.max(o.x,o.y,o.z),a=t.getAtomSetWithinPoint(r.center,s/2+6);t=t.getView(new $f(t.getAtomSetWithinSelection(a,3).toSeleString()))}n.sele=t.selection.string,n.molsurf=new u_(t);var h=this.getSurfaceParams(),l=function(t){n.surface=t,i(e)};this.useWorker?n.molsurf.getSurfaceWorker(h,l):l(n.molsurf.getSurface(h))}},e.prototype.prepare=function(t){var e=this;if((this.__forceNewMolsurf||this.__sele!==this.selection.string||this.__surfaceParams!==JSON.stringify(this.getSurfaceParams()))&&(this.__infoList.forEach(function(t){t.molsurf.dispose()}),this.__infoList.length=0),0===this.structureView.atomCount)return void t();var i=function(){this.__sele=this.selection.string,this.__surfaceParams=JSON.stringify(this.getSurfaceParams()),this.__forceNewMolsurf=!1,t()}.bind(this),n="default"===this.assembly?this.defaultAssembly:this.assembly,r=this.structure.biomolDict[n];r?r.partList.forEach(function(t,n){var o=t.getView(e.structureView);e.prepareData(o,n,function(t){t===r.partList.length-1&&i()})}):this.prepareData(this.structureView,0,i)},e.prototype.createData=function(t,e){var i=this.__infoList[e],n=i.surface,r={position:n.getPosition(),color:n.getColor(this.getColorParams()),index:n.getFilteredIndex(this.filterSele,t)},o=[];if(n.contour){var s=new Py(r,this.getBufferParams({wireframe:!1}));o.push(s)}else{r.normal=n.getNormal(),r.picking=n.getPicking(t.getStructure());var a=new Ty(r,this.getBufferParams({background:this.background,opaqueBack:this.opaqueBack,dullInterior:!1})),h=new Cy(a);o.push(h)}return{bufferList:o,info:i}},e.prototype.updateData=function(t,e){var i={};if(t.position)return this.__forceNewMolsurf=!0,void this.build();t.color&&(i.color=e.info.surface.getColor(this.getColorParams())),t.index&&(i.index=e.info.surface.getFilteredIndex(this.filterSele,e.sview)),e.bufferList[0].setAttributes(i)},e.prototype.setParameters=function(e,i,n){return i=i||{},e&&e.filterSele&&(i.index=!0),e&&void 0!==e.colorVolume&&(i.color=!0),e&&e.wireframe&&(e.contour||void 0===e.contour&&this.contour)&&(e.wireframe=!1),t.prototype.setParameters.call(this,e,i,n),this},e.prototype.getSurfaceParams=function(t){return Object.assign({type:this.surfaceType,probeRadius:this.probeRadius,scaleFactor:this.scaleFactor,smooth:this.smooth&&!this.contour,cutoff:this.cutoff,contour:this.contour,useWorker:this.useWorker},t)},e.prototype.getColorParams=function(){var e=t.prototype.getColorParams.call(this);return e.volume=this.colorVolume,e},e.prototype.clear=function(){t.prototype.clear.call(this)},e.prototype.dispose=function(){this.__infoList.forEach(function(t){t.molsurf.dispose()}),this.__infoList.length=0,t.prototype.dispose.call(this)},e}(By);lp.add("surface",d_);var c_=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="point",this.parameters=Object.assign({pointSize:{type:"number",precision:1,max:100,min:0,buffer:!0},sizeAttenuation:{type:"boolean",buffer:!0},sortParticles:{type:"boolean",rebuild:!0},useTexture:{type:"boolean",buffer:!0},alphaTest:{type:"range",step:.001,max:1,min:0,buffer:!0},forceTransparent:{type:"boolean",buffer:!0},edgeBleach:{type:"range",step:.001,max:1,min:0,buffer:!0}},this.parameters,{flatShaded:null,wireframe:null,linewidth:null,roughness:null,metalness:null}),this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};this.pointSize=gr(i.pointSize,1),this.sizeAttenuation=gr(i.sizeAttenuation,!0),this.sortParticles=gr(i.sortParticles,!1),this.useTexture=gr(i.useTexture,!1),this.alphaTest=gr(i.alphaTest,.5),this.forceTransparent=gr(i.forceTransparent,!1),this.edgeBleach=gr(i.edgeBleach,0),t.prototype.init.call(this,i)},e.prototype.createData=function(t){var e={position:!0,color:!0,picking:!0},i=t.getAtomData(this.getAtomParams(e));return{bufferList:[new Dy(i,this.getBufferParams({pointSize:this.pointSize,sizeAttenuation:this.sizeAttenuation,sortParticles:this.sortParticles,useTexture:this.useTexture,alphaTest:this.alphaTest,forceTransparent:this.forceTransparent,edgeBleach:this.edgeBleach}))]}},e.prototype.updateData=function(t,e){var i=e.sview.getAtomData(this.getAtomParams(t)),n={};t&&!t.position||(n.position=i.position),t&&!t.color||(n.color=i.color),e.bufferList[0].setAttributes(n)},e}(By);lp.add("point",c_),dp.add("shader/Ribbon.vert","#define STANDARD\nuniform float nearClip;\nuniform vec3 clipCenter;\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )\nvarying vec3 vViewPosition;\n#endif\n#if defined( RADIUS_CLIP )\nvarying vec3 vClipCenter;\n#endif\nattribute vec3 dir;\nattribute float size;\n#ifdef PICKING\n#include unpack_color\nattribute float primitiveId;\nvarying vec3 vPickingColor;\n#else\n#include color_pars_vertex\n#ifndef FLAT_SHADED\nvarying vec3 vNormal;\n#endif\n#endif\n#include common\nvoid main(void){\n#ifdef PICKING\nvPickingColor = unpackColor( primitiveId );\n#else\n#include color_vertex\n#include beginnormal_vertex\n#include defaultnormal_vertex\n#ifndef FLAT_SHADED\nvNormal = normalize( transformedNormal );\n#endif\n#endif\n#include begin_vertex\ntransformed += normalize( dir ) * size;\n#include project_vertex\n#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )\nvViewPosition = -mvPosition.xyz;\n#endif\n#if defined( RADIUS_CLIP )\nvClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\n#endif\n#include nearclip_vertex\n}");var f_=new Uint16Array([0,1,2,1,3,2]),p_=function(t){function e(e,i){var n=e||{},r=n.position.length/3-1,o=4*r,s=3*o,a=new Float32Array(s),h=new Float32Array(s),l=new Float32Array(s),u=Or(s,s/3);t.call(this,{position:a,color:h,index:u,normal:l,picking:n.picking},i),this.addAttributes({dir:{type:"v3",value:new Float32Array(s)}}),this.addAttributes({size:{type:"f",value:new Float32Array(o)}}),n.primitiveId=wo(r),this.setAttributes(n),this.meshIndex=u,this.makeIndex()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={vertexShader:{}};return e.prototype.setAttributes=function(t){var e,i,n,r,o,s,a,h,l,u,d,c,f=this.size,p=f/4,m=this.geometry.attributes;t.position&&(e=t.position,a=m.position.array,m.position.needsUpdate=!0),t.normal&&(i=t.normal,h=m.normal.array,m.normal.needsUpdate=!0),t.size&&(n=t.size,l=m.size.array,m.size.needsUpdate=!0),t.dir&&(r=t.dir,u=m.dir.array,m.dir.needsUpdate=!0),t.color&&(o=t.color,d=m.color.array,m.color.needsUpdate=!0),t.primitiveId&&(s=t.primitiveId,c=m.primitiveId.array,m.primitiveId.needsUpdate=!0);var v,g,y,b,_,w,x,S=n?n[0]:null;for(v=0;v<p;++v){for(w=3*v,y=3*v*4,_=4*v,e&&(a[y]=a[y+3]=e[w],a[y+1]=a[y+4]=e[w+1],a[y+2]=a[y+5]=e[w+2],a[y+6]=a[y+9]=e[w+3],a[y+7]=a[y+10]=e[w+4],a[y+8]=a[y+11]=e[w+5]),i&&(h[y]=h[y+3]=-i[w],h[y+1]=h[y+4]=-i[w+1],h[y+2]=h[y+5]=-i[w+2],h[y+6]=h[y+9]=-i[w+3],h[y+7]=h[y+10]=-i[w+4],h[y+8]=h[y+11]=-i[w+5]),g=0;g<4;++g)b=y+3*g,o&&(d[b]=o[w],d[b+1]=o[w+1],d[b+2]=o[w+2]),s&&(c[_+g]=s[v]);n&&(x=n[v],S!==n[v]?(l[_]=S,l[_+1]=S,l[_+2]=x,l[_+3]=x):(l[_]=x,l[_+1]=x,l[_+2]=x,l[_+3]=x),S=x),r&&(u[y]=r[w],u[y+1]=r[w+1],u[y+2]=r[w+2],u[y+3]=-r[w],u[y+4]=-r[w+1],u[y+5]=-r[w+2],u[y+6]=r[w+3],u[y+7]=r[w+4],u[y+8]=r[w+5],u[y+9]=-r[w+3],u[y+10]=-r[w+4],u[y+11]=-r[w+5])}},e.prototype.makeIndex=function(){var t,e,i,n,r=this.meshIndex,o=r.length/4/3;for(e=0;e<o;++e)for(i=6*e,n=4*e,r.set(f_,i),t=0;t<6;++t)r[i+t]+=n},i.vertexShader.get=function(){return"Ribbon.vert"},Object.defineProperties(e.prototype,i),e}(Lg),m_=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="ribbon",this.parameters=Object.assign({subdiv:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1},smoothSheet:{type:"boolean",rebuild:!0}},this.parameters,{side:null,wireframe:null,linewidth:null}),this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.colorScheme=gr(i.colorScheme,"chainname"),i.colorScale=gr(i.colorScale,"RdYlBu"),i.radius=gr(i.radius,"sstruc"),i.scale=gr(i.scale,4),"low"===i.quality?this.subdiv=3:"medium"===i.quality?this.subdiv=6:"high"===i.quality?this.subdiv=12:this.subdiv=gr(i.subdiv,6),this.tension=gr(i.tension,NaN),this.smoothSheet=gr(i.smoothSheet,!1),t.prototype.init.call(this,i)},e.prototype.getSplineParams=function(t){return Object.assign({subdiv:this.subdiv,tension:this.tension,directional:!0,smoothSheet:this.smoothSheet},t)},e.prototype.createData=function(t){var e=this,i=[],n=[];return this.structure.eachPolymer(function(t){if(!(t.residueCount<4)){n.push(t);var r=new Ca(t,e.getSplineParams()),o=r.getSubdividedPosition(),s=r.getSubdividedOrientation(),a=r.getSubdividedColor(e.getColorParams()),h=r.getSubdividedPicking(),l=r.getSubdividedSize(e.radius,e.scale);i.push(new p_({position:o.position,normal:s.binormal,dir:s.normal,color:a.color,size:l.size,picking:h.picking},e.getBufferParams()))}},t.getSelection()),{bufferList:i,polymerList:n}},e.prototype.updateData=function(t,e){var i=this;t=t||{};var n=0,r=e.polymerList.length;for(n=0;n<r;++n){var o={},s=new Ca(e.polymerList[n],i.getSplineParams());if(t.position){var a=s.getSubdividedPosition(),h=s.getSubdividedOrientation();o.position=a.position,o.normal=h.binormal,o.dir=h.normal}if(t.radius||t.scale){var l=s.getSubdividedSize(i.radius,i.scale);o.size=l.size}if(t.color){var u=s.getSubdividedColor(i.getColorParams());o.color=u.color}e.bufferList[n].setAttributes(o)}},e.prototype.setParameters=function(e){var i={};return e&&e.tension&&(i.position=!0),t.prototype.setParameters.call(this,e,i,!1),this},e}(By);lp.add("ribbon",m_);var v_=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="rocket",this.parameters=Object.assign({localAngle:{type:"integer",max:180,min:0,rebuild:!0},centerDist:{type:"number",precision:1,max:10,min:0,rebuild:!0},ssBorder:{type:"boolean",rebuild:!0},radialSegments:!0,openEnded:!0,disableImpostor:!0},this.parameters),this.helixbundleList=[],this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.colorScheme=gr(i.colorScheme,"sstruc"),i.radius=gr(i.radius,1.5),i.scale=gr(i.scale,1),i.openEnded=gr(i.openEnded,!1),this.localAngle=gr(i.localAngle,30),this.centerDist=gr(i.centerDist,2.5),this.ssBorder=gr(i.ssBorder,!1),t.prototype.init.call(this,i)},e.prototype.createData=function(t){var e=this,i=0,n=[],r=[];this.structure.eachPolymer(function(t){if(!(t.residueCount<4||t.isNucleic())){var o=new Vs(t),s=o.getAxis(e.localAngle,e.centerDist,e.ssBorder,e.getColorParams(),e.radius,e.scale);i+=s.size.length,n.push(s),r.push(o)}},t.getSelection());var o={begin:new Float32Array(3*i),end:new Float32Array(3*i),size:new Float32Array(i),color:new Float32Array(3*i),picking:new Float32Array(i)},s=0;return n.forEach(function(t){o.begin.set(t.begin,3*s),o.end.set(t.end,3*s),o.size.set(t.size,s),o.color.set(t.color,3*s),o.picking.set(t.picking.array,s),s+=t.size.length}),i&&(o.picking=new Wm(o.picking,t.getStructure())),{bufferList:[new hy({position1:o.begin,position2:o.end,color:o.color,color2:o.color,radius:o.size,picking:o.picking},this.getBufferParams({openEnded:this.openEnded,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0}))],axisList:n,helixbundleList:r,axisData:o}},e.prototype.updateData=function(t,e){var i=this;if(t=t||{},t.position)return void this.build();var n={};if(t.color||t.radius){var r=0;e.helixbundleList.forEach(function(n){var o=n.getAxis(i.localAngle,i.centerDist,i.ssBorder,i.getColorParams(),i.radius,i.scale);t.color&&e.axisData.color.set(o.color,3*r),(t.radius||t.scale)&&e.axisData.size.set(o.size,r),r+=o.size.length}),t.color&&(n.color=e.axisData.color,n.color2=e.axisData.color),(t.radius||t.scale)&&(n.radius=e.axisData.size)}e.bufferList[0].setAttributes(n)},e}(By);lp.add("rocket",v_);var g_=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="rope",this.parameters=Object.assign({smooth:{type:"integer",max:15,min:0,rebuild:!0}},this.parameters,{aspectRatio:null,smoothSheet:null})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.aspectRatio=1,i.tension=gr(i.tension,.5),i.scale=gr(i.scale,5),i.smoothSheet=!1,this.smooth=gr(i.smooth,2),t.prototype.init.call(this,i)},e.prototype.getSpline=function(t){var e=new Hs(t);return new Ca(t,this.getSplineParams({directional:!1,positionIterator:e.getCenterIterator(this.smooth)}))},e}(Xb);lp.add("rope",g_);var y_=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="spacefill",this.parameters=Object.assign({sphereDetail:!0,disableImpostor:!0},this.parameters),this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};t.prototype.init.call(this,i)},e.prototype.createData=function(t){return{bufferList:[new Yg(t.getAtomData(this.getAtomParams()),this.getBufferParams({sphereDetail:this.sphereDetail,dullInterior:!0,disableImpostor:this.disableImpostor}))]}},e.prototype.updateData=function(t,e){var i=e.sview.getAtomData(this.getAtomParams(t)),n={};t&&!t.position||(n.position=i.position),t&&!t.color||(n.color=i.color),t&&!t.radius||(n.radius=i.radius),e.bufferList[0].setAttributes(n)},e}(By);lp.add("spacefill",y_);var b_=function(t){function e(e,i){var n=e||{},r=i||{},o=n.position.length/3,s=o-1,a=new Float32Array(3*s*2),h=new Float32Array(3*s*2);t.call(this,{position:a,color:h},r),this.setAttributes(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={isLine:{},vertexShader:{},fragmentShader:{}};return e.prototype.setAttributes=function(t){var e,i,n,r,o=this.geometry.attributes;if(t.position&&(e=t.position,n=o.position.array,o.position.needsUpdate=!0),t.color&&(i=t.color,r=o.color.array,o.color.needsUpdate=!0),!e&&!i)return void np.warn("TraceBuffer.prototype.setAttributes no data");for(var s,a,h=this.size,l=h-1,u=0;u<l;++u)s=3*u,a=3*u*2,e&&(n[a]=e[s],n[a+1]=e[s+1],n[a+2]=e[s+2],n[a+3]=e[s+3],n[a+4]=e[s+4],n[a+5]=e[s+5]),i&&(r[a]=i[s],r[a+1]=i[s+1],r[a+2]=i[s+2],r[a+3]=i[s+3],r[a+4]=i[s+4],r[a+5]=i[s+5])},i.isLine.get=function(){return!0},i.vertexShader.get=function(){return"Line.vert"},i.fragmentShader.get=function(){return"Line.frag"},Object.defineProperties(e.prototype,i),e}(Ig),__=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="trace",this.parameters=Object.assign({subdiv:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1},smoothSheet:{type:"boolean",rebuild:!0}},this.parameters,{flatShaded:null,side:null,wireframe:null}),this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.colorScheme=gr(i.colorScheme,"chainname"),i.colorScale=gr(i.colorScale,"RdYlBu"),"low"===i.quality?this.subdiv=3:"medium"===i.quality?this.subdiv=6:"high"===i.quality?this.subdiv=12:this.subdiv=gr(i.subdiv,6),this.tension=gr(i.tension,NaN),this.smoothSheet=gr(i.smoothSheet,!1),t.prototype.init.call(this,i)},e.prototype.getSplineParams=function(t){return Object.assign({subdiv:this.subdiv,tension:this.tension,directional:!1,smoothSheet:this.smoothSheet},t)},e.prototype.createData=function(t){var e=this,i=[],n=[];return this.structure.eachPolymer(function(t){if(!(t.residueCount<4)){n.push(t);var r=new Ca(t,e.getSplineParams()),o=r.getSubdividedPosition(),s=r.getSubdividedColor(e.getColorParams());i.push(new b_(Object.assign({},o,s),e.getBufferParams()))}},t.getSelection()),{bufferList:i,polymerList:n}},e.prototype.updateData=function(t,e){var i=this;t=t||{};var n=0,r=e.polymerList.length;for(n=0;n<r;++n){var o={},s=new Ca(e.polymerList[n],i.getSplineParams());if(t.position){var a=s.getSubdividedPosition();o.position=a.position}if(t.color){var h=s.getSubdividedColor(i.getColorParams());o.color=h.color}e.bufferList[n].setAttributes(o)}},e.prototype.setParameters=function(e){var i={};return e&&e.tension&&(i.position=!0),t.prototype.setParameters.call(this,e,i,!1),this},e}(By);lp.add("trace",__);var w_=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="tube",this.parameters=Object.assign({},this.parameters,{aspectRatio:null})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.aspectRatio=1,i.scale=gr(i.scale,2),"low"===i.quality&&(this.radialSegments=5),t.prototype.init.call(this,i)},e.prototype.getSplineParams=function(){return t.prototype.getSplineParams.call(this,{directional:!1})},e}(Xb);lp.add("tube",w_);var x_=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="unitcell",this.parameters=Object.assign({radius:{type:"number",precision:3,max:10,min:.001},sphereDetail:!0,radialSegments:!0,disableImpostor:!0},this.parameters,{assembly:null}),this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{},n=.5;this.structure.unitcell&&(n=Math.cbrt(this.structure.unitcell.volume)/200),i.radius=gr(i.radius,n),i.colorValue=gr(i.colorValue,"orange"),t.prototype.init.call(this,i)},e.prototype.getUnitcellData=function(t){return t.unitcell.getData(t)},e.prototype.create=function(){var t=this.structureView.getStructure();if(t.unitcell){var e=this.getUnitcellData(t);this.sphereBuffer=new Yg(e.vertex,this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0})),this.cylinderBuffer=new hy(e.edge,this.getBufferParams({openEnded:!0,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0})),this.dataList.push({sview:this.structureView,bufferList:[this.sphereBuffer,this.cylinderBuffer]})}},e.prototype.updateData=function(t,e){var i=e.sview.getStructure(),n=this.getUnitcellData(i),r={},o={};t&&!t.position||(r.position=n.vertexPosition,o.position1=n.edgePosition1,o.position2=n.edgePosition2),t&&!t.color||(r.color=n.vertexColor,o.color=n.edgeColor,o.color2=n.edgeColor),t&&!t.radius||(r.radius=n.vertexRadius,o.radius=n.edgeRadius),this.sphereBuffer.setAttributes(r),this.cylinderBuffer.setAttributes(o)},e}(By);lp.add("unitcell",x_);var S_=function(t){function e(e,i,n){t.call(this,e,i,n),this.type="validation",this.parameters=Object.assign({},this.parameters,{radiusType:null,radius:null,scale:null}),this.init(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(e){var i=e||{};i.colorValue=gr(i.colorValue,"#f0027f"),t.prototype.init.call(this,i)},e.prototype.createData=function(t){if(t.validation){var e=t.validation.getClashData({structure:t,color:this.colorValue});return{bufferList:[new hy(e,this.getBufferParams({openEnded:!1}))]}}},e}(By);lp.add("validation",S_);var k_=function(t,e){var i=e||{};this.streamer=t,this.name=gr(i.name,""),this.path=gr(i.path,"")},E_={type:{},__objName:{}};E_.type.get=function(){return""},E_.__objName.get=function(){return""},k_.prototype.parse=function(){var t=this;return this.streamer.read().then(function(){return t._beforeParse(),t._parse(),t._afterParse(),t[t.__objName]})},k_.prototype._parse=function(){},k_.prototype._beforeParse=function(){},k_.prototype._afterParse=function(){rp&&np.log(this[this.__objName])},Object.defineProperties(k_.prototype,E_);var M_=function(t){function e(e,i){var n=i||{};t.call(this,e,n),this.firstModelOnly=gr(n.firstModelOnly,!1),this.asTrajectory=gr(n.asTrajectory,!1),this.cAlphaOnly=gr(n.cAlphaOnly,!1),this.structure=new Tg(this.name,this.path),this.structureBuilder=new Na(this.structure)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{},__objName:{}};return i.type.get=function(){return"structure"},i.__objName.get=function(){return"structure"},Object.defineProperties(e.prototype,i),e}(k_),T_=function(t,e,i,n,r){this.structure=t,this.index=e,this.description=i||"",this.entityType=Fa(n||""),this.chainIndexList=r||[],r.forEach(function(i){t.chainStore.entityIndex[i]=e})},C_={type:{}};C_.type.get=function(){return"Entity"},T_.prototype.getEntityType=function(){return this.entityType},T_.prototype.isPolymer=function(){return this.entityType===hv},T_.prototype.isNonPolymer=function(){return this.entityType===lv},T_.prototype.isMacrolide=function(){return this.entityType===uv},T_.prototype.isWater=function(){return this.entityType===dv},T_.prototype.eachChain=function(t){var e=this.structure.getChainProxy();this.chainIndexList.forEach(function(i){e.index=i,t(e)})},Object.defineProperties(T_.prototype,C_);var O_=function(t){var e=t||{};this.a=e.a||1,this.b=e.b||1,this.c=e.c||1,this.alpha=e.alpha||90,this.beta=e.beta||90,this.gamma=e.gamma||90,this.spacegroup=e.spacegroup||"P 1",this.cartToFrac=e.cartToFrac||e.scale,this.fracToCart=new b;var i=Hr(this.alpha),n=Hr(this.beta),r=Hr(this.gamma),o=Math.cos(i),s=Math.cos(n),a=Math.cos(r),h=Math.sin(n),l=Math.sin(r);if(this.volume=this.a*this.b*this.c*Math.sqrt(1-o*o-s*s-a*a+2*o*s*a),void 0===this.cartToFrac){var u=this.a*this.b*l/this.volume,d=(s*a-o)/(h*l);this.fracToCart.set(this.a,0,0,0,this.b*a,this.b*l,0,0,this.c*s,-this.c*h*d,1/u,0,0,0,0,1).transpose(),this.cartToFrac=(new b).getInverse(this.fracToCart)}else this.fracToCart.getInverse(this.cartToFrac)};O_.prototype.getPosition=function(t){function e(t,e,a){o.set(t,e,a).multiply(r).applyMatrix4(n.fracToCart).toArray(i,s),s+=3}var i=new Float32Array(24),n=t.unitcell,r=t.center.clone().applyMatrix4(n.cartToFrac).floor().multiplyScalar(2).addScalar(1),o=new y,s=0;return e(0,0,0),e(1,0,0),e(0,1,0),e(0,0,1),e(1,1,0),e(1,0,1),e(0,1,1),e(1,1,1),i},O_.prototype.getCenter=function(t){return _o(this.getPosition(t))},O_.prototype.getData=function(t,e){function i(t,e){a.fromArray(h,3*t).toArray(d,m),a.fromArray(h,3*e).toArray(c,m),m+=3}var n=e||{},r=gr(n.colorValue,"orange"),o=gr(n.radius,Math.cbrt(this.volume)/200),s=new it(r),a=new y,h=this.getPosition(t),l=bo(8,s.r,s.g,s.b),u=yo(8,o),d=new Float32Array(36),c=new Float32Array(36),f=bo(12,s.r,s.g,s.b),p=yo(12,o),m=0;i(0,1),i(0,2),i(0,3),i(1,4),i(1,5),i(2,6),i(3,5),i(4,7),i(5,7),i(2,4),i(7,6),i(3,6);var v=new nv(this,t);return{vertex:{position:h,color:l,radius:u,picking:v},edge:{position1:d,position2:c,color:f,color2:f,radius:p,picking:v}}};var P_={1:"h",2:"h",3:"i",4:"h",5:"g",6:"h",7:"h",8:"h",9:"h",10:"h","":"h"},A_=function(t){function e(e,i){var n=i||{};t.call(this,e,n),this.hex=gr(n.hex,!1)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"pdb"},e.prototype._parse=function(){function t(t,i,n){for(var r=t;r<i;++r)if(u=n[r],"ATOM  "===(d=u.substr(0,6))||"HETATM"===d){if(pt&&(Y?(Z?(o=new Float32Array(3*lt.count),q.push(o)):o=[],s=0):W||(Q={}),A=1,D=A.toString(),I=!0,pt=!1),W&&ft>0)continue;var ot=void 0,mt=void 0,vt=void 0,gt=void 0,yt=void 0;if(z){if(gt=u.split(B),yt=10===gt.length?1:0,y=gt[2],$&&"CA"!==y)continue;ot=parseFloat(gt[6-yt]),mt=parseFloat(gt[7-yt]),vt=parseFloat(gt[8-yt])}else{if(y=u.substr(12,4).trim(),$&&"CA"!==y)continue;ot=parseFloat(u.substr(30,8)),mt=parseFloat(u.substr(38,8)),vt=parseFloat(u.substr(46,8))}if(Y){var bt=3*s;if(o[bt+0]=ot,o[bt+1]=mt,o[bt+2]=vt,s+=1,Z)continue}var _t=void 0;z?(c=parseInt(gt[1]),_t="",_="H"===u[0]?1:0,f=yt?"":gt[4],p=parseInt(gt[5-yt]),g="",m=gt[3],w=parseFloat(gt[9-yt]),x="",v=0):(c=parseInt(u.substr(6,5),V),H&&99999===c&&(V=16),_="H"===u[0]?1:0,f=u[21].trim(),p=parseInt(u.substr(22,4),G)||1,H&&9999===p&&(G=16),g=u[26].trim(),m=u.substr(17,4).trim()||"MOL",w=parseFloat(u.substr(60,6)),x=u[16].trim(),v=parseFloat(u.substr(54,6)),e||(_t=u.substr(76,2).trim(),f||(f=u.substr(72,4).trim()))),lt.growIfFull(),lt.atomTypeId[ct]=ht.add(y,_t),lt.x[ct]=ot,lt.y[ct]=mt,lt.z[ct]=vt,lt.serial[ct]=c,lt.bfactor[ct]=isNaN(w)?0:w,lt.altloc[ct]=x.charCodeAt(0),lt.occupancy[ct]=isNaN(v)?0:v,_?R===f&&N===m&&(Dv.includes(m)||L===p&&F===g)||(A+=1,D=A.toString(),L=p,N=m,F=g):I||R===f||(A+=1,D=A.toString()),U.addAtom(ft,f,D,m,p,_,void 0,g),Q[c]=ct,ct+=1,I=!1,R=f}else if("CONECT"===d){var wt=Q[parseInt(u.substr(6,5))],xt=[11,16,21,26],St={};if(void 0===wt)continue;for(var kt=0;kt<4;++kt){var Et=parseInt(u.substr(xt[kt],5));if(!Number.isNaN(Et)&&void 0!==(Et=Q[Et]))if(wt<Et?(ut.index=wt,dt.index=Et):(ut.index=Et,dt.index=wt),void 0!==St[Et])j.bondStore.bondOrder[St[Et]]+=1;else{var Mt=ut.index+"|"+dt.index;void 0===tt[Mt]&&(tt[Mt]=!0,St[Et]=j.bondStore.count,j.bondStore.addBond(ut,dt,1))}}}else if("HELIX "===d){S=u[19].trim(),k=parseInt(u.substr(21,4)),E=u[25].trim(),M=u[31].trim(),T=parseInt(u.substr(33,4)),C=u[37].trim();var Tt=parseInt(u.substr(39,1));Tt=(P_[Tt]||P_[""]).charCodeAt(0),st.push([S,k,E,M,T,C,Tt])}else if("SHEET "===d)S=u[21].trim(),k=parseInt(u.substr(22,4)),E=u[26].trim(),M=u[32].trim(),T=parseInt(u.substr(33,4)),C=u[37].trim(),at.push([S,k,E,M,T,C]);else if("HETNAM"===d)rt[u.substr(11,3)]=u.substr(15).trim();else if("COMPND"===d){var Ct=u.substr(10,70).trim(),Ot=Ct.indexOf(":"),Pt=Ct.substring(0,Ot),At=void 0;it.includes(Pt)?(P=Pt,At=Ct.substring(Ot+2)):At=Ct,At=At.replace(/;$/,""),"MOL_ID"===P?(O={chainList:[],name:""},et.push(O)):"MOLECULE"===P?(O.name&&(O.name+=" "),O.name+=At):"CHAIN"===P&&Array.prototype.push.apply(O.chainList,At.split(/\s*,\s*/))}else if(u.startsWith("TER")){var Dt=j.getChainProxy(j.chainStore.count-1);nt[Dt.chainname]=Dt.index,A+=1,D=A.toString(),I=!0}else if("REMARK"===d&&"350"===u.substr(7,3)){if("BIOMOLECULE:"===u.substr(11,12)){var It=u.substr(23).trim();/^(0|[1-9][0-9]*)$/.test(It)&&(It="BU"+It),a=new rg(It),K[It]=a}else if("BIOMT"===u.substr(13,5)){var Rt=u.split(/\s+/),Lt=parseInt(u[18])-1;0===Lt&&(l=new b,h.matrixList.push(l));var Nt=l.elements;Nt[0+Lt]=parseFloat(Rt[4]),Nt[4+Lt]=parseFloat(Rt[5]),Nt[8+Lt]=parseFloat(Rt[6]),Nt[12+Lt]=parseFloat(Rt[7])}else if("APPLY THE FOLLOWING TO CHAINS:"===u.substr(11,30)||"                   AND CHAINS:"===u.substr(11,30)){"APPLY"===u.substr(11,5)&&(h=a.addPart());for(var Ft=u.substr(41,30).split(","),zt=0,Bt=Ft.length;zt<Bt;++zt){var jt=Ft[zt].trim();jt&&h.chainList.push(jt)}}}else if("HEADER"===d)j.id=u.substr(62,4);else if("TITLE "===d)j.title+=(j.title?" ":"")+u.substr(10,70).trim();else if("MODEL "===d)pt=!0;else if("ENDMDL"===d||u.startsWith("END")){if(pt)continue;Y&&!Z&&(q.push(new Float32Array(o)),Z=!0),ft+=1,pt=!0}else if("MTRIX"===u.substr(0,5)){if("1"===u[59])continue;var Ut=u.split(/\s+/),Ht=Ut[1].trim();if("1"===u[5]&&"1"===Ht){a=new rg("NCS"),K.NCS=a,h=a.addPart()}var Vt=parseInt(u[5])-1;0===Vt&&(l=new b,h.matrixList.push(l));var Gt=l.elements;Gt[0+Vt]=parseFloat(Ut[2]),Gt[4+Vt]=parseFloat(Ut[3]),Gt[8+Vt]=parseFloat(Ut[4]),Gt[12+Vt]=parseFloat(Ut[5])}else if("ORIGX"===u.substr(0,5)){J.origx||(J.origx=new b);var Wt=u.split(/\s+/),Yt=parseInt(u[5])-1,$t=J.origx.elements;$t[0+Yt]=parseFloat(Wt[1]),$t[4+Yt]=parseFloat(Wt[2]),$t[8+Yt]=parseFloat(Wt[3]),$t[12+Yt]=parseFloat(Wt[4])}else if("SCALE"===u.substr(0,5)){J.scale||(J.scale=new b);var qt=u.split(/\s+/),Xt=parseInt(u[5])-1,Zt=J.scale.elements;Zt[0+Xt]=parseFloat(qt[1]),Zt[4+Xt]=parseFloat(qt[2]),Zt[8+Xt]=parseFloat(qt[3]),Zt[12+Xt]=parseFloat(qt[4])}else if("CRYST1"===d){var Kt=parseFloat(u.substr(6,9)),Qt=parseFloat(u.substr(15,9)),Jt=parseFloat(u.substr(24,9)),te=parseFloat(u.substr(33,7)),ee=parseFloat(u.substr(40,7)),ie=parseFloat(u.substr(47,7)),ne=u.substr(55,11).trim(),re=new Float32Array(9);re[0]=Kt,re[4]=Qt,re[8]=Jt,X.push(re),0===ft&&(J.a=Kt,J.b=Qt,J.c=Jt,J.alpha=te,J.beta=ee,J.gamma=ie,J.spacegroup=ne)}}rp&&np.time("PdbParser._parse "+this.name);var e=!1,i=this.streamer.peekLines(1)[0],n=i.substr(62,4),r=i.substr(72,4);n===r&&r.trim()&&(e=!0);var o,s,a,h,l,u,d,c,f,p,m,v,g,y,_,w,x,S,k,E,M,T,C,O,P,A,D,I,R,L,N,F,z="pqr"===this.type,B=/\s+/,j=this.structure,U=this.structureBuilder,H=this.hex,V=10,G=10,W=this.firstModelOnly,Y=this.asTrajectory,$=this.cAlphaOnly,q=j.frames,X=j.boxes,Z=!1,K=j.biomolDict,Q={},J={},tt={},et=[],it=["MOL_ID","MOLECULE","CHAIN","FRAGMENT","SYNONYM","EC","ENGINEERED","MUTATION","OTHER_DETAILS"],nt={},rt={},ot={helices:[],sheets:[]},st=ot.helices,at=ot.sheets,ht=j.atomMap,lt=j.atomStore;lt.resize(Math.round(this.streamer.data.length/80));var ut=j.getAtomProxy(),dt=j.getAtomProxy(),ct=0,ft=0,pt=!0;this.streamer.eachChunkOfLines(function(e){t(0,e.length,e)});var mt=et.length;if(et.length){j.eachChain(function(t){t.entityIndex=mt}),et.forEach(function(t,e){var i=t.chainList.map(function(t){return nt[t]});j.entityList.push(new T_(j,e,t.name,"polymer",i))});var vt=et.length,gt=j.getResidueProxy(),yt={};j.eachChain(function(t){t.entityIndex===mt&&(gt.index=t.residueOffset,yt[gt.resname]||(yt[gt.resname]=[]),yt[gt.resname].push(t.index))}),Object.keys(yt).forEach(function(t){var e=yt[t],i="non-polymer",n=rt[t]||t;Dv.includes(t)&&(n="water",i="water"),j.entityList.push(new T_(j,vt,n,i,e)),vt+=1})}void 0!==J.a?j.unitcell=new O_(J):j.unitcell=void 0,(st.length||at.length)&&Xs(j,ot),U.finalize(),j.finalizeAtoms(),e||Zs(j),Ks(j),j.finalizeBonds(),st.length||at.length||hg(j),ia(j),rp&&np.timeEnd("PdbParser._parse "+this.name)},Object.defineProperties(e.prototype,i),e}(M_);up.add("pdb",A_),up.add("pdb1",A_),up.add("ent",A_);var D_=/\s+/,I_=/'((?:(?!'\s).)*)'|"((?:(?!"\s).)*)"|(\S+)/g,R_=/"/g,L_=/^['"]+|['"]+$/g,N_=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"cif"},e.prototype._parse=function(){function t(t,$,q){for(var X=t;X<$;++X)if(n=q[X],((r=n.trim())||A||R)&&"#"!==r[0])if("data_"===r.substring(0,5))C.data=r.substring(5).trim();else if(";"===r[0])A?(R?(F===N.length&&(F=0),N[F].push(D),F+=1):!1===B?C[z]=D:C[z][B]=D,A=!1,D=null):(A=!0,D=r.substring(1));else if("loop_"===r)R=!0,L=!0,N.length=0,U.length=0,F=0;else if("_"===r[0]){var Z,K,Q;if(R&&!L&&(R=!1),R)Z=r.split("."),K=Z[0].substring(1),Q=Z[1],1===Z.length?(Q=!1,C[K]||(C[K]=[]),N.push(C[K])):(C[K]||(C[K]={}),C[K][Q]?rp&&np.warn(K,Q,"already exists"):(C[K][Q]=[],N.push(C[K][Q]),U.push(Q))),z=K,B=Q,j=!0;else{var J=r.match(I_),tt=J[0],et=J[1];Z=tt.split("."),K=Z[0].substring(1),Q=Z[1],1===Z.length?(Q=!1,C[K]=et):(C[K]||(C[K]={}),C[K][Q]?rp&&np.warn(K,Q,"already exists"):C[K][Q]=et),et||(I=!0),z=K,B=Q}}else if(A)D+=n;else if(R){if(!r)continue;if("atom_site"===z){var it=r.split(D_);j&&(o=U.indexOf("auth_asym_id"),s=U.indexOf("auth_seq_id"),a=U.indexOf("label_atom_id"),h=U.indexOf("label_comp_id"),l=U.indexOf("label_asym_id"),u=U.indexOf("label_entity_id"),d=U.indexOf("label_alt_id"),g=U.indexOf("Cartn_x"),y=U.indexOf("Cartn_y"),b=U.indexOf("Cartn_z"),f=U.indexOf("id"),p=U.indexOf("type_symbol"),c=U.indexOf("group_PDB"),_=U.indexOf("B_iso_or_equiv"),m=U.indexOf("pdbx_PDB_model_num"),v=U.indexOf("pdbx_PDB_ins_code"),w=U.indexOf("occupancy"),j=!1,G=parseInt(it[m]),E&&(e=[],i=0));var nt=parseInt(it[m]);if(G!==nt&&(E&&(0===Y&&T.push(new Float32Array(e)),e=new Float32Array(3*V.count),T.push(e),i=0),Y+=1),G=nt,k&&Y>0)continue;var rt=it[a].replace(R_,"");if(M&&"CA"!==rt)continue;var ot=parseFloat(it[g]),st=parseFloat(it[y]),at=parseFloat(it[b]);if(E){var ht=3*i;if(e[ht+0]=ot,e[ht+1]=st,e[ht+2]=at,i+=1,Y>0)continue}var lt=it[h],ut=parseInt(it[s]),dt=it[v];dt="?"===dt?"":dt;var ct=it[o],ft=it[l],pt="H"===it[c][0]?1:0,mt=it[p],vt=parseFloat(it[_]),gt=parseFloat(it[w]),yt=it[d];if(yt="."===yt?"":yt,V.growIfFull(),V.atomTypeId[W]=H.add(rt,mt),V.x[W]=ot,V.y[W]=st,V.z[W]=at,V.serial[W]=parseInt(it[f]),V.bfactor[W]=isNaN(vt)?0:vt,V.occupancy[W]=isNaN(gt)?0:gt,V.altloc[W]=yt.charCodeAt(0),S.addAtom(Y,ct,ft,lt,ut,pt,void 0,dt),rp){var bt=O[ft];void 0!==bt&&bt!==ct&&rp&&np.warn(bt,ct)}O[ft]=ct;var _t=it[u];P[_t]||(P[_t]=new Set),P[_t].add(x.chainStore.count-1),W+=1}else{var wt=r.match(I_),xt=wt.length;F===N.length&&(F=0);for(var St=0;St<xt;++St)N[F+St].push(wt[St]);F+=xt}L=!1}else if("'"===r[0]&&"'"===r[r.length-1]){var kt=r.substring(1,r.length-1);!1===B?C[z]=kt:C[z][B]=kt}else I?!1===B?C[z]=r:C[z][B]=r:rp&&np.log("CifParser._parse: unknown state",r);else A=!1,R=!1,I=!1,N.length=0,F=null,z=null,B=null,j=null,U.length=0}np.time("CifParser._parse "+this.name);var e,i,n,r,o,s,a,h,l,u,d,c,f,p,m,v,g,y,b,_,w,x=this.structure,S=this.structureBuilder,k=this.firstModelOnly,E=this.asTrajectory,M=this.cAlphaOnly,T=x.frames,C={},O={},P={},A=!1,D=null,I=!1,R=!1,L=!1,N=[],F=null,z=null,B=null,j=null,U=[],H=x.atomMap,V=x.atomStore;V.resize(this.streamer.data.length/100);var G,W=0,Y=0;if(this.streamer.eachChunkOfLines(function(e){t(0,e.length,e)}),C.chem_comp&&C.chem_comp_atom)Va(C,x,S),S.finalize(),x.finalizeAtoms(),x.finalizeBonds(),ra(x);else if(C.atom_site_type_symbol&&C.atom_site_label&&C.atom_site_fract_x)Ga(C,x,S),S.finalize(),x.finalizeAtoms(),Ks(x),x.finalizeBonds();else{var $=Wa(C,x,O);if(Ya(C,x,O),$a(C,x,O),qa(C,x,P),C.struct&&C.struct.title&&(x.title=C.struct.title.trim().replace(L_,"")),C.entry&&C.entry.id&&(x.id=C.entry.id.trim().replace(L_,"")),C.database_PDB_rev){if(C.database_PDB_rev.date){Ba(C.database_PDB_rev,"date");var q=C.database_PDB_rev.date.filter(ja);q.length&&(x.header.releaseDate=q[q.length-1])}if(C.database_PDB_rev.date_original){Ba(C.database_PDB_rev,"date_original");var X=C.database_PDB_rev.date_original.filter(ja);X.length&&(x.header.depositionDate=X[X.length-1])}}C.reflns&&C.reflns.d_resolution_high?ja(C.reflns.d_resolution_high)&&(x.header.resolution=parseFloat(C.reflns.d_resolution_high)):C.refine&&C.refine.ls_d_res_high&&ja(C.refine.ls_d_res_high)&&(x.header.resolution=parseFloat(C.refine.ls_d_res_high)),C.refine&&C.refine.ls_R_factor_R_free&&ja(C.refine.ls_R_factor_R_free)&&(x.header.rFree=parseFloat(C.refine.ls_R_factor_R_free)),C.refine&&C.refine.ls_R_factor_R_work&&ja(C.refine.ls_R_factor_R_work)&&(x.header.rWork=parseFloat(C.refine.ls_R_factor_R_work)),C.exptl&&C.exptl.method&&(Ba(C.exptl,"method"),x.header.experimentalMethods=C.exptl.method.map(function(t){return t.replace(L_,"")})),S.finalize(),x.finalizeAtoms(),Ks(x),x.finalizeBonds(),$?Xs(x,$):hg(x),ia(x),x.extraData.cif=C}rp&&np.timeEnd("CifParser._parse "+this.name)},Object.defineProperties(e.prototype,i),e}(M_);up.add("cif",N_),up.add("mcif",N_),up.add("mmcif",N_);var F_=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"gro"},e.prototype._parse=function(){function t(t,n,u){for(var m=t;m<n;++m){++M;var T=M-1,C=u[m];if(C)if(T%w===0)s&&(e=new Float32Array(3*_),h.push(e),i=0);else if(T%w===1);else if(T%w===w-1){var O=C.trim().split(/\s+/),P=new Float32Array(9);if(P[0]=10*parseFloat(O[0]),P[4]=10*parseFloat(O[1]),P[8]=10*parseFloat(O[2]),l.push(P),o)return!0;E+=1}else{if(d=C.substr(10,5).trim(),a&&"CA"!==d)continue;var A=10*parseFloat(C.substr(g,v)),D=10*parseFloat(C.substr(y,v)),I=10*parseFloat(C.substr(b,v));if(s){var R=3*i;if(e[R+0]=A,e[R+1]=D,e[R+2]=I,i+=1,T>w)continue}c=C.substr(5,5).trim(),f=parseInt(C.substr(0,5)),p=parseInt(C.substr(15,5)),S.growIfFull(),S.atomTypeId[k]=x.add(d),S.x[k]=A,S.y[k]=D,S.z[k]=I,S.serial[k]=p,r.addAtom(E,"","",c,f,0,"l"),k+=1}}}rp&&np.time("GroParser._parse "+this.name);var e,i,n=this.structure,r=this.structureBuilder,o=this.firstModelOnly,s=this.asTrajectory,a=this.cAlphaOnly,h=n.frames,l=n.boxes,u=this.streamer.peekLines(3);n.title=u[0].trim();var d,c,f,p,m=u[2].length-u[2].lastIndexOf(".")-1,v=5+m,g=20,y=20+v,b=20+2*v,_=parseInt(u[1]),w=_+3,x=n.atomMap,S=n.atomStore;S.resize(_);var k=0,E=0,M=0;this.streamer.eachChunkOfLines(function(e){t(0,e.length,e)}),r.finalize(),n.finalizeAtoms(),Zs(n),Ks(n),n.finalizeBonds(),hg(n),rp&&np.timeEnd("GroParser._parse "+this.name)},Object.defineProperties(e.prototype,i),e}(M_);up.add("gro",F_);var z_=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],B_=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],j_=z_.concat(B_),U_={0:"i".charCodeAt(0),1:"s".charCodeAt(0),2:"h".charCodeAt(0),3:"e".charCodeAt(0),4:"g".charCodeAt(0),5:"b".charCodeAt(0),6:"t".charCodeAt(0),7:"l".charCodeAt(0),"-1":"".charCodeAt(0)},H_=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"mmtf"},e.prototype._parse=function(){rp&&np.time("MmtfParser._parse "+this.name);var t,e,i,n,r,o=this.structure,s=vh(ph(this.streamer.data));["depositionDate","releaseDate","resolution","rFree","rWork","experimentalMethods"].forEach(function(t){void 0!==s[t]&&(o.header[t]=s[t])});var a,h,l,u,d,c;if(o.id=s.structureId,o.title=s.title,this.firstModelOnly||this.asTrajectory){for(d=1,u=s.chainsPerModel[0],l=0,t=0,e=u;t<e;++t)l+=s.groupsPerChain[t];for(h=0,t=0,e=l;t<e;++t)r=s.groupList[s.groupTypeList[t]],h+=r.atomNameList.length;a=s.numBonds,c=[u]}else a=s.numBonds,h=s.numAtoms,l=s.numGroups,u=s.numChains,d=s.numModels,c=s.chainsPerModel;if(a+=l,this.asTrajectory)for(t=0,e=s.numModels;t<e;++t){var f=new Float32Array(3*h),p=h*t;for(i=0;i<h;++i){var m=3*i,v=i+p;f[m]=s.xCoordList[v],f[m+1]=s.yCoordList[v],f[m+2]=s.zCoordList[v]}o.frames.push(f)}var g=new Uint32Array(a),y=new Uint32Array(a),_=new Uint8Array(a),w=new Uint32Array(h),x=new Uint32Array(l),S=new Uint32Array(l),k=new Uint16Array(l),E=new Uint16Array(u),M=new Uint32Array(u),T=new Uint32Array(u),C=new Uint32Array(d),O=new Uint32Array(d),P=0;for(t=0,e=d;t<e;++t){var A=c[t];for(C[t]=P,O[t]=A,i=0;i<A;++i)E[i+P]=t;P+=A}var D=s.groupsPerChain,I=0;for(t=0,e=u;t<e;++t){var R=D[t];for(M[t]=I,T[t]=R,i=0;i<R;++i)x[i+I]=t;I+=R}var L=0,N=0;for(t=0,e=l;t<e;++t){r=s.groupList[s.groupTypeList[t]];var F=r.atomNameList.length,z=r.bondAtomList,B=r.bondOrderList;for(i=0,n=B.length;i<n;++i)g[N]=L+z[2*i],y[N]=L+z[2*i+1],_[N]=B[i],N+=1;for(S[t]=L,k[t]=F,i=0;i<F;++i)w[L]=t,L+=1}var j=s.bondAtomList;if(j)for(s.bondOrderList&&_.set(s.bondOrderList,N),t=0,e=j.length;t<e;t+=2){var U=j[t],H=j[t+1];U<h&&H<h&&(g[N]=U,y[N]=H,N+=1)}o.bondStore.length=_.length,o.bondStore.count=N,o.bondStore.atomIndex1=g,o.bondStore.atomIndex2=y,o.bondStore.bondOrder=_,o.atomStore.length=h,o.atomStore.count=h,o.atomStore.residueIndex=w,o.atomStore.atomTypeId=new Uint16Array(h),o.atomStore.x=s.xCoordList.subarray(0,h),o.atomStore.y=s.yCoordList.subarray(0,h),o.atomStore.z=s.zCoordList.subarray(0,h),o.atomStore.serial=s.atomIdList.subarray(0,h),o.atomStore.bfactor=s.bFactorList.subarray(0,h),o.atomStore.altloc=s.altLocList.subarray(0,h),o.atomStore.occupancy=s.occupancyList.subarray(0,h),o.residueStore.length=l,o.residueStore.count=l,o.residueStore.chainIndex=x,o.residueStore.residueTypeId=s.groupTypeList,o.residueStore.atomOffset=S,o.residueStore.atomCount=k,o.residueStore.resno=s.groupIdList.subarray(0,l),o.residueStore.sstruc=s.secStructList.subarray(0,l),o.residueStore.inscode=s.insCodeList.subarray(0,l),o.chainStore.length=u,o.chainStore.count=u,o.chainStore.entityIndex=new Uint16Array(u),o.chainStore.modelIndex=E,o.chainStore.residueOffset=M,o.chainStore.residueCount=T,o.chainStore.chainname=s.chainNameList.subarray(0,4*u),o.chainStore.chainid=s.chainIdList.subarray(0,4*u),o.modelStore.length=d,o.modelStore.count=d,o.modelStore.chainOffset=C,o.modelStore.chainCount=O;var V={};for(t=0,e=s.groupList.length;t<e;++t){var G=s.groupList[t],W=[];for(i=0,n=G.atomNameList.length;i<n;++i){var Y=G.elementList[i].toUpperCase(),$=G.atomNameList[i];W.push(o.atomMap.add($,Y))}var q=G.chemCompType.toUpperCase(),X=bv.includes(q),Z=G.bondOrderList.length,K=new Array(Z),Q=new Array(Z);for(i=0;i<Z;++i)K[i]=G.bondAtomList[2*i],Q[i]=G.bondAtomList[2*i+1];var J={atomIndices1:K,atomIndices2:Q,bondOrders:G.bondOrderList};V[t]=o.residueMap.add(G.groupName,W,X,q,J)}for(t=0,e=l;t<e;++t)o.residueStore.residueTypeId[t]=V[o.residueStore.residueTypeId[t]];for(t=0,e=o.atomStore.count;t<e;++t){var tt=o.atomStore.residueIndex[t],et=o.residueMap.list[o.residueStore.residueTypeId[tt]],it=o.residueStore.atomOffset[tt];o.atomStore.atomTypeId[t]=et.atomTypeIdList[t-it]}if(s.secStructList){var nt=s.secStructList.length;for(t=0,e=o.residueStore.count;t<e;++t){var rt=U_[o.residueStore.sstruc[t%nt]];void 0!==rt&&(o.residueStore.sstruc[t]=rt)}}if(s.entityList&&s.entityList.forEach(function(t,e){o.entityList[e]=new T_(o,e,t.description,t.type,t.chainIndexList)}),s.bioAssemblyList&&s.bioAssemblyList.forEach(function(t,e){var i=e+1,n=new rg(i);o.biomolDict["BU"+i]=n;var r={};t.transformList.forEach(function(t){var e=(new b).fromArray(t.matrix).transpose(),i=t.chainIndexList.map(function(t){for(var e="",i=0;i<4;++i){var n=s.chainNameList[4*t+i];if(!n)break;e+=String.fromCharCode(n)}return e}),o=r[i];o?o.matrixList.push(e):r[i]=n.addPart([e],i)})}),s.ncsOperatorList){var ot=new rg("NCS"),st=ot.addPart();s.ncsOperatorList.forEach(function(t){var e=(new b).fromArray(t).transpose();st.matrixList.push(e)}),st.matrixList.length>0&&(o.biomolDict.NCS=ot)}var at=s.unitCell;at&&Array.isArray(at)&&at[0]?o.unitcell=new O_({a:at[0],b:at[1],c:at[2],alpha:at[3],beta:at[4],gamma:at[5],spacegroup:s.spaceGroup}):o.unitcell=void 0,ea(o,!0),ta(o,!0),o.finalizeAtoms(),o.finalizeBonds(),ia(o),rp&&np.timeEnd("MmtfParser._parse "+this.name)},Object.defineProperties(e.prototype,i),e}(M_);up.add("mmtf",H_);var V_=/\s+/,G_=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"mol2"},e.prototype._parse=function(){function t(t,S,k){for(var E,M=t;M<S;++M){var T=k[M].trim();if(""!==T&&"#"!==T[0])if("@"===T[0])"@<TRIPOS>MOLECULE"===T?(v=g,c=0,++p):"@<TRIPOS>ATOM"===T?(v=y,f=u.count,s&&(i=0,e=new Float32Array(3*m),a.push(e),p>0&&(h=!0))):v="@<TRIPOS>BOND"===T?b:0;else if(v===g)0===c?(n.title=T,n.id=T):1===c&&(E=T.split(V_),m=parseInt(E[0])),++c;else if(v===y){if(E=T.split(V_),o&&p>0)continue;var C=parseFloat(E[2]),O=parseFloat(E[3]),P=parseFloat(E[4]);if(s){var A=3*i;if(e[A+0]=C,e[A+1]=O,e[A+2]=P,i+=1,h)continue}var D=E[0],I=E[1],R=E[5].split(".")[0],L=E[6]?parseInt(E[6]):1,N=E[7]?E[7]:"",F=E[8]?parseFloat(E[8]):0;u.growIfFull(),u.atomTypeId[d]=l.add(I,R),u.x[d]=C,u.y[d]=O,u.z[d]=P,u.serial[d]=D,u.bfactor[d]=F,r.addAtom(p,"","",N,L,1),d+=1}else if(v===b){if(o&&p>0)continue;if(s&&p>0)continue;E=T.split(V_),_.index=parseInt(E[1])-1+f,w.index=parseInt(E[2])-1+f;var z=x[E[3]];n.bondStore.addBond(_,w,z)}}}rp&&np.time("Mol2Parser._parse "+this.name);var e,i,n=this.structure,r=this.structureBuilder,o=this.firstModelOnly,s=this.asTrajectory,a=n.frames,h=!1,l=n.atomMap,u=n.atomStore;u.resize(Math.round(this.streamer.data.length/60));var d=0,c=0,f=0,p=-1,m=0,v=0,g=1,y=2,b=3,_=n.getAtomProxy(),w=n.getAtomProxy(),x={1:1,2:2,3:3,am:1,ar:1,du:1,un:1,nc:0};this.streamer.eachChunkOfLines(function(e){t(0,e.length,e)}),r.finalize(),n.finalizeAtoms(),Zs(n),ta(n,!0),ea(n,!0),n.finalizeBonds(),ra(n),hg(n),rp&&np.timeEnd("Mol2Parser._parse "+this.name)},Object.defineProperties(e.prototype,i),e}(M_);up.add("mol2",G_);var W_=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"pqr"},Object.defineProperties(e.prototype,i),e}(A_);up.add("pqr",W_);var Y_=1,$_=2,q_=3,X_=4,Z_=5,K_=6,Q_=/\s+/,J_=/(^\*|REMARK)*/,tw=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"psf"},e.prototype._parse=function(){function t(t,o,c){for(var f=t;f<o;++f){var p=c[f].trim();if(p)if(e===$_){var m=p.split(Q_),v=parseInt(m[0]),g=parseInt(m[2]),y=m[3],b=m[4];h.growIfFull(),h.atomTypeId[u]=a.add(b),h.serial[u]=v,s.addAtom(0,"","",y,g,1),u+=1}else if(e===q_)for(var _=p.split(Q_),w=0,x=_.length;w<x;w+=2)i[d]=parseInt(_[w])-1,n[d]=parseInt(_[w+1])-1,r[d]=1,d+=1;else if(e===Y_)l.push(p.replace(J_,"").trim());else if(e===X_);else if(e===Z_);else if(e===K_);else if(p.includes("!NATOM")){e=$_;var S=parseInt(p.split(Q_)[0]);h.resize(S)}else if(p.includes("!NBOND")){e=q_;var k=parseInt(p.split(Q_)[0]);i=new Uint32Array(k),n=new Uint32Array(k),r=new Uint8Array(k)}else p.includes("!NTITLE")?e=Y_:p.includes("!NTHETA")?e=X_:p.includes("!NPHI")?e=Z_:p.includes("!NIMPHI")&&(e=K_);else e=void 0}}rp&&np.time("PsfParser._parse "+this.name);var e,i,n,r,o=this.structure,s=this.structureBuilder,a=o.atomMap,h=o.atomStore,l=[],u=0,d=0;this.streamer.eachChunkOfLines(function(e){t(0,e.length,e)}),o.title=l.join(" "),o.bondStore.length=r.length,o.bondStore.count=d,o.bondStore.atomIndex1=i,o.bondStore.atomIndex2=n,o.bondStore.bondOrder=r,s.finalize(),o.finalizeAtoms(),Zs(o),o.finalizeBonds(),ra(o),rp&&np.timeEnd("PsfParser._parse "+this.name)},Object.defineProperties(e.prototype,i),e}(M_);up.add("psf",tw);var ew=/> <(.+)>/,iw=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"sdf"},e.prototype._parse=function(){function t(t,o,C){for(var O=t;O<o;++O){var P=C[O];if("$$$$"===P.substr(0,4))v=-1,++g,y=d.count,b.push(w),w={},_=!1;else if(3===v)x=parseInt(P.substr(0,3)),S=parseInt(P.substr(3,3)),k=4,E=k+x,M=E,T=M+S,r&&(a=0,s=new Float32Array(3*x),h.push(s),g>0&&(l=!0));else if(v>=k&&v<E){if(n&&g>0)continue;var A=parseFloat(P.substr(0,10)),D=parseFloat(P.substr(10,10)),I=parseFloat(P.substr(20,10));if(r){var R=3*a;if(s[R+0]=A,s[R+1]=D,s[R+2]=I,a+=1,l)continue}var L=P.substr(31,3).trim(),N=L+(m+1);d.growIfFull(),d.atomTypeId[m]=u.add(N,L),d.x[m]=A,d.y[m]=D,d.z[m]=I,d.serial[m]=m,i.addAtom(g,"","","HET",1,1),m+=1}else if(v>=M&&v<T){if(n&&g>0)continue;if(r&&g>0)continue;f.index=parseInt(P.substr(0,3))-1+y,p.index=parseInt(P.substr(3,3))-1+y;var F=parseInt(P.substr(6,3));e.bondStore.addBond(f,p,F)}else(c=P.match(ew))?(_=c[1],w[_]=[]):!1!==_&&P&&w[_].push(P);++v}}rp&&np.time("SdfParser._parse "+this.name);var e=this.structure,i=this.structureBuilder,n=this.firstModelOnly,r=this.asTrajectory,o=this.streamer.peekLines(2);e.id=o[0].trim(),e.title=o[1].trim();var s,a,h=e.frames,l=!1,u=e.atomMap,d=e.atomStore;d.resize(Math.round(this.streamer.data.length/50));var c,f=e.getAtomProxy(),p=e.getAtomProxy(),m=0,v=0,g=0,y=0,b=[],_=!1,w={};e.extraData.sdf=b;var x,S,k,E,M,T;this.streamer.eachChunkOfLines(function(e){t(0,e.length,e)}),i.finalize(),e.finalizeAtoms(),e.finalizeBonds(),ra(e),rp&&np.timeEnd("SdfParser._parse "+this.name)},e.prototype._postProcess=function(){ra(this.structure)},Object.defineProperties(e.prototype,i),e}(M_);up.add("sdf",iw),up.add("sd",iw);var nw=function(t,e){this.name=t,this.path=e,this.coordinates=[],this.boxes=[]},rw={type:{}};rw.type.get=function(){return"Frames"},Object.defineProperties(nw.prototype,rw);var ow=function(t){function e(e,i){t.call(this,e,i),this.frames=new nw(this.name,this.path)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{},__objName:{}};return i.type.get=function(){return"trajectory"},i.__objName.get=function(){return"frames"},Object.defineProperties(e.prototype,i),e}(k_),sw=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"dcd"},e.prototype._parse=function(){rp&&np.time("DcdParser._parse "+this.name);var t=this.streamer.data;t instanceof Uint8Array&&(t=t.buffer);var e,i,n=new DataView(t),r=this.frames,o=r.coordinates,s=r.boxes,a={},h=0,l=new Int32Array(t,0,23),u=l[0]!==n.getInt32(0);if(84!==l[0])for(i=t.byteLength,e=0;e<i;e+=4)n.setFloat32(e,n.getFloat32(e),!0);84!==l[0]&&np.error("dcd bad format, header block start"),"CORD"!==String.fromCharCode(n.getUint8(4),n.getUint8(5),n.getUint8(6),n.getUint8(7))&&np.error("dcd bad format, format string");var d=!1,c=!1,f=!1;0!==l[22]&&(d=!0,0!==l[12]&&(c=!0),1===l[13]&&(f=!0)),a.NSET=l[2],a.ISTART=l[3],a.NSAVC=l[4],a.NAMNF=l[10],a.DELTA=d?n.getFloat32(44,u):n.getFloat64(44,u),84!==l[22]&&np.error("dcd bad format, header block end"),h=h+84+8;var p=n.getInt32(h,u),m=h+1;if((p-4)%80!==0&&np.error("dcd bad format, title block start"),a.TITLE=Mr(new Uint8Array(t,m,p)),n.getInt32(m+p+4-1,u)!==p&&np.error("dcd bad format, title block end"),h=h+p+8,4!==n.getInt32(h,u)&&np.error("dcd bad format, natom block start"),a.NATOM=n.getInt32(h+4,u),4!==n.getInt32(h+8,u)&&np.error("dcd bad format, natom block end"),h=h+4+8,a.NAMNF>0)return void np.error("dcd format with fixed atoms unsupported, aborting");var v=a.NATOM,g=4*v;for(e=0,i=a.NSET;e<i;++e){if(c){h+=4;var y=new Float32Array(9);y[0]=n.getFloat64(h,u),y[4]=n.getFloat64(h+16,u),y[8]=n.getFloat64(h+40,u),s.push(y),h+=48,h+=4}for(var b=new Float32Array(3*v),_=0;_<3;++_){n.getInt32(h,u)!==g&&np.error("dcd bad format, coord block start",e,_),h+=4;for(var w=new Float32Array(t,h,v),x=0;x<v;++x)b[3*x+_]=w[x];h+=g,n.getInt32(h,u)!==g&&np.error("dcd bad format, coord block end",e,_),h+=4}if(o.push(b),f){h+=4+n.getInt32(h,u)+4}}rp&&np.timeEnd("DcdParser._parse "+this.name)},Object.defineProperties(e.prototype,i),e}(ow);up.add("dcd",sw);var aw=function(t){function e(e,i){var n=i||{};t.call(this,e,n),this.volume=new Wv(this.name,this.path),this.voxelSize=gr(n.voxelSize,1)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{},__objName:{}};return i.type.get=function(){return"volume"},i.__objName.get=function(){return"volume"},e.prototype._afterParse=function(){this.volume.setMatrix(this.getMatrix())},e.prototype.getMatrix=function(){return new b},Object.defineProperties(e.prototype,i),e}(k_),hw=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"cube"},e.prototype._parse=function(){function t(t,e){var i=n[t].trim().split(o)[e];return parseFloat(i)}function e(t,e,i){for(var n=t;n<e;++n){var s=i[n].trim();if(""!==s&&l>=r.atomCount+6+u){s=s.split(o);for(var d=0,c=s.length;d<c;++d)1!==s.length&&(a[h]=parseFloat(s[d]),++h)}++l}}rp&&np.time("CubeParser._parse "+this.name);var i=this.volume,n=this.streamer.peekLines(6),r={},o=/\s+/,s=.529177210859*this.voxelSize;r.atomCount=Math.abs(t(2,0)),r.originX=.529177210859*t(2,1),r.originY=.529177210859*t(2,2),r.originZ=.529177210859*t(2,3),r.NVX=t(3,0),r.NVY=t(4,0),r.NVZ=t(5,0),r.basisX=new y(t(3,1),t(3,2),t(3,3)).multiplyScalar(s),r.basisY=new y(t(4,1),t(4,2),t(4,3)).multiplyScalar(s),r.basisZ=new y(t(5,1),t(5,2),t(5,3)).multiplyScalar(s);var a=new Float32Array(r.NVX*r.NVY*r.NVZ),h=0,l=0,u=t(2,0)>0?0:1;this.streamer.eachChunkOfLines(function(t){e(0,t.length,t)}),i.header=r,i.setData(a,r.NVZ,r.NVY,r.NVX),rp&&np.timeEnd("CubeParser._parse "+this.name)},e.prototype.getMatrix=function(){var t=this.volume.header,e=new b;return e.multiply((new b).makeTranslation(t.originX,t.originY,t.originZ)),e.multiply((new b).makeBasis(t.basisZ,t.basisY,t.basisX)),e},Object.defineProperties(e.prototype,i),e}(aw);up.add("cub",hw),up.add("cube",hw);var lw=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"dsn6"},e.prototype._parse=function(){rp&&np.time("Dsn6Parser._parse "+this.name);var t=this.streamer.data;t instanceof Uint8Array&&(t=t.buffer);var e,i,n=this.volume,r={},o=new Int16Array(t),s=new Uint8Array(t),a=String.fromCharCode.apply(null,s.subarray(0,512));if(a.startsWith(":-)"))r.xStart=parseInt(a.substr(10,5)),r.yStart=parseInt(a.substr(15,5)),r.zStart=parseInt(a.substr(20,5)),r.xExtent=parseInt(a.substr(32,5)),r.yExtent=parseInt(a.substr(38,5)),r.zExtent=parseInt(a.substr(42,5)),r.xRate=parseInt(a.substr(52,5)),r.yRate=parseInt(a.substr(58,5)),r.zRate=parseInt(a.substr(62,5)),r.xlen=parseFloat(a.substr(73,10))*this.voxelSize,r.ylen=parseFloat(a.substr(83,10))*this.voxelSize,r.zlen=parseFloat(a.substr(93,10))*this.voxelSize,r.alpha=parseFloat(a.substr(103,10)),r.beta=parseFloat(a.substr(113,10)),r.gamma=parseFloat(a.substr(123,10)),e=parseFloat(a.substr(138,12))/100,i=parseInt(a.substr(155,8));else{if(100!==o[18])for(var h=0,l=o.length;h<l;++h){var u=o[h];o[h]=(255&u)<<8|u>>8&255}r.xStart=o[0],r.yStart=o[1],r.zStart=o[2],r.xExtent=o[3],r.yExtent=o[4],r.zExtent=o[5],r.xRate=o[6],r.yRate=o[7],r.zRate=o[8];var d=1/o[17],c=d*this.voxelSize;r.xlen=o[9]*c,r.ylen=o[10]*c,r.zlen=o[11]*c,r.alpha=o[12]*d,r.beta=o[13]*d,r.gamma=o[14]*d,e=o[15]/100,i=o[16]}n.header=r,np.log(r,e,i);for(var f=new Float32Array(r.xExtent*r.yExtent*r.zExtent),p=512,m=Math.ceil(r.xExtent/8),v=Math.ceil(r.yExtent/8),g=Math.ceil(r.zExtent/8),y=0;y<g;++y)for(var b=0;b<v;++b)for(var _=0;_<m;++_)for(var w=0;w<8;++w)for(var x=8*y+w,S=0;S<8;++S)for(var k=8*b+S,E=0;E<8;++E){var M=8*_+E;if(!(M<r.xExtent&&k<r.yExtent&&x<r.zExtent)){p+=8-E;break}var T=(M*r.yExtent+k)*r.zExtent+x;f[T]=(s[p]-i)/e,++p}n.setData(f,r.zExtent,r.yExtent,r.xExtent),rp&&np.timeEnd("Dsn6Parser._parse "+this.name)},e.prototype.getMatrix=function(){var t=this.volume.header,e=[t.xlen,0,0],i=[t.ylen*Math.cos(Math.PI/180*t.gamma),t.ylen*Math.sin(Math.PI/180*t.gamma),0],n=[t.zlen*Math.cos(Math.PI/180*t.beta),t.zlen*(Math.cos(Math.PI/180*t.alpha)-Math.cos(Math.PI/180*t.gamma)*Math.cos(Math.PI/180*t.beta))/Math.sin(Math.PI/180*t.gamma),0];n[2]=Math.sqrt(t.zlen*t.zlen*Math.sin(Math.PI/180*t.beta)*Math.sin(Math.PI/180*t.beta)-n[1]*n[1]);var r=[0,e,i,n],o=[0,t.xRate,t.yRate,t.zRate],s=[0,1,2,3],a=new b;return a.set(r[s[1]][0]/o[s[1]],r[s[2]][0]/o[s[2]],r[s[3]][0]/o[s[3]],0,r[s[1]][1]/o[s[1]],r[s[2]][1]/o[s[2]],r[s[3]][1]/o[s[3]],0,r[s[1]][2]/o[s[1]],r[s[2]][2]/o[s[2]],r[s[3]][2]/o[s[3]],0,0,0,0,1),a.multiply((new b).makeRotationY(Hr(90))),a.multiply((new b).makeTranslation(-t.zStart,t.yStart,t.xStart)),a.multiply((new b).makeScale(-1,1,1)),a},Object.defineProperties(e.prototype,i),e}(aw);up.add("dsn6",lw),up.add("brix",lw);var uw=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"dx"},e.prototype._parse=function(){function t(t,e,i){for(var n=t;n<e;++n){if(l<a&&u>o){var r=i[n].trim();if(""!==r)for(var d=r.split(s),c=0,f=d.length;c<f;++c)h[l]=parseFloat(d[c]),++l}++u}}rp&&np.time("DxParser._parse "+this.name);var e=this.volume,i=this.streamer.peekLines(30),n=this.parseHeaderLines(i),r=this.volume.header,o=n.dataLineStart,s=/\s+/,a=r.nx*r.ny*r.nz,h=new Float32Array(a),l=0,u=0;this.streamer.eachChunkOfLines(function(e){t(0,e.length,e)}),e.setData(h,r.nz,r.ny,r.nx),rp&&np.timeEnd("DxParser._parse "+this.name)},e.prototype.parseHeaderLines=function(t){for(var e=this,i={},n=/\s+/,r=t.length,o=0,s=0,a=0,h=0;h<r;++h){var l,u=t[h];if(u.startsWith("object 1"))l=u.split(n),i.nx=parseInt(l[5]),i.ny=parseInt(l[6]),i.nz=parseInt(l[7]);else if(u.startsWith("origin"))l=u.split(n),i.xmin=parseFloat(l[1]),i.ymin=parseFloat(l[2]),i.zmin=parseFloat(l[3]);else if(u.startsWith("delta"))l=u.split(n),0===a?i.hx=parseFloat(l[1])*e.voxelSize:1===a?i.hy=parseFloat(l[2])*e.voxelSize:2===a&&(i.hz=parseFloat(l[3])*e.voxelSize),a+=1;else if(u.startsWith("object 3")){o=h,s+=u.length+1;break}s+=u.length+1}return this.volume.header=i,{dataLineStart:o,headerByteCount:s}},e.prototype.getMatrix=function(){var t=this.volume.header,e=new b;return e.multiply((new b).makeRotationY(Hr(90))),e.multiply((new b).makeTranslation(-t.zmin,t.ymin,t.xmin)),e.multiply((new b).makeScale(-t.hz,t.hy,t.hx)),e},Object.defineProperties(e.prototype,i),e}(aw);up.add("dx",uw);var dw=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"dxbin"},e.prototype._parse=function(){rp&&np.time("DxbinParser._parse "+this.name);var t=this.streamer.data;t instanceof Uint8Array&&(t=t.buffer);for(var e=Tr(new Uint8Array(t,0,1e3)),i=this.parseHeaderLines(e),n=this.volume.header,r=i.headerByteCount,o=n.nx*n.ny*n.nz,s=new DataView(t),a=new Float32Array(o),h=0;h<o;++h)a[h]=s.getFloat64(8*h+r,!0);this.volume.setData(a,n.nz,n.ny,n.nx),rp&&np.timeEnd("DxbinParser._parse "+this.name)},Object.defineProperties(e.prototype,i),e}(uw);up.add("dxbin",dw);var cw=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"mrc"},e.prototype._parse=function(){rp&&np.time("MrcParser._parse "+this.name);var t=this.streamer.data;t instanceof Uint8Array&&(t=t.buffer);var e=this.volume,i={},n=new Int32Array(t,0,56),r=new Float32Array(t,0,56),o=new DataView(t);if(i.MAP=String.fromCharCode(o.getUint8(208),o.getUint8(209),o.getUint8(210),o.getUint8(211)),i.MACHST=[o.getUint8(212),o.getUint8(213)],17===i.MACHST[0]&&17===i.MACHST[1])for(var s=t.byteLength,a=0;a<s;a+=4)o.setFloat32(a,o.getFloat32(a),!0);i.NX=n[0],i.NY=n[1],i.NZ=n[2],i.MODE=n[3],i.NXSTART=n[4],i.NYSTART=n[5],i.NZSTART=n[6],i.MX=n[7],i.MY=n[8],i.MZ=n[9],i.xlen=r[10]*this.voxelSize,i.ylen=r[11]*this.voxelSize,i.zlen=r[12]*this.voxelSize,i.alpha=r[13],i.beta=r[14],i.gamma=r[15],i.MAPC=n[16],i.MAPR=n[17],i.MAPS=n[18],i.DMIN=r[19],i.DMAX=r[20],i.DMEAN=r[21],i.ISPG=n[22],i.NSYMBT=n[23],i.LSKFLG=n[24],i.originX=r[49],i.originY=r[50],i.originZ=r[51],i.ARMS=r[54],e.header=i;var h;if(2===i.MODE)h=new Float32Array(t,1024+i.NSYMBT,i.NX*i.NY*i.NZ);else if(0===i.MODE){if(h=new Float32Array(new Int8Array(t,1024+i.NSYMBT,i.NX*i.NY*i.NZ)),-128===n[39]&&127===n[40])for(var l=(i.DMAX-i.DMIN)/255,u=.5*(i.DMIN+i.DMAX+l),d=0,c=h.length;d<c;++d)h[d]=l*h[d]+u}else np.error("MrcParser unknown mode",i.MODE);e.setData(h,i.NX,i.NY,i.NZ),rp&&np.timeEnd("MrcParser._parse "+this.name)},e.prototype.getMatrix=function(){var t=this.volume.header,e=[t.xlen,0,0],i=[t.ylen*Math.cos(Math.PI/180*t.gamma),t.ylen*Math.sin(Math.PI/180*t.gamma),0],n=[t.zlen*Math.cos(Math.PI/180*t.beta),t.zlen*(Math.cos(Math.PI/180*t.alpha)-Math.cos(Math.PI/180*t.gamma)*Math.cos(Math.PI/180*t.beta))/Math.sin(Math.PI/180*t.gamma),0];n[2]=Math.sqrt(t.zlen*t.zlen*Math.sin(Math.PI/180*t.beta)*Math.sin(Math.PI/180*t.beta)-n[1]*n[1]);var r=[0,e,i,n],o=[0,t.MX,t.MY,t.MZ],s=[0,t.MAPC,t.MAPR,t.MAPS],a=new b;return a.set(r[s[1]][0]/o[s[1]],r[s[2]][0]/o[s[2]],r[s[3]][0]/o[s[3]],0,r[s[1]][1]/o[s[1]],r[s[2]][1]/o[s[2]],r[s[3]][1]/o[s[3]],0,r[s[1]][2]/o[s[1]],r[s[2]][2]/o[s[2]],r[s[3]][2]/o[s[3]],0,0,0,0,1),a.setPosition(new y(t.originX,t.originY,t.originZ)),a.multiply((new b).makeTranslation(t.NXSTART,t.NYSTART,t.NZSTART)),a},Object.defineProperties(e.prototype,i),e}(aw);up.add("mrc",cw),up.add("ccp4",cw),up.add("map",cw);var fw=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"xplor"},e.prototype._parse=function(){function t(t){return t.trim().split(s).map(parseFloat)}function e(t,e,i){for(var n=t;n<e;++n){var r=i[n];if(v>=a&&(v-a)%g!==0&&m<f)for(var o=0;o<6;++o)p[m]=parseFloat(r.substr(12*o,12)),++m;++v}}rp&&np.time("XplorParser._parse "+this.name);var i,n=this.volume,r=this.streamer.peekLines(8),o={},s=/\s+/;i=r[2].startsWith("REMARKS")?parseInt(r[1].substring(0,8))+2:5;var a=i+3,h=t(r[i]);o.NA=h[0],o.AMIN=h[1],o.AMAX=h[2],o.NB=h[3],o.BMIN=h[4],o.BMAX=h[5],o.NC=h[6],o.CMIN=h[7],o.CMAX=h[8];var l=t(r[i+1]);o.a=l[0]*this.voxelSize,o.b=l[1]*this.voxelSize,o.c=l[2]*this.voxelSize,o.alpha=l[3],o.beta=l[4],o.gamma=l[5];var u=o.AMAX-o.AMIN+1,d=o.BMAX-o.BMIN+1,c=o.CMAX-o.CMIN+1,f=u*d*c,p=new Float32Array(f),m=0,v=0,g=1+u*d/6;this.streamer.eachChunkOfLines(function(t){e(0,t.length,t)}),n.header=o,n.setData(p,u,d,c),rp&&np.timeEnd("XplorParser._parse "+this.name)},e.prototype.getMatrix=function(){var t=this.volume.header,e=[t.a,0,0],i=[t.b*Math.cos(Math.PI/180*t.gamma),t.b*Math.sin(Math.PI/180*t.gamma),0],n=[t.c*Math.cos(Math.PI/180*t.beta),t.c*(Math.cos(Math.PI/180*t.alpha)-Math.cos(Math.PI/180*t.gamma)*Math.cos(Math.PI/180*t.beta))/Math.sin(Math.PI/180*t.gamma),0];n[2]=Math.sqrt(t.c*t.c*Math.sin(Math.PI/180*t.beta)*Math.sin(Math.PI/180*t.beta)-n[1]*n[1]);var r=[0,e,i,n],o=[0,t.NA,t.NB,t.NC],s=[0,1,2,3],a=new b;return a.set(r[s[1]][0]/o[s[1]],r[s[2]][0]/o[s[2]],r[s[3]][0]/o[s[3]],0,r[s[1]][1]/o[s[1]],r[s[2]][1]/o[s[2]],r[s[3]][1]/o[s[3]],0,r[s[1]][2]/o[s[1]],r[s[2]][2]/o[s[2]],r[s[3]][2]/o[s[3]],0,0,0,0,1),a.multiply((new b).makeTranslation(t.AMIN,t.BMIN,t.CMIN)),a},Object.defineProperties(e.prototype,i),e}(aw);up.add("xplor",fw),up.add("cns",fw);var pw=function(t){function e(e,i){t.call(this,e,i),this.loader=this.getLoader(),this.surface=new Vv(this.name,this.path)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{},__objName:{}};return i.type.get=function(){return"surface"},i.__objName.get=function(){return"surface"},e.prototype._parse=function(){var t=this.loader.parse(this.streamer.asText());this.surface.fromGeometry(t)},Object.defineProperties(e.prototype,i),e}(k_);gh.prototype={constructor:gh,setPath:function(t){this.path=t},_createParserState:function(){var t={objects:[],object:{},vertices:[],normals:[],startObject:function(t,e){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==e);this.object={name:t||"",geometry:{vertices:[],normals:[]},fromDeclaration:!1!==e},this.objects.push(this.object)},parseVertexIndex:function(t,e){var i=parseInt(t,10);return 3*(i>=0?i-1:i+e/3)},parseNormalIndex:function(t,e){var i=parseInt(t,10);return 3*(i>=0?i-1:i+e/3)},addVertex:function(t,e,i){var n=this.vertices,r=this.object.geometry.vertices;r.push(n[t+0]),r.push(n[t+1]),r.push(n[t+2]),r.push(n[e+0]),r.push(n[e+1]),r.push(n[e+2]),r.push(n[i+0]),r.push(n[i+1]),r.push(n[i+2])},addVertexLine:function(t){var e=this.vertices,i=this.object.geometry.vertices;i.push(e[t+0]),i.push(e[t+1]),i.push(e[t+2])},addNormal:function(t,e,i){var n=this.normals,r=this.object.geometry.normals;r.push(n[t+0]),r.push(n[t+1]),r.push(n[t+2]),r.push(n[e+0]),r.push(n[e+1]),r.push(n[e+2]),r.push(n[i+0]),r.push(n[i+1]),r.push(n[i+2])},addFace:function(t,e,i,n,r,o,s,a){var h,l=this.vertices.length,u=this.parseVertexIndex(t,l),d=this.parseVertexIndex(e,l),c=this.parseVertexIndex(i,l);if(void 0===n?this.addVertex(u,d,c):(h=this.parseVertexIndex(n,l),this.addVertex(u,d,h),this.addVertex(d,c,h)),void 0!==r){var f=this.normals.length;u=this.parseNormalIndex(r,f),d=r===o?u:this.parseNormalIndex(o,f),c=r===s?u:this.parseNormalIndex(s,f),void 0===n?this.addNormal(u,d,c):(h=this.parseNormalIndex(a,f),this.addNormal(u,d,h),this.addNormal(d,c,h))}},addLineGeometry:function(t){var e=this;this.object.geometry.type="Line";for(var i=this.vertices.length,n=0,r=t.length;n<r;n++)e.addVertexLine(e.parseVertexIndex(t[n],i))}};return t.startObject("",!1),t},parse:function(t){var e=this,i=this._createParserState();-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));var n,r,o=t.split("\n"),s="",a="",h="",l=[],u="function"===typeof"".trimLeft;for(n=0,r=o.length;n<r;n++)if(s=o[n],s=u?s.trimLeft():s.trim(),0!==s.length&&"#"!==(a=s.charAt(0)))if("v"===a){if(" "===(h=s.charAt(1))&&null!==(l=e.regexp.vertex_pattern.exec(s)))i.vertices.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));else if("n"===h&&null!==(l=e.regexp.normal_pattern.exec(s)))i.normals.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));else if("t"!==h||null===(l=e.regexp.uv_pattern.exec(s)))throw new Error("Unexpected vertex/normal/uv line: '"+s+"'")}else if("f"===a)if(null!==(l=e.regexp.face_vertex_uv_normal.exec(s)))i.addFace(l[1],l[4],l[7],l[10],l[3],l[6],l[9],l[12]);else if(null!==(l=e.regexp.face_vertex_uv.exec(s)));else if(null!==(l=e.regexp.face_vertex_normal.exec(s)))i.addFace(l[1],l[3],l[5],l[7],l[2],l[4],l[6],l[8]);else{if(null===(l=e.regexp.face_vertex.exec(s)))throw new Error("Unexpected face line: '"+s+"'");i.addFace(l[1],l[2],l[3],l[4])}else if("l"===a){var d=s.substring(1).trim().split(" "),c=[],f=[];if(-1===s.indexOf("/"))c=d;else for(var p=0,m=d.length;p<m;p++){var v=d[p].split("/");""!==v[0]&&c.push(v[0]),""!==v[1]&&f.push(v[1])}i.addLineGeometry(c,f)}else if(null!==(l=e.regexp.object_pattern.exec(s))){var g=l[0].substr(1).trim();i.startObject(g)}else if(e.regexp.material_use_pattern.test(s));else if(e.regexp.material_library_pattern.test(s));else if(null===(l=e.regexp.smoothing_pattern.exec(s))){if("\0"===s)continue;throw new Error("Unexpected line: '"+s+"'")}var y=[];for(n=0,r=i.objects.length;n<r;n++){var b=i.objects[n],_=b.geometry;if(0!==_.vertices.length){var w=new At;w.addAttribute("position",new Et(new Float32Array(_.vertices),3)),_.normals.length>0?w.addAttribute("normal",new Et(new Float32Array(_.normals),3)):w.computeVertexNormals(),y.push(w)}}return y}};var mw=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"obj"},e.prototype.getLoader=function(){return new gh},Object.defineProperties(e.prototype,i),e}(pw);up.add("obj",mw),yh.prototype={constructor:yh,setPropertyNameMapping:function(t){this.propertyNameMapping=t},bin2str:function(t){for(var e=new Uint8Array(t),i="",n=0;n<t.byteLength;n++)i+=String.fromCharCode(e[n]);return i},isASCII:function(t){return"ascii"===this.parseHeader(this.bin2str(t)).format},parse:function(t){return t instanceof ArrayBuffer?this.isASCII(t)?this.parseASCII(this.bin2str(t)):this.parseBinary(t):this.parseASCII(t)},parseHeader:function(t){var e=this,i=/ply([\s\S]*)end_header\s/,n="",r=0,o=i.exec(t);null!==o&&(n=o[1],r=o[0].length);for(var s,a,h,l={comments:[],elements:[],headerLength:r},u=n.split("\n"),d=0;d<u.length;d++){var c=u[d];if(""!==(c=c.trim()))switch(h=c.split(/\s+/),a=h.shift(),c=h.join(" "),a){case"format":l.format=h[0],l.version=h[1];break;case"comment":l.comments.push(c);break;case"element":void 0!==s&&l.elements.push(s),s={},s.name=h[0],s.count=parseInt(h[1]),s.properties=[];break;case"property":s.properties.push(function(t,e){var i={type:t[0]};return"list"===i.type?(i.name=t[3],i.countType=t[1],i.itemType=t[2]):i.name=t[1],i.name in e&&(i.name=e[i.name]),i}(h,e.propertyNameMapping));break;default:console.log("unhandled",a,h)}}return void 0!==s&&l.elements.push(s),l},parseASCIINumber:function(t,e){switch(e){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(t);case"float":case"double":case"float32":case"float64":return parseFloat(t)}},parseASCIIElement:function(t,e){for(var i=this,n=e.split(/\s+/),r={},o=0;o<t.length;o++)if("list"===t[o].type){for(var s=[],a=i.parseASCIINumber(n.shift(),t[o].countType),h=0;h<a;h++)s.push(i.parseASCIINumber(n.shift(),t[o].itemType));r[t[o].name]=s}else r[t[o].name]=i.parseASCIINumber(n.shift(),t[o].type);return r},parseASCII:function(t){var e,i=this,n=new kt,r=this.parseHeader(t),o=/end_header\s([\s\S]*)$/,s="";null!==(e=o.exec(t))&&(s=e[1]);var a=s.split("\n"),h=0,l=0;n.useColor=!1;for(var u=0;u<a.length;u++){var d=a[u];if(""!==(d=d.trim())){l>=r.elements[h].count&&(h++,l=0);var c=i.parseASCIIElement(r.elements[h].properties,d);i.handleElement(n,r.elements[h].name,c),l++}}return this.postProcess(n)},postProcess:function(t){if(t.useColor){for(var e=0;e<t.faces.length;e++)t.faces[e].vertexColors=[t.colors[t.faces[e].a],t.colors[t.faces[e].b],t.colors[t.faces[e].c]];t.elementsNeedUpdate=!0}return t.computeBoundingSphere(),t},handleElement:function(t,e,i){if("vertex"===e){if(t.vertices.push(new y(i.x,i.y,i.z)),"red"in i&&"green"in i&&"blue"in i){t.useColor=!0;var n=new it;n.setRGB(i.red/255,i.green/255,i.blue/255),t.colors.push(n)}}else if("face"===e){var r=i.vertex_indices;3===r.length?t.faces.push(new xt(r[0],r[1],r[2])):4===r.length&&t.faces.push(new xt(r[0],r[1],r[3]),new xt(r[1],r[2],r[3]))}},binaryRead:function(t,e,i,n){switch(i){case"int8":case"char":return[t.getInt8(e),1];case"uint8":case"uchar":return[t.getUint8(e),1];case"int16":case"short":return[t.getInt16(e,n),2];case"uint16":case"ushort":return[t.getUint16(e,n),2];case"int32":case"int":return[t.getInt32(e,n),4];case"uint32":case"uint":return[t.getUint32(e,n),4];case"float32":case"float":return[t.getFloat32(e,n),4];case"float64":case"double":return[t.getFloat64(e,n),8]}},binaryReadElement:function(t,e,i,n){for(var r,o=this,s={},a=0,h=0;h<i.length;h++)if("list"===i[h].type){var l=[];r=o.binaryRead(t,e+a,i[h].countType,n);var u=r[0];a+=r[1];for(var d=0;d<u;d++)r=o.binaryRead(t,e+a,i[h].itemType,n),l.push(r[0]),a+=r[1];s[i[h].name]=l}else r=o.binaryRead(t,e+a,i[h].type,n),s[i[h].name]=r[0],a+=r[1];return[s,a]},parseBinary:function(t){for(var e,i=this,n=new kt,r=this.parseHeader(this.bin2str(t)),o="binary_little_endian"===r.format,s=new DataView(t,r.headerLength),a=0,h=0;h<r.elements.length;h++)for(var l=0;l<r.elements[h].count;l++){e=i.binaryReadElement(s,a,r.elements[h].properties,o),a+=e[1];var u=e[0];i.handleElement(n,r.elements[h].name,u)}return this.postProcess(n)}};var vw=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{}};return i.type.get=function(){return"ply"},e.prototype.getLoader=function(){return new yh},Object.defineProperties(e.prototype,i),e}(pw);up.add("ply",vw);var gw=function(t){function e(e,i){var n=i||{};t.call(this,e,n),this.delimiter=gr(n.delimiter,","),this.comment=gr(n.comment,"#"),this.columnNames=gr(n.columnNames,!1),this.table={name:this.name,path:this.path,columnNames:[],data:[]}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{},__objName:{}};return i.type.get=function(){return"csv"},i.__objName.get=function(){return"table"},e.prototype._parse=function(){var t=this,e=this.table.data,i=new RegExp("\\s*"+this.delimiter+"\\s*"),n=0;this.streamer.eachChunkOfLines(function(r){for(var o=r.length,s=0;s<o;++s){var a=r[s].trim();if(!a.startsWith(t.comment)){var h=a.split(i);0===n?t.table.columnNames=h:a&&e.push(h),++n}}})},Object.defineProperties(e.prototype,i),e}(k_);up.add("csv",gw);var yw=function(t){function e(e,i){var n=i||{};t.call(this,e,n),this.string=gr(n.string,!1),this.json={name:this.name,path:this.path,data:{}}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{},__objName:{}};return i.type.get=function(){return"json"},i.__objName.get=function(){return"json"},e.prototype._parse=function(){this.streamer.isBinary()||this.string?this.json.data=JSON.parse(this.streamer.asText()):this.json.data=this.streamer.data},Object.defineProperties(e.prototype,i),e}(k_);up.add("json",yw);var bw=function(t){function e(e,i){t.call(this,e,i),this.text={name:this.name,path:this.path,data:""}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{},__objName:{}};return i.type.get=function(){return"text"},i.__objName.get=function(){return"text"},e.prototype._parse=function(){this.text.data=this.streamer.asText()},Object.defineProperties(e.prototype,i),e}(k_);up.add("txt",bw),up.add("text",bw);var _w=/^['"]|['"]$/g,ww=/^<([\w-:.]+)\s*/,xw=/^([^<]*)/,Sw=/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/,kw=function(t){function e(e,i){var n=i||{};t.call(this,e,n),this.useDomParser=gr(n.useDomParser,!1),this.xml={name:this.name,path:this.path,data:{}}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={type:{},__objName:{}};return i.type.get=function(){return"xml"},i.__objName.get=function(){return"xml"},e.prototype.__xmlParser=function(t){return _h(t)},e.prototype.__domParser=function(t){return(new window.DOMParser).parseFromString(t,"text/xml")},e.prototype._parse=function(){rp&&np.time("XmlParser._parse "+this.name),this.useDomParser?this.streamer.data instanceof window.Document?this.xml.data=this.streamer.data:this.xml.data=this.__domParser(this.streamer.asText()):this.xml.data=this.__xmlParser(this.streamer.asText()),rp&&np.timeEnd("XmlParser._parse "+this.name)},Object.defineProperties(e.prototype,i),e}(k_);up.add("xml",kw);var Ew=function(t,e){this.name=t,this.path=e,this.rsrzDict={},this.rsccDict={},this.clashDict={},this.clashArray=[],this.geoDict={},this.geoAtomDict={},this.atomDict={},this.clashSele="NONE"},Mw={type:{}};Mw.type.get=function(){return"validation"},Ew.prototype.fromXml=function(t){rp&&np.time("Validation.fromXml");var e=this.rsrzDict,i=this.rsccDict,n=this.clashDict,r=this.clashArray,o=this.geoDict,s=this.geoAtomDict,a=this.atomDict,h=t.getElementsByTagName("ModelledSubgroup"),l={},u=[];rp&&np.time("Validation.fromXml#clashDict");for(var d=0,c=h.length;d<c;++d){var f=h[d],p=f.attributes,m=wh(p);void 0!==p.rsrz&&(e[m]=parseFloat(p.rsrz.value)),void 0!==p.rscc&&(i[m]=parseFloat(p.rscc.value)),p.sele=m;for(var v=f.getElementsByTagName("clash"),g=0,y=v.length;g<y;++g){var b=v[g].attributes,_=b.atom.value;if("H"!==na(_)){var w=b.cid.value,x=wh(p,_,!0);if(a[x]=!0,void 0===l[w])l[w]={sele1:x,res1:m};else{var S=l[w];S.res1!==m&&(S.sele2=x,S.res2=m,u.push(S.res1,m),n[w]=S,r.push(S))}}}}rp&&np.timeEnd("Validation.fromXml#clashDict");for(var k=0,E=h.length;k<E;++k){var M=h[k],T=M.attributes,C=T.sele;if("."!==T.seq.value){var O=Eh(n,M,T);O>0&&(o[C]=O)}else{var P=M.getElementsByTagName("clash"),A=M.getElementsByTagName("mog-bond-outlier"),D=M.getElementsByTagName("mog-angle-outlier");if(A.length>0||D.length>0||P.length>0){var I={};s[C]=I;for(var R=0,L=P.length;R<L;++R){var N=P[R].attributes;n[N.cid.value]&&xh(I,N.atom.value,1)}for(var F=0,z=A.length;F<z;++F){A[F].attributes.atoms.value.split(",").forEach(function(t){xh(I,t,2)})}for(var B=0,j=D.length;B<j;++B){D[B].attributes.atoms.value.split(",").forEach(function(t){xh(I,t,4)})}}}}this.clashSele=u.length?u.join(" OR "):"NONE",rp&&np.timeEnd("Validation.fromXml")},Ew.prototype.getClashData=function(t){rp&&np.time("Validation.getClashData");var e=t||{},i=e.structure,n=i.atomSet,r=new it(gr(e.color,"#f0027f")),o=i.getAtomProxy(),s=i.getAtomProxy(),a=new y,h=new y,l=new y,u=this.clashArray,d=u.length,c=new Float32Array(3*d),f=new Float32Array(3*d),p=bo(d,r.r,r.g,r.b),m=new Float32Array(d),v=new Float32Array(d);rp&&np.time("Validation.getClashData#atomDict");var g=this.atomDict;i.eachAtom(function(t){var e=kh(t);!0===g[e]&&(g[e]=t.index)}),rp&&np.timeEnd("Validation.getClashData#atomDict");var b=0;return u.forEach(function(t,e){if(o.index=g[t.sele1],s.index=g[t.sele2],void 0!==o.index&&void 0!==s.index&&n.isSet(o.index,s.index)){a.subVectors(s,o).setLength(o.vdw),h.copy(o).add(a),a.subVectors(o,s).setLength(s.vdw),l.copy(s).add(a);var i=o.distanceTo(s)/2,r=Math.sqrt(o.vdw*o.vdw-i*i),u=Math.sqrt(s.vdw*s.vdw-i*i);h.toArray(c,3*b),l.toArray(f,3*b),m[b]=(r+u)/2,v[b]=e,++b}}),rp&&np.timeEnd("Validation.getClashData"),{position1:c.subarray(0,3*b),position2:f.subarray(0,3*b),color:p.subarray(0,3*b),color2:p.subarray(0,3*b),radius:m.subarray(0,b),picking:new Zm(v.subarray(0,b),this,i)}},Object.defineProperties(Ew.prototype,Mw);var Tw=function(t){function e(e,i){var n=i||{};t.call(this,e,n),this.useDomParser=!0,this.validation=new Ew(this.name,this.path)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={__objName:{}};return i.__objName.get=function(){return"validation"},e.prototype._parse=function(){t.prototype._parse.call(this),rp&&np.time("ValidationParser._parse "+this.name),this.validation.fromXml(this.xml.data),rp&&np.timeEnd("ValidationParser._parse "+this.name)},Object.defineProperties(e.prototype,i),e}(kw);up.add("validation",Tw);var Cw,Ow,Pw=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}(),Aw=30,Dw=12,Iw=15,Rw=852,Lw=592,Nw=0,Fw=1,zw=2,Bw=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],jw=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Uw=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Hw=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],Vw=0,Gw=1,Ww=2,Yw=4,$w=5,qw=6,Xw=0,Zw=1,Kw=2,Qw=-2,Jw=-3,tx=-4,ex=-5,ix=8,nx=1,rx=2,ox=3,sx=4,ax=5,hx=6,lx=7,ux=8,dx=9,cx=10,fx=11,px=12,mx=13,vx=14,gx=15,yx=16,bx=17,_x=18,wx=19,xx=20,Sx=21,kx=22,Ex=23,Mx=24,Tx=25,Cx=26,Ox=27,Px=28,Ax=29,Dx=30,Ix=31,Rx=32,Lx=852,Nx=592,Fx=!0,zx=!0,Bx=!0;try{String.fromCharCode.apply(null,[0])}catch(t){zx=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Bx=!1}for(var jx=new Uint8Array(256),Ux=0;Ux<256;Ux++)jx[Ux]=Ux>=252?6:Ux>=248?5:Ux>=240?4:Ux>=224?3:Ux>=192?2:1;jx[254]=jx[254]=1;var Hx=0,Vx={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Gx=Object.prototype.toString;Jh.prototype.push=function(t,e){var i,n,r,o,s,a,h=this,l=this.strm,u=this.options.chunkSize,d=this.options.dictionary,c=!1;if(this.ended)return!1;n=e===~~e?e:!0===e?4:0,"string"===typeof t?l.input=qh(t):"[object ArrayBuffer]"===Gx.call(t)?l.input=new Uint8Array(t):l.input=t,l.next_in=0,l.avail_in=l.input.length;do{if(0===l.avail_out&&(l.output=new Uint8Array(u),l.next_out=0,l.avail_out=u),i=Hh(l,0),2===i&&d&&(a="string"===typeof d?Yh(d):"[object ArrayBuffer]"===Gx.call(d)?new Uint8Array(d):d,i=Wh(h.strm,a)),-5===i&&!0===c&&(i=Hx,c=!1),1!==i&&i!==Hx)return h.onEnd(i),h.ended=!0,!1;l.next_out&&(0!==l.avail_out&&1!==i&&(0!==l.avail_in||4!==n&&2!==n)||("string"===h.options.to?(r=Zh(l.output,l.next_out),o=l.next_out-r,s=Xh(l.output,r),l.next_out=o,l.avail_out=u-o,o&&Ch(l.output,l.output,r,o,0),h.onData(s)):h.onData(Th(l.output,l.next_out)))),0===l.avail_in&&0===l.avail_out&&(c=!0)}while((l.avail_in>0||0===l.avail_out)&&1!==i);return 1===i&&(n=4),4===n?(i=Vh(this.strm),this.onEnd(i),this.ended=!0,i===Hx):2!==n||(this.onEnd(Hx),l.avail_out=0,!0)},Jh.prototype.onData=function(t){this.chunks.push(t)},Jh.prototype.onEnd=function(t){t===Hx&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Oh(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},cp.add("gz",el);var Wx="//files.rcsb.org/download/",Yx="//mmtf.rcsb.org/v1.0/full/",$x="//mmtf.rcsb.org/v1.0/reduced/";hp.add("rcsb",new il);var qx="//pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/",Xx="/SDF?record_type=3d";hp.add("pubchem",new nl),hp.add("ftp",new rl),hp.add("http",new rl),hp.add("https",new rl),"undefined"===typeof window||window.Promise||(window.Promise=o);var Zx=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Kx=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Qx=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Jx=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},tS=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e},eS=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)},iS=function(t){function e(){var t,i,n,r;Zx(this,e);for(var o=arguments.length,s=Array(o),a=0;a<o;a++)s[a]=arguments[a];return i=n=tS(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(s))),n.state={stage:null,stageObj:null},r=i,tS(n,r)}return Jx(e,t),Kx(e,[{key:"updateProteinOnViewport",value:function(t){var e=this.state,i=e.stageObj,n=e.stage;if(i){var r=[];if(n.eachComponent(function(t){r.push(t)}),r[0].removeAllRepresentations(),!t.config)return void n.defaultFileRepresentation(i);t.config.forEach(function(t){Array.isArray(t.input)?i[t.type].apply(i,eS(t.input)):i[t.type](t.input)})}}},{key:"addProteinToViewport",value:function(t,e){var i=this;e.config?t.loadFile(e.filename).then(function(t){e.config.forEach(function(e){Array.isArray(e.input)?t[e.type].apply(t,eS(e.input)):t[e.type](e.input)}),e.config.some(function(t){return"autoView"===t.type})||t.autoView()}):t.loadFile(e.filename,{defaultRepresentation:!0}).then(function(t){i.setState({stageObj:t})})}},{key:"componentDidUpdate",value:function(){var t=this,e=this.props,i=e.data,n=(e.viewportId,e.viewportStyle),r=(e.width,this.state.stage);Qx({},nS,n);Array.isArray(i)?i.forEach(function(e){t.addProteinToViewport(r,e)}):this.updateProteinOnViewport(i)}},{key:"componentDidMount",value:function(){var t=this,e=this.props,i=e.data,n=e.viewportId,r=e.viewportStyle,o=new Qy(n,{backgroundColor:r.backgroundColor});this.setState({stage:o}),Array.isArray(i)?i.forEach(function(e){t.addProteinToViewport(o,e)}):this.addProteinToViewport(o,i)}},{key:"render",value:function(){var t=this.props,e=t.viewportId,i=t.viewportStyle,n=Qx({},nS,i);return hl.a.createElement("div",{id:e,style:n})}}]),e}(hl.a.Component),nS={backgroundColor:"black",width:"500px",height:"500px"};iS.defaultProps={viewportId:"viztein-viewport",viewportStyle:nS};var rS={filename:sl.a.string.isRequired,config:sl.a.arrayOf(sl.a.shape({type:sl.a.string.isRequired,input:sl.a.oneOfType([sl.a.array,sl.a.object,sl.a.string])}))};iS.propTypes={data:sl.a.oneOfType([sl.a.arrayOf(sl.a.shape(rS)),sl.a.shape(rS)]).isRequired,viewportId:sl.a.string,viewportStyle:sl.a.object,width:sl.a.string},e.a=iS}).call(e,i(300).setImmediate)},function(t,e){t.exports={modal:"Modal__modal__JoIQx"}},function(t,e,i){"use strict";function n(t){if(P[t])return P[t];var e=S.a.compile(t);return D<A&&(P[t]=e,D++),e}function r(t,e){return void 0===t&&(t="/"),void 0===e&&(e={}),"/"===t?t:n(t)(e,{pretty:!0})}function o(t){var e=t.computedMatch,i=t.to,n=t.push,o=void 0!==n&&n;return v.a.createElement(T.Consumer,null,function(t){t||Object(_.a)(!1);var n=t.history,s=t.staticContext,a=o?n.push:n.replace,h=Object(y.c)(e?"string"===typeof i?r(i,e.params):Object(w.a)({},i,{pathname:r(i.pathname,e.params)}):i);return s?(a(h),null):v.a.createElement(O,{onMount:function(){a(h)},onUpdate:function(t,e){var i=Object(y.c)(e.to);Object(y.f)(i,Object(w.a)({},h,{key:i.key}))||a(h)},to:i})})}function s(t,e){var i=""+e.end+e.strict+e.sensitive,n=I[i]||(I[i]={});if(n[t])return n[t];var r=[],o=S()(t,r,e),s={regexp:o,keys:r};return L<R&&(n[t]=s,L++),s}function a(t,e){void 0===e&&(e={}),("string"===typeof e||Array.isArray(e))&&(e={path:e});var i=e,n=i.path,r=i.exact,o=void 0!==r&&r,a=i.strict,h=void 0!==a&&a,l=i.sensitive,u=void 0!==l&&l;return[].concat(n).reduce(function(e,i){if(!i&&""!==i)return null;if(e)return e;var n=s(i,{end:o,strict:h,sensitive:u}),r=n.regexp,a=n.keys,l=r.exec(t);if(!l)return null;var d=l[0],c=l.slice(1),f=t===d;return o&&!f?null:{path:i,url:"/"===i&&""===d?"/":d,isExact:f,params:a.reduce(function(t,e,i){return t[e.name]=c[i],t},{})}},null)}function h(t){return"/"===t.charAt(0)?t:"/"+t}function l(t,e){return t?Object(w.a)({},e,{pathname:h(t)+e.pathname}):e}function u(t,e){if(!t)return e;var i=h(t);return 0!==e.pathname.indexOf(i)?e:Object(w.a)({},e,{pathname:e.pathname.substr(i.length)})}function d(t){return"string"===typeof t?t:Object(y.e)(t)}function c(t){return function(){Object(_.a)(!1)}}function f(){}i.d(e,"a",function(){return o}),i.d(e,"b",function(){return N}),i.d(e,"c",function(){return C}),i.d(e,"d",function(){return T}),i.d(e,"e",function(){return a});var p=i(125),m=i(0),v=i.n(m),g=i(17),y=(i.n(g),i(126)),b=(i(35),i(319)),_=i(61),w=i(60),x=i(322),S=i.n(x),k=i(127),E=(i.n(k),i(128)),M=i(325),T=(i.n(M),function(t){var e=Object(b.a)();return e.displayName=t,e}("Router")),C=function(t){function e(e){var i;return i=t.call(this,e)||this,i.state={location:e.history.location},i._isMounted=!1,i._pendingLocation=null,e.staticContext||(i.unlisten=e.history.listen(function(t){i._isMounted?i.setState({location:t}):i._pendingLocation=t})),i}Object(p.a)(e,t),e.computeRootMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}};var i=e.prototype;return i.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},i.componentWillUnmount=function(){this.unlisten&&this.unlisten()},i.render=function(){return v.a.createElement(T.Provider,{children:this.props.children||null,value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}})},e}(v.a.Component),O=(v.a.Component,function(t){function e(){return t.apply(this,arguments)||this}Object(p.a)(e,t);var i=e.prototype;return i.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},i.componentDidUpdate=function(t){this.props.onUpdate&&this.props.onUpdate.call(this,this,t)},i.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},i.render=function(){return null},e}(v.a.Component)),P={},A=1e4,D=0,I={},R=1e4,L=0,N=function(t){function e(){return t.apply(this,arguments)||this}return Object(p.a)(e,t),e.prototype.render=function(){var t=this;return v.a.createElement(T.Consumer,null,function(e){e||Object(_.a)(!1);var i=t.props.location||e.location,n=t.props.computedMatch?t.props.computedMatch:t.props.path?a(i.pathname,t.props):e.match,r=Object(w.a)({},e,{location:i,match:n}),o=t.props,s=o.children,h=o.component,l=o.render;return Array.isArray(s)&&0===s.length&&(s=null),v.a.createElement(T.Provider,{value:r},r.match?s?"function"===typeof s?s(r):s:h?v.a.createElement(h,r):l?l(r):null:"function"===typeof s?s(r):null)})},e}(v.a.Component);v.a.Component,v.a.Component,v.a.useContext},function(t,e,i){"use strict";function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}e.a=n},function(t,e,i){"use strict";function n(t){return"/"===t.charAt(0)?t:"/"+t}function r(t){return"/"===t.charAt(0)?t.substr(1):t}function o(t,e){return 0===t.toLowerCase().indexOf(e.toLowerCase())&&-1!=="/?#".indexOf(t.charAt(e.length))}function s(t,e){return o(t,e)?t.substr(e.length):t}function a(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function h(t){var e=t||"/",i="",n="",r=e.indexOf("#");-1!==r&&(n=e.substr(r),e=e.substr(0,r));var o=e.indexOf("?");return-1!==o&&(i=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===i?"":i,hash:"#"===n?"":n}}function l(t){var e=t.pathname,i=t.search,n=t.hash,r=e||"/";return i&&"?"!==i&&(r+="?"===i.charAt(0)?i:"?"+i),n&&"#"!==n&&(r+="#"===n.charAt(0)?n:"#"+n),r}function u(t,e,i,n){var r;"string"===typeof t?(r=h(t),r.state=e):(r=Object(T.a)({},t),void 0===r.pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==e&&void 0===r.state&&(r.state=e));try{r.pathname=decodeURI(r.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return i&&(r.key=i),n?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=Object(C.a)(r.pathname,n.pathname)):r.pathname=n.pathname:r.pathname||(r.pathname="/"),r}function d(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&Object(O.a)(t.state,e.state)}function c(){function t(t){return r=t,function(){r===t&&(r=null)}}function e(t,e,i,n){if(null!=r){var o="function"===typeof r?r(t,e):r;"string"===typeof o?"function"===typeof i?i(o,n):n(!0):n(!1!==o)}else n(!0)}function i(t){function e(){i&&t.apply(void 0,arguments)}var i=!0;return o.push(e),function(){i=!1,o=o.filter(function(t){return t!==e})}}function n(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];o.forEach(function(t){return t.apply(void 0,e)})}var r=null,o=[];return{setPrompt:t,confirmTransitionTo:e,appendListener:i,notifyListeners:n}}function f(t,e){e(window.confirm(t))}function p(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}function m(){return-1===window.navigator.userAgent.indexOf("Trident")}function v(){return-1===window.navigator.userAgent.indexOf("Firefox")}function g(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")}function y(){try{return window.history.state||{}}catch(t){return{}}}function b(t){function e(t){var e=t||{},i=e.key,n=e.state,r=window.location,o=r.pathname,a=r.search,h=r.hash,l=o+a+h;return V&&(l=s(l,V)),u(l,n,i)}function i(){return Math.random().toString(36).substr(2,H)}function r(t){Object(T.a)(Z,t),Z.length=O.length,G.notifyListeners(Z.location,Z.action)}function o(t){g(t)||d(e(t.state))}function h(){d(e(y()))}function d(t){if(W)W=!1,r();else{G.confirmTransitionTo(t,"POP",j,function(e){e?r({action:"POP",location:t}):v(t)})}}function v(t){var e=Z.location,i=$.indexOf(e.key);-1===i&&(i=0);var n=$.indexOf(t.key);-1===n&&(n=0);var r=i-n;r&&(W=!0,x(r))}function b(t){return V+l(t)}function _(t,e){var n=u(t,e,i(),Z.location);G.confirmTransitionTo(n,"PUSH",j,function(t){if(t){var e=b(n),i=n.key,o=n.state;if(R)if(O.pushState({key:i,state:o},null,e),z)window.location.href=e;else{var s=$.indexOf(Z.location.key),a=$.slice(0,s+1);a.push(n.key),$=a,r({action:"PUSH",location:n})}else window.location.href=e}})}function w(t,e){var n=u(t,e,i(),Z.location);G.confirmTransitionTo(n,"REPLACE",j,function(t){if(t){var e=b(n),i=n.key,o=n.state;if(R)if(O.replaceState({key:i,state:o},null,e),z)window.location.replace(e);else{var s=$.indexOf(Z.location.key);-1!==s&&($[s]=n.key),r({action:"REPLACE",location:n})}else window.location.replace(e)}})}function x(t){O.go(t)}function S(){x(-1)}function k(){x(1)}function E(t){q+=t,1===q&&1===t?(window.addEventListener(D,o),L&&window.addEventListener(I,h)):0===q&&(window.removeEventListener(D,o),L&&window.removeEventListener(I,h))}function M(t){void 0===t&&(t=!1);var e=G.setPrompt(t);return X||(E(1),X=!0),function(){return X&&(X=!1,E(-1)),e()}}function C(t){var e=G.appendListener(t);return E(1),function(){E(-1),e()}}void 0===t&&(t={}),A||Object(P.a)(!1);var O=window.history,R=p(),L=!m(),N=t,F=N.forceRefresh,z=void 0!==F&&F,B=N.getUserConfirmation,j=void 0===B?f:B,U=N.keyLength,H=void 0===U?6:U,V=t.basename?a(n(t.basename)):"",G=c(),W=!1,Y=e(y()),$=[Y.key],q=0,X=!1,Z={length:O.length,action:"POP",location:Y,createHref:b,push:_,replace:w,go:x,goBack:S,goForward:k,block:M,listen:C};return Z}function _(t){var e=t.indexOf("#");return-1===e?t:t.slice(0,e)}function w(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)}function x(t){window.location.hash=t}function S(t){window.location.replace(_(window.location.href)+"#"+t)}function k(t){function e(){var t=H(w());return B&&(t=s(t,B)),u(t)}function i(t){Object(T.a)(Q,t),Q.length=O.length,V.notifyListeners(Q.location,Q.action)}function r(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash}function o(){var t=w(),i=U(t);if(t!==i)S(i);else{var n=e(),o=Q.location;if(!G&&r(o,n))return;if(W===l(n))return;W=null,h(n)}}function h(t){if(G)G=!1,i();else{V.confirmTransitionTo(t,"POP",N,function(e){e?i({action:"POP",location:t}):d(t)})}}function d(t){var e=Q.location,i=X.lastIndexOf(l(e));-1===i&&(i=0);var n=X.lastIndexOf(l(t));-1===n&&(n=0);var r=i-n;r&&(G=!0,y(r))}function p(t){var e=document.querySelector("base"),i="";return e&&e.getAttribute("href")&&(i=_(window.location.href)),i+"#"+U(B+l(t))}function m(t,e){var n=u(t,void 0,void 0,Q.location);V.confirmTransitionTo(n,"PUSH",N,function(t){if(t){var e=l(n),r=U(B+e);if(w()!==r){W=e,x(r);var o=X.lastIndexOf(l(Q.location)),s=X.slice(0,o+1);s.push(e),X=s,i({action:"PUSH",location:n})}else i()}})}function g(t,e){var n=u(t,void 0,void 0,Q.location);V.confirmTransitionTo(n,"REPLACE",N,function(t){if(t){var e=l(n),r=U(B+e);w()!==r&&(W=e,S(r));var o=X.indexOf(l(Q.location));-1!==o&&(X[o]=e),i({action:"REPLACE",location:n})}})}function y(t){O.go(t)}function b(){y(-1)}function k(){y(1)}function E(t){Z+=t,1===Z&&1===t?window.addEventListener(R,o):0===Z&&window.removeEventListener(R,o)}function M(t){void 0===t&&(t=!1);var e=V.setPrompt(t);return K||(E(1),K=!0),function(){return K&&(K=!1,E(-1)),e()}}function C(t){var e=V.appendListener(t);return E(1),function(){E(-1),e()}}void 0===t&&(t={}),A||Object(P.a)(!1);var O=window.history,D=(v(),t),I=D.getUserConfirmation,N=void 0===I?f:I,F=D.hashType,z=void 0===F?"slash":F,B=t.basename?a(n(t.basename)):"",j=L[z],U=j.encodePath,H=j.decodePath,V=c(),G=!1,W=null,Y=w(),$=U(Y);Y!==$&&S($);var q=e(),X=[l(q)],Z=0,K=!1,Q={length:O.length,action:"POP",location:q,createHref:p,push:m,replace:g,go:y,goBack:b,goForward:k,block:M,listen:C};return Q}function E(t,e,i){return Math.min(Math.max(t,e),i)}function M(t){function e(t){Object(T.a)(C,t),C.length=C.entries.length,x.notifyListeners(C.location,C.action)}function i(){return Math.random().toString(36).substr(2,w)}function n(t,n){var r=u(t,n,i(),C.location);x.confirmTransitionTo(r,"PUSH",m,function(t){if(t){var i=C.index,n=i+1,o=C.entries.slice(0);o.length>n?o.splice(n,o.length-n,r):o.push(r),e({action:"PUSH",location:r,index:n,entries:o})}})}function r(t,n){var r=u(t,n,i(),C.location);x.confirmTransitionTo(r,"REPLACE",m,function(t){t&&(C.entries[C.index]=r,e({action:"REPLACE",location:r}))})}function o(t){var i=E(C.index+t,0,C.entries.length-1),n=C.entries[i];x.confirmTransitionTo(n,"POP",m,function(t){t?e({action:"POP",location:n,index:i}):e()})}function s(){o(-1)}function a(){o(1)}function h(t){var e=C.index+t;return e>=0&&e<C.entries.length}function d(t){return void 0===t&&(t=!1),x.setPrompt(t)}function f(t){return x.appendListener(t)}void 0===t&&(t={});var p=t,m=p.getUserConfirmation,v=p.initialEntries,g=void 0===v?["/"]:v,y=p.initialIndex,b=void 0===y?0:y,_=p.keyLength,w=void 0===_?6:_,x=c(),S=E(b,0,g.length-1),k=g.map(function(t){return"string"===typeof t?u(t,void 0,i()):u(t,void 0,t.key||i())}),M=l,C={length:k.length,action:"POP",location:k[S],index:S,entries:k,createHref:M,push:n,replace:r,go:o,goBack:s,goForward:a,canGo:h,block:d,listen:f};return C}i.d(e,"a",function(){return b}),i.d(e,"b",function(){return k}),i.d(e,"d",function(){return M}),i.d(e,"c",function(){return u}),i.d(e,"f",function(){return d}),i.d(e,"e",function(){return l});var T=i(60),C=i(317),O=i(318),P=(i(35),i(61)),A=!("undefined"===typeof window||!window.document||!window.document.createElement),D="popstate",I="hashchange",R="hashchange",L={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+r(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:r,decodePath:n},slash:{encodePath:n,decodePath:n}}},function(t,e,i){"use strict";t.exports=i(324)},function(t,e,i){"use strict";function n(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}e.a=n},function(t,e,i){"use strict";var n=i(0),r=i.n(n),o=i(328),s=i.n(o),a=i(59),h=function(t){return r.a.createElement("li",{className:s.a.Link},r.a.createElement(a.b,{exact:!0,activeClassName:s.a.active,to:t.link},t.children))};e.a=h},function(t,e,i){i(131),t.exports=i(136)},function(t,e,i){"use strict";"undefined"===typeof Promise&&(i(132).enable(),window.Promise=i(134)),i(135),Object.assign=i(36)},function(t,e,i){"use strict";function n(){l=!1,a._47=null,a._71=null}function r(t){function e(e){(t.allRejections||s(d[e].error,t.whitelist||h))&&(d[e].displayId=u++,t.onUnhandled?(d[e].logged=!0,t.onUnhandled(d[e].displayId,d[e].error)):(d[e].logged=!0,o(d[e].displayId,d[e].error)))}function i(e){d[e].logged&&(t.onHandled?t.onHandled(d[e].displayId,d[e].error):d[e].onUnhandled||(console.warn("Promise Rejection Handled (id: "+d[e].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+d[e].displayId+".")))}t=t||{},l&&n(),l=!0;var r=0,u=0,d={};a._47=function(t){2===t._83&&d[t._56]&&(d[t._56].logged?i(t._56):clearTimeout(d[t._56].timeout),delete d[t._56])},a._71=function(t,i){0===t._75&&(t._56=r++,d[t._56]={displayId:null,error:i,timeout:setTimeout(e.bind(null,t._56),s(i,h)?100:2e3),logged:!1})}}function o(t,e){console.warn("Possible Unhandled Promise Rejection (id: "+t+"):"),((e&&(e.stack||e))+"").split("\n").forEach(function(t){console.warn("  "+t)})}function s(t,e){return e.some(function(e){return t instanceof e})}var a=i(62),h=[ReferenceError,TypeError,RangeError],l=!1;e.disable=n,e.enable=r},function(t,e,i){"use strict";(function(e){function i(t){s.length||(o(),a=!0),s[s.length]=t}function n(){for(;h<s.length;){var t=h;if(h+=1,s[t].call(),h>l){for(var e=0,i=s.length-h;e<i;e++)s[e]=s[e+h];s.length-=h,h=0}}s.length=0,h=0,a=!1}function r(t){return function(){function e(){clearTimeout(i),clearInterval(n),t()}var i=setTimeout(e,0),n=setInterval(e,50)}}t.exports=i;var o,s=[],a=!1,h=0,l=1024,u="undefined"!==typeof e?e:self,d=u.MutationObserver||u.WebKitMutationObserver;o="function"===typeof d?function(t){var e=1,i=new d(t),n=document.createTextNode("");return i.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}(n):r(n),i.requestFlush=o,i.makeRequestCallFromTimer=r}).call(e,i(6))},function(t,e,i){"use strict";function n(t){var e=new r(r._44);return e._83=1,e._18=t,e}var r=i(62);t.exports=r;var o=n(!0),s=n(!1),a=n(null),h=n(void 0),l=n(0),u=n("");r.resolve=function(t){if(t instanceof r)return t;if(null===t)return a;if(void 0===t)return h;if(!0===t)return o;if(!1===t)return s;if(0===t)return l;if(""===t)return u;if("object"===typeof t||"function"===typeof t)try{var e=t.then;if("function"===typeof e)return new r(e.bind(t))}catch(t){return new r(function(e,i){i(t)})}return n(t)},r.all=function(t){var e=Array.prototype.slice.call(t);return new r(function(t,i){function n(s,a){if(a&&("object"===typeof a||"function"===typeof a)){if(a instanceof r&&a.then===r.prototype.then){for(;3===a._83;)a=a._18;return 1===a._83?n(s,a._18):(2===a._83&&i(a._18),void a.then(function(t){n(s,t)},i))}var h=a.then;if("function"===typeof h){return void new r(h.bind(a)).then(function(t){n(s,t)},i)}}e[s]=a,0===--o&&t(e)}if(0===e.length)return t([]);for(var o=e.length,s=0;s<e.length;s++)n(s,e[s])})},r.reject=function(t){return new r(function(e,i){i(t)})},r.race=function(t){return new r(function(e,i){t.forEach(function(t){r.resolve(t).then(e,i)})})},r.prototype.catch=function(t){return this.then(null,t)}},function(t,e){!function(t){"use strict";function e(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!==typeof t&&(t=String(t)),t}function n(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return g.iterable&&(e[Symbol.iterator]=function(){return e}),e}function r(t){this.map={},t instanceof r?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function s(t){return new Promise(function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}})}function a(t){var e=new FileReader,i=s(e);return e.readAsArrayBuffer(t),i}function h(t){var e=new FileReader,i=s(e);return e.readAsText(t),i}function l(t){for(var e=new Uint8Array(t),i=new Array(e.length),n=0;n<e.length;n++)i[n]=String.fromCharCode(e[n]);return i.join("")}function u(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"===typeof t)this._bodyText=t;else if(g.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(g.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(g.arrayBuffer&&g.blob&&b(t))this._bodyArrayBuffer=u(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!_(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=u(t)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return h(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t){var e=t.toUpperCase();return w.indexOf(e)>-1?e:t}function f(t,e){e=e||{};var i=e.body;if(t instanceof f){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new r(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new r(e.headers)),this.method=c(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var i=t.split("="),n=i.shift().replace(/\+/g," "),r=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(r))}}),e}function m(t){var e=new r;return t.split(/\r?\n/).forEach(function(t){var i=t.split(":"),n=i.shift().trim();if(n){var r=i.join(":").trim();e.append(n,r)}}),e}function v(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new r(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var g={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(g.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(t){return t&&DataView.prototype.isPrototypeOf(t)},_=ArrayBuffer.isView||function(t){return t&&y.indexOf(Object.prototype.toString.call(t))>-1};r.prototype.append=function(t,n){t=e(t),n=i(n);var r=this.map[t];this.map[t]=r?r+","+n:n},r.prototype.delete=function(t){delete this.map[e(t)]},r.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},r.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},r.prototype.set=function(t,n){this.map[e(t)]=i(n)},r.prototype.forEach=function(t,e){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(e,this.map[i],i,this)},r.prototype.keys=function(){var t=[];return this.forEach(function(e,i){t.push(i)}),n(t)},r.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),n(t)},r.prototype.entries=function(){var t=[];return this.forEach(function(e,i){t.push([i,e])}),n(t)},g.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},d.call(f.prototype),d.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var x=[301,302,303,307,308];v.redirect=function(t,e){if(-1===x.indexOf(e))throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},t.Headers=r,t.Request=f,t.Response=v,t.fetch=function(t,e){return new Promise(function(i,n){var r=new f(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:m(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;i(new v(e,t))},o.onerror=function(){n(new TypeError("Network request failed"))},o.ontimeout=function(){n(new TypeError("Network request failed"))},o.open(r.method,r.url,!0),"include"===r.credentials&&(o.withCredentials=!0),"responseType"in o&&g.blob&&(o.responseType="blob"),r.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send("undefined"===typeof r._bodyInit?null:r._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i.n(n),o=i(138),s=i.n(o),a=i(142),h=(i.n(a),i(143)),l=i(339);s.a.render(r.a.createElement(h.a,null),document.getElementById("root")),Object(l.a)()},function(t,e,i){"use strict";function n(t){for(var e=t.message,i="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)i+="&args[]="+encodeURIComponent(arguments[n]);return t.message="Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",t}function r(t,e,i){this.props=t,this.context=e,this.refs=N,this.updater=i||L}function o(){}function s(t,e,i){this.props=t,this.context=e,this.refs=N,this.updater=i||L}function a(t,e,i){var n,r={},o=null,s=null;if(null!=e)for(n in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(o=""+e.key),e)U.call(e,n)&&!H.hasOwnProperty(n)&&(r[n]=e[n]);var a=arguments.length-2;if(1===a)r.children=i;else if(1<a){for(var h=Array(a),l=0;l<a;l++)h[l]=arguments[l+2];r.children=h}if(t&&t.defaultProps)for(n in a=t.defaultProps)void 0===r[n]&&(r[n]=a[n]);return{$$typeof:x,type:t,key:o,ref:s,props:r,_owner:j.current}}function h(t,e){return{$$typeof:x,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function l(t){return"object"===typeof t&&null!==t&&t.$$typeof===x}function u(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}function d(t,e,i,n){if(G.length){var r=G.pop();return r.result=t,r.keyPrefix=e,r.func=i,r.context=n,r.count=0,r}return{result:t,keyPrefix:e,func:i,context:n,count:0}}function c(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>G.length&&G.push(t)}function f(t,e,i,r){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var s=!1;if(null===t)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case x:case S:s=!0}}if(s)return i(r,t,""===e?"."+m(t,0):e),1;if(s=0,e=""===e?".":e+":",Array.isArray(t))for(var a=0;a<t.length;a++){o=t[a];var h=e+m(o,a);s+=f(o,h,i,r)}else if(null===t||"object"!==typeof t?h=null:(h=R&&t[R]||t["@@iterator"],h="function"===typeof h?h:null),"function"===typeof h)for(t=h.call(t),a=0;!(o=t.next()).done;)o=o.value,h=e+m(o,a++),s+=f(o,h,i,r);else if("object"===o)throw i=""+t,n(Error(31),"[object Object]"===i?"object with keys {"+Object.keys(t).join(", ")+"}":i,"");return s}function p(t,e,i){return null==t?0:f(t,"",e,i)}function m(t,e){return"object"===typeof t&&null!==t&&null!=t.key?u(t.key):e.toString(36)}function v(t,e){t.func.call(t.context,e,t.count++)}function g(t,e,i){var n=t.result,r=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?y(t,n,i,function(t){return t}):null!=t&&(l(t)&&(t=h(t,r+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(V,"$&/")+"/")+i)),n.push(t))}function y(t,e,i,n,r){var o="";null!=i&&(o=(""+i).replace(V,"$&/")+"/"),e=d(e,o,n,r),p(t,g,e),c(e)}function b(){var t=z.current;if(null===t)throw n(Error(321));return t}var _=i(36),w="function"===typeof Symbol&&Symbol.for,x=w?Symbol.for("react.element"):60103,S=w?Symbol.for("react.portal"):60106,k=w?Symbol.for("react.fragment"):60107,E=w?Symbol.for("react.strict_mode"):60108,M=w?Symbol.for("react.profiler"):60114,T=w?Symbol.for("react.provider"):60109,C=w?Symbol.for("react.context"):60110,O=w?Symbol.for("react.forward_ref"):60112,P=w?Symbol.for("react.suspense"):60113,A=w?Symbol.for("react.suspense_list"):60120,D=w?Symbol.for("react.memo"):60115,I=w?Symbol.for("react.lazy"):60116;w&&Symbol.for("react.fundamental"),w&&Symbol.for("react.responder"),w&&Symbol.for("react.scope");var R="function"===typeof Symbol&&Symbol.iterator,L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N={};r.prototype.isReactComponent={},r.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw n(Error(85));this.updater.enqueueSetState(this,t,e,"setState")},r.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},o.prototype=r.prototype;var F=s.prototype=new o;F.constructor=s,_(F,r.prototype),F.isPureReactComponent=!0;var z={current:null},B={suspense:null},j={current:null},U=Object.prototype.hasOwnProperty,H={key:!0,ref:!0,__self:!0,__source:!0},V=/\/+/g,G=[],W={Children:{map:function(t,e,i){if(null==t)return t;var n=[];return y(t,n,null,e,i),n},forEach:function(t,e,i){if(null==t)return t;e=d(null,null,e,i),p(t,v,e),c(e)},count:function(t){return p(t,function(){return null},null)},toArray:function(t){var e=[];return y(t,e,null,function(t){return t}),e},only:function(t){if(!l(t))throw n(Error(143));return t}},createRef:function(){return{current:null}},Component:r,PureComponent:s,createContext:function(t,e){return void 0===e&&(e=null),t={$$typeof:C,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:T,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:O,render:t}},lazy:function(t){return{$$typeof:I,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:D,type:t,compare:void 0===e?null:e}},useCallback:function(t,e){return b().useCallback(t,e)},useContext:function(t,e){return b().useContext(t,e)},useEffect:function(t,e){return b().useEffect(t,e)},useImperativeHandle:function(t,e,i){return b().useImperativeHandle(t,e,i)},useDebugValue:function(){},useLayoutEffect:function(t,e){return b().useLayoutEffect(t,e)},useMemo:function(t,e){return b().useMemo(t,e)},useReducer:function(t,e,i){return b().useReducer(t,e,i)},useRef:function(t){return b().useRef(t)},useState:function(t){return b().useState(t)},Fragment:k,Profiler:M,StrictMode:E,Suspense:P,unstable_SuspenseList:A,createElement:a,cloneElement:function(t,e,i){if(null===t||void 0===t)throw n(Error(267),t);var r=_({},t.props),o=t.key,s=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,a=j.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(l in e)U.call(e,l)&&!H.hasOwnProperty(l)&&(r[l]=void 0===e[l]&&void 0!==h?h[l]:e[l])}var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){h=Array(l);for(var u=0;u<l;u++)h[u]=arguments[u+2];r.children=h}return{$$typeof:x,type:t.type,key:o,ref:s,props:r,_owner:a}},createFactory:function(t){var e=a.bind(null,t);return e.type=t,e},isValidElement:l,version:"16.10.2",unstable_withSuspenseConfig:function(t,e){var i=B.suspense;B.suspense=void 0===e?null:e;try{t()}finally{B.suspense=i}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:z,ReactCurrentBatchConfig:B,ReactCurrentOwner:j,IsSomeRendererActing:{current:!1},assign:_}},Y={default:W},$=Y&&W||Y;t.exports=$.default||$},function(t,e,i){"use strict";function n(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}n(),t.exports=i(139)},function(t,e,i){"use strict";function n(t){for(var e=t.message,i="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)i+="&args[]="+encodeURIComponent(arguments[n]);return t.message="Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",t}function r(){if(Ir)for(var t in Rr){var e=Rr[t],i=Ir.indexOf(t);if(!(-1<i))throw n(Error(96),t);if(!Lr[i]){if(!e.extractEvents)throw n(Error(97),t);Lr[i]=e,i=e.eventTypes;for(var r in i){var s=void 0,a=i[r],h=e,l=r;if(Nr.hasOwnProperty(l))throw n(Error(99),l);Nr[l]=a;var u=a.phasedRegistrationNames;if(u){for(s in u)u.hasOwnProperty(s)&&o(u[s],h,l);s=!0}else a.registrationName?(o(a.registrationName,h,l),s=!0):s=!1;if(!s)throw n(Error(98),r,t)}}}}function o(t,e,i){if(Fr[t])throw n(Error(100),t);Fr[t]=e,zr[t]=e.eventTypes[i].dependencies}function s(t,e,i,n,r,o,s,a,h){var l=Array.prototype.slice.call(arguments,3);try{e.apply(i,l)}catch(t){this.onError(t)}}function a(t,e,i,n,r,o,a,h,l){Br=!1,jr=null,s.apply(Vr,arguments)}function h(t,e,i,r,o,s,h,l,u){if(a.apply(this,arguments),Br){if(!Br)throw n(Error(198));var d=jr;Br=!1,jr=null,Ur||(Ur=!0,Hr=d)}}function l(t,e,i){var n=t.type||"unknown-event";t.currentTarget=Yr(i),h(n,e,void 0,t),t.currentTarget=null}function u(t,e){if(null==e)throw n(Error(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function d(t,e,i){Array.isArray(t)?t.forEach(e,i):t&&e.call(i,t)}function c(t){if(t){var e=t._dispatchListeners,i=t._dispatchInstances;if(Array.isArray(e))for(var n=0;n<e.length&&!t.isPropagationStopped();n++)l(t,e[n],i[n]);else e&&l(t,e,i);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function f(t){if(null!==t&&($r=u($r,t)),t=$r,$r=null,t){if(d(t,c),$r)throw n(Error(95));if(Ur)throw t=Hr,Ur=!1,Hr=null,t}}function p(t,e){var i=t.stateNode;if(!i)return null;var r=Gr(i);if(!r)return null;i=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(t=t.type,r=!("button"===t||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(i&&"function"!==typeof i)throw n(Error(231),e,typeof i);return i}function m(t){return null===t||"object"!==typeof t?null:(t=co&&t[co]||t["@@iterator"],"function"===typeof t?t:null)}function v(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then(function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)},function(e){0===t._status&&(t._status=2,t._result=e)})}}function g(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case to:return"Fragment";case Jr:return"Portal";case io:return"Profiler";case eo:return"StrictMode";case ao:return"Suspense";case ho:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case ro:return"Context.Consumer";case no:return"Context.Provider";case so:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case lo:return g(t.type);case uo:if(t=1===t._status?t._result:null)return g(t)}return null}function y(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var i="";break t;default:var n=t._debugOwner,r=t._debugSource,o=g(t.type);i=null,n&&(i=g(n.type)),n=o,o="",r?o=" (at "+r.fileName.replace(Zr,"")+":"+r.lineNumber+")":i&&(o=" (created by "+i+")"),i="\n    in "+(n||"Unknown")+o}e+=i,t=t.return}while(t);return e}function b(t){if(t=Wr(t)){if("function"!==typeof po)throw n(Error(280));var e=Gr(t.stateNode);po(t.stateNode,t.type,e)}}function _(t){mo?vo?vo.push(t):vo=[t]:mo=t}function w(){if(mo){var t=mo,e=vo;if(vo=mo=null,b(t),e)for(t=0;t<e.length;t++)b(e[t])}}function x(t,e){return t(e)}function S(t,e,i,n){return t(e,i,n)}function k(){}function E(){null===mo&&null===vo||(k(),w())}function M(t){return!!wo.call(So,t)||!wo.call(xo,t)&&(_o.test(t)?So[t]=!0:(xo[t]=!0,!1))}function T(t,e,i,n){if(null!==i&&0===i.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==i?!i.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}function C(t,e,i,n){if(null===e||"undefined"===typeof e||T(t,e,i,n))return!0;if(n)return!1;if(null!==i)switch(i.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function O(t,e,i,n,r,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=o}function P(t){return t[1].toUpperCase()}function A(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function D(t,e,i,n){var r=ko.hasOwnProperty(e)?ko[e]:null;(null!==r?0===r.type:!n&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(C(e,i,r,n)&&(i=null),n||null===r?M(e)&&(null===i?t.removeAttribute(e):t.setAttribute(e,""+i)):r.mustUseProperty?t[r.propertyName]=null===i?3!==r.type&&"":i:(e=r.attributeName,n=r.attributeNamespace,null===i?t.removeAttribute(e):(r=r.type,i=3===r||4===r&&!0===i?"":""+i,n?t.setAttributeNS(n,e,i):t.setAttribute(e,i))))}function I(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function R(t){var e=I(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var r=i.get,o=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){n=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(t){n=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function L(t){t._valueTracker||(t._valueTracker=R(t))}function N(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),n="";return t&&(n=I(t)?t.checked?"true":"false":t.value),(t=n)!==i&&(e.setValue(t),!0)}function F(t,e){var i=e.checked;return Ar({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:t._wrapperState.initialChecked})}function z(t,e){var i=null==e.defaultValue?"":e.defaultValue,n=null!=e.checked?e.checked:e.defaultChecked;i=A(null!=e.value?e.value:i),t._wrapperState={initialChecked:n,initialValue:i,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function B(t,e){null!=(e=e.checked)&&D(t,"checked",e,!1)}function j(t,e){B(t,e);var i=A(e.value),n=e.type;if(null!=i)"number"===n?(0===i&&""===t.value||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if("submit"===n||"reset"===n)return void t.removeAttribute("value");e.hasOwnProperty("value")?H(t,e.type,i):e.hasOwnProperty("defaultValue")&&H(t,e.type,A(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function U(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!("submit"!==n&&"reset"!==n||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}i=t.name,""!==i&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!!t._wrapperState.initialChecked,""!==i&&(t.name=i)}function H(t,e,i){"number"===e&&t.ownerDocument.activeElement===t||(null==i?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}function V(t){var e="";return Pr.Children.forEach(t,function(t){null!=t&&(e+=t)}),e}function G(t,e){return t=Ar({children:void 0},e),(e=V(e.children))&&(t.children=e),t}function W(t,e,i,n){if(t=t.options,e){e={};for(var r=0;r<i.length;r++)e["$"+i[r]]=!0;for(i=0;i<t.length;i++)r=e.hasOwnProperty("$"+t[i].value),t[i].selected!==r&&(t[i].selected=r),r&&n&&(t[i].defaultSelected=!0)}else{for(i=""+A(i),e=null,r=0;r<t.length;r++){if(t[r].value===i)return t[r].selected=!0,void(n&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function Y(t,e){if(null!=e.dangerouslySetInnerHTML)throw n(Error(91));return Ar({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $(t,e){var i=e.value;if(null==i){if(i=e.defaultValue,null!=(e=e.children)){if(null!=i)throw n(Error(92));if(Array.isArray(e)){if(!(1>=e.length))throw n(Error(93));e=e[0]}i=e}null==i&&(i="")}t._wrapperState={initialValue:A(i)}}function q(t,e){var i=A(e.value),n=A(e.defaultValue);null!=i&&(i=""+i,i!==t.value&&(t.value=i),null==e.defaultValue&&t.defaultValue!==i&&(t.defaultValue=i)),null!=n&&(t.defaultValue=""+n)}function X(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function Z(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function K(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Z(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}function Q(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&3===i.nodeType)return void(i.nodeValue=e)}t.textContent=e}function J(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}function tt(t){if(Po[t])return Po[t];if(!Oo[t])return t;var e,i=Oo[t];for(e in i)if(i.hasOwnProperty(e)&&e in Ao)return Po[t]=i[e];return t}function et(t){var e=jt(t);Go.forEach(function(i){Ut(i,t,e)}),Wo.forEach(function(i){Ut(i,t,e)})}function it(t,e,i,n){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|i,nativeEvent:n}}function nt(t,e){switch(t){case"focus":case"blur":Bo=null;break;case"dragenter":case"dragleave":jo=null;break;case"mouseover":case"mouseout":Uo=null;break;case"pointerover":case"pointerout":Ho.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vo.delete(e.pointerId)}}function rt(t,e,i,n,r){return null===t||t.nativeEvent!==r?it(e,i,n,r):(t.eventSystemFlags|=n,t)}function ot(t,e,i,n){switch(e){case"focus":return Bo=rt(Bo,t,e,i,n),!0;case"dragenter":return jo=rt(jo,t,e,i,n),!0;case"mouseover":return Uo=rt(Uo,t,e,i,n),!0;case"pointerover":var r=n.pointerId;return Ho.set(r,rt(Ho.get(r)||null,t,e,i,n)),!0;case"gotpointercapture":return r=n.pointerId,Vo.set(r,rt(Vo.get(r)||null,t,e,i,n)),!0}return!1}function st(t){if(null!==t.blockedOn)return!1;var e=zt(t.topLevelType,t.eventSystemFlags,t.nativeEvent);return null===e||(t.blockedOn=e,!1)}function at(t,e,i){st(t)&&i.delete(e)}function ht(){for(Fo=!1;0<zo.length;){var t=zo[0];if(null!==t.blockedOn)break;var e=zt(t.topLevelType,t.eventSystemFlags,t.nativeEvent);null!==e?t.blockedOn=e:zo.shift()}null!==Bo&&st(Bo)&&(Bo=null),null!==jo&&st(jo)&&(jo=null),null!==Uo&&st(Uo)&&(Uo=null),Ho.forEach(at),Vo.forEach(at)}function lt(t,e){t.blockedOn===e&&(t.blockedOn=null,Fo||(Fo=!0,Dr.unstable_scheduleCallback(Dr.unstable_NormalPriority,ht)))}function ut(t){function e(e){return lt(e,t)}if(0<zo.length){lt(zo[0],t);for(var i=1;i<zo.length;i++){var n=zo[i];n.blockedOn===t&&(n.blockedOn=null)}}null!==Bo&&lt(Bo,t),null!==jo&&lt(jo,t),null!==Uo&&lt(Uo,t),Ho.forEach(e),Vo.forEach(e)}function dt(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{e=t,(e.effectTag&($o|qo))!==Yo&&(i=e.return),t=e.return}while(t)}return 3===e.tag?i:null}function ct(t){if(dt(t)!==t)throw n(Error(188))}function ft(t){var e=t.alternate;if(!e){if(null===(e=dt(t)))throw n(Error(188));return e!==t?null:t}for(var i=t,r=e;;){var o=i.return;if(null===o)break;var s=o.alternate;if(null===s){if(null!==(r=o.return)){i=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===i)return ct(o),t;if(s===r)return ct(o),e;s=s.sibling}throw n(Error(188))}if(i.return!==r.return)i=o,r=s;else{for(var a=!1,h=o.child;h;){if(h===i){a=!0,i=o,r=s;break}if(h===r){a=!0,r=o,i=s;break}h=h.sibling}if(!a){for(h=s.child;h;){if(h===i){a=!0,i=s,r=o;break}if(h===r){a=!0,r=s,i=o;break}h=h.sibling}if(!a)throw n(Error(189))}}if(i.alternate!==r)throw n(Error(190))}if(3!==i.tag)throw n(Error(188));return i.stateNode.current===i?t:e}function pt(t){if(!(t=ft(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function mt(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function vt(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function gt(t,e,i){(e=p(t,i.dispatchConfig.phasedRegistrationNames[e]))&&(i._dispatchListeners=u(i._dispatchListeners,e),i._dispatchInstances=u(i._dispatchInstances,t))}function yt(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,i=[];e;)i.push(e),e=vt(e);for(e=i.length;0<e--;)gt(i[e],"captured",t);for(e=0;e<i.length;e++)gt(i[e],"bubbled",t)}}function bt(t,e,i){t&&i&&i.dispatchConfig.registrationName&&(e=p(t,i.dispatchConfig.registrationName))&&(i._dispatchListeners=u(i._dispatchListeners,e),i._dispatchInstances=u(i._dispatchInstances,t))}function _t(t){t&&t.dispatchConfig.registrationName&&bt(t._targetInst,null,t)}function wt(t){d(t,yt)}function xt(){return!0}function St(){return!1}function kt(t,e,i,n){this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=i,t=this.constructor.Interface;for(var r in t)t.hasOwnProperty(r)&&((e=t[r])?this[r]=e(i):"target"===r?this.target=n:this[r]=i[r]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?xt:St,this.isPropagationStopped=St,this}function Et(t,e,i,n){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,t,e,i,n),r}return new this(t,e,i,n)}function Mt(t){if(!(t instanceof this))throw n(Error(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function Tt(t){t.eventPool=[],t.getPooled=Et,t.release=Mt}function Ct(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function Ot(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=es[t])&&!!e[t]}function Pt(){return Ot}function At(t){var e=t.targetInst,i=e;do{if(!i){t.ancestors.push(i);break}var n=i;if(3===n.tag)n=n.stateNode.containerInfo;else{for(;n.return;)n=n.return;n=3!==n.tag?null:n.stateNode.containerInfo}if(!n)break;e=i.tag,5!==e&&6!==e||t.ancestors.push(i),i=re(n)}while(i);for(i=0;i<t.ancestors.length;i++){e=t.ancestors[i];var r=mt(t.nativeEvent);n=t.topLevelType;for(var o=t.nativeEvent,s=t.eventSystemFlags,a=null,h=0;h<Lr.length;h++){var l=Lr[h];l&&(l=l.extractEvents(n,e,o,r,s))&&(a=u(a,l))}f(a)}}function Dt(t,e){It(e,t,!1)}function It(t,e,i){switch(ks(e)){case 0:var n=Rt.bind(null,e,1);break;case 1:n=Lt.bind(null,e,1);break;default:n=Ft.bind(null,e,1)}i?t.addEventListener(e,n,!0):t.addEventListener(e,n,!1)}function Rt(t,e,i){yo||k();var n=Ft,r=yo;yo=!0;try{S(n,t,e,i)}finally{(yo=r)||E()}}function Lt(t,e,i){Ft(t,e,i)}function Nt(t,e,i,n){if(Ms.length){var r=Ms.pop();r.topLevelType=t,r.eventSystemFlags=e,r.nativeEvent=i,r.targetInst=n,t=r}else t={topLevelType:t,eventSystemFlags:e,nativeEvent:i,targetInst:n,ancestors:[]};try{if(e=At,i=t,bo)e(i,void 0);else{bo=!0;try{go(e,i,void 0)}finally{bo=!1,E()}}}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,Ms.length<Es&&Ms.push(t)}}function Ft(t,e,i){if(Ts)if(0<zo.length&&-1<Go.indexOf(t))t=it(null,t,e,i),zo.push(t);else{var n=zt(t,e,i);null===n?nt(t,i):-1<Go.indexOf(t)?(t=it(n,t,e,i),zo.push(t)):ot(n,t,e,i)||(nt(t,i),Nt(t,e,i,null))}}function zt(t,e,i){var n=mt(i),r=re(n);if(null!==r)if(null===(n=dt(r)))r=null;else{var o=n.tag;if(13===o){if(null!==(n=13!==n.tag||(r=n.memoizedState,null===r&&null!==(n=n.alternate)&&(r=n.memoizedState),null===r)?null:r.dehydrated))return n;r=null}else if(3===o){if(n.stateNode.hydrate)return 3===n.tag?n.stateNode.containerInfo:null;r=null}else n!==r&&(r=null)}return Nt(t,e,i,r),null}function Bt(t){if(!fo)return!1;t="on"+t;var e=t in document;return e||(e=document.createElement("div"),e.setAttribute(t,"return;"),e="function"===typeof e[t]),e}function jt(t){var e=Cs.get(t);return void 0===e&&(e=new Set,Cs.set(t,e)),e}function Ut(t,e,i){if(!i.has(t)){switch(t){case"scroll":It(e,"scroll",!0);break;case"focus":case"blur":It(e,"focus",!0),It(e,"blur",!0),i.add("blur"),i.add("focus");break;case"cancel":case"close":Bt(t)&&It(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===No.indexOf(t)&&Dt(t,e)}i.add(t)}}function Ht(t,e,i){return null==e||"boolean"===typeof e||""===e?"":i||"number"!==typeof e||0===e||Os.hasOwnProperty(t)&&Os[t]?(""+e).trim():e+"px"}function Vt(t,e){t=t.style;for(var i in e)if(e.hasOwnProperty(i)){var n=0===i.indexOf("--"),r=Ht(i,e[i],n);"float"===i&&(i="cssFloat"),n?t.setProperty(i,r):t[i]=r}}function Gt(t,e){if(e){if(As[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw n(Error(137),t,"");if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw n(Error(60));if(!("object"===typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML))throw n(Error(61))}if(null!=e.style&&"object"!==typeof e.style)throw n(Error(62),"")}}function Wt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Yt(t,e){t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument;var i=jt(t);e=zr[e];for(var n=0;n<e.length;n++)Ut(e[n],t,i)}function $t(){}function qt(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Xt(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zt(t,e){var i=Xt(t);t=0;for(var n;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=Xt(i)}}function Kt(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?Kt(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function Qt(){for(var t=window,e=qt();e instanceof t.HTMLIFrameElement;){try{var i="string"===typeof e.contentWindow.location.href}catch(t){i=!1}if(!i)break;t=e.contentWindow,e=qt(t.document)}return e}function Jt(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function te(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function ee(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}function ie(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function ne(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var i=t.data;if(i===Ds||i===Ls||i===Rs){if(0===e)return t;e--}else i===Is&&e++}t=t.previousSibling}return null}function re(t){var e=t[Us];if(e)return e;for(var i=t.parentNode;i;){if(e=i[Vs]||i[Us]){if(i=e.alternate,null!==e.child||null!==i&&null!==i.child)for(t=ne(t);null!==t;){if(i=t[Us])return i;t=ne(t)}return e}t=i,i=t.parentNode}return null}function oe(t){return t=t[Us]||t[Vs],!t||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function se(t){if(5===t.tag||6===t.tag)return t.stateNode;throw n(Error(33))}function ae(t){return t[Hs]||null}function he(){if(Ys)return Ys;var t,e,i=Ws,n=i.length,r="value"in Gs?Gs.value:Gs.textContent,o=r.length;for(t=0;t<n&&i[t]===r[t];t++);var s=n-t;for(e=1;e<=s&&i[n-e]===r[o-e];e++);return Ys=r.slice(t,1<e?1-e:void 0)}function le(t,e){switch(t){case"keyup":return-1!==Xs.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function ue(t){return t=t.detail,"object"===typeof t&&"data"in t?t.data:null}function de(t,e){switch(t){case"compositionend":return ue(e);case"keypress":return 32!==e.which?null:(ia=!0,ta);case"textInput":return t=e.data,t===ta&&ia?null:t;default:return null}}function ce(t,e){if(na)return"compositionend"===t||!Zs&&le(t,e)?(t=he(),Ys=Ws=Gs=null,na=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Js&&"ko"!==e.locale?null:e.data;default:return null}}function fe(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!oa[t.type]:"textarea"===e}function pe(t,e,i){return t=kt.getPooled(sa.change,t,e,i),t.type="change",_(i),wt(t),t}function me(t){f(t)}function ve(t){if(N(se(t)))return t}function ge(t,e){if("change"===t)return e}function ye(){aa&&(aa.detachEvent("onpropertychange",be),ha=aa=null)}function be(t){if("value"===t.propertyName&&ve(ha))if(t=pe(ha,t,mt(t)),yo)f(t);else{yo=!0;try{x(me,t)}finally{yo=!1,E()}}}function _e(t,e,i){"focus"===t?(ye(),aa=e,ha=i,aa.attachEvent("onpropertychange",be)):"blur"===t&&ye()}function we(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return ve(ha)}function xe(t,e){if("click"===t)return ve(e)}function Se(t,e){if("input"===t||"change"===t)return ve(e)}function ke(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e}function Ee(t,e){if(fa(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++)if(!pa.call(e,i[n])||!fa(t[i[n]],e[i[n]]))return!1;return!0}function Me(t,e){var i=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return _a||null==ga||ga!==qt(i)?null:(i=ga,"selectionStart"in i&&Jt(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ba&&Ee(ba,i)?null:(ba=i,t=kt.getPooled(va.select,ya,t,e),t.type="select",t.target=ga,wt(t),t))}function Te(t){0>Ta||(t.current=Ma[Ta],Ma[Ta]=null,Ta--)}function Ce(t,e){Ta++,Ma[Ta]=t.current,t.current=e}function Oe(t,e){var i=t.type.contextTypes;if(!i)return Ca;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in i)o[r]=e[r];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Pe(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Ae(t){Te(Pa,t),Te(Oa,t)}function De(t){Te(Pa,t),Te(Oa,t)}function Ie(t,e,i){if(Oa.current!==Ca)throw n(Error(168));Ce(Oa,e,t),Ce(Pa,i,t)}function Re(t,e,i){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return i;r=r.getChildContext();for(var o in r)if(!(o in t))throw n(Error(108),g(e)||"Unknown",o);return Ar({},i,{},r)}function Le(t){var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||Ca,Aa=Oa.current,Ce(Oa,e,t),Ce(Pa,Pa.current,t),!0}function Ne(t,e,i){var r=t.stateNode;if(!r)throw n(Error(169));i?(e=Re(t,e,Aa),r.__reactInternalMemoizedMergedChildContext=e,Te(Pa,t),Te(Oa,t),Ce(Oa,e,t)):Te(Pa,t),Ce(Pa,i,t)}function Fe(){switch(za()){case Ba:return 99;case ja:return 98;case Ua:return 97;case Ha:return 96;case Va:return 95;default:throw n(Error(332))}}function ze(t){switch(t){case 99:return Ba;case 98:return ja;case 97:return Ua;case 96:return Ha;case 95:return Va;default:throw n(Error(332))}}function Be(t,e){return t=ze(t),Da(t,e)}function je(t,e,i){return t=ze(t),Ia(t,e,i)}function Ue(t){return null===Ya?(Ya=[t],$a=Ia(Ba,Ve)):Ya.push(t),Ga}function He(){if(null!==$a){var t=$a;$a=null,Ra(t)}Ve()}function Ve(){if(!qa&&null!==Ya){qa=!0;var t=0;try{var e=Ya;Be(99,function(){for(;t<e.length;t++){var i=e[t];do{i=i(!0)}while(null!==i)}}),Ya=null}catch(e){throw null!==Ya&&(Ya=Ya.slice(t+1)),Ia(Ba,He),e}finally{qa=!1}}}function Ge(t,e){if(t&&t.defaultProps){e=Ar({},e),t=t.defaultProps;for(var i in t)void 0===e[i]&&(e[i]=t[i])}return e}function We(){th=Ja=Qa=null}function Ye(t,e){var i=t.type._context;Ce(Ka,i._currentValue,t),i._currentValue=e}function $e(t){var e=Ka.current;Te(Ka,t),t.type._context._currentValue=e}function qe(t,e){for(;null!==t;){var i=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==i&&i.childExpirationTime<e&&(i.childExpirationTime=e);else{if(!(null!==i&&i.childExpirationTime<e))break;i.childExpirationTime=e}t=t.return}}function Xe(t,e){Qa=t,th=Ja=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(Rh=!0),t.firstContext=null)}function Ze(t,e){if(th!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(th=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Ja){if(null===Qa)throw n(Error(308));Ja=e,Qa.dependencies={expirationTime:0,firstContext:e,responders:null}}else Ja=Ja.next=e;return t._currentValue}function Ke(t){return{baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Qe(t){return{baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Je(t,e){return{expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function ti(t,e){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e)}function ei(t,e){var i=t.alternate;if(null===i){var n=t.updateQueue,r=null;null===n&&(n=t.updateQueue=Ke(t.memoizedState))}else n=t.updateQueue,r=i.updateQueue,null===n?null===r?(n=t.updateQueue=Ke(t.memoizedState),r=i.updateQueue=Ke(i.memoizedState)):n=t.updateQueue=Qe(r):null===r&&(r=i.updateQueue=Qe(n));null===r||n===r?ti(n,e):null===n.lastUpdate||null===r.lastUpdate?(ti(n,e),ti(r,e)):(ti(n,e),r.lastUpdate=e)}function ii(t,e){var i=t.updateQueue;i=null===i?t.updateQueue=Ke(t.memoizedState):ni(t,i),null===i.lastCapturedUpdate?i.firstCapturedUpdate=i.lastCapturedUpdate=e:(i.lastCapturedUpdate.next=e,i.lastCapturedUpdate=e)}function ni(t,e){var i=t.alternate;return null!==i&&e===i.updateQueue&&(e=t.updateQueue=Qe(e)),e}function ri(t,e,i,n,r,o){switch(i.tag){case 1:return t=i.payload,"function"===typeof t?t.call(o,n,r):t;case 3:t.effectTag=-4097&t.effectTag|64;case 0:if(t=i.payload,null===(r="function"===typeof t?t.call(o,n,r):t)||void 0===r)break;return Ar({},n,r);case 2:eh=!0}return n}function oi(t,e,i,n,r){eh=!1,e=ni(t,e);for(var o=e.baseState,s=null,a=0,h=e.firstUpdate,l=o;null!==h;){var u=h.expirationTime;u<r?(null===s&&(s=h,o=l),a<u&&(a=u)):(zn(u,h.suspenseConfig),l=ri(t,e,h,l,i,n),null!==h.callback&&(t.effectTag|=32,h.nextEffect=null,null===e.lastEffect?e.firstEffect=e.lastEffect=h:(e.lastEffect.nextEffect=h,e.lastEffect=h))),h=h.next}for(u=null,h=e.firstCapturedUpdate;null!==h;){var d=h.expirationTime;d<r?(null===u&&(u=h,null===s&&(o=l)),a<d&&(a=d)):(l=ri(t,e,h,l,i,n),null!==h.callback&&(t.effectTag|=32,h.nextEffect=null,null===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=h:(e.lastCapturedEffect.nextEffect=h,e.lastCapturedEffect=h))),h=h.next}null===s&&(e.lastUpdate=null),null===u?e.lastCapturedUpdate=null:t.effectTag|=32,null===s&&null===u&&(o=l),e.baseState=o,e.firstUpdate=s,e.firstCapturedUpdate=u,Bn(a),t.expirationTime=a,t.memoizedState=l}function si(t,e,i){null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),ai(e.firstEffect,i),e.firstEffect=e.lastEffect=null,ai(e.firstCapturedEffect,i),e.firstCapturedEffect=e.lastCapturedEffect=null}function ai(t,e){for(;null!==t;){var i=t.callback;if(null!==i){t.callback=null;var r=e;if("function"!==typeof i)throw n(Error(191),i);i.call(r)}t=t.nextEffect}}function hi(t,e,i,n){e=t.memoizedState,i=i(n,e),i=null===i||void 0===i?e:Ar({},e,i),t.memoizedState=i,null!==(n=t.updateQueue)&&0===t.expirationTime&&(n.baseState=i)}function li(t,e,i,n,r,o,s){return t=t.stateNode,"function"===typeof t.shouldComponentUpdate?t.shouldComponentUpdate(n,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!Ee(i,n)||!Ee(r,o))}function ui(t,e,i){var n=!1,r=Ca,o=e.contextType;return"object"===typeof o&&null!==o?o=Ze(o):(r=Pe(e)?Aa:Oa.current,n=e.contextTypes,o=(n=null!==n&&void 0!==n)?Oe(t,r):Ca),e=new e(i,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=rh,t.stateNode=e,e._reactInternalFiber=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function di(t,e,i,n){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(i,n),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(i,n),e.state!==t&&rh.enqueueReplaceState(e,e.state,null)}function ci(t,e,i,n){var r=t.stateNode;r.props=i,r.state=t.memoizedState,r.refs=nh;var o=e.contextType;"object"===typeof o&&null!==o?r.context=Ze(o):(o=Pe(e)?Aa:Oa.current,r.context=Oe(t,o)),o=t.updateQueue,null!==o&&(oi(t,o,i,r,n),r.state=t.memoizedState),o=e.getDerivedStateFromProps,"function"===typeof o&&(hi(t,e,o,i),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&rh.enqueueReplaceState(r,r.state,null),null!==(o=t.updateQueue)&&(oi(t,o,i,r,n),r.state=t.memoizedState)),"function"===typeof r.componentDidMount&&(t.effectTag|=4)}function fi(t,e,i){if(null!==(t=i.ref)&&"function"!==typeof t&&"object"!==typeof t){if(i._owner){if(i=i._owner){if(1!==i.tag)throw n(Error(309));var r=i.stateNode}if(!r)throw n(Error(147),t);var o=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=r.refs;e===nh&&(e=r.refs={}),null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}if("string"!==typeof t)throw n(Error(284));if(!i._owner)throw n(Error(290),t)}return t}function pi(t,e){if("textarea"!==t.type)throw n(Error(31),"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function mi(t){function e(e,i){if(t){var n=e.lastEffect;null!==n?(n.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i,i.nextEffect=null,i.effectTag=8}}function i(i,n){if(!t)return null;for(;null!==n;)e(i,n),n=n.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(t,e,i){return t=or(t,e),t.index=0,t.sibling=null,t}function s(e,i,n){return e.index=n,t?null!==(n=e.alternate)?(n=n.index,n<i?(e.effectTag=$o,i):n):(e.effectTag=$o,i):i}function a(e){return t&&null===e.alternate&&(e.effectTag=$o),e}function h(t,e,i,n){return null===e||6!==e.tag?(e=hr(i,t.mode,n),e.return=t,e):(e=o(e,i,n),e.return=t,e)}function l(t,e,i,n){return null!==e&&e.elementType===i.type?(n=o(e,i.props,n),n.ref=fi(t,e,i),n.return=t,n):(n=sr(i.type,i.key,i.props,null,t.mode,n),n.ref=fi(t,e,i),n.return=t,n)}function u(t,e,i,n){return null===e||4!==e.tag||e.stateNode.containerInfo!==i.containerInfo||e.stateNode.implementation!==i.implementation?(e=lr(i,t.mode,n),e.return=t,e):(e=o(e,i.children||[],n),e.return=t,e)}function d(t,e,i,n,r){return null===e||7!==e.tag?(e=ar(i,t.mode,n,r),e.return=t,e):(e=o(e,i,n),e.return=t,e)}function c(t,e,i){if("string"===typeof e||"number"===typeof e)return e=hr(""+e,t.mode,i),e.return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case Qr:return i=sr(e.type,e.key,e.props,null,t.mode,i),i.ref=fi(t,null,e),i.return=t,i;case Jr:return e=lr(e,t.mode,i),e.return=t,e}if(oh(e)||m(e))return e=ar(e,t.mode,i,null),e.return=t,e;pi(t,e)}return null}function f(t,e,i,n){var r=null!==e?e.key:null;if("string"===typeof i||"number"===typeof i)return null!==r?null:h(t,e,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case Qr:return i.key===r?i.type===to?d(t,e,i.props.children,n,r):l(t,e,i,n):null;case Jr:return i.key===r?u(t,e,i,n):null}if(oh(i)||m(i))return null!==r?null:d(t,e,i,n,null);pi(t,i)}return null}function p(t,e,i,n,r){if("string"===typeof n||"number"===typeof n)return t=t.get(i)||null,h(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Qr:return t=t.get(null===n.key?i:n.key)||null,n.type===to?d(e,t,n.props.children,r,n.key):l(e,t,n,r);case Jr:return t=t.get(null===n.key?i:n.key)||null,u(e,t,n,r)}if(oh(n)||m(n))return t=t.get(i)||null,d(e,t,n,r,null);pi(e,n)}return null}function v(n,o,a,h){for(var l=null,u=null,d=o,m=o=0,v=null;null!==d&&m<a.length;m++){d.index>m?(v=d,d=null):v=d.sibling;var g=f(n,d,a[m],h);if(null===g){null===d&&(d=v);break}t&&d&&null===g.alternate&&e(n,d),o=s(g,o,m),null===u?l=g:u.sibling=g,u=g,d=v}if(m===a.length)return i(n,d),l;if(null===d){for(;m<a.length;m++)null!==(d=c(n,a[m],h))&&(o=s(d,o,m),null===u?l=d:u.sibling=d,u=d);return l}for(d=r(n,d);m<a.length;m++)null!==(v=p(d,n,m,a[m],h))&&(t&&null!==v.alternate&&d.delete(null===v.key?m:v.key),o=s(v,o,m),null===u?l=v:u.sibling=v,u=v);return t&&d.forEach(function(t){return e(n,t)}),l}function g(o,a,h,l){var u=m(h);if("function"!==typeof u)throw n(Error(150));if(null==(h=u.call(h)))throw n(Error(151));for(var d=u=null,v=a,g=a=0,y=null,b=h.next();null!==v&&!b.done;g++,b=h.next()){v.index>g?(y=v,v=null):y=v.sibling;var _=f(o,v,b.value,l);if(null===_){null===v&&(v=y);break}t&&v&&null===_.alternate&&e(o,v),a=s(_,a,g),null===d?u=_:d.sibling=_,d=_,v=y}if(b.done)return i(o,v),u;if(null===v){for(;!b.done;g++,b=h.next())null!==(b=c(o,b.value,l))&&(a=s(b,a,g),null===d?u=b:d.sibling=b,d=b);return u}for(v=r(o,v);!b.done;g++,b=h.next())null!==(b=p(v,o,g,b.value,l))&&(t&&null!==b.alternate&&v.delete(null===b.key?g:b.key),a=s(b,a,g),null===d?u=b:d.sibling=b,d=b);return t&&v.forEach(function(t){return e(o,t)}),u}return function(t,r,s,h){var l="object"===typeof s&&null!==s&&s.type===to&&null===s.key;l&&(s=s.props.children);var u="object"===typeof s&&null!==s;if(u)switch(s.$$typeof){case Qr:t:{for(u=s.key,l=r;null!==l;){if(l.key===u){if(7===l.tag?s.type===to:l.elementType===s.type){i(t,l.sibling),r=o(l,s.type===to?s.props.children:s.props,h),r.ref=fi(t,l,s),r.return=t,t=r;break t}i(t,l);break}e(t,l),l=l.sibling}s.type===to?(r=ar(s.props.children,t.mode,h,s.key),r.return=t,t=r):(h=sr(s.type,s.key,s.props,null,t.mode,h),h.ref=fi(t,r,s),h.return=t,t=h)}return a(t);case Jr:t:{for(l=s.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){i(t,r.sibling),r=o(r,s.children||[],h),r.return=t,t=r;break t}i(t,r);break}e(t,r),r=r.sibling}r=lr(s,t.mode,h),r.return=t,t=r}return a(t)}if("string"===typeof s||"number"===typeof s)return s=""+s,null!==r&&6===r.tag?(i(t,r.sibling),r=o(r,s,h),r.return=t,t=r):(i(t,r),r=hr(s,t.mode,h),r.return=t,t=r),a(t);if(oh(s))return v(t,r,s,h);if(m(s))return g(t,r,s,h);if(u&&pi(t,s),"undefined"===typeof s&&!l)switch(t.tag){case 1:case 0:throw t=t.type,n(Error(152),t.displayName||t.name||"Component")}return i(t,r)}}function vi(t){if(t===hh)throw n(Error(174));return t}function gi(t,e){Ce(dh,e,t),Ce(uh,t,t),Ce(lh,hh,t);var i=e.nodeType;switch(i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:K(null,"");break;default:i=8===i?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=K(e,i)}Te(lh,t),Ce(lh,e,t)}function yi(t){Te(lh,t),Te(uh,t),Te(dh,t)}function bi(t){vi(dh.current);var e=vi(lh.current),i=K(e,t.type);e!==i&&(Ce(uh,t,t),Ce(lh,i,t))}function _i(t){uh.current===t&&(Te(lh,t),Te(uh,t))}function wi(t){for(var e=t;null!==e;){if(13===e.tag){var i=e.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||i.data===Rs||i.data===Ls))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if((64&e.effectTag)!==Yo)return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function xi(t,e){return{responder:t,props:e}}function Si(){throw n(Error(321))}function ki(t,e){if(null===e)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!fa(t[i],e[i]))return!1;return!0}function Ei(t,e,i,r,o,s){if(ph=s,mh=e,gh=null!==t?t.memoizedState:null,fh.current=null===gh?Ch:Oh,e=i(r,o),kh){do{kh=!1,Mh+=1,gh=null!==t?t.memoizedState:null,_h=yh,xh=bh=vh=null,fh.current=Oh,e=i(r,o)}while(kh);Eh=null,Mh=0}if(fh.current=Th,t=mh,t.memoizedState=yh,t.expirationTime=wh,t.updateQueue=xh,t.effectTag|=Sh,t=null!==vh&&null!==vh.next,ph=0,_h=bh=yh=gh=vh=mh=null,wh=0,xh=null,Sh=0,t)throw n(Error(300));return e}function Mi(){fh.current=Th,ph=0,_h=bh=yh=gh=vh=mh=null,wh=0,xh=null,Sh=0,kh=!1,Eh=null,Mh=0}function Ti(){var t={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===bh?yh=bh=t:bh=bh.next=t,bh}function Ci(){if(null!==_h)bh=_h,_h=bh.next,vh=gh,gh=null!==vh?vh.next:null;else{if(null===gh)throw n(Error(310));vh=gh;var t={memoizedState:vh.memoizedState,baseState:vh.baseState,queue:vh.queue,baseUpdate:vh.baseUpdate,next:null};bh=null===bh?yh=t:bh.next=t,gh=vh.next}return bh}function Oi(t,e){return"function"===typeof e?e(t):e}function Pi(t){var e=Ci(),i=e.queue;if(null===i)throw n(Error(311));if(i.lastRenderedReducer=t,0<Mh){var r=i.dispatch;if(null!==Eh){var o=Eh.get(i);if(void 0!==o){Eh.delete(i);var s=e.memoizedState;do{s=t(s,o.action),o=o.next}while(null!==o);return fa(s,e.memoizedState)||(Rh=!0),e.memoizedState=s,e.baseUpdate===i.last&&(e.baseState=s),i.lastRenderedState=s,[s,r]}}return[e.memoizedState,r]}r=i.last;var a=e.baseUpdate;if(s=e.baseState,null!==a?(null!==r&&(r.next=null),r=a.next):r=null!==r?r.next:null,null!==r){var h=o=null,l=r,u=!1;do{var d=l.expirationTime;d<ph?(u||(u=!0,h=a,o=s),d>wh&&(wh=d,Bn(wh))):(zn(d,l.suspenseConfig),s=l.eagerReducer===t?l.eagerState:t(s,l.action)),a=l,l=l.next}while(null!==l&&l!==r);u||(h=a,o=s),fa(s,e.memoizedState)||(Rh=!0),e.memoizedState=s,e.baseUpdate=h,e.baseState=o,i.lastRenderedState=s}return[e.memoizedState,i.dispatch]}function Ai(t,e,i,n){return t={tag:t,create:e,destroy:i,deps:n,next:null},null===xh?(xh={lastEffect:null},xh.lastEffect=t.next=t):(e=xh.lastEffect,null===e?xh.lastEffect=t.next=t:(i=e.next,e.next=t,t.next=i,xh.lastEffect=t)),t}function Di(t,e,i,n){var r=Ti();Sh|=t,r.memoizedState=Ai(e,i,void 0,void 0===n?null:n)}function Ii(t,e,i,n){var r=Ci();n=void 0===n?null:n;var o=void 0;if(null!==vh){var s=vh.memoizedState;if(o=s.destroy,null!==n&&ki(n,s.deps))return void Ai(0,i,o,n)}Sh|=t,r.memoizedState=Ai(e,i,o,n)}function Ri(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Li(){}function Ni(t,e,i){if(!(25>Mh))throw n(Error(301));var r=t.alternate;if(t===mh||null!==r&&r===mh)if(kh=!0,t={expirationTime:ph,suspenseConfig:null,action:i,eagerReducer:null,eagerState:null,next:null},null===Eh&&(Eh=new Map),void 0===(i=Eh.get(e)))Eh.set(e,t);else{for(e=i;null!==e.next;)e=e.next;e.next=t}else{var o=wn(),s=ih.suspense;o=xn(o,t,s),s={expirationTime:o,suspenseConfig:s,action:i,eagerReducer:null,eagerState:null,next:null};var a=e.last;if(null===a)s.next=s;else{var h=a.next;null!==h&&(s.next=h),a.next=s}if(e.last=s,0===t.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=e.lastRenderedReducer))try{var l=e.lastRenderedState,u=r(l,i);if(s.eagerReducer=r,s.eagerState=u,fa(u,l))return}catch(t){}Sn(t,o)}}function Fi(t,e){var i=ir(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=e,i.return=t,i.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=i,t.lastEffect=i):t.firstEffect=t.lastEffect=i}function zi(t,e){switch(t.tag){case 5:var i=t.type;return null!==(e=1!==e.nodeType||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Bi(t){if(Dh){var e=Ah;if(e){var i=e;if(!zi(t,e)){if(!(e=ie(i.nextSibling))||!zi(t,e))return t.effectTag=t.effectTag&~qo|$o,Dh=!1,void(Ph=t);Fi(Ph,i)}Ph=t,Ah=ie(e.firstChild)}else t.effectTag=t.effectTag&~qo|$o,Dh=!1,Ph=t}}function ji(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Ph=t}function Ui(t){if(t!==Ph)return!1;if(!Dh)return ji(t),Dh=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!ee(e,t.memoizedProps))for(e=Ah;e;)Fi(t,e),e=ie(e.nextSibling);if(ji(t),13===t.tag)if(t=t.memoizedState,null===(t=null!==t?t.dehydrated:null))t=Ah;else t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var i=t.data;if(i===Is){if(0===e){t=ie(t.nextSibling);break t}e--}else i!==Ds&&i!==Ls&&i!==Rs||e++}t=t.nextSibling}t=null}else t=Ph?ie(t.stateNode.nextSibling):null;return Ah=t,!0}function Hi(){Ah=Ph=null,Dh=!1}function Vi(t,e,i,n){e.child=null===t?ah(e,null,i,n):sh(e,t.child,i,n)}function Gi(t,e,i,n,r){i=i.render;var o=e.ref;return Xe(e,r),n=Ei(t,e,i,n,o,r),null===t||Rh?(e.effectTag|=1,Vi(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=r&&(t.expirationTime=0),en(t,e,r))}function Wi(t,e,i,n,r,o){if(null===t){var s=i.type;return"function"!==typeof s||nr(s)||void 0!==s.defaultProps||null!==i.compare||void 0!==i.defaultProps?(t=sr(i.type,null,n,null,e.mode,o),t.ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,Yi(t,e,s,n,r,o))}return s=t.child,r<o&&(r=s.memoizedProps,i=i.compare,(i=null!==i?i:Ee)(r,n)&&t.ref===e.ref)?en(t,e,o):(e.effectTag|=1,t=or(s,n),t.ref=e.ref,t.return=e,e.child=t)}function Yi(t,e,i,n,r,o){return null!==t&&Ee(t.memoizedProps,n)&&t.ref===e.ref&&(Rh=!1,r<o)?en(t,e,o):qi(t,e,i,n,o)}function $i(t,e){var i=e.ref;(null===t&&null!==i||null!==t&&t.ref!==i)&&(e.effectTag|=128)}function qi(t,e,i,n,r){var o=Pe(i)?Aa:Oa.current;return o=Oe(e,o),Xe(e,r),i=Ei(t,e,i,n,o,r),null===t||Rh?(e.effectTag|=1,Vi(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=r&&(t.expirationTime=0),en(t,e,r))}function Xi(t,e,i,n,r){if(Pe(i)){var o=!0;Le(e)}else o=!1;if(Xe(e,r),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=$o),ui(e,i,n,r),ci(e,i,n,r),n=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var h=s.context,l=i.contextType;"object"===typeof l&&null!==l?l=Ze(l):(l=Pe(i)?Aa:Oa.current,l=Oe(e,l));var u=i.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==n||h!==l)&&di(e,s,n,l),eh=!1;var c=e.memoizedState;h=s.state=c;var f=e.updateQueue;null!==f&&(oi(e,f,n,s,r),h=e.memoizedState),a!==n||c!==h||Pa.current||eh?("function"===typeof u&&(hi(e,i,u,n),h=e.memoizedState),(a=eh||li(e,i,a,n,c,h,l))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.effectTag|=4)):("function"===typeof s.componentDidMount&&(e.effectTag|=4),e.memoizedProps=n,e.memoizedState=h),s.props=n,s.state=h,s.context=l,n=a):("function"===typeof s.componentDidMount&&(e.effectTag|=4),n=!1)}else s=e.stateNode,a=e.memoizedProps,s.props=e.type===e.elementType?a:Ge(e.type,a),h=s.context,l=i.contextType,"object"===typeof l&&null!==l?l=Ze(l):(l=Pe(i)?Aa:Oa.current,l=Oe(e,l)),u=i.getDerivedStateFromProps,(d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==n||h!==l)&&di(e,s,n,l),eh=!1,h=e.memoizedState,c=s.state=h,f=e.updateQueue,null!==f&&(oi(e,f,n,s,r),c=e.memoizedState),a!==n||h!==c||Pa.current||eh?("function"===typeof u&&(hi(e,i,u,n),c=e.memoizedState),(u=eh||li(e,i,a,n,h,c,l))?(d||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(n,c,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,c,l)),"function"===typeof s.componentDidUpdate&&(e.effectTag|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.effectTag|=256),e.memoizedProps=n,e.memoizedState=c),s.props=n,s.state=c,s.context=l,n=u):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.effectTag|=256),n=!1);return Zi(t,e,i,n,o,r)}function Zi(t,e,i,n,r,o){$i(t,e);var s=(64&e.effectTag)!==Yo;if(!n&&!s)return r&&Ne(e,i,!1),en(t,e,o);n=e.stateNode,Ih.current=e;var a=s&&"function"!==typeof i.getDerivedStateFromError?null:n.render();return e.effectTag|=1,null!==t&&s?(e.child=sh(e,t.child,null,o),e.child=sh(e,null,a,o)):Vi(t,e,a,o),e.memoizedState=n.state,r&&Ne(e,i,!0),e.child}function Ki(t){var e=t.stateNode;e.pendingContext?Ie(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ie(t,e.context,!1),gi(t,e.containerInfo)}function Qi(t,e,i){var n,r=e.mode,o=e.pendingProps,s=ch.current,a=!1;if((n=(64&e.effectTag)!==Yo)||(n=0!==(2&s)&&(null===t||null!==t.memoizedState)),n?(a=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(s|=1),Ce(ch,1&s,e),null===t){if(a){if(a=o.fallback,o=ar(null,r,0,null),o.return=e,0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return i=ar(a,r,i,null),i.return=e,o.sibling=i,e.memoizedState=Lh,e.child=o,i}return r=o.children,e.memoizedState=null,e.child=ah(e,null,r,i)}if(null!==t.memoizedState){if(t=t.child,r=t.sibling,a){if(o=o.fallback,i=or(t,t.pendingProps),i.return=e,0===(2&e.mode)&&(a=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(i.child=a;null!==a;)a.return=i,a=a.sibling;return r=or(r,o,r.expirationTime),r.return=e,i.sibling=r,i.childExpirationTime=0,e.memoizedState=Lh,e.child=i,r}return i=sh(e,t.child,o.children,i),e.memoizedState=null,e.child=i}if(t=t.child,a){if(a=o.fallback,o=ar(null,r,0,null),o.return=e,o.child=t,null!==t&&(t.return=o),0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return i=ar(a,r,i,null),i.return=e,o.sibling=i,i.effectTag|=$o,o.childExpirationTime=0,e.memoizedState=Lh,e.child=o,i}return e.memoizedState=null,e.child=sh(e,t,o.children,i)}function Ji(t,e,i,n,r){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,last:n,tail:i,tailExpiration:0,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.last=n,o.tail=i,o.tailExpiration=0,o.tailMode=r)}function tn(t,e,i){var n=e.pendingProps,r=n.revealOrder,o=n.tail;if(Vi(t,e,n.children,i),0!==(2&(n=ch.current)))n=1&n|2,e.effectTag|=64;else{if(null!==t&&(64&t.effectTag)!==Yo)t:for(t=e.child;null!==t;){if(13===t.tag){if(null!==t.memoizedState){t.expirationTime<i&&(t.expirationTime=i);var s=t.alternate;null!==s&&s.expirationTime<i&&(s.expirationTime=i),qe(t.return,i)}}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ce(ch,n,e),0===(2&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(i=e.child,r=null;null!==i;)n=i.alternate,null!==n&&null===wi(n)&&(r=i),i=i.sibling;i=r,null===i?(r=e.child,e.child=null):(r=i.sibling,i.sibling=null),Ji(e,!1,r,i,o);break;case"backwards":for(i=null,r=e.child,e.child=null;null!==r;){if(null!==(n=r.alternate)&&null===wi(n)){e.child=r;break}n=r.sibling,r.sibling=i,i=r,r=n}Ji(e,!0,i,null,o);break;case"together":Ji(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function en(t,e,i){null!==t&&(e.dependencies=t.dependencies);var r=e.expirationTime;if(0!==r&&Bn(r),e.childExpirationTime<i)return null;if(null!==t&&e.child!==t.child)throw n(Error(153));if(null!==e.child){for(t=e.child,i=or(t,t.pendingProps,t.expirationTime),e.child=i,i.return=e;null!==t.sibling;)t=t.sibling,i=i.sibling=or(t,t.pendingProps,t.expirationTime),i.return=e;i.sibling=null}return e.child}function nn(t){t.effectTag|=4}function rn(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;null!==e;)null!==e.alternate&&(i=e),e=e.sibling;null===i?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?e||null===t.tail?t.tail=null:t.tail.sibling=null:n.sibling=null}}function on(t){switch(t.tag){case 1:Pe(t.type)&&Ae(t);var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(yi(t),De(t),(64&(e=t.effectTag))!==Yo)throw n(Error(285));return t.effectTag=-4097&e|64,t;case 5:return _i(t),null;case 13:return Te(ch,t),e=t.effectTag,4096&e?(t.effectTag=-4097&e|64,t):null;case 19:return Te(ch,t),null;case 4:return yi(t),null;case 10:return $e(t),null;default:return null}}function sn(t,e){return{value:t,source:e,stack:y(e)}}function an(t,e){var i=e.source,n=e.stack;null===n&&null!==i&&(n=y(i)),null!==i&&g(i.type),e=e.value,null!==t&&1===t.tag&&g(t.type);try{console.error(e)}catch(t){setTimeout(function(){throw t})}}function hn(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Kn(t,e)}}function ln(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(e){Kn(t,e)}else e.current=null}function un(t,e){switch(e.tag){case 0:case 11:case 15:dn(2,0,e);break;case 1:if(256&e.effectTag&&null!==t){var i=t.memoizedProps,r=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?i:Ge(e.type,i),r),t.__reactInternalSnapshotBeforeUpdate=e}break;case 3:case 5:case 6:case 4:case 17:break;default:throw n(Error(163))}}function dn(t,e,i){if(i=i.updateQueue,null!==(i=null!==i?i.lastEffect:null)){var n=i=i.next;do{if(0!==(n.tag&t)){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}0!==(n.tag&e)&&(r=n.create,n.destroy=r()),n=n.next}while(n!==i)}}function cn(t,e,i){switch("function"===typeof El&&El(e),e.tag){case 0:case 11:case 14:case 15:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var n=t.next;Be(97<i?97:i,function(){var t=n;do{var i=t.destroy;if(void 0!==i){var r=e;try{i()}catch(t){Kn(r,t)}}t=t.next}while(t!==n)})}break;case 1:ln(e),i=e.stateNode,"function"===typeof i.componentWillUnmount&&hn(e,i);break;case 5:ln(e);break;case 4:vn(t,e,i)}}function fn(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,null!==e&&fn(e)}function pn(t){return 5===t.tag||3===t.tag||4===t.tag}function mn(t){t:{for(var e=t.return;null!==e;){if(pn(e)){var i=e;break t}e=e.return}throw n(Error(160))}switch(e=i.stateNode,i.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw n(Error(161))}16&i.effectTag&&(Q(e,""),i.effectTag&=-17);t:e:for(i=t;;){for(;null===i.sibling;){if(null===i.return||pn(i.return)){i=null;break t}i=i.return}for(i.sibling.return=i.return,i=i.sibling;5!==i.tag&&6!==i.tag&&18!==i.tag;){if(i.effectTag&$o)continue e;if(null===i.child||4===i.tag)continue e;i.child.return=i,i=i.child}if(!(i.effectTag&$o)){i=i.stateNode;break t}}for(var o=t;;){var s=5===o.tag||6===o.tag;if(s){var a=s?o.stateNode:o.stateNode.instance;if(i)if(r){s=e;var h=a;a=i,8===s.nodeType?s.parentNode.insertBefore(h,a):s.insertBefore(h,a)}else e.insertBefore(a,i);else r?(h=e,8===h.nodeType?(s=h.parentNode,s.insertBefore(a,h)):(s=h,s.appendChild(a)),null!==(h=h._reactRootContainer)&&void 0!==h||null!==s.onclick||(s.onclick=$t)):e.appendChild(a)}else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}}function vn(t,e,i){for(var r,o,s=e,a=!1;;){if(!a){a=s.return;t:for(;;){if(null===a)throw n(Error(160));switch(r=a.stateNode,a.tag){case 5:o=!1;break t;case 3:case 4:r=r.containerInfo,o=!0;break t}a=a.return}a=!0}if(5===s.tag||6===s.tag){t:for(var h=t,l=s,u=i,d=l;;)if(cn(h,d,u),null!==d.child&&4!==d.tag)d.child.return=d,d=d.child;else{if(d===l)break;for(;null===d.sibling;){if(null===d.return||d.return===l)break t;d=d.return}d.sibling.return=d.return,d=d.sibling}o?(h=r,l=s.stateNode,8===h.nodeType?h.parentNode.removeChild(l):h.removeChild(l)):r.removeChild(s.stateNode)}else if(4===s.tag){if(null!==s.child){r=s.stateNode.containerInfo,o=!0,s.child.return=s,s=s.child;continue}}else if(cn(t,s,i),null!==s.child){s.child.return=s,s=s.child;continue}if(s===e)break;for(;null===s.sibling;){if(null===s.return||s.return===e)return;s=s.return,4===s.tag&&(a=!1)}s.sibling.return=s.return,s=s.sibling}}function gn(t,e){switch(e.tag){case 0:case 11:case 14:case 15:dn(4,8,e);break;case 1:break;case 5:var i=e.stateNode;if(null!=i){var r=e.memoizedProps,o=null!==t?t.memoizedProps:r;t=e.type;var s=e.updateQueue;if(e.updateQueue=null,null!==s){for(i[Hs]=r,"input"===t&&"radio"===r.type&&null!=r.name&&B(i,r),Wt(t,o),e=Wt(t,r),o=0;o<s.length;o+=2){var a=s[o],h=s[o+1];"style"===a?Vt(i,h):"dangerouslySetInnerHTML"===a?Co(i,h):"children"===a?Q(i,h):D(i,a,h,e)}switch(t){case"input":j(i,r);break;case"textarea":q(i,r);break;case"select":e=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!r.multiple,t=r.value,null!=t?W(i,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?W(i,!!r.multiple,r.defaultValue,!0):W(i,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:if(null===e.stateNode)throw n(Error(162));e.stateNode.nodeValue=e.memoizedProps;break;case 3:e=e.stateNode,e.hydrate&&(e.hydrate=!1,ut(e.containerInfo));break;case 12:break;case 13:if(i=e,null===e.memoizedState?r=!1:(r=!0,i=e.child,ul=Za()),null!==i)t:for(t=i;;){if(5===t.tag)s=t.stateNode,r?(s=s.style,"function"===typeof s.setProperty?s.setProperty("display","none","important"):s.display="none"):(s=t.stateNode,o=t.memoizedProps.style,o=void 0!==o&&null!==o&&o.hasOwnProperty("display")?o.display:null,s.style.display=Ht("display",o));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){s=t.child.sibling,s.return=t,t=s;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===i)break t;for(;null===t.sibling;){if(null===t.return||t.return===i)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}yn(e);break;case 19:yn(e);break;case 17:case 20:case 21:break;default:throw n(Error(163))}}function yn(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var i=t.stateNode;null===i&&(i=t.stateNode=new Fh),e.forEach(function(e){var n=Jn.bind(null,t,e);i.has(e)||(i.add(e),e.then(n,n))})}}function bn(t,e,i){i=Je(i,null),i.tag=3,i.payload={element:null};var n=e.value;return i.callback=function(){fl||(fl=!0,pl=n),an(t,e)},i}function _n(t,e,i){i=Je(i,null),i.tag=3;var n=t.type.getDerivedStateFromError;if("function"===typeof n){var r=e.value;i.payload=function(){return an(t,e),n(r)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(i.callback=function(){"function"!==typeof n&&(null===ml?ml=new Set([this]):ml.add(this),an(t,e));var i=e.stack;this.componentDidCatch(e.value,{componentStack:null!==i?i:""})}),i}function wn(){return(Jh&(Gh|Wh))!==Hh?1073741821-(Za()/10|0):0!==xl?xl:xl=1073741821-(Za()/10|0)}function xn(t,e,i){if(0===(2&(e=e.mode)))return 1073741823;var r=Fe();if(0===(4&e))return 99===r?1073741823:1073741822;if((Jh&Gh)!==Hh)return il;if(null!==i)t=1073741821-25*(1+((1073741821-t+(0|i.timeoutMs||5e3)/10)/25|0));else switch(r){case 99:t=1073741823;break;case 98:t=1073741821-10*(1+((1073741821-t+15)/10|0));break;case 97:case 96:t=1073741821-25*(1+((1073741821-t+500)/25|0));break;case 95:t=2;break;default:throw n(Error(326))}return null!==tl&&t===il&&--t,t}function Sn(t,e){if(50<_l)throw _l=0,wl=null,n(Error(185));if(null!==(t=kn(t,e))){var i=Fe();1073741823===e?(Jh&Vh)!==Hh&&(Jh&(Gh|Wh))===Hh?Cn(t):(Mn(t),Jh===Hh&&He()):Mn(t),(4&Jh)===Hh||98!==i&&99!==i||(null===bl?bl=new Map([[t,e]]):(void 0===(i=bl.get(t))||i>e)&&bl.set(t,e))}}function kn(t,e){t.expirationTime<e&&(t.expirationTime=e);var i=t.alternate;null!==i&&i.expirationTime<e&&(i.expirationTime=e);var n=t.return,r=null;if(null===n&&3===t.tag)r=t.stateNode;else for(;null!==n;){if(i=n.alternate,n.childExpirationTime<e&&(n.childExpirationTime=e),null!==i&&i.childExpirationTime<e&&(i.childExpirationTime=e),null===n.return&&3===n.tag){r=n.stateNode;break}n=n.return}return null!==r&&(tl===r&&(Bn(e),nl===Zh&&cr(r,il)),fr(r,e)),r}function En(t){var e=t.lastExpiredTime;return 0!==e?e:(e=t.firstPendingTime,dr(t,e)?(e=t.lastPingedTime,t=t.nextKnownPendingLevel,e>t?e:t):e)}function Mn(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=Ue(Cn.bind(null,t));else{var e=En(t),i=t.callbackNode;if(0===e)null!==i&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var n=wn();if(1073741823===e?n=99:1===e||2===e?n=95:(n=10*(1073741821-e)-10*(1073741821-n),n=0>=n?99:250>=n?98:5250>=n?97:95),null!==i){var r=t.callbackPriority;if(t.callbackExpirationTime===e&&r>=n)return;i!==Ga&&Ra(i)}t.callbackExpirationTime=e,t.callbackPriority=n,e=1073741823===e?Ue(Cn.bind(null,t)):je(n,Tn.bind(null,t),{timeout:10*(1073741821-e)-Za()}),t.callbackNode=e}}}function Tn(t,e){if(xl=0,e)return e=wn(),pr(t,e),Mn(t),null;var i=En(t);if(0!==i){if(e=t.callbackNode,(Jh&(Gh|Wh))!==Hh)throw n(Error(327));if(qn(),t===tl&&i===il||Ln(t,i),null!==el){var r=Jh;Jh|=Gh;for(var o=Fn();;)try{Un();break}catch(e){Nn(t,e)}if(We(),Jh=r,jh.current=o,nl===$h)throw e=rl,Ln(t,i),cr(t,i),Mn(t),e;if(null===el)switch(o=t.finishedWork=t.current.alternate,t.finishedExpirationTime=i,Pn(t,i),r=nl,tl=null,r){case Yh:case $h:throw n(Error(345));case qh:if(2!==i){pr(t,2);break}Wn(t);break;case Xh:if(cr(t,i),r=t.lastSuspendedTime,i===r&&(t.nextKnownPendingLevel=Gn(o)),1073741823===ol&&10<(o=ul+dl-Za())){if(ll){var s=t.lastPingedTime;if(0===s||s>=i){t.lastPingedTime=i,Ln(t,i);break}}if(0!==(s=En(t))&&s!==i)break;if(0!==r&&r!==i){t.lastPingedTime=r;break}t.timeoutHandle=zs(Wn.bind(null,t),o);break}Wn(t);break;case Zh:if(cr(t,i),r=t.lastSuspendedTime,i===r&&(t.nextKnownPendingLevel=Gn(o)),ll&&(0===(o=t.lastPingedTime)||o>=i)){t.lastPingedTime=i,Ln(t,i);break}if(0!==(o=En(t))&&o!==i)break;if(0!==r&&r!==i){t.lastPingedTime=r;break}if(1073741823!==sl?r=10*(1073741821-sl)-Za():1073741823===ol?r=0:(r=10*(1073741821-ol)-5e3,o=Za(),i=10*(1073741821-i)-o,r=o-r,0>r&&(r=0),r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Bh(r/1960))-r,i<r&&(r=i)),10<r){t.timeoutHandle=zs(Wn.bind(null,t),r);break}Wn(t);break;case Kh:if(1073741823!==ol&&null!==al){s=ol;var a=al;if(r=0|a.busyMinDurationMs,0>=r?r=0:(o=0|a.busyDelayMs,s=Za()-(10*(1073741821-s)-(0|a.timeoutMs||5e3)),r=s<=o?0:o+r-s),10<r){cr(t,i),t.timeoutHandle=zs(Wn.bind(null,t),r);break}}Wn(t);break;case Qh:cr(t,i);break;default:throw n(Error(329))}if(Mn(t),t.callbackNode===e)return Tn.bind(null,t)}}return null}function Cn(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,t.finishedExpirationTime===e)Wn(t);else{if((Jh&(Gh|Wh))!==Hh)throw n(Error(327));if(qn(),t===tl&&e===il||Ln(t,e),null!==el){var i=Jh;Jh|=Gh;for(var r=Fn();;)try{jn();break}catch(e){Nn(t,e)}if(We(),Jh=i,jh.current=r,nl===$h)throw i=rl,Ln(t,e),cr(t,e),Mn(t),i;if(null!==el)throw n(Error(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,Pn(t,e),nl===Qh?cr(t,e):(tl=null,Wn(t)),Mn(t)}}return null}function On(){(Jh&(1|Gh|Wh))===Hh&&(An(),qn())}function Pn(t,e){var i=t.firstBatch;null!==i&&i._defer&&i._expirationTime>=e&&(je(97,function(){return i._onComplete(),null}),nl=Qh)}function An(){if(null!==bl){var t=bl;bl=null,t.forEach(function(t,e){pr(e,t),Mn(e)}),He()}}function Dn(t,e){var i=Jh;Jh|=1;try{return t(e)}finally{(Jh=i)===Hh&&He()}}function In(t,e,i,n){var r=Jh;Jh|=4;try{return Be(98,t.bind(null,e,i,n))}finally{(Jh=r)===Hh&&He()}}function Rn(t,e){var i=Jh;Jh&=-2,Jh|=Vh;try{return t(e)}finally{(Jh=i)===Hh&&He()}}function Ln(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var i=t.timeoutHandle;if(-1!==i&&(t.timeoutHandle=-1,Bs(i)),null!==el)for(i=el.return;null!==i;){var n=i;switch(n.tag){case 1:var r=n.type.childContextTypes;null!==r&&void 0!==r&&Ae(n);break;case 3:yi(n),De(n);break;case 5:_i(n);break;case 4:yi(n);break;case 13:case 19:Te(ch,n);break;case 10:$e(n)}i=i.return}tl=t,el=or(t.current,null),il=e,nl=Yh,rl=null,sl=ol=1073741823,al=null,hl=0,ll=!1}function Nn(t,e){for(;;){try{if(We(),Mi(),null===el||null===el.return)return nl=$h,rl=e,null;t:{var i=t,n=el.return,r=el,o=e;if(e=il,r.effectTag|=2048,r.firstEffect=r.lastEffect=null,null!==o&&"object"===typeof o&&"function"===typeof o.then){var s=o,a=0!==(1&ch.current),h=n;do{var l;if(l=13===h.tag){var u=h.memoizedState;if(null!==u)l=null!==u.dehydrated;else{var d=h.memoizedProps;l=void 0!==d.fallback&&(!0!==d.unstable_avoidThisFallback||!a)}}if(l){var c=h.updateQueue;if(null===c){var f=new Set;f.add(s),h.updateQueue=f}else c.add(s);if(0===(2&h.mode)){if(h.effectTag|=64,r.effectTag&=-2981,1===r.tag)if(null===r.alternate)r.tag=17;else{var p=Je(1073741823,null);p.tag=2,ei(r,p)}r.expirationTime=1073741823;break t}o=void 0,r=e;var m=i.pingCache;if(null===m?(m=i.pingCache=new zh,o=new Set,m.set(s,o)):void 0===(o=m.get(s))&&(o=new Set,m.set(s,o)),!o.has(r)){o.add(r);var v=Qn.bind(null,i,s,r);s.then(v,v)}h.effectTag|=4096,h.expirationTime=e;break t}h=h.return}while(null!==h);o=Error((g(r.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+y(r))}nl!==Kh&&(nl=qh),o=sn(o,r),h=n;do{switch(h.tag){case 3:s=o,h.effectTag|=4096,h.expirationTime=e;ii(h,bn(h,s,e));break t;case 1:s=o;var b=h.type,_=h.stateNode;if((64&h.effectTag)===Yo&&("function"===typeof b.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===ml||!ml.has(_)))){h.effectTag|=4096,h.expirationTime=e;ii(h,_n(h,s,e));break t}}h=h.return}while(null!==h)}el=Vn(el)}catch(t){e=t;continue}break}}function Fn(){var t=jh.current;return jh.current=Th,null===t?Th:t}function zn(t,e){t<ol&&2<t&&(ol=t),null!==e&&t<sl&&2<t&&(sl=t,al=e)}function Bn(t){t>hl&&(hl=t)}function jn(){for(;null!==el;)el=Hn(el)}function Un(){for(;null!==el&&!La();)el=Hn(el)}function Hn(t){var e=Nh(t.alternate,t,il);return t.memoizedProps=t.pendingProps,null===e&&(e=Vn(t)),Uh.current=null,e}function Vn(t){el=t;do{var e=el.alternate;if(t=el.return,(2048&el.effectTag)===Yo){t:{var i=e;e=el;var r=il,o=e.pendingProps;switch(e.tag){case 2:case 16:break;case 15:case 0:break;case 1:Pe(e.type)&&Ae(e);break;case 3:yi(e),De(e),r=e.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(null===i||null===i.child)&&Ui(e)&&nn(e),Sa(e);break;case 5:_i(e),r=vi(dh.current);var s=e.type;if(null!==i&&null!=e.stateNode)ka(i,e,s,o,r),i.ref!==e.ref&&(e.effectTag|=128);else if(o){var a=vi(lh.current);if(Ui(e)){o=e,s=void 0,i=o.stateNode;var h=o.type,l=o.memoizedProps;switch(i[Us]=o,i[Hs]=l,h){case"iframe":case"object":case"embed":Dt("load",i);break;case"video":case"audio":for(var u=0;u<No.length;u++)Dt(No[u],i);break;case"source":Dt("error",i);break;case"img":case"image":case"link":Dt("error",i),Dt("load",i);break;case"form":Dt("reset",i),Dt("submit",i);break;case"details":Dt("toggle",i);break;case"input":z(i,l),Dt("invalid",i),Yt(r,"onChange");break;case"select":i._wrapperState={wasMultiple:!!l.multiple},Dt("invalid",i),Yt(r,"onChange");break;case"textarea":$(i,l),Dt("invalid",i),Yt(r,"onChange")}Gt(h,l),u=null;for(s in l)l.hasOwnProperty(s)&&(a=l[s],"children"===s?"string"===typeof a?i.textContent!==a&&(u=["children",a]):"number"===typeof a&&i.textContent!==""+a&&(u=["children",""+a]):Fr.hasOwnProperty(s)&&null!=a&&Yt(r,s));switch(h){case"input":L(i),U(i,l,!0);break;case"textarea":L(i),X(i,l);break;case"select":case"option":break;default:"function"===typeof l.onClick&&(i.onclick=$t)}r=u,o.updateQueue=r,null!==r&&nn(e)}else{l=s,i=o,h=e,u=9===r.nodeType?r:r.ownerDocument,a===To.html&&(a=Z(l)),a===To.html?"script"===l?(l=u.createElement("div"),l.innerHTML="<script><\/script>",u=l.removeChild(l.firstChild)):"string"===typeof i.is?u=u.createElement(l,{is:i.is}):(u=u.createElement(l),"select"===l&&(l=u,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):u=u.createElementNS(a,l),l=u,l[Us]=h,l[Hs]=i,i=l,xa(i,e,!1,!1),e.stateNode=i,a=r;var d=Wt(s,o);switch(s){case"iframe":case"object":case"embed":Dt("load",i),r=o;break;case"video":case"audio":for(r=0;r<No.length;r++)Dt(No[r],i);r=o;break;case"source":Dt("error",i),r=o;break;case"img":case"image":case"link":Dt("error",i),Dt("load",i),r=o;break;case"form":Dt("reset",i),Dt("submit",i),r=o;break;case"details":Dt("toggle",i),r=o;break;case"input":z(i,o),r=F(i,o),Dt("invalid",i),Yt(a,"onChange");break;case"option":r=G(i,o);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},r=Ar({},o,{value:void 0}),Dt("invalid",i),Yt(a,"onChange");break;case"textarea":$(i,o),r=Y(i,o),Dt("invalid",i),Yt(a,"onChange");break;default:r=o}Gt(s,r),h=void 0,l=s,u=i;var c=r;for(h in c)if(c.hasOwnProperty(h)){var f=c[h];"style"===h?Vt(u,f):"dangerouslySetInnerHTML"===h?null!=(f=f?f.__html:void 0)&&Co(u,f):"children"===h?"string"===typeof f?("textarea"!==l||""!==f)&&Q(u,f):"number"===typeof f&&Q(u,""+f):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(Fr.hasOwnProperty(h)?null!=f&&Yt(a,h):null!=f&&D(u,h,f,d))}switch(s){case"input":L(i),U(i,o,!1);break;case"textarea":L(i),X(i,o);break;case"option":null!=o.value&&i.setAttribute("value",""+A(o.value));break;case"select":r=i,i=o,r.multiple=!!i.multiple,h=i.value,null!=h?W(r,!!i.multiple,h,!1):null!=i.defaultValue&&W(r,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(i.onclick=$t)}te(s,o)&&nn(e)}null!==e.ref&&(e.effectTag|=128)}else if(null===e.stateNode)throw n(Error(166));break;case 6:if(i&&null!=e.stateNode)Ea(i,e,i.memoizedProps,o);else{if("string"!==typeof o&&null===e.stateNode)throw n(Error(166));s=vi(dh.current),vi(lh.current),Ui(e)?(r=e.stateNode,o=e.memoizedProps,r[Us]=e,r.nodeValue!==o&&nn(e)):(r=e,o=(9===s.nodeType?s:s.ownerDocument).createTextNode(o),o[Us]=e,r.stateNode=o)}break;case 11:break;case 13:if(Te(ch,e),o=e.memoizedState,(64&e.effectTag)!==Yo){e.expirationTime=r;break t}r=null!==o,o=!1,null===i?Ui(e):(s=i.memoizedState,o=null!==s,r||null===s||null!==(s=i.child.sibling)&&(h=e.firstEffect,null!==h?(e.firstEffect=s,s.nextEffect=h):(e.firstEffect=e.lastEffect=s,s.nextEffect=null),s.effectTag=8)),r&&!o&&0!==(2&e.mode)&&(null===i&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&ch.current)?nl===Yh&&(nl=Xh):(nl!==Yh&&nl!==Xh||(nl=Zh),0!==hl&&null!==tl&&(cr(tl,il),fr(tl,hl)))),(r||o)&&(e.effectTag|=4);break;case 7:case 8:case 12:break;case 4:yi(e),Sa(e);break;case 10:$e(e);break;case 9:case 14:break;case 17:Pe(e.type)&&Ae(e);break;case 19:if(Te(ch,e),null===(o=e.memoizedState))break;if(s=(64&e.effectTag)!==Yo,null===(h=o.rendering)){if(s)rn(o,!1);else if(nl!==Yh||null!==i&&(64&i.effectTag)!==Yo)for(i=e.child;null!==i;){if(null!==(h=wi(i))){for(e.effectTag|=64,rn(o,!1),o=h.updateQueue,null!==o&&(e.updateQueue=o,e.effectTag|=4),e.firstEffect=e.lastEffect=null,o=e.child;null!==o;)s=o,i=r,s.effectTag&=$o,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,h=s.alternate,null===h?(s.childExpirationTime=0,s.expirationTime=i,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null):(s.childExpirationTime=h.childExpirationTime,s.expirationTime=h.expirationTime,s.child=h.child,s.memoizedProps=h.memoizedProps,s.memoizedState=h.memoizedState,s.updateQueue=h.updateQueue,i=h.dependencies,s.dependencies=null===i?null:{expirationTime:i.expirationTime,firstContext:i.firstContext,responders:i.responders}),o=o.sibling;Ce(ch,1&ch.current|2,e),e=e.child;break t}i=i.sibling}}else{if(!s)if(null!==(i=wi(h))){if(e.effectTag|=64,s=!0,rn(o,!0),null===o.tail&&"hidden"===o.tailMode){r=i.updateQueue,null!==r&&(e.updateQueue=r,e.effectTag|=4),e=e.lastEffect=o.lastEffect,null!==e&&(e.nextEffect=null);break}}else Za()>o.tailExpiration&&1<r&&(e.effectTag|=64,s=!0,rn(o,!1),e.expirationTime=e.childExpirationTime=r-1);o.isBackwards?(h.sibling=e.child,e.child=h):(r=o.last,null!==r?r.sibling=h:e.child=h,o.last=h)}if(null!==o.tail){0===o.tailExpiration&&(o.tailExpiration=Za()+500),r=o.tail,o.rendering=r,o.tail=r.sibling,o.lastEffect=e.lastEffect,r.sibling=null,o=ch.current,o=s?1&o|2:1&o,Ce(ch,o,e),e=r;break t}break;case 20:case 21:break;default:throw n(Error(156),e.tag)}e=null}if(r=el,1===il||1!==r.childExpirationTime){for(o=0,s=r.child;null!==s;)i=s.expirationTime,h=s.childExpirationTime,i>o&&(o=i),h>o&&(o=h),s=s.sibling;r.childExpirationTime=o}if(null!==e)return e;null!==t&&(2048&t.effectTag)===Yo&&(null===t.firstEffect&&(t.firstEffect=el.firstEffect),null!==el.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=el.firstEffect),t.lastEffect=el.lastEffect),1<el.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=el:t.firstEffect=el,t.lastEffect=el))}else{if(null!==(e=on(el,il)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=el.sibling))return e;el=t}while(null!==el);return nl===Yh&&(nl=Kh),null}function Gn(t){var e=t.expirationTime;return t=t.childExpirationTime,e>t?e:t}function Wn(t){var e=Fe();return Be(99,Yn.bind(null,t,e)),null}function Yn(t,e){if(qn(),(Jh&(Gh|Wh))!==Hh)throw n(Error(327));var i=t.finishedWork,r=t.finishedExpirationTime;if(null===i)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,i===t.current)throw n(Error(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var o=Gn(i);if(t.firstPendingTime=o,r<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:r<=t.firstSuspendedTime&&(t.firstSuspendedTime=r-1),r<=t.lastPingedTime&&(t.lastPingedTime=0),r<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===tl&&(el=tl=null,il=0),1<i.effectTag?null!==i.lastEffect?(i.lastEffect.nextEffect=i,o=i.firstEffect):o=i:o=i.firstEffect,null!==o){var s=Jh;Jh|=Wh,Uh.current=null,Ns=Ts;var a=Qt();if(Jt(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else t:{h=(h=a.ownerDocument)&&h.defaultView||window;var l=h.getSelection&&h.getSelection();if(l&&0!==l.rangeCount){h=l.anchorNode;var u=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{h.nodeType,d.nodeType}catch(t){h=null;break t}var c=0,f=-1,p=-1,m=0,v=0,g=a,y=null;e:for(;;){for(var b;g!==h||0!==u&&3!==g.nodeType||(f=c+u),g!==d||0!==l&&3!==g.nodeType||(p=c+l),3===g.nodeType&&(c+=g.nodeValue.length),null!==(b=g.firstChild);)y=g,g=b;for(;;){if(g===a)break e;if(y===h&&++m===u&&(f=c),y===d&&++v===l&&(p=c),null!==(b=g.nextSibling))break;g=y,y=g.parentNode}g=b}h=-1===f||-1===p?null:{start:f,end:p}}else h=null}h=h||{start:0,end:0}}else h=null;Fs={focusedElem:a,selectionRange:h},Ts=!1,cl=o;do{try{$n()}catch(t){if(null===cl)throw n(Error(330));Kn(cl,t),cl=cl.nextEffect}}while(null!==cl);cl=o;do{try{for(a=t,h=e;null!==cl;){var _=cl.effectTag;if(16&_&&Q(cl.stateNode,""),128&_){var w=cl.alternate;if(null!==w){var x=w.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(_&(12|$o|qo)){case $o:mn(cl),cl.effectTag&=~$o;break;case 6:mn(cl),cl.effectTag&=~$o,gn(cl.alternate,cl);break;case qo:cl.effectTag&=~qo;break;case 1028:cl.effectTag&=~qo,gn(cl.alternate,cl);break;case 4:gn(cl.alternate,cl);break;case 8:u=cl,vn(a,u,h),fn(u)}cl=cl.nextEffect}}catch(t){if(null===cl)throw n(Error(330));Kn(cl,t),cl=cl.nextEffect}}while(null!==cl);if(x=Fs,w=Qt(),_=x.focusedElem,h=x.selectionRange,w!==_&&_&&_.ownerDocument&&Kt(_.ownerDocument.documentElement,_)){null!==h&&Jt(_)&&(w=h.start,x=h.end,void 0===x&&(x=w),"selectionStart"in _?(_.selectionStart=w,_.selectionEnd=Math.min(x,_.value.length)):(x=(w=_.ownerDocument||document)&&w.defaultView||window,x.getSelection&&(x=x.getSelection(),u=_.textContent.length,a=Math.min(h.start,u),h=void 0===h.end?a:Math.min(h.end,u),!x.extend&&a>h&&(u=h,h=a,a=u),u=Zt(_,a),d=Zt(_,h),u&&d&&(1!==x.rangeCount||x.anchorNode!==u.node||x.anchorOffset!==u.offset||x.focusNode!==d.node||x.focusOffset!==d.offset)&&(w=w.createRange(),w.setStart(u.node,u.offset),x.removeAllRanges(),a>h?(x.addRange(w),x.extend(d.node,d.offset)):(w.setEnd(d.node,d.offset),x.addRange(w)))))),w=[];for(x=_;x=x.parentNode;)1===x.nodeType&&w.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<w.length;_++)x=w[_],x.element.scrollLeft=x.left,x.element.scrollTop=x.top}Fs=null,Ts=!!Ns,Ns=null,t.current=i,cl=o;do{try{for(_=r;null!==cl;){var S=cl.effectTag;if(36&S){var k=cl.alternate;switch(w=cl,x=_,w.tag){case 0:case 11:case 15:dn(16,32,w);break;case 1:var E=w.stateNode;if(4&w.effectTag)if(null===k)E.componentDidMount();else{var M=w.elementType===w.type?k.memoizedProps:Ge(w.type,k.memoizedProps);E.componentDidUpdate(M,k.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var T=w.updateQueue;null!==T&&si(w,T,E,x);break;case 3:var C=w.updateQueue;if(null!==C){if(a=null,null!==w.child)switch(w.child.tag){case 5:a=w.child.stateNode;break;case 1:a=w.child.stateNode}si(w,C,a,x)}break;case 5:var O=w.stateNode;null===k&&4&w.effectTag&&(x=O,te(w.type,w.memoizedProps)&&x.focus());break;case 6:case 4:case 12:break;case 13:if(null===w.memoizedState){var P=w.alternate;if(null!==P){var A=P.memoizedState;if(null!==A){var D=A.dehydrated;null!==D&&ut(D)}}}break;case 19:case 17:case 20:case 21:break;default:throw n(Error(163))}}if(128&S){w=cl;var I=w.ref;if(null!==I){var R=w.stateNode;switch(w.tag){case 5:var L=R;break;default:L=R}"function"===typeof I?I(L):I.current=L}}cl=cl.nextEffect}}catch(t){if(null===cl)throw n(Error(330));Kn(cl,t),cl=cl.nextEffect}}while(null!==cl);cl=null,Wa(),Jh=s}else t.current=i;if(vl)vl=!1,gl=t,yl=e;else for(cl=o;null!==cl;)e=cl.nextEffect,cl.nextEffect=null,cl=e;if(e=t.firstPendingTime,0===e&&(ml=null),1073741823===e?t===wl?_l++:(_l=0,wl=t):_l=0,"function"===typeof kl&&kl(i.stateNode,r),Mn(t),fl)throw fl=!1,t=pl,pl=null,t;return(Jh&Vh)!==Hh?null:(He(),null)}function $n(){for(;null!==cl;){var t=cl.effectTag;(256&t)!==Yo&&un(cl.alternate,cl),(512&t)===Yo||vl||(vl=!0,je(97,function(){return qn(),null})),cl=cl.nextEffect}}function qn(){if(90!==yl){var t=97<yl?97:yl;return yl=90,Be(t,Xn)}}function Xn(){if(null===gl)return!1;var t=gl;if(gl=null,(Jh&(Gh|Wh))!==Hh)throw n(Error(331));var e=Jh;for(Jh|=Wh,t=t.current.firstEffect;null!==t;){try{var i=t;if((512&i.effectTag)!==Yo)switch(i.tag){case 0:case 11:case 15:dn(128,0,i),dn(0,64,i)}}catch(e){if(null===t)throw n(Error(330));Kn(t,e)}i=t.nextEffect,t.nextEffect=null,t=i}return Jh=e,He(),!0}function Zn(t,e,i){e=sn(i,e),e=bn(t,e,1073741823),ei(t,e),null!==(t=kn(t,1073741823))&&Mn(t)}function Kn(t,e){if(3===t.tag)Zn(t,t,e);else for(var i=t.return;null!==i;){if(3===i.tag){Zn(i,t,e);break}if(1===i.tag){var n=i.stateNode;if("function"===typeof i.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===ml||!ml.has(n))){t=sn(e,t),t=_n(i,t,1073741823),ei(i,t),i=kn(i,1073741823),null!==i&&Mn(i);break}}i=i.return}}function Qn(t,e,i){var n=t.pingCache;null!==n&&n.delete(e),tl===t&&il===i?nl===Zh||nl===Xh&&1073741823===ol&&Za()-ul<dl?Ln(t,il):ll=!0:dr(t,i)&&(0!==(e=t.lastPingedTime)&&e<i||(t.lastPingedTime=i,t.finishedExpirationTime===i&&(t.finishedExpirationTime=0,t.finishedWork=null),Mn(t)))}function Jn(t,e){var i=t.stateNode;null!==i&&i.delete(e),e=1,1===e&&(e=wn(),e=xn(e,t,null)),null!==(t=kn(t,e))&&Mn(t)}function tr(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var i=e.inject(t);kl=function(t){try{e.onCommitFiberRoot(i,t,void 0,64===(64&t.current.effectTag))}catch(t){}},El=function(t){try{e.onCommitFiberUnmount(i,t)}catch(t){}}}catch(t){}return!0}function er(t,e,i,n){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=Yo,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function ir(t,e,i,n){return new er(t,e,i,n)}function nr(t){return!(!(t=t.prototype)||!t.isReactComponent)}function rr(t){if("function"===typeof t)return nr(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===so)return 11;if(t===lo)return 14}return 2}function or(t,e){var i=t.alternate;return null===i?(i=ir(t.tag,e,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.effectTag=Yo,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childExpirationTime=t.childExpirationTime,i.expirationTime=t.expirationTime,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function sr(t,e,i,r,o,s){var a=2;if(r=t,"function"===typeof t)nr(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case to:return ar(i.children,o,s,e);case oo:a=8,o|=7;break;case eo:a=8,o|=1;break;case io:return t=ir(12,i,e,8|o),t.elementType=io,t.type=io,t.expirationTime=s,t;case ao:return t=ir(13,i,e,o),t.type=ao,t.elementType=ao,t.expirationTime=s,t;case ho:return t=ir(19,i,e,o),t.elementType=ho,t.expirationTime=s,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case no:a=10;break t;case ro:a=9;break t;case so:a=11;break t;case lo:a=14;break t;case uo:a=16,r=null;break t}throw n(Error(130),null==t?t:typeof t,"")}return e=ir(a,i,e,o),e.elementType=t,e.type=r,e.expirationTime=s,e}function ar(t,e,i,n){return t=ir(7,t,n,e),t.expirationTime=i,t}function hr(t,e,i){return t=ir(6,t,null,e),t.expirationTime=i,t}function lr(t,e,i){return e=ir(4,null!==t.children?t.children:[],t.key,e),e.expirationTime=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ur(t,e,i){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=this.firstBatch=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function dr(t,e){var i=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==i&&i>=e&&t<=e}function cr(t,e){var i=t.firstSuspendedTime,n=t.lastSuspendedTime;i<e&&(t.firstSuspendedTime=e),(n>e||0===i)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function fr(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var i=t.firstSuspendedTime;0!==i&&(e>=i?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function pr(t,e){var i=t.lastExpiredTime;(0===i||i>e)&&(t.lastExpiredTime=e)}function mr(t,e,i,r,o,s){var a=e.current;t:if(i){i=i._reactInternalFiber;e:{if(dt(i)!==i||1!==i.tag)throw n(Error(170));var h=i;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Pe(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(null!==h);throw n(Error(171))}if(1===i.tag){var l=i.type;if(Pe(l)){i=Re(i,l,h);break t}}i=h}else i=Ca;return null===e.context?e.context=i:e.pendingContext=i,e=s,o=Je(r,o),o.payload={element:t},e=void 0===e?null:e,null!==e&&(o.callback=e),ei(a,o),Sn(a,r),r}function vr(t,e,i,n){var r=e.current,o=wn(),s=ih.suspense;return r=xn(o,r,s),mr(t,e,i,r,s,n)}function gr(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function yr(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Jr,key:null==n?null:""+n,children:t,containerInfo:e,implementation:i}}function br(t){var e=1073741821-25*(1+((1073741821-wn()+500)/25|0));e<=Sl&&--e,this._expirationTime=Sl=e,this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function _r(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function wr(t,e,i){i=null!=i&&!0===i.hydrate;var n=new ur(t,e,i),r=ir(3,null,null,2===e?7:1===e?3:0);return n.current=r,r.stateNode=n,t[Vs]=n.current,i&&0!==e&&et(9===t.nodeType?t:t.ownerDocument),n}function xr(t,e,i){this._internalRoot=wr(t,e,i)}function Sr(t,e){this._internalRoot=wr(t,2,e)}function kr(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Er(t,e){if(e||(e=t?9===t.nodeType?t.documentElement:t.firstChild:null,e=!(!e||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var i;i=t.lastChild;)t.removeChild(i);return new xr(t,0,e?{hydrate:!0}:void 0)}function Mr(t,e,i,n,r){var o=i._reactRootContainer;if(o){var s=o._internalRoot;if("function"===typeof r){var a=r;r=function(){var t=gr(s);a.call(t)}}vr(e,s,t,r)}else{if(o=i._reactRootContainer=Er(i,n),s=o._internalRoot,"function"===typeof r){var h=r;r=function(){var t=gr(s);h.call(t)}}Rn(function(){vr(e,s,t,r)})}return gr(s)}function Tr(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!kr(e))throw n(Error(200));return yr(t,e,null,i)}function Cr(t,e){if(!kr(t))throw n(Error(299),"unstable_createRoot");return new Sr(t,e)}function Or(t,e){if(!kr(t))throw n(Error(299),"unstable_createRoot");return new xr(t,1,e)}var Pr=i(0),Ar=i(36),Dr=i(140);if(!Pr)throw n(Error(227));var Ir=null,Rr={},Lr=[],Nr={},Fr={},zr={},Br=!1,jr=null,Ur=!1,Hr=null,Vr={onError:function(t){Br=!0,jr=t}},Gr=null,Wr=null,Yr=null,$r=null,qr={injectEventPluginOrder:function(t){if(Ir)throw n(Error(101));Ir=Array.prototype.slice.call(t),r()},injectEventPluginsByName:function(t){var e,i=!1;for(e in t)if(t.hasOwnProperty(e)){var o=t[e];if(!Rr.hasOwnProperty(e)||Rr[e]!==o){if(Rr[e])throw n(Error(102),e);Rr[e]=o,i=!0}}i&&r()}},Xr=Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Xr.hasOwnProperty("ReactCurrentDispatcher")||(Xr.ReactCurrentDispatcher={current:null}),Xr.hasOwnProperty("ReactCurrentBatchConfig")||(Xr.ReactCurrentBatchConfig={suspense:null});var Zr=/^(.*)[\\\/]/,Kr="function"===typeof Symbol&&Symbol.for,Qr=Kr?Symbol.for("react.element"):60103,Jr=Kr?Symbol.for("react.portal"):60106,to=Kr?Symbol.for("react.fragment"):60107,eo=Kr?Symbol.for("react.strict_mode"):60108,io=Kr?Symbol.for("react.profiler"):60114,no=Kr?Symbol.for("react.provider"):60109,ro=Kr?Symbol.for("react.context"):60110,oo=Kr?Symbol.for("react.concurrent_mode"):60111,so=Kr?Symbol.for("react.forward_ref"):60112,ao=Kr?Symbol.for("react.suspense"):60113,ho=Kr?Symbol.for("react.suspense_list"):60120,lo=Kr?Symbol.for("react.memo"):60115,uo=Kr?Symbol.for("react.lazy"):60116;Kr&&Symbol.for("react.fundamental"),Kr&&Symbol.for("react.responder"),Kr&&Symbol.for("react.scope");var co="function"===typeof Symbol&&Symbol.iterator,fo=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),po=null,mo=null,vo=null,go=x,yo=!1,bo=!1;new Map,new Map,new Map;var _o=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wo=Object.prototype.hasOwnProperty,xo={},So={},ko={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ko[t]=new O(t,0,!1,t,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ko[e]=new O(e,1,!1,t[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){ko[t]=new O(t,2,!1,t.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ko[t]=new O(t,2,!1,t,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ko[t]=new O(t,3,!1,t.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(t){ko[t]=new O(t,3,!0,t,null,!1)}),["capture","download"].forEach(function(t){ko[t]=new O(t,4,!1,t,null,!1)}),["cols","rows","size","span"].forEach(function(t){ko[t]=new O(t,6,!1,t,null,!1)}),["rowSpan","start"].forEach(function(t){ko[t]=new O(t,5,!1,t.toLowerCase(),null,!1)});var Eo=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Eo,P);ko[e]=new O(e,1,!1,t,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Eo,P);ko[e]=new O(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Eo,P);ko[e]=new O(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(t){ko[t]=new O(t,1,!1,t.toLowerCase(),null,!1)}),ko.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(t){ko[t]=new O(t,1,!1,t.toLowerCase(),null,!0)});var Mo,To={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},Co=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,i,n,r){MSApp.execUnsafeLocalFunction(function(){return t(e,i)})}:t}(function(t,e){if(t.namespaceURI!==To.svg||"innerHTML"in t)t.innerHTML=e;else{for(Mo=Mo||document.createElement("div"),Mo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}),Oo={animationend:J("Animation","AnimationEnd"),animationiteration:J("Animation","AnimationIteration"),animationstart:J("Animation","AnimationStart"),transitionend:J("Transition","TransitionEnd")},Po={},Ao={};fo&&(Ao=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);var Do=tt("animationend"),Io=tt("animationiteration"),Ro=tt("animationstart"),Lo=tt("transitionend"),No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fo=!1,zo=[],Bo=null,jo=null,Uo=null,Ho=new Map,Vo=new Map,Go="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Wo="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" "),Yo=0,$o=2,qo=1024;Ar(kt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=xt)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=xt)},persist:function(){this.isPersistent=xt},isPersistent:St,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=St,this._dispatchInstances=this._dispatchListeners=null}}),kt.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},kt.extend=function(t){function e(){}function i(){return n.apply(this,arguments)}var n=this;e.prototype=n.prototype;var r=new e;return Ar(r,i.prototype),i.prototype=r,i.prototype.constructor=i,i.Interface=Ar({},n.Interface,t),i.extend=n.extend,Tt(i),i},Tt(kt);for(var Xo=kt.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Zo=(kt.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),Ko=kt.extend({view:null,detail:null}),Qo=Ko.extend({relatedTarget:null}),Jo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ts={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},es={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},is=Ko.extend({key:function(t){if(t.key){var e=Jo[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?(t=Ct(t),13===t?"Enter":String.fromCharCode(t)):"keydown"===t.type||"keyup"===t.type?ts[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Pt,charCode:function(t){return"keypress"===t.type?Ct(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Ct(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),ns=0,rs=0,os=!1,ss=!1,as=(Ko.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Pt,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=ns;return ns=t.screenX,os?"mousemove"===t.type?t.screenX-e:0:(os=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=rs;return rs=t.screenY,ss?"mousemove"===t.type?t.screenY-e:0:(ss=!0,0)}})),hs=as.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),ls=as.extend({dataTransfer:null}),us=Ko.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Pt}),ds=kt.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),cs=(as.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null})),fs=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Do,"animationEnd",2],[Io,"animationIteration",2],[Ro,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[Lo,"transitionEnd",2],["waiting","waiting",2]],ps={},ms={},vs=0;vs<fs.length;vs++){var gs=fs[vs],ys=gs[0],bs=gs[1],_s=gs[2],ws="on"+(bs[0].toUpperCase()+bs.slice(1)),xs={phasedRegistrationNames:{bubbled:ws,captured:ws+"Capture"},dependencies:[ys],eventPriority:_s};ps[bs]=xs,ms[ys]=xs}var Ss={eventTypes:ps,getEventPriority:function(t){return t=ms[t],void 0!==t?t.eventPriority:2},extractEvents:function(t,e,i,n){var r=ms[t];if(!r)return null;switch(t){case"keypress":if(0===Ct(i))return null;case"keydown":case"keyup":t=is;break;case"blur":case"focus":t=Qo;break;case"click":if(2===i.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=as;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=ls;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=us;break;case Do:case Io:case Ro:t=Xo;break;case Lo:t=ds;break;case"scroll":t=Ko;break;case"wheel":t=cs;break;case"copy":case"cut":case"paste":t=Zo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=hs;break;default:t=kt}return e=t.getPooled(r,e,i,n),wt(e),e}},ks=Ss.getEventPriority,Es=10,Ms=[],Ts=!0,Cs=new("function"===typeof WeakMap?WeakMap:Map),Os={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ps=["Webkit","ms","Moz","O"];Object.keys(Os).forEach(function(t){Ps.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Os[e]=Os[t]})});var As=Ar({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Ds="$",Is="/$",Rs="$?",Ls="$!",Ns=null,Fs=null,zs="function"===typeof setTimeout?setTimeout:void 0,Bs="function"===typeof clearTimeout?clearTimeout:void 0,js=Math.random().toString(36).slice(2),Us="__reactInternalInstance$"+js,Hs="__reactEventHandlers$"+js,Vs="__reactContainere$"+js,Gs=null,Ws=null,Ys=null,$s=kt.extend({data:null}),qs=kt.extend({data:null}),Xs=[9,13,27,32],Zs=fo&&"CompositionEvent"in window,Ks=null;fo&&"documentMode"in document&&(Ks=document.documentMode);var Qs=fo&&"TextEvent"in window&&!Ks,Js=fo&&(!Zs||Ks&&8<Ks&&11>=Ks),ta=String.fromCharCode(32),ea={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},ia=!1,na=!1,ra={eventTypes:ea,extractEvents:function(t,e,i,n){var r;if(Zs)t:{switch(t){case"compositionstart":var o=ea.compositionStart;break t;case"compositionend":o=ea.compositionEnd;break t;case"compositionupdate":o=ea.compositionUpdate;break t}o=void 0}else na?le(t,i)&&(o=ea.compositionEnd):"keydown"===t&&229===i.keyCode&&(o=ea.compositionStart);return o?(Js&&"ko"!==i.locale&&(na||o!==ea.compositionStart?o===ea.compositionEnd&&na&&(r=he()):(Gs=n,Ws="value"in Gs?Gs.value:Gs.textContent,na=!0)),o=$s.getPooled(o,e,i,n),r?o.data=r:null!==(r=ue(i))&&(o.data=r),wt(o),r=o):r=null,(t=Qs?de(t,i):ce(t,i))?(e=qs.getPooled(ea.beforeInput,e,i,n),e.data=t,wt(e)):e=null,null===r?e:null===e?r:[r,e]}},oa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},sa={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},aa=null,ha=null,la=!1;fo&&(la=Bt("input")&&(!document.documentMode||9<document.documentMode));var ua={eventTypes:sa,_isInputEventSupported:la,extractEvents:function(t,e,i,n){var r=e?se(e):window,o=r.nodeName&&r.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===r.type)var s=ge;else if(fe(r))if(la)s=Se;else{s=we;var a=_e}else(o=r.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(s=xe);if(s&&(s=s(t,e)))return pe(s,i,n);a&&a(t,r,e),"blur"===t&&(t=r._wrapperState)&&t.controlled&&"number"===r.type&&H(r,"number",r.value)}},da={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},ca={eventTypes:da,extractEvents:function(t,e,i,n,r){var o="mouseover"===t||"pointerover"===t,s="mouseout"===t||"pointerout"===t;if(o&&0===(32&r)&&(i.relatedTarget||i.fromElement)||!s&&!o)return null;if(r=n.window===n?n:(r=n.ownerDocument)?r.defaultView||r.parentWindow:window,s?(s=e,null!==(e=(e=i.relatedTarget||i.toElement)?re(e):null)&&(o=dt(e),e!==o||5!==e.tag&&6!==e.tag)&&(e=null)):s=null,s===e)return null;if("mouseout"===t||"mouseover"===t)var a=as,h=da.mouseLeave,l=da.mouseEnter,u="mouse";else"pointerout"!==t&&"pointerover"!==t||(a=hs,h=da.pointerLeave,l=da.pointerEnter,u="pointer");if(t=null==s?r:se(s),r=null==e?r:se(e),h=a.getPooled(h,s,i,n),h.type=u+"leave",h.target=t,h.relatedTarget=r,i=a.getPooled(l,e,i,n),i.type=u+"enter",i.target=r,i.relatedTarget=t,n=s,u=e,n&&u)t:{for(a=n,l=u,t=0,s=a;s;s=vt(s))t++;for(s=0,e=l;e;e=vt(e))s++;for(;0<t-s;)a=vt(a),t--;for(;0<s-t;)l=vt(l),s--;for(;t--;){if(a===l||a===l.alternate)break t;a=vt(a),l=vt(l)}a=null}else a=null;for(l=a,a=[];n&&n!==l&&(null===(t=n.alternate)||t!==l);)a.push(n),n=vt(n);for(n=[];u&&u!==l&&(null===(t=u.alternate)||t!==l);)n.push(u),u=vt(u);for(u=0;u<a.length;u++)bt(a[u],"bubbled",h);for(u=n.length;0<u--;)bt(n[u],"captured",i);return[h,i]}},fa="function"===typeof Object.is?Object.is:ke,pa=Object.prototype.hasOwnProperty,ma=fo&&"documentMode"in document&&11>=document.documentMode,va={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ga=null,ya=null,ba=null,_a=!1,wa={eventTypes:va,extractEvents:function(t,e,i,n){var r,o=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;if(!(r=!o)){t:{o=jt(o),r=zr.onSelect;for(var s=0;s<r.length;s++)if(!o.has(r[s])){o=!1;break t}o=!0}r=!o}if(r)return null;switch(o=e?se(e):window,t){case"focus":(fe(o)||"true"===o.contentEditable)&&(ga=o,ya=e,ba=null);break;case"blur":ba=ya=ga=null;break;case"mousedown":_a=!0;break;case"contextmenu":case"mouseup":case"dragend":return _a=!1,Me(i,n);case"selectionchange":if(ma)break;case"keydown":case"keyup":return Me(i,n)}return null}};qr.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),Gr=ae,Wr=oe,Yr=se,qr.injectEventPluginsByName({SimpleEventPlugin:Ss,EnterLeaveEventPlugin:ca,ChangeEventPlugin:ua,SelectEventPlugin:wa,BeforeInputEventPlugin:ra}),new Set;var xa,Sa,ka,Ea,Ma=[],Ta=-1,Ca={},Oa={current:Ca},Pa={current:!1},Aa=Ca,Da=Dr.unstable_runWithPriority,Ia=Dr.unstable_scheduleCallback,Ra=Dr.unstable_cancelCallback,La=Dr.unstable_shouldYield,Na=Dr.unstable_requestPaint,Fa=Dr.unstable_now,za=Dr.unstable_getCurrentPriorityLevel,Ba=Dr.unstable_ImmediatePriority,ja=Dr.unstable_UserBlockingPriority,Ua=Dr.unstable_NormalPriority,Ha=Dr.unstable_LowPriority,Va=Dr.unstable_IdlePriority,Ga={},Wa=void 0!==Na?Na:function(){},Ya=null,$a=null,qa=!1,Xa=Fa(),Za=1e4>Xa?Fa:function(){return Fa()-Xa},Ka={current:null},Qa=null,Ja=null,th=null,eh=!1,ih=Xr.ReactCurrentBatchConfig,nh=(new Pr.Component).refs,rh={isMounted:function(t){return!!(t=t._reactInternalFiber)&&dt(t)===t},enqueueSetState:function(t,e,i){t=t._reactInternalFiber;var n=wn(),r=ih.suspense;n=xn(n,t,r),r=Je(n,r),r.payload=e,void 0!==i&&null!==i&&(r.callback=i),ei(t,r),Sn(t,n)},enqueueReplaceState:function(t,e,i){t=t._reactInternalFiber;var n=wn(),r=ih.suspense;n=xn(n,t,r),r=Je(n,r),r.tag=1,r.payload=e,void 0!==i&&null!==i&&(r.callback=i),ei(t,r),Sn(t,n)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var i=wn(),n=ih.suspense;i=xn(i,t,n),n=Je(i,n),n.tag=2,void 0!==e&&null!==e&&(n.callback=e),ei(t,n),Sn(t,i)}},oh=Array.isArray,sh=mi(!0),ah=mi(!1),hh={},lh={current:hh},uh={current:hh},dh={current:hh},ch={current:0},fh=Xr.ReactCurrentDispatcher,ph=0,mh=null,vh=null,gh=null,yh=null,bh=null,_h=null,wh=0,xh=null,Sh=0,kh=!1,Eh=null,Mh=0,Th={readContext:Ze,useCallback:Si,useContext:Si,useEffect:Si,useImperativeHandle:Si,useLayoutEffect:Si,useMemo:Si,useReducer:Si,useRef:Si,useState:Si,useDebugValue:Si,useResponder:Si},Ch={readContext:Ze,useCallback:function(t,e){return Ti().memoizedState=[t,void 0===e?null:e],t},useContext:Ze,useEffect:function(t,e){return Di(516,192,t,e)},useImperativeHandle:function(t,e,i){return i=null!==i&&void 0!==i?i.concat([t]):null,Di(4,36,Ri.bind(null,e,t),i)},useLayoutEffect:function(t,e){return Di(4,36,t,e)},useMemo:function(t,e){var i=Ti();return e=void 0===e?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var n=Ti();return e=void 0!==i?i(e):e,n.memoizedState=n.baseState=e,t=n.queue={last:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=Ni.bind(null,mh,t),[n.memoizedState,t]},useRef:function(t){var e=Ti();return t={current:t},e.memoizedState=t},useState:function(t){var e=Ti();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={last:null,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:t},t=t.dispatch=Ni.bind(null,mh,t),[e.memoizedState,t]},useDebugValue:Li,useResponder:xi},Oh={readContext:Ze,useCallback:function(t,e){var i=Ci();e=void 0===e?null:e;var n=i.memoizedState;return null!==n&&null!==e&&ki(e,n[1])?n[0]:(i.memoizedState=[t,e],t)},useContext:Ze,useEffect:function(t,e){return Ii(516,192,t,e)},useImperativeHandle:function(t,e,i){return i=null!==i&&void 0!==i?i.concat([t]):null,Ii(4,36,Ri.bind(null,e,t),i)},useLayoutEffect:function(t,e){return Ii(4,36,t,e)},useMemo:function(t,e){var i=Ci();e=void 0===e?null:e;var n=i.memoizedState;return null!==n&&null!==e&&ki(e,n[1])?n[0]:(t=t(),i.memoizedState=[t,e],t)},useReducer:Pi,useRef:function(){return Ci().memoizedState},useState:function(t){return Pi(Oi)},useDebugValue:Li,useResponder:xi},Ph=null,Ah=null,Dh=!1,Ih=Xr.ReactCurrentOwner,Rh=!1,Lh={dehydrated:null,retryTime:1};xa=function(t,e){for(var i=e.child;null!==i;){if(5===i.tag||6===i.tag)t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Sa=function(){},ka=function(t,e,i,n,r){var o=t.memoizedProps;if(o!==n){var s=e.stateNode;switch(vi(lh.current),t=null,i){case"input":o=F(s,o),n=F(s,n),t=[];break;case"option":o=G(s,o),n=G(s,n),t=[];break;case"select":o=Ar({},o,{value:void 0}),n=Ar({},n,{value:void 0}),t=[];break;case"textarea":o=Y(s,o),n=Y(s,n),t=[];break;default:"function"!==typeof o.onClick&&"function"===typeof n.onClick&&(s.onclick=$t)}Gt(i,n);var a,h;i=null;for(a in o)if(!n.hasOwnProperty(a)&&o.hasOwnProperty(a)&&null!=o[a])if("style"===a)for(h in s=o[a])s.hasOwnProperty(h)&&(i||(i={}),i[h]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(Fr.hasOwnProperty(a)?t||(t=[]):(t=t||[]).push(a,null));for(a in n){var l=n[a];if(s=null!=o?o[a]:void 0,n.hasOwnProperty(a)&&l!==s&&(null!=l||null!=s))if("style"===a)if(s){for(h in s)!s.hasOwnProperty(h)||l&&l.hasOwnProperty(h)||(i||(i={}),i[h]="");for(h in l)l.hasOwnProperty(h)&&s[h]!==l[h]&&(i||(i={}),i[h]=l[h])}else i||(t||(t=[]),t.push(a,i)),i=l;else"dangerouslySetInnerHTML"===a?(l=l?l.__html:void 0,s=s?s.__html:void 0,null!=l&&s!==l&&(t=t||[]).push(a,""+l)):"children"===a?s===l||"string"!==typeof l&&"number"!==typeof l||(t=t||[]).push(a,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(Fr.hasOwnProperty(a)?(null!=l&&Yt(r,a),t||s===l||(t=[])):(t=t||[]).push(a,l))}i&&(t=t||[]).push("style",i),r=t,(e.updateQueue=r)&&nn(e)}},Ea=function(t,e,i,n){i!==n&&nn(e)};var Nh,Fh="function"===typeof WeakSet?WeakSet:Set,zh="function"===typeof WeakMap?WeakMap:Map,Bh=Math.ceil,jh=Xr.ReactCurrentDispatcher,Uh=Xr.ReactCurrentOwner,Hh=0,Vh=8,Gh=16,Wh=32,Yh=0,$h=1,qh=2,Xh=3,Zh=4,Kh=5,Qh=6,Jh=Hh,tl=null,el=null,il=0,nl=Yh,rl=null,ol=1073741823,sl=1073741823,al=null,hl=0,ll=!1,ul=0,dl=500,cl=null,fl=!1,pl=null,ml=null,vl=!1,gl=null,yl=90,bl=null,_l=0,wl=null,xl=0,Sl=0;Nh=function(t,e,i){var r=e.expirationTime;if(null!==t){var o=e.pendingProps;if(t.memoizedProps!==o||Pa.current)Rh=!0;else{if(r<i){switch(Rh=!1,e.tag){case 3:Ki(e),Hi();break;case 5:if(bi(e),4&e.mode&&1!==i&&o.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:Pe(e.type)&&Le(e);break;case 4:gi(e,e.stateNode.containerInfo);break;case 10:Ye(e,e.memoizedProps.value);break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=i?Qi(t,e,i):(Ce(ch,1&ch.current,e),e=en(t,e,i),null!==e?e.sibling:null);Ce(ch,1&ch.current,e);break;case 19:if(r=e.childExpirationTime>=i,(64&t.effectTag)!==Yo){if(r)return tn(t,e,i);e.effectTag|=64}if(o=e.memoizedState,null!==o&&(o.rendering=null,o.tail=null),Ce(ch,ch.current,e),!r)return null}return en(t,e,i)}Rh=!1}}else Rh=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=$o),t=e.pendingProps,o=Oe(e,Oa.current),Xe(e,i),o=Ei(null,e,r,t,o,i),e.effectTag|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof){if(e.tag=1,Mi(),Pe(r)){var s=!0;Le(e)}else s=!1;e.memoizedState=null!==o.state&&void 0!==o.state?o.state:null;var a=r.getDerivedStateFromProps;"function"===typeof a&&hi(e,r,a,t),o.updater=rh,e.stateNode=o,o._reactInternalFiber=e,ci(e,r,t,i),e=Zi(null,e,r,!0,s,i)}else e.tag=0,Vi(null,e,o,i),e=e.child;return e;case 16:if(o=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=$o),t=e.pendingProps,v(o),1!==o._status)throw o._result;switch(o=o._result,e.type=o,s=e.tag=rr(o),t=Ge(o,t),s){case 0:e=qi(null,e,o,t,i);break;case 1:e=Xi(null,e,o,t,i);break;case 11:e=Gi(null,e,o,t,i);break;case 14:e=Wi(null,e,o,Ge(o.type,t),r,i);break;default:throw n(Error(306),o,"")}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ge(r,o),qi(t,e,r,o,i);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ge(r,o),Xi(t,e,r,o,i);case 3:if(Ki(e),null===(r=e.updateQueue))throw n(Error(282));if(o=e.memoizedState,o=null!==o?o.element:null,oi(e,r,e.pendingProps,null,i),(r=e.memoizedState.element)===o)Hi(),e=en(t,e,i);else{if((o=e.stateNode.hydrate)&&(Ah=ie(e.stateNode.containerInfo.firstChild),Ph=e,o=Dh=!0),o)for(i=ah(e,null,r,i),e.child=i;i;)i.effectTag=i.effectTag&~$o|qo,i=i.sibling;else Vi(t,e,r,i),Hi();e=e.child}return e;case 5:return bi(e),null===t&&Bi(e),r=e.type,o=e.pendingProps,s=null!==t?t.memoizedProps:null,a=o.children,ee(r,o)?a=null:null!==s&&ee(r,s)&&(e.effectTag|=16),$i(t,e),4&e.mode&&1!==i&&o.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(Vi(t,e,a,i),e=e.child),e;case 6:return null===t&&Bi(e),null;case 13:return Qi(t,e,i);case 4:return gi(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=sh(e,null,r,i):Vi(t,e,r,i),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ge(r,o),Gi(t,e,r,o,i);case 7:return Vi(t,e,e.pendingProps,i),e.child;case 8:case 12:return Vi(t,e,e.pendingProps.children,i),e.child;case 10:t:{if(r=e.type._context,o=e.pendingProps,a=e.memoizedProps,s=o.value,Ye(e,s),null!==a){var h=a.value;if(0===(s=fa(h,s)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(h,s):1073741823))){if(a.children===o.children&&!Pa.current){e=en(t,e,i);break t}}else for(null!==(h=e.child)&&(h.return=e);null!==h;){var l=h.dependencies;if(null!==l){a=h.child;for(var u=l.firstContext;null!==u;){if(u.context===r&&0!==(u.observedBits&s)){1===h.tag&&(u=Je(i,null),u.tag=2,ei(h,u)),h.expirationTime<i&&(h.expirationTime=i),u=h.alternate,null!==u&&u.expirationTime<i&&(u.expirationTime=i),qe(h.return,i),l.expirationTime<i&&(l.expirationTime=i);break}u=u.next}}else a=10===h.tag&&h.type===e.type?null:h.child;if(null!==a)a.return=h;else for(a=h;null!==a;){if(a===e){a=null;break}if(null!==(h=a.sibling)){h.return=a.return,a=h;break}a=a.return}h=a}}Vi(t,e,o.children,i),e=e.child}return e;case 9:return o=e.type,s=e.pendingProps,r=s.children,Xe(e,i),o=Ze(o,s.unstable_observedBits),r=r(o),e.effectTag|=1,Vi(t,e,r,i),e.child;case 14:return o=e.type,s=Ge(o,e.pendingProps),s=Ge(o.type,s),Wi(t,e,o,s,r,i);case 15:return Yi(t,e,e.type,e.pendingProps,r,i);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ge(r,o),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=$o),e.tag=1,Pe(r)?(t=!0,Le(e)):t=!1,Xe(e,i),ui(e,r,o,i),ci(e,r,o,i),Zi(null,e,r,!0,t,i);case 19:return tn(t,e,i)}throw n(Error(156),e.tag)};var kl=null,El=null;po=function(t,e,i){switch(e){case"input":if(j(t,i),e=i.name,"radio"===i.type&&null!=e){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var r=i[e];if(r!==t&&r.form===t.form){var o=ae(r);if(!o)throw n(Error(90));N(r),j(r,o)}}}break;case"textarea":q(t,i);break;case"select":null!=(e=i.value)&&W(t,!!i.multiple,e,!1)}},br.prototype.render=function(t){if(!this._defer)throw n(Error(250));this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,i=this._expirationTime,r=new _r;return mr(t,e,null,i,null,r._onCommit),r},br.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},br.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(!this._defer||null===e)throw n(Error(251));if(this._hasChildren){var i=this._expirationTime;if(e!==this){this._hasChildren&&(i=this._expirationTime=e._expirationTime,this.render(this._children));for(var r=null,o=e;o!==this;)r=o,o=o._next;if(null===r)throw n(Error(251));r._next=o._next,this._next=e,t.firstBatch=this}if(this._defer=!1,e=i,(Jh&(Gh|Wh))!==Hh)throw n(Error(253));pr(t,e),Mn(t),He(),e=this._next,this._next=null,e=t.firstBatch=e,null!==e&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},br.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},_r.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},_r.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var i=t[e];if("function"!==typeof i)throw n(Error(191),i);i()}}},Sr.prototype.render=xr.prototype.render=function(t,e){var i=this._internalRoot,n=new _r;return e=void 0===e?null:e,null!==e&&n.then(e),vr(t,i,null,n._onCommit),n},Sr.prototype.unmount=xr.prototype.unmount=function(t){var e=this._internalRoot,i=new _r;return t=void 0===t?null:t,null!==t&&i.then(t),vr(null,e,null,i._onCommit),i},Sr.prototype.createBatch=function(){var t=new br(this),e=t._expirationTime,i=this._internalRoot,n=i.firstBatch;if(null===n)i.firstBatch=t,t._next=null;else{for(i=null;null!==n&&n._expirationTime>=e;)i=n,n=n._next;t._next=n,null!==i&&(i._next=t)}return t},x=Dn,S=In,k=On,go=function(t,e){var i=Jh;Jh|=2;try{return t(e)}finally{(Jh=i)===Hh&&He()}};var Ml={createPortal:Tr,findDOMNode:function(t){if(null==t)t=null;else if(1!==t.nodeType){var e=t._reactInternalFiber;if(void 0===e){if("function"===typeof t.render)throw n(Error(188));throw n(Error(268),Object.keys(t))}t=pt(e),t=null===t?null:t.stateNode}return t},hydrate:function(t,e,i){if(!kr(e))throw n(Error(200));return Mr(null,t,e,!0,i)},render:function(t,e,i){if(!kr(e))throw n(Error(200));return Mr(null,t,e,!1,i)},unstable_renderSubtreeIntoContainer:function(t,e,i,r){if(!kr(i))throw n(Error(200));if(null==t||void 0===t._reactInternalFiber)throw n(Error(38));return Mr(t,e,i,!1,r)},unmountComponentAtNode:function(t){if(!kr(t))throw n(Error(40));return!!t._reactRootContainer&&(Rn(function(){Mr(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Tr.apply(void 0,arguments)},unstable_batchedUpdates:Dn,unstable_interactiveUpdates:function(t,e,i,n){return On(),In(t,e,i,n)},unstable_discreteUpdates:In,unstable_flushDiscreteUpdates:On,flushSync:function(t,e){if((Jh&(Gh|Wh))!==Hh)throw n(Error(187));var i=Jh;Jh|=1;try{return Be(99,t.bind(null,e))}finally{Jh=i,He()}},unstable_createRoot:Cr,unstable_createSyncRoot:Or,unstable_flushControlled:function(t){var e=Jh;Jh|=1;try{Be(99,t)}finally{(Jh=e)===Hh&&He()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[oe,se,ae,qr.injectEventPluginsByName,Nr,wt,function(t){d(t,_t)},_,w,Ft,f,qn,{current:!1}]}};!function(t){var e=t.findFiberByHostInstance;tr(Ar({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pt(t),null===t?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:re,bundleType:0,version:"16.10.2",rendererPackageName:"react-dom"});var Tl={default:Ml},Cl=Tl&&Ml||Tl;t.exports=Cl.default||Cl},function(t,e,i){"use strict";t.exports=i(141)},function(t,e,i){"use strict";function n(t,e){var i=t.length;t.push(e);t:for(;;){var n=Math.floor((i-1)/2),r=t[n];if(!(void 0!==r&&0<s(r,e)))break t;t[n]=e,t[i]=r,i=n}}function r(t){return t=t[0],void 0===t?null:t}function o(t){var e=t[0];if(void 0!==e){var i=t.pop();if(i!==e){t[0]=i;t:for(var n=0,r=t.length;n<r;){var o=2*(n+1)-1,a=t[o],h=o+1,l=t[h];if(void 0!==a&&0>s(a,i))void 0!==l&&0>s(l,a)?(t[n]=l,t[h]=i,n=h):(t[n]=a,t[o]=i,n=o);else{if(!(void 0!==l&&0>s(l,i)))break t;t[n]=l,t[h]=i,n=h}}}return e}return null}function s(t,e){var i=t.sortIndex-e.sortIndex;return 0!==i?i:t.id-e.id}function a(t){for(var e=r(L);null!==e;){if(null===e.callback)o(L);else{if(!(e.startTime<=t))break;o(L),e.sortIndex=e.expirationTime,n(R,e)}e=r(L)}}function h(t){if(U=!1,a(t),!j)if(null!==r(R))j=!0,d(l);else{var e=r(L);null!==e&&c(h,e.startTime-t)}}function l(t,i){j=!1,U&&(U=!1,f()),B=!0;var n=z;try{for(a(i),F=r(R);null!==F&&(!(F.expirationTime>i)||t&&!p());){var s=F.callback;if(null!==s){F.callback=null,z=F.priorityLevel;var l=s(F.expirationTime<=i);i=e.unstable_now(),"function"===typeof l?F.callback=l:F===r(R)&&o(R),a(i)}else o(R);F=r(R)}if(null!==F)var u=!0;else{var d=r(L);null!==d&&c(h,d.startTime-i),u=!1}return u}finally{F=null,z=n,B=!1}}function u(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}Object.defineProperty(e,"__esModule",{value:!0});var d,c,f,p,m;if("undefined"===typeof window||"function"!==typeof MessageChannel){var v=null,g=null,y=function(){if(null!==v)try{var t=e.unstable_now();v(!0,t),v=null}catch(t){throw setTimeout(y,0),t}},b=Date.now();e.unstable_now=function(){return Date.now()-b},d=function(t){null!==v?setTimeout(d,0,t):(v=t,setTimeout(y,0))},c=function(t,e){g=setTimeout(t,e)},f=function(){clearTimeout(g)},p=function(){return!1},m=e.unstable_forceFrameRate=function(){}}else{var _=window.performance,w=window.Date,x=window.setTimeout,S=window.clearTimeout,k=window.requestAnimationFrame,E=window.cancelAnimationFrame;if("undefined"!==typeof console&&("function"!==typeof k&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof E&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")),"object"===typeof _&&"function"===typeof _.now)e.unstable_now=function(){return _.now()};else{var M=w.now();e.unstable_now=function(){return w.now()-M}}var T=!1,C=null,O=-1,P=5,A=0;p=function(){return e.unstable_now()>=A},m=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):P=0<t?Math.floor(1e3/t):33.33};var D=new MessageChannel,I=D.port2;D.port1.onmessage=function(){if(null!==C){var t=e.unstable_now();A=t+P;try{C(!0,t)?I.postMessage(null):(T=!1,C=null)}catch(t){throw I.postMessage(null),t}}else T=!1},d=function(t){C=t,T||(T=!0,I.postMessage(null))},c=function(t,i){O=x(function(){t(e.unstable_now())},i)},f=function(){S(O),O=-1}}var R=[],L=[],N=1,F=null,z=3,B=!1,j=!1,U=!1,H=m;e.unstable_ImmediatePriority=1,e.unstable_UserBlockingPriority=2,e.unstable_NormalPriority=3,e.unstable_IdlePriority=5,e.unstable_LowPriority=4,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var i=z;z=t;try{return e()}finally{z=i}},e.unstable_next=function(t){switch(z){case 1:case 2:case 3:var e=3;break;default:e=z}var i=z;z=e;try{return t()}finally{z=i}},e.unstable_scheduleCallback=function(t,i,o){var s=e.unstable_now();if("object"===typeof o&&null!==o){var a=o.delay;a="number"===typeof a&&0<a?s+a:s,o="number"===typeof o.timeout?o.timeout:u(t)}else o=u(t),a=s;return o=a+o,t={id:N++,callback:i,priorityLevel:t,startTime:a,expirationTime:o,sortIndex:-1},a>s?(t.sortIndex=a,n(L,t),null===r(R)&&t===r(L)&&(U?f():U=!0,c(h,a-s))):(t.sortIndex=o,n(R,t),j||B||(j=!0,d(l))),t},e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_wrapCallback=function(t){var e=z;return function(){var i=z;z=e;try{return t.apply(this,arguments)}finally{z=i}}},e.unstable_getCurrentPriorityLevel=function(){return z},e.unstable_shouldYield=function(){var t=e.unstable_now();a(t);var i=r(R);return i!==F&&null!==F&&null!==i&&null!==i.callback&&i.startTime<=t&&i.expirationTime<F.expirationTime||p()},e.unstable_requestPaint=H,e.unstable_continueExecution=function(){j||B||(j=!0,d(l))},e.unstable_pauseExecution=function(){},e.unstable_getFirstCallbackNode=function(){return r(R)},e.unstable_Profiling=null},function(t,e){},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=i(0),a=i.n(s),h=i(144),l=i(59),u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),d=function(t){function e(){var t,i,o,s;n(this,e);for(var a=arguments.length,h=Array(a),l=0;l<a;l++)h[l]=arguments[l];return i=o=r(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(h))),o.state={degree:1},o.handleControlAdd=function(){var t=o.state.degree,e=t+1;o.setState({degree:e})},o.handleControlSub=function(){var t=o.state.degree,e=t-1;o.setState({degree:e})},s=i,r(o,s)}return o(e,t),u(e,[{key:"render",value:function(){return a.a.createElement(l.a,null,a.a.createElement(h.a,{degree:this.degree}),a.a.createElement("p",null,window.token))}}]),e}(s.Component);e.a=d},function(t,e,i){"use strict";var n=i(0),r=i.n(n),o=i(7),s=i(145),a=i.n(s),h=i(146),l=i(59),u=i(326),d=i(129),c=i(329),f=i(331),p=i(334),m=i(337),v=function(t){return r.a.createElement(o.a,{className:a.a.parent},r.a.createElement("header",{className:a.a.bar},r.a.createElement("div",{className:a.a.branding},r.a.createElement("h1",null,"EzyProtein")),r.a.createElement(u.a,null)),r.a.createElement("main",{className:a.a.Content},r.a.createElement(l.d,{path:"/home",degree:t.degree,exact:!0,component:h.a}),r.a.createElement(l.d,{path:"/about",exact:!0,component:c.a}),r.a.createElement(l.d,{path:"/howtouse",exact:!0,component:f.a}),r.a.createElement(l.d,{path:"/faq",exact:!0,component:p.a}),r.a.createElement(l.d,{path:"/priv",exact:!0,component:m.a}),r.a.createElement(l.c,{from:"/",to:"/home"})),r.a.createElement("footer",{className:a.a.foot},r.a.createElement("div",{className:a.a.footerlink},r.a.createElement("ol",null,r.a.createElement("li",null,r.a.createElement("a",{target:"_blank",href:"https://forms.gle/9AWN5FK3KHBaGU4C6"},"Contact")),r.a.createElement("li",null,r.a.createElement(d.a,{link:"/priv"},"Privacy Policy")),r.a.createElement("li",null,r.a.createElement("a",{target:"_blank",href:"https://github.com/williampangbest1/ezyprotein"},"Github")))),r.a.createElement("div",{className:a.a.footercopyright},"\xa9 2020 EzyProtein \xa0 This website was created for BIEN 470: Bioengineering Design Project.",r.a.createElement("br",null)," ",r.a.createElement("small",null," Team Members: William Pang, Jing Ming Yuan, Jiachi Ou, Serra Ozdas ")),r.a.createElement("div",{className:a.a.askspacersm})))};e.a=v},function(t,e){t.exports={parent:"Layout__parent__1d_MW",bar:"Layout__bar__321MU",branding:"Layout__branding__2bgXb",foot:"Layout__foot__2wehF",footerlinks:"Layout__footerlinks__2aFXA",footerlink:"Layout__footerlink__3I7Ij",footercopyright:"Layout__footercopyright__269VV"}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=i(0),a=i.n(s),h=i(7),l=i(147),u=(i(315),function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}()),d=function(t){function e(){var t,i,o,s;n(this,e);for(var a=arguments.length,h=Array(a),l=0;l<a;l++)h[l]=arguments[l];return i=o=r(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(h))),o.state={degree:1},o.handleControlAdd=function(){var t=o.state.degree,e=t+1;o.setState({degree:e})},o.handleControlSub=function(){var t=o.state.degree,e=t-1;o.setState({degree:e})},s=i,r(o,s)}return o(e,t),u(e,[{key:"render",value:function(){return console.log(this.props),a.a.createElement(h.a,null,a.a.createElement(l.a,null))}}]),e}(s.Component);e.a=d},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=i(0),a=i.n(s),h=i(63),l=i.n(h),u=i(164),d=(i.n(u),i(165)),c=i.n(d),f=i(299),p=i.n(f),m=(i(122),i(308)),v=i.n(m),g=i(309),y=i(314),b=i.n(y),_=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),w=function(t){function e(){var t,i,o,s;n(this,e);for(var a=arguments.length,h=Array(a),u=0;u<a;u++)h[u]=arguments[u];return i=o=r(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(h))),o.state={searchValue:"",partners:0,value:"1",clicked:0,clickedProtein:{name1:"",name2:""},model:"0"},o.handleOnChange=function(t){o.setState({searchValue:t.target.value})},o.edgeClick=function(t,e){var i={name1:t.get(e.from).label,name2:t.get(e.to).label};console.log(i),o.setState({clickedProtein:{name1:"",name2:""}}),o.setState({clickedProtein:i});var n={data:[{p1:o.state.clickedProtein.name1},{p2:o.state.clickedProtein.name2},{type:"1"}]};l.a.post("https://ezyprotein.herokuapp.com/home",n).then(function(t){o.setState({model:t.data}),console.log(t)}),o.setState({clicked:1})},o.nodeClose=function(){o.setState({clicked:0})},o.handleSubmit=function(t){t.preventDefault();var e={data:[{name:o.state.searchValue},{value:o.state.value},{type:"0"}]};l.a.post("https://ezyprotein.herokuapp.com/home",e).then(function(t){o.setState({partners:""}),o.setState({partners:t.data}),console.log(t)})},o.handleSelect=function(t){o.setState({value:t.target.value})},s=i,r(o,s)}return o(e,t),_(e,[{key:"render",value:function(){var t=this,e=new p.a.DataSet(this.state.partners.nodes),i=new p.a.DataSet(this.state.partners.edges);return a.a.createElement("div",{className:b.a.content},a.a.createElement("form",{className:b.a.form,onSubmit:this.handleSubmit.bind(this)},a.a.createElement("input",{name:"text",type:"text",placeholder:"Please enter gene name",onChange:this.handleOnChange.bind(this),value:this.state.searchValue,className:b.a.in}),a.a.createElement("label",null,"Degree of propagation:",a.a.createElement("select",{value:this.state.value,onChange:this.handleSelect,className:b.a.drop},a.a.createElement("option",{value:"1"},"1"),a.a.createElement("option",{value:"2"},"2"),a.a.createElement("option",{value:"3"},"3"),a.a.createElement("option",{value:"4"},"4"))),a.a.createElement("div",null,a.a.createElement("input",{className:b.a.button,type:"submit",value:"Search"}))),this.state.partners?a.a.createElement("div",{className:b.a.tree},a.a.createElement(c.a,{graph:this.state.partners,events:{selectEdge:function(n){var r=(n.nodes,n.edges);console.log(i.get(r[0])),t.edgeClick(e,i.get(r[0]))}},options:{edges:{arrows:{to:{enabled:!1},middle:{enabled:!1},from:{enabled:!1}}},interaction:{navigationButtons:!0,hoverConnectedEdges:!0,hover:!0},nodes:{font:{size:30,align:"center"},color:{hover:{border:"#2B7CE9",background:"#D2E5FF"}}},physics:{repulsion:{centralGravity:.5,springLength:800,springConstant:.01,nodeDistance:100,damping:.9},solver:"repulsion"}}})):0===this.state.partners?a.a.createElement("img",{src:v.a,alt:"protein"}):a.a.createElement("p",null,"Protein not Found, Please try another one."),a.a.createElement(g.a,{protein:this.state.clickedProtein,show:this.state.clicked,modalClosed:this.nodeClose,model:this.state.model}))}}]),e}(s.Component);e.a=w},function(t,e,i){"use strict";function n(t){var e=new s(t),i=o(s.prototype.request,e);return r.extend(i,s.prototype,e),r.extend(i,e),i}var r=i(3),o=i(64),s=i(150),a=i(71),h=i(67),l=n(h);l.Axios=s,l.create=function(t){return n(a(l.defaults,t))},l.Cancel=i(72),l.CancelToken=i(162),l.isCancel=i(66),l.all=function(t){return Promise.all(t)},l.spread=i(163),t.exports=l,t.exports.default=l},function(t,e){t.exports=function(t){return null!=t&&null!=t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},function(t,e,i){"use strict";function n(t){this.defaults=t,this.interceptors={request:new s,response:new s}}var r=i(3),o=i(65),s=i(151),a=i(152),h=i(71);n.prototype.request=function(t){"string"===typeof t?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=h(this.defaults,t),t.method=t.method?t.method.toLowerCase():"get";var e=[a,void 0],i=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)i=i.then(e.shift(),e.shift());return i},n.prototype.getUri=function(t){return t=h(this.defaults,t),o(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],function(t){n.prototype[t]=function(e,i){return this.request(r.merge(i||{},{method:t,url:e}))}}),r.forEach(["post","put","patch"],function(t){n.prototype[t]=function(e,i,n){return this.request(r.merge(n||{},{method:t,url:e,data:i}))}}),t.exports=n},function(t,e,i){"use strict";function n(){this.handlers=[]}var r=i(3);n.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},n.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},n.prototype.forEach=function(t){r.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=n},function(t,e,i){"use strict";function n(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var r=i(3),o=i(153),s=i(66),a=i(67),h=i(160),l=i(161);t.exports=function(t){return n(t),t.baseURL&&!h(t.url)&&(t.url=l(t.baseURL,t.url)),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return n(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return s(e)||(n(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,i){"use strict";var n=i(3);t.exports=function(t,e,i){return n.forEach(i,function(i){t=i(t,e)}),t}},function(t,e,i){"use strict";var n=i(3);t.exports=function(t,e){n.forEach(t,function(i,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=i,delete t[n])})}},function(t,e,i){"use strict";var n=i(70);t.exports=function(t,e,i){var r=i.config.validateStatus;!r||r(i.status)?t(i):e(n("Request failed with status code "+i.status,i.config,null,i.request,i))}},function(t,e,i){"use strict";t.exports=function(t,e,i,n,r){return t.config=e,i&&(t.code=i),t.request=n,t.response=r,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,i){"use strict";var n=i(3),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,i,o,s={};return t?(n.forEach(t.split("\n"),function(t){if(o=t.indexOf(":"),e=n.trim(t.substr(0,o)).toLowerCase(),i=n.trim(t.substr(o+1)),e){if(s[e]&&r.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([i]):s[e]?s[e]+", "+i:i}}),s):s}},function(t,e,i){"use strict";var n=i(3);t.exports=n.isStandardBrowserEnv()?function(){function t(t){var e=t;return i&&(r.setAttribute("href",e),e=r.href),r.setAttribute("href",e),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}var e,i=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");return e=t(window.location.href),function(i){var r=n.isString(i)?t(i):i;return r.protocol===e.protocol&&r.host===e.host}}():function(){return function(){return!0}}()},function(t,e,i){"use strict";var n=i(3);t.exports=n.isStandardBrowserEnv()?function(){return{write:function(t,e,i,r,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),n.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),n.isString(r)&&a.push("path="+r),n.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(t,e,i){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,i){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,i){"use strict";function n(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var i=this;t(function(t){i.reason||(i.reason=new r(t),e(i.reason))})}var r=i(72);n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var t;return{token:new n(function(e){t=e}),cancel:t}},t.exports=n},function(t,e,i){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e){t.exports={"vis-navigation":"Graph__vis-navigation__2HWkK"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(0),l=n(h),u=i(166),d=n(u),c=i(289),f=n(c),p=i(290),m=n(p),v=i(294),g=n(v),y=i(295),b=n(y),_=i(17),w=n(_),x=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=t.identifier;return i.updateGraph=i.updateGraph.bind(i),i.state={identifier:void 0!==n?n:b.default.v4()},i}return s(e,t),a(e,[{key:"componentDidMount",value:function(){this.edges=new g.default.DataSet,this.edges.add(this.props.graph.edges),this.nodes=new g.default.DataSet,this.nodes.add(this.props.graph.nodes),this.updateGraph()}},{key:"shouldComponentUpdate",value:function(t,e){var i=!(0,f.default)(this.props.graph.nodes,t.graph.nodes),n=!(0,f.default)(this.props.graph.edges,t.graph.edges),r=!(0,f.default)(this.props.options,t.options),o=!(0,f.default)(this.props.events,t.events);if(i){var s=function(t,e){return t.id===e.id},a=(0,m.default)(this.props.graph.nodes,t.graph.nodes,s),h=(0,m.default)(t.graph.nodes,this.props.graph.nodes,s),l=(0,m.default)((0,m.default)(t.graph.nodes,this.props.graph.nodes,f.default),h);this.patchNodes({nodesRemoved:a,nodesAdded:h,nodesChanged:l})}if(n){var u=(0,m.default)(this.props.graph.edges,t.graph.edges,f.default),d=(0,m.default)(t.graph.edges,this.props.graph.edges,f.default),c=(0,m.default)((0,m.default)(t.graph.edges,this.props.graph.edges,f.default),d);this.patchEdges({edgesRemoved:u,edgesAdded:d,edgesChanged:c})}if(r&&this.Network.setOptions(t.options),o){var p=this.props.events||{},v=!0,g=!1,y=void 0;try{for(var b,_=Object.keys(p)[Symbol.iterator]();!(v=(b=_.next()).done);v=!0){var w=b.value;this.Network.off(w,p[w])}}catch(t){g=!0,y=t}finally{try{!v&&_.return&&_.return()}finally{if(g)throw y}}p=t.events||{};var x=!0,S=!1,k=void 0;try{for(var E,M=Object.keys(p)[Symbol.iterator]();!(x=(E=M.next()).done);x=!0){var T=E.value;this.Network.on(T,p[T])}}catch(t){S=!0,k=t}finally{try{!x&&M.return&&M.return()}finally{if(S)throw k}}}return!1}},{key:"componentDidUpdate",value:function(){this.updateGraph()}},{key:"patchEdges",value:function(t){var e=t.edgesRemoved,i=t.edgesAdded,n=t.edgesChanged;this.edges.remove(e),this.edges.add(i),this.edges.update(n)}},{key:"patchNodes",value:function(t){var e=t.nodesRemoved,i=t.nodesAdded,n=t.nodesChanged;this.nodes.remove(e),this.nodes.add(i),this.nodes.update(n)}},{key:"updateGraph",value:function(){var t=document.getElementById(this.state.identifier),e={physics:{stabilization:!1},autoResize:!1,edges:{smooth:!1,color:"#000000",width:.5,arrows:{to:{enabled:!0,scaleFactor:.5}}}},i=(0,d.default)(e,this.props.options);this.Network=new g.default.Network(t,Object.assign({},this.props.graph,{edges:this.edges,nodes:this.nodes}),i),this.props.getNetwork&&this.props.getNetwork(this.Network),this.props.getNodes&&this.props.getNodes(this.nodes),this.props.getEdges&&this.props.getEdges(this.edges);var n=this.props.events||{},r=!0,o=!1,s=void 0;try{for(var a,h=Object.keys(n)[Symbol.iterator]();!(r=(a=h.next()).done);r=!0){var l=a.value;this.Network.on(l,n[l])}}catch(t){o=!0,s=t}finally{try{!r&&h.return&&h.return()}finally{if(o)throw s}}}},{key:"render",value:function(){var t=this.state.identifier,e=this.props.style;return l.default.createElement("div",{id:t,style:e},t)}}]),e}(h.Component);x.defaultProps={graph:{},style:{width:"100%",height:"100%"}},x.propTypes={graph:w.default.object,style:w.default.object,getNetwork:w.default.func,getNodes:w.default.func,getEdges:w.default.func},e.default=x},function(t,e,i){var n=i(167),r=n("defaultsDeep",i(280));r.placeholder=i(73),t.exports=r},function(t,e,i){function n(t,e,i){return r(o,t,e,i)}var r=i(168),o=i(170);t.exports=n},function(t,e,i){function n(t,e){return 2==e?function(e,i){return t.apply(void 0,arguments)}:function(e){return t.apply(void 0,arguments)}}function r(t,e){return 2==e?function(e,i){return t(e,i)}:function(e){return t(e)}}function o(t){for(var e=t?t.length:0,i=Array(e);e--;)i[e]=t[e];return i}function s(t){return function(e){return t({},e)}}function a(t,e){return function(){for(var i=arguments.length,n=i-1,r=Array(i);i--;)r[i]=arguments[i];var o=r[e],s=r.slice(0,e);return o&&c.apply(s,o),e!=n&&c.apply(s,r.slice(e+1)),t.apply(this,s)}}function h(t,e){return function(){var i=arguments.length;if(i){for(var n=Array(i);i--;)n[i]=arguments[i];var r=n[0]=e.apply(void 0,n);return t.apply(void 0,n),r}}}function l(t,e,i,c){function f(t,e){if(M.cap){var i=u.iterateeRearg[t];if(i)return w(e,i);var n=!k&&u.iterateeAry[t];if(n)return _(e,n)}return e}function p(t,e,i){return C||M.curry&&i>1?N(e,i):e}function m(t,e,i){if(M.fixed&&(O||!u.skipFixed[t])){var n=u.methodSpread[t],r=n&&n.start;return void 0===r?I(e,i):a(e,r)}return e}function v(t,e,i){return M.rearg&&i>1&&(P||!u.skipRearg[t])?V(e,u.methodRearg[t]||u.aryRearg[i]):e}function g(t,e){e=W(e);for(var i=-1,n=e.length,r=n-1,o=L(Object(t)),s=o;null!=s&&++i<n;){var a=e[i],h=s[a];null==h||j(h)||B(h)||U(h)||(s[a]=L(i==r?h:Object(h))),s=s[a]}return o}function y(t){return q.runInContext.convert(t)(void 0)}function b(t,e){var i=u.aliasToReal[t]||t,n=u.remap[i]||i,r=c;return function(t){var o=k?A:D,s=k?A[n]:e,a=R(R({},r),t);return l(o,i,s,a)}}function _(t,e){return x(t,function(t){return"function"==typeof t?r(t,e):t})}function w(t,e){return x(t,function(t){var i=e.length;return n(V(r(t,i),e),i)})}function x(t,e){return function(){var i=arguments.length;if(!i)return t();for(var n=Array(i);i--;)n[i]=arguments[i];var r=M.rearg?0:i-1;return n[r]=e(n[r]),t.apply(void 0,n)}}function S(t,e,i){var n,r=u.aliasToReal[t]||t,a=e,l=$[r];return l?a=l(e):M.immutable&&(u.mutate.array[r]?a=h(e,o):u.mutate.object[r]?a=h(e,s(e)):u.mutate.set[r]&&(a=h(e,g))),F(Y,function(t){return F(u.aryMethod[t],function(e){if(r==e){var i=u.methodSpread[r],o=i&&i.afterRearg;return n=o?m(r,v(r,a,t),t):v(r,m(r,a,t),t),n=f(r,n),n=p(r,n,t),!1}}),!n}),n||(n=a),n==e&&(n=C?N(n,1):function(){return e.apply(this,arguments)}),n.convert=b(r,e),n.placeholder=e.placeholder=i,n}var k="function"==typeof e,E=e===Object(e);if(E&&(c=i,i=e,e=void 0),null==i)throw new TypeError;c||(c={});var M={cap:!("cap"in c)||c.cap,curry:!("curry"in c)||c.curry,fixed:!("fixed"in c)||c.fixed,immutable:!("immutable"in c)||c.immutable,rearg:!("rearg"in c)||c.rearg},T=k?i:d,C="curry"in c&&c.curry,O="fixed"in c&&c.fixed,P="rearg"in c&&c.rearg,A=k?i.runInContext():void 0,D=k?i:{ary:t.ary,assign:t.assign,clone:t.clone,curry:t.curry,forEach:t.forEach,isArray:t.isArray,isError:t.isError,isFunction:t.isFunction,isWeakMap:t.isWeakMap,iteratee:t.iteratee,keys:t.keys,rearg:t.rearg,toInteger:t.toInteger,toPath:t.toPath},I=D.ary,R=D.assign,L=D.clone,N=D.curry,F=D.forEach,z=D.isArray,B=D.isError,j=D.isFunction,U=D.isWeakMap,H=D.keys,V=D.rearg,G=D.toInteger,W=D.toPath,Y=H(u.aryMethod),$={castArray:function(t){return function(){var e=arguments[0];return z(e)?t(o(e)):t.apply(void 0,arguments)}},iteratee:function(t){return function(){var e=arguments[0],i=arguments[1],n=t(e,i),o=n.length;return M.cap&&"number"==typeof i?(i=i>2?i-2:1,o&&o<=i?n:r(n,i)):n}},mixin:function(t){return function(e){var i=this;if(!j(i))return t(i,Object(e));var n=[];return F(H(e),function(t){j(e[t])&&n.push([t,i.prototype[t]])}),t(i,Object(e)),F(n,function(t){var e=t[1];j(e)?i.prototype[t[0]]=e:delete i.prototype[t[0]]}),i}},nthArg:function(t){return function(e){var i=e<0?1:G(e)+1;return N(t(e),i)}},rearg:function(t){return function(e,i){var n=i?i.length:0;return N(t(e,i),n)}},runInContext:function(e){return function(i){return l(t,e(i),c)}}};if(!E)return S(e,i,T);var q=i,X=[];return F(Y,function(t){F(u.aryMethod[t],function(t){var e=q[u.remap[t]||t];e&&X.push([t,S(t,e,q)])})}),F(H(q),function(t){var e=q[t];if("function"==typeof e){for(var i=X.length;i--;)if(X[i][0]==t)return;e.convert=b(t,e),X.push([t,e])}}),F(X,function(t){q[t[0]]=t[1]}),q.convert=y,q.placeholder=q,F(H(q),function(t){F(u.realToAlias[t]||[],function(e){q[e]=q[t]})}),q}var u=i(169),d=i(73),c=Array.prototype.push;t.exports=l},function(t,e){e.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},e.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},e.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},e.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},e.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},e.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},e.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},e.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},e.realToAlias=function(){var t=Object.prototype.hasOwnProperty,i=e.aliasToReal,n={};for(var r in i){var o=i[r];t.call(n,o)?n[o].push(r):n[o]=[r]}return n}(),e.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},e.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},e.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},function(t,e,i){t.exports={ary:i(171),assign:i(92),clone:i(206),curry:i(248),forEach:i(41),isArray:i(2),isError:i(249),isFunction:i(19),isWeakMap:i(250),iteratee:i(251),keys:i(95),rearg:i(275),toInteger:i(91),toPath:i(279)}},function(t,e,i){function n(t,e,i){return e=i?void 0:e,e=t&&null==e?t.length:e,r(t,o,void 0,void 0,void 0,void 0,e)}var r=i(37),o=128;t.exports=n},function(t,e,i){function n(t){return!(!s(t)||o(t))&&(r(t)?p:l).test(a(t))}var r=i(19),o=i(175),s=i(4),a=i(78),h=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,u=Function.prototype,d=Object.prototype,c=u.toString,f=d.hasOwnProperty,p=RegExp("^"+c.call(f).replace(h,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},function(t,e,i){function n(t){var e=s.call(t,h),i=t[h];try{t[h]=void 0;var n=!0}catch(t){}var r=a.call(t);return n&&(e?t[h]=i:delete t[h]),r}var r=i(10),o=Object.prototype,s=o.hasOwnProperty,a=o.toString,h=r?r.toStringTag:void 0;t.exports=n},function(t,e){function i(t){return r.call(t)}var n=Object.prototype,r=n.toString;t.exports=i},function(t,e,i){function n(t){return!!o&&o in t}var r=i(176),o=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=n},function(t,e,i){var n=i(1),r=n["__core-js_shared__"];t.exports=r},function(t,e){function i(t,e){return null==t?void 0:t[e]}t.exports=i},function(t,e,i){function n(t,e,i){function n(){return(this&&this!==o&&this instanceof n?h:t).apply(a?i:this,arguments)}var a=e&s,h=r(t);return n}var r=i(20),o=i(1),s=1;t.exports=n},function(t,e,i){function n(t,e,i){function n(){for(var o=arguments.length,c=Array(o),f=o,p=h(n);f--;)c[f]=arguments[f];var m=o<3&&c[0]!==p&&c[o-1]!==p?[]:l(c,p);return(o-=m.length)<i?a(t,e,s,n.placeholder,void 0,c,m,void 0,void 0,i-o):r(this&&this!==u&&this instanceof n?d:t,this,c)}var d=o(t);return n}var r=i(22),o=i(20),s=i(79),a=i(82),h=i(90),l=i(42),u=i(1);t.exports=n},function(t,e){function i(t,e){for(var i=t.length,n=0;i--;)t[i]===e&&++n;return n}t.exports=i},function(t,e,i){function n(t){var e=s(t),i=a[e];if("function"!=typeof i||!(e in r.prototype))return!1;if(t===i)return!0;var n=o(i);return!!n&&t===n[0]}var r=i(38),o=i(83),s=i(183),a=i(185);t.exports=n},function(t,e){function i(){}t.exports=i},function(t,e,i){function n(t){for(var e=t.name+"",i=r[e],n=s.call(r,e)?i.length:0;n--;){var o=i[n],a=o.func;if(null==a||a==t)return o.name}return e}var r=i(184),o=Object.prototype,s=o.hasOwnProperty;t.exports=n},function(t,e){var i={};t.exports=i},function(t,e,i){function n(t){if(h(t)&&!a(t)&&!(t instanceof r)){if(t instanceof o)return t;if(d.call(t,"__wrapped__"))return l(t)}return new o(t)}var r=i(38),o=i(84),s=i(39),a=i(2),h=i(5),l=i(186),u=Object.prototype,d=u.hasOwnProperty;n.prototype=s.prototype,n.prototype.constructor=n,t.exports=n},function(t,e,i){function n(t){if(t instanceof r)return t.clone();var e=new o(t.__wrapped__,t.__chain__);return e.__actions__=s(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var r=i(38),o=i(84),s=i(11);t.exports=n},function(t,e){function i(t){var e=t.match(n);return e?e[1].split(r):[]}var n=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /;t.exports=i},function(t,e){function i(t,e){var i=e.length;if(!i)return t;var r=i-1;return e[r]=(i>1?"& ":"")+e[r],e=e.join(i>2?", ":" "),t.replace(n,"{\n/* [wrapped with "+e+"] */\n")}var n=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;t.exports=i},function(t,e,i){var n=i(190),r=i(88),o=i(18),s=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:o;t.exports=s},function(t,e){function i(t){return function(){return t}}t.exports=i},function(t,e,i){function n(t,e){return r(s,function(i){var n="_."+i[0];e&i[1]&&!o(t,n)&&t.push(n)}),t.sort()}var r=i(41),o=i(89),s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];t.exports=n},function(t,e,i){function n(t,e,i){return e===e?s(t,e,i):r(t,o,i)}var r=i(193),o=i(194),s=i(195);t.exports=n},function(t,e){function i(t,e,i,n){for(var r=t.length,o=i+(n?1:-1);n?o--:++o<r;)if(e(t[o],o,t))return o;return-1}t.exports=i},function(t,e){function i(t){return t!==t}t.exports=i},function(t,e){function i(t,e,i){for(var n=i-1,r=t.length;++n<r;)if(t[n]===e)return n;return-1}t.exports=i},function(t,e,i){function n(t,e){for(var i=t.length,n=s(e.length,i),a=r(t);n--;){var h=e[n];t[n]=o(h,i)?a[h]:void 0}return t}var r=i(11),o=i(23),s=Math.min;t.exports=n},function(t,e,i){function n(t,e,i,n){function h(){for(var e=-1,o=arguments.length,a=-1,d=n.length,c=Array(d+o),f=this&&this!==s&&this instanceof h?u:t;++a<d;)c[a]=n[a];for(;o--;)c[a++]=arguments[++e];return r(f,l?i:this,c)}var l=e&a,u=o(t);return h}var r=i(22),o=i(20),s=i(1),a=1;t.exports=n},function(t,e,i){function n(t,e){var i=t[1],n=e[1],m=i|n,v=m<(h|l|c),g=n==c&&i==d||n==c&&i==f&&t[7].length<=e[8]||n==(c|f)&&e[7].length<=e[8]&&i==d;if(!v&&!g)return t;n&h&&(t[2]=e[2],m|=i&h?0:u);var y=e[3];if(y){var b=t[3];t[3]=b?r(b,y,e[4]):y,t[4]=b?s(t[3],a):e[4]}return y=e[5],y&&(b=t[5],t[5]=b?o(b,y,e[6]):y,t[6]=b?s(t[5],a):e[6]),y=e[7],y&&(t[7]=y),n&c&&(t[8]=null==t[8]?e[8]:p(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=m,t}var r=i(80),o=i(81),s=i(42),a="__lodash_placeholder__",h=1,l=2,u=4,d=8,c=128,f=256,p=Math.min;t.exports=n},function(t,e,i){function n(t){if(!t)return 0===t?t:0;if((t=r(t))===o||t===-o){return(t<0?-1:1)*s}return t===t?t:0}var r=i(200),o=1/0,s=1.7976931348623157e308;t.exports=n},function(t,e,i){function n(t){if("number"==typeof t)return t;if(o(t))return s;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var i=l.test(t);return i||u.test(t)?d(t.slice(2),i?2:8):h.test(t)?s:+t}var r=i(4),o=i(12),s=NaN,a=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,d=parseInt;t.exports=n},function(t,e){function i(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}t.exports=i},function(t,e,i){function n(t){return o(t)&&r(t)==s}var r=i(9),o=i(5),s="[object Arguments]";t.exports=n},function(t,e){function i(){return!1}t.exports=i},function(t,e,i){function n(t){return s(t)&&o(t.length)&&!!a[r(t)]}var r=i(9),o=i(46),s=i(5),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=n},function(t,e,i){var n=i(96),r=n(Object.keys,Object);t.exports=r},function(t,e,i){function n(t){return r(t,o)}var r=i(97),o=4;t.exports=n},function(t,e){function i(){this.__data__=[],this.size=0}t.exports=i},function(t,e,i){function n(t){var e=this.__data__,i=r(e,t);return!(i<0)&&(i==e.length-1?e.pop():s.call(e,i,1),--this.size,!0)}var r=i(31),o=Array.prototype,s=o.splice;t.exports=n},function(t,e,i){function n(t){var e=this.__data__,i=r(e,t);return i<0?void 0:e[i][1]}var r=i(31);t.exports=n},function(t,e,i){function n(t){return r(this.__data__,t)>-1}var r=i(31);t.exports=n},function(t,e,i){function n(t,e){var i=this.__data__,n=r(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this}var r=i(31);t.exports=n},function(t,e,i){function n(){this.__data__=new r,this.size=0}var r=i(30);t.exports=n},function(t,e){function i(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}t.exports=i},function(t,e){function i(t){return this.__data__.get(t)}t.exports=i},function(t,e){function i(t){return this.__data__.has(t)}t.exports=i},function(t,e,i){function n(t,e){var i=this.__data__;if(i instanceof r){var n=i.__data__;if(!o||n.length<a-1)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new s(n)}return i.set(t,e),this.size=i.size,this}var r=i(30),o=i(49),s=i(50),a=200;t.exports=n},function(t,e,i){function n(){this.size=0,this.__data__={hash:new r,map:new(s||o),string:new r}}var r=i(218),o=i(30),s=i(49);t.exports=n},function(t,e,i){function n(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}var r=i(219),o=i(220),s=i(221),a=i(222),h=i(223);n.prototype.clear=r,n.prototype.delete=o,n.prototype.get=s,n.prototype.has=a,n.prototype.set=h,t.exports=n},function(t,e,i){function n(){this.__data__=r?r(null):{},this.size=0}var r=i(32);t.exports=n},function(t,e){function i(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=i},function(t,e,i){function n(t){var e=this.__data__;if(r){var i=e[t];return i===o?void 0:i}return a.call(e,t)?e[t]:void 0}var r=i(32),o="__lodash_hash_undefined__",s=Object.prototype,a=s.hasOwnProperty;t.exports=n},function(t,e,i){function n(t){var e=this.__data__;return r?void 0!==e[t]:s.call(e,t)}var r=i(32),o=Object.prototype,s=o.hasOwnProperty;t.exports=n},function(t,e,i){function n(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=r&&void 0===e?o:e,this}var r=i(32),o="__lodash_hash_undefined__";t.exports=n},function(t,e,i){function n(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}var r=i(33);t.exports=n},function(t,e){function i(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=i},function(t,e,i){function n(t){return r(this,t).get(t)}var r=i(33);t.exports=n},function(t,e,i){function n(t){return r(this,t).has(t)}var r=i(33);t.exports=n},function(t,e,i){function n(t,e){var i=r(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this}var r=i(33);t.exports=n},function(t,e,i){function n(t,e){return t&&r(e,o(e),t)}var r=i(13),o=i(34);t.exports=n},function(t,e,i){function n(t){if(!r(t))return s(t);var e=o(t),i=[];for(var n in t)("constructor"!=n||!e&&h.call(t,n))&&i.push(n);return i}var r=i(4),o=i(48),s=i(231),a=Object.prototype,h=a.hasOwnProperty;t.exports=n},function(t,e){function i(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}t.exports=i},function(t,e,i){function n(t,e){return r(t,o(t),e)}var r=i(13),o=i(51);t.exports=n},function(t,e){function i(t,e){for(var i=-1,n=null==t?0:t.length,r=0,o=[];++i<n;){var s=t[i];e(s,i,t)&&(o[r++]=s)}return o}t.exports=i},function(t,e,i){function n(t,e){return r(t,o(t),e)}var r=i(13),o=i(100);t.exports=n},function(t,e,i){function n(t){return r(t,s,o)}var r=i(102),o=i(100),s=i(34);t.exports=n},function(t,e,i){var n=i(8),r=i(1),o=n(r,"DataView");t.exports=o},function(t,e,i){var n=i(8),r=i(1),o=n(r,"Promise");t.exports=o},function(t,e,i){var n=i(8),r=i(1),o=n(r,"Set");t.exports=o},function(t,e){function i(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&r.call(t,"index")&&(i.index=t.index,i.input=t.input),i}var n=Object.prototype,r=n.hasOwnProperty;t.exports=i},function(t,e,i){function n(t,e,i){var n=t.constructor;switch(e){case g:return r(t);case l:case u:return new n(+t);case y:return o(t,i);case b:case _:case w:case x:case S:case k:case E:case M:case T:return h(t,i);case d:return new n;case c:case m:return new n(t);case f:return s(t);case p:return new n;case v:return a(t)}}var r=i(54),o=i(241),s=i(242),a=i(243),h=i(104),l="[object Boolean]",u="[object Date]",d="[object Map]",c="[object Number]",f="[object RegExp]",p="[object Set]",m="[object String]",v="[object Symbol]",g="[object ArrayBuffer]",y="[object DataView]",b="[object Float32Array]",_="[object Float64Array]",w="[object Int8Array]",x="[object Int16Array]",S="[object Int32Array]",k="[object Uint8Array]",E="[object Uint8ClampedArray]",M="[object Uint16Array]",T="[object Uint32Array]";t.exports=n},function(t,e,i){function n(t,e){var i=e?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}var r=i(54);t.exports=n},function(t,e){function i(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}var n=/\w*$/;t.exports=i},function(t,e,i){function n(t){return s?Object(s.call(t)):{}}var r=i(10),o=r?r.prototype:void 0,s=o?o.valueOf:void 0;t.exports=n},function(t,e,i){var n=i(245),r=i(27),o=i(47),s=o&&o.isMap,a=s?r(s):n;t.exports=a},function(t,e,i){function n(t){return o(t)&&r(t)==s}var r=i(15),o=i(5),s="[object Map]";t.exports=n},function(t,e,i){var n=i(247),r=i(27),o=i(47),s=o&&o.isSet,a=s?r(s):n;t.exports=a},function(t,e,i){function n(t){return o(t)&&r(t)==s}var r=i(15),o=i(5),s="[object Set]";t.exports=n},function(t,e,i){function n(t,e,i){e=i?void 0:e;var s=r(t,o,void 0,void 0,void 0,void 0,void 0,e);return s.placeholder=n.placeholder,s}var r=i(37),o=8;n.placeholder={},t.exports=n},function(t,e,i){function n(t){if(!o(t))return!1;var e=r(t);return e==h||e==a||"string"==typeof t.message&&"string"==typeof t.name&&!s(t)}var r=i(9),o=i(5),s=i(106),a="[object DOMException]",h="[object Error]";t.exports=n},function(t,e,i){function n(t){return o(t)&&r(t)==s}var r=i(15),o=i(5),s="[object WeakMap]";t.exports=n},function(t,e,i){function n(t){return o("function"==typeof t?t:r(t,s))}var r=i(97),o=i(252),s=1;t.exports=n},function(t,e,i){function n(t){return"function"==typeof t?t:null==t?s:"object"==typeof t?a(t)?o(t[0],t[1]):r(t):h(t)}var r=i(253),o=i(264),s=i(18),a=i(2),h=i(272);t.exports=n},function(t,e,i){function n(t){var e=o(t);return 1==e.length&&e[0][2]?s(e[0][0],e[0][1]):function(i){return i===t||r(i,t,e)}}var r=i(254),o=i(263),s=i(111);t.exports=n},function(t,e,i){function n(t,e,i,n){var h=i.length,l=h,u=!n;if(null==t)return!l;for(t=Object(t);h--;){var d=i[h];if(u&&d[2]?d[1]!==t[d[0]]:!(d[0]in t))return!1}for(;++h<l;){d=i[h];var c=d[0],f=t[c],p=d[1];if(u&&d[2]){if(void 0===f&&!(c in t))return!1}else{var m=new r;if(n)var v=n(f,p,c,t,e,m);if(!(void 0===v?o(p,f,s|a,n,m):v))return!1}}return!0}var r=i(29),o=i(55),s=1,a=2;t.exports=n},function(t,e,i){function n(t,e,i,n,v,y){var b=l(t),_=l(e),w=b?p:h(t),x=_?p:h(e);w=w==f?m:w,x=x==f?m:x;var S=w==m,k=x==m,E=w==x;if(E&&u(t)){if(!u(e))return!1;b=!0,S=!1}if(E&&!S)return y||(y=new r),b||d(t)?o(t,e,i,n,v,y):s(t,e,w,i,n,v,y);if(!(i&c)){var M=S&&g.call(t,"__wrapped__"),T=k&&g.call(e,"__wrapped__");if(M||T){var C=M?t.value():t,O=T?e.value():e;return y||(y=new r),v(C,O,i,n,y)}}return!!E&&(y||(y=new r),a(t,e,i,n,v,y))}var r=i(29),o=i(107),s=i(259),a=i(262),h=i(15),l=i(2),u=i(26),d=i(45),c=1,f="[object Arguments]",p="[object Array]",m="[object Object]",v=Object.prototype,g=v.hasOwnProperty;t.exports=n},function(t,e){function i(t){return this.__data__.set(t,n),this}var n="__lodash_hash_undefined__";t.exports=i},function(t,e){function i(t){return this.__data__.has(t)}t.exports=i},function(t,e){function i(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}t.exports=i},function(t,e,i){function n(t,e,i,n,r,S,E){switch(i){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case w:return!(t.byteLength!=e.byteLength||!S(new o(t),new o(e)));case c:case f:case v:return s(+t,+e);case p:return t.name==e.name&&t.message==e.message;case g:case b:return t==e+"";case m:var M=h;case y:var T=n&u;if(M||(M=l),t.size!=e.size&&!T)return!1;var C=E.get(t);if(C)return C==e;n|=d,E.set(t,e);var O=a(M(t),M(e),n,r,S,E);return E.delete(t),O;case _:if(k)return k.call(t)==k.call(e)}return!1}var r=i(10),o=i(103),s=i(14),a=i(107),h=i(260),l=i(261),u=1,d=2,c="[object Boolean]",f="[object Date]",p="[object Error]",m="[object Map]",v="[object Number]",g="[object RegExp]",y="[object Set]",b="[object String]",_="[object Symbol]",w="[object ArrayBuffer]",x="[object DataView]",S=r?r.prototype:void 0,k=S?S.valueOf:void 0;t.exports=n},function(t,e){function i(t){var e=-1,i=Array(t.size);return t.forEach(function(t,n){i[++e]=[n,t]}),i}t.exports=i},function(t,e){function i(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=t}),i}t.exports=i},function(t,e,i){function n(t,e,i,n,s,h){var l=i&o,u=r(t),d=u.length;if(d!=r(e).length&&!l)return!1;for(var c=d;c--;){var f=u[c];if(!(l?f in e:a.call(e,f)))return!1}var p=h.get(t);if(p&&h.get(e))return p==e;var m=!0;h.set(t,e),h.set(e,t);for(var v=l;++c<d;){f=u[c];var g=t[f],y=e[f];if(n)var b=l?n(y,g,f,e,t,h):n(g,y,f,t,e,h);if(!(void 0===b?g===y||s(g,y,i,n,h):b)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var _=t.constructor,w=e.constructor;_!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w)&&(m=!1)}return h.delete(t),h.delete(e),m}var r=i(101),o=1,s=Object.prototype,a=s.hasOwnProperty;t.exports=n},function(t,e,i){function n(t){for(var e=o(t),i=e.length;i--;){var n=e[i],s=t[n];e[i]=[n,s,r(s)]}return e}var r=i(110),o=i(24);t.exports=n},function(t,e,i){function n(t,e){return a(t)&&h(e)?l(u(t),e):function(i){var n=o(i,t);return void 0===n&&n===e?s(i,t):r(e,n,d|c)}}var r=i(55),o=i(265),s=i(269),a=i(56),h=i(110),l=i(111),u=i(16),d=1,c=2;t.exports=n},function(t,e,i){function n(t,e,i){var n=null==t?void 0:r(t,e);return void 0===n?i:n}var r=i(112);t.exports=n},function(t,e,i){function n(t){var e=r(t,function(t){return i.size===o&&i.clear(),t}),i=e.cache;return e}var r=i(267),o=500;t.exports=n},function(t,e,i){function n(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(o);var i=function(){var n=arguments,r=e?e.apply(this,n):n[0],o=i.cache;if(o.has(r))return o.get(r);var s=t.apply(this,n);return i.cache=o.set(r,s)||o,s};return i.cache=new(n.Cache||r),i}var r=i(50),o="Expected a function";n.Cache=r,t.exports=n},function(t,e,i){function n(t){if("string"==typeof t)return t;if(s(t))return o(t,n)+"";if(a(t))return u?u.call(t):"";var e=t+"";return"0"==e&&1/t==-h?"-0":e}var r=i(10),o=i(57),s=i(2),a=i(12),h=1/0,l=r?r.prototype:void 0,u=l?l.toString:void 0;t.exports=n},function(t,e,i){function n(t,e){return null!=t&&o(t,e,r)}var r=i(270),o=i(271);t.exports=n},function(t,e){function i(t,e){return null!=t&&e in Object(t)}t.exports=i},function(t,e,i){function n(t,e,i){e=r(e,t);for(var n=-1,u=e.length,d=!1;++n<u;){var c=l(e[n]);if(!(d=null!=t&&i(t,c)))break;t=t[c]}return d||++n!=u?d:!!(u=null==t?0:t.length)&&h(u)&&a(c,u)&&(s(t)||o(t))}var r=i(113),o=i(25),s=i(2),a=i(23),h=i(46),l=i(16);t.exports=n},function(t,e,i){function n(t){return s(t)?r(a(t)):o(t)}var r=i(273),o=i(274),s=i(56),a=i(16);t.exports=n},function(t,e){function i(t){return function(e){return null==e?void 0:e[t]}}t.exports=i},function(t,e,i){function n(t){return function(e){return r(e,t)}}var r=i(112);t.exports=n},function(t,e,i){var n=i(37),r=i(276),o=r(function(t,e){return n(t,256,void 0,void 0,void 0,e)});t.exports=o},function(t,e,i){function n(t){return s(o(t,void 0,r),t+"")}var r=i(277),o=i(117),s=i(40);t.exports=n},function(t,e,i){function n(t){return(null==t?0:t.length)?r(t,1):[]}var r=i(116);t.exports=n},function(t,e,i){function n(t){return s(t)||o(t)||!!(a&&t&&t[a])}var r=i(10),o=i(25),s=i(2),a=r?r.isConcatSpreadable:void 0;t.exports=n},function(t,e,i){function n(t){return s(t)?r(t,l):a(t)?[t]:o(h(u(t)))}var r=i(57),o=i(11),s=i(2),a=i(12),h=i(114),l=i(16),u=i(115);t.exports=n},function(t,e,i){var n=i(22),r=i(58),o=i(281),s=i(286),a=r(function(t){return t.push(void 0,o),n(s,void 0,t)});t.exports=a},function(t,e,i){function n(t,e,i,s,a,h){return o(t)&&o(e)&&(h.set(e,t),r(t,e,void 0,n,h),h.delete(e)),t}var r=i(118),o=i(4);t.exports=n},function(t,e,i){var n=i(283),r=n();t.exports=r},function(t,e){function i(t){return function(e,i,n){for(var r=-1,o=Object(e),s=n(e),a=s.length;a--;){var h=s[t?a:++r];if(!1===i(o[h],h,o))break}return e}}t.exports=i},function(t,e,i){function n(t,e,i,n,b,_,w){var x=g(t,i),S=g(e,i),k=w.get(S);if(k)return void r(t,i,k);var E=_?_(x,S,i+"",t,e,w):void 0,M=void 0===E;if(M){var T=u(S),C=!T&&c(S),O=!T&&!C&&v(S);E=S,T||C||O?u(x)?E=x:d(x)?E=a(x):C?(M=!1,E=o(S,!0)):O?(M=!1,E=s(S,!0)):E=[]:m(S)||l(S)?(E=x,l(x)?E=y(x):p(x)&&!f(x)||(E=h(S))):M=!1}M&&(w.set(S,E),b(E,S,n,_,w),w.delete(S)),r(t,i,E)}var r=i(119),o=i(98),s=i(104),a=i(11),h=i(105),l=i(25),u=i(2),d=i(120),c=i(26),f=i(19),p=i(4),m=i(106),v=i(45),g=i(121),y=i(285);t.exports=n},function(t,e,i){function n(t){return r(t,o(t))}var r=i(13),o=i(34);t.exports=n},function(t,e,i){var n=i(118),r=i(287),o=r(function(t,e,i,r){n(t,e,i,r)});t.exports=o},function(t,e,i){function n(t){return r(function(e,i){var n=-1,r=i.length,s=r>1?i[r-1]:void 0,a=r>2?i[2]:void 0;for(s=t.length>3&&"function"==typeof s?(r--,s):void 0,a&&o(i[0],i[1],a)&&(s=r<3?void 0:s,r=1),e=Object(e);++n<r;){var h=i[n];h&&t(e,h,n,s)}return e})}var r=i(58),o=i(288);t.exports=n},function(t,e,i){function n(t,e,i){if(!a(i))return!1;var n=typeof e;return!!("number"==n?o(i)&&s(e,i.length):"string"==n&&e in i)&&r(i[e],t)}var r=i(14),o=i(28),s=i(23),a=i(4);t.exports=n},function(t,e,i){function n(t,e){return r(t,e)}var r=i(55);t.exports=n},function(t,e,i){var n=i(291),r=i(116),o=i(58),s=i(120),a=i(293),h=o(function(t,e){var i=a(e);return s(i)&&(i=void 0),s(t)?n(t,r(e,1,s,!0),void 0,i):[]});t.exports=h},function(t,e,i){function n(t,e,i,n){var d=-1,c=o,f=!0,p=t.length,m=[],v=e.length;if(!p)return m;i&&(e=a(e,h(i))),n?(c=s,f=!1):e.length>=u&&(c=l,f=!1,e=new r(e));t:for(;++d<p;){var g=t[d],y=null==i?g:i(g);if(g=n||0!==g?g:0,f&&y===y){for(var b=v;b--;)if(e[b]===y)continue t;m.push(g)}else c(e,y,n)||m.push(g)}return m}var r=i(108),o=i(89),s=i(292),a=i(57),h=i(27),l=i(109),u=200;t.exports=n},function(t,e){function i(t,e,i){for(var n=-1,r=null==t?0:t.length;++n<r;)if(i(e,t[n]))return!0;return!1}t.exports=i},function(t,e){function i(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}t.exports=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function n(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function r(t,e){return e={exports:{}},t(e,e.exports),e.exports}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t,e){var i=Object.keys(t);return Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(t)),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i}function h(t){for(var e,i=1;i<arguments.length;i++)e=null==arguments[i]?{}:arguments[i],i%2?a(e,!0).forEach(function(i){s(t,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):a(e).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))});return t}function l(t){return u(t)||d(t)||c()}function u(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function d(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(t,e){var i=e||0,n=fs;return n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]}function p(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0,i=2<arguments.length?arguments[2]:void 0,n=e&&i||0;"string"==typeof t&&(e="binary"===t?Array(16):void 0,t={});var r=t.random||(t.rng||ms)();if(r[6]=64|15&r[6],r[8]=128|63&r[8],e)for(var o=0;16>o;o++)e[n+o]=r[o];return e||f(r)}function m(t){return t instanceof Number||"number"==typeof t}function v(t){if(t)for(;!0===t.hasChildNodes();){var e=t.firstChild;e&&(v(e),t.removeChild(e))}}function g(t){return t instanceof String||"string"==typeof t}function y(t){return"object"===o(t)&&null!==t}function b(t){if(t instanceof Date)return!0;if(g(t)){if(bs.exec(t))return!0;if(!isNaN(Date.parse(t)))return!0}return!1}function _(t){return cs.isMoment(t)}function w(t,e,i,n){var r=!1;!0===n&&(r=null===e[i]&&void 0!==t[i]),r?delete t[i]:t[i]=e[i]}function x(t,e){var i=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];for(var n in t)if(void 0!==e[n])if(null===e[n]||"object"!==o(e[n]))w(t,e,n,i);else{var r=t[n],s=e[n];y(r)&&y(s)&&x(r,s,i)}}function S(t,e){if(!Array.isArray(t))throw new Error("Array with property names expected as first argument");for(var i=arguments.length,n=Array(2<i?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];for(var o,s=0,a=n;s<a.length;s++){o=a[s];for(var h,l=0;l<t.length;l++)h=t[l],o&&Object.prototype.hasOwnProperty.call(o,h)&&(e[h]=o[h])}return e}function k(t,e,i){var n=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3];if(Array.isArray(i))throw new TypeError("Arrays are not supported by deepExtend");for(var r,o=0;o<t.length;o++)if(r=t[o],Object.prototype.hasOwnProperty.call(i,r))if(i[r]&&i[r].constructor===Object)void 0===e[r]&&(e[r]={}),e[r].constructor===Object?M(e[r],i[r],!1,n):w(e,i,r,n);else{if(Array.isArray(i[r]))throw new TypeError("Arrays are not supported by deepExtend");w(e,i,r,n)}return e}function E(t,e,i){var n=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3];if(Array.isArray(i))throw new TypeError("Arrays are not supported by deepExtend");for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)&&-1===t.indexOf(r))if(i[r]&&i[r].constructor===Object)void 0===e[r]&&(e[r]={}),e[r].constructor===Object?M(e[r],i[r]):w(e,i,r,n);else if(Array.isArray(i[r])){e[r]=[];for(var o=0;o<i[r].length;o++)e[r].push(i[r][o])}else w(e,i,r,n);return e}function M(t,e){var i=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],n=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3];for(var r in e)(Object.prototype.hasOwnProperty.call(e,r)||!0===i)&&(e[r]&&Object.getPrototypeOf(e[r])===Object.prototype?void 0===t[r]?t[r]=M({},e[r],i):t[r]&&Object.getPrototypeOf(t[r])===Object.prototype?M(t[r],e[r],i):w(t,e,r,n):Array.isArray(e[r])?t[r]=e[r].slice():w(t,e,r,n));return t}function T(t,e){if(t.length!==e.length)return!1;for(var i=0,n=t.length;i<n;i++)if(t[i]!=e[i])return!1;return!0}function C(t,e){var i;if(void 0!==t){if(null===t)return null;if(!e)return t;if("string"!=typeof e&&!(e instanceof String))throw new Error("Type must be a string");switch(e){case"boolean":case"Boolean":return!!t;case"number":case"Number":return g(t)&&!isNaN(Date.parse(t))?cs(t).valueOf():+t.valueOf();case"string":case"String":return t+"";case"Date":if(m(t))return new Date(t);if(t instanceof Date)return new Date(t.valueOf());if(_(t))return new Date(t.valueOf());if(g(t))return i=bs.exec(t),i?new Date(+i[1]):cs(new Date(t)).toDate();throw new Error("Cannot convert object of type "+O(t)+" to type Date");case"Moment":if(m(t))return cs(t);if(t instanceof Date)return cs(t.valueOf());if(_(t))return cs(t);if(g(t))return i=bs.exec(t),cs(i?+i[1]:t);throw new Error("Cannot convert object of type "+O(t)+" to type Date");case"ISODate":if(m(t))return new Date(t);if(t instanceof Date)return t.toISOString();if(_(t))return t.toDate().toISOString();if(g(t))return i=bs.exec(t),i?new Date(+i[1]).toISOString():cs(t).format();throw new Error("Cannot convert object of type "+O(t)+" to type ISODate");case"ASPDate":if(m(t))return"/Date("+t+")/";if(t instanceof Date||_(t))return"/Date("+t.valueOf()+")/";if(g(t)){i=bs.exec(t);return"/Date("+(i?new Date(+i[1]).valueOf():new Date(t).valueOf())+")/"}throw new Error("Cannot convert object of type "+O(t)+" to type ASPDate");default:throw new Error("Unknown type ".concat(e))}}}function O(t){var e=o(t);return"object"===e?null===t?"null":t instanceof Boolean?"Boolean":t instanceof Number?"Number":t instanceof String?"String":Array.isArray(t)?"Array":t instanceof Date?"Date":"Object":"number"===e?"Number":"boolean"===e?"Boolean":"string"===e?"String":void 0===e?"undefined":e}function P(t,e){return[].concat(l(t),[e])}function A(t){return t.slice()}function D(t){return t.getBoundingClientRect().left}function I(t){return t.getBoundingClientRect().right}function R(t){return t.getBoundingClientRect().top}function L(t,e){var i=t.className.split(" "),n=e.split(" ");i=i.concat(n.filter(function(t){return 0>i.indexOf(t)})),t.className=i.join(" ")}function N(t,e){var i=t.className.split(" "),n=e.split(" ");i=i.filter(function(t){return 0>n.indexOf(t)}),t.className=i.join(" ")}function F(t,e){if(Array.isArray(t))for(var i=t.length,n=0;n<i;n++)e(t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}function z(t,e,i){return t[e]!==i&&(t[e]=i,!0)}function B(t){var e=!1;return function(){e||(e=!0,requestAnimationFrame(function(){e=!1,t()}))}}function j(t,e,i,n){t.addEventListener?(void 0===n&&(n=!1),"mousewheel"===e&&0<=navigator.userAgent.indexOf("Firefox")&&(e="DOMMouseScroll"),t.addEventListener(e,i,n)):t.attachEvent("on"+e,i)}function U(t,e,i,n){t.removeEventListener?(void 0===n&&(n=!1),"mousewheel"===e&&0<=navigator.userAgent.indexOf("Firefox")&&(e="DOMMouseScroll"),t.removeEventListener(e,i,n)):t.detachEvent("on"+e,i)}function H(t){t||(t=window.event),t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}function V(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.event,e=null;return t&&(t.target?e=t.target:t.srcElement&&(e=t.srcElement)),e instanceof Element&&(null==e.nodeType||3!=e.nodeType||(e=e.parentNode)instanceof Element)?e:null}function G(t,e){for(var i=t;i;){if(i===e)return!0;if(!i.parentNode)return!1;i=i.parentNode}return!1}function W(t){var e;switch(t.length){case 3:case 4:return e=ws.exec(t),e?{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16)}:null;case 6:case 7:return e=_s.exec(t),e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null;default:return null}}function Y(t,e){if(-1!==t.indexOf("rgba"))return t;if(-1!==t.indexOf("rgb")){var i=t.substr(t.indexOf("(")+1).replace(")","").split(",");return"rgba("+i[0]+","+i[1]+","+i[2]+","+e+")"}var n=W(t);return null==n?t:"rgba("+n.r+","+n.g+","+n.b+","+e+")"}function $(t,e,i){return"#"+(16777216+(t<<16)+(e<<8)+i).toString(16).slice(1)}function q(t,e){var i=Math.min;if(g(t)){var n=t;if(it(n)){var r=n.substr(4).substr(0,n.length-5).split(",").map(function(t){return parseInt(t)});n=$(r[0],r[1],r[2])}if(!0===et(n)){var o=tt(n),s={h:o.h,s:.8*o.s,v:i(1,1.02*o.v)},a={h:o.h,s:i(1,1.25*o.s),v:.8*o.v},h=J(a.h,a.s,a.v),l=J(s.h,s.s,s.v);return{background:n,border:h,highlight:{background:l,border:h},hover:{background:l,border:h}}}return{background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}}}if(e){return{background:t.background||e.background,border:t.border||e.border,highlight:g(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||e.highlight.background,border:t.highlight&&t.highlight.border||e.highlight.border},hover:g(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||e.hover.border,background:t.hover&&t.hover.background||e.hover.background}}}return{background:t.background||void 0,border:t.border||void 0,highlight:g(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:g(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function X(t,e,i){var n=Math.max,r=Math.min;t/=255,e/=255,i/=255;var o=r(t,r(e,i)),s=n(t,n(e,i));if(o===s)return{h:0,s:0,v:o};var a=t===o?e-i:i===o?t-e:i-t;return{h:60*((t===o?3:i===o?1:5)-a/(s-o))/360,s:(s-o)/s,v:s}}function Z(t,e){var i=Ts.split(t.style.cssText),n=Ts.split(e),r=h({},i,{},n);t.style.cssText=Ts.join(r)}function K(t,e){var i=Ts.split(t.style.cssText),n=Ts.split(e);for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&delete i[r];t.style.cssText=Ts.join(i)}function Q(t,e,i){var n,r,o,s=Math.floor,a=s(6*t),h=6*t-a,l=i*(1-e),u=i*(1-h*e),d=i*(1-(1-h)*e);switch(a%6){case 0:n=i,r=d,o=l;break;case 1:n=u,r=i,o=l;break;case 2:n=l,r=i,o=d;break;case 3:n=l,r=u,o=i;break;case 4:n=d,r=l,o=i;break;case 5:n=i,r=l,o=u}return{r:s(255*n),g:s(255*r),b:s(255*o)}}function J(t,e,i){var n=Q(t,e,i);return $(n.r,n.g,n.b)}function tt(t){var e=W(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return X(e.r,e.g,e.b)}function et(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function it(t){return xs.test(t)}function nt(t){return Ss.test(t)}function rt(t,e){if(null!==e&&"object"===o(e)){for(var i=Object.create(e),n=0;n<t.length;n++)Object.prototype.hasOwnProperty.call(e,t[n])&&"object"==o(e[t[n]])&&(i[t[n]]=ot(e[t[n]]));return i}return null}function ot(t){if(null===t||"object"!==o(t))return null;if(t instanceof Element)return t;var e=Object.create(t);for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&"object"==o(t[i])&&(e[i]=ot(t[i]));return e}function st(t,e){for(var i=0;i<t.length;i++){var n=t[i],r=void 0;for(r=i;0<r&&0>e(n,t[r-1]);r--)t[r]=t[r-1];t[r]=n}return t}function at(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},r=function(t){return null!==t&&void 0!==t},s=function(t){return null!==t&&"object"===o(t)};if(!s(t))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!r(i))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");var a=e[i],h=s(n)&&!function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(n),l=h?n[i]:void 0,u=l?l.enabled:void 0;if(void 0!==a){if("boolean"==typeof a)return s(t[i])||(t[i]={}),void(t[i].enabled=a);if(null===a&&!s(t[i])){if(!r(l))return;t[i]=Object.create(l)}if(s(a)){var d=!0;void 0===a.enabled?void 0!==u&&(d=l.enabled):d=a.enabled,function(t,e,i){s(t[i])||(t[i]={});var n=e[i],r=t[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}(t,e,i),t[i].enabled=d}}}function ht(t,e,i,n){for(var r=0,o=0,s=t.length-1;o<=s&&r<1e4;){var a=Math.floor((o+s)/2),h=t[a],l=void 0===n?h[i]:h[i][n],u=e(l);if(0==u)return a;-1==u?o=a+1:s=a-1,r++}return-1}function lt(t,e,i,n,r){var o,s,a,h,l=Math.max,u=Math.min,d=Math.floor,c=0,f=0,p=t.length-1;for(r=null==r?function(t,e){return t==e?0:t<e?-1:1}:r;f<=p&&1e4>c;){if(h=d(.5*(p+f)),o=t[l(0,h-1)][i],s=t[h][i],a=t[u(t.length-1,h+1)][i],0==r(s,e))return h;if(0>r(o,e)&&0<r(s,e))return"before"==n?l(0,h-1):h;if(0>r(s,e)&&0<r(a,e))return"before"==n?h:u(t.length-1,h+1);0>r(s,e)?f=h+1:p=h-1,c++}return-1}function ut(){var t=document.createElement("p");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e);var i=t.offsetWidth;e.style.overflow="scroll";var n=t.offsetWidth;return i==n&&(n=e.clientWidth),document.body.removeChild(e),i-n}function dt(t,e){var i;Array.isArray(e)||(e=[e]);var n=!0,r=!1,o=void 0;try{for(var s,a,h=t[Symbol.iterator]();!(n=(s=h.next()).done);n=!0)if(a=s.value){i=a[e[0]];for(var l=1;l<e.length;l++)i&&(i=i[e[l]]);if("undefined"!=typeof i)break}}catch(t){r=!0,o=t}finally{try{n||null==h.return||h.return()}finally{if(r)throw o}}return i}function ct(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ft(t,e){return e={exports:{}},t(e,e.exports),e.exports}function pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mt(t,e){for(var i,n=0;n<e.length;n++)i=e[n],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function vt(t,e,i){return e&&mt(t.prototype,e),i&&mt(t,i),t}function gt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yt(t,e){return!e||"object"!==Ds(e)&&"function"!=typeof e?Ls(t):e}function bt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zs(t,e)}function _t(t,e){var i=e||0,n=js;return n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]}function wt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0,i=2<arguments.length?arguments[2]:void 0,n=e&&i||0;"string"==typeof t&&(e="binary"===t?Array(16):void 0,t={});var r=t.random||(t.rng||Hs)();if(r[6]=64|15&r[6],r[8]=128|63&r[8],e)for(var o=0;16>o;o++)e[n+o]=r[o];return e||_t(r)}function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function St(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function kt(t){return t instanceof Number||"number"==typeof t}function Et(t){return t instanceof String||"string"==typeof t}function Mt(t){return Ys.isMoment(t)}function Tt(t,e){var i;if(void 0!==t){if(null===t)return null;if(!e)return t;if("string"!=typeof e&&!(e instanceof String))throw new Error("Type must be a string");switch(e){case"boolean":case"Boolean":return!!t;case"number":case"Number":return Et(t)&&!isNaN(Date.parse(t))?Ys(t).valueOf():+t.valueOf();case"string":case"String":return t+"";case"Date":if(kt(t))return new Date(t);if(t instanceof Date)return new Date(t.valueOf());if(Mt(t))return new Date(t.valueOf());if(Et(t))return i=Js.exec(t),i?new Date(+i[1]):Ys(new Date(t)).toDate();throw new Error("Cannot convert object of type "+Ct(t)+" to type Date");case"Moment":if(kt(t))return Ys(t);if(t instanceof Date)return Ys(t.valueOf());if(Mt(t))return Ys(t);if(Et(t))return i=Js.exec(t),Ys(i?+i[1]:t);throw new Error("Cannot convert object of type "+Ct(t)+" to type Date");case"ISODate":if(kt(t))return new Date(t);if(t instanceof Date)return t.toISOString();if(Mt(t))return t.toDate().toISOString();if(Et(t))return i=Js.exec(t),i?new Date(+i[1]).toISOString():Ys(t).format();throw new Error("Cannot convert object of type "+Ct(t)+" to type ISODate");case"ASPDate":if(kt(t))return"/Date("+t+")/";if(t instanceof Date)return"/Date("+t.valueOf()+")/";if(Et(t)){i=Js.exec(t);return"/Date("+(i?new Date(+i[1]).valueOf():new Date(t).valueOf())+")/"}throw new Error("Cannot convert object of type "+Ct(t)+" to type ASPDate");default:throw new Error("Unknown type ".concat(e))}}}function Ct(t){var e=xt(t);return"object"===e?null===t?"null":t instanceof Boolean?"Boolean":t instanceof Number?"Number":t instanceof String?"String":Array.isArray(t)?"Array":t instanceof Date?"Date":"Object":"number"===e?"Number":"boolean"===e?"Boolean":"string"===e?"String":void 0===e?"undefined":e}function Ot(t){return"string"==typeof t||"number"==typeof t}function Pt(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function At(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function Dt(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function It(t){return ea(t)||ia(t)||na()}function Rt(t,e){var i=Object.keys(t);return Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(t)),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i}function Lt(t){for(var e,i=1;i<arguments.length;i++)e=null==arguments[i]?{}:arguments[i],i%2?Rt(e,!0).forEach(function(i){As(t,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Rt(e).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))});return t}function Nt(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function Ft(t,e){return e={exports:{}},t(e,e.exports),e.exports}function zt(t){return ma=t,Xt()}function Bt(){va=0,ga=ma.charAt(0)}function jt(){va++,ga=ma.charAt(va)}function Ut(){return ma.charAt(va+1)}function Ht(t){return _a.test(t)}function Vt(t,e){if(t||(t={}),e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function Gt(t,e,i){for(var n=e.split("."),r=t;n.length;){var o=n.shift();n.length?(!r[o]&&(r[o]={}),r=r[o]):r[o]=i}}function Wt(t,e){for(var i,n,r=null,o=[t],s=t;s.parent;)o.push(s.parent),s=s.parent;if(s.nodes)for(i=0,n=s.nodes.length;i<n;i++)if(e.id===s.nodes[i].id){r=s.nodes[i];break}for(r||(r={id:e.id},t.node&&(r.attr=Vt(r.attr,t.node))),i=o.length-1;0<=i;i--){var a=o[i];a.nodes||(a.nodes=[]),-1===a.nodes.indexOf(r)&&a.nodes.push(r)}e.attr&&(r.attr=Vt(r.attr,e.attr))}function Yt(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var i=Vt({},t.edge);e.attr=Vt(i,e.attr)}}function $t(t,e,i,n,r){var o={from:e,to:i,type:n};return t.edge&&(o.attr=Vt({},t.edge)),o.attr=Vt(o.attr||{},r),null!=r&&r.hasOwnProperty("arrows")&&null!=r.arrows&&(o.arrows={to:{enabled:!0,type:r.arrows.type}},r.arrows=null),o}function qt(){for(ba=fa.NULL,ya="";" "===ga||"\t"===ga||"\n"===ga||"\r"===ga;)jt();do{var t=!1;if("#"===ga){for(var e=va-1;" "===ma.charAt(e)||"\t"===ma.charAt(e);)e--;if("\n"===ma.charAt(e)||""===ma.charAt(e)){for(;""!=ga&&"\n"!=ga;)jt();t=!0}}if("/"===ga&&"/"===Ut()){for(;""!=ga&&"\n"!=ga;)jt();t=!0}if("/"===ga&&"*"===Ut()){for(;""!=ga;){if("*"===ga&&"/"===Ut()){jt(),jt();break}jt()}t=!0}for(;" "===ga||"\t"===ga||"\n"===ga||"\r"===ga;)jt()}while(t);if(""===ga)return void(ba=fa.DELIMITER);var i=ga+Ut();if(pa[i])return ba=fa.DELIMITER,ya=i,jt(),void jt();if(pa[ga])return ba=fa.DELIMITER,ya=ga,void jt();if(Ht(ga)||"-"===ga){for(ya+=ga,jt();Ht(ga);)ya+=ga,jt();return"false"===ya?ya=!1:"true"===ya?ya=!0:!isNaN(+ya)&&(ya=+ya),void(ba=fa.IDENTIFIER)}if('"'===ga){for(jt();""!=ga&&('"'!=ga||'"'===ga&&'"'===Ut());)'"'===ga?(ya+=ga,jt()):"\\"===ga&&"n"===Ut()?(ya+="\n",jt()):ya+=ga,jt();if('"'!=ga)throw ne('End of string " expected');return jt(),void(ba=fa.IDENTIFIER)}for(ba=fa.UNKNOWN;""!=ga;)ya+=ga,jt();throw new SyntaxError('Syntax error in part "'+re(ya,30)+'"')}function Xt(){var t={};if(Bt(),qt(),"strict"===ya&&(t.strict=!0,qt()),("graph"===ya||"digraph"===ya)&&(t.type=ya,qt()),ba===fa.IDENTIFIER&&(t.id=ya,qt()),"{"!=ya)throw ne("Angle bracket { expected");if(qt(),Zt(t),"}"!=ya)throw ne("Angle bracket } expected");if(qt(),""!==ya)throw ne("End of file expected");return qt(),delete t.node,delete t.edge,delete t.graph,t}function Zt(t){for(;""!==ya&&"}"!=ya;)Kt(t),";"===ya&&qt()}function Kt(t){var e=Qt(t);if(e)return void ee(t,e);if(!Jt(t)){if(ba!=fa.IDENTIFIER)throw ne("Identifier expected");var i=ya;if(qt(),"="===ya){if(qt(),ba!=fa.IDENTIFIER)throw ne("Identifier expected");t[i]=ya,qt()}else te(t,i)}}function Qt(t){var e=null;if("subgraph"===ya&&(e={},e.type="subgraph",qt(),ba===fa.IDENTIFIER&&(e.id=ya,qt())),"{"===ya){if(qt(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,Zt(e),"}"!=ya)throw ne("Angle bracket } expected");qt(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function Jt(t){return"node"===ya?(qt(),t.node=ie(),"node"):"edge"===ya?(qt(),t.edge=ie(),"edge"):"graph"===ya?(qt(),t.graph=ie(),"graph"):null}function te(t,e){var i={id:e},n=ie();n&&(i.attr=n),Wt(t,i),ee(t,e)}function ee(t,e){for(;"->"===ya||"--"===ya;){var i,n=ya;qt();var r=Qt(t);if(r)i=r;else{if(ba!=fa.IDENTIFIER)throw ne("Identifier or subgraph expected");i=ya,Wt(t,{id:i}),qt()}Yt(t,$t(t,e,i,n,ie())),e=i}}function ie(){for(var t,e=null,i={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},r=[],o=[];"["===ya;){for(qt(),e={};""!==ya&&"]"!=ya;){if(ba!=fa.IDENTIFIER)throw ne("Attribute name expected");var s=ya;if(qt(),"="!=ya)throw ne("Equal sign = expected");if(qt(),ba!=fa.IDENTIFIER)throw ne("Attribute value expected");var a=ya;"style"===s&&(a=i[a]);var h;"arrowhead"===s&&(h=n[a],s="arrows",a={to:{enabled:!0,type:h}}),"arrowtail"===s&&(h=n[a],s="arrows",a={from:{enabled:!0,type:h}}),r.push({attr:e,name:s,value:a}),o.push(s),qt(),","==ya&&qt()}if("]"!=ya)throw ne("Bracket ] expected");qt()}if(o.includes("dir")){var l={arrows:{}};for(t=0;t<r.length;t++)if("arrows"!==r[t].name)"dir"===r[t].name&&(l.dir=t);else if(null!=r[t].value.to)l.arrows.to=t;else{if(null==r[t].value.from)throw ne("Invalid value of arrows");l.arrows.from=t}var u=r[l.dir].value;if(!o.includes("arrows"))if("both"===u)r.push({attr:r[l.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),l.arrows.to=r.length-1,r.push({attr:r[l.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),l.arrows.from=r.length-1;else if("forward"===u)r.push({attr:r[l.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),l.arrows.to=r.length-1;else if("back"===u)r.push({attr:r[l.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),l.arrows.from=r.length-1;else{if("none"!==u)throw ne('Invalid dir type "'+u+'"');r.push({attr:r[l.dir].attr,name:"arrows",value:""}),l.arrows.to=r.length-1}var d,c;if("both"===u)l.arrows.to&&l.arrows.from?(c=r[l.arrows.to].value.to.type,d=r[l.arrows.from].value.from.type,r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:d}}},r.splice(l.arrows.from,1)):l.arrows.to?(c=r[l.arrows.to].value.to.type,d="arrow",r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:d}}}):l.arrows.from&&(c="arrow",d=r[l.arrows.from].value.from.type,r[l.arrows.from]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:d}}});else if("back"===u)l.arrows.to&&l.arrows.from?(c="",d=r[l.arrows.from].value.from.type,r[l.arrows.from]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:d}}}):l.arrows.to?(c="",d="arrow",l.arrows.from=l.arrows.to,r[l.arrows.from]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:d}}}):l.arrows.from&&(c="",d=r[l.arrows.from].value.from.type,r[l.arrows.to]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:d}}}),r[l.arrows.from]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{from:{enabled:!0,type:r[l.arrows.from].value.from.type}}};else if("none"===u){var f;f=l.arrows.to?l.arrows.to:l.arrows.from,r[f]={attr:r[f].attr,name:r[f].name,value:""}}else{if("forward"!==u)throw ne('Invalid dir type "'+u+'"');l.arrows.to&&l.arrows.from?(c=r[l.arrows.to].value.to.type,d="",r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:d}}}):l.arrows.to?(c=r[l.arrows.to].value.to.type,d="",r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:d}}}):l.arrows.from&&(c="arrow",d="",l.arrows.to=l.arrows.from,r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:d}}}),r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:r[l.arrows.to].value.to.type}}}}r.splice(l.dir,1)}var p;if(o.includes("penwidth")){var m=[];for(p=r.length,t=0;t<p;t++)"width"!==r[t].name&&("penwidth"===r[t].name&&(r[t].name="width"),m.push(r[t]));r=m}for(p=r.length,t=0;t<p;t++)Gt(r[t].attr,r[t].name,r[t].value);return e}function ne(t){return new SyntaxError(t+', got "'+re(ya,30)+'" (char '+va+")")}function re(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function oe(t,e,i){Array.isArray(t)?t.forEach(function(t){Array.isArray(e)?e.forEach(function(e){i(t,e)}):i(t,e)}):Array.isArray(e)?e.forEach(function(e){i(t,e)}):i(t,e)}function se(t,e,i){for(var n,r=e.split("."),o=r.pop(),s=t,a=0;a<r.length;a++)n=r[a],n in s||(s[n]={}),s=s[n];return s[o]=i,t}function ae(t,e){var i={};for(var n in t)if(t.hasOwnProperty(n)){var r=e[n];Array.isArray(r)?r.forEach(function(e){se(i,e,t[n])}):"string"==typeof r?se(i,r,t[n]):se(i,n,t[n])}return i}function he(t){var e=zt(t),i={nodes:[],edges:[],options:{}};if(e.nodes&&e.nodes.forEach(function(t){var e={id:t.id,label:(t.label||t.id)+""};Vt(e,ae(t.attr,da)),e.image&&(e.shape="image"),i.nodes.push(e)}),e.edges){var n=function(t){var e={from:t.from,to:t.to};return Vt(e,ae(t.attr,ca)),null==e.arrows&&"->"===t.type&&(e.arrows="to"),e};e.edges.forEach(function(t){var e,r;e=t.from instanceof Object?t.from.nodes:{id:t.from},r=t.to instanceof Object?t.to.nodes:{id:t.to},t.from instanceof Object&&t.from.edges&&t.from.edges.forEach(function(t){var e=n(t);i.edges.push(e)}),oe(e,r,function(e,r){var o=$t(i,e.id,r.id,t.type,t.attr),s=n(o);i.edges.push(s)}),t.to instanceof Object&&t.to.edges&&t.to.edges.forEach(function(t){var e=n(t);i.edges.push(e)})})}return e.attr&&(i.options=e.attr),i}function le(t,e){var i={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};null!=e&&(null!=e.fixed&&(i.nodes.fixed=e.fixed),null!=e.parseColor&&(i.nodes.parseColor=e.parseColor),null!=e.inheritColor&&(i.edges.inheritColor=e.inheritColor));var n=t.edges,r=n.map(function(t){var e={from:t.source,id:t.id,to:t.target};return null!=t.attributes&&(e.attributes=t.attributes),null!=t.label&&(e.label=t.label),null!=t.attributes&&null!=t.attributes.title&&(e.title=t.attributes.title),"Directed"===t.type&&(e.arrows="to"),t.color&&!1===i.edges.inheritColor&&(e.color=t.color),e});return{nodes:t.nodes.map(function(t){var e={id:t.id,fixed:i.nodes.fixed&&null!=t.x&&null!=t.y};return null!=t.attributes&&(e.attributes=t.attributes),null!=t.label&&(e.label=t.label),null!=t.size&&(e.size=t.size),null!=t.attributes&&null!=t.attributes.title&&(e.title=t.attributes.title),null!=t.title&&(e.title=t.title),null!=t.x&&(e.x=t.x),null!=t.y&&(e.y=t.y),null!=t.color&&(!0===i.nodes.parseColor?e.color=t.color:e.color={background:t.color,border:t.color,highlight:{background:t.color,border:t.color},hover:{background:t.color,border:t.color}}),e}),edges:r}}function ue(){return ue=Object.assign||function(t){for(var e,i=1;i<arguments.length;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},ue.apply(this,arguments)}function de(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function ce(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fe(t,e){for(var i,n,r=e[0].toUpperCase()+e.slice(1),o=0;o<Aa.length;){if(i=Aa[o],(n=i?i+r:e)in t)return n;o++}}function pe(t,e,i){if(t)if(t.forEach)t.forEach(e,i);else if(void 0!==t.length)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(var n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function me(t,e){return typeof t===Ia?t.apply(e?e[0]||void 0:void 0,e):t}function ve(t,e){return-1<t.indexOf(e)}function ge(t){if(ve(t,Ha))return Ha;var e=ve(t,Va),i=ve(t,Ga);return e&&i?Ha:e||i?e?Va:Ga:ve(t,Ua)?Ua:ja}function ye(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function be(t){var e=t.length;if(1===e)return{x:Ra(t[0].clientX),y:Ra(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:Ra(i/e),y:Ra(n/e)}}function _e(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:Ra(t.pointers[i].clientX),clientY:Ra(t.pointers[i].clientY)},i++;return{timeStamp:Na(),pointers:e,center:be(e),deltaX:t.deltaX,deltaY:t.deltaY}}function we(t,e,i){i||(i=dh);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function xe(t,e,i){i||(i=dh);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}function Se(t,e){return t===e?nh:La(t)>=La(e)?0>t?rh:oh:0>e?sh:ah}function ke(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};(e.eventType===Ja||o.eventType===eh)&&(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}function Ee(t,e,i){return{x:e/t||0,y:i/t||0}}function Me(t,e){return we(e[0],e[1],ch)/we(t[0],t[1],ch)}function Te(t,e){return xe(e[1],e[0],ch)+xe(t[1],t[0],ch)}function Ce(t,e){var i,n,r,o,s=t.lastInterval||e,a=e.timeStamp-s.timeStamp;if(e.eventType!==ih&&(a>Qa||void 0===s.velocity)){var h=e.deltaX-s.deltaX,l=e.deltaY-s.deltaY,u=Ee(a,h,l);n=u.x,r=u.y,i=La(u.x)>La(u.y)?u.x:u.y,o=Se(h,l),t.lastInterval=e}else i=s.velocity,n=s.velocityX,r=s.velocityY,o=s.direction;e.velocity=i,e.velocityX=n,e.velocityY=r,e.direction=o}function Oe(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=_e(e)),1<r&&!i.firstMultiple?i.firstMultiple=_e(e):1===r&&(i.firstMultiple=!1);var o=i.firstInput,s=i.firstMultiple,a=s?s.center:o.center,h=e.center=be(n);e.timeStamp=Na(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=xe(a,h),e.distance=we(a,h),ke(i,e),e.offsetDirection=Se(e.deltaX,e.deltaY);var l=Ee(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=La(l.x)>La(l.y)?l.x:l.y,e.scale=s?Me(s.pointers,n):1,e.rotation=s?Te(s.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,Ce(i,e);var u=t.element;ye(e.srcEvent.target,u)&&(u=e.srcEvent.target),e.target=u}function Pe(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,o=e&Ja&&0==n-r;i.isFirst=!!o,i.isFinal=!!(e&(eh|ih)&&0==n-r),o&&(t.session={}),i.eventType=e,Oe(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function Ae(t){return t.trim().split(/\s+/g)}function De(t,e,i){pe(Ae(e),function(e){t.addEventListener(e,i,!1)})}function Ie(t,e,i){pe(Ae(e),function(e){t.removeEventListener(e,i,!1)})}function Re(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}function Le(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function Ne(t){return Array.prototype.slice.call(t,0)}function Fe(t,e,i){for(var n,r=[],o=[],s=0;s<t.length;)n=e?t[s][e]:t[s],0>Le(o,n)&&r.push(t[s]),o[s]=n,s++;return i&&(r=e?r.sort(function(t,i){return t[e]>i[e]}):r.sort()),r}function ze(t,e){var i=Ne(t.touches),n=this.targetIds;if(e&(Ja|th)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,o,s=Ne(t.changedTouches),a=[],h=this.target;if(o=i.filter(function(t){return ye(t.target,h)}),e===Ja)for(r=0;r<o.length;)n[o[r].identifier]=!0,r++;for(r=0;r<s.length;)n[s[r].identifier]&&a.push(s[r]),e&(eh|ih)&&delete n[s[r].identifier],r++;return a.length?[Fe(o.concat(a),"identifier",!0),a]:void 0}function Be(t){var e=t.changedPointers,i=e[0];if(i.identifier===this.primaryTouch){var n={x:i.clientX,y:i.clientY},r=this.lastTouches;this.lastTouches.push(n);var o=function(){var t=r.indexOf(n);-1<t&&r.splice(t,1)};setTimeout(o,Th)}}function je(t,e){t&Ja?(this.primaryTouch=e.changedPointers[0].identifier,Be.call(this,e)):t&(eh|ih)&&Be.call(this,e)}function Ue(t){for(var e=Math.abs,i=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var o=this.lastTouches[r],s=e(i-o.x),a=e(n-o.y);if(s<=Ch&&a<=Ch)return!0}return!1}function He(t){var e=t.options.inputClass;return new(e||(qa?bh:Xa?xh:$a?Oh:Mh))(t,Pe)}function Ve(t,e,i){return!!Array.isArray(t)&&(pe(t,i[e],i),!0)}function Ge(){return Nh++}function We(t,e){var i=e.manager;return i?i.get(t):t}function Ye(t){return t&Lh?"cancel":t&Ih?"end":t&Dh?"move":t&Ah?"start":""}function $e(t,e){var i=t.element;if(i.style){var n;pe(t.options.cssProps,function(r,o){n=fe(i.style,o),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function qe(t,e){var i=document.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}function Xe(t,e){var i=Ne(t.touches),n=Ne(t.changedTouches);return e&(eh|ih)&&(i=Fe(i.concat(n),"identifier",!0)),[i,n]}function Ze(t){return t===ah?"down":t===sh?"up":t===rh?"left":t===oh?"right":""}function Ke(t,e,i){return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,"DEPRECATED METHOD: "+e+"\n"+i+" AT \n",r),t.apply(this,arguments)}}function Qe(t,e,i){var n,r=e.prototype;n=t.prototype=Object.create(r),n.constructor=t,n._super=r,i&&Pa(n,i)}function Je(t,e){return function(){return t.apply(e,arguments)}}function ti(t){this.active=!1,this.dom={container:t},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=tl(this.dom.overlay),this.hammer.on("tap",this._onTapOverlay.bind(this));var e=this;["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(function(t){e.hammer.on(t,function(t){t.stopPropagation()})}),document&&document.body&&(this.onClick=function(i){ei(i.target,t)||e.deactivate()},document.body.addEventListener("click",this.onClick)),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=Ta(),this.escListener=this.deactivate.bind(this)}function ei(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function ii(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ni(t,e){for(var i,n=0;n<e.length;n++)i=e[n],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function ri(t,e,i){return e&&ni(t.prototype,e),i&&ni(t,i),t}function oi(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function si(t){if(Array.isArray(t))return t}function ai(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!(e&&i.length===e));n=!0);}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return i}function hi(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function li(t,e){return dl(t)||cl(t,e)||fl()}function ui(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function di(t,e){return!e||"object"!==ml(e)&&"function"!=typeof e?Sl(t):e}function ci(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ml(t,e)}function fi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function pi(t){for(var e,i=1;i<arguments.length;i++)e=null==arguments[i]?{}:arguments[i],i%2?fi(e,!0).forEach(function(i){ul(t,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):fi(e).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))});return t}function mi(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=El(t)););return t}function vi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function gi(t){for(var e,i=1;i<arguments.length;i++)e=null==arguments[i]?{}:arguments[i],i%2?vi(e,!0).forEach(function(i){ul(t,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):vi(e).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))});return t}function yi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function bi(t){for(var e,i=1;i<arguments.length;i++)e=null==arguments[i]?{}:arguments[i],i%2?yi(e,!0).forEach(function(i){ul(t,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):yi(e).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))});return t}function _i(){var t;void 0!==window&&(t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),window.requestAnimationFrame=void 0===t?function(t){t()}:t}function wi(t,e,i){var n=this;if(!(this instanceof wi))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:rl,clickToUse:!1},Os.extend(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this),once:this.once.bind(this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}}},this.bindEventListeners(),this.images=new hl(function(){return n.body.emitter.emit("_requestRedraw")}),this.groups=new ll,this.canvas=new Lu(this.body),this.selectionHandler=new ju(this.body,this.canvas),this.interactionHandler=new Bu(this.body,this.canvas,this.selectionHandler),this.view=new Nu(this.body,this.canvas),this.renderer=new Iu(this.body,this.canvas),this.physics=new Ou(this.body),this.layoutEngine=new $u(this.body),this.clustering=new Du(this.body),this.manipulation=new qu(this.body,this.canvas,this.selectionHandler),this.nodesHandler=new Zl(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new _u(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new ad(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(i),this.setData(e)}i.d(e,"DOMutil",function(){return vd}),i.d(e,"DataSet",function(){return sa}),i.d(e,"DataView",function(){return aa}),i.d(e,"Hammer",function(){return el}),i.d(e,"Network",function(){return wi}),i.d(e,"Queue",function(){return ta}),i.d(e,"data",function(){return la}),i.d(e,"keycharm",function(){return Ca}),i.d(e,"moment",function(){return bd}),i.d(e,"network",function(){return _d}),i.d(e,"util",function(){return Ps});var xi=("undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof t&&("undefined"==typeof self||self):window:globalThis,r(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),Si=r(function(t){var e=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=e)}),ki=(Si.version,r(function(t){var e=xi["__core-js_shared__"]||(xi["__core-js_shared__"]={});(t.exports=function(t,i){return e[t]||(e[t]=void 0===i?{}:i)})("versions",[]).push({version:Si.version,mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})})),Ei=0,Mi=Math.random(),Ti=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++Ei+Mi).toString(36))},Ci=r(function(t){var e=ki("wks"),i=xi.Symbol,n="function"==typeof i;(t.exports=function(t){return e[t]||(e[t]=n&&i[t]||(n?i:Ti)("Symbol."+t))}).store=e}),Oi=Ci,Pi={f:Oi},Ai=function(t){return"object"==typeof t?null!==t:"function"==typeof t},Di=function(t){if(!Ai(t))throw TypeError(t+" is not an object!");return t},Ii=function(t){try{return!!t()}catch(t){return!0}},Ri=!Ii(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),Li=xi.document,Ni=Ai(Li)&&Ai(Li.createElement),Fi=function(t){return Ni?Li.createElement(t):{}},zi=!Ri&&!Ii(function(){return 7!=Object.defineProperty(Fi("div"),"a",{get:function(){return 7}}).a}),Bi=function(t,e){if(!Ai(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!Ai(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!Ai(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!Ai(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")},ji=Object.defineProperty,Ui=Ri?Object.defineProperty:function(t,e,i){if(Di(t),e=Bi(e,!0),Di(i),zi)try{return ji(t,e,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t},Hi={f:Ui},Vi=Hi.f,Gi=function(t){var e=Si.Symbol||(Si.Symbol=xi.Symbol||{});"_"==t.charAt(0)||t in e||Vi(e,t,{value:Pi.f(t)})};Gi("asyncIterator");var Wi={}.hasOwnProperty,Yi=function(t,e){return Wi.call(t,e)},$i=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},qi=Ri?function(t,e,i){return Hi.f(t,e,$i(1,i))}:function(t,e,i){return t[e]=i,t},Xi=ki("native-function-to-string",Function.toString),Zi=r(function(t){var e=Ti("src"),i="toString",n=(""+Xi).split(i);Si.inspectSource=function(t){return Xi.call(t)},(t.exports=function(t,i,r,o){var s="function"==typeof r;s&&(Yi(r,"name")||qi(r,"name",i)),t[i]===r||(s&&(Yi(r,e)||qi(r,e,t[i]?""+t[i]:n.join(i+""))),t===xi?t[i]=r:o?t[i]?t[i]=r:qi(t,i,r):(delete t[i],qi(t,i,r)))})(Function.prototype,i,function(){return"function"==typeof this&&this[e]||Xi.call(this)})}),Ki=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},Qi=function(t,e,i){return Ki(t),void 0===e?t:1===i?function(i){return t.call(e,i)}:2===i?function(i,n){return t.call(e,i,n)}:3===i?function(i,n,r){return t.call(e,i,n,r)}:function(){return t.apply(e,arguments)}},Ji=function(t,e,i){var n,r,o,s,a=t&Ji.F,h=t&Ji.G,l=t&Ji.S,u=t&Ji.P,d=t&Ji.B,c=h?xi:l?xi[e]||(xi[e]={}):(xi[e]||{}).prototype,f=h?Si:Si[e]||(Si[e]={}),p=f.prototype||(f.prototype={});for(n in h&&(i=e),i)r=!a&&c&&void 0!==c[n],o=(r?c:i)[n],s=d&&r?Qi(o,xi):u&&"function"==typeof o?Qi(Function.call,o):o,c&&Zi(c,n,o,t&Ji.U),f[n]!=o&&qi(f,n,s),u&&p[n]!=o&&(p[n]=o)};xi.core=Si,Ji.F=1,Ji.G=2,Ji.S=4,Ji.P=8,Ji.B=16,Ji.W=32,Ji.U=64,Ji.R=128;var tn=Ji,en=r(function(t){var e=Ti("meta"),i=Hi.f,n=0,r=Object.isExtensible||function(){return!0},o=!Ii(function(){return r(Object.preventExtensions({}))}),s=function(t){i(t,e,{value:{i:"O"+ ++n,w:{}}})},a=t.exports={KEY:e,NEED:!1,fastKey:function(t,i){if(!Ai(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!Yi(t,e)){if(!r(t))return"F";if(!i)return"E";s(t)}return t[e].i},getWeak:function(t,i){if(!Yi(t,e)){if(!r(t))return!0;if(!i)return!1;s(t)}return t[e].w},onFreeze:function(t){return o&&a.NEED&&r(t)&&!Yi(t,e)&&s(t),t}}}),nn=(en.KEY,en.NEED,en.fastKey,en.getWeak,en.onFreeze,Hi.f),rn=Ci("toStringTag"),on=function(t,e,i){t&&!Yi(t=i?t:t.prototype,rn)&&nn(t,rn,{configurable:!0,value:e})},sn={}.toString,an=function(t){return sn.call(t).slice(8,-1)},hn=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==an(t)?t.split(""):Object(t)},ln=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},un=function(t){return hn(ln(t))},dn=Math.ceil,cn=Math.floor,fn=function(t){return isNaN(t=+t)?0:(0<t?cn:dn)(t)},pn=Math.min,mn=function(t){return 0<t?pn(fn(t),9007199254740991):0},vn=Math.max,gn=Math.min,yn=function(t,e){return t=fn(t),0>t?vn(t+e,0):gn(t,e)},bn=ki("keys"),_n=function(t){return bn[t]||(bn[t]=Ti(t))},wn=function(t){return function(e,i,n){var r,o=un(e),s=mn(o.length),a=yn(n,s);if(t&&i!=i){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===i)return t||a||0;return!t&&-1}}(!1),xn=_n("IE_PROTO"),Sn=function(t,e){var i,n=un(t),r=0,o=[];for(i in n)i!=xn&&Yi(n,i)&&o.push(i);for(;e.length>r;)Yi(n,i=e[r++])&&(~wn(o,i)||o.push(i));return o},kn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],En=Object.keys||function(t){return Sn(t,kn)},Mn=Object.getOwnPropertySymbols,Tn={f:Mn},Cn={}.propertyIsEnumerable,On={f:Cn},Pn=function(t){var e=En(t),i=Tn.f;if(i)for(var n,r=i(t),o=On.f,s=0;r.length>s;)o.call(t,n=r[s++])&&e.push(n);return e},An=Array.isArray||function(t){return"Array"==an(t)},Dn=function(t){return Object(ln(t))},In=Ri?Object.defineProperties:function(t,e){Di(t);for(var i,n=En(e),r=n.length,o=0;r>o;)Hi.f(t,i=n[o++],e[i]);return t},Rn=xi.document,Ln=Rn&&Rn.documentElement,Nn=_n("IE_PROTO"),Fn=function(){},zn=function(){var t,e=Fi("iframe"),i=kn.length;for(e.style.display="none",Ln.appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),zn=t.F;i--;)delete zn.prototype[kn[i]];return zn()},Bn=Object.create||function(t,e){var i;return null===t?i=zn():(Fn.prototype=Di(t),i=new Fn,Fn.prototype=null,i[Nn]=t),void 0===e?i:In(i,e)},jn=kn.concat("length","prototype"),Un=Object.getOwnPropertyNames||function(t){return Sn(t,jn)},Hn={f:Un},Vn=Hn.f,Gn={}.toString,Wn="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Yn=function(t){try{return Vn(t)}catch(t){return Wn.slice()}},$n=function(t){return Wn&&"[object Window]"==Gn.call(t)?Yn(t):Vn(un(t))},qn={f:$n},Xn=Object.getOwnPropertyDescriptor,Zn=Ri?Xn:function(t,e){if(t=un(t),e=Bi(e,!0),zi)try{return Xn(t,e)}catch(e){}return Yi(t,e)?$i(!On.f.call(t,e),t[e]):void 0},Kn={f:Zn},Qn=en.KEY,Jn=Kn.f,tr=Hi.f,er=qn.f,ir=xi.Symbol,nr=xi.JSON,rr=nr&&nr.stringify,or=Ci("_hidden"),sr=Ci("toPrimitive"),ar={}.propertyIsEnumerable,hr=ki("symbol-registry"),lr=ki("symbols"),ur=ki("op-symbols"),dr=Object.prototype,cr="function"==typeof ir&&!!Tn.f,fr=xi.QObject,pr=!fr||!fr.prototype||!fr.prototype.findChild,mr=Ri&&Ii(function(){return 7!=Bn(tr({},"a",{get:function(){return tr(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=Jn(dr,e);n&&delete dr[e],tr(t,e,i),n&&t!==dr&&tr(dr,e,n)}:tr,vr=function(t){var e=lr[t]=Bn(ir.prototype);return e._k=t,e},gr=cr&&"symbol"==typeof ir.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof ir},yr=function(t,e,i){return t===dr&&yr(ur,e,i),Di(t),e=Bi(e,!0),Di(i),Yi(lr,e)?(i.enumerable?(Yi(t,or)&&t[or][e]&&(t[or][e]=!1),i=Bn(i,{enumerable:$i(0,!1)})):(!Yi(t,or)&&tr(t,or,$i(1,{})),t[or][e]=!0),mr(t,e,i)):tr(t,e,i)},br=function(t,e){Di(t);for(var i,n=Pn(e=un(e)),r=0,o=n.length;o>r;)yr(t,i=n[r++],e[i]);return t},_r=function(t,e){return void 0===e?Bn(t):br(Bn(t),e)},wr=function(t){var e=ar.call(this,t=Bi(t,!0));return(this!==dr||!Yi(lr,t)||Yi(ur,t))&&(!(e||!Yi(this,t)||!Yi(lr,t)||Yi(this,or)&&this[or][t])||e)},xr=function(t,e){if(t=un(t),e=Bi(e,!0),t!==dr||!Yi(lr,e)||Yi(ur,e)){var i=Jn(t,e);return i&&Yi(lr,e)&&!(Yi(t,or)&&t[or][e])&&(i.enumerable=!0),i}},Sr=function(t){for(var e,i=er(un(t)),n=[],r=0;i.length>r;)Yi(lr,e=i[r++])||e==or||e==Qn||n.push(e);return n},kr=function(t){for(var e,i=t===dr,n=er(i?ur:un(t)),r=[],o=0;n.length>o;)Yi(lr,e=n[o++])&&(!i||Yi(dr,e))&&r.push(lr[e]);return r};cr||(ir=function(){if(this instanceof ir)throw TypeError("Symbol is not a constructor!");var t=Ti(0<arguments.length?arguments[0]:void 0),e=function(i){this===dr&&e.call(ur,i),Yi(this,or)&&Yi(this[or],t)&&(this[or][t]=!1),mr(this,t,$i(1,i))};return Ri&&pr&&mr(dr,t,{configurable:!0,set:e}),vr(t)},Zi(ir.prototype,"toString",function(){return this._k}),Kn.f=xr,Hi.f=yr,Hn.f=qn.f=Sr,On.f=wr,Tn.f=kr,Ri&&!0&&Zi(dr,"propertyIsEnumerable",wr,!0),Pi.f=function(t){return vr(Ci(t))}),tn(tn.G+tn.W+tn.F*!cr,{Symbol:ir});for(var Er=["hasInstance","isConcatSpreadable","iterator","match","replace","search","species","split","toPrimitive","toStringTag","unscopables"],Mr=0;Er.length>Mr;)Ci(Er[Mr++]);for(var Tr=En(Ci.store),Cr=0;Tr.length>Cr;)Gi(Tr[Cr++]);tn(tn.S+tn.F*!cr,"Symbol",{for:function(t){return Yi(hr,t+="")?hr[t]:hr[t]=ir(t)},keyFor:function(t){if(!gr(t))throw TypeError(t+" is not a symbol!");for(var e in hr)if(hr[e]===t)return e},useSetter:function(){pr=!0},useSimple:function(){pr=!1}}),tn(tn.S+tn.F*!cr,"Object",{create:_r,defineProperty:yr,defineProperties:br,getOwnPropertyDescriptor:xr,getOwnPropertyNames:Sr,getOwnPropertySymbols:kr});var Or=Ii(function(){Tn.f(1)});tn(tn.S+tn.F*Or,"Object",{getOwnPropertySymbols:function(t){return Tn.f(Dn(t))}}),nr&&tn(tn.S+tn.F*(!cr||Ii(function(){var t=ir();return"[null]"!=rr([t])||"{}"!=rr({a:t})||"{}"!=rr(Object(t))})),"JSON",{stringify:function(t){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=e=n[1],(Ai(e)||void 0!==t)&&!gr(t))return An(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!gr(e))return e}),n[1]=e,rr.apply(nr,n)}}),ir.prototype[sr]||qi(ir.prototype,sr,ir.prototype.valueOf),on(ir,"Symbol"),on(Math,"Math",!0),on(xi.JSON,"JSON",!0);!function(t,e){var i=(Si.Object||{})[t]||Object[t],n={};n[t]=e(i),tn(tn.S+tn.F*Ii(function(){i(1)}),"Object",n)}("keys",function(){return function(t){return En(Dn(t))}});var Pr=function(){var t=Di(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};Ri&&"g"!=/./g.flags&&Hi.f(RegExp.prototype,"flags",{configurable:!0,get:Pr});var Ar=/./.toString,Dr=function(t){Zi(RegExp.prototype,"toString",t,!0)};Ii(function(){return"/a/b"!=Ar.call({source:"a",flags:"b"})})?Dr(function(){var t=Di(this);return"/".concat(t.source,"/","flags"in t?t.flags:!Ri&&t instanceof RegExp?Pr.call(t):void 0)}):"toString"!=Ar.name&&Dr(function(){return Ar.call(this)});var Ir=function(t){return function(e,i){var n,r,o=ln(e)+"",s=fn(i),a=o.length;return 0>s||s>=a?t?"":void 0:(n=o.charCodeAt(s),55296>n||56319<n||s+1===a||56320>(r=o.charCodeAt(s+1))||57343<r?t?o.charAt(s):n:t?o.slice(s,s+2):r-56320+(n-55296<<10)+65536)}}(!0),Rr=function(t,e,i){return e+(i?Ir(t,e).length:1)},Lr=Ci("toStringTag"),Nr="Arguments"==an(function(){return arguments}()),Fr=function(t,e){try{return t[e]}catch(e){}},zr=function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=Fr(e=Object(t),Lr))?i:Nr?an(e):"Object"==(n=an(e))&&"function"==typeof e.callee?"Arguments":n},Br=RegExp.prototype.exec,jr=function(t,e){var i=t.exec;if("function"==typeof i){var n=i.call(t,e);if("object"!=typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==zr(t))throw new TypeError("RegExp#exec called on incompatible receiver");return Br.call(t,e)},Ur=RegExp.prototype.exec,Hr=String.prototype.replace,Vr=Ur,Gr=function(){var t=/a/,e=/b*/g;return Ur.call(t,"a"),Ur.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),Wr=void 0!==/()??/.exec("")[1];(Gr||Wr)&&(Vr=function(t){var e,i,n,r,o=this;return Wr&&(i=new RegExp("^"+o.source+"$(?!\\s)",Pr.call(o))),Gr&&(e=o.lastIndex),n=Ur.call(o,t),Gr&&n&&(o.lastIndex=o.global?n.index+n[0].length:e),Wr&&n&&1<n.length&&Hr.call(n[0],i,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)}),n});var Yr=Vr;tn({target:"RegExp",proto:!0,forced:Yr!==/./.exec},{exec:Yr});var $r=Ci("species"),qr=!Ii(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),Xr=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2===i.length&&"a"===i[0]&&"b"===i[1]}(),Zr=function(t,e,i){var n=Ci(t),r=!Ii(function(){var e={};return e[n]=function(){return 7},7!=""[t](e)}),o=r?!Ii(function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[$r]=function(){return i}),i[n](""),!e}):void 0;if(!r||!o||"replace"===t&&!qr||"split"===t&&!Xr){var s=/./[n],a=i(ln,n,""[t],function(t,e,i,n,o){return e.exec===Yr?r&&!o?{done:!0,value:s.call(e,i,n)}:{done:!0,value:t.call(i,e,n)}:{done:!1}}),h=a[0],l=a[1];Zi(String.prototype,t,h),qi(RegExp.prototype,n,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)})}},Kr=Math.max,Qr=Math.min,Jr=Math.floor,to=/\$([$&`']|\d\d?|<[^>]*>)/g,eo=/\$([$&`']|\d\d?)/g,io=function(t){return void 0===t?t:t+""};Zr("replace",2,function(t,e,i,n){function r(t,e,n,r,o,s){var a=n+t.length,h=r.length,l=eo;return void 0!==o&&(o=Dn(o),l=to),i.call(s,l,function(i,s){var l;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(a);case"<":l=o[s.slice(1,-1)];break;default:var u=+s;if(0==u)return i;if(u>h){var d=Jr(u/10);return 0===d?i:d<=h?void 0===r[d-1]?s.charAt(1):r[d-1]+s.charAt(1):i}l=r[u-1]}return void 0===l?"":l})}return[function(n,r){var o=t(this),s=null==n?void 0:n[e];return void 0===s?i.call(o+"",n,r):s.call(n,o,r)},function(t,e){var o=n(i,t,this,e);if(o.done)return o.value;var s=Di(t),a=this+"",h="function"==typeof e;h||(e+="");var l=s.global;if(l){var u=s.unicode;s.lastIndex=0}for(var d,c=[];null!==(d=jr(s,a))&&(c.push(d),!!l);){""==d[0]+""&&(s.lastIndex=Rr(a,mn(s.lastIndex),u))}for(var f="",p=0,m=0;m<c.length;m++){d=c[m];for(var v=d[0]+"",g=Kr(Qr(fn(d.index),a.length),0),y=[],b=1;b<d.length;b++)y.push(io(d[b]));var _=d.groups;if(h){var w=[v].concat(y,g,a);void 0!==_&&w.push(_);var x=e.apply(void 0,w)+""}else x=r(v,a,g,y,_,e);g>=p&&(f+=a.slice(p,g)+x,p=g+v.length)}return f+a.slice(p)}]});var no=Ci("unscopables"),ro=Array.prototype;null==ro[no]&&qi(ro,no,{});var oo=function(t){ro[no][t]=!0},so=function(t,e){return{value:e,done:!!t}},ao={},ho={};qi(ho,Ci("iterator"),function(){return this});var lo=function(t,e,i){t.prototype=Bn(ho,{next:$i(1,i)}),on(t,e+" Iterator")},uo=_n("IE_PROTO"),co=Object.prototype,fo=Object.getPrototypeOf||function(t){return t=Dn(t),Yi(t,uo)?t[uo]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?co:null},po=Ci("iterator"),mo=!([].keys&&"next"in[].keys()),vo=function(){return this},go=function(t,e,i,n,r,o,s){lo(i,e,n);var a,h,l,u=function(t){return!mo&&t in p?p[t]:function(){return new i(this,t)}},d=e+" Iterator",c="values"==r,f=!1,p=t.prototype,m=p[po]||p["@@iterator"]||r&&p[r],v=m||u(r),g=r?c?u("entries"):v:void 0,y="Array"==e?p.entries||m:m;if(y&&(l=fo(y.call(new t)))!==Object.prototype&&l.next&&(on(l,d,!0),"function"!=typeof l[po]&&qi(l,po,vo)),c&&m&&"values"!==m.name&&(f=!0,v=function(){return m.call(this)}),(mo||f||!p[po])&&qi(p,po,v),ao[e]=v,ao[d]=vo,r)if(a={values:c?v:u("values"),keys:o?v:u("keys"),entries:g},s)for(h in a)h in p||Zi(p,h,a[h]);else tn(tn.P+tn.F*(mo||f),e,a);return a}(Array,"Array",function(t,e){this._t=un(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,so(1)):"keys"==e?so(0,i):"values"==e?so(0,t[i]):so(0,[i,t[i]])},"values");ao.Arguments=ao.Array,oo("keys"),oo("values"),oo("entries");for(var yo=Ci("iterator"),bo=Ci("toStringTag"),_o=ao.Array,wo={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},xo=En(wo),So=0;So<xo.length;So++){var ko,Eo=xo[So],Mo=wo[Eo],To=xi[Eo],Co=To&&To.prototype;if(Co&&(Co[yo]||qi(Co,yo,_o),Co[bo]||qi(Co,bo,Eo),ao[Eo]=_o,Mo))for(ko in go)Co[ko]||Zi(Co,ko,go[ko],!0)}({})[Ci("toStringTag")]="z",Zi(Object.prototype,"toString",function(){return"[object "+zr(this)+"]"},!0);var Oo=On.f,Po=function(t){return function(e){for(var i,n=un(e),r=En(n),o=r.length,s=0,a=[];o>s;)i=r[s++],(!Ri||Oo.call(n,i))&&a.push(t?[i,n[i]]:n[i]);return a}}(!1);tn(tn.S,"Object",{values:function(t){return Po(t)}});var Ao=Ci("match"),Do=function(t){var e;return Ai(t)&&(void 0===(e=t[Ao])?"RegExp"==an(t):!!e)},Io=Ci("species"),Ro=function(t,e){var i,n=Di(t).constructor;return void 0===n||null==(i=Di(n)[Io])?e:Ki(i)},Lo=Math.min,No=[].push,Fo="length",zo=!Ii(function(){RegExp(4294967295,"y")});Zr("split",2,function(t,e,i,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[Fo]||2!="ab".split(/(?:ab)*/)[Fo]||4!=".".split(/(.?)(.?)/)[Fo]||1<".".split(/()()/)[Fo]||"".split(/.?/)[Fo]?function(t,e){var n=this+"";if(void 0===t&&0===e)return[];if(!Do(t))return i.call(n,t,e);for(var r,o,s,a=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,u=void 0===e?4294967295:e>>>0,d=new RegExp(t.source,h+"g");(r=Yr.call(d,n))&&!((o=d.lastIndex)>l&&(a.push(n.slice(l,r.index)),1<r[Fo]&&r.index<n[Fo]&&No.apply(a,r.slice(1)),s=r[0][Fo],l=o,a[Fo]>=u));)d.lastIndex===r.index&&d.lastIndex++;return l===n[Fo]?(s||!d.test(""))&&a.push(""):a.push(n.slice(l)),a[Fo]>u?a.slice(0,u):a}:"0".split(void 0,0)[Fo]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,n){var o=t(this),s=null==i?void 0:i[e];return void 0===s?r.call(o+"",i,n):s.call(i,o,n)},function(t,e){var o=n(r,t,this,e,r!==i);if(o.done)return o.value;var s=Di(t),a=this+"",h=Ro(s,RegExp),l=s.unicode,u=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(zo?"y":"g"),d=new h(zo?s:"^(?:"+s.source+")",u),c=void 0===e?4294967295:e>>>0;if(0===c)return[];if(0===a.length)return null===jr(d,a)?[a]:[];for(var f=0,p=0,m=[];p<a.length;){d.lastIndex=zo?p:0;var v,g=jr(d,zo?a:a.slice(p));if(null===g||(v=Lo(mn(d.lastIndex+(zo?0:p)),a.length))===f)p=Rr(a,p,l);else{if(m.push(a.slice(f,p)),m.length===c)return m;for(var y=1;y<=g.length-1;y++)if(m.push(g[y]),m.length===c)return m;p=f=v}}return m.push(a.slice(f)),m}]});var Bo=Object.assign,jo=!Bo||Ii(function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach(function(t){e[t]=t}),7!=Bo({},t)[i]||Object.keys(Bo({},e)).join("")!=n})?function(t){for(var e=Dn(t),i=arguments.length,n=1,r=Tn.f,o=On.f;i>n;)for(var s,a=hn(arguments[n++]),h=r?En(a).concat(r(a)):En(a),l=h.length,u=0;l>u;)s=h[u++],(!Ri||o.call(a,s))&&(e[s]=a[s]);return e}:Bo;tn(tn.S+tn.F,"Object",{assign:jo});var Uo=function(t,e){if(Di(t),!Ai(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},Ho={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=Qi(Function.call,Kn.f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return Uo(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:Uo},Vo=Ho.set,Go=function(t,e,i){var n,r=e.constructor;return r!==i&&"function"==typeof r&&(n=r.prototype)!==i.prototype&&Ai(n)&&Vo&&Vo(t,n),t},Wo="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",Yo="["+Wo+"]",$o="\u200b\x85",qo=RegExp("^"+Yo+Yo+"*"),Xo=RegExp(Yo+Yo+"*$"),Zo=function(t,e,i){var n={},r=Ii(function(){return!!Wo[t]()||$o[t]()!=$o}),o=n[t]=r?e(Ko):Wo[t];i&&(n[i]=o),tn(tn.P+tn.F*r,"String",n)},Ko=Zo.trim=function(t,e){return t=ln(t)+"",1&e&&(t=t.replace(qo,"")),2&e&&(t=t.replace(Xo,"")),t},Qo=Zo,Jo=Hn.f,ts=Kn.f,es=Hi.f,is=Qo.trim,ns=xi.Number,rs=ns,os=ns.prototype,ss="Number"==an(Bn(os)),as="trim"in String.prototype,hs=function(t){var e=Bi(t,!1);if("string"==typeof e&&2<e.length){e=as?e.trim():is(e,3);var i,n,r,o=e.charCodeAt(0);if(43===o||45===o){if(88===(i=e.charCodeAt(2))||120===i)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+e}for(var s,a=e.slice(2),h=0,l=a.length;h<l;h++)if(48>(s=a.charCodeAt(h))||s>r)return NaN;return parseInt(a,n)}}return+e};if(!ns(" 0o1")||!ns("0b1")||ns("+0x1")){ns=function(t){var e=1>arguments.length?0:t,i=this;return i instanceof ns&&(ss?Ii(function(){os.valueOf.call(i)}):"Number"!=an(i))?Go(new rs(hs(e)),i,ns):hs(e)};for(var ls,us=Ri?Jo(rs):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),ds=0;us.length>ds;ds++)Yi(rs,ls=us[ds])&&!Yi(ns,ls)&&es(ns,ls,ts(rs,ls));ns.prototype=os,os.constructor=ns,Zi(xi,"Number",ns)}for(var cs=(r(function(t){var e=Math.round,i=Math.pow,r=Math.max,o=Math.abs,s=Math.min,a=Math.floor,h=Math.ceil;!function(e,i){t.exports=function(){function l(){return qe.apply(null,arguments)}function u(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function d(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function c(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function f(t){return void 0===t}function p(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function m(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function v(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function g(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function y(t,e){for(var i in e)g(e,i)&&(t[i]=e[i]);return g(e,"toString")&&(t.toString=e.toString),g(e,"valueOf")&&(t.valueOf=e.valueOf),t}function b(t,e,i,n){return re(t,e,i,n,!0).utc()}function _(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function w(t){return null==t._pf&&(t._pf=_()),t._pf}function x(t){if(null==t._isValid){var e=w(t),i=Xe.call(e.parsedDateParts,function(t){return null!=t}),n=!isNaN(t._d.getTime())&&0>e.overflow&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i);if(t._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function S(t){var e=b(NaN);return null==t?w(e).userInvalidated=!0:y(w(e),t),e}function k(t,e){var i,n,r;if(f(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),f(e._i)||(t._i=e._i),f(e._f)||(t._f=e._f),f(e._l)||(t._l=e._l),f(e._strict)||(t._strict=e._strict),f(e._tzm)||(t._tzm=e._tzm),f(e._isUTC)||(t._isUTC=e._isUTC),f(e._offset)||(t._offset=e._offset),f(e._pf)||(t._pf=w(e)),f(e._locale)||(t._locale=e._locale),0<Ze.length)for(i=0;i<Ze.length;i++)n=Ze[i],r=e[n],f(r)||(t[n]=r);return t}function E(t){k(this,t),this._d=new Date(null==t._d?NaN:t._d.getTime()),this.isValid()||(this._d=new Date(NaN)),!1===Ke&&(Ke=!0,l.updateOffset(this),Ke=!1)}function M(t){return t instanceof E||null!=t&&null!=t._isAMomentObject}function T(t){return 0>t?h(t)||0:a(t)}function C(t){var e=+t,i=0;return 0!=e&&isFinite(e)&&(i=T(e)),i}function O(t,e,i){var n,r=s(t.length,e.length),a=o(t.length-e.length),h=0;for(n=0;n<r;n++)(i&&t[n]!==e[n]||!i&&C(t[n])!==C(e[n]))&&h++;return h+a}function P(t){!1===l.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function A(t,e){var i=!0;return y(function(){if(null!=l.deprecationHandler&&l.deprecationHandler(null,t),i){for(var n,r=[],o=0;o<arguments.length;o++){if(n="","object"==typeof arguments[o]){for(var s in n+="\n["+o+"] ",arguments[0])n+=s+": "+arguments[0][s]+", ";n=n.slice(0,-2)}else n=arguments[o];r.push(n)}P(t+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack),i=!1}return e.apply(this,arguments)},e)}function D(t,e){null!=l.deprecationHandler&&l.deprecationHandler(t,e),Qe[t]||(P(e),Qe[t]=!0)}function I(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function R(t){var e,i;for(i in t)e=t[i],I(e)?this[i]=e:this["_"+i]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function L(t,e){var i,n=y({},t);for(i in e)g(e,i)&&(d(t[i])&&d(e[i])?(n[i]={},y(n[i],t[i]),y(n[i],e[i])):null==e[i]?delete n[i]:n[i]=e[i]);for(i in t)g(t,i)&&!g(e,i)&&d(t[i])&&(n[i]=y({},n[i]));return n}function N(t){null!=t&&this.set(t)}function F(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return I(n)?n.call(e,i):n}function z(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function B(t,e){var i=t.toLowerCase();ei[i]=ei[i+"s"]=ei[e]=t}function j(t){return"string"==typeof t?ei[t]||ei[t.toLowerCase()]:void 0}function U(t){var e,i,n={};for(i in t)g(t,i)&&(e=j(i))&&(n[e]=t[i]);return n}function H(t,e){ii[t]=e}function V(t){var e=[];for(var i in t)e.push({unit:i,priority:ii[i]});return e.sort(function(t,e){return t.priority-e.priority}),e}function G(t,e,n){var s=""+o(t),a=e-s.length;return(0<=t?n?"+":"":"-")+i(10,r(0,a)).toString().substr(1)+s}function W(t,e,i,n){var r=n;"string"==typeof n&&(r=function(){return this[n]()}),t&&(si[t]=r),e&&(si[e[0]]=function(){return G(r.apply(this,arguments),e[1],e[2])}),i&&(si[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function Y(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function $(t){var e,i,n=t.match(ni);for(e=0,i=n.length;e<i;e++)n[e]=si[n[e]]?si[n[e]]:Y(n[e]);return function(e){var r,o="";for(r=0;r<i;r++)o+=I(n[r])?n[r].call(e,t):n[r];return o}}function q(t,e){return t.isValid()?(e=X(e,t.localeData()),oi[e]=oi[e]||$(e),oi[e](t)):t.localeData().invalidDate()}function X(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(ri.lastIndex=0;0<=n&&ri.test(t);)t=t.replace(ri,i),ri.lastIndex=0,n-=1;return t}function Z(t,e,i){ki[t]=I(e)?e:function(t){return t&&i?i:e}}function K(t,e){return g(ki,t)?ki[t](e._strict,e._locale):new RegExp(Q(t))}function Q(t){return J(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,r){return e||i||n||r}))}function J(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function tt(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),p(e)&&(n=function(t,i){i[e]=C(t)}),i=0;i<t.length;i++)Ei[t[i]]=n}function et(t,e){tt(t,function(t,i,n,r){n._w=n._w||{},e(t,n._w,n,r)})}function it(t,e,i){null!=e&&g(Ei,t)&&Ei[t](e,i._a,i,t)}function nt(t){return rt(t)?366:365}function rt(t){return 0==t%4&&0!=t%100||0==t%400}function ot(t,e){return function(i){return null==i?st(this,t):(at(this,t,i),l.updateOffset(this,e),this)}}function st(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function at(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&rt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),ut(i,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function ht(t,e){if("object"==typeof t){t=U(t);for(var i=V(t),n=0;n<i.length;n++)this[i[n].unit](t[i[n].unit])}else if(t=j(t),I(this[t]))return this[t](e);return this}function lt(t,e){return(t%e+e)%e}function ut(t,e){if(isNaN(t)||isNaN(e))return NaN;var i=lt(e,12);return t+=(e-i)/12,1===i?rt(t)?29:28:31-i%7%2}function dt(t,e,i){var n,r,o,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;12>n;++n)o=b([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(o,"").toLocaleLowerCase();return i?"MMM"===e?(r=Mi.call(this._shortMonthsParse,s),-1===r?null:r):(r=Mi.call(this._longMonthsParse,s),-1===r?null:r):"MMM"===e?-1!==(r=Mi.call(this._shortMonthsParse,s))?r:(r=Mi.call(this._longMonthsParse,s),-1===r?null:r):-1!==(r=Mi.call(this._longMonthsParse,s))?r:(r=Mi.call(this._shortMonthsParse,s),-1===r?null:r)}function ct(t,e,i){var n,r,o;if(this._monthsParseExact)return dt.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(r=b([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function ft(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=C(e);else if(e=t.localeData().monthsParse(e),!p(e))return t;return i=s(t.date(),ut(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function pt(t){return null==t?st(this,"Month"):(ft(this,t),l.updateOffset(this,!0),this)}function mt(){function t(t,e){return e.length-t.length}var e,i,n=[],r=[],o=[];for(e=0;12>e;e++)i=b([2e3,e]),n.push(this.monthsShort(i,"")),r.push(this.months(i,"")),o.push(this.months(i,"")),o.push(this.monthsShort(i,""));for(n.sort(t),r.sort(t),o.sort(t),e=0;12>e;e++)n[e]=J(n[e]),r[e]=J(r[e]);for(e=0;24>e;e++)o[e]=J(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function vt(t,e,i,n,r,o,s){var a;return 100>t&&0<=t?(a=new Date(t+400,e,i,n,r,o,s),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,i,n,r,o,s),a}function gt(t){var e;if(100>t&&0<=t){var i=Array.prototype.slice.call(arguments);i[0]=t+400,e=new Date(Date.UTC.apply(null,i)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)}else e=new Date(Date.UTC.apply(null,arguments));return e}function yt(t,e,i){var n=7+e-i;return-(7+gt(t,0,n).getUTCDay()-e)%7+n-1}function bt(t,e,i,n,r){var o,s,a=yt(t,n,r),h=1+7*(e-1)+(7+i-n)%7+a;return 0>=h?(o=t-1,s=nt(o)+h):h>nt(t)?(o=t+1,s=h-nt(t)):(o=t,s=h),{year:o,dayOfYear:s}}function _t(t,e,i){var n,r,o=yt(t.year(),e,i),s=a((t.dayOfYear()-o-1)/7)+1;return 1>s?(r=t.year()-1,n=s+wt(r,e,i)):s>wt(t.year(),e,i)?(n=s-wt(t.year(),e,i),r=t.year()+1):(r=t.year(),n=s),{week:n,year:r}}function wt(t,e,i){var n=yt(t,e,i),r=yt(t+1,e,i);return(nt(t)-n+r)/7}function xt(t,e){return"string"==typeof t?isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10):t}function St(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function kt(t,e){return t.slice(e,7).concat(t.slice(0,e))}function Et(t,e,i){var n,r,o,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;7>n;++n)o=b([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(o,"").toLocaleLowerCase();return i?"dddd"===e?(r=Mi.call(this._weekdaysParse,s),-1===r?null:r):"ddd"===e?(r=Mi.call(this._shortWeekdaysParse,s),-1===r?null:r):(r=Mi.call(this._minWeekdaysParse,s),-1===r?null:r):"dddd"===e?-1!==(r=Mi.call(this._weekdaysParse,s))?r:-1!==(r=Mi.call(this._shortWeekdaysParse,s))?r:(r=Mi.call(this._minWeekdaysParse,s),-1===r?null:r):"ddd"===e?-1!==(r=Mi.call(this._shortWeekdaysParse,s))?r:-1!==(r=Mi.call(this._weekdaysParse,s))?r:(r=Mi.call(this._minWeekdaysParse,s),-1===r?null:r):-1!==(r=Mi.call(this._minWeekdaysParse,s))?r:-1!==(r=Mi.call(this._weekdaysParse,s))?r:(r=Mi.call(this._shortWeekdaysParse,s),-1===r?null:r)}function Mt(t,e,i){var n,r,o;if(this._weekdaysParseExact)return Et.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;7>n;n++){if(r=b([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}}function Tt(){function t(t,e){return e.length-t.length}var e,i,n,r,o,s=[],a=[],h=[],l=[];for(e=0;7>e;e++)i=b([2e3,1]).day(e),n=this.weekdaysMin(i,""),r=this.weekdaysShort(i,""),o=this.weekdays(i,""),s.push(n),a.push(r),h.push(o),l.push(n),l.push(r),l.push(o);for(s.sort(t),a.sort(t),h.sort(t),l.sort(t),e=0;7>e;e++)a[e]=J(a[e]),h[e]=J(h[e]),l[e]=J(l[e]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Ct(){return this.hours()%12||12}function Ot(t,e){W(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Pt(t,e){return e._meridiemParse}function At(t){return t?t.toLowerCase().replace("_","-"):t}function Dt(t){for(var e,i,n,r,o=0;o<t.length;){for(r=At(t[o]).split("-"),e=r.length,i=At(t[o+1]),i=i?i.split("-"):null;0<e;){if(n=It(r.slice(0,e).join("-")))return n;if(i&&i.length>=e&&O(r,i,!0)>=e-1)break;e--}o++}return Ai}function It(e){var i=null;if(!Li[e]&&t&&t.exports)try{i=Ai._abbr,n("./locale/"+e),Rt(i)}catch(e){}return Li[e]}function Rt(t,e){var i;return t&&(i=f(e)?Nt(t):Lt(t,e),i?Ai=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Ai._abbr}function Lt(t,e){if(null!==e){var i,n=Ri;if(e.abbr=t,null!=Li[t])D("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Li[t]._config;else if(null!=e.parentLocale)if(null!=Li[e.parentLocale])n=Li[e.parentLocale]._config;else{if(null==(i=It(e.parentLocale)))return Ni[e.parentLocale]||(Ni[e.parentLocale]=[]),Ni[e.parentLocale].push({name:t,config:e}),null;n=i._config}return Li[t]=new N(L(n,e)),Ni[t]&&Ni[t].forEach(function(t){Lt(t.name,t.config)}),Rt(t),Li[t]}return delete Li[t],null}function Nt(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Ai;if(!u(t)){if(e=It(t))return e;t=[t]}return Dt(t)}function Ft(){return Je(Li)}function zt(t){var e,i=t._a;return i&&-2===w(t).overflow&&(e=0>i[1]||11<i[1]?1:1>i[2]||i[2]>ut(i[0],i[1])?2:0>i[3]||24<i[3]||24===i[3]&&(0!==i[4]||0!==i[5]||0!==i[6])?3:0>i[4]||59<i[4]?4:0>i[5]||59<i[5]?5:0>i[6]||999<i[6]?6:-1,w(t)._overflowDayOfYear&&(0>e||2<e)&&(e=2),w(t)._overflowWeeks&&-1===e&&(e=7),w(t)._overflowWeekday&&-1===e&&(e=8),w(t).overflow=e),t}function Bt(t,e,i){return null==t?null==e?i:e:t}function jt(t){var e=new Date(l.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Ut(t){var e,i,n,r,o,s=[];if(!t._d){for(n=jt(t),t._w&&null==t._a[2]&&null==t._a[1]&&Ht(t),null!=t._dayOfYear&&(o=Bt(t._a[0],n[0]),(t._dayOfYear>nt(o)||0===t._dayOfYear)&&(w(t)._overflowDayOfYear=!0),i=gt(o,0,t._dayOfYear),t._a[1]=i.getUTCMonth(),t._a[2]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=s[e]=n[e];for(;7>e;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?gt:vt).apply(null,s),r=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&"undefined"!=typeof t._w.d&&t._w.d!==r&&(w(t).weekdayMismatch=!0)}}function Ht(t){var e,i,n,r,o,s,a,h;if(e=t._w,null!=e.GG||null!=e.W||null!=e.E)o=1,s=4,i=Bt(e.GG,t._a[0],_t(oe(),1,4).year),n=Bt(e.W,1),(1>(r=Bt(e.E,1))||7<r)&&(h=!0);else{o=t._locale._week.dow,s=t._locale._week.doy;var l=_t(oe(),o,s);i=Bt(e.gg,t._a[0],l.year),n=Bt(e.w,l.week),null==e.d?null==e.e?r=o:(r=e.e+o,(0>e.e||6<e.e)&&(h=!0)):(0>(r=e.d)||6<r)&&(h=!0)}1>n||n>wt(i,o,s)?w(t)._overflowWeeks=!0:null==h?(a=bt(i,n,r,o,s),t._a[0]=a.year,t._dayOfYear=a.dayOfYear):w(t)._overflowWeekday=!0}function Vt(t){var e,i,n,r,o,s,a=t._i,h=Fi.exec(a)||zi.exec(a);if(h){for(w(t).iso=!0,e=0,i=ji.length;e<i;e++)if(ji[e][1].exec(h[1])){r=ji[e][0],n=!1!==ji[e][2];break}if(null==r)return void(t._isValid=!1);if(h[3]){for(e=0,i=Ui.length;e<i;e++)if(Ui[e][1].exec(h[3])){o=(h[2]||" ")+Ui[e][0];break}if(null==o)return void(t._isValid=!1)}if(!n&&null!=o)return void(t._isValid=!1);if(h[4]){if(!Bi.exec(h[4]))return void(t._isValid=!1);s="Z"}t._f=r+(o||"")+(s||""),Kt(t)}else t._isValid=!1}function Gt(t,e,i,n,r,o){var s=[Wt(t),Oi.indexOf(e),parseInt(i,10),parseInt(n,10),parseInt(r,10)];return o&&s.push(parseInt(o,10)),s}function Wt(t){var e=parseInt(t,10);return 49>=e?2e3+e:999>=e?1900+e:e}function Yt(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function $t(t,e,i){if(t){if(Pi.indexOf(t)!==new Date(e[0],e[1],e[2]).getDay())return w(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}function qt(t,e,i){if(t)return Gi[t];if(e)return 0;var n=parseInt(i,10),r=n%100;return(n-r)/100*60+r}function Xt(t){var e=Vi.exec(Yt(t._i));if(e){var i=Gt(e[4],e[3],e[2],e[5],e[6],e[7]);if(!$t(e[1],i,t))return;t._a=i,t._tzm=qt(e[8],e[9],e[10]),t._d=gt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),w(t).rfc2822=!0}else t._isValid=!1}function Zt(t){var e=Hi.exec(t._i);if(null!==e)return void(t._d=new Date(+e[1]));Vt(t),!1===t._isValid&&(delete t._isValid,Xt(t),!1===t._isValid&&(delete t._isValid,l.createFromInputFallback(t)))}function Kt(t){if(t._f===l.ISO_8601)return void Vt(t);if(t._f===l.RFC_2822)return void Xt(t);t._a=[],w(t).empty=!0;var e,i,n,r,o,s=""+t._i,a=s.length,h=0;for(n=X(t._f,t._locale).match(ni)||[],e=0;e<n.length;e++)r=n[e],i=(s.match(K(r,t))||[])[0],i&&(o=s.substr(0,s.indexOf(i)),0<o.length&&w(t).unusedInput.push(o),s=s.slice(s.indexOf(i)+i.length),h+=i.length),si[r]?(i?w(t).empty=!1:w(t).unusedTokens.push(r),it(r,i,t)):t._strict&&!i&&w(t).unusedTokens.push(r);w(t).charsLeftOver=a-h,0<s.length&&w(t).unusedInput.push(s),12>=t._a[3]&&!0===w(t).bigHour&&0<t._a[3]&&(w(t).bigHour=void 0),w(t).parsedDateParts=t._a.slice(0),w(t).meridiem=t._meridiem,t._a[3]=Qt(t._locale,t._a[3],t._meridiem),Ut(t),zt(t)}function Qt(t,e,i){var n;return null==i?e:null==t.meridiemHour?null==t.isPM?e:(n=t.isPM(i),n&&12>e&&(e+=12),n||12!==e||(e=0),e):t.meridiemHour(e,i)}function Jt(t){var e,i,n,r,o;if(0===t._f.length)return w(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)o=0,e=k({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],Kt(e),!!x(e)&&(o+=w(e).charsLeftOver,o+=10*w(e).unusedTokens.length,w(e).score=o,(null==n||o<n)&&(n=o,i=e));y(t,i||e)}function te(t){if(!t._d){var e=U(t._i);t._a=v([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),Ut(t)}}function ee(t){var e=new E(zt(ie(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function ie(t){var e=t._i,i=t._f;return t._locale=t._locale||Nt(t._l),null===e||void 0===i&&""===e?S({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),M(e)?new E(zt(e)):(m(e)?t._d=e:u(i)?Jt(t):i?Kt(t):ne(t),x(t)||(t._d=null),t))}function ne(t){var e=t._i;f(e)?t._d=new Date(l.now()):m(e)?t._d=new Date(e.valueOf()):"string"==typeof e?Zt(t):u(e)?(t._a=v(e.slice(0),function(t){return parseInt(t,10)}),Ut(t)):d(e)?te(t):p(e)?t._d=new Date(e):l.createFromInputFallback(t)}function re(t,e,i,n,r){var o={};return(!0===i||!1===i)&&(n=i,i=void 0),(d(t)&&c(t)||u(t)&&0===t.length)&&(t=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=i,o._i=t,o._f=e,o._strict=n,ee(o)}function oe(t,e,i,n){return re(t,e,i,n,!1)}function se(t,e){var i,n;if(1===e.length&&u(e[0])&&(e=e[0]),!e.length)return oe();for(i=e[0],n=1;n<e.length;++n)(!e[n].isValid()||e[n][t](i))&&(i=e[n]);return i}function ae(t){for(var e in t)if(-1===Mi.call($i,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var i=!1,n=0;n<$i.length;++n)if(t[$i[n]]){if(i)return!1;parseFloat(t[$i[n]])!==C(t[$i[n]])&&(i=!0)}return!0}function he(t){var e=U(t),i=e.year||0,n=e.quarter||0,r=e.month||0,o=e.week||e.isoWeek||0,s=e.day||0,a=e.hour||0,h=e.minute||0,l=e.second||0,u=e.millisecond||0;this._isValid=ae(e),this._milliseconds=+u+1e3*l+6e4*h+1e3*a*60*60,this._days=+s+7*o,this._months=+r+3*n+12*i,this._data={},this._locale=Nt(),this._bubble()}function le(t){return t instanceof he}function ue(t){return 0>t?-1*e(-1*t):e(t)}function de(t,e){W(t,0,0,function(){var t=this.utcOffset(),i="+";return 0>t&&(t=-t,i="-"),i+G(~~(t/60),2)+e+G(~~t%60,2)})}function ce(t,e){var i=(e||"").match(t);if(null===i)return null;var n=i[i.length-1]||[],r=(n+"").match(qi)||["-",0,0],o=60*r[1]+C(r[2]);return 0===o?0:"+"===r[0]?o:-o}function fe(t,e){var i,n;return e._isUTC?(i=e.clone(),n=(M(t)||m(t)?t.valueOf():oe(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+n),l.updateOffset(i,!1),i):oe(t).local()}function pe(t){return 15*-e(t._d.getTimezoneOffset()/15)}function me(){if(!f(this._isDSTShifted))return this._isDSTShifted;var t={};if(k(t,this),t=ie(t),t._a){var e=t._isUTC?b(t._a):oe(t._a);this._isDSTShifted=this.isValid()&&0<O(t._a,e.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted}function ve(){return!!this.isValid()&&this._isUTC&&0===this._offset}function ge(t,e){var i,n,r,o=t,s=null;return le(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:p(t)?(o={},e?o[e]=t:o.milliseconds=t):(s=Xi.exec(t))?(i="-"===s[1]?-1:1,o={y:0,d:C(s[2])*i,h:C(s[3])*i,m:C(s[4])*i,s:C(s[5])*i,ms:C(ue(1e3*s[6]))*i}):(s=Zi.exec(t))?(i="-"===s[1]?-1:1,o={y:ye(s[2],i),M:ye(s[3],i),w:ye(s[4],i),d:ye(s[5],i),h:ye(s[6],i),m:ye(s[7],i),s:ye(s[8],i)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=_e(oe(o.from),oe(o.to)),o={},o.ms=r.milliseconds,o.M=r.months),n=new he(o),le(t)&&g(t,"_locale")&&(n._locale=t._locale),n}function ye(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function be(t,e){var i={};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function _e(t,e){var i;return t.isValid()&&e.isValid()?(e=fe(e,t),t.isBefore(e)?i=be(t,e):(i=be(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function we(t,e){return function(i,n){var r,o;return null===n||isNaN(+n)||(D(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=i,i=n,n=o),i="string"==typeof i?+i:i,r=ge(i,n),xe(this,r,t),this}}function xe(t,e,i,n){var r=e._milliseconds,o=ue(e._days),s=ue(e._months);t.isValid()&&(n=null==n||n,s&&ft(t,st(t,"Month")+s*i),o&&at(t,"Date",st(t,"Date")+o*i),r&&t._d.setTime(t._d.valueOf()+r*i),n&&l.updateOffset(t,o||s))}function Se(t,e){var i,n,r=12*(e.year()-t.year())+(e.month()-t.month()),o=t.clone().add(r,"months");return 0>e-o?(i=t.clone().add(r-1,"months"),n=(e-o)/(o-i)):(i=t.clone().add(r+1,"months"),n=(e-o)/(i-o)),-(r+n)||0}function ke(t){var e;return void 0===t?this._locale._abbr:(e=Nt(t),null!=e&&(this._locale=e),this)}function Ee(){return this._locale}function Me(t,e){return(t%e+e)%e}function Te(t,e,i){return 100>t&&0<=t?new Date(t+400,e,i)-126227808e5:new Date(t,e,i).valueOf()}function Ce(t,e,i){return 100>t&&0<=t?Date.UTC(t+400,e,i)-126227808e5:Date.UTC(t,e,i)}function Oe(t,e){W(0,[t,t.length],0,e)}function Pe(t,e,i,n,r){var o;return null==t?_t(this,n,r).year:(o=wt(t,n,r),e>o&&(e=o),Ae.call(this,t,e,i,n,r))}function Ae(t,e,i,n,r){var o=bt(t,e,i,n,r),s=gt(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function De(t,e){e[6]=C(1e3*("0."+t))}function Ie(t){return t}function Re(t,e,i,n){var r=Nt(),o=b().set(n,e);return r[i](o,t)}function Le(t,e,i){if(p(t)&&(e=t,t=void 0),t=t||"",null!=e)return Re(t,e,i,"month");var n,r=[];for(n=0;12>n;n++)r[n]=Re(t,n,i,"month");return r}function Ne(t,e,i,n){"boolean"==typeof t?(p(e)&&(i=e,e=void 0),e=e||""):(e=t,i=e,t=!1,p(e)&&(i=e,e=void 0),e=e||"");var r=Nt(),o=t?r._week.dow:0;if(null!=i)return Re(e,(i+o)%7,n,"day");var s,a=[];for(s=0;7>s;s++)a[s]=Re(e,(s+o)%7,n,"day");return a}function Fe(t,e,i,n){var r=ge(e,i);return t._milliseconds+=n*r._milliseconds,t._days+=n*r._days,t._months+=n*r._months,t._bubble()}function ze(t){return 0>t?a(t):h(t)}function Be(t){return 4800*t/146097}function je(t){return 146097*t/4800}function Ue(t){return function(){return this.as(t)}}function He(t){return function(){return this.isValid()?this._data[t]:NaN}}function Ve(t,e,i,n,r){return r.relativeTime(e||1,!!i,t,n)}function Ge(t,e,i){var n=ge(t).abs(),r=En(n.as("s")),o=En(n.as("m")),s=En(n.as("h")),a=En(n.as("d")),h=En(n.as("M")),l=En(n.as("y")),u=r<=Mn.ss&&["s",r]||r<Mn.s&&["ss",r]||1>=o&&["m"]||o<Mn.m&&["mm",o]||1>=s&&["h"]||s<Mn.h&&["hh",s]||1>=a&&["d"]||a<Mn.d&&["dd",a]||1>=h&&["M"]||h<Mn.M&&["MM",h]||1>=l&&["y"]||["yy",l];return u[2]=e,u[3]=0<+t,u[4]=i,Ve.apply(null,u)}function We(t){return void 0===t?En:"function"==typeof t&&(En=t,!0)}function Ye(t){return(0<t)-(0>t)||+t}function $e(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i,n=Tn(this._milliseconds)/1e3,r=Tn(this._days),o=Tn(this._months);t=T(n/60),e=T(t/60),n%=60,t%=60,i=T(o/12),o%=12;var s=i,a=o,h=r,l=e,u=t,d=n?n.toFixed(3).replace(/\.?0+$/,""):"",c=this.asSeconds();if(!c)return"P0D";var f=0>c?"-":"",p=Ye(this._months)===Ye(c)?"":"-",m=Ye(this._days)===Ye(c)?"":"-",v=Ye(this._milliseconds)===Ye(c)?"":"-";return f+"P"+(s?p+s+"Y":"")+(a?p+a+"M":"")+(h?m+h+"D":"")+(l||u||d?"T":"")+(l?v+l+"H":"")+(u?v+u+"M":"")+(d?v+d+"S":"")}var qe,Xe;Xe=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,n=0;n<i;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var Ze=l.momentProperties=[],Ke=!1,Qe={};l.suppressDeprecationWarnings=!1,l.deprecationHandler=null;var Je=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)g(t,e)&&i.push(e);return i},ti=/\d{1,2}/,ei={},ii={},ni=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ri=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,oi={},si={},ai=/\d/,hi=/\d\d/,li=/\d{3}/,ui=/\d{4}/,di=/[+-]?\d{6}/,ci=/\d\d?/,fi=/\d\d\d\d?/,pi=/\d\d\d\d\d\d?/,mi=/\d{1,3}/,vi=/\d{1,4}/,gi=/[+-]?\d{1,6}/,yi=/\d+/,bi=/[+-]?\d+/,_i=/Z|[+-]\d\d:?\d\d/gi,wi=/Z|[+-]\d\d(?::?\d\d)?/gi,xi=/[+-]?\d+(\.\d{1,3})?/,Si=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ki={},Ei={};W("Y",0,0,function(){var t=this.year();return 9999>=t?""+t:"+"+t}),W(0,["YY",2],0,function(){return this.year()%100}),W(0,["YYYY",4],0,"year"),W(0,["YYYYY",5],0,"year"),W(0,["YYYYYY",6,!0],0,"year"),B("year","y"),H("year",1),Z("Y",bi),Z("YY",ci,hi),Z("YYYY",vi,ui),Z("YYYYY",gi,di),Z("YYYYYY",gi,di),tt(["YYYYY","YYYYYY"],0),tt("YYYY",function(t,e){e[0]=2===t.length?l.parseTwoDigitYear(t):C(t)}),tt("YY",function(t,e){e[0]=l.parseTwoDigitYear(t)}),tt("Y",function(t,e){e[0]=parseInt(t,10)}),l.parseTwoDigitYear=function(t){return C(t)+(68<C(t)?1900:2e3)};var Mi,Ti=ot("FullYear",!0);Mi=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},W("M",["MM",2],"Mo",function(){return this.month()+1}),W("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),W("MMMM",0,0,function(t){return this.localeData().months(this,t)}),B("month","M"),H("month",8),Z("M",ci),Z("MM",ci,hi),Z("MMM",function(t,e){return e.monthsShortRegex(t)}),Z("MMMM",function(t,e){return e.monthsRegex(t)}),tt(["M","MM"],function(t,e){e[1]=C(t)-1}),tt(["MMM","MMMM"],function(t,e,i,n){var r=i._locale.monthsParse(t,n,i._strict);null==r?w(i).invalidMonth=t:e[1]=r});var Ci=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Oi=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];W("w",["ww",2],"wo","week"),W("W",["WW",2],"Wo","isoWeek"),B("week","w"),B("isoWeek","W"),H("week",5),H("isoWeek",5),Z("w",ci),Z("ww",ci,hi),Z("W",ci),Z("WW",ci,hi),et(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=C(t)}),W("d",0,"do","day"),W("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),W("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),W("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),W("e",0,0,"weekday"),W("E",0,0,"isoWeekday"),B("day","d"),B("weekday","e"),B("isoWeekday","E"),H("day",11),H("weekday",11),H("isoWeekday",11),Z("d",ci),Z("e",ci),Z("E",ci),Z("dd",function(t,e){return e.weekdaysMinRegex(t)}),Z("ddd",function(t,e){return e.weekdaysShortRegex(t)}),Z("dddd",function(t,e){return e.weekdaysRegex(t)}),et(["dd","ddd","dddd"],function(t,e,i,n){var r=i._locale.weekdaysParse(t,n,i._strict);null==r?w(i).invalidWeekday=t:e.d=r}),et(["d","e","E"],function(t,e,i,n){e[n]=C(t)});var Pi=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];W("H",["HH",2],0,"hour"),W("h",["hh",2],0,Ct),W("k",["kk",2],0,function(){return this.hours()||24}),W("hmm",0,0,function(){return""+Ct.apply(this)+G(this.minutes(),2)}),W("hmmss",0,0,function(){return""+Ct.apply(this)+G(this.minutes(),2)+G(this.seconds(),2)}),W("Hmm",0,0,function(){return""+this.hours()+G(this.minutes(),2)}),W("Hmmss",0,0,function(){return""+this.hours()+G(this.minutes(),2)+G(this.seconds(),2)}),Ot("a",!0),Ot("A",!1),B("hour","h"),H("hour",13),Z("a",Pt),Z("A",Pt),Z("H",ci),Z("h",ci),Z("k",ci),Z("HH",ci,hi),Z("hh",ci,hi),Z("kk",ci,hi),Z("hmm",fi),Z("hmmss",pi),Z("Hmm",fi),Z("Hmmss",pi),tt(["H","HH"],3),tt(["k","kk"],function(t,e){var i=C(t);e[3]=24===i?0:i}),tt(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),tt(["h","hh"],function(t,e,i){e[3]=C(t),w(i).bigHour=!0}),tt("hmm",function(t,e,i){var n=t.length-2;e[3]=C(t.substr(0,n)),e[4]=C(t.substr(n)),w(i).bigHour=!0}),tt("hmmss",function(t,e,i){var n=t.length-4,r=t.length-2;e[3]=C(t.substr(0,n)),e[4]=C(t.substr(n,2)),e[5]=C(t.substr(r)),w(i).bigHour=!0}),tt("Hmm",function(t,e){var i=t.length-2;e[3]=C(t.substr(0,i)),e[4]=C(t.substr(i))}),tt("Hmmss",function(t,e){var i=t.length-4,n=t.length-2;e[3]=C(t.substr(0,i)),e[4]=C(t.substr(i,2)),e[5]=C(t.substr(n))});var Ai,Di=/[ap]\.?m?\.?/i,Ii=ot("Hours",!0),Ri={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:ti,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:Oi,week:{dow:0,doy:6},weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekdaysShort:Pi,meridiemParse:Di},Li={},Ni={},Fi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,zi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Bi=/Z|[+-]\d\d(?::?\d\d)?/,ji=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ui=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Hi=/^\/?Date\((\-?\d+)/i,Vi=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Gi={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};l.createFromInputFallback=A("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),l.ISO_8601=function(){},l.RFC_2822=function(){};var Wi=A("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=oe.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:S()}),Yi=A("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=oe.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:S()}),$i=["year","quarter","month","week","day","hour","minute","second","millisecond"];de("Z",":"),de("ZZ",""),Z("Z",wi),Z("ZZ",wi),tt(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=ce(wi,t)});var qi=/([\+\-]|\d\d)/gi;l.updateOffset=function(){};var Xi=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Zi=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;ge.fn=he.prototype,ge.invalid=function(){return ge(NaN)};var Ki=we(1,"add"),Qi=we(-1,"subtract");l.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",l.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ji=A("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});W(0,["gg",2],0,function(){return this.weekYear()%100}),W(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Oe("gggg","weekYear"),Oe("ggggg","weekYear"),Oe("GGGG","isoWeekYear"),Oe("GGGGG","isoWeekYear"),B("weekYear","gg"),B("isoWeekYear","GG"),H("weekYear",1),H("isoWeekYear",1),Z("G",bi),Z("g",bi),Z("GG",ci,hi),Z("gg",ci,hi),Z("GGGG",vi,ui),Z("gggg",vi,ui),Z("GGGGG",gi,di),Z("ggggg",gi,di),et(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=C(t)}),et(["gg","GG"],function(t,e,i,n){e[n]=l.parseTwoDigitYear(t)}),W("Q",0,"Qo","quarter"),B("quarter","Q"),H("quarter",7),Z("Q",ai),tt("Q",function(t,e){e[1]=3*(C(t)-1)}),W("D",["DD",2],"Do","date"),B("date","D"),H("date",9),Z("D",ci),Z("DD",ci,hi),Z("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),tt(["D","DD"],2),tt("Do",function(t,e){e[2]=C(t.match(ci)[0])});var tn=ot("Date",!0);W("DDD",["DDDD",3],"DDDo","dayOfYear"),B("dayOfYear","DDD"),H("dayOfYear",4),Z("DDD",mi),Z("DDDD",li),tt(["DDD","DDDD"],function(t,e,i){i._dayOfYear=C(t)}),W("m",["mm",2],0,"minute"),B("minute","m"),H("minute",14),Z("m",ci),Z("mm",ci,hi),tt(["m","mm"],4);var en=ot("Minutes",!1);W("s",["ss",2],0,"second"),B("second","s"),H("second",15),Z("s",ci),Z("ss",ci,hi),tt(["s","ss"],5);var nn=ot("Seconds",!1);W("S",0,0,function(){return~~(this.millisecond()/100)}),W(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),W(0,["SSS",3],0,"millisecond"),W(0,["SSSS",4],0,function(){return 10*this.millisecond()}),W(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),W(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),W(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),W(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),W(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),B("millisecond","ms"),H("millisecond",16),Z("S",mi,ai),Z("SS",mi,hi),Z("SSS",mi,li);var rn;for(rn="SSSS";9>=rn.length;rn+="S")Z(rn,yi);for(rn="S";9>=rn.length;rn+="S")tt(rn,De);var on=ot("Milliseconds",!1);W("z",0,0,"zoneAbbr"),W("zz",0,0,"zoneName");var sn=E.prototype;sn.add=Ki,sn.calendar=function(t,e){var i=t||oe(),n=fe(i,this).startOf("day"),r=l.calendarFormat(this,n)||"sameElse",o=e&&(I(e[r])?e[r].call(this,i):e[r]);return this.format(o||this.localeData().calendar(r,this,oe(i)))},sn.clone=function(){return new E(this)},sn.diff=function(t,e,i){var n,r,o;return this.isValid()?(n=fe(t,this),n.isValid()?(r=6e4*(n.utcOffset()-this.utcOffset()),e=j(e),o="year"===e?Se(this,n)/12:"month"===e?Se(this,n):"quarter"===e?Se(this,n)/3:"second"===e?(this-n)/1e3:"minute"===e?(this-n)/6e4:"hour"===e?(this-n)/36e5:"day"===e?(this-n-r)/864e5:"week"===e?(this-n-r)/6048e5:this-n,i?o:T(o)):NaN):NaN},sn.endOf=function(t){var e;if(void 0===(t=j(t))||"millisecond"===t||!this.isValid())return this;var i=this._isUTC?Ce:Te;return"year"===t?e=i(this.year()+1,0,1)-1:"quarter"===t?e=i(this.year(),this.month()-this.month()%3+3,1)-1:"month"===t?e=i(this.year(),this.month()+1,1)-1:"week"===t?e=i(this.year(),this.month(),this.date()-this.weekday()+7)-1:"isoWeek"===t?e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1:"day"===t||"date"===t?e=i(this.year(),this.month(),this.date()+1)-1:"hour"===t?(e=this._d.valueOf(),e+=36e5-Me(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1):"minute"===t?(e=this._d.valueOf(),e+=6e4-Me(e,6e4)-1):"second"===t&&(e=this._d.valueOf(),e+=1e3-Me(e,1e3)-1),this._d.setTime(e),l.updateOffset(this,!0),this},sn.format=function(t){t||(t=this.isUtc()?l.defaultFormatUtc:l.defaultFormat);var e=q(this,t);return this.localeData().postformat(e)},sn.from=function(t,e){return this.isValid()&&(M(t)&&t.isValid()||oe(t).isValid())?ge({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},sn.fromNow=function(t){return this.from(oe(),t)},sn.to=function(t,e){return this.isValid()&&(M(t)&&t.isValid()||oe(t).isValid())?ge({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},sn.toNow=function(t){return this.to(oe(),t)},sn.get=function(t){return t=j(t),I(this[t])?this[t]():this},sn.invalidAt=function(){return w(this).overflow},sn.isAfter=function(t,e){var i=M(t)?t:oe(t);return!(!this.isValid()||!i.isValid())&&(e=j(e)||"millisecond","millisecond"===e?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())},sn.isBefore=function(t,e){var i=M(t)?t:oe(t);return!(!this.isValid()||!i.isValid())&&(e=j(e)||"millisecond","millisecond"===e?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())},sn.isBetween=function(t,e,i,n){var r=M(t)?t:oe(t),o=M(e)?e:oe(e);return!!(this.isValid()&&r.isValid()&&o.isValid())&&(n=n||"()",("("===n[0]?this.isAfter(r,i):!this.isBefore(r,i))&&(")"===n[1]?this.isBefore(o,i):!this.isAfter(o,i)))},sn.isSame=function(t,e){var i,n=M(t)?t:oe(t);return!(!this.isValid()||!n.isValid())&&(e=j(e)||"millisecond","millisecond"===e?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))},sn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},sn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},sn.isValid=function(){return x(this)},sn.lang=Ji,sn.locale=ke,sn.localeData=Ee,sn.max=Yi,sn.min=Wi,sn.parsingFlags=function(){return y({},w(this))},sn.set=ht,sn.startOf=function(t){var e;if(void 0===(t=j(t))||"millisecond"===t||!this.isValid())return this;var i=this._isUTC?Ce:Te;return"year"===t?e=i(this.year(),0,1):"quarter"===t?e=i(this.year(),this.month()-this.month()%3,1):"month"===t?e=i(this.year(),this.month(),1):"week"===t?e=i(this.year(),this.month(),this.date()-this.weekday()):"isoWeek"===t?e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)):"day"===t||"date"===t?e=i(this.year(),this.month(),this.date()):"hour"===t?(e=this._d.valueOf(),e-=Me(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)):"minute"===t?(e=this._d.valueOf(),e-=Me(e,6e4)):"second"===t&&(e=this._d.valueOf(),e-=Me(e,1e3)),this._d.setTime(e),l.updateOffset(this,!0),this},sn.subtract=Qi,sn.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},sn.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},sn.toDate=function(){return new Date(this.valueOf())},sn.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,i=e?this.clone().utc():this;return 0>i.year()||9999<i.year()?q(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):I(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",q(i,"Z")):q(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},sn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var i="["+t+'("]',n=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY",r=e+'[")]';return this.format(i+n+"-MM-DD[T]HH:mm:ss.SSS"+r)},sn.toJSON=function(){return this.isValid()?this.toISOString():null},sn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},sn.unix=function(){return a(this.valueOf()/1e3)},sn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},sn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},sn.year=Ti,sn.isLeapYear=function(){return rt(this.year())},sn.weekYear=function(t){return Pe.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},sn.isoWeekYear=function(t){return Pe.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},sn.quarter=sn.quarters=function(t){return null==t?h((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},sn.month=pt,sn.daysInMonth=function(){return ut(this.year(),this.month())},sn.week=sn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},sn.isoWeek=sn.isoWeeks=function(t){var e=_t(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},sn.weeksInYear=function(){var t=this.localeData()._week;return wt(this.year(),t.dow,t.doy)},sn.isoWeeksInYear=function(){return wt(this.year(),1,4)},sn.date=tn,sn.day=sn.days=function(t){if(!this.isValid())return null==t?NaN:this;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==t?e:(t=xt(t,this.localeData()),this.add(t-e,"d"))},sn.weekday=function(t){if(!this.isValid())return null==t?NaN:this;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},sn.isoWeekday=function(t){if(!this.isValid())return null==t?NaN:this;if(null!=t){var e=St(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},sn.dayOfYear=function(t){var i=e((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?i:this.add(t-i,"d")},sn.hour=sn.hours=Ii,sn.minute=sn.minutes=en,sn.second=sn.seconds=nn,sn.millisecond=sn.milliseconds=on,sn.utcOffset=function(t,e,i){var n,r=this._offset||0;if(!this.isValid())return null==t?NaN:this;if(null!=t){if("string"!=typeof t)16>o(t)&&!i&&(t*=60);else if(null===(t=ce(wi,t)))return this;return!this._isUTC&&e&&(n=pe(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),r!==t&&(!e||this._changeInProgress?xe(this,ge(t-r,"m"),1,!1):!this._changeInProgress&&(this._changeInProgress=!0,l.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:pe(this)},sn.utc=function(t){return this.utcOffset(0,t)},sn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(pe(this),"m")),this},sn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=ce(_i,this._i);null==t?this.utcOffset(0,!0):this.utcOffset(t)}return this},sn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?oe(t).utcOffset():0,0==(this.utcOffset()-t)%60)},sn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},sn.isLocal=function(){return!!this.isValid()&&!this._isUTC},sn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},sn.isUtc=ve,sn.isUTC=ve,sn.zoneAbbr=function(){return this._isUTC?"UTC":""},sn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},sn.dates=A("dates accessor is deprecated. Use date instead.",tn),sn.months=A("months accessor is deprecated. Use month instead",pt),sn.years=A("years accessor is deprecated. Use year instead",Ti),sn.zone=A("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return null==t?-this.utcOffset():("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this)}),sn.isDSTShifted=A("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",me);var an=N.prototype;an.calendar=F,an.longDateFormat=z,an.invalidDate=function(){return this._invalidDate},an.ordinal=function(t){return this._ordinal.replace("%d",t)},an.preparse=Ie,an.postformat=Ie,an.relativeTime=function(t,e,i,n){var r=this._relativeTime[i];return I(r)?r(t,e,i,n):r.replace(/%d/i,t)},an.pastFuture=function(t,e){var i=this._relativeTime[0<t?"future":"past"];return I(i)?i(e):i.replace(/%s/i,e)},an.set=R,an.months=function(t,e){return t?u(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Ci).test(e)?"format":"standalone"][t.month()]:u(this._months)?this._months:this._months.standalone},an.monthsShort=function(t,e){return t?u(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Ci.test(e)?"format":"standalone"][t.month()]:u(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},an.monthsParse=ct,an.monthsRegex=function(t){return this._monthsParseExact?(g(this,"_monthsRegex")||mt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(g(this,"_monthsRegex")||(this._monthsRegex=Si),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},an.monthsShortRegex=function(t){return this._monthsParseExact?(g(this,"_monthsRegex")||mt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(g(this,"_monthsShortRegex")||(this._monthsShortRegex=Si),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},an.week=function(t){return _t(t,this._week.dow,this._week.doy).week},an.firstDayOfYear=function(){return this._week.doy},an.firstDayOfWeek=function(){return this._week.dow},an.weekdays=function(t,e){var i=u(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?kt(i,this._week.dow):t?i[t.day()]:i},an.weekdaysMin=function(t){return!0===t?kt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},an.weekdaysShort=function(t){return!0===t?kt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},an.weekdaysParse=Mt,an.weekdaysRegex=function(t){return this._weekdaysParseExact?(g(this,"_weekdaysRegex")||Tt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(g(this,"_weekdaysRegex")||(this._weekdaysRegex=Si),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},an.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(g(this,"_weekdaysRegex")||Tt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(g(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Si),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},an.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(g(this,"_weekdaysRegex")||Tt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(g(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Si),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},an.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},an.meridiem=function(t,e,i){return 11<t?i?"pm":"PM":i?"am":"AM"},Rt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===C(t%100/10)?"th":1==e?"st":2==e?"nd":3==e?"rd":"th")}}),l.lang=A("moment.lang is deprecated. Use moment.locale instead.",Rt),l.langData=A("moment.langData is deprecated. Use moment.localeData instead.",Nt);var hn=o,ln=Ue("ms"),un=Ue("s"),dn=Ue("m"),cn=Ue("h"),fn=Ue("d"),pn=Ue("w"),mn=Ue("M"),vn=Ue("Q"),gn=Ue("y"),yn=He("milliseconds"),bn=He("seconds"),_n=He("minutes"),wn=He("hours"),xn=He("days"),Sn=He("months"),kn=He("years"),En=e,Mn={ss:44,s:45,m:45,h:22,d:26,M:11},Tn=o,Cn=he.prototype;return Cn.isValid=function(){return this._isValid},Cn.abs=function(){var t=this._data;return this._milliseconds=hn(this._milliseconds),this._days=hn(this._days),this._months=hn(this._months),t.milliseconds=hn(t.milliseconds),t.seconds=hn(t.seconds),t.minutes=hn(t.minutes),t.hours=hn(t.hours),t.months=hn(t.months),t.years=hn(t.years),this},Cn.add=function(t,e){return Fe(this,t,e,1)},Cn.subtract=function(t,e){return Fe(this,t,e,-1)},Cn.as=function(t){if(!this.isValid())return NaN;var i,n,r=this._milliseconds;if("month"===(t=j(t))||"quarter"===t||"year"===t)switch(i=this._days+r/864e5,n=this._months+Be(i),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(i=this._days+e(je(this._months)),t){case"week":return i/7+r/6048e5;case"day":return i+r/864e5;case"hour":return 24*i+r/36e5;case"minute":return 1440*i+r/6e4;case"second":return 86400*i+r/1e3;case"millisecond":return a(864e5*i)+r;default:throw new Error("Unknown unit "+t)}},Cn.asMilliseconds=ln,Cn.asSeconds=un,Cn.asMinutes=dn,Cn.asHours=cn,Cn.asDays=fn,Cn.asWeeks=pn,Cn.asMonths=mn,Cn.asQuarters=vn,Cn.asYears=gn,Cn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*C(this._months/12):NaN},Cn._bubble=function(){var t,e,i,n,r,o=this._milliseconds,s=this._days,a=this._months,h=this._data;return 0<=o&&0<=s&&0<=a||0>=o&&0>=s&&0>=a||(o+=864e5*ze(je(a)+s),s=0,a=0),h.milliseconds=o%1e3,t=T(o/1e3),h.seconds=t%60,e=T(t/60),h.minutes=e%60,i=T(e/60),h.hours=i%24,s+=T(i/24),r=T(Be(s)),a+=r,s-=ze(je(r)),n=T(a/12),a%=12,h.days=s,h.months=a,h.years=n,this},Cn.clone=function(){return ge(this)},Cn.get=function(t){return t=j(t),this.isValid()?this[t+"s"]():NaN},Cn.milliseconds=yn,Cn.seconds=bn,Cn.minutes=_n,Cn.hours=wn,Cn.days=xn,Cn.weeks=function(){return T(this.days()/7)},Cn.months=Sn,Cn.years=kn,Cn.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),i=Ge(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)},Cn.toISOString=$e,Cn.toString=$e,Cn.toJSON=$e,Cn.locale=ke,Cn.localeData=Ee,Cn.toIsoString=A("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",$e),Cn.lang=Ji,W("X",0,0,"unix"),W("x",0,0,"valueOf"),Z("x",bi),Z("X",xi),tt("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),tt("x",function(t,e,i){i._d=new Date(C(t))}),l.version="2.24.0",function(t){qe=t}(oe),l.fn=sn,l.min=function(){return se("isBefore",[].slice.call(arguments,0))},l.max=function(){return se("isAfter",[].slice.call(arguments,0))},l.now=function(){return Date.now?Date.now():+new Date},l.utc=b,l.unix=function(t){return oe(1e3*t)},l.months=function(t,e){return Le(t,e,"months")},l.isDate=m,l.locale=Rt,l.invalid=S,l.duration=ge,l.isMoment=M,l.weekdays=function(t,e,i){return Ne(t,e,i,"weekdays")},l.parseZone=function(){return oe.apply(null,arguments).parseZone()},l.localeData=Nt,l.isDuration=le,l.monthsShort=function(t,e){return Le(t,e,"monthsShort")},l.weekdaysMin=function(t,e,i){return Ne(t,e,i,"weekdaysMin")},l.defineLocale=Lt,l.updateLocale=function(t,e){if(null!=e){var i,n,r=Ri;n=It(t),null!=n&&(r=n._config),e=L(r,e),i=new N(e),i.parentLocale=Li[t],Li[t]=i,Rt(t)}else null!=Li[t]&&(null==Li[t].parentLocale?null!=Li[t]&&delete Li[t]:Li[t]=Li[t].parentLocale);return Li[t]},l.locales=Ft,l.weekdaysShort=function(t,e,i){return Ne(t,e,i,"weekdaysShort")},l.normalizeUnits=j,l.relativeTimeRounding=We,l.relativeTimeThreshold=function(t,e){return void 0!==Mn[t]&&(void 0===e?Mn[t]:(Mn[t]=e,"s"===t&&(Mn.ss=e-1),!0))},l.calendarFormat=function(t,e){var i=t.diff(e,"days",!0);return-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse"},l.prototype=sn,l.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},l}()}()})),fs=[],ps=0;256>ps;ps++)fs[ps]=(ps+256).toString(16).substr(1);for(var ms=function(){if("undefined"!=typeof crypto&&crypto.getRandomValues){var t=new Uint8Array(16);return function(){return crypto.getRandomValues(t),t}}var e=Array(16);return function(){for(var t,i=0;16>i;i++)0==(3&i)&&(t=4294967296*Math.random()),e[i]=255&t>>>((3&i)<<3);return e}}(),vs=[],gs=0;256>gs;gs++)vs[gs]=(gs+256).toString(16).substr(1);for(var ys=ms(),bs=(ys[0],ys[1],ys[2],ys[3],ys[4],ys[5],ys[6],ys[7],/^\/?Date\((-?\d+)/i),_s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ws=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,xs=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,Ss=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i,ks=Object.assign,Es=Object.values,Ms={asBoolean:function(t,e){return"function"==typeof t&&(t=t()),null==t?e||null:0!=t},asNumber:function(t,e){return"function"==typeof t&&(t=t()),null==t?e||null:+t||e||null},asString:function(t,e){return"function"==typeof t&&(t=t()),null==t?e||null:t+""},asSize:function(t,e){return"function"==typeof t&&(t=t()),g(t)?t:m(t)?t+"px":e||null},asElement:function(t,e){return"function"==typeof t&&(t=t()),t||e||null}},Ts={split:function(t){var e={};return t.split(";").forEach(function(t){if(""!=t.trim()){var i=t.split(":"),n=i[0].trim(),r=i[1].trim();e[n]=r}}),e},join:function(t){return Object.keys(t).map(function(e){return e+": "+t[e]}).join("; ")}},Cs={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return.5>t?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return.5>t?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return.5>t?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return.5>t?16*t*t*t*t*t:1+16*--t*t*t*t*t}},Os=Object.freeze({isNumber:m,recursiveDOMDelete:v,isString:g,isObject:y,isDate:b,isMoment:_,fillIfDefined:x,extend:ks,selectiveExtend:S,selectiveDeepExtend:k,selectiveNotDeepExtend:E,deepExtend:M,equalArray:T,convert:C,getType:O,copyAndExtendArray:P,copyArray:A,getAbsoluteLeft:D,getAbsoluteRight:I,getAbsoluteTop:R,addClassName:L,removeClassName:N,forEach:F,toArray:Es,updateProperty:z,throttle:B,addEventListener:j,removeEventListener:U,preventDefault:H,getTarget:V,hasParent:G,option:Ms,hexToRGB:W,overrideOpacity:Y,RGBToHex:$,parseColor:q,RGBToHSV:X,addCssText:Z,removeCssText:K,HSVToRGB:Q,HSVToHex:J,hexToHSV:tt,isValidHex:et,isValidRGB:it,isValidRGBA:nt,selectiveBridgeObject:rt,bridgeObject:ot,insertSort:st,mergeOptions:at,binarySearchCustom:ht,binarySearchValue:lt,easingFunctions:Cs,getScrollBarWidth:ut,topMost:dt,randomUUID:p}),Ps=Object.freeze({default:Os,HSVToHex:J,HSVToRGB:Q,RGBToHSV:X,RGBToHex:$,addClassName:L,addCssText:Z,addEventListener:j,binarySearchCustom:ht,binarySearchValue:lt,bridgeObject:ot,convert:C,copyAndExtendArray:P,copyArray:A,deepExtend:M,easingFunctions:Cs,equalArray:T,extend:ks,fillIfDefined:x,forEach:F,getAbsoluteLeft:D,getAbsoluteRight:I,getAbsoluteTop:R,getScrollBarWidth:ut,getTarget:V,getType:O,hasParent:G,hexToHSV:tt,hexToRGB:W,insertSort:st,isDate:b,isMoment:_,isNumber:m,isObject:y,isString:g,isValidHex:et,isValidRGB:it,isValidRGBA:nt,mergeOptions:at,option:Ms,overrideOpacity:Y,parseColor:q,preventDefault:H,randomUUID:p,recursiveDOMDelete:v,removeClassName:N,removeCssText:K,removeEventListener:U,selectiveBridgeObject:rt,selectiveDeepExtend:k,selectiveExtend:S,selectiveNotDeepExtend:E,throttle:B,toArray:Es,topMost:dt,updateProperty:z}),As=ct,Ds=ft(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(n){return t.exports=i="function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?function(t){return e(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)},i(n)}t.exports=i}),Is=pt,Rs=vt,Ls=gt,Ns=yt,Fs=ft(function(t){function e(i){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(i)}t.exports=e}),zs=ft(function(t){function e(i,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(i,n)}t.exports=e}),Bs=bt,js=[],Us=0;256>Us;Us++)js[Us]=(Us+256).toString(16).substr(1);for(var Hs=function(){if("undefined"!=typeof crypto&&crypto.getRandomValues){var t=new Uint8Array(16);return function(){return crypto.getRandomValues(t),t}}var e=Array(16);return function(){for(var t,i=0;16>i;i++)0==(3&i)&&(t=4294967296*Math.random()),e[i]=255&t>>>((3&i)<<3);return e}}(),Vs=[],Gs=0;256>Gs;Gs++)Vs[Gs]=(Gs+256).toString(16).substr(1);for(var Ws=Hs(),Ys=(Ws[0],Ws[1],Ws[2],Ws[3],Ws[4],Ws[5],Ws[6],Ws[7],"undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof t&&("undefined"==typeof self||self):window:globalThis,function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(t){var e=Math.round,i=Math.pow,n=Math.max,r=Math.abs,o=Math.min,s=Math.floor,a=Math.ceil;!function(e,i){t.exports=function(){function h(){return qe.apply(null,arguments)}function l(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function u(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function d(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function c(t){return void 0===t}function f(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function p(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function m(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function v(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function g(t,e){for(var i in e)v(e,i)&&(t[i]=e[i]);return v(e,"toString")&&(t.toString=e.toString),v(e,"valueOf")&&(t.valueOf=e.valueOf),t}function y(t,e,i,n){return re(t,e,i,n,!0).utc()}function b(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function _(t){return null==t._pf&&(t._pf=b()),t._pf}function w(t){if(null==t._isValid){var e=_(t),i=Xe.call(e.parsedDateParts,function(t){return null!=t}),n=!isNaN(t._d.getTime())&&0>e.overflow&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i);if(t._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function x(t){var e=y(NaN);return null==t?_(e).userInvalidated=!0:g(_(e),t),e}function S(t,e){var i,n,r;if(c(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),c(e._i)||(t._i=e._i),c(e._f)||(t._f=e._f),c(e._l)||(t._l=e._l),c(e._strict)||(t._strict=e._strict),c(e._tzm)||(t._tzm=e._tzm),c(e._isUTC)||(t._isUTC=e._isUTC),c(e._offset)||(t._offset=e._offset),c(e._pf)||(t._pf=_(e)),c(e._locale)||(t._locale=e._locale),0<Ze.length)for(i=0;i<Ze.length;i++)n=Ze[i],r=e[n],c(r)||(t[n]=r);return t}function k(t){S(this,t),this._d=new Date(null==t._d?NaN:t._d.getTime()),this.isValid()||(this._d=new Date(NaN)),!1===Ke&&(Ke=!0,h.updateOffset(this),Ke=!1)}function E(t){return t instanceof k||null!=t&&null!=t._isAMomentObject}function M(t){return 0>t?a(t)||0:s(t)}function T(t){var e=+t,i=0;return 0!=e&&isFinite(e)&&(i=M(e)),i}function C(t,e,i){var n,s=o(t.length,e.length),a=r(t.length-e.length),h=0;for(n=0;n<s;n++)(i&&t[n]!==e[n]||!i&&T(t[n])!==T(e[n]))&&h++;return h+a}function O(t){!1===h.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function P(t,e){var i=!0;return g(function(){if(null!=h.deprecationHandler&&h.deprecationHandler(null,t),i){for(var n,r=[],o=0;o<arguments.length;o++){if(n="","object"==typeof arguments[o]){for(var s in n+="\n["+o+"] ",arguments[0])n+=s+": "+arguments[0][s]+", ";n=n.slice(0,-2)}else n=arguments[o];r.push(n)}O(t+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack),i=!1}return e.apply(this,arguments)},e)}function A(t,e){null!=h.deprecationHandler&&h.deprecationHandler(t,e),Qe[t]||(O(e),Qe[t]=!0)}function D(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function I(t){var e,i;for(i in t)e=t[i],D(e)?this[i]=e:this["_"+i]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function R(t,e){var i,n=g({},t);for(i in e)v(e,i)&&(u(t[i])&&u(e[i])?(n[i]={},g(n[i],t[i]),g(n[i],e[i])):null==e[i]?delete n[i]:n[i]=e[i]);for(i in t)v(t,i)&&!v(e,i)&&u(t[i])&&(n[i]=g({},n[i]));return n}function L(t){null!=t&&this.set(t)}function N(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return D(n)?n.call(e,i):n}function F(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function z(t,e){var i=t.toLowerCase();ei[i]=ei[i+"s"]=ei[e]=t}function B(t){return"string"==typeof t?ei[t]||ei[t.toLowerCase()]:void 0}function j(t){var e,i,n={};for(i in t)v(t,i)&&(e=B(i))&&(n[e]=t[i]);return n}function U(t,e){ii[t]=e}function H(t){var e=[];for(var i in t)e.push({unit:i,priority:ii[i]});return e.sort(function(t,e){return t.priority-e.priority}),e}function V(t,e,o){var s=""+r(t),a=e-s.length;return(0<=t?o?"+":"":"-")+i(10,n(0,a)).toString().substr(1)+s}function G(t,e,i,n){var r=n;"string"==typeof n&&(r=function(){return this[n]()}),t&&(si[t]=r),e&&(si[e[0]]=function(){return V(r.apply(this,arguments),e[1],e[2])}),i&&(si[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function W(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function Y(t){var e,i,n=t.match(ni);for(e=0,i=n.length;e<i;e++)n[e]=si[n[e]]?si[n[e]]:W(n[e]);return function(e){var r,o="";for(r=0;r<i;r++)o+=D(n[r])?n[r].call(e,t):n[r];return o}}function $(t,e){return t.isValid()?(e=q(e,t.localeData()),oi[e]=oi[e]||Y(e),oi[e](t)):t.localeData().invalidDate()}function q(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(ri.lastIndex=0;0<=n&&ri.test(t);)t=t.replace(ri,i),ri.lastIndex=0,n-=1;return t}function X(t,e,i){ki[t]=D(e)?e:function(t){return t&&i?i:e}}function Z(t,e){return v(ki,t)?ki[t](e._strict,e._locale):new RegExp(K(t))}function K(t){return Q(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,r){return e||i||n||r}))}function Q(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function J(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),f(e)&&(n=function(t,i){i[e]=T(t)}),i=0;i<t.length;i++)Ei[t[i]]=n}function tt(t,e){J(t,function(t,i,n,r){n._w=n._w||{},e(t,n._w,n,r)})}function et(t,e,i){null!=e&&v(Ei,t)&&Ei[t](e,i._a,i,t)}function it(t){return nt(t)?366:365}function nt(t){return 0==t%4&&0!=t%100||0==t%400}function rt(t,e){return function(i){return null==i?ot(this,t):(st(this,t,i),h.updateOffset(this,e),this)}}function ot(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function st(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&nt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),lt(i,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function at(t,e){if("object"==typeof t){t=j(t);for(var i=H(t),n=0;n<i.length;n++)this[i[n].unit](t[i[n].unit])}else if(t=B(t),D(this[t]))return this[t](e);return this}function ht(t,e){return(t%e+e)%e}function lt(t,e){if(isNaN(t)||isNaN(e))return NaN;var i=ht(e,12);return t+=(e-i)/12,1===i?nt(t)?29:28:31-i%7%2}function ut(t,e,i){var n,r,o,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;12>n;++n)o=y([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(o,"").toLocaleLowerCase();return i?"MMM"===e?(r=Mi.call(this._shortMonthsParse,s),-1===r?null:r):(r=Mi.call(this._longMonthsParse,s),-1===r?null:r):"MMM"===e?-1!==(r=Mi.call(this._shortMonthsParse,s))?r:(r=Mi.call(this._longMonthsParse,s),-1===r?null:r):-1!==(r=Mi.call(this._longMonthsParse,s))?r:(r=Mi.call(this._shortMonthsParse,s),-1===r?null:r)}function dt(t,e,i){var n,r,o;if(this._monthsParseExact)return ut.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(r=y([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function ct(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=T(e);else if(e=t.localeData().monthsParse(e),!f(e))return t;return i=o(t.date(),lt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function ft(t){return null==t?ot(this,"Month"):(ct(this,t),h.updateOffset(this,!0),this)}function pt(){function t(t,e){return e.length-t.length}var e,i,n=[],r=[],o=[];for(e=0;12>e;e++)i=y([2e3,e]),n.push(this.monthsShort(i,"")),r.push(this.months(i,"")),o.push(this.months(i,"")),o.push(this.monthsShort(i,""));for(n.sort(t),r.sort(t),o.sort(t),e=0;12>e;e++)n[e]=Q(n[e]),r[e]=Q(r[e]);for(e=0;24>e;e++)o[e]=Q(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function mt(t,e,i,n,r,o,s){var a;return 100>t&&0<=t?(a=new Date(t+400,e,i,n,r,o,s),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,i,n,r,o,s),a}function vt(t){var e;if(100>t&&0<=t){var i=Array.prototype.slice.call(arguments);i[0]=t+400,e=new Date(Date.UTC.apply(null,i)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)}else e=new Date(Date.UTC.apply(null,arguments));return e}function gt(t,e,i){var n=7+e-i;return-(7+vt(t,0,n).getUTCDay()-e)%7+n-1}function yt(t,e,i,n,r){var o,s,a=gt(t,n,r),h=1+7*(e-1)+(7+i-n)%7+a;return 0>=h?(o=t-1,s=it(o)+h):h>it(t)?(o=t+1,s=h-it(t)):(o=t,s=h),{year:o,dayOfYear:s}}function bt(t,e,i){var n,r,o=gt(t.year(),e,i),a=s((t.dayOfYear()-o-1)/7)+1;return 1>a?(r=t.year()-1,n=a+_t(r,e,i)):a>_t(t.year(),e,i)?(n=a-_t(t.year(),e,i),r=t.year()+1):(r=t.year(),n=a),{week:n,year:r}}function _t(t,e,i){var n=gt(t,e,i),r=gt(t+1,e,i);return(it(t)-n+r)/7}function wt(t,e){return"string"==typeof t?isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10):t}function xt(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function kt(t,e){return t.slice(e,7).concat(t.slice(0,e))}function Et(t,e,i){var n,r,o,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;7>n;++n)o=y([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(o,"").toLocaleLowerCase();return i?"dddd"===e?(r=Mi.call(this._weekdaysParse,s),-1===r?null:r):"ddd"===e?(r=Mi.call(this._shortWeekdaysParse,s),-1===r?null:r):(r=Mi.call(this._minWeekdaysParse,s),-1===r?null:r):"dddd"===e?-1!==(r=Mi.call(this._weekdaysParse,s))?r:-1!==(r=Mi.call(this._shortWeekdaysParse,s))?r:(r=Mi.call(this._minWeekdaysParse,s),-1===r?null:r):"ddd"===e?-1!==(r=Mi.call(this._shortWeekdaysParse,s))?r:-1!==(r=Mi.call(this._weekdaysParse,s))?r:(r=Mi.call(this._minWeekdaysParse,s),-1===r?null:r):-1!==(r=Mi.call(this._minWeekdaysParse,s))?r:-1!==(r=Mi.call(this._weekdaysParse,s))?r:(r=Mi.call(this._shortWeekdaysParse,s),-1===r?null:r)}function Mt(t,e,i){var n,r,o;if(this._weekdaysParseExact)return Et.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;7>n;n++){if(r=y([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}}function Tt(){function t(t,e){return e.length-t.length}var e,i,n,r,o,s=[],a=[],h=[],l=[];for(e=0;7>e;e++)i=y([2e3,1]).day(e),n=this.weekdaysMin(i,""),r=this.weekdaysShort(i,""),o=this.weekdays(i,""),s.push(n),a.push(r),h.push(o),l.push(n),l.push(r),l.push(o);for(s.sort(t),a.sort(t),h.sort(t),l.sort(t),e=0;7>e;e++)a[e]=Q(a[e]),h[e]=Q(h[e]),l[e]=Q(l[e]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Ct(){return this.hours()%12||12}function Ot(t,e){G(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Pt(t,e){return e._meridiemParse}function At(t){return t?t.toLowerCase().replace("_","-"):t}function Dt(t){for(var e,i,n,r,o=0;o<t.length;){for(r=At(t[o]).split("-"),e=r.length,i=At(t[o+1]),i=i?i.split("-"):null;0<e;){if(n=It(r.slice(0,e).join("-")))return n;if(i&&i.length>=e&&C(r,i,!0)>=e-1)break;e--}o++}return Ai}function It(e){var i=null;if(!Li[e]&&t&&t.exports)try{i=Ai._abbr,St("./locale/"+e),Rt(i)}catch(e){}return Li[e]}function Rt(t,e){var i;return t&&(i=c(e)?Nt(t):Lt(t,e),i?Ai=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Ai._abbr}function Lt(t,e){if(null!==e){var i,n=Ri;if(e.abbr=t,null!=Li[t])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Li[t]._config;else if(null!=e.parentLocale)if(null!=Li[e.parentLocale])n=Li[e.parentLocale]._config;else{if(null==(i=It(e.parentLocale)))return Ni[e.parentLocale]||(Ni[e.parentLocale]=[]),Ni[e.parentLocale].push({name:t,config:e}),null;n=i._config}return Li[t]=new L(R(n,e)),Ni[t]&&Ni[t].forEach(function(t){Lt(t.name,t.config)}),Rt(t),Li[t]}return delete Li[t],null}function Nt(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Ai;if(!l(t)){if(e=It(t))return e;t=[t]}return Dt(t)}function Ft(){return Je(Li)}function zt(t){var e,i=t._a;return i&&-2===_(t).overflow&&(e=0>i[1]||11<i[1]?1:1>i[2]||i[2]>lt(i[0],i[1])?2:0>i[3]||24<i[3]||24===i[3]&&(0!==i[4]||0!==i[5]||0!==i[6])?3:0>i[4]||59<i[4]?4:0>i[5]||59<i[5]?5:0>i[6]||999<i[6]?6:-1,_(t)._overflowDayOfYear&&(0>e||2<e)&&(e=2),_(t)._overflowWeeks&&-1===e&&(e=7),_(t)._overflowWeekday&&-1===e&&(e=8),_(t).overflow=e),t}function Bt(t,e,i){return null==t?null==e?i:e:t}function jt(t){var e=new Date(h.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Ut(t){var e,i,n,r,o,s=[];if(!t._d){for(n=jt(t),t._w&&null==t._a[2]&&null==t._a[1]&&Ht(t),null!=t._dayOfYear&&(o=Bt(t._a[0],n[0]),(t._dayOfYear>it(o)||0===t._dayOfYear)&&(_(t)._overflowDayOfYear=!0),i=vt(o,0,t._dayOfYear),t._a[1]=i.getUTCMonth(),t._a[2]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=s[e]=n[e];for(;7>e;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?vt:mt).apply(null,s),r=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&"undefined"!=typeof t._w.d&&t._w.d!==r&&(_(t).weekdayMismatch=!0)}}function Ht(t){var e,i,n,r,o,s,a,h;if(e=t._w,null!=e.GG||null!=e.W||null!=e.E)o=1,s=4,i=Bt(e.GG,t._a[0],bt(oe(),1,4).year),n=Bt(e.W,1),(1>(r=Bt(e.E,1))||7<r)&&(h=!0);else{o=t._locale._week.dow,s=t._locale._week.doy;var l=bt(oe(),o,s);i=Bt(e.gg,t._a[0],l.year),n=Bt(e.w,l.week),null==e.d?null==e.e?r=o:(r=e.e+o,(0>e.e||6<e.e)&&(h=!0)):(0>(r=e.d)||6<r)&&(h=!0)}1>n||n>_t(i,o,s)?_(t)._overflowWeeks=!0:null==h?(a=yt(i,n,r,o,s),t._a[0]=a.year,t._dayOfYear=a.dayOfYear):_(t)._overflowWeekday=!0}function Vt(t){var e,i,n,r,o,s,a=t._i,h=Fi.exec(a)||zi.exec(a);if(h){for(_(t).iso=!0,e=0,i=ji.length;e<i;e++)if(ji[e][1].exec(h[1])){r=ji[e][0],n=!1!==ji[e][2];break}if(null==r)return void(t._isValid=!1);if(h[3]){for(e=0,i=Ui.length;e<i;e++)if(Ui[e][1].exec(h[3])){o=(h[2]||" ")+Ui[e][0];break}if(null==o)return void(t._isValid=!1)}if(!n&&null!=o)return void(t._isValid=!1);if(h[4]){if(!Bi.exec(h[4]))return void(t._isValid=!1);s="Z"}t._f=r+(o||"")+(s||""),Kt(t)}else t._isValid=!1}function Gt(t,e,i,n,r,o){var s=[Wt(t),Oi.indexOf(e),parseInt(i,10),parseInt(n,10),parseInt(r,10)];return o&&s.push(parseInt(o,10)),s}function Wt(t){var e=parseInt(t,10);return 49>=e?2e3+e:999>=e?1900+e:e}function Yt(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function $t(t,e,i){if(t){if(Pi.indexOf(t)!==new Date(e[0],e[1],e[2]).getDay())return _(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}function qt(t,e,i){if(t)return Gi[t];if(e)return 0;var n=parseInt(i,10),r=n%100;return(n-r)/100*60+r}function Xt(t){var e=Vi.exec(Yt(t._i));if(e){var i=Gt(e[4],e[3],e[2],e[5],e[6],e[7]);if(!$t(e[1],i,t))return;t._a=i,t._tzm=qt(e[8],e[9],e[10]),t._d=vt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),_(t).rfc2822=!0}else t._isValid=!1}function Zt(t){var e=Hi.exec(t._i);if(null!==e)return void(t._d=new Date(+e[1]));Vt(t),!1===t._isValid&&(delete t._isValid,Xt(t),!1===t._isValid&&(delete t._isValid,h.createFromInputFallback(t)))}function Kt(t){if(t._f===h.ISO_8601)return void Vt(t);if(t._f===h.RFC_2822)return void Xt(t);t._a=[],_(t).empty=!0;var e,i,n,r,o,s=""+t._i,a=s.length,l=0;for(n=q(t._f,t._locale).match(ni)||[],e=0;e<n.length;e++)r=n[e],i=(s.match(Z(r,t))||[])[0],i&&(o=s.substr(0,s.indexOf(i)),0<o.length&&_(t).unusedInput.push(o),s=s.slice(s.indexOf(i)+i.length),l+=i.length),si[r]?(i?_(t).empty=!1:_(t).unusedTokens.push(r),et(r,i,t)):t._strict&&!i&&_(t).unusedTokens.push(r);_(t).charsLeftOver=a-l,0<s.length&&_(t).unusedInput.push(s),12>=t._a[3]&&!0===_(t).bigHour&&0<t._a[3]&&(_(t).bigHour=void 0),_(t).parsedDateParts=t._a.slice(0),_(t).meridiem=t._meridiem,t._a[3]=Qt(t._locale,t._a[3],t._meridiem),Ut(t),zt(t)}function Qt(t,e,i){var n;return null==i?e:null==t.meridiemHour?null==t.isPM?e:(n=t.isPM(i),n&&12>e&&(e+=12),n||12!==e||(e=0),e):t.meridiemHour(e,i)}function Jt(t){var e,i,n,r,o;if(0===t._f.length)return _(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)o=0,e=S({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],Kt(e),!!w(e)&&(o+=_(e).charsLeftOver,o+=10*_(e).unusedTokens.length,_(e).score=o,(null==n||o<n)&&(n=o,i=e));g(t,i||e)}function te(t){if(!t._d){var e=j(t._i);t._a=m([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),Ut(t)}}function ee(t){var e=new k(zt(ie(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function ie(t){var e=t._i,i=t._f;return t._locale=t._locale||Nt(t._l),null===e||void 0===i&&""===e?x({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),E(e)?new k(zt(e)):(p(e)?t._d=e:l(i)?Jt(t):i?Kt(t):ne(t),w(t)||(t._d=null),t))}function ne(t){var e=t._i;c(e)?t._d=new Date(h.now()):p(e)?t._d=new Date(e.valueOf()):"string"==typeof e?Zt(t):l(e)?(t._a=m(e.slice(0),function(t){return parseInt(t,10)}),Ut(t)):u(e)?te(t):f(e)?t._d=new Date(e):h.createFromInputFallback(t)}function re(t,e,i,n,r){var o={};return(!0===i||!1===i)&&(n=i,i=void 0),(u(t)&&d(t)||l(t)&&0===t.length)&&(t=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=i,o._i=t,o._f=e,o._strict=n,ee(o)}function oe(t,e,i,n){return re(t,e,i,n,!1)}function se(t,e){var i,n;if(1===e.length&&l(e[0])&&(e=e[0]),!e.length)return oe();for(i=e[0],n=1;n<e.length;++n)(!e[n].isValid()||e[n][t](i))&&(i=e[n]);return i}function ae(t){for(var e in t)if(-1===Mi.call($i,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var i=!1,n=0;n<$i.length;++n)if(t[$i[n]]){if(i)return!1;parseFloat(t[$i[n]])!==T(t[$i[n]])&&(i=!0)}return!0}function he(t){var e=j(t),i=e.year||0,n=e.quarter||0,r=e.month||0,o=e.week||e.isoWeek||0,s=e.day||0,a=e.hour||0,h=e.minute||0,l=e.second||0,u=e.millisecond||0;this._isValid=ae(e),this._milliseconds=+u+1e3*l+6e4*h+1e3*a*60*60,this._days=+s+7*o,this._months=+r+3*n+12*i,this._data={},this._locale=Nt(),this._bubble()}function le(t){return t instanceof he}function ue(t){return 0>t?-1*e(-1*t):e(t)}function de(t,e){G(t,0,0,function(){var t=this.utcOffset(),i="+";return 0>t&&(t=-t,i="-"),i+V(~~(t/60),2)+e+V(~~t%60,2)})}function ce(t,e){var i=(e||"").match(t);if(null===i)return null;var n=i[i.length-1]||[],r=(n+"").match(qi)||["-",0,0],o=60*r[1]+T(r[2]);return 0===o?0:"+"===r[0]?o:-o}function fe(t,e){var i,n;return e._isUTC?(i=e.clone(),n=(E(t)||p(t)?t.valueOf():oe(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+n),h.updateOffset(i,!1),i):oe(t).local()}function pe(t){return 15*-e(t._d.getTimezoneOffset()/15)}function me(){if(!c(this._isDSTShifted))return this._isDSTShifted;var t={};if(S(t,this),t=ie(t),t._a){var e=t._isUTC?y(t._a):oe(t._a);this._isDSTShifted=this.isValid()&&0<C(t._a,e.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted}function ve(){return!!this.isValid()&&this._isUTC&&0===this._offset}function ge(t,e){var i,n,r,o=t,s=null;return le(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:f(t)?(o={},e?o[e]=t:o.milliseconds=t):(s=Xi.exec(t))?(i="-"===s[1]?-1:1,o={y:0,d:T(s[2])*i,h:T(s[3])*i,m:T(s[4])*i,s:T(s[5])*i,ms:T(ue(1e3*s[6]))*i}):(s=Zi.exec(t))?(i="-"===s[1]?-1:1,o={y:ye(s[2],i),M:ye(s[3],i),w:ye(s[4],i),d:ye(s[5],i),h:ye(s[6],i),m:ye(s[7],i),s:ye(s[8],i)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=_e(oe(o.from),oe(o.to)),o={},o.ms=r.milliseconds,o.M=r.months),n=new he(o),le(t)&&v(t,"_locale")&&(n._locale=t._locale),n}function ye(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function be(t,e){var i={};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function _e(t,e){var i;return t.isValid()&&e.isValid()?(e=fe(e,t),t.isBefore(e)?i=be(t,e):(i=be(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function we(t,e){return function(i,n){var r,o;return null===n||isNaN(+n)||(A(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=i,i=n,n=o),i="string"==typeof i?+i:i,r=ge(i,n),xe(this,r,t),this}}function xe(t,e,i,n){var r=e._milliseconds,o=ue(e._days),s=ue(e._months);t.isValid()&&(n=null==n||n,s&&ct(t,ot(t,"Month")+s*i),o&&st(t,"Date",ot(t,"Date")+o*i),r&&t._d.setTime(t._d.valueOf()+r*i),n&&h.updateOffset(t,o||s))}function Se(t,e){var i,n,r=12*(e.year()-t.year())+(e.month()-t.month()),o=t.clone().add(r,"months");return 0>e-o?(i=t.clone().add(r-1,"months"),n=(e-o)/(o-i)):(i=t.clone().add(r+1,"months"),n=(e-o)/(i-o)),-(r+n)||0}function ke(t){var e;return void 0===t?this._locale._abbr:(e=Nt(t),null!=e&&(this._locale=e),this)}function Ee(){return this._locale}function Me(t,e){return(t%e+e)%e}function Te(t,e,i){return 100>t&&0<=t?new Date(t+400,e,i)-126227808e5:new Date(t,e,i).valueOf()}function Ce(t,e,i){return 100>t&&0<=t?Date.UTC(t+400,e,i)-126227808e5:Date.UTC(t,e,i)}function Oe(t,e){G(0,[t,t.length],0,e)}function Pe(t,e,i,n,r){var o;return null==t?bt(this,n,r).year:(o=_t(t,n,r),e>o&&(e=o),Ae.call(this,t,e,i,n,r))}function Ae(t,e,i,n,r){var o=yt(t,e,i,n,r),s=vt(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function De(t,e){e[6]=T(1e3*("0."+t))}function Ie(t){return t}function Re(t,e,i,n){var r=Nt(),o=y().set(n,e);return r[i](o,t)}function Le(t,e,i){if(f(t)&&(e=t,t=void 0),t=t||"",null!=e)return Re(t,e,i,"month");var n,r=[];for(n=0;12>n;n++)r[n]=Re(t,n,i,"month");return r}function Ne(t,e,i,n){"boolean"==typeof t?(f(e)&&(i=e,e=void 0),e=e||""):(e=t,i=e,t=!1,f(e)&&(i=e,e=void 0),e=e||"");var r=Nt(),o=t?r._week.dow:0;if(null!=i)return Re(e,(i+o)%7,n,"day");var s,a=[];for(s=0;7>s;s++)a[s]=Re(e,(s+o)%7,n,"day");return a}function Fe(t,e,i,n){var r=ge(e,i);return t._milliseconds+=n*r._milliseconds,t._days+=n*r._days,t._months+=n*r._months,t._bubble()}function ze(t){return 0>t?s(t):a(t)}function Be(t){return 4800*t/146097}function je(t){return 146097*t/4800}function Ue(t){return function(){return this.as(t)}}function He(t){return function(){return this.isValid()?this._data[t]:NaN}}function Ve(t,e,i,n,r){return r.relativeTime(e||1,!!i,t,n)}function Ge(t,e,i){var n=ge(t).abs(),r=En(n.as("s")),o=En(n.as("m")),s=En(n.as("h")),a=En(n.as("d")),h=En(n.as("M")),l=En(n.as("y")),u=r<=Mn.ss&&["s",r]||r<Mn.s&&["ss",r]||1>=o&&["m"]||o<Mn.m&&["mm",o]||1>=s&&["h"]||s<Mn.h&&["hh",s]||1>=a&&["d"]||a<Mn.d&&["dd",a]||1>=h&&["M"]||h<Mn.M&&["MM",h]||1>=l&&["y"]||["yy",l];return u[2]=e,u[3]=0<+t,u[4]=i,Ve.apply(null,u)}function We(t){return void 0===t?En:"function"==typeof t&&(En=t,!0)}function Ye(t){return(0<t)-(0>t)||+t}function $e(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i,n=Tn(this._milliseconds)/1e3,r=Tn(this._days),o=Tn(this._months);t=M(n/60),e=M(t/60),n%=60,t%=60,i=M(o/12),o%=12;var s=i,a=o,h=r,l=e,u=t,d=n?n.toFixed(3).replace(/\.?0+$/,""):"",c=this.asSeconds();if(!c)return"P0D";var f=0>c?"-":"",p=Ye(this._months)===Ye(c)?"":"-",m=Ye(this._days)===Ye(c)?"":"-",v=Ye(this._milliseconds)===Ye(c)?"":"-";return f+"P"+(s?p+s+"Y":"")+(a?p+a+"M":"")+(h?m+h+"D":"")+(l||u||d?"T":"")+(l?v+l+"H":"")+(u?v+u+"M":"")+(d?v+d+"S":"")}var qe,Xe;Xe=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,n=0;n<i;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var Ze=h.momentProperties=[],Ke=!1,Qe={};h.suppressDeprecationWarnings=!1,h.deprecationHandler=null;var Je=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)v(t,e)&&i.push(e);return i},ti=/\d{1,2}/,ei={},ii={},ni=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ri=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,oi={},si={},ai=/\d/,hi=/\d\d/,li=/\d{3}/,ui=/\d{4}/,di=/[+-]?\d{6}/,ci=/\d\d?/,fi=/\d\d\d\d?/,pi=/\d\d\d\d\d\d?/,mi=/\d{1,3}/,vi=/\d{1,4}/,gi=/[+-]?\d{1,6}/,yi=/\d+/,bi=/[+-]?\d+/,_i=/Z|[+-]\d\d:?\d\d/gi,wi=/Z|[+-]\d\d(?::?\d\d)?/gi,xi=/[+-]?\d+(\.\d{1,3})?/,Si=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ki={},Ei={};G("Y",0,0,function(){var t=this.year();return 9999>=t?""+t:"+"+t}),G(0,["YY",2],0,function(){return this.year()%100}),G(0,["YYYY",4],0,"year"),G(0,["YYYYY",5],0,"year"),G(0,["YYYYYY",6,!0],0,"year"),z("year","y"),U("year",1),X("Y",bi),X("YY",ci,hi),X("YYYY",vi,ui),X("YYYYY",gi,di),X("YYYYYY",gi,di),J(["YYYYY","YYYYYY"],0),J("YYYY",function(t,e){e[0]=2===t.length?h.parseTwoDigitYear(t):T(t)}),J("YY",function(t,e){e[0]=h.parseTwoDigitYear(t)}),J("Y",function(t,e){e[0]=parseInt(t,10)}),h.parseTwoDigitYear=function(t){return T(t)+(68<T(t)?1900:2e3)};var Mi,Ti=rt("FullYear",!0);Mi=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},G("M",["MM",2],"Mo",function(){return this.month()+1}),G("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),G("MMMM",0,0,function(t){return this.localeData().months(this,t)}),z("month","M"),U("month",8),X("M",ci),X("MM",ci,hi),X("MMM",function(t,e){return e.monthsShortRegex(t)}),X("MMMM",function(t,e){return e.monthsRegex(t)}),J(["M","MM"],function(t,e){e[1]=T(t)-1}),J(["MMM","MMMM"],function(t,e,i,n){var r=i._locale.monthsParse(t,n,i._strict);null==r?_(i).invalidMonth=t:e[1]=r});var Ci=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Oi=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];G("w",["ww",2],"wo","week"),G("W",["WW",2],"Wo","isoWeek"),z("week","w"),z("isoWeek","W"),U("week",5),U("isoWeek",5),X("w",ci),X("ww",ci,hi),X("W",ci),X("WW",ci,hi),tt(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=T(t)}),G("d",0,"do","day"),G("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),G("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),G("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),G("e",0,0,"weekday"),G("E",0,0,"isoWeekday"),z("day","d"),z("weekday","e"),z("isoWeekday","E"),U("day",11),U("weekday",11),U("isoWeekday",11),X("d",ci),X("e",ci),X("E",ci),X("dd",function(t,e){return e.weekdaysMinRegex(t)}),X("ddd",function(t,e){return e.weekdaysShortRegex(t)}),X("dddd",function(t,e){return e.weekdaysRegex(t)}),tt(["dd","ddd","dddd"],function(t,e,i,n){var r=i._locale.weekdaysParse(t,n,i._strict);null==r?_(i).invalidWeekday=t:e.d=r}),tt(["d","e","E"],function(t,e,i,n){e[n]=T(t)});var Pi=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];G("H",["HH",2],0,"hour"),G("h",["hh",2],0,Ct),G("k",["kk",2],0,function(){return this.hours()||24}),G("hmm",0,0,function(){return""+Ct.apply(this)+V(this.minutes(),2)}),G("hmmss",0,0,function(){return""+Ct.apply(this)+V(this.minutes(),2)+V(this.seconds(),2)}),G("Hmm",0,0,function(){return""+this.hours()+V(this.minutes(),2)}),G("Hmmss",0,0,function(){return""+this.hours()+V(this.minutes(),2)+V(this.seconds(),2)}),Ot("a",!0),Ot("A",!1),z("hour","h"),U("hour",13),X("a",Pt),X("A",Pt),X("H",ci),X("h",ci),X("k",ci),X("HH",ci,hi),X("hh",ci,hi),X("kk",ci,hi),X("hmm",fi),X("hmmss",pi),X("Hmm",fi),X("Hmmss",pi),J(["H","HH"],3),J(["k","kk"],function(t,e){var i=T(t);e[3]=24===i?0:i}),J(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),J(["h","hh"],function(t,e,i){e[3]=T(t),_(i).bigHour=!0}),J("hmm",function(t,e,i){var n=t.length-2;e[3]=T(t.substr(0,n)),e[4]=T(t.substr(n)),_(i).bigHour=!0}),J("hmmss",function(t,e,i){var n=t.length-4,r=t.length-2;e[3]=T(t.substr(0,n)),e[4]=T(t.substr(n,2)),e[5]=T(t.substr(r)),_(i).bigHour=!0}),J("Hmm",function(t,e){var i=t.length-2;e[3]=T(t.substr(0,i)),e[4]=T(t.substr(i))}),J("Hmmss",function(t,e){var i=t.length-4,n=t.length-2;e[3]=T(t.substr(0,i)),e[4]=T(t.substr(i,2)),e[5]=T(t.substr(n))});var Ai,Di=/[ap]\.?m?\.?/i,Ii=rt("Hours",!0),Ri={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:ti,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:Oi,week:{dow:0,doy:6},weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekdaysShort:Pi,meridiemParse:Di},Li={},Ni={},Fi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,zi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Bi=/Z|[+-]\d\d(?::?\d\d)?/,ji=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ui=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Hi=/^\/?Date\((\-?\d+)/i,Vi=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Gi={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};h.createFromInputFallback=P("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),h.ISO_8601=function(){},h.RFC_2822=function(){};var Wi=P("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=oe.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:x()}),Yi=P("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=oe.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:x()}),$i=["year","quarter","month","week","day","hour","minute","second","millisecond"];de("Z",":"),de("ZZ",""),X("Z",wi),X("ZZ",wi),J(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=ce(wi,t)});var qi=/([\+\-]|\d\d)/gi;h.updateOffset=function(){};var Xi=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Zi=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;ge.fn=he.prototype,ge.invalid=function(){return ge(NaN)};var Ki=we(1,"add"),Qi=we(-1,"subtract");h.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",h.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ji=P("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});G(0,["gg",2],0,function(){return this.weekYear()%100}),G(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Oe("gggg","weekYear"),Oe("ggggg","weekYear"),Oe("GGGG","isoWeekYear"),Oe("GGGGG","isoWeekYear"),z("weekYear","gg"),z("isoWeekYear","GG"),U("weekYear",1),U("isoWeekYear",1),X("G",bi),X("g",bi),X("GG",ci,hi),X("gg",ci,hi),X("GGGG",vi,ui),X("gggg",vi,ui),X("GGGGG",gi,di),X("ggggg",gi,di),tt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=T(t)}),tt(["gg","GG"],function(t,e,i,n){e[n]=h.parseTwoDigitYear(t)}),G("Q",0,"Qo","quarter"),z("quarter","Q"),U("quarter",7),X("Q",ai),J("Q",function(t,e){e[1]=3*(T(t)-1)}),G("D",["DD",2],"Do","date"),z("date","D"),U("date",9),X("D",ci),X("DD",ci,hi),X("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),J(["D","DD"],2),J("Do",function(t,e){e[2]=T(t.match(ci)[0])});var tn=rt("Date",!0);G("DDD",["DDDD",3],"DDDo","dayOfYear"),z("dayOfYear","DDD"),U("dayOfYear",4),X("DDD",mi),X("DDDD",li),J(["DDD","DDDD"],function(t,e,i){i._dayOfYear=T(t)}),G("m",["mm",2],0,"minute"),z("minute","m"),U("minute",14),X("m",ci),X("mm",ci,hi),J(["m","mm"],4);var en=rt("Minutes",!1);G("s",["ss",2],0,"second"),z("second","s"),U("second",15),X("s",ci),X("ss",ci,hi),J(["s","ss"],5);var nn=rt("Seconds",!1);G("S",0,0,function(){return~~(this.millisecond()/100)}),G(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),G(0,["SSS",3],0,"millisecond"),G(0,["SSSS",4],0,function(){return 10*this.millisecond()}),G(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),G(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),G(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),G(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),G(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),z("millisecond","ms"),U("millisecond",16),X("S",mi,ai),X("SS",mi,hi),X("SSS",mi,li);var rn;for(rn="SSSS";9>=rn.length;rn+="S")X(rn,yi);for(rn="S";9>=rn.length;rn+="S")J(rn,De);var on=rt("Milliseconds",!1);G("z",0,0,"zoneAbbr"),G("zz",0,0,"zoneName");var sn=k.prototype;sn.add=Ki,sn.calendar=function(t,e){var i=t||oe(),n=fe(i,this).startOf("day"),r=h.calendarFormat(this,n)||"sameElse",o=e&&(D(e[r])?e[r].call(this,i):e[r]);return this.format(o||this.localeData().calendar(r,this,oe(i)))},sn.clone=function(){return new k(this)},sn.diff=function(t,e,i){var n,r,o;return this.isValid()?(n=fe(t,this),n.isValid()?(r=6e4*(n.utcOffset()-this.utcOffset()),e=B(e),o="year"===e?Se(this,n)/12:"month"===e?Se(this,n):"quarter"===e?Se(this,n)/3:"second"===e?(this-n)/1e3:"minute"===e?(this-n)/6e4:"hour"===e?(this-n)/36e5:"day"===e?(this-n-r)/864e5:"week"===e?(this-n-r)/6048e5:this-n,i?o:M(o)):NaN):NaN},sn.endOf=function(t){var e;if(void 0===(t=B(t))||"millisecond"===t||!this.isValid())return this;var i=this._isUTC?Ce:Te;return"year"===t?e=i(this.year()+1,0,1)-1:"quarter"===t?e=i(this.year(),this.month()-this.month()%3+3,1)-1:"month"===t?e=i(this.year(),this.month()+1,1)-1:"week"===t?e=i(this.year(),this.month(),this.date()-this.weekday()+7)-1:"isoWeek"===t?e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1:"day"===t||"date"===t?e=i(this.year(),this.month(),this.date()+1)-1:"hour"===t?(e=this._d.valueOf(),e+=36e5-Me(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1):"minute"===t?(e=this._d.valueOf(),e+=6e4-Me(e,6e4)-1):"second"===t&&(e=this._d.valueOf(),e+=1e3-Me(e,1e3)-1),this._d.setTime(e),h.updateOffset(this,!0),this},sn.format=function(t){t||(t=this.isUtc()?h.defaultFormatUtc:h.defaultFormat);var e=$(this,t);return this.localeData().postformat(e)},sn.from=function(t,e){return this.isValid()&&(E(t)&&t.isValid()||oe(t).isValid())?ge({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},sn.fromNow=function(t){return this.from(oe(),t)},sn.to=function(t,e){return this.isValid()&&(E(t)&&t.isValid()||oe(t).isValid())?ge({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},sn.toNow=function(t){return this.to(oe(),t)},sn.get=function(t){return t=B(t),D(this[t])?this[t]():this},sn.invalidAt=function(){return _(this).overflow},sn.isAfter=function(t,e){var i=E(t)?t:oe(t);return!(!this.isValid()||!i.isValid())&&(e=B(e)||"millisecond","millisecond"===e?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())},sn.isBefore=function(t,e){var i=E(t)?t:oe(t);return!(!this.isValid()||!i.isValid())&&(e=B(e)||"millisecond","millisecond"===e?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())},sn.isBetween=function(t,e,i,n){var r=E(t)?t:oe(t),o=E(e)?e:oe(e);return!!(this.isValid()&&r.isValid()&&o.isValid())&&(n=n||"()",("("===n[0]?this.isAfter(r,i):!this.isBefore(r,i))&&(")"===n[1]?this.isBefore(o,i):!this.isAfter(o,i)))},sn.isSame=function(t,e){var i,n=E(t)?t:oe(t);return!(!this.isValid()||!n.isValid())&&(e=B(e)||"millisecond","millisecond"===e?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))},sn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},sn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},sn.isValid=function(){return w(this)},sn.lang=Ji,sn.locale=ke,sn.localeData=Ee,sn.max=Yi,sn.min=Wi,sn.parsingFlags=function(){return g({},_(this))},sn.set=at,sn.startOf=function(t){var e;if(void 0===(t=B(t))||"millisecond"===t||!this.isValid())return this;var i=this._isUTC?Ce:Te;return"year"===t?e=i(this.year(),0,1):"quarter"===t?e=i(this.year(),this.month()-this.month()%3,1):"month"===t?e=i(this.year(),this.month(),1):"week"===t?e=i(this.year(),this.month(),this.date()-this.weekday()):"isoWeek"===t?e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)):"day"===t||"date"===t?e=i(this.year(),this.month(),this.date()):"hour"===t?(e=this._d.valueOf(),e-=Me(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)):"minute"===t?(e=this._d.valueOf(),e-=Me(e,6e4)):"second"===t&&(e=this._d.valueOf(),e-=Me(e,1e3)),this._d.setTime(e),h.updateOffset(this,!0),this},sn.subtract=Qi,sn.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},sn.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},sn.toDate=function(){return new Date(this.valueOf())},sn.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,i=e?this.clone().utc():this;return 0>i.year()||9999<i.year()?$(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):D(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",$(i,"Z")):$(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},sn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var i="["+t+'("]',n=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY",r=e+'[")]';return this.format(i+n+"-MM-DD[T]HH:mm:ss.SSS"+r)},sn.toJSON=function(){return this.isValid()?this.toISOString():null},sn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},sn.unix=function(){return s(this.valueOf()/1e3)},sn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},sn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},sn.year=Ti,sn.isLeapYear=function(){return nt(this.year())},sn.weekYear=function(t){return Pe.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},sn.isoWeekYear=function(t){return Pe.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},sn.quarter=sn.quarters=function(t){return null==t?a((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},sn.month=ft,sn.daysInMonth=function(){return lt(this.year(),this.month())},sn.week=sn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},sn.isoWeek=sn.isoWeeks=function(t){var e=bt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},sn.weeksInYear=function(){var t=this.localeData()._week;return _t(this.year(),t.dow,t.doy)},sn.isoWeeksInYear=function(){return _t(this.year(),1,4)},sn.date=tn,sn.day=sn.days=function(t){if(!this.isValid())return null==t?NaN:this;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==t?e:(t=wt(t,this.localeData()),this.add(t-e,"d"))},sn.weekday=function(t){if(!this.isValid())return null==t?NaN:this;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},sn.isoWeekday=function(t){if(!this.isValid())return null==t?NaN:this;if(null!=t){var e=xt(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},sn.dayOfYear=function(t){var i=e((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?i:this.add(t-i,"d")},sn.hour=sn.hours=Ii,sn.minute=sn.minutes=en,sn.second=sn.seconds=nn,sn.millisecond=sn.milliseconds=on,sn.utcOffset=function(t,e,i){var n,o=this._offset||0;if(!this.isValid())return null==t?NaN:this;if(null!=t){if("string"!=typeof t)16>r(t)&&!i&&(t*=60);else if(null===(t=ce(wi,t)))return this;return!this._isUTC&&e&&(n=pe(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),o!==t&&(!e||this._changeInProgress?xe(this,ge(t-o,"m"),1,!1):!this._changeInProgress&&(this._changeInProgress=!0,h.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:pe(this)},sn.utc=function(t){return this.utcOffset(0,t)},sn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(pe(this),"m")),this},sn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=ce(_i,this._i);null==t?this.utcOffset(0,!0):this.utcOffset(t)}return this},sn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?oe(t).utcOffset():0,0==(this.utcOffset()-t)%60)},sn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},sn.isLocal=function(){return!!this.isValid()&&!this._isUTC},sn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},sn.isUtc=ve,sn.isUTC=ve,sn.zoneAbbr=function(){return this._isUTC?"UTC":""},sn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},sn.dates=P("dates accessor is deprecated. Use date instead.",tn),sn.months=P("months accessor is deprecated. Use month instead",ft),sn.years=P("years accessor is deprecated. Use year instead",Ti),sn.zone=P("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return null==t?-this.utcOffset():("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this)}),sn.isDSTShifted=P("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",me);var an=L.prototype;an.calendar=N,an.longDateFormat=F,an.invalidDate=function(){return this._invalidDate},an.ordinal=function(t){return this._ordinal.replace("%d",t)},an.preparse=Ie,an.postformat=Ie,an.relativeTime=function(t,e,i,n){var r=this._relativeTime[i];return D(r)?r(t,e,i,n):r.replace(/%d/i,t)},an.pastFuture=function(t,e){var i=this._relativeTime[0<t?"future":"past"];return D(i)?i(e):i.replace(/%s/i,e)},an.set=I,an.months=function(t,e){return t?l(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Ci).test(e)?"format":"standalone"][t.month()]:l(this._months)?this._months:this._months.standalone},an.monthsShort=function(t,e){return t?l(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Ci.test(e)?"format":"standalone"][t.month()]:l(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},an.monthsParse=dt,an.monthsRegex=function(t){return this._monthsParseExact?(v(this,"_monthsRegex")||pt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(v(this,"_monthsRegex")||(this._monthsRegex=Si),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},an.monthsShortRegex=function(t){return this._monthsParseExact?(v(this,"_monthsRegex")||pt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(v(this,"_monthsShortRegex")||(this._monthsShortRegex=Si),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},an.week=function(t){return bt(t,this._week.dow,this._week.doy).week},an.firstDayOfYear=function(){return this._week.doy},an.firstDayOfWeek=function(){return this._week.dow},an.weekdays=function(t,e){var i=l(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?kt(i,this._week.dow):t?i[t.day()]:i},an.weekdaysMin=function(t){return!0===t?kt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},an.weekdaysShort=function(t){return!0===t?kt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},an.weekdaysParse=Mt,an.weekdaysRegex=function(t){return this._weekdaysParseExact?(v(this,"_weekdaysRegex")||Tt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(v(this,"_weekdaysRegex")||(this._weekdaysRegex=Si),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},an.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(v(this,"_weekdaysRegex")||Tt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(v(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Si),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},an.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(v(this,"_weekdaysRegex")||Tt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(v(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Si),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},an.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},an.meridiem=function(t,e,i){return 11<t?i?"pm":"PM":i?"am":"AM"},Rt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===T(t%100/10)?"th":1==e?"st":2==e?"nd":3==e?"rd":"th")}}),h.lang=P("moment.lang is deprecated. Use moment.locale instead.",Rt),h.langData=P("moment.langData is deprecated. Use moment.localeData instead.",Nt);var hn=r,ln=Ue("ms"),un=Ue("s"),dn=Ue("m"),cn=Ue("h"),fn=Ue("d"),pn=Ue("w"),mn=Ue("M"),vn=Ue("Q"),gn=Ue("y"),yn=He("milliseconds"),bn=He("seconds"),_n=He("minutes"),wn=He("hours"),xn=He("days"),Sn=He("months"),kn=He("years"),En=e,Mn={ss:44,s:45,m:45,h:22,d:26,M:11},Tn=r,Cn=he.prototype;return Cn.isValid=function(){return this._isValid},Cn.abs=function(){var t=this._data;return this._milliseconds=hn(this._milliseconds),this._days=hn(this._days),this._months=hn(this._months),t.milliseconds=hn(t.milliseconds),t.seconds=hn(t.seconds),t.minutes=hn(t.minutes),t.hours=hn(t.hours),t.months=hn(t.months),t.years=hn(t.years),this},Cn.add=function(t,e){return Fe(this,t,e,1)},Cn.subtract=function(t,e){return Fe(this,t,e,-1)},Cn.as=function(t){if(!this.isValid())return NaN;var i,n,r=this._milliseconds;if("month"===(t=B(t))||"quarter"===t||"year"===t)switch(i=this._days+r/864e5,n=this._months+Be(i),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(i=this._days+e(je(this._months)),t){case"week":return i/7+r/6048e5;case"day":return i+r/864e5;case"hour":return 24*i+r/36e5;case"minute":return 1440*i+r/6e4;case"second":return 86400*i+r/1e3;case"millisecond":return s(864e5*i)+r;default:throw new Error("Unknown unit "+t)}},Cn.asMilliseconds=ln,Cn.asSeconds=un,Cn.asMinutes=dn,Cn.asHours=cn,Cn.asDays=fn,Cn.asWeeks=pn,Cn.asMonths=mn,Cn.asQuarters=vn,Cn.asYears=gn,Cn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*T(this._months/12):NaN},Cn._bubble=function(){var t,e,i,n,r,o=this._milliseconds,s=this._days,a=this._months,h=this._data;return 0<=o&&0<=s&&0<=a||0>=o&&0>=s&&0>=a||(o+=864e5*ze(je(a)+s),s=0,a=0),h.milliseconds=o%1e3,t=M(o/1e3),h.seconds=t%60,e=M(t/60),h.minutes=e%60,i=M(e/60),h.hours=i%24,s+=M(i/24),r=M(Be(s)),a+=r,s-=ze(je(r)),n=M(a/12),a%=12,h.days=s,h.months=a,h.years=n,this},Cn.clone=function(){return ge(this)},Cn.get=function(t){return t=B(t),this.isValid()?this[t+"s"]():NaN},Cn.milliseconds=yn,Cn.seconds=bn,Cn.minutes=_n,Cn.hours=wn,Cn.days=xn,Cn.weeks=function(){return M(this.days()/7)},Cn.months=Sn,Cn.years=kn,Cn.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),i=Ge(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)},Cn.toISOString=$e,Cn.toString=$e,Cn.toJSON=$e,Cn.locale=ke,Cn.localeData=Ee,Cn.toIsoString=P("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",$e),Cn.lang=Ji,G("X",0,0,"unix"),G("x",0,0,"valueOf"),X("x",bi),X("X",xi),J("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),J("x",function(t,e,i){i._d=new Date(T(t))}),h.version="2.24.0",function(t){qe=t}(oe),h.fn=sn,h.min=function(){return se("isBefore",[].slice.call(arguments,0))},h.max=function(){return se("isAfter",[].slice.call(arguments,0))},h.now=function(){return Date.now?Date.now():+new Date},h.utc=y,h.unix=function(t){return oe(1e3*t)},h.months=function(t,e){return Le(t,e,"months")},h.isDate=p,h.locale=Rt,h.invalid=x,h.duration=ge,h.isMoment=E,h.weekdays=function(t,e,i){return Ne(t,e,i,"weekdays")},h.parseZone=function(){return oe.apply(null,arguments).parseZone()},h.localeData=Nt,h.isDuration=le,h.monthsShort=function(t,e){return Le(t,e,"monthsShort")},h.weekdaysMin=function(t,e,i){return Ne(t,e,i,"weekdaysMin")},h.defineLocale=Lt,h.updateLocale=function(t,e){if(null!=e){var i,n,r=Ri;n=It(t),null!=n&&(r=n._config),e=R(r,e),i=new L(e),i.parentLocale=Li[t],Li[t]=i,Rt(t)}else null!=Li[t]&&(null==Li[t].parentLocale?null!=Li[t]&&delete Li[t]:Li[t]=Li[t].parentLocale);return Li[t]},h.locales=Ft,h.weekdaysShort=function(t,e,i){return Ne(t,e,i,"weekdaysShort")},h.normalizeUnits=B,h.relativeTimeRounding=We,h.relativeTimeThreshold=function(t,e){return void 0!==Mn[t]&&(void 0===e?Mn[t]:(Mn[t]=e,"s"===t&&(Mn.ss=e-1),!0))},h.calendarFormat=function(t,e){var i=t.diff(e,"days",!0);return-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse"},h.prototype=sn,h.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},h}()}()})),$s=[],qs=0;256>qs;qs++)$s[qs]=(qs+256).toString(16).substr(1);for(var Xs=function(){if("undefined"!=typeof crypto&&crypto.getRandomValues){var t=new Uint8Array(16);return function(){return crypto.getRandomValues(t),t}}var e=Array(16);return function(){for(var t,i=0;16>i;i++)0==(3&i)&&(t=4294967296*Math.random()),e[i]=255&t>>>((3&i)<<3);return e}}(),Zs=[],Ks=0;256>Ks;Ks++)Zs[Ks]=(Ks+256).toString(16).substr(1);var Qs=Xs(),Js=(Qs[0],Qs[1],Qs[2],Qs[3],Qs[4],Qs[5],Qs[6],Qs[7],/^\/?Date\((-?\d+)/i),ta=function(){function t(e){Is(this,t),this._queue=[],this._timeout=null,this._extended=null,this.delay=null,this.max=1/0,this.setOptions(e)}return Rs(t,[{key:"setOptions",value:function(t){t&&"undefined"!=typeof t.delay&&(this.delay=t.delay),t&&"undefined"!=typeof t.max&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t,e=this._extended.object,i=this._extended.methods,n=0;n<i.length;n++)t=i[n],t.original?e[t.name]=t.original:delete e[t.name];this._extended=null}}},{key:"replace",value:function(t,e){var i=this,n=t[e];if(!n)throw new Error("Method "+e+" undefined");t[e]=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];i.queue({args:e,fn:n,context:this})}}},{key:"queue",value:function(t){"function"==typeof t?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),null!=this._timeout&&(clearTimeout(this._timeout),this._timeout=null),0<this.queue.length&&"number"==typeof this.delay&&(this._timeout=setTimeout(function(){t.flush()},this.delay))}},{key:"flush",value:function(){this._queue.splice(0).forEach(function(t){t.fn.apply(t.context||t.fn,t.args||[])})}}],[{key:"extend",value:function(e,i){var n=new t(i);if(void 0!==e.flush)throw new Error("Target object already has a property flush");e.flush=function(){n.flush()};var r=[{name:"flush",original:void 0}];if(i&&i.replace)for(var o,s=0;s<i.replace.length;s++)o=i.replace[s],r.push({name:o,original:e[o]}),n.replace(e,o);return n._extended={object:e,methods:r},n}}]),t}(),ea=Pt,ia=At,na=Dt,ra=It,oa=function(){function t(){Is(this,t),this._subscribers={"*":[],add:[],remove:[],update:[]},this.subscribe=t.prototype.on,this.unsubscribe=t.prototype.off}return Rs(t,[{key:"_trigger",value:function(t,e,i){if("*"===t)throw new Error("Cannot trigger event *");for(var n,r=[].concat(ra(this._subscribers[t]),ra(this._subscribers["*"])),o=0,s=r.length;o<s;o++)n=r[o],n.callback&&n.callback(t,e,null==i?null:i)}},{key:"on",value:function(t,e){this._subscribers[t].push({callback:e})}},{key:"off",value:function(t,e){this._subscribers[t]=this._subscribers[t].filter(function(t){return t.callback!==e})}}]),t}(),sa=function(t){function e(t,i){var n;if(Is(this,e),n=Ns(this,Fs(e).call(this)),t&&!Array.isArray(t)&&(i=t,t=[]),n._options=i||{},n._data=Object.create({}),n.length=0,n._idProp=n._options.fieldId||"id",n._type={},n._options.type)for(var r=Object.keys(n._options.type),o=0,s=r.length;o<s;o++){var a=r[o],h=n._options.type[a];n._type[a]="Date"==h||"ISODate"==h||"ASPDate"==h?"Date":h}return t&&t.length&&n.add(t),n.setOptions(i),n}return Bs(e,t),Rs(e,[{key:"setOptions",value:function(t){t&&void 0!==t.queue&&(!1===t.queue?this._queue&&(this._queue.destroy(),delete this._queue):(!this._queue&&(this._queue=ta.extend(this,{replace:["add","update","remove"]})),t.queue&&"object"===Ds(t.queue)&&this._queue.setOptions(t.queue)))}},{key:"add",value:function(t,e){var i,n=[];if(Array.isArray(t))for(var r=0,o=t.length;r<o;r++)i=this._addItem(t[r]),n.push(i);else{if(!t||"object"!==Ds(t))throw new Error("Unknown dataType");i=this._addItem(t),n.push(i)}return n.length&&this._trigger("add",{items:n},e),n}},{key:"update",value:function(t,e){var i=this,n=[],r=[],o=[],s=[],a=this._idProp,h=function(t){var e=t[a];if(null!=e&&i._data[e]){var h=t,l=Object.assign({},i._data[e]),u=i._updateItem(h);r.push(u),s.push(h),o.push(l)}else{var d=i._addItem(t);n.push(d)}};if(Array.isArray(t))for(var l=0,u=t.length;l<u;l++)t[l]&&"object"===Ds(t[l])?h(t[l]):console.warn("Ignoring input item, which is not an object at index "+l);else{if(!t||"object"!==Ds(t))throw new Error("Unknown dataType");h(t)}return n.length&&this._trigger("add",{items:n},e),r.length&&this._trigger("update",{items:r,oldData:o,data:s},e),n.concat(r)}},{key:"get",value:function(t,e){var i=void 0,n=void 0,r=void 0;Ot(t)?(i=t,r=e):Array.isArray(t)?(n=t,r=e):r=t;var o=r&&"Object"===r.returnType?"Object":"Array",s=r&&r.type||this._options.type,a=r&&r.filter,h=[],l=null,u=null,d=null;if(null!=i)(l=this._getItem(i,s))&&a&&!a(l)&&(l=null);else if(null!=n)for(var c=0,f=n.length;c<f;c++)null!=(l=this._getItem(n[c],s))&&(!a||a(l))&&h.push(l);else{u=Object.keys(this._data);for(var p=0,m=u.length;p<m;p++)d=u[p],null!=(l=this._getItem(d,s))&&(!a||a(l))&&h.push(l)}if(r&&r.order&&null==i&&this._sort(h,r.order),r&&r.fields){var v=r.fields;if(null!=i&&null!=l)l=this._filterFields(l,v);else for(var g=0,y=h.length;g<y;g++)h[g]=this._filterFields(h[g],v)}if("Object"==o){for(var b={},_=0,w=h.length;_<w;_++){var x=h[_];b[x[this._idProp]]=x}return b}return null==i?h:l}},{key:"getIds",value:function(t){var e,i,n=this._data,r=t&&t.filter,o=t&&t.order,s=t&&t.type||this._options.type,a=Object.keys(n),h=[];if(r)if(o){i=[];for(var l,u=0,d=a.length;u<d;u++)l=a[u],e=this._getItem(l,s),r(e)&&i.push(e);this._sort(i,o);for(var c=0,f=i.length;c<f;c++)h.push(i[c][this._idProp])}else for(var p,m=0,v=a.length;m<v;m++)p=a[m],e=this._getItem(p,s),r(e)&&h.push(e[this._idProp]);else if(o){i=[];for(var g,y=0,b=a.length;y<b;y++)g=a[y],i.push(n[g]);this._sort(i,o);for(var _=0,w=i.length;_<w;_++)h.push(i[_][this._idProp])}else for(var x,S=0,k=a.length;S<k;S++)x=a[S],e=n[x],h.push(e[this._idProp]);return h}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(t,e){var i=e&&e.filter,n=e&&e.type||this._options.type,r=this._data,o=Object.keys(r);if(e&&e.order)for(var s=this.get(e),a=0,h=s.length;a<h;a++){var l=s[a],u=l[this._idProp];t(l,u)}else for(var d=0,c=o.length;d<c;d++){var f=o[d],p=this._getItem(f,n);(!i||i(p))&&t(p,f)}}},{key:"map",value:function(t,e){for(var i=e&&e.filter,n=e&&e.type||this._options.type,r=[],o=this._data,s=Object.keys(o),a=0,h=s.length;a<h;a++){var l=s[a],u=this._getItem(l,n);(!i||i(u))&&r.push(t(u,l))}return e&&e.order&&this._sort(r,e.order),r}},{key:"_filterFields",value:function(t,e){return t?(Array.isArray(e)?e:Object.keys(e)).reduce(function(e,i){return e[i]=t[i],e},{}):t}},{key:"_sort",value:function(t,e){if("string"==typeof e){var i=e;t.sort(function(t,e){var n=t[i],r=e[i];return n>r?1:n<r?-1:0})}else{if("function"!=typeof e)throw new TypeError("Order must be a function or a string");t.sort(e)}}},{key:"remove",value:function(t,e){for(var i,n=[],r=[],o=Array.isArray(t)?t:[t],s=0,a=o.length;s<a;s++)if(i=this._remove(o[s])){var h=i[this._idProp];null!=h&&(n.push(h),r.push(i))}return n.length&&this._trigger("remove",{items:n,oldData:r},e),n}},{key:"_remove",value:function(t){var e;if(Ot(t)?e=t:t&&"object"===Ds(t)&&(e=t[this._idProp]),null!=e&&this._data[e]){var i=this._data[e];return delete this._data[e],--this.length,i}return null}},{key:"clear",value:function(t){for(var e=Object.keys(this._data),i=[],n=0,r=e.length;n<r;n++)i.push(this._data[e[n]]);return this._data={},this.length=0,this._trigger("remove",{items:e,oldData:i},t),e}},{key:"max",value:function(t){for(var e=this._data,i=Object.keys(e),n=null,r=null,o=0,s=i.length;o<s;o++){var a=i[o],h=e[a],l=h[t];null!=l&&(null==r||l>r)&&(n=h,r=l)}return n}},{key:"min",value:function(t){for(var e=this._data,i=Object.keys(e),n=null,r=null,o=0,s=i.length;o<s;o++){var a=i[o],h=e[a],l=h[t];null!=l&&(null==r||l<r)&&(n=h,r=l)}return n}},{key:"distinct",value:function(t){for(var e=this._data,i=Object.keys(e),n=[],r=this._options.type&&this._options.type[t]||null,o=0,s=0,a=i.length;s<a;s++){for(var h=i[s],l=e[h],u=l[t],d=!1,c=0;c<o;c++)if(n[c]==u){d=!0;break}d||void 0===u||(n[o]=u,o++)}if(r)for(var f=0,p=n.length;f<p;f++)n[f]=Tt(n[f],r);return n}},{key:"_addItem",value:function(t){var e=t[this._idProp];if(null==e)e=wt(),t[this._idProp]=e;else if(this._data[e])throw new Error("Cannot add item: item with id "+e+" already exists");for(var i={},n=Object.keys(t),r=0,o=n.length;r<o;r++){var s=n[r],a=this._type[s];i[s]=Tt(t[s],a)}return this._data[e]=i,this.length++,e}},{key:"_getItem",value:function(t,e){var i=this._data[t];if(!i)return null;var n,r=Object.keys(i);if(e){n={};for(var o=0,s=r.length;o<s;o++){var a=r[o],h=i[a];n[a]=Tt(h,e[a])}}else n=Lt({},i);return null==n[this._idProp]&&(n[this._idProp]=i.id),n}},{key:"_updateItem",value:function(t){var e=t[this._idProp];if(null==e)throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(t)+")");var i=this._data[e];if(!i)throw new Error("Cannot update item: no item with id "+e+" found");for(var n=Object.keys(t),r=0,o=n.length;r<o;r++){var s=n[r],a=this._type[s];i[s]=Tt(t[s],a)}return e}}]),e}(oa),aa=function(t){function e(t,i){var n;return Is(this,e),n=Ns(this,Fs(e).call(this)),n.length=0,n._ids={},n._options=i||{},n.listener=n._onEvent.bind(Ls(n)),n.setData(t),n}return Bs(e,t),Rs(e,[{key:"setData",value:function(t){if(this._data){this._data.off&&this._data.off("*",this.listener);var e=this._data.getIds({filter:this._options.filter}),i=this._data.get(e);this._ids={},this.length=0,this._trigger("remove",{items:e,oldData:i})}if(null!=t){this._data=t;for(var n,r=this._data.getIds({filter:this._options.filter}),o=0,s=r.length;o<s;o++)n=r[o],this._ids[n]=!0;this.length=r.length,this._trigger("add",{items:r})}else this._data=new sa;this._data.on&&this._data.on("*",this.listener)}},{key:"refresh",value:function(){for(var t,e=this._data.getIds({filter:this._options.filter}),i=Object.keys(this._ids),n={},r=[],o=[],s=[],a=0,h=e.length;a<h;a++)t=e[a],n[t]=!0,this._ids[t]||(r.push(t),this._ids[t]=!0);for(var l=0,u=i.length;l<u;l++){var d=i[l],c=this._data.get(d);null==c?console.error("If you see this, report it please."):!n[d]&&(o.push(d),s.push(c),delete this._ids[d])}this.length+=r.length-o.length,r.length&&this._trigger("add",{items:r}),o.length&&this._trigger("remove",{items:o,oldData:s})}},{key:"get",value:function(t,e){if(null==this._data)return null;var i,n=null;Ot(t)||Array.isArray(t)?(n=t,i=e):i=t;var r=Object.assign({},this._options,i),o=this._options.filter,s=i&&i.filter;return o&&s&&(r.filter=function(t){return o(t)&&s(t)}),null==n?this._data.get(r):this._data.get(n,r)}},{key:"getIds",value:function(t){if(this._data.length){var e,i=this._options.filter,n=null==t?null:t.filter;return e=n?i?function(t){return i(t)&&n(t)}:n:i,this._data.getIds({filter:e,order:t&&t.order})}return[]}},{key:"forEach",value:function(t,e){if(this._data){var i,n=this._options.filter,r=e&&e.filter;i=r?n?function(t){return n(t)&&r(t)}:r:n,this._data.forEach(t,{filter:i,order:e&&e.order})}}},{key:"map",value:function(t,e){if(this._data){var i,n=this._options.filter,r=e&&e.filter;return i=r?n?function(t){return n(t)&&r(t)}:r:n,this._data.map(t,{filter:i,order:e&&e.order})}return[]}},{key:"getDataSet",value:function(){return this._data.getDataSet()}},{key:"_onEvent",value:function(t,e,i){if(e&&e.items&&this._data){var n=e.items,r=[],o=[],s=[],a=[],h=[],l=[];switch(t){case"add":for(var u=0,d=n.length;u<d;u++){var c=n[u];this.get(c)&&(this._ids[c]=!0,r.push(c))}break;case"update":for(var f=0,p=n.length;f<p;f++){var m=n[f];this.get(m)?this._ids[m]?(o.push(m),h.push(e.data[f]),a.push(e.oldData[f])):(this._ids[m]=!0,r.push(m)):this._ids[m]&&(delete this._ids[m],s.push(m),l.push(e.oldData[f]))}break;case"remove":for(var v,g=0,y=n.length;g<y;g++)v=n[g],this._ids[v]&&(delete this._ids[v],s.push(v),l.push(e.oldData[g]))}this.length+=r.length-s.length,r.length&&this._trigger("add",{items:r},i),o.length&&this._trigger("update",{items:o,oldData:a,data:h},i),s.length&&this._trigger("remove",{items:s,oldData:l},i)}}}]),e}(oa),ha={DataSet:sa,DataView:aa,Queue:ta},la=Object.freeze({default:ha,DataSet:sa,DataView:aa,Queue:ta});"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.circle=function(t,e,i){this.beginPath(),this.arc(t,e,i,0,2*Math.PI,!1),this.closePath()},CanvasRenderingContext2D.prototype.square=function(t,e,i){this.beginPath(),this.rect(t-i,e-i,2*i,2*i),this.closePath()},CanvasRenderingContext2D.prototype.triangle=function(t,e,i){var n=Math.sqrt;this.beginPath(),i*=1.15,e+=.275*i;var r=2*i,o=r/2,s=n(3)/6*r,a=n(r*r-o*o);this.moveTo(t,e-(a-s)),this.lineTo(t+o,e+s),this.lineTo(t-o,e+s),this.lineTo(t,e-(a-s)),this.closePath()},CanvasRenderingContext2D.prototype.triangleDown=function(t,e,i){var n=Math.sqrt;this.beginPath(),i*=1.15,e-=.275*i;var r=2*i,o=r/2,s=n(3)/6*r,a=n(r*r-o*o);this.moveTo(t,e+(a-s)),this.lineTo(t+o,e-s),this.lineTo(t-o,e-s),this.lineTo(t,e+(a-s)),this.closePath()},CanvasRenderingContext2D.prototype.star=function(t,e,i){var n=Math.cos,r=Math.sin,o=Math.PI;this.beginPath(),i*=.82,e+=.1*i;for(var s,a=0;10>a;a++)s=0==a%2?1.3*i:.5*i,this.lineTo(t+s*r(2*a*o/10),e-s*n(2*a*o/10));this.closePath()},CanvasRenderingContext2D.prototype.diamond=function(t,e,i){this.beginPath(),this.lineTo(t,e+i),this.lineTo(t+i,e),this.lineTo(t,e-i),this.lineTo(t-i,e),this.closePath()},CanvasRenderingContext2D.prototype.roundRect=function(t,e,i,n,r){var o=Math.PI/180;0>i-2*r&&(r=i/2),0>n-2*r&&(r=n/2),this.beginPath(),this.moveTo(t+r,e),this.lineTo(t+i-r,e),this.arc(t+i-r,e+r,r,270*o,360*o,!1),this.lineTo(t+i,e+n-r),this.arc(t+i-r,e+n-r,r,0,90*o,!1),this.lineTo(t+r,e+n),this.arc(t+r,e+n-r,r,90*o,180*o,!1),this.lineTo(t,e+r),this.arc(t+r,e+r,r,180*o,270*o,!1),this.closePath()},CanvasRenderingContext2D.prototype.ellipse_vis=function(t,e,i,n){var r=.5522848,o=i/2*r,s=n/2*r,a=t+i,h=e+n,l=t+i/2,u=e+n/2;this.beginPath(),this.moveTo(t,u),this.bezierCurveTo(t,u-s,l-o,e,l,e),this.bezierCurveTo(l+o,e,a,u-s,a,u),this.bezierCurveTo(a,u+s,l+o,h,l,h),this.bezierCurveTo(l-o,h,t,u+s,t,u),this.closePath()},CanvasRenderingContext2D.prototype.database=function(t,e,i,n){var r=i,o=n*(1/3),s=.5522848,a=r/2*s,h=o/2*s,l=t+r,u=e+o,d=t+r/2,c=e+o/2,f=e+(n-o/2),p=e+n;this.beginPath(),this.moveTo(l,c),this.bezierCurveTo(l,c+h,d+a,u,d,u),this.bezierCurveTo(d-a,u,t,c+h,t,c),this.bezierCurveTo(t,c-h,d-a,e,d,e),this.bezierCurveTo(d+a,e,l,c-h,l,c),this.lineTo(l,f),this.bezierCurveTo(l,f+h,d+a,p,d,p),this.bezierCurveTo(d-a,p,t,f+h,t,f),this.lineTo(t,c)},CanvasRenderingContext2D.prototype.dashedLine=function(t,e,i,n,r){var o=Math.sqrt;this.beginPath(),this.moveTo(t,e);for(var s=r.length,a=i-t,h=n-e,l=h/a,u=o(a*a+h*h),d=0,c=!0,f=0,p=+r[0];.1<=u;)p=+r[d++%s],p>u&&(p=u),f=o(p*p/(1+l*l)),f=0>a?-f:f,t+=f,e+=l*f,!0===c?this.lineTo(t,e):this.moveTo(t,e),u-=p,c=!c},CanvasRenderingContext2D.prototype.hexagon=function(t,e,i){this.beginPath();var n=2*Math.PI/6;this.moveTo(t+i,e);for(var r=1;r<6;r++)this.lineTo(t+i*Math.cos(n*r),e+i*Math.sin(n*r));this.closePath()});var ua=("undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof t&&("undefined"==typeof self||self):window:globalThis,Ft(function(t){function e(t){if(t)return i(t)}function i(t){for(var i in e.prototype)t[i]=e.prototype[i];return t}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n,r=0;r<i.length;r++)if((n=i[r])===e||n.fn===e){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=Array(arguments.length-1),i=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(i){i=i.slice(0);for(var n=0,r=i.length;n<r;++n)i[n].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}})),da={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},ca=Object.create(da);ca.color="color.color",ca.style="dashes";var fa={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},pa={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},ma="",va=0,ga="",ya="",ba=fa.NULL,_a=/[a-zA-Z_0-9.:#]/,wa=zt,xa=he,Sa={parseDOT:wa,DOTToGraph:xa},ka=Object.freeze({default:Sa,__moduleExports:Sa,parseDOT:wa,DOTToGraph:xa}),Ea=Object.freeze({parseGephi:le}),Ma=Object.freeze({}),Ta=Ft(function(t){!function(e,i){t.exports=function(){function t(t){var e,i=String.fromCharCode,n=t&&t.preventDefault||!1,r=t&&t.container||window,o={},s={keydown:{},keyup:{}},a={};for(e=97;122>=e;e++)a[i(e)]={code:e-97+65,shift:!1};for(e=65;90>=e;e++)a[i(e)]={code:e,shift:!0};for(e=0;9>=e;e++)a[""+e]={code:48+e,shift:!1};for(e=1;12>=e;e++)a["F"+e]={code:111+e,shift:!1};for(e=0;9>=e;e++)a["num"+e]={code:96+e,shift:!1};a["num*"]={code:106,shift:!1},a["num+"]={code:107,shift:!1},a["num-"]={code:109,shift:!1},a["num/"]={code:111,shift:!1},a["num."]={code:110,shift:!1},a.left={code:37,shift:!1},a.up={code:38,shift:!1},a.right={code:39,shift:!1},a.down={code:40,shift:!1},a.space={code:32,shift:!1},a.enter={code:13,shift:!1},a.shift={code:16,shift:void 0},a.esc={code:27,shift:!1},a.backspace={code:8,shift:!1},a.tab={code:9,shift:!1},a.ctrl={code:17,shift:!1},a.alt={code:18,shift:!1},a.delete={code:46,shift:!1},a.pageup={code:33,shift:!1},a.pagedown={code:34,shift:!1},a["="]={code:187,shift:!1},a["-"]={code:189,shift:!1},a["]"]={code:221,shift:!1},a["["]={code:219,shift:!1};var h=function(t){u(t,"keydown")},l=function(t){u(t,"keyup")},u=function(t,e){if(void 0!==s[e][t.keyCode]){for(var i=s[e][t.keyCode],r=0;r<i.length;r++)void 0===i[r].shift?i[r].fn(t):1==i[r].shift&&1==t.shiftKey?i[r].fn(t):0==i[r].shift&&0==t.shiftKey&&i[r].fn(t);1==n&&t.preventDefault()}};return o.bind=function(t,e,i){if(void 0===i&&(i="keydown"),void 0===a[t])throw new Error("unsupported key: "+t);void 0===s[i][a[t].code]&&(s[i][a[t].code]=[]),s[i][a[t].code].push({fn:e,shift:a[t].shift})},o.bindAll=function(t,e){for(var i in void 0===e&&(e="keydown"),a)a.hasOwnProperty(i)&&o.bind(i,t,e)},o.getKey=function(t){for(var e in a)if(a.hasOwnProperty(e)){if(1==t.shiftKey&&1==a[e].shift&&t.keyCode==a[e].code)return e;if(0==t.shiftKey&&0==a[e].shift&&t.keyCode==a[e].code)return e;if(t.keyCode==a[e].code&&"shift"==e)return e}return"unknown key, currently not supported"},o.unbind=function(t,e,i){if(void 0===i&&(i="keydown"),void 0===a[t])throw new Error("unsupported key: "+t);if(void 0!==e){var n=[],r=s[i][a[t].code];if(void 0!==r)for(var o=0;o<r.length;o++)(r[o].fn!=e||r[o].shift!=a[t].shift)&&n.push(s[i][a[t].code][o]);s[i][a[t].code]=n}else s[i][a[t].code]=[]},o.reset=function(){s={keydown:{},keyup:{}}},o.destroy=function(){s={keydown:{},keyup:{}},r.removeEventListener("keydown",h,!0),r.removeEventListener("keyup",l,!0)},r.addEventListener("keydown",h,!0),r.addEventListener("keyup",l,!0),o}return t}()}()}),Ca=Object.freeze({default:Ta,__moduleExports:Ta}),Oa="function"==typeof Object.assign?Object.assign:function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e,i=Object(t),n=1;n<arguments.length;n++)if(void 0!==(e=arguments[n])&&null!==e)for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return i},Pa=Oa,Aa=["","webkit","Moz","MS","ms","o"],Da="undefined"==typeof document?{style:{}}:document.createElement("div"),Ia="function",Ra=Math.round,La=Math.abs,Na=Date.now,Fa="undefined"==typeof window?{}:window,za=fe(Da.style,"touchAction"),Ba=void 0!==za,ja="auto",Ua="manipulation",Ha="none",Va="pan-x",Ga="pan-y",Wa=function(){if(!Ba)return!1;var t={},e=Fa.CSS&&Fa.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){return t[i]=!e||Fa.CSS.supports("touch-action",i)}),t}(),Ya=/mobile|tablet|ip(ad|hone|od)|android/i,$a="ontouchstart"in Fa,qa=void 0!==fe(Fa,"PointerEvent"),Xa=$a&&Ya.test(navigator.userAgent),Za="touch",Ka="mouse",Qa=25,Ja=1,th=2,eh=4,ih=8,nh=1,rh=2,oh=4,sh=8,ah=16,hh=rh|oh,lh=sh|ah,uh=hh|lh,dh=["x","y"],ch=["clientX","clientY"],fh=function(){function t(t,e){this.manager=t,this.set(e)}var e=t.prototype;return e.set=function(t){"compute"===t&&(t=this.compute()),Ba&&this.manager.element.style&&Wa[t]&&(this.manager.element.style[za]=t),this.actions=t.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var t=[];return pe(this.manager.recognizers,function(e){me(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),ge(t.join(" "))},e.preventDefaults=function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,r=ve(n,Ha)&&!Wa[Ha],o=ve(n,Ga)&&!Wa[Ga],s=ve(n,Va)&&!Wa[Va];if(r){var a=1===t.pointers.length,h=2>t.distance,l=250>t.deltaTime;if(a&&h&&l)return}return s&&o?void 0:r||o&&i&hh||s&&i&lh?this.preventSrc(e):void 0},e.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},t}(),ph=function(){function t(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){me(t.options.enable,[t])&&i.handler(e)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&De(this.element,this.evEl,this.domHandler),this.evTarget&&De(this.target,this.evTarget,this.domHandler),this.evWin&&De(Re(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Ie(this.element,this.evEl,this.domHandler),this.evTarget&&Ie(this.target,this.evTarget,this.domHandler),this.evWin&&Ie(Re(this.element),this.evWin,this.domHandler)},t}(),mh={pointerdown:Ja,pointermove:th,pointerup:eh,pointercancel:ih,pointerout:ih},vh={2:Za,3:"pen",4:Ka,5:"kinect"},gh="pointerdown",yh="pointermove pointerup pointercancel";Fa.MSPointerEvent&&!Fa.PointerEvent&&(gh="MSPointerDown",yh="MSPointerMove MSPointerUp MSPointerCancel");var bh=function(t){function e(){var i,n=e.prototype;return n.evEl=gh,n.evWin=yh,i=t.apply(this,arguments)||this,i.store=i.manager.session.pointerEvents=[],i}return de(e,t),e.prototype.handler=function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=mh[n],o=vh[t.pointerType]||t.pointerType,s=Le(e,t.pointerId,"pointerId");r&Ja&&(0===t.button||o===Za)?0>s&&(e.push(t),s=e.length-1):r&(eh|ih)&&(i=!0),0>s||(e[s]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(s,1))},e}(ph),_h={touchstart:Ja,touchmove:th,touchend:eh,touchcancel:ih},wh="touchstart touchmove touchend touchcancel",xh=function(t){function e(){var i;return e.prototype.evTarget=wh,i=t.apply(this,arguments)||this,i.targetIds={},i}return de(e,t),e.prototype.handler=function(t){var e=_h[t.type],i=ze.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:Za,srcEvent:t})},e}(ph),Sh={mousedown:Ja,mousemove:th,mouseup:eh},kh="mousedown",Eh="mousemove mouseup",Mh=function(t){function e(){var i,n=e.prototype;return n.evEl=kh,n.evWin=Eh,i=t.apply(this,arguments)||this,i.pressed=!1,i}return de(e,t),e.prototype.handler=function(t){var e=Sh[t.type];e&Ja&&0===t.button&&(this.pressed=!0),e&th&&1!==t.which&&(e=eh),this.pressed&&(e&eh&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Ka,srcEvent:t}))},e}(ph),Th=2500,Ch=25,Oh=function(){return function(t){function e(e,i){var n;return n=t.call(this,e,i)||this,n.handler=function(t,e,i){var r=i.pointerType===Za,o=i.pointerType===Ka;if(!(o&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(r)je.call(ce(ce(n)),e,i);else if(o&&Ue.call(ce(ce(n)),i))return;n.callback(t,e,i)}},n.touch=new xh(n.manager,n.handler),n.mouse=new Mh(n.manager,n.handler),n.primaryTouch=null,n.lastTouches=[],n}return de(e,t),e.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},e}(ph)}(),Ph=1,Ah=2,Dh=4,Ih=8,Rh=Ih,Lh=16,Nh=1,Fh=function(){function t(t){void 0===t&&(t={}),this.options=ue({enable:!0},t),this.id=Ge(),this.manager=null,this.state=Ph,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(t){return Pa(this.options,t),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(t){if(Ve(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=We(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},e.dropRecognizeWith=function(t){return Ve(t,"dropRecognizeWith",this)?this:(t=We(t,this),delete this.simultaneous[t.id],this)},e.requireFailure=function(t){if(Ve(t,"requireFailure",this))return this;var e=this.requireFail;return t=We(t,this),-1===Le(e,t)&&(e.push(t),t.requireFailure(this)),this},e.dropRequireFailure=function(t){if(Ve(t,"dropRequireFailure",this))return this;t=We(t,this);var e=Le(this.requireFail,t);return-1<e&&this.requireFail.splice(e,1),this},e.hasRequireFailures=function(){return 0<this.requireFail.length},e.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},e.emit=function(t){function e(e){i.manager.emit(e,t)}var i=this,n=this.state;n<Ih&&e(i.options.event+Ye(n)),e(i.options.event),t.additionalEvent&&e(t.additionalEvent),n>=Ih&&e(i.options.event+Ye(n))},e.tryEmit=function(t){return this.canEmit()?this.emit(t):void(this.state=32)},e.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Ph)))return!1;t++}return!0},e.recognize=function(t){var e=Pa({},t);return me(this.options.enable,[this,e])?(this.state&(Rh|Lh|32)&&(this.state=Ph),this.state=this.process(e),void(this.state&(Ah|Dh|Ih|Lh)&&this.tryEmit(e))):(this.reset(),void(this.state=32))},e.process=function(){},e.getTouchAction=function(){},e.reset=function(){},t}(),zh={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Bh=function(){function t(t,e){var i=this;this.options=Pa({},zh,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=He(this),this.touchAction=new fh(this,this.options.touchAction),$e(this,!0),pe(this.options.recognizers,function(t){var e=i.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}var e=t.prototype;return e.set=function(t){return Pa(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},e.stop=function(t){this.session.stopped=t?2:1},e.recognize=function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&Rh)&&(e.curRecognizer=null,r=null);for(var o=0;o<n.length;)i=n[o],2===e.stopped||r&&i!==r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(Ah|Dh|Ih)&&(e.curRecognizer=i,r=i),o++}},e.get=function(t){if(t instanceof Fh)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event===t)return e[i];return null},e.add=function(t){if(Ve(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},e.remove=function(t){if(Ve(t,"remove",this))return this;var e=this.get(t);if(t){var i=this.recognizers,n=Le(i,e);-1!==n&&(i.splice(n,1),this.touchAction.update())}return this},e.on=function(t,e){if(void 0===t||void 0===e)return this;var i=this.handlers;return pe(Ae(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this},e.off=function(t,e){if(void 0===t)return this;var i=this.handlers;return pe(Ae(t),function(t){e?i[t]&&i[t].splice(Le(i[t],e),1):delete i[t]}),this},e.emit=function(t,e){this.options.domEvents&&qe(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},e.destroy=function(){this.element&&$e(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),jh={touchstart:Ja,touchmove:th,touchend:eh,touchcancel:ih},Uh="touchstart",Hh="touchstart touchmove touchend touchcancel",Vh=function(t){function e(){var i,n=e.prototype;return n.evTarget=Uh,n.evWin=Hh,i=t.apply(this,arguments)||this,i.started=!1,i}return de(e,t),e.prototype.handler=function(t){var e=jh[t.type];if(e===Ja&&(this.started=!0),!!this.started){var i=Xe.call(this,t,e);e&(eh|ih)&&0==i[0].length-i[1].length&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:Za,srcEvent:t})}},e}(ph),Gh=function(t){function e(e){return void 0===e&&(e={}),t.call(this,ue({pointers:1},e))||this}de(e,t);var i=e.prototype;return i.attrTest=function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},i.process=function(t){var e=this.state,i=t.eventType,n=e&(Ah|Dh),r=this.attrTest(t);return n&&(i&ih||!r)?e|Lh:n||r?i&eh?e|Ih:e&Ah?e|Dh:Ah:32},e}(Fh),Wh=function(t){function e(e){var i;return void 0===e&&(e={}),i=t.call(this,ue({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},e))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}de(e,t);var i=e.prototype;return i.getTouchAction=function(){return[Ua]},i.process=function(t){var e=this,i=this.options,n=t.pointers.length===i.pointers,r=t.distance<i.threshold,o=t.deltaTime<i.time;if(this.reset(),t.eventType&Ja&&0===this.count)return this.failTimeout();if(r&&o&&n){if(t.eventType!==eh)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<i.interval,a=!this.pCenter||we(this.pCenter,t.center)<i.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&s?this.count+=1:this.count=1,this._input=t;if(0==this.count%i.taps)return this.hasRequireFailures()?(this._timer=setTimeout(function(){e.state=Rh,e.tryEmit()},i.interval),Ah):Rh}return 32},i.failTimeout=function(){var t=this;return this._timer=setTimeout(function(){t.state=32},this.options.interval),32},i.reset=function(){clearTimeout(this._timer)},i.emit=function(){this.state===Rh&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Fh),Yh=function(t){function e(e){var i;return void 0===e&&(e={}),i=t.call(this,ue({event:"pan",threshold:10,pointers:1,direction:uh},e))||this,i.pX=null,i.pY=null,i}var i=Math.abs;de(e,t);var n=e.prototype;return n.getTouchAction=function(){var t=this.options.direction,e=[];return t&hh&&e.push(Ga),t&lh&&e.push(Va),e},n.directionTest=function(t){var e=this.options,n=!0,r=t.distance,o=t.direction,s=t.deltaX,a=t.deltaY;return o&e.direction||(e.direction&hh?(o=0===s?nh:0>s?rh:oh,n=s!==this.pX,r=i(t.deltaX)):(o=0===a?nh:0>a?sh:ah,n=a!==this.pY,r=i(t.deltaY))),t.direction=o,n&&r>e.threshold&&o&e.direction},n.attrTest=function(t){return Gh.prototype.attrTest.call(this,t)&&(this.state&Ah||!(this.state&Ah)&&this.directionTest(t))},n.emit=function(e){this.pX=e.deltaX,this.pY=e.deltaY;var i=Ze(e.direction);i&&(e.additionalEvent=this.options.event+i),t.prototype.emit.call(this,e)},e}(Gh),$h=function(t){function e(e){return void 0===e&&(e={}),t.call(this,ue({event:"swipe",threshold:10,velocity:.3,direction:hh|lh,pointers:1},e))||this}de(e,t);var i=e.prototype;return i.getTouchAction=function(){return Yh.prototype.getTouchAction.call(this)},i.attrTest=function(e){var i,n=this.options.direction;return n&(hh|lh)?i=e.overallVelocity:n&hh?i=e.overallVelocityX:n&lh&&(i=e.overallVelocityY),t.prototype.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers===this.options.pointers&&La(i)>this.options.velocity&&e.eventType&eh},i.emit=function(t){var e=Ze(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)},e}(Gh),qh=function(t){function e(e){return void 0===e&&(e={}),t.call(this,ue({event:"pinch",threshold:0,pointers:2},e))||this}var i=Math.abs;de(e,t);var n=e.prototype;return n.getTouchAction=function(){return[Ha]},n.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(i(e.scale-1)>this.options.threshold||this.state&Ah)},n.emit=function(e){if(1!==e.scale){var i=1>e.scale?"in":"out";e.additionalEvent=this.options.event+i}t.prototype.emit.call(this,e)},e}(Gh),Xh=function(t){function e(e){return void 0===e&&(e={}),t.call(this,ue({event:"rotate",threshold:0,pointers:2},e))||this}var i=Math.abs;de(e,t);var n=e.prototype;return n.getTouchAction=function(){return[Ha]},n.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(i(e.rotation)>this.options.threshold||this.state&Ah)},e}(Gh),Zh=function(t){function e(e){var i;return void 0===e&&(e={}),i=t.call(this,ue({event:"press",pointers:1,time:251,threshold:9},e))||this,i._timer=null,i._input=null,i}de(e,t);var i=e.prototype;return i.getTouchAction=function(){return[ja]},i.process=function(t){var e=this,i=this.options,n=t.pointers.length===i.pointers,r=t.distance<i.threshold,o=t.deltaTime>i.time;if(this._input=t,!r||!n||t.eventType&(eh|ih)&&!o)this.reset();else if(t.eventType&Ja)this.reset(),this._timer=setTimeout(function(){e.state=Rh,e.tryEmit()},i.time);else if(t.eventType&eh)return Rh;return 32},i.reset=function(){clearTimeout(this._timer)},i.emit=function(t){this.state!==Rh||(t&&t.eventType&eh?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=Na(),this.manager.emit(this.options.event,this._input)))},e}(Fh),Kh=Ke(function(t,e,i){for(var n=Object.keys(e),r=0;r<n.length;)(!i||i&&void 0===t[n[r]])&&(t[n[r]]=e[n[r]]),r++;return t},"extend","Use `assign`."),Qh=Ke(function(t,e){return Kh(t,e,!0)},"merge","Use `assign`."),Jh=function(){var t=function(t,e){return void 0===e&&(e={}),new Bh(t,ue({recognizers:[[Xh,{enable:!1}],[qh,{enable:!1},["rotate"]],[$h,{direction:hh}],[Yh,{direction:hh},["swipe"]],[Wh],[Wh,{event:"doubletap",taps:2},["tap"]],[Zh]]},e))};return t.VERSION="2.0.15",t.DIRECTION_ALL=uh,t.DIRECTION_DOWN=ah,t.DIRECTION_LEFT=rh,t.DIRECTION_RIGHT=oh,t.DIRECTION_UP=sh,t.DIRECTION_HORIZONTAL=hh,t.DIRECTION_VERTICAL=lh,t.DIRECTION_NONE=nh,t.DIRECTION_DOWN=ah,t.INPUT_START=Ja,t.INPUT_MOVE=th,t.INPUT_END=eh,t.INPUT_CANCEL=ih,t.STATE_POSSIBLE=Ph,t.STATE_BEGAN=Ah,t.STATE_CHANGED=Dh,t.STATE_ENDED=Ih,t.STATE_RECOGNIZED=Rh,t.STATE_CANCELLED=Lh,t.STATE_FAILED=32,t.Manager=Bh,t.Input=ph,t.TouchAction=fh,t.TouchInput=xh,t.MouseInput=Mh,t.PointerEventInput=bh,t.TouchMouseInput=Oh,t.SingleTouchInput=Vh,t.Recognizer=Fh,t.AttrRecognizer=Gh,t.Tap=Wh,t.Pan=Yh,t.Swipe=$h,t.Pinch=qh,t.Rotate=Xh,t.Press=Zh,t.on=De,t.off=Ie,t.each=pe,t.merge=Qh,t.extend=Kh,t.bindFn=Je,t.assign=Pa,t.inherit=Qe,t.bindFn=Je,t.prefixed=fe,t.toArray=Ne,t.inArray=Le,t.uniqueArray=Fe,t.splitStr=Ae,t.boolOrFn=me,t.hasParent=ye,t.addEventListeners=De,t.removeEventListeners=Ie,t.defaults=zh,t}(),tl=Ft(function(t){function e(){var t=function(){};return{on:t,off:t,destroy:t,emit:t,get:function(){return{set:t}}}}if("undefined"!=typeof window){var i=window.Hammer||Jh;t.exports=i}else t.exports=function(){return e()}}),el=Object.freeze({default:tl,__moduleExports:tl});!function(t){t&&t.default}(Ma),ua(ti.prototype),ti.current=null,ti.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=null,this.hammer.destroy(),this.hammer=null},ti.prototype.activate=function(){ti.current&&ti.current.deactivate(),ti.current=this,this.active=!0,this.dom.overlay.style.display="none",Os.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),this.keycharm.bind("esc",this.escListener)},ti.prototype.deactivate=function(){this.active=!1,this.dom.overlay.style.display="",Os.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")},ti.prototype._onTapOverlay=function(t){this.activate(),t.stopPropagation()};var il,nl=ti,rl=Ft(function(t,e){e.en={edit:"Edit",del:"Delete selected",back:"Back",addNode:"Add Node",addEdge:"Add Edge",editNode:"Edit Node",editEdge:"Edit Edge",addDescription:"Click in an empty space to place a new node.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",createEdgeError:"Cannot link edges to a cluster.",deleteClusterError:"Clusters cannot be deleted.",editClusterError:"Clusters cannot be edited."},e.en_EN=e.en,e.en_US=e.en,e.de={edit:"Editieren",del:"L\xf6sche Auswahl",back:"Zur\xfcck",addNode:"Knoten hinzuf\xfcgen",addEdge:"Kante hinzuf\xfcgen",editNode:"Knoten editieren",editEdge:"Kante editieren",addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",createEdgeError:"Es ist nicht m\xf6glich, Kanten mit Clustern zu verbinden.",deleteClusterError:"Cluster k\xf6nnen nicht gel\xf6scht werden.",editClusterError:"Cluster k\xf6nnen nicht editiert werden."},e.de_DE=e.de,e.es={edit:"Editar",del:"Eliminar selecci\xf3n",back:"Atr\xe1s",addNode:"A\xf1adir nodo",addEdge:"A\xf1adir arista",editNode:"Editar nodo",editEdge:"Editar arista",addDescription:"Haga clic en un lugar vac\xedo para colocar un nuevo nodo.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",createEdgeError:"No se puede conectar una arista a un grupo.",deleteClusterError:"No es posible eliminar grupos.",editClusterError:"No es posible editar grupos."},e.es_ES=e.es,e.it={edit:"Modifica",del:"Cancella la selezione",back:"Indietro",addNode:"Aggiungi un nodo",addEdge:"Aggiungi un vertice",editNode:"Modifica il nodo",editEdge:"Modifica il vertice",addDescription:"Clicca per aggiungere un nuovo nodo",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",createEdgeError:"Non si possono collegare vertici ad un cluster",deleteClusterError:"I cluster non possono essere cancellati",editClusterError:"I clusters non possono essere modificati."},e.it_IT=e.it,e.nl={edit:"Wijzigen",del:"Selectie verwijderen",back:"Terug",addNode:"Node toevoegen",addEdge:"Link toevoegen",editNode:"Node wijzigen",editEdge:"Link wijzigen",addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",createEdgeError:"Kan geen link maken naar een cluster.",deleteClusterError:"Clusters kunnen niet worden verwijderd.",editClusterError:"Clusters kunnen niet worden aangepast."},e.nl_NL=e.nl,e.nl_BE=e.nl,e["pt-br"]={edit:"Editar",del:"Remover selecionado",back:"Voltar",addNode:"Adicionar n\xf3",addEdge:"Adicionar aresta",editNode:"Editar n\xf3",editEdge:"Editar aresta",addDescription:"Clique em um espa\xe7o em branco para adicionar um novo n\xf3",edgeDescription:"Clique em um n\xf3 e arraste a aresta at\xe9 outro n\xf3 para conect\xe1-los",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n\xf3 para conect\xe1-los",createEdgeError:"N\xe3o foi poss\xedvel linkar arestas a um cluster.",deleteClusterError:"Clusters n\xe3o puderam ser removidos.",editClusterError:"Clusters n\xe3o puderam ser editados."},e["pt-BR"]=e["pt-br"],e.pt_BR=e["pt-br"],e.pt_br=e["pt-br"],e.ru={edit:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",del:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0435",back:"\u041d\u0430\u0437\u0430\u0434",addNode:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0437\u0435\u043b",addEdge:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0435\u0431\u0440\u043e",editNode:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0443\u0437\u0435\u043b",editEdge:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0440\u0435\u0431\u0440\u043e",addDescription:"\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u0432 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0435 \u043c\u0435\u0441\u0442\u043e, \u0447\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0443\u0437\u0435\u043b.",edgeDescription:"\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u043d\u0430 \u0443\u0437\u0435\u043b \u0438 \u043f\u0440\u043e\u0442\u044f\u043d\u0438\u0442\u0435 \u0440\u0435\u0431\u0440\u043e \u043a \u0434\u0440\u0443\u0433\u043e\u043c\u0443 \u0443\u0437\u043b\u0443, \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0438\u0445.",editEdgeDescription:"\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u043d\u0430 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0442\u043e\u0447\u043a\u0438 \u0438 \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0438\u0445 \u0432 \u0443\u0437\u0435\u043b, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u043d\u0435\u043c\u0443.",createEdgeError:"\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0440\u0435\u0431\u0440\u0430 \u0432 \u043a\u043b\u0430\u0441\u0442\u0435\u0440.",deleteClusterError:"\u041a\u043b\u0430\u0441\u0442\u0435\u0440\u044b \u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u044b",editClusterError:"\u041a\u043b\u0430\u0441\u0442\u0435\u0440\u044b \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0434\u043b\u044f \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f."},e.ru_RU=e.ru,e.cn={edit:"\u7f16\u8f91",del:"\u5220\u9664\u9009\u5b9a",back:"\u8fd4\u56de",addNode:"\u6dfb\u52a0\u8282\u70b9",addEdge:"\u6dfb\u52a0\u8fde\u63a5\u7ebf",editNode:"\u7f16\u8f91\u8282\u70b9",editEdge:"\u7f16\u8f91\u8fde\u63a5\u7ebf",addDescription:"\u5355\u51fb\u7a7a\u767d\u5904\u653e\u7f6e\u65b0\u8282\u70b9\u3002",edgeDescription:"\u5355\u51fb\u67d0\u4e2a\u8282\u70b9\u5e76\u5c06\u8be5\u8fde\u63a5\u7ebf\u62d6\u52a8\u5230\u53e6\u4e00\u4e2a\u8282\u70b9\u4ee5\u8fde\u63a5\u5b83\u4eec\u3002",editEdgeDescription:"\u5355\u51fb\u63a7\u5236\u8282\u70b9\u5e76\u5c06\u5b83\u4eec\u62d6\u5230\u8282\u70b9\u4e0a\u8fde\u63a5\u3002",createEdgeError:"\u65e0\u6cd5\u5c06\u8fde\u63a5\u7ebf\u8fde\u63a5\u5230\u7fa4\u96c6\u3002",deleteClusterError:"\u65e0\u6cd5\u5220\u9664\u7fa4\u96c6\u3002",editClusterError:"\u65e0\u6cd5\u7f16\u8f91\u7fa4\u96c6\u3002"},e.zh_CN=e.cn,e.uk={edit:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438",del:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043e\u0431\u0440\u0430\u043d\u0435",back:"\u041d\u0430\u0437\u0430\u0434",addNode:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0432\u0443\u0437\u043e\u043b",addEdge:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u0440\u0430\u0439",editNode:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0432\u0443\u0437\u043e\u043b",editEdge:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043a\u0440\u0430\u0439",addDescription:"K\u043b\u0456\u043a\u043d\u0456\u0442\u044c \u043d\u0430 \u0432\u0456\u043b\u044c\u043d\u0435 \u043c\u0456\u0441\u0446\u0435, \u0449\u043e\u0431 \u0434\u043e\u0434\u0430\u0442\u0438 \u043d\u043e\u0432\u0438\u0439 \u0432\u0443\u0437\u043e\u043b.",edgeDescription:"\u041a\u043b\u0456\u043a\u043d\u0456\u0442\u044c \u043d\u0430 \u0432\u0443\u0437\u043e\u043b \u0456 \u043f\u0435\u0440\u0435\u0442\u044f\u0433\u043d\u0456\u0442\u044c \u043a\u0440\u0430\u0439 \u0434\u043e \u0456\u043d\u0448\u043e\u0433\u043e \u0432\u0443\u0437\u043b\u0430, \u0449\u043e\u0431 \u0457\u0445 \u0437'\u0454\u0434\u043d\u0430\u0442\u0438.",editEdgeDescription:"\u041a\u043b\u0456\u043a\u043d\u0456\u0442\u044c \u043d\u0430 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u0456 \u0442\u043e\u0447\u043a\u0438 \u0456 \u043f\u0435\u0440\u0435\u0442\u044f\u0433\u043d\u0456\u0442\u044c \u0457\u0445 \u0443 \u0432\u0443\u0437\u043e\u043b, \u0449\u043e\u0431 \u043f\u0456\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u0438\u0441\u044f \u0434\u043e \u043d\u044c\u043e\u0433\u043e.",createEdgeError:"\u041d\u0435 \u043c\u043e\u0436\u043b\u0438\u0432\u043e \u043e\u0431'\u0454\u0434\u043d\u0430\u0442\u0438 \u043a\u0440\u0430\u0457 \u0432 \u0433\u0440\u0443\u043f\u0443.",deleteClusterError:"\u0413\u0440\u0443\u043f\u0438 \u043d\u0435 \u043c\u043e\u0436\u0443\u0442\u044c \u0431\u0443\u0442\u0438 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u0456.",editClusterError:"\u0413\u0440\u0443\u043f\u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0456 \u0434\u043b\u044f \u0440\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f."},e.uk_UA=e.uk,e.fr={edit:"Editer",del:"Effacer la selection",back:"Retour",addNode:"Ajouter un noeud",addEdge:"Ajouter un lien",editNode:"Editer le noeud",editEdge:"Editer le lien",addDescription:"Cliquez dans un endroit vide pour placer un noeud.",edgeDescription:"Cliquez sur un noeud et glissez le lien vers un autre noeud pour les connecter.",editEdgeDescription:"Cliquez sur les points de contr\xf4le et glissez-les pour connecter un noeud.",createEdgeError:"Impossible de cr\xe9er un lien vers un cluster.",deleteClusterError:"Les clusters ne peuvent pas \xeatre \xe9ffac\xe9s.",editClusterError:"Les clusters ne peuvent pas \xeatre \xe9dites."},e.fr_FR=e.fr,e.cs={edit:"Upravit",del:"Smazat v\xfdb\u011br",back:"Zp\u011bt",addNode:"P\u0159idat vrchol",addEdge:"P\u0159idat hranu",editNode:"Upravit vrchol",editEdge:"Upravit hranu",addDescription:"Kluknut\xedm do pr\xe1zdn\xe9ho prostoru m\u016f\u017eete p\u0159idat nov\xfd vrchol.",edgeDescription:"P\u0159eta\u017een\xedm z jednoho vrcholu do druh\xe9ho m\u016f\u017eete spojit tyto vrcholy novou hranou.",editEdgeDescription:"P\u0159eta\u017een\xedm kontroln\xedho vrcholu hrany ji m\u016f\u017eete p\u0159ipojit k jin\xe9mu vrcholu.",createEdgeError:"Nelze p\u0159ipojit hranu ke shluku.",deleteClusterError:"Nelze mazat shluky.",editClusterError:"Nelze upravovat shluky."},e.cs_CZ=e.cs}),ol=ii,sl=ri,al=function(){function t(){ol(this,t),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}var e=Math.floor;return sl(t,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var t=this.image.width,i=this.image.height;this.width=t,this.height=i;var n=e(i/2),r=e(i/4),o=e(i/8),s=e(i/16),a=e(t/2),h=e(t/4),l=e(t/8),u=e(t/16);this.canvas.width=3*h,this.canvas.height=n,this.coordinates=[[0,0,a,n],[a,0,h,r],[a,r,l,o],[5*l,r,u,s]],this._fillMipMap()}}},{key:"initialized",value:function(){return void 0!==this.coordinates}},{key:"_fillMipMap",value:function(){var t=this.canvas.getContext("2d"),e=this.coordinates[0];t.drawImage(this.image,e[0],e[1],e[2],e[3]);for(var i=1;i<this.NUM_ITERATIONS;i++){var n=this.coordinates[i-1],r=this.coordinates[i];t.drawImage(this.canvas,n[0],n[1],n[2],n[3],r[0],r[1],r[2],r[3])}}},{key:"drawImageAtPosition",value:function(t,e,i,n,r,o){if(this.initialized())if(2<e){e*=.5;for(var s=0;2<e&&s<this.NUM_ITERATIONS;)e*=.5,s+=1;s>=this.NUM_ITERATIONS&&(s=this.NUM_ITERATIONS-1);var a=this.coordinates[s];t.drawImage(this.canvas,a[0],a[1],a[2],a[3],i,n,r,o)}else t.drawImage(this.image,i,n,r,o)}}]),t}(),hl=function(){function t(e){ol(this,t),this.images={},this.imageBroken={},this.callback=e}return sl(t,[{key:"_tryloadBrokenUrl",value:function(t,e,i){return void 0===t||void 0===i?void 0:void 0===e?void console.warn("No broken url image defined"):(i.image.onerror=function(){console.error("Could not load brokenImage:",e)},void(i.image.src=e))}},{key:"_redrawWithImage",value:function(t){this.callback&&this.callback(t)}},{key:"load",value:function(t,e){var i=this,n=this.images[t];if(n)return n;var r=new al;return this.images[t]=r,r.image.onload=function(){i._fixImageCoordinates(r.image),r.init(),i._redrawWithImage(r)},r.image.onerror=function(){console.error("Could not load image:",t),i._tryloadBrokenUrl(t,e,r)},r.image.src=t,r}},{key:"_fixImageCoordinates",value:function(t){0===t.width&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t))}}]),t}(),ll=function(){function t(){ol(this,t),this.clear(),this.defaultIndex=0,this.groupsArray=[],this.groupIndex=0,this.defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},Os.extend(this.options,this.defaultOptions)}return sl(t,[{key:"setOptions",value:function(t){var e=["useDefaultGroups"];if(void 0!==t)for(var i in t)if(t.hasOwnProperty(i)&&-1===e.indexOf(i)){var n=t[i];this.add(i,n)}}},{key:"clear",value:function(){this.groups={},this.groupsArray=[]}},{key:"get",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=this.groups[t];if(void 0===i&&e)if(!1===this.options.useDefaultGroups&&0<this.groupsArray.length){var n=this.groupIndex%this.groupsArray.length;this.groupIndex++,i={},i.color=this.groups[this.groupsArray[n]],this.groups[t]=i}else{var r=this.defaultIndex%this.defaultGroups.length;this.defaultIndex++,i={},i.color=this.defaultGroups[r],this.groups[t]=i}return i}},{key:"add",value:function(t,e){return this.groups[t]=e,this.groupsArray.push(t),e}}]),t}(),ul=oi,dl=si,cl=ai,fl=hi,pl=li,ml=Ft(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(n){return t.exports=i="function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?function(t){return e(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)},i(n)}t.exports=i}),vl=function(){function t(){ol(this,t)}var e=Math.cos,i=Math.sin;return sl(t,null,[{key:"choosify",value:function(t,e){var i=["node","edge","label"],n=!0,r=Os.topMost(e,"chosen");if("boolean"==typeof r)n=r;else if("object"===ml(r)){if(-1===i.indexOf(t))throw new Error("choosify: subOption '"+t+"' should be one of '"+i.join("', '")+"'");var o=Os.topMost(e,["chosen",t]);("boolean"==typeof o||"function"==typeof o)&&(n=o)}return n}},{key:"pointInRect",value:function(t,n,r){if(0>=t.width||0>=t.height)return!1;if(void 0!==r){var o={x:n.x-r.x,y:n.y-r.y};if(0!==r.angle){var s=-r.angle;n={x:e(s)*o.x-i(s)*o.y,y:i(s)*o.x+e(s)*o.y}}else n=o}var a=t.x+t.width,h=t.y+t.width;return t.left<n.x&&a>n.x&&t.top<n.y&&h>n.y}},{key:"isValidLabel",value:function(t){return"string"==typeof t&&""!==t}}]),t}(),gl=function(){function t(e){ol(this,t),this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}return sl(t,[{key:"_add",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"normal";void 0===this.lines[t]&&(this.lines[t]={width:0,height:0,blocks:[]});var n=e;(void 0===e||""===e)&&(n=" ");var r=this.measureText(n,i),o=Object.assign({},r.values);o.text=e,o.width=r.width,o.mod=i,(void 0===e||""===e)&&(o.width=0),this.lines[t].blocks.push(o),this.lines[t].width+=o.width}},{key:"curWidth",value:function(){var t=this.lines[this.current];return void 0===t?0:t.width}},{key:"append",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,t,e)}},{key:"newLine",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,t,e),this.current++}},{key:"determineLineHeights",value:function(){for(var t=0;t<this.lines.length;t++){var e=this.lines[t],i=0;if(void 0!==e.blocks)for(var n,r=0;r<e.blocks.length;r++)n=e.blocks[r],i<n.height&&(i=n.height);e.height=i}}},{key:"determineLabelSize",value:function(){for(var t,e=0,i=0,n=0;n<this.lines.length;n++)t=this.lines[n],t.width>e&&(e=t.width),i+=t.height;this.width=e,this.height=i}},{key:"removeEmptyBlocks",value:function(){for(var t,e=[],i=0;i<this.lines.length;i++)if(t=this.lines[i],0!==t.blocks.length){if(i==this.lines.length-1&&0===t.width)continue;var n={};Object.assign(n,t),n.blocks=[];for(var r,o=void 0,s=[],a=0;a<t.blocks.length;a++)r=t.blocks[a],0===r.width?void 0===o&&(o=r):s.push(r);0===s.length&&void 0!==o&&s.push(o),n.blocks=s,e.push(n)}return e}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var t=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:t}}}]),t}(),yl={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/\_/,"`":/`/,afterBold:/[^\*]/,afterItal:/[^_]/,afterMono:/[^`]/},bl=function(){function t(e){ol(this,t),this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}return sl(t,[{key:"mod",value:function(){return 0===this.modStack.length?"normal":this.modStack[0]}},{key:"modName",value:function(){return 0===this.modStack.length?"normal":"mono"===this.modStack[0]?"mono":this.bold&&this.ital?"boldital":this.bold?"bold":this.ital?"ital":void 0}},{key:"emitBlock",value:function(){this.spacing&&(this.add(" "),this.spacing=!1),0<this.buffer.length&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}},{key:"add",value:function(t){" "===t&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1)," "!=t&&(this.buffer+=t)}},{key:"parseWS",value:function(t){return!!/[ \t]/.test(t)&&(this.mono?this.add(t):this.spacing=!0,!0)}},{key:"setTag",value:function(t){this.emitBlock(),this[t]=!0,this.modStack.unshift(t)}},{key:"unsetTag",value:function(t){this.emitBlock(),this[t]=!1,this.modStack.shift()}},{key:"parseStartTag",value:function(t,e){return!(this.mono||this[t]||!this.match(e))&&(this.setTag(t),!0)}},{key:"match",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=this.prepareRegExp(t),n=pl(i,2),r=n[0],o=n[1],s=r.test(this.text.substr(this.position,o));return s&&e&&(this.position+=o-1),s}},{key:"parseEndTag",value:function(t,e,i){var n=this.mod()===t;return!(!(n="mono"===t?n&&this.mono:n&&!this.mono)||!this.match(e))&&(void 0===i?this.unsetTag(t):(this.position===this.text.length-1||this.match(i,!1))&&this.unsetTag(t),!0)}},{key:"replace",value:function(t,e){return!!this.match(t)&&(this.add(e),this.position+=length-1,!0)}},{key:"prepareRegExp",value:function(t){var e,i;if(t instanceof RegExp)i=t,e=1;else{var n=yl[t];i=void 0===n?new RegExp(t):n,e=t.length}return[i,e]}}]),t}(),_l=function(){function t(e,i,n,r){var o=this;ol(this,t),this.ctx=e,this.parent=i,this.selected=n,this.hover=r,this.lines=new gl(function(t,i){if(void 0===t)return 0;var s=o.parent.getFormattingValues(e,n,r,i),a=0;if(""!==t){a=o.ctx.measureText(t).width}return{width:a,values:s}})}return sl(t,[{key:"process",value:function(t){if(!vl.isValidLabel(t))return this.lines.finalize();var e=this.parent.fontOptions;t=t.replace(/\r\n/g,"\n"),t=t.replace(/\r/g,"\n");var i=(t+"").split("\n"),n=i.length;if(e.multi){for(var r,o=0;o<n;o++)if(void 0!==(r=this.splitBlocks(i[o],e.multi))){if(0===r.length){this.lines.newLine("");continue}if(0<e.maxWdt)for(var s=0;s<r.length;s++){var a=r[s].mod,h=r[s].text;this.splitStringIntoLines(h,a,!0)}else for(var l=0;l<r.length;l++){var u=r[l].mod,d=r[l].text;this.lines.append(d,u)}this.lines.newLine()}}else if(0<e.maxWdt)for(var c=0;c<n;c++)this.splitStringIntoLines(i[c]);else for(var f=0;f<n;f++)this.lines.newLine(i[f]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(t){var e="none";return"markdown"===t||"md"===t?e="markdown":(!0===t||"html"===t)&&(e="html"),e}},{key:"splitHtmlBlocks",value:function(t){for(var e=new bl(t);e.position<e.text.length;){var i=e.text.charAt(e.position);e.parseWS(i)||/</.test(i)&&(e.parseStartTag("bold","<b>")||e.parseStartTag("ital","<i>")||e.parseStartTag("mono","<code>")||e.parseEndTag("bold","</b>")||e.parseEndTag("ital","</i>")||e.parseEndTag("mono","</code>"))||function(t){if(/&/.test(t)){return e.replace(e.text,"&lt;","<")||e.replace(e.text,"&amp;","&")||e.add("&"),!0}return!1}(i)||e.add(i),e.position++}return e.emitBlock(),e.blocks}},{key:"splitMarkdownBlocks",value:function(t){for(var e=this,i=new bl(t),n=!0;i.position<i.text.length;){var r=i.text.charAt(i.position);i.parseWS(r)||function(t){return!!/\\/.test(t)&&(i.position<e.text.length+1&&(i.position++,t=e.text.charAt(i.position),/ \t/.test(t)?i.spacing=!0:(i.add(t),n=!1)),!0)}(r)||(n||i.spacing)&&(i.parseStartTag("bold","*")||i.parseStartTag("ital","_")||i.parseStartTag("mono","`"))||i.parseEndTag("bold","*","afterBold")||i.parseEndTag("ital","_","afterItal")||i.parseEndTag("mono","`","afterMono")||(i.add(r),n=!1),i.position++}return i.emitBlock(),i.blocks}},{key:"splitBlocks",value:function(t,e){var i=this.decodeMarkupSystem(e);return"none"===i?[{text:t,mod:"normal"}]:"markdown"===i?this.splitMarkdownBlocks(t):"html"===i?this.splitHtmlBlocks(t):void 0}},{key:"overMaxWidth",value:function(t){var e=this.ctx.measureText(t).width;return this.lines.curWidth()+e>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(t){for(var e="",i=0;i<t.length;){var n=""===e?"":" ",r=e+n+t[i];if(this.overMaxWidth(r))break;e=r,i++}return i}},{key:"getLongestFitWord",value:function(t){for(var e=0;e<t.length&&!this.overMaxWidth(t.slice(0,e));)e++;return e}},{key:"splitStringIntoLines",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"normal",i=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];this.parent.getFormattingValues(this.ctx,this.selected,this.hover,e),t=t.replace(/^( +)/g,"$1\r"),t=t.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");for(var n,r=t.split("\r");0<r.length;)if(0===(n=this.getLongestFit(r))){var o=r[0],s=this.getLongestFitWord(o);this.lines.newLine(o.slice(0,s),e),r[0]=o.slice(s)}else{var a=n;" "===r[n-1]?n--:" "===r[a]&&a++;var h=r.slice(0,n).join("");n==r.length&&i?this.lines.append(h,e):this.lines.newLine(h,e),r=r.slice(a)}}}]),t}(),wl=["bold","ital","boldital","mono"],xl=function(){function t(e,i){var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];ol(this,t),this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(i),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}var e=Math.max,i=Math.min;return sl(t,[{key:"setOptions",value:function(t){if(this.elementOptions=t,this.initFontOptions(t.font),vl.isValidLabel(t.label)?this.labelDirty=!0:t.label=void 0,void 0!==t.font&&null!==t.font)if("string"==typeof t.font)this.baseSize=this.fontOptions.size;else if("object"===ml(t.font)){var e=t.font.size;void 0!==e&&(this.baseSize=e)}}},{key:"initFontOptions",value:function(e){var i=this;return Os.forEach(wl,function(t){i.fontOptions[t]={}}),t.parseFontString(this.fontOptions,e)?void(this.fontOptions.vadjust=0):void Os.forEach(e,function(t,e){void 0!==t&&null!==t&&"object"!==ml(t)&&(i.fontOptions[e]=t)})}},{key:"constrain",value:function(t){var e={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},i=Os.topMost(t,"widthConstraint");if("number"==typeof i)e.maxWdt=+i,e.minWdt=+i;else if("object"===ml(i)){var n=Os.topMost(t,["widthConstraint","maximum"]);"number"==typeof n&&(e.maxWdt=+n);var r=Os.topMost(t,["widthConstraint","minimum"]);"number"==typeof r&&(e.minWdt=+r)}var o=Os.topMost(t,"heightConstraint");if("number"==typeof o)e.minHgt=+o;else if("object"===ml(o)){var s=Os.topMost(t,["heightConstraint","minimum"]);"number"==typeof s&&(e.minHgt=+s);var a=Os.topMost(t,["heightConstraint","valign"]);"string"==typeof a&&("top"===a||"bottom"===a)&&(e.valign=a)}return e}},{key:"update",value:function(t,e){this.setOptions(t,!0),this.propagateFonts(e),Os.deepExtend(this.fontOptions,this.constrain(e)),this.fontOptions.chooser=vl.choosify("label",e)}},{key:"adjustSizes",value:function(t){var e=t?t.right+t.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=e,this.fontOptions.minWdt-=e);var i=t?t.top+t.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=i)}},{key:"addFontOptionsToPile",value:function(t,e){for(var i=0;i<e.length;++i)this.addFontToPile(t,e[i])}},{key:"addFontToPile",value:function(t,e){if(void 0!==e&&void 0!==e.font&&null!==e.font){var i=e.font;t.push(i)}}},{key:"getBasicOptions",value:function(e){for(var i={},n=0;n<e.length;++n){var r=e[n],o={};t.parseFontString(o,r)&&(r=o),Os.forEach(r,function(t,e){void 0===t||i.hasOwnProperty(e)||(-1===wl.indexOf(e)?i[e]=t:i[e]={})})}return i}},{key:"getFontOption",value:function(e,i,n){for(var r,o,s=0;s<e.length;++s)if(o=e[s],o.hasOwnProperty(i)){if(void 0===(r=o[i])||null===r)continue;var a={};if(t.parseFontString(a,r)&&(r=a),r.hasOwnProperty(n))return r[n]}if(this.fontOptions.hasOwnProperty(n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}},{key:"getFontOptions",value:function(t,e){for(var i,n={},r=["color","size","face","mod","vadjust"],o=0;o<r.length;++o)i=r[o],n[i]=this.getFontOption(t,e,i);return n}},{key:"propagateFonts",value:function(t){var e=this,i=[];this.addFontOptionsToPile(i,t),this.fontOptions=this.getBasicOptions(i);for(var n=0;n<wl.length;++n)!function(t){var n=wl[t],r=e.fontOptions[n],o=e.getFontOptions(i,n);Os.forEach(o,function(t,e){r[e]=t}),r.size=+r.size,r.vadjust=+r.vadjust}(n)}},{key:"draw",value:function(t,e,i,n,r){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"middle";if(void 0!==this.elementOptions.label){var s=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&s<this.elementOptions.scaling.label.drawThreshold-1||(s>=this.elementOptions.scaling.label.maxVisible&&(s=+this.elementOptions.scaling.label.maxVisible/this.body.view.scale),this.calculateLabelSize(t,n,r,e,i,o),this._drawBackground(t),this._drawText(t,e,this.size.yLine,o,s))}}},{key:"_drawBackground",value:function(t){if(void 0!==this.fontOptions.background&&"none"!==this.fontOptions.background){t.fillStyle=this.fontOptions.background;var e=this.getSize();t.fillRect(e.left,e.top,e.width,e.height)}}},{key:"_drawText",value:function(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"middle",r=4<arguments.length?arguments[4]:void 0,o=this._setAlignment(t,e,i,n),s=pl(o,2);e=s[0],i=s[1],t.textAlign="left",e-=this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&("top"===this.fontOptions.valign&&(i-=(this.size.height-this.size.labelHeight)/2),"bottom"===this.fontOptions.valign&&(i+=(this.size.height-this.size.labelHeight)/2));for(var a,h=0;h<this.lineCount;h++)if((a=this.lines[h])&&a.blocks){var l=0;this.isEdgeLabel||"center"===this.fontOptions.align?l+=(this.size.width-a.width)/2:"right"===this.fontOptions.align&&(l+=this.size.width-a.width);for(var u,d=0;d<a.blocks.length;d++){u=a.blocks[d],t.font=u.font;var c=this._getColor(u.color,r,u.strokeColor),f=pl(c,2),p=f[0],m=f[1];0<u.strokeWidth&&(t.lineWidth=u.strokeWidth,t.strokeStyle=m,t.lineJoin="round"),t.fillStyle=p,0<u.strokeWidth&&t.strokeText(u.text,e+l,i+u.vadjust),t.fillText(u.text,e+l,i+u.vadjust),l+=u.width}i+=a.height}}},{key:"_setAlignment",value:function(t,e,i,n){return this.isEdgeLabel&&"horizontal"!==this.fontOptions.align&&!1===this.pointToSelf?(e=0,i=0,"top"===this.fontOptions.align?(t.textBaseline="alphabetic",i-=4):"bottom"===this.fontOptions.align?(t.textBaseline="hanging",i+=4):t.textBaseline="middle"):t.textBaseline=n,[e,i]}},{key:"_getColor",value:function(t,n,r){var o=t||"#000000",s=r||"#ffffff";if(n<=this.elementOptions.scaling.label.drawThreshold){var a=e(0,i(1,1-(this.elementOptions.scaling.label.drawThreshold-n)));o=Os.overrideOpacity(o,a),s=Os.overrideOpacity(s,a)}return[o,s]}},{key:"getTextSize",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],i=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];return this._processLabel(t,e,i),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var t=this.size.left,e=this.size.top-1;if(this.isEdgeLabel){var i=.5*-this.size.width;switch(this.fontOptions.align){case"middle":t=i,e=.5*-this.size.height;break;case"top":t=i,e=-(this.size.height+2);break;case"bottom":t=i,e=2}}return{left:t,top:e,width:this.size.width,height:this.size.height}}},{key:"calculateLabelSize",value:function(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"middle";this._processLabel(t,e,i),this.size.left=n-.5*this.size.width,this.size.top=r-.5*this.size.height,this.size.yLine=r+.5*(1-this.lineCount)*this.fontOptions.size,"hanging"===o&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(t,e,i,n){var r=function(t,e,i){return"normal"===e?"mod"===i?"":t[i]:void 0===t[e][i]?t[i]:t[e][i]},o={color:r(this.fontOptions,n,"color"),size:r(this.fontOptions,n,"size"),face:r(this.fontOptions,n,"face"),mod:r(this.fontOptions,n,"mod"),vadjust:r(this.fontOptions,n,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(e||i)&&("normal"===n&&!0===this.fontOptions.chooser&&this.elementOptions.labelHighlightBold?o.mod="bold":"function"==typeof this.fontOptions.chooser&&this.fontOptions.chooser(o,this.elementOptions.id,e,i));var s="";return void 0!==o.mod&&""!==o.mod&&(s+=o.mod+" "),s+=o.size+"px "+o.face,t.font=s.replace(/"/g,""),o.font=t.font,o.height=o.size,o}},{key:"differentState",value:function(t,e){return t!==this.selectedState||e!==this.hoverState}},{key:"_processLabelText",value:function(t,e,i,n){return new _l(t,this,e,i).process(n)}},{key:"_processLabel",value:function(t,e,i){if(!1!==this.labelDirty||this.differentState(e,i)){var n=this._processLabelText(t,e,i,this.elementOptions.label);0<this.fontOptions.minWdt&&n.width<this.fontOptions.minWdt&&(n.width=this.fontOptions.minWdt),this.size.labelHeight=n.height,0<this.fontOptions.minHgt&&n.height<this.fontOptions.minHgt&&(n.height=this.fontOptions.minHgt),this.lines=n.lines,this.lineCount=n.lines.length,this.size.width=n.width,this.size.height=n.height,this.selectedState=e,this.hoverState=i,this.labelDirty=!1}}},{key:"visible",value:function(){return 0!==this.size.width&&0!==this.size.height&&void 0!==this.elementOptions.label&&!(this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(t,e){if(!e||"string"!=typeof e)return!1;var i=e.split(" ");return t.size=+i[0].replace("px",""),t.face=i[1],t.color=i[2],!0}}]),t}(),Sl=ui,kl=di,El=Ft(function(t){function e(i){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(i)}t.exports=e}),Ml=Ft(function(t){function e(i,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(i,n)}t.exports=e}),Tl=ci,Cl=function(){function t(e,i,n){ol(this,t),this.body=i,this.labelModule=n,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}var e=Math.cos,i=Math.sin,n=Math.abs,r=Math.min;return sl(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"_setMargins",value:function(t){this.margin={},this.options.margin&&("object"==ml(this.options.margin)?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),t.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(t,o){var s=this.options.borderWidth;return this.resize(t),r(n(this.width/2/e(o)),n(this.height/2/i(o)))+s}},{key:"enableShadow",value:function(t,e){e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(t,e){if(!1!==e.borderDashes)if(void 0!==t.setLineDash){var i=e.borderDashes;!0===i&&(i=[5,15]),t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1}},{key:"disableBorderDashes",value:function(t,e){!1!==e.borderDashes&&(void 0===t.setLineDash?(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1):t.setLineDash([0]))}},{key:"needsRefresh",value:function(t,e){return!0===this.refreshNeeded?(this.refreshNeeded=!1,!0):void 0===this.width||this.labelModule.differentState(t,e)}},{key:"initContextForDraw",value:function(t,e){var i=e.borderWidth/this.body.view.scale;t.lineWidth=r(this.width,i),t.strokeStyle=e.borderColor,t.fillStyle=e.color}},{key:"performStroke",value:function(t,e){var i=e.borderWidth/this.body.view.scale;t.save(),0<i&&(this.enableBorderDashes(t,e),t.stroke(),this.disableBorderDashes(t,e)),t.restore()}},{key:"performFill",value:function(t,e){this.enableShadow(t,e),t.fill(),this.disableShadow(t,e),this.performStroke(t,e)}},{key:"_addBoundingBoxMargin",value:function(t){this.boundingBox.left-=t,this.boundingBox.top-=t,this.boundingBox.bottom+=t,this.boundingBox.right+=t}},{key:"_updateBoundingBox",value:function(t,e,i,n,r){void 0!==i&&this.resize(i,n,r),this.left=t-this.width/2,this.top=e-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(t,e,i,n,r){this._updateBoundingBox(t,e,i,n,r)}},{key:"getDimensionsFromLabel",value:function(t,e,i){this.textSize=this.labelModule.getTextSize(t,e,i);var n=this.textSize.width,r=this.textSize.height;return 0===n&&(n=14,r=14),{width:n,height:r}}}]),t}(),Ol=function(t){function e(t,i,n){var r;return ol(this,e),r=kl(this,El(e).call(this,t,i,n)),r._setMargins(n),r}var i=Math.cos,n=Math.sin,r=Math.abs,o=Math.min;return Tl(e,t),sl(e,[{key:"resize",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selected,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,i)){var n=this.getDimensionsFromLabel(t,e,i);this.width=n.width+this.margin.right+this.margin.left,this.height=n.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,n,r,o){this.resize(t,n,r),this.left=e-this.width/2,this.top=i-this.height/2,this.initContextForDraw(t,o),t.roundRect(this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(t,o),this.updateBoundingBox(e,i,t,n,r),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,r)}},{key:"updateBoundingBox",value:function(t,e,i,n,r){this._updateBoundingBox(t,e,i,n,r);var o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}},{key:"distanceToBorder",value:function(t,e){this.resize(t);var s=this.options.borderWidth;return o(r(this.width/2/i(e)),r(this.height/2/n(e)))+s}}]),e}(Cl),Pl=function(t){function e(t,i,n){var r;return ol(this,e),r=kl(this,El(e).call(this,t,i,n)),r.labelOffset=0,r.selected=!1,r}return Tl(e,t),sl(e,[{key:"setOptions",value:function(t,e,i){this.options=t,void 0===e&&void 0===i||this.setImages(e,i)}},{key:"setImages",value:function(t,e){e&&this.selected?(this.imageObj=e,this.imageObjAlt=t):(this.imageObj=t,this.imageObjAlt=e)}},{key:"switchImages",value:function(t){var e=t&&!this.selected||!t&&this.selected;if(this.selected=t,void 0!==this.imageObjAlt&&e){var i=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=i}}},{key:"_getImagePadding",value:function(){var t={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){var e=this.options.imagePadding;"object"==ml(e)?(t.top=e.top,t.right=e.right,t.bottom=e.bottom,t.left=e.left):(t.top=e,t.right=e,t.bottom=e,t.left=e)}return t}},{key:"_resizeImage",value:function(){var t,e;if(!1===this.options.shapeProperties.useImageSize){var i=1,n=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?i=this.imageObj.width/this.imageObj.height:n=this.imageObj.height/this.imageObj.width),t=2*this.options.size*i,e=2*this.options.size*n}else{var r=this._getImagePadding();t=this.imageObj.width+r.left+r.right,e=this.imageObj.height+r.top+r.bottom}this.width=t,this.height=e,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(t,e,i,n){this.initContextForDraw(t,n),t.circle(e,i,n.size),this.performFill(t,n)}},{key:"_drawImageAtPosition",value:function(t,e){if(0!=this.imageObj.width){t.globalAlpha=1,this.enableShadow(t,e);var i=1;!0===this.options.shapeProperties.interpolation&&(i=this.imageObj.width/this.width/this.body.view.scale);var n=this._getImagePadding(),r=this.left+n.left,o=this.top+n.top,s=this.width-n.left-n.right,a=this.height-n.top-n.bottom;this.imageObj.drawImageAtPosition(t,i,r,o,s,a),this.disableShadow(t,e)}}},{key:"_drawImageLabel",value:function(t,e,i,n,r){var o,s=0;if(void 0!==this.height){s=.5*this.height;var a=this.labelModule.getTextSize(t,n,r);1<=a.lineCount&&(s+=a.height/2)}o=i+s,this.options.label&&(this.labelOffset=s),this.labelModule.draw(t,e,o,n,r,"hanging")}}]),e}(Cl),Al=function(t){function e(t,i,n){var r;return ol(this,e),r=kl(this,El(e).call(this,t,i,n)),r._setMargins(n),r}var i=Math.max;return Tl(e,t),sl(e,[{key:"resize",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selected,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,n)){var r=this.getDimensionsFromLabel(t,e,n),o=i(r.width+this.margin.right+this.margin.left,r.height+this.margin.top+this.margin.bottom);this.options.size=o/2,this.width=o,this.height=o,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,n,r,o){this.resize(t,n,r),this.left=e-this.width/2,this.top=i-this.height/2,this._drawRawCircle(t,e,i,o),this.updateBoundingBox(e,i),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,i,n,r)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size}},{key:"distanceToBorder",value:function(t){return this.resize(t),.5*this.width}}]),e}(Pl),Dl=function(t){function e(t,i,n,r,o){var s;return ol(this,e),s=kl(this,El(e).call(this,t,i,n)),s.setImages(r,o),s}var i=Math.max,n=Math.min;return Tl(e,t),sl(e,[{key:"resize",value:function(){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selected,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.hover;if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){var i=2*this.options.size;return this.width=i,this.height=i,void(this.radius=.5*this.width)}this.needsRefresh(t,e)&&this._resizeImage()}},{key:"draw",value:function(t,e,i,n,r,o){this.switchImages(n),this.resize(),this.left=e-this.width/2,this.top=i-this.height/2,this._drawRawCircle(t,e,i,o),t.save(),t.clip(),this._drawImageAtPosition(t,o),t.restore(),this._drawImageLabel(t,e,i,n,r),this.updateBoundingBox(e,i)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size,this.boundingBox.left=n(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=i(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=i(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(t){return this.resize(t),.5*this.width}}]),e}(Pl),Il=function(t){function e(t,i,n){var r;return ol(this,e),r=kl(this,El(e).call(this,t,i,n)),r._setMargins(n),r}return Tl(e,t),sl(e,[{key:"resize",value:function(t,e,i){if(this.needsRefresh(e,i)){var n=this.getDimensionsFromLabel(t,e,i),r=n.width+this.margin.right+this.margin.left;this.width=r,this.height=r,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,n,r,o){this.resize(t,n,r),this.left=e-this.width/2,this.top=i-this.height/2,this.initContextForDraw(t,o),t.database(e-this.width/2,i-this.height/2,this.width,this.height),this.performFill(t,o),this.updateBoundingBox(e,i,t,n,r),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(Cl),Rl=function(t){function e(t,i,n){return ol(this,e),kl(this,El(e).call(this,t,i,n))}var i=Math.max,n=Math.min;return Tl(e,t),sl(e,[{key:"resize",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selected,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.hover,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{size:this.options.size};if(this.needsRefresh(e,i)){this.labelModule.getTextSize(t,e,i);var r=2*n.size;this.width=r,this.height=r,this.radius=.5*this.width}}},{key:"_drawShape",value:function(t,e,i,n,r,o,s,a){if(this.resize(t,o,s,a),this.left=n-this.width/2,this.top=r-this.height/2,this.initContextForDraw(t,a),t[e](n,r,a.size),this.performFill(t,a),void 0!==this.options.icon&&void 0!==this.options.icon.code&&(t.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",t.fillText(this.options.icon.code,n,r)),void 0!==this.options.label){this.labelModule.calculateLabelSize(t,o,s,n,r,"hanging");var h=r+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(t,n,h,o,s,"hanging")}this.updateBoundingBox(n,r)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size,void 0!==this.options.label&&0<this.labelModule.size.width&&(this.boundingBox.left=n(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=i(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=i(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),e}(Cl),Ll=function(t){function e(t,i,n){return ol(this,e),kl(this,El(e).call(this,t,i,n))}return Tl(e,t),sl(e,[{key:"draw",value:function(t,e,i,n,r,o){this._drawShape(t,"diamond",4,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(Rl),Nl=function(t){function e(t,i,n){return ol(this,e),kl(this,El(e).call(this,t,i,n))}return Tl(e,t),sl(e,[{key:"draw",value:function(t,e,i,n,r,o){this._drawShape(t,"circle",2,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t){return this.resize(t),this.options.size}}]),e}(Rl),Fl=function(t){function e(t,i,n){return ol(this,e),kl(this,El(e).call(this,t,i,n))}var i=Math.cos,n=Math.sin,r=Math.sqrt;return Tl(e,t),sl(e,[{key:"resize",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selected,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,i)){var n=this.getDimensionsFromLabel(t,e,i);this.height=2*n.height,this.width=n.width+n.height,this.radius=.5*this.width}}},{key:"draw",value:function(t,e,i,n,r,o){this.resize(t,n,r),this.left=e-.5*this.width,this.top=i-.5*this.height,this.initContextForDraw(t,o),t.ellipse_vis(this.left,this.top,this.width,this.height),this.performFill(t,o),this.updateBoundingBox(e,i,t,n,r),this.labelModule.draw(t,e,i,n,r)}},{key:"distanceToBorder",value:function(t,e){this.resize(t);var o=.5*this.width,s=.5*this.height,a=n(e)*o,h=i(e)*s;return o*s/r(a*a+h*h)}}]),e}(Cl),zl=function(t){function e(t,i,n){var r;return ol(this,e),r=kl(this,El(e).call(this,t,i,n)),r._setMargins(n),r}var i=Math.max,n=Math.min;return Tl(e,t),sl(e,[{key:"resize",value:function(t,e,i){this.needsRefresh(e,i)&&(this.iconSize={width:+this.options.icon.size,height:+this.options.icon.size},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,i,n,r,o){this.resize(t,n,r),this.options.icon.size=this.options.icon.size||50,this.left=e-this.width/2,this.top=i-this.height/2,this._icon(t,e,i,n,r,o),void 0!==this.options.label&&this.labelModule.draw(t,this.left+this.iconSize.width/2+this.margin.left,i+this.height/2+5,n),this.updateBoundingBox(e,i)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-.5*this.options.icon.size,this.boundingBox.left=t-.5*this.options.icon.size,this.boundingBox.right=t+.5*this.options.icon.size,this.boundingBox.bottom=e+.5*this.options.icon.size,void 0!==this.options.label&&0<this.labelModule.size.width&&(this.boundingBox.left=n(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=i(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=i(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}},{key:"_icon",value:function(t,e,i,n,r,o){var s=+this.options.icon.size;void 0===this.options.icon.code?console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally."):(t.font=(n?"bold ":"")+s+"px "+this.options.icon.face,t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",this.enableShadow(t,o),t.fillText(this.options.icon.code,e,i),this.disableShadow(t,o))}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(Cl),Bl=function(t){function e(t,i,n,r,o){var s;return ol(this,e),s=kl(this,El(e).call(this,t,i,n)),s.setImages(r,o),s}var i=Math.max,n=Math.min;return Tl(e,t),sl(e,[{key:"resize",value:function(){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selected,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.hover;if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){var i=2*this.options.size;return this.width=i,void(this.height=i)}this.needsRefresh(t,e)&&this._resizeImage()}},{key:"draw",value:function(t,e,i,r,o,s){if(this.switchImages(r),this.resize(),this.left=e-this.width/2,this.top=i-this.height/2,!0===this.options.shapeProperties.useBorderWithImage){var a=this.options.borderWidth,h=this.options.borderWidthSelected||2*this.options.borderWidth,l=(r?h:a)/this.body.view.scale;t.lineWidth=n(this.width,l),t.beginPath(),t.strokeStyle=r?this.options.color.highlight.border:o?this.options.color.hover.border:this.options.color.border,t.fillStyle=r?this.options.color.highlight.background:o?this.options.color.hover.background:this.options.color.background,t.rect(this.left-.5*t.lineWidth,this.top-.5*t.lineWidth,this.width+t.lineWidth,this.height+t.lineWidth),t.fill(),this.performStroke(t,s),t.closePath()}this._drawImageAtPosition(t,s),this._drawImageLabel(t,e,i,r,o),this.updateBoundingBox(e,i)}},{key:"updateBoundingBox",value:function(t,e){this.resize(),this._updateBoundingBox(t,e),void 0!==this.options.label&&0<this.labelModule.size.width&&(this.boundingBox.left=n(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=i(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=i(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(Pl),jl=function(t){function e(t,i,n){return ol(this,e),kl(this,El(e).call(this,t,i,n))}return Tl(e,t),sl(e,[{key:"draw",value:function(t,e,i,n,r,o){this._drawShape(t,"square",2,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(Rl),Ul=function(t){function e(t,i,n){return ol(this,e),kl(this,El(e).call(this,t,i,n))}return Tl(e,t),sl(e,[{key:"draw",value:function(t,e,i,n,r,o){this._drawShape(t,"hexagon",4,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(Rl),Hl=function(t){function e(t,i,n){return ol(this,e),kl(this,El(e).call(this,t,i,n))}return Tl(e,t),sl(e,[{key:"draw",value:function(t,e,i,n,r,o){this._drawShape(t,"star",4,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(Rl),Vl=function(t){function e(t,i,n){var r;return ol(this,e),r=kl(this,El(e).call(this,t,i,n)),r._setMargins(n),r}return Tl(e,t),sl(e,[{key:"resize",value:function(t,e,i){this.needsRefresh(e,i)&&(this.textSize=this.labelModule.getTextSize(t,e,i),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,i,n,r,o){this.resize(t,n,r),this.left=e-this.width/2,this.top=i-this.height/2,this.enableShadow(t,o),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,r),this.disableShadow(t,o),this.updateBoundingBox(e,i,t,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(Cl),Gl=function(t){function e(t,i,n){return ol(this,e),kl(this,El(e).call(this,t,i,n))}return Tl(e,t),sl(e,[{key:"draw",value:function(t,e,i,n,r,o){this._drawShape(t,"triangle",3,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(Rl),Wl=function(t){function e(t,i,n){return ol(this,e),kl(this,El(e).call(this,t,i,n))}return Tl(e,t),sl(e,[{key:"draw",value:function(t,e,i,n,r,o){this._drawShape(t,"triangleDown",3,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(Rl),Yl=!1,$l="background: #FFeeee; color: #dd0000",ql=function(){function t(){ol(this,t)}var e=Math.min;return sl(t,null,[{key:"validate",value:function(e,i,n){Yl=!1,il=i;var r=i;return void 0!==n&&(r=i[n]),t.parse(e,r,[]),Yl}},{key:"parse",value:function(e,i,n){for(var r in e)e.hasOwnProperty(r)&&t.check(r,e,i,n)}},{key:"check",value:function(e,i,n,r){if(void 0===n[e]&&void 0===n.__any__)return void t.getSuggestion(e,n,r);var o=e,s=!0;void 0===n[e]&&void 0!==n.__any__&&(o="__any__",s="object"===t.getType(i[e]));var a=n[o];s&&void 0!==a.__type__&&(a=a.__type__),t.checkFields(e,i,n,o,a,r)}},{key:"checkFields",value:function(e,i,n,r,o,s){var a=function(i){console.log("%c"+i+t.printLocation(s,e),$l)},h=t.getType(i[e]),l=o[h];void 0===l?void 0===o.any&&(a('Invalid type received for "'+e+'". Expected: '+t.print(Object.keys(o))+". Received ["+h+'] "'+i[e]+'"'),Yl=!0):"array"===t.getType(l)&&-1===l.indexOf(i[e])?(a('Invalid option detected in "'+e+'". Allowed values are:'+t.print(l)+' not "'+i[e]+'". '),Yl=!0):"object"===h&&"__any__"!==r&&(s=Os.copyAndExtendArray(s,e),t.parse(i[e],n[r],s))}},{key:"getType",value:function(t){var e=ml(t);return"object"===e?null===t?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":Array.isArray(t)?"array":t instanceof Date?"date":void 0===t.nodeType?!0===t._isAMomentObject?"moment":"object":"dom":"number"===e?"number":"boolean"===e?"boolean":"string"===e?"string":void 0===e?"undefined":e}},{key:"getSuggestion",value:function(e,i,n){var r,o=t.findInOptions(e,i,n,!1),s=t.findInOptions(e,il,[],!0);r=void 0===o.indexMatch?s.distance<=4&&o.distance>s.distance?" in "+t.printLocation(o.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+t.printLocation(s.path,s.closestMatch,""):o.distance<=8?'. Did you mean "'+o.closestMatch+'"?'+t.printLocation(o.path,e):". Did you mean one of these: "+t.print(Object.keys(i))+t.printLocation(n,e):" in "+t.printLocation(o.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+o.indexMatch+'"?\n\n',console.log('%cUnknown option detected: "'+e+'"'+r,$l),Yl=!0}},{key:"findInOptions",value:function(e,i,n){var r=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3],o=1e9,s="",a=[],h=e.toLowerCase(),l=void 0;for(var u in i){var d=void 0;if(void 0!==i[u].__type__&&!0===r){var c=t.findInOptions(e,i[u],Os.copyAndExtendArray(n,u));o>c.distance&&(s=c.closestMatch,a=c.path,o=c.distance,l=c.indexMatch)}else-1!==u.toLowerCase().indexOf(h)&&(l=u),d=t.levenshteinDistance(e,u),o>d&&(s=u,a=Os.copyArray(n),o=d)}return{closestMatch:s,path:a,distance:o,indexMatch:l}}},{key:"printLocation",value:function(t,e){for(var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"Problem value found at: \n",n="\n\n"+i+"options = {\n",r=0;r<t.length;r++){for(var o=0;o<r+1;o++)n+="  ";n+=t[r]+": {\n"}for(var s=0;s<t.length+1;s++)n+="  ";n+=e+"\n";for(var a=0;a<t.length+1;a++){for(var h=0;h<t.length-a;h++)n+="  ";n+="}\n"}return n+"\n\n"}},{key:"print",value:function(t){return JSON.stringify(t).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}},{key:"levenshteinDistance",value:function(t,i){if(0===t.length)return i.length;if(0===i.length)return t.length;var n,r=[];for(n=0;n<=i.length;n++)r[n]=[n];var o;for(o=0;o<=t.length;o++)r[0][o]=o;for(n=1;n<=i.length;n++)for(o=1;o<=t.length;o++)r[n][o]=i.charAt(n-1)==t.charAt(o-1)?r[n-1][o-1]:e(r[n-1][o-1]+1,e(r[n][o-1]+1,r[n-1][o]+1));return r[i.length][t.length]}}]),t}(),Xl=function(){function t(e,i,n,r,o,s){ol(this,t),this.options=Os.bridgeObject(o),this.globalOptions=o,this.defaultOptions=s,this.body=i,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=r,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new xl(this.body,this.options,!1),this.setOptions(e)}return sl(t,[{key:"attachEdge",value:function(t){-1===this.edges.indexOf(t)&&this.edges.push(t)}},{key:"detachEdge",value:function(t){var e=this.edges.indexOf(t);-1!=e&&this.edges.splice(e,1)}},{key:"setOptions",value:function(e){var i=this.options.shape;if(e){if("undefined"!=typeof e.color&&(this._localColor=e.color),void 0!==e.id&&(this.id=e.id),void 0===this.id)throw new Error("Node must have an id");t.checkMass(e,this.id),void 0!==e.x&&(null===e.x?(this.x=void 0,this.predefinedPosition=!1):(this.x=parseInt(e.x),this.predefinedPosition=!0)),void 0!==e.y&&(null===e.y?(this.y=void 0,this.predefinedPosition=!1):(this.y=parseInt(e.y),this.predefinedPosition=!0)),void 0!==e.size&&(this.baseSize=e.size),void 0!==e.value&&(e.value=parseFloat(e.value)),t.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);var n=[e,this.options,this.defaultOptions];return this.chooser=vl.choosify("node",n),this._load_images(),this.updateLabelModule(e),this.updateShape(i),void 0!==e.hidden||void 0!==e.physics}}},{key:"_load_images",value:function(){if(("circularImage"===this.options.shape||"image"===this.options.shape)&&void 0===this.options.image)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(void 0!==this.options.image){if(void 0===this.imagelist)throw new Error("Internal Error: No images provided");if("string"==typeof this.options.image)this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(void 0===this.options.image.unselected)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.imageObjAlt=void 0===this.options.image.selected?void 0:this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id)}}}},{key:"getFormattingValues",value:function(){var t={color:this.options.color.background,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};return this.selected||this.hover?!0===this.chooser?this.selected?(t.borderWidth*=2,t.color=this.options.color.highlight.background,t.borderColor=this.options.color.highlight.border,t.shadow=this.options.shadow.enabled):this.hover&&(t.color=this.options.color.hover.background,t.borderColor=this.options.color.hover.border,t.shadow=this.options.shadow.enabled):"function"==typeof this.chooser&&(this.chooser(t,this.options.id,this.selected,this.hover),!1===t.shadow&&(t.shadowColor!==this.options.shadow.color||t.shadowSize!==this.options.shadow.size||t.shadowX!==this.options.shadow.x||t.shadowY!==this.options.shadow.y)&&(t.shadow=!0)):t.shadow=this.options.shadow.enabled,t}},{key:"updateLabelModule",value:function(e){(void 0===this.options.label||null===this.options.label)&&(this.options.label=""),t.updateGroupOptions(this.options,pi({},e,{color:e&&e.color||this._localColor||void 0}),this.grouplist);var i=this.grouplist.get(this.options.group,!1),n=[e,this.options,i,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(t){if(t===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new Ol(this.options,this.body,this.labelModule);break;case"circle":this.shape=new Al(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new Dl(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"database":this.shape=new Il(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new Ll(this.options,this.body,this.labelModule);break;case"dot":this.shape=new Nl(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new Fl(this.options,this.body,this.labelModule);break;case"icon":this.shape=new zl(this.options,this.body,this.labelModule);break;case"image":this.shape=new Bl(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new jl(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new Ul(this.options,this.body,this.labelModule);break;case"star":this.shape=new Hl(this.options,this.body,this.labelModule);break;case"text":this.shape=new Vl(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new Gl(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new Wl(this.options,this.body,this.labelModule);break;default:this.shape=new Fl(this.options,this.body,this.labelModule)}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(t,e){return this.shape.distanceToBorder(t,e)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(t,e,i){if(void 0!==this.options.value){var n=this.options.scaling.customScalingFunction(t,e,i,this.options.value),r=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+n*o}this.options.size=this.options.scaling.min+n*r}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(t){var e=this.getFormattingValues();this.shape.draw(t,this.x,this.y,this.selected,this.hover,e)}},{key:"updateBoundingBox",value:function(t){this.shape.updateBoundingBox(this.x,this.y,t)}},{key:"resize",value:function(t){var e=this.getFormattingValues();this.shape.resize(t,this.selected,this.hover,e)}},{key:"getItemsOnPoint",value:function(t){var e=[];return this.labelModule.visible()&&vl.pointInRect(this.labelModule.getSize(),t)&&e.push({nodeId:this.id,labelId:0}),vl.pointInRect(this.shape.boundingBox,t)&&e.push({nodeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){return this.shape.left<t.right&&this.shape.left+this.shape.width>t.left&&this.shape.top<t.bottom&&this.shape.top+this.shape.height>t.top}},{key:"isBoundingBoxOverlappingWith",value:function(t){return this.shape.boundingBox.left<t.right&&this.shape.boundingBox.right>t.left&&this.shape.boundingBox.top<t.bottom&&this.shape.boundingBox.bottom>t.top}}],[{key:"updateGroupOptions",value:function(t,e,i){if(void 0!==i){var n=t.group;if(void 0!==e&&void 0!==e.group&&n!==e.group)throw new Error("updateGroupOptions: group values in options don't match.");if("number"==typeof n||"string"==typeof n&&""!=n){var r=i.get(n),o=["font"];void 0!==e&&void 0!==e.color&&null!=e.color&&o.push("color"),Os.selectiveNotDeepExtend(o,t,r),t.color=Os.parseColor(t.color)}}}},{key:"parseOptions",value:function(e,i){var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},o=4<arguments.length?arguments[4]:void 0;if(Os.selectiveNotDeepExtend(["color","fixed","shadow"],e,i,n),t.checkMass(i),Os.mergeOptions(e,i,"shadow",r),void 0!==i.color&&null!==i.color){var s=Os.parseColor(i.color);Os.fillIfDefined(e.color,s)}else!0===n&&null===i.color&&(e.color=Os.bridgeObject(r.color));void 0!==i.fixed&&null!==i.fixed&&("boolean"==typeof i.fixed?(e.fixed.x=i.fixed,e.fixed.y=i.fixed):(void 0!==i.fixed.x&&"boolean"==typeof i.fixed.x&&(e.fixed.x=i.fixed.x),void 0!==i.fixed.y&&"boolean"==typeof i.fixed.y&&(e.fixed.y=i.fixed.y))),!0===n&&null===i.font&&(e.font=Os.bridgeObject(r.font)),t.updateGroupOptions(e,i,o),void 0!==i.scaling&&Os.mergeOptions(e.scaling,i.scaling,"label",r.scaling)}},{key:"checkMass",value:function(t,e){if(void 0!==t.mass&&0>=t.mass){var i="";void 0!==e&&(i=" in node id: "+e),console.log("%cNegative or zero mass disallowed"+i+", setting mass to 1.",$l),t.mass=1}}}]),t}(),Zl=function(){function t(e,n,r,o){var s=this;if(ol(this,t),this.body=e,this.images=n,this.groups=r,this.layoutEngine=o,this.body.functions.createNode=this.create.bind(this),this.nodesListeners={add:function(t,e){s.add(e.items)},update:function(t,e){s.update(e.items,e.data,e.oldData)},remove:function(t,e){s.remove(e.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:2,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,n,r){return e===t?.5:i(0,1/(e-t)*(r-t))}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1},size:25,title:void 0,value:void 0,x:void 0,y:void 0},0>=this.defaultOptions.mass)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Os.bridgeObject(this.defaultOptions),this.bindEventListeners()}var e=Math.round,i=Math.max;return sl(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("refreshNodes",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){Os.forEach(t.nodesListeners,function(e,i){t.body.data.nodes&&t.body.data.nodes.off(i,e)}),delete t.body.functions.createNode,delete t.nodesListeners.add,delete t.nodesListeners.update,delete t.nodesListeners.remove,delete t.nodesListeners})}},{key:"setOptions",value:function(t){if(void 0!==t){if(Xl.parseOptions(this.options,t),void 0!==t.shape)for(var e in this.body.nodes)this.body.nodes.hasOwnProperty(e)&&this.body.nodes[e].updateShape();if(void 0!==t.font)for(var i in this.body.nodes)this.body.nodes.hasOwnProperty(i)&&(this.body.nodes[i].updateLabelModule(),this.body.nodes[i].needsRefresh());if(void 0!==t.size)for(var n in this.body.nodes)this.body.nodes.hasOwnProperty(n)&&this.body.nodes[n].needsRefresh();(void 0!==t.hidden||void 0!==t.physics)&&this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],i=this.body.data.nodes;if(t instanceof sa||t instanceof aa)this.body.data.nodes=t;else if(Array.isArray(t))this.body.data.nodes=new sa,this.body.data.nodes.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.nodes=new sa}if(i&&Os.forEach(this.nodesListeners,function(t,e){i.off(e,t)}),this.body.nodes={},this.body.data.nodes){var n=this;Os.forEach(this.nodesListeners,function(t,e){n.body.data.nodes.on(e,t)});var r=this.body.data.nodes.getIds();this.add(r,!0)}!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e,i=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=[],r=0;r<t.length;r++){e=t[r];var o=this.body.data.nodes.get(e),s=this.create(o);n.push(s),this.body.nodes[e]=s}this.layoutEngine.positionInitially(n),!1===i&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t,e,i){for(var n=this.body.nodes,r=!1,o=0;o<t.length;o++){var s=t[o],a=n[s],h=e[o];void 0===a?(r=!0,a=this.create(h),n[s]=a):a.setOptions(h)&&(r=!0)}r||void 0===i||(r=e.some(function(t,e){var n=i[e];return n&&n.level!==t.level})),!0===r?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){for(var e,i=this.body.nodes,n=0;n<t.length;n++)e=t[n],delete i[e];this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(t){return new(1<arguments.length&&void 0!==arguments[1]?arguments[1]:Xl)(t,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var t=this,e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];Os.forEach(this.body.nodes,function(i,n){var r=t.body.data.nodes.get(n);void 0!==r&&(!0===e&&i.setOptions({x:null,y:null}),i.setOptions({fixed:!1}),i.setOptions(r))})}},{key:"getPositions",value:function(t){var i={};if(void 0===t)for(var n,r=0;r<this.body.nodeIndices.length;r++)n=this.body.nodes[this.body.nodeIndices[r]],i[this.body.nodeIndices[r]]={x:e(n.x),y:e(n.y)};else if(!0===Array.isArray(t)){for(var o=0;o<t.length;o++)if(void 0!==this.body.nodes[t[o]]){var s=this.body.nodes[t[o]];i[t[o]]={x:e(s.x),y:e(s.y)}}}else if(void 0!==this.body.nodes[t]){var a=this.body.nodes[t];i[t]={x:e(a.x),y:e(a.y)}}return i}},{key:"storePositions",value:function(){var t=[],i=this.body.data.nodes.getDataSet();for(var n in i._data)if(i._data.hasOwnProperty(n)){var r=this.body.nodes[n];(i._data[n].x!=e(r.x)||i._data[n].y!=e(r.y))&&t.push({id:r.id,x:e(r.x),y:e(r.y)})}i.update(t)}},{key:"getBoundingBox",value:function(t){if(void 0!==this.body.nodes[t])return this.body.nodes[t].shape.boundingBox}},{key:"getConnectedNodes",value:function(t,e){var i=[];if(void 0!==this.body.nodes[t])for(var n,r=this.body.nodes[t],o={},s=0;s<r.edges.length;s++)n=r.edges[s],"to"!==e&&n.toId==r.id?void 0===o[n.fromId]&&(i.push(n.fromId),o[n.fromId]=!0):"from"!==e&&n.fromId==r.id&&void 0===o[n.toId]&&(i.push(n.toId),o[n.toId]=!0);return i}},{key:"getConnectedEdges",value:function(t){var e=[];if(void 0!==this.body.nodes[t])for(var i=this.body.nodes[t],n=0;n<i.edges.length;n++)e.push(i.edges[n].id);else console.log("NodeId provided for getConnectedEdges does not exist. Provided: ",t);return e}},{key:"moveNode",value:function(t,e,i){var n=this;void 0===this.body.nodes[t]?console.log("Node id supplied to moveNode does not exist. Provided: ",t):(this.body.nodes[t].x=+e,this.body.nodes[t].y=+i,setTimeout(function(){n.body.emitter.emit("startSimulation")},0))}}]),t}(),Kl=mi,Ql=Ft(function(t){function e(i,n,r){return t.exports=e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=Kl(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}},e(i,n,r||i)}t.exports=e}),Jl=function(){function t(){ol(this,t)}var e=Math.cos,i=Math.sin;return sl(t,null,[{key:"transform",value:function(t,n){Array.isArray(t)||(t=[t]);for(var r=n.point.x,o=n.point.y,s=n.angle,a=n.length,h=0;h<t.length;++h){var l=t[h],u=l.x*e(s)-l.y*i(s),d=l.x*i(s)+l.y*e(s);l.x=r+a*u,l.y=o+a*d}}},{key:"drawPath",value:function(t,e){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var i=1;i<e.length;++i)t.lineTo(e[i].x,e[i].y);t.closePath()}}]),t}(),tu=function(t){function e(){return ol(this,e),kl(this,El(e).apply(this,arguments))}return Tl(e,t),sl(e,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];Jl.transform(i,e),Jl.drawPath(t,i)}}]),e}(Jl),eu=function(){function t(){ol(this,t)}return sl(t,null,[{key:"draw",value:function(t,e){var i=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];Jl.transform(i,e),Jl.drawPath(t,i)}}]),t}(),iu=function(){function t(){ol(this,t)}var e=Math.PI;return sl(t,null,[{key:"draw",value:function(t,i){var n={x:-.4,y:0};Jl.transform(n,i),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var r=e,o=i.angle-r/2,s=i.angle+r/2;t.beginPath(),t.arc(n.x,n.y,.4*i.length,o,s,!1),t.stroke()}}]),t}(),nu=function(){function t(){ol(this,t)}var e=Math.PI;return sl(t,null,[{key:"draw",value:function(t,i){var n={x:-.3,y:0};Jl.transform(n,i),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var r=e,o=i.angle+r/2,s=i.angle+3*r/2;t.beginPath(),t.arc(n.x,n.y,.4*i.length,o,s,!1),t.stroke()}}]),t}(),ru=function(){function t(){ol(this,t)}return sl(t,null,[{key:"draw",value:function(t,e){var i=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];Jl.transform(i,e),Jl.drawPath(t,i)}}]),t}(),ou=function(){function t(){ol(this,t)}return sl(t,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];Jl.transform(i,e),Jl.drawPath(t,i)}}]),t}(),su=function(){function t(){ol(this,t)}return sl(t,null,[{key:"draw",value:function(t,e){var i={x:-.4,y:0};Jl.transform(i,e),t.circle(i.x,i.y,.4*e.length)}}]),t}(),au=function(){function t(){ol(this,t)}return sl(t,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];Jl.transform(i,e),Jl.drawPath(t,i)}}]),t}(),hu=function(){function t(){ol(this,t)}return sl(t,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];Jl.transform(i,e),Jl.drawPath(t,i)}}]),t}(),lu=function(){function t(){ol(this,t)}return sl(t,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];Jl.transform(i,e),Jl.drawPath(t,i)}}]),t}(),uu=function(){function t(){ol(this,t)}return sl(t,null,[{key:"draw",value:function(t,e){var i=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];Jl.transform(i,e),Jl.drawPath(t,i)}}]),t}(),du=function(){function t(){ol(this,t)}return sl(t,null,[{key:"draw",value:function(t,e){var i;switch(e.type&&(i=e.type.toLowerCase()),i){case"circle":su.draw(t,e);break;case"box":hu.draw(t,e);break;case"crow":eu.draw(t,e);break;case"curve":iu.draw(t,e);break;case"diamond":lu.draw(t,e);break;case"inv_curve":nu.draw(t,e);break;case"triangle":ru.draw(t,e);break;case"inv_triangle":ou.draw(t,e);break;case"bar":au.draw(t,e);break;case"vee":uu.draw(t,e);break;case"arrow":default:tu.draw(t,e)}}}]),t}(),cu=function(){function t(e,i,n){ol(this,t),this._body=i,this._labelModule=n,this.color={},this.colorDirty=!0,this.hoverWidth=1.5,this.selectionWidth=2,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}var e=Math.atan2,i=Math.cos,n=Math.sin,r=Math.sqrt,o=Math.PI,s=Math.pow,a=Math.max,h=Math.abs;return sl(t,[{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(t){this.options=t,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(t,e){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:this.getViaNode();t.strokeStyle=this.getColor(t,e),t.lineWidth=e.width,!1===e.dashes?this._drawLine(t,e,i):this._drawDashedLine(t,e,i)}},{key:"_drawLine",value:function(t,e,i,n,r){if(this.from!=this.to)this._line(t,e,i,n,r);else{var o=this._getCircleData(t),s=pl(o,3),a=s[0],h=s[1],l=s[2];this._circle(t,e,a,h,l)}}},{key:"_drawDashedLine",value:function(t,e,i){t.lineCap="round";var n=Array.isArray(e.dashes)?e.dashes:[5,5];if(void 0!==t.setLineDash){if(t.save(),t.setLineDash(n),t.lineDashOffset=0,this.from!=this.to)this._line(t,e,i);else{var r=this._getCircleData(t),o=pl(r,3),s=o[0],a=o[1],h=o[2];this._circle(t,e,s,a,h)}t.setLineDash([0]),t.lineDashOffset=0,t.restore()}else{if(this.from!=this.to)t.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,n);else{var l=this._getCircleData(t),u=pl(l,3),d=u[0],c=u[1],f=u[2];this._circle(t,e,d,c,f)}this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}}},{key:"findBorderPosition",value:function(t,e,i){return this.from==this.to?this._findBorderPositionCircle(t,e,i):this._findBorderPosition(t,e,i)}},{key:"findBorderPositions",value:function(t){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,t),to:this._findBorderPosition(this.to,t)};var e=this._getCircleData(t).slice(0,2),i=pl(e,2),n=i[0],r=i[1];return{from:this._findBorderPositionCircle(this.from,t,{x:n,y:r,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,t,{x:n,y:r,low:.6,high:.8,direction:1})}}},{key:"_getCircleData",value:function(t){var e,i,n=this.from,r=this.options.selfReferenceSize;return void 0!==t&&void 0===n.shape.width&&n.shape.resize(t),n.shape.width>n.shape.height?(e=n.x+.5*n.shape.width,i=n.y-r):(e=n.x+r,i=n.y-.5*n.shape.height),[e,i,r]}},{key:"_pointOnCircle",value:function(t,e,r,s){var a=2*s*o;return{x:t+r*i(a),y:e-r*n(a)}}},{key:"_findBorderPositionCircle",value:function(t,i,n){var o,a=n.x,l=n.y,u=n.low,d=n.high,c=n.direction,f=this.options.selfReferenceSize,p=.5*(u+d),m=0;do{p=.5*(u+d),o=this._pointOnCircle(a,l,f,p);var v=e(t.y-o.y,t.x-o.x),g=t.distanceToBorder(i,v),y=r(s(o.x-t.x,2)+s(o.y-t.y,2)),b=g-y;if(h(b)<.05)break;0<b?0<c?u=p:d=p:0<c?d=p:u=p,++m}while(u<=d&&m<10);return gi({},o,{t:p})}},{key:"getLineWidth",value:function(t,e){return!0===t?a(this.selectionWidth,.3/this._body.view.scale):!0===e?a(this.hoverWidth,.3/this._body.view.scale):a(this.options.width,.3/this._body.view.scale)}},{key:"getColor",value:function(t,e){if(!1!==e.inheritsColor){if("both"===e.inheritsColor&&this.from.id!==this.to.id){var i=t.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),n=this.from.options.color.highlight.border,r=this.to.options.color.highlight.border;return!1===this.from.selected&&!1===this.to.selected?(n=Y(this.from.options.color.border,e.opacity),r=Y(this.to.options.color.border,e.opacity)):!0===this.from.selected&&!1===this.to.selected?r=this.to.options.color.border:!1===this.from.selected&&!0===this.to.selected&&(n=this.from.options.color.border),i.addColorStop(0,n),i.addColorStop(1,r),i}return"to"===e.inheritsColor?Y(this.to.options.color.border,e.opacity):Y(this.from.options.color.border,e.opacity)}return Y(e.color,e.opacity)}},{key:"_circle",value:function(t,e,i,n,r){this.enableShadow(t,e),t.beginPath(),t.arc(i,n,r,0,2*o,!1),t.stroke(),this.disableShadow(t,e)}},{key:"getDistanceToEdge",value:function(t,e,i,n,o,s){if(this.from!=this.to)return this._getDistanceToEdge(t,e,i,n,o,s);var a=this._getCircleData(void 0),l=pl(a,3),u=l[0],d=l[1],c=l[2],f=u-o,p=d-s;return h(r(f*f+p*p)-c)}},{key:"_getDistanceToLine",value:function(t,e,i,n,o,s){var a=i-t,h=n-e,l=((o-t)*a+(s-e)*h)/(a*a+h*h);1<l?l=1:0>l&&(l=0);var u=t+l*a,d=e+l*h,c=u-o,f=d-s;return r(c*c+f*f)}},{key:"getArrowData",value:function(t,r,s,a,l,u){var d,c,f,p,m,v,g,y=Math.hypot,b=u.width;"from"===r?(f=this.from,p=this.to,m=0>u.fromArrowScale,v=h(u.fromArrowScale),g=u.fromArrowType):"to"===r?(f=this.to,p=this.from,m=0>u.toArrowScale,v=h(u.toArrowScale),g=u.toArrowType):(f=this.to,p=this.from,m=0>u.middleArrowScale,v=h(u.middleArrowScale),g=u.middleArrowType);var _=15*v+3*b;if(f!=p){var w=y(f.x-p.x,f.y-p.y),x=_/w;if("middle"===r){var S=(m?-x:x)/2,k=this.getPoint(.5+S,s),E=this.getPoint(.5-S,s);d=e(k.y-E.y,k.x-E.x),c=this.getPoint(.5,s)}else if(!0===this.options.smooth.enabled){var M=this._findBorderPosition(f,t,{via:s}),T=this.getPoint(M.t+x*("from"===r?1:-1),s);d=e(M.y-T.y,M.x-T.x),c=M}else d=e(f.y-p.y,f.x-p.x),c=this._findBorderPosition(f,t)}else{var C=this._getCircleData(t),O=pl(C,3),P=O[0],A=O[1],D=O[2];if("from"===r){var I=this._findBorderPositionCircle(this.from,t,{x:P,y:A,low:.25,high:.6,direction:-1});d=-2*I.t*o+1.5*o+.1*o,c=I}else if("to"===r){var R=this._findBorderPositionCircle(this.from,t,{x:P,y:A,low:.6,high:1,direction:1});d=-2*R.t*o+1.5*o-1.1*o,c=R}else c=this._pointOnCircle(P,A,D,.175),d=3.9269908169872414}return{point:c,core:{x:c.x-.9*_*i(d),y:c.y-.9*_*n(d)},angle:d,length:_,type:g}}},{key:"drawArrowHead",value:function(t,e,i,n,r){t.strokeStyle=this.getColor(t,e),t.fillStyle=t.strokeStyle,t.lineWidth=e.width,du.draw(t,r),this.enableShadow(t,e),t.fill(),this.disableShadow(t,e)}},{key:"enableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"drawBackground",value:function(t,e){if(!1!==e.background){var i={strokeStyle:t.strokeStyle,lineWidth:t.lineWidth,dashes:t.dashes};t.strokeStyle=e.backgroundColor,t.lineWidth=e.backgroundSize,this.setStrokeDashed(t,e.backgroundDashes),t.stroke(),t.strokeStyle=i.strokeStyle,t.lineWidth=i.lineWidth,t.dashes=i.dashes,this.setStrokeDashed(t,e.dashes)}}},{key:"setStrokeDashed",value:function(t,e){if(!1===e)void 0===t.setLineDash?console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used."):t.setLineDash([]);else if(void 0!==t.setLineDash){var i=Array.isArray(e)?e:[5,5];t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}]),t}(),fu=function(t){function e(t,i,n){return ol(this,e),kl(this,El(e).call(this,t,i,n))}var i=Math.atan2,n=Math.sqrt,r=Math.pow,o=Math.abs;return Tl(e,t),sl(e,[{key:"_findBorderPositionBezier",value:function(t,e){var s,a,h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this._getViaCoordinates(),l=!1,u=1,d=0,c=this.to;t.id===this.from.id&&(c=this.from,l=!0);var f=0;do{a=.5*(d+u),s=this.getPoint(a,h);var p=i(c.y-s.y,c.x-s.x),m=c.distanceToBorder(e,p),v=n(r(s.x-c.x,2)+r(s.y-c.y,2)),g=m-v;if(o(g)<.2)break;0>g?!1===l?d=a:u=a:!1===l?u=a:d=a,++f}while(d<=u&&f<10);return bi({},s,{t:a})}},{key:"_getDistanceToBezierEdge",value:function(t,e,i,n,o,s,a){var h,l,u,d,c,f=1e9,p=t,m=e;for(l=1;10>l;l++)u=.1*l,d=r(1-u,2)*t+2*u*(1-u)*a.x+r(u,2)*i,c=r(1-u,2)*e+2*u*(1-u)*a.y+r(u,2)*n,0<l&&(h=this._getDistanceToLine(p,m,d,c,o,s),f=h<f?h:f),p=d,m=c;return f}},{key:"_bezierCurve",value:function(t,e,i,n){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),null!=i&&null!=i.x?null!=n&&null!=n.x?t.bezierCurveTo(i.x,i.y,n.x,n.y,this.toPoint.x,this.toPoint.y):t.quadraticCurveTo(i.x,i.y,this.toPoint.x,this.toPoint.y):t.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(t,e),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),e}(cu),pu=function(t){function e(t,i,n){var r;return ol(this,e),r=kl(this,El(e).call(this,t,i,n)),r.via=r.via,r._boundFunction=function(){r.positionBezierNode()},r._body.emitter.on("_repositionBezierNodes",r._boundFunction),r}var i=Math.cos,n=Math.sin,r=Math.PI,o=Math.pow;return Tl(e,t),sl(e,[{key:"setOptions",value:function(t){Ql(El(e.prototype),"setOptions",this).call(this,t);var i=!1;this.options.physics!==t.physics&&(i=!0),this.options=t,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),1==i&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],void 0===this.from||void 0===this.to||!1===this.options.physics?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),void 0!==this.via&&(delete this._body.nodes[this.via.id],this.via=void 0,!0)}},{key:"setupSupportNode",value:function(){if(void 0===this.via){var t="edgeId:"+this.id,e=this._body.functions.createNode({id:t,shape:"circle",physics:!0,hidden:!0});this._body.nodes[t]=e,this.via=e,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){void 0!==this.via&&void 0!==this.from&&void 0!==this.to?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):void 0!==this.via&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(t,e,i){this._bezierCurve(t,e,i)}},{key:"_getViaCoordinates",value:function(){return this.via}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.via;if(this.from===this.to){var s=this._getCircleData(),a=pl(s,3),h=a[0],l=a[1],u=a[2],d=2*r*(1-t);return{x:h+u*n(d),y:l+u-u*(1-i(d))}}return{x:o(1-t,2)*this.fromPoint.x+2*t*(1-t)*e.x+o(t,2)*this.toPoint.x,y:o(1-t,2)*this.fromPoint.y+2*t*(1-t)*e.y+o(t,2)*this.toPoint.y}}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e,this.via)}},{key:"_getDistanceToEdge",value:function(t,e,i,n,r,o){return this._getDistanceToBezierEdge(t,e,i,n,r,o,this.via)}}]),e}(fu),mu=function(t){function e(t,i,n){return ol(this,e),kl(this,El(e).call(this,t,i,n))}var i=Math.atan2,n=Math.cos,r=Math.sin,o=Math.sqrt,s=Math.PI,a=Math.pow,h=Math.abs;return Tl(e,t),sl(e,[{key:"_line",value:function(t,e,i){this._bezierCurve(t,e,i)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var t=this.options.smooth.roundness,e=this.options.smooth.type,a=h(this.from.x-this.to.x),l=h(this.from.y-this.to.y);if("discrete"===e||"diagonalCross"===e){var u,d;u=d=a<=l?t*l:t*a,this.from.x>this.to.x&&(u=-u),this.from.y>=this.to.y&&(d=-d);var c=this.from.x+u,f=this.from.y+d;return"discrete"===e&&(a<=l?c=a<t*l?this.from.x:c:f=l<t*a?this.from.y:f),{x:c,y:f}}if("straightCross"===e){var p=(1-t)*a,m=(1-t)*l;return a<=l?(p=0,this.from.y<this.to.y&&(m=-m)):(this.from.x<this.to.x&&(p=-p),m=0),{x:this.to.x+p,y:this.to.y+m}}if("horizontal"===e){var v=(1-t)*a;return this.from.x<this.to.x&&(v=-v),{x:this.to.x+v,y:this.from.y}}if("vertical"===e){var g=(1-t)*l;return this.from.y<this.to.y&&(g=-g),{x:this.from.x,y:this.to.y+g}}if("curvedCW"===e){a=this.to.x-this.from.x,l=this.from.y-this.to.y;var y=o(a*a+l*l),b=s,_=i(l,a),w=(_+(.5*t+.5)*b)%(2*b);return{x:this.from.x+(.5*t+.5)*y*r(w),y:this.from.y+(.5*t+.5)*y*n(w)}}if("curvedCCW"===e){a=this.to.x-this.from.x,l=this.from.y-this.to.y;var x=o(a*a+l*l),S=s,k=i(l,a),E=(k+(.5*-t+.5)*S)%(2*S);return{x:this.from.x+(.5*t+.5)*x*r(E),y:this.from.y+(.5*t+.5)*x*n(E)}}var M,T;M=T=a<=l?t*l:t*a,this.from.x>this.to.x&&(M=-M),this.from.y>=this.to.y&&(T=-T);var C=this.from.x+M,O=this.from.y+T;return a<=l?C=this.from.x<=this.to.x?this.to.x<C?this.to.x:C:this.to.x>C?this.to.x:C:O=this.from.y>=this.to.y?this.to.y>O?this.to.y:O:this.to.y<O?this.to.y:O,{x:C,y:O}}},{key:"_findBorderPosition",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return this._findBorderPositionBezier(t,e,i.via)}},{key:"_getDistanceToEdge",value:function(t,e,i,n,r,o){var s=6<arguments.length&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(t,e,i,n,r,o,s)}},{key:"getPoint",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),i=t;return{x:a(1-i,2)*this.fromPoint.x+2*i*(1-i)*e.x+a(i,2)*this.toPoint.x,y:a(1-i,2)*this.fromPoint.y+2*i*(1-i)*e.y+a(i,2)*this.toPoint.y}}}]),e}(fu),vu=function(t){function e(t,i,n){return ol(this,e),kl(this,El(e).call(this,t,i,n))}var i=Math.pow;return Tl(e,t),sl(e,[{key:"_getDistanceToBezierEdge2",value:function(t,e,n,r,o,s,a,h){for(var l,u=1e9,d=t,c=e,f=[0,0,0,0],p=1;10>p;p++){l=.1*p,f[0]=i(1-l,3),f[1]=3*l*i(1-l,2),f[2]=3*i(l,2)*(1-l),f[3]=i(l,3);var m=f[0]*t+f[1]*a.x+f[2]*h.x+f[3]*n,v=f[0]*e+f[1]*a.y+f[2]*h.y+f[3]*r;if(0<p){var g=this._getDistanceToLine(d,c,m,v,o,s);u=g<u?g:u}d=m,c=v}return u}}]),e}(fu),gu=function(t){function e(t,i,n){return ol(this,e),kl(this,El(e).call(this,t,i,n))}var i=Math.pow,n=Math.abs;return Tl(e,t),sl(e,[{key:"_line",value:function(t,e,i){var n=i[0],r=i[1];this._bezierCurve(t,e,n,r)}},{key:"_getViaCoordinates",value:function(){var t,e,i,r,o=this.from.x-this.to.x,s=this.from.y-this.to.y,a=this.options.smooth.roundness;return(n(o)>n(s)||!0===this.options.smooth.forceDirection||"horizontal"===this.options.smooth.forceDirection)&&"vertical"!==this.options.smooth.forceDirection?(e=this.from.y,r=this.to.y,t=this.from.x-a*o,i=this.to.x+a*o):(e=this.from.y-a*s,r=this.to.y+a*s,t=this.from.x,i=this.to.x),[{x:t,y:e},{x:i,y:r}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e)}},{key:"_getDistanceToEdge",value:function(t,e,i,n,r,o){var s=6<arguments.length&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates(),a=pl(s,2),h=a[0],l=a[1];return this._getDistanceToBezierEdge2(t,e,i,n,r,o,h,l)}},{key:"getPoint",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),n=pl(e,2),r=n[0],o=n[1],s=t,a=[i(1-s,3),3*s*i(1-s,2),3*i(s,2)*(1-s),i(s,3)];return{x:a[0]*this.fromPoint.x+a[1]*r.x+a[2]*o.x+a[3]*this.toPoint.x,y:a[0]*this.fromPoint.y+a[1]*r.y+a[2]*o.y+a[3]*this.toPoint.y}}}]),e}(vu),yu=function(t){function e(t,i,n){return ol(this,e),kl(this,El(e).call(this,t,i,n))}var i=Math.atan2,n=Math.sqrt;return Tl(e,t),sl(e,[{key:"_line",value:function(t,e){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),t.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(t){return{x:(1-t)*this.fromPoint.x+t*this.toPoint.x,y:(1-t)*this.fromPoint.y+t*this.toPoint.y}}},{key:"_findBorderPosition",value:function(t,e){var r=this.to,o=this.from;t.id===this.from.id&&(r=this.from,o=this.to);var s=i(r.y-o.y,r.x-o.x),a=r.x-o.x,h=r.y-o.y,l=n(a*a+h*h),u=t.distanceToBorder(e,s),d=(l-u)/l;return{x:(1-d)*o.x+d*r.x,y:(1-d)*o.y+d*r.y,t:0}}},{key:"_getDistanceToEdge",value:function(t,e,i,n,r,o){return this._getDistanceToLine(t,e,i,n,r,o)}}]),e}(cu),bu=function(){function t(e,i,n,r){if(ol(this,t),void 0===i)throw new Error("No body provided");this.options=Os.bridgeObject(n),this.globalOptions=n,this.defaultOptions=r,this.body=i,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new xl(this.body,this.options,!0),this.setOptions(e)}var e=Math.atan2,i=Math.cos,n=Math.sin,r=Math.PI,o=Math.max,s=Math.min;return sl(t,[{key:"setOptions",value:function(e){if(e){var i=this.options.hidden;(void 0===i||null===i)&&(i=!1),t.parseOptions(this.options,e,!0,this.globalOptions),void 0!==e.id&&(this.id=e.id),void 0!==e.from&&(this.fromId=e.from),void 0!==e.to&&(this.toId=e.to),void 0!==e.title&&(this.title=e.title),void 0!==e.value&&(e.value=parseFloat(e.value));var n=[e,this.options,this.defaultOptions];this.chooser=vl.choosify("edge",n),this.updateLabelModule(e);var r=this.updateEdgeType();this._setInteractionWidths(),this.connect();var o=this.options.hidden;return(void 0===o||null===o)&&(o=!1),(o!=i||void 0!==e.physics)&&(r=!0),void 0!==e.physics&&(r=!0),r}}},{key:"getFormattingValues",value:function(){var t=!0===this.options.arrows.to||!0===this.options.arrows.to.enabled,e=!0===this.options.arrows.from||!0===this.options.arrows.from.enabled,i=!0===this.options.arrows.middle||!0===this.options.arrows.middle.enabled,n=this.options.color.inherit,r={toArrow:t,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,middleArrow:i,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,fromArrow:e,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,arrowStrikethrough:this.options.arrowStrikethrough,color:n?void 0:this.options.color.color,inheritsColor:n,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover){if(!0!==this.chooser)"function"==typeof this.chooser&&(this.chooser(r,this.options.id,this.selected,this.hover),void 0!==r.color&&(r.inheritsColor=!1),!1===r.shadow&&(r.shadowColor!==this.options.shadow.color||r.shadowSize!==this.options.shadow.size||r.shadowX!==this.options.shadow.x||r.shadowY!==this.options.shadow.y)&&(r.shadow=!0));else if(this.selected){var s=this.options.selectionWidth;"function"==typeof s?r.width=s(r.width):"number"==typeof s&&(r.width+=s),r.width=o(r.width,.3/this.body.view.scale),r.color=this.options.color.highlight,r.shadow=this.options.shadow.enabled}else if(this.hover){var a=this.options.hoverWidth;"function"==typeof a?r.width=a(r.width):"number"==typeof a&&(r.width+=a),r.width=o(r.width,.3/this.body.view.scale),r.color=this.options.color.hover,r.shadow=this.options.shadow.enabled}}else r.shadow=this.options.shadow.enabled,r.width=o(r.width,.3/this.body.view.scale);return r}},{key:"updateLabelModule",value:function(t){var e=[t,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,e),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var t=this.options.smooth,e=!1,i=!0;return void 0!==this.edgeType&&((this.edgeType instanceof pu&&!0===t.enabled&&"dynamic"===t.type||this.edgeType instanceof gu&&!0===t.enabled&&"cubicBezier"===t.type||this.edgeType instanceof mu&&!0===t.enabled&&"dynamic"!==t.type&&"cubicBezier"!==t.type||this.edgeType instanceof yu&&!1===t.type.enabled)&&(i=!1),!0===i&&(e=this.cleanup())),!0===i?!0===t.enabled?"dynamic"===t.type?(e=!0,this.edgeType=new pu(this.options,this.body,this.labelModule)):"cubicBezier"===t.type?this.edgeType=new gu(this.options,this.body,this.labelModule):this.edgeType=new mu(this.options,this.body,this.labelModule):this.edgeType=new yu(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),e}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=void 0!==this.from&&void 0!==this.to,!0===this.connected?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(t,e,i){if(void 0!==this.options.value){var n=this.options.scaling.customScalingFunction(t,e,i,this.options.value),r=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+n*o}this.options.width=this.options.scaling.min+n*r}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){this.edgeType.hoverWidth="function"==typeof this.options.hoverWidth?this.options.hoverWidth(this.options.width):this.options.hoverWidth+this.options.width,this.edgeType.selectionWidth="function"==typeof this.options.selectionWidth?this.options.selectionWidth(this.options.width):this.options.selectionWidth+this.options.width}},{key:"draw",value:function(t){var e=this.getFormattingValues();if(!e.hidden){var i=this.edgeType.getViaNode(),n={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,e.fromArrow&&(n.from=this.edgeType.getArrowData(t,"from",i,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.fromPoint=n.from.core)),e.toArrow&&(n.to=this.edgeType.getArrowData(t,"to",i,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.toPoint=n.to.core)),e.middleArrow&&(n.middle=this.edgeType.getArrowData(t,"middle",i,this.selected,this.hover,e)),this.edgeType.drawLine(t,e,this.selected,this.hover,i),this.drawArrows(t,n,e),this.drawLabel(t,i)}}},{key:"drawArrows",value:function(t,e,i){i.fromArrow&&this.edgeType.drawArrowHead(t,i,this.selected,this.hover,e.from),i.middleArrow&&this.edgeType.drawArrowHead(t,i,this.selected,this.hover,e.middle),i.toArrow&&this.edgeType.drawArrowHead(t,i,this.selected,this.hover,e.to)}},{key:"drawLabel",value:function(t,e){if(void 0!==this.options.label){var i=this.from,n=this.to;if(this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(t,this.selected,this.hover),i.id!=n.id){this.labelModule.pointToSelf=!1;var r=this.edgeType.getPoint(.5,e);t.save();var o=this._getRotation(t);0!=o.angle&&(t.translate(o.x,o.y),t.rotate(o.angle)),this.labelModule.draw(t,r.x,r.y,this.selected,this.hover),t.restore()}else{this.labelModule.pointToSelf=!0;var s,a,h=this.options.selfReferenceSize;i.shape.width>i.shape.height?(s=i.x+.5*i.shape.width,a=i.y-h):(s=i.x+h,a=i.y-.5*i.shape.height),r=this._pointOnCircle(s,a,h,.125),this.labelModule.draw(t,r.x,r.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(t){var e=[];if(this.labelModule.visible()){var i=this._getRotation();vl.pointInRect(this.labelModule.getSize(),t,i)&&e.push({edgeId:this.id,labelId:0})}var n={left:t.x,top:t.y};return this.isOverlappingWith(n)&&e.push({edgeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){if(this.connected){var e=this.from.x,i=this.from.y,n=this.to.x,r=this.to.y,o=t.left,s=t.top;return 10>this.edgeType.getDistanceToEdge(e,i,n,r,o,s)}return!1}},{key:"_getRotation",value:function(t){var i=this.edgeType.getViaNode(),n=this.edgeType.getPoint(.5,i);void 0!==t&&this.labelModule.calculateLabelSize(t,this.selected,this.hover,n.x,n.y);var o={x:n.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible())return o;if("horizontal"===this.options.font.align)return o;var s=this.from.y-this.to.y,a=this.from.x-this.to.x,h=e(s,a);return(-1>h&&0>a||0<h&&0>a)&&(h+=r),o.angle=h,o}},{key:"_pointOnCircle",value:function(t,e,o,s){var a=2*s*r;return{x:t+o*i(a),y:e-o*n(a)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return void 0!==this.body.nodes[this.fromId]&&void 0!==this.body.nodes[this.toId]}}],[{key:"parseOptions",value:function(t,e){var i=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},r=!!(4<arguments.length&&void 0!==arguments[4])&&arguments[4];if(Os.selectiveDeepExtend(["arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","to","title","value","width","font","chosen","widthConstraint"],t,e,i),vl.isValidLabel(e.label)?t.label=e.label:!vl.isValidLabel(t.label)&&(t.label=void 0),Os.mergeOptions(t,e,"smooth",n),Os.mergeOptions(t,e,"shadow",n),Os.mergeOptions(t,e,"background",n),void 0!==e.dashes&&null!==e.dashes?t.dashes=e.dashes:!0===i&&null===e.dashes&&(t.dashes=Object.create(n.dashes)),void 0!==e.scaling&&null!==e.scaling?(void 0!==e.scaling.min&&(t.scaling.min=e.scaling.min),void 0!==e.scaling.max&&(t.scaling.max=e.scaling.max),Os.mergeOptions(t.scaling,e.scaling,"label",n.scaling)):!0===i&&null===e.scaling&&(t.scaling=Object.create(n.scaling)),void 0===e.arrows||null===e.arrows)!0===i&&null===e.arrows&&(t.arrows=Object.create(n.arrows));else if("string"==typeof e.arrows){var a=e.arrows.toLowerCase();t.arrows.to.enabled=-1!=a.indexOf("to"),t.arrows.middle.enabled=-1!=a.indexOf("middle"),t.arrows.from.enabled=-1!=a.indexOf("from")}else{if("object"!==ml(e.arrows))throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+JSON.stringify(e.arrows));Os.mergeOptions(t.arrows,e.arrows,"to",n.arrows),Os.mergeOptions(t.arrows,e.arrows,"middle",n.arrows),Os.mergeOptions(t.arrows,e.arrows,"from",n.arrows)}if(void 0!==e.color&&null!==e.color){var h=Os.isString(e.color)?{color:e.color,highlight:e.color,hover:e.color,inherit:!1,opacity:1}:e.color,l=t.color;if(r)Os.deepExtend(l,n.color,!1,i);else for(var u in l)l.hasOwnProperty(u)&&delete l[u];if(Os.isString(l))l.color=l,l.highlight=l,l.hover=l,l.inherit=!1,void 0===h.opacity&&(l.opacity=1);else{var d=!1;void 0!==h.color&&(l.color=h.color,d=!0),void 0!==h.highlight&&(l.highlight=h.highlight,d=!0),void 0!==h.hover&&(l.hover=h.hover,d=!0),void 0!==h.inherit&&(l.inherit=h.inherit),void 0!==h.opacity&&(l.opacity=s(1,o(0,h.opacity))),1==d?l.inherit=!1:void 0===l.inherit&&(l.inherit="from")}}else!0===i&&null===e.color&&(t.color=Os.bridgeObject(n.color));!0===i&&null===e.font&&(t.font=Os.bridgeObject(n.font))}}]),t}(),_u=function(){function t(i,n,r){var o=this;ol(this,t),this.body=i,this.images=n,this.groups=r,this.body.functions.createEdge=this.create.bind(this),this.edgesListeners={add:function(t,e){o.add(e.items)},update:function(t,e){o.update(e.items)},remove:function(t,e){o.remove(e.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,i,n,r){return i===t?.5:e(0,1/(i-t)*(r-t))}},selectionWidth:1.5,selfReferenceSize:20,shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},Os.deepExtend(this.options,this.defaultOptions),this.bindEventListeners()}var e=Math.max;return sl(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("_forceDisableDynamicCurves",function(e){var i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];"dynamic"===e&&(e="continuous");var n=!1;for(var r in t.body.edges)if(t.body.edges.hasOwnProperty(r)){var o=t.body.edges[r],s=t.body.data.edges._data[r];if(void 0!==s){var a=s.smooth;void 0!==a&&!0===a.enabled&&"dynamic"===a.type&&(void 0===e?o.setOptions({smooth:!1}):o.setOptions({smooth:{type:e}}),n=!0)}}!0===i&&1==n&&t.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",function(){t.reconnectEdges()}),this.body.emitter.on("refreshEdges",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){Os.forEach(t.edgesListeners,function(e,i){t.body.data.edges&&t.body.data.edges.off(i,e)}),delete t.body.functions.createEdge,delete t.edgesListeners.add,delete t.edgesListeners.update,delete t.edgesListeners.remove,delete t.edgesListeners})}},{key:"setOptions",value:function(t){if(void 0!==t){bu.parseOptions(this.options,t,!0,this.defaultOptions,!0);var e=!1;if(void 0!==t.smooth)for(var i in this.body.edges)this.body.edges.hasOwnProperty(i)&&(e=this.body.edges[i].updateEdgeType()||e);if(void 0!==t.font)for(var n in this.body.edges)this.body.edges.hasOwnProperty(n)&&this.body.edges[n].updateLabelModule();(void 0!==t.hidden||void 0!==t.physics||!0===e)&&this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var e=this,i=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=this.body.data.edges;if(t instanceof sa||t instanceof aa)this.body.data.edges=t;else if(Array.isArray(t))this.body.data.edges=new sa,this.body.data.edges.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.edges=new sa}if(n&&Os.forEach(this.edgesListeners,function(t,e){n.off(e,t)}),this.body.edges={},this.body.data.edges){Os.forEach(this.edgesListeners,function(t,i){e.body.data.edges.on(i,t)});var r=this.body.data.edges.getIds();this.add(r,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===i&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],i=this.body.edges,n=this.body.data.edges,r=0;r<t.length;r++){var o=t[r],s=i[o];s&&s.disconnect();var a=n.get(o,{showInternalIds:!0});i[o]=this.create(a)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t){for(var e=this.body.edges,i=this.body.data.edges,n=!1,r=0;r<t.length;r++){var o=t[r],s=i.get(o),a=e[o];void 0===a?(this.body.edges[o]=this.create(s),n=!0):(a.disconnect(),n=a.setOptions(s)||n,a.connect())}!0===n?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(0!==t.length){var i=this.body.edges;Os.forEach(t,function(t){var e=i[t];void 0!==e&&e.remove()}),e&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var t=this;Os.forEach(this.body.edges,function(e,i){var n=t.body.data.edges._data[i];void 0!==n&&e.setOptions(n)})}},{key:"create",value:function(t){return new bu(t,this.body,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var t,e=this.body.nodes,i=this.body.edges;for(t in e)e.hasOwnProperty(t)&&(e[t].edges=[]);for(t in i)if(i.hasOwnProperty(t)){var n=i[t];n.from=null,n.to=null,n.connect()}}},{key:"getConnectedNodes",value:function(t){var e=[];if(void 0!==this.body.edges[t]){var i=this.body.edges[t];void 0!==i.fromId&&e.push(i.fromId),void 0!==i.toId&&e.push(i.toId)}return e}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var t=this,e=[];Os.forEach(this.body.edges,function(i,n){var r=t.body.nodes[i.toId],o=t.body.nodes[i.fromId];void 0!==r&&!0===r.isCluster||void 0!==o&&!0===o.isCluster||(void 0===r||void 0===o)&&e.push(n)}),this.remove(e,!1)}},{key:"_addMissingEdges",value:function(){var t=this.body.data.edges;if(void 0!==t&&null!==t){var e=this.body.edges,i=[];t.forEach(function(t,n){void 0===e[n]&&i.push(n)}),this.add(i,!0)}}}]),t}(),wu=function(){function t(e,i,n){ol(this,t),this.body=e,this.physicsBody=i,this.barnesHutTree,this.setOptions(n),this.randomSeed=5}var e=Math.sin,i=Math.sqrt,n=Math.pow,r=Math.max,o=Math.abs,s=Math.min,a=Math.floor;return sl(t,[{key:"setOptions",value:function(t){this.options=t,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-r(0,s(1,this.options.avoidOverlap))}},{key:"seededRandom",value:function(){var t=1e4*e(this.randomSeed++);return t-a(t)}},{key:"solve",value:function(){if(0!==this.options.gravitationalConstant&&0<this.physicsBody.physicsNodeIndices.length){var t,e=this.body.nodes,i=this.physicsBody.physicsNodeIndices,n=i.length,r=this._formBarnesHutTree(e,i);this.barnesHutTree=r;for(var o=0;o<n;o++)t=e[i[o]],0<t.options.mass&&this._getForceContributions(r.root,t)}}},{key:"_getForceContributions",value:function(t,e){this._getForceContribution(t.children.NW,e),this._getForceContribution(t.children.NE,e),this._getForceContribution(t.children.SW,e),this._getForceContribution(t.children.SE,e)}},{key:"_getForceContribution",value:function(t,e){if(0<t.childrenCount){var n,r,o;n=t.centerOfMass.x-e.x,r=t.centerOfMass.y-e.y,o=i(n*n+r*r),o*t.calcSize>this.thetaInversed?this._calculateForces(o,n,r,e,t):4===t.childrenCount?this._getForceContributions(t,e):t.children.data.id!=e.id&&this._calculateForces(o,n,r,e,t)}}},{key:"_calculateForces",value:function(t,e,i,o,s){0===t&&(t=.1,e=t),1>this.overlapAvoidanceFactor&&o.shape.radius&&(t=r(.1+this.overlapAvoidanceFactor*o.shape.radius,t-o.shape.radius));var a=this.options.gravitationalConstant*s.mass*o.options.mass/n(t,3),h=e*a;this.physicsBody.forces[o.id].x+=h,this.physicsBody.forces[o.id].y+=i*a}},{key:"_formBarnesHutTree",value:function(t,e){for(var i,n=e.length,s=t[e[0]].x,a=t[e[0]].y,h=t[e[0]].x,l=t[e[0]].y,u=1;u<n;u++){var d=t[e[u]],c=d.x,f=d.y;0<d.options.mass&&(c<s&&(s=c),c>h&&(h=c),f<a&&(a=f),f>l&&(l=f))}var p=o(h-s)-o(l-a);0<p?(a-=.5*p,l+=.5*p):(s+=.5*p,h-=.5*p);var m=r(1e-5,o(h-s)),v=.5*m,g=.5*(s+h),y=.5*(a+l),b={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:g-v,maxX:g+v,minY:y-v,maxY:y+v},size:m,calcSize:1/m,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(b.root);for(var _=0;_<n;_++)i=t[e[_]],0<i.options.mass&&this._placeInTree(b.root,i);return b}},{key:"_updateBranchMass",value:function(t,e){var i=t.centerOfMass,n=t.mass+e.options.mass,o=1/n;i.x=i.x*t.mass+e.x*e.options.mass,i.x*=o,i.y=i.y*t.mass+e.y*e.options.mass,i.y*=o,t.mass=n;var s=r(r(e.height,e.radius),e.width);t.maxWidth=t.maxWidth<s?s:t.maxWidth}},{key:"_placeInTree",value:function(t,e,i){(1!=i||void 0===i)&&this._updateBranchMass(t,e);var n,r=t.children.NW.range;n=r.maxX>e.x?r.maxY>e.y?"NW":"SW":r.maxY>e.y?"NE":"SE",this._placeInRegion(t,e,n)}},{key:"_placeInRegion",value:function(t,e,i){var n=t.children[i];switch(n.childrenCount){case 0:n.children.data=e,n.childrenCount=1,this._updateBranchMass(n,e);break;case 1:n.children.data.x===e.x&&n.children.data.y===e.y?(e.x+=this.seededRandom(),e.y+=this.seededRandom()):(this._splitBranch(n),this._placeInTree(n,e));break;case 4:this._placeInTree(n,e)}}},{key:"_splitBranch",value:function(t){var e=null;1===t.childrenCount&&(e=t.children.data,t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),t.childrenCount=4,t.children.data=null,this._insertRegion(t,"NW"),this._insertRegion(t,"NE"),this._insertRegion(t,"SW"),this._insertRegion(t,"SE"),null!=e&&this._placeInTree(t,e)}},{key:"_insertRegion",value:function(t,e){var i,n,r,o,s=.5*t.size;"NW"===e?(i=t.range.minX,n=t.range.minX+s,r=t.range.minY,o=t.range.minY+s):"NE"===e?(i=t.range.minX+s,n=t.range.maxX,r=t.range.minY,o=t.range.minY+s):"SW"===e?(i=t.range.minX,n=t.range.minX+s,r=t.range.minY+s,o=t.range.maxY):"SE"===e&&(i=t.range.minX+s,n=t.range.maxX,r=t.range.minY+s,o=t.range.maxY),t.children[e]={centerOfMass:{x:0,y:0},mass:0,range:{minX:i,maxX:n,minY:r,maxY:o},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}}},{key:"_debug",value:function(t,e){void 0!==this.barnesHutTree&&(t.lineWidth=1,this._drawBranch(this.barnesHutTree.root,t,e))}},{key:"_drawBranch",value:function(t,e,i){void 0===i&&(i="#FF0000"),4===t.childrenCount&&(this._drawBranch(t.children.NW,e),this._drawBranch(t.children.NE,e),this._drawBranch(t.children.SE,e),this._drawBranch(t.children.SW,e)),e.strokeStyle=i,e.beginPath(),e.moveTo(t.range.minX,t.range.minY),e.lineTo(t.range.maxX,t.range.minY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.minY),e.lineTo(t.range.maxX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.maxY),e.lineTo(t.range.minX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.minX,t.range.maxY),e.lineTo(t.range.minX,t.range.minY),e.stroke()}}]),t}(),xu=function(){function t(e,i,n){ol(this,t),this.body=e,this.physicsBody=i,this.setOptions(n)}var e=Math.sqrt;return sl(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,i,n,r,o,s,a,h,l=this.body.nodes,u=this.physicsBody.physicsNodeIndices,d=this.physicsBody.forces,c=this.options.nodeDistance,f=0;f<u.length-1;f++){a=l[u[f]];for(var p=f+1;p<u.length;p++)h=l[u[p]],t=h.x-a.x,i=h.y-a.y,n=e(t*t+i*i),0===n&&(n=.1*Math.random(),t=n),n<2*c&&(s=n<.5*c?1:-2/3/c*n+4/3,s/=n,r=t*s,o=i*s,d[a.id].x-=r,d[a.id].y-=o,d[h.id].x+=r,d[h.id].y+=o)}}}]),t}(),Su=function(){function t(e,i,n){ol(this,t),this.body=e,this.physicsBody=i,this.setOptions(n)}var e=Math.sqrt,i=Math.pow;return sl(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){var t,n,r,o,s,a,h,l,u,d,c=this.body.nodes,f=this.physicsBody.physicsNodeIndices,p=this.physicsBody.forces,m=this.options.nodeDistance;for(u=0;u<f.length-1;u++)for(h=c[f[u]],d=u+1;d<f.length;d++)if(l=c[f[d]],h.level===l.level){t=l.x-h.x,n=l.y-h.y,r=e(t*t+n*n);a=r<m?-i(.05*r,2)+i(.05*m,2):0,0===r?r=.01:a/=r,o=t*a,s=n*a,p[h.id].x-=o,p[h.id].y-=s,p[l.id].x+=o,p[l.id].y+=s}}}]),t}(),ku=function(){function t(e,i,n){ol(this,t),this.body=e,this.physicsBody=i,this.setOptions(n)}var e=Math.sqrt,i=Math.max;return sl(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,n,r,o=this.physicsBody.physicsEdgeIndices,s=this.body.edges,a=0;a<o.length;a++)e=s[o[a]],!0===e.connected&&e.toId!==e.fromId&&void 0!==this.body.nodes[e.toId]&&void 0!==this.body.nodes[e.fromId]&&(void 0===e.edgeType.via?(t=void 0===e.options.length?1.5*this.options.springLength:e.options.length,this._calculateSpringForce(e.from,e.to,t)):(t=void 0===e.options.length?this.options.springLength:e.options.length,i=e.to,n=e.edgeType.via,r=e.from,this._calculateSpringForce(i,n,.5*t),this._calculateSpringForce(n,r,.5*t)))}},{key:"_calculateSpringForce",value:function(t,n,r){var o=t.x-n.x,s=t.y-n.y,a=i(e(o*o+s*s),.01),h=this.options.springConstant*(r-a)/a,l=o*h,u=s*h;void 0!==this.physicsBody.forces[t.id]&&(this.physicsBody.forces[t.id].x+=l,this.physicsBody.forces[t.id].y+=u),void 0!==this.physicsBody.forces[n.id]&&(this.physicsBody.forces[n.id].x-=l,this.physicsBody.forces[n.id].y-=u)}}]),t}(),Eu=function(){function t(e,i,n){ol(this,t),this.body=e,this.physicsBody=i,this.setOptions(n)}var e=Math.sqrt,i=Math.max,n=Math.min;return sl(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,r,o,s,a,h,l,u,d,c=this.body.edges,f=this.physicsBody.physicsEdgeIndices,p=this.physicsBody.physicsNodeIndices,m=this.physicsBody.forces,v=0;v<p.length;v++)d=p[v],m[d].springFx=0,m[d].springFy=0;for(var g=0;g<f.length;g++)r=c[f[g]],!0===r.connected&&(t=void 0===r.options.length?this.options.springLength:r.options.length,o=r.from.x-r.to.x,s=r.from.y-r.to.y,u=e(o*o+s*s),u=0===u?.01:u,l=this.options.springConstant*(t-u)/u,a=o*l,h=s*l,r.to.level==r.from.level?(void 0!==m[r.toId]&&(m[r.toId].x-=.5*a,m[r.toId].y-=.5*h),void 0!==m[r.fromId]&&(m[r.fromId].x+=.5*a,m[r.fromId].y+=.5*h)):(void 0!==m[r.toId]&&(m[r.toId].springFx-=a,m[r.toId].springFy-=h),void 0!==m[r.fromId]&&(m[r.fromId].springFx+=a,m[r.fromId].springFy+=h)));l=1;for(var y,b,_,w=0;w<p.length;w++)_=p[w],y=n(l,i(-l,m[_].springFx)),b=n(l,i(-l,m[_].springFy)),m[_].x+=y,m[_].y+=b;for(var x,S=0,k=0,E=0;E<p.length;E++)x=p[E],S+=m[x].x,k+=m[x].y;for(var M,T=S/p.length,C=k/p.length,O=0;O<p.length;O++)M=p[O],m[M].x-=T,m[M].y-=C}}]),t}(),Mu=function(){function t(e,i,n){ol(this,t),this.body=e,this.physicsBody=i,this.setOptions(n)}var e=Math.sqrt;return sl(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,i,n,r,o,s=this.body.nodes,a=this.physicsBody.physicsNodeIndices,h=this.physicsBody.forces,l=0;l<a.length;l++)o=a[l],r=s[o],t=-r.x,i=-r.y,n=e(t*t+i*i),this._calculateForces(n,t,i,h,r)}},{key:"_calculateForces",value:function(t,e,i,n,r){var o=0===t?0:this.options.centralGravity/t;n[r.id].x=e*o,n[r.id].y=i*o}}]),t}(),Tu=function(t){function e(t,i,n){return ol(this,e),kl(this,El(e).call(this,t,i,n))}var i=Math.pow,n=Math.max;return Tl(e,t),sl(e,[{key:"_calculateForces",value:function(t,e,r,o,s){0===t&&(t=.1*Math.random(),e=t),1>this.overlapAvoidanceFactor&&o.shape.radius&&(t=n(.1+this.overlapAvoidanceFactor*o.shape.radius,t-o.shape.radius));var a=o.edges.length+1,h=this.options.gravitationalConstant*s.mass*o.options.mass*a/i(t,2),l=e*h;this.physicsBody.forces[o.id].x+=l,this.physicsBody.forces[o.id].y+=r*h}}]),e}(wu),Cu=function(t){function e(t,i,n){return ol(this,e),kl(this,El(e).call(this,t,i,n))}return Tl(e,t),sl(e,[{key:"_calculateForces",value:function(t,e,i,n,r){if(0<t){var o=r.edges.length+1,s=this.options.centralGravity*o*r.options.mass;n[r.id].x=e*s,n[r.id].y=i*s}}}]),e}(Mu),Ou=function(){function t(e){ol(this,t),this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0},Os.extend(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}var e=Math.atan2,i=Math.sqrt,n=Math.pow,r=Math.max,o=Math.abs,s=Math.min;return sl(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("initPhysics",function(){t.initPhysics()}),this.body.emitter.on("_layoutFailed",function(){t.layoutFailed=!0}),this.body.emitter.on("resetPhysics",function(){t.stopSimulation(),t.ready=!1}),this.body.emitter.on("disablePhysics",function(){t.physicsEnabled=!1,t.stopSimulation()}),this.body.emitter.on("restorePhysics",function(){t.setOptions(t.options),!0===t.ready&&t.startSimulation()}),this.body.emitter.on("startSimulation",function(){!0===t.ready&&t.startSimulation()}),this.body.emitter.on("stopSimulation",function(){t.stopSimulation()}),this.body.emitter.on("destroy",function(){t.stopSimulation(!1),t.body.emitter.off()}),this.body.emitter.on("_dataChanged",function(){t.updatePhysicsData()})}},{key:"setOptions",value:function(t){void 0!==t&&(!1===t?(this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation()):!0===t?(this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation()):(this.physicsEnabled=!0,Os.selectiveNotDeepExtend(["stabilization"],this.options,t),Os.mergeOptions(this.options,t,"stabilization"),void 0===t.enabled&&(this.options.enabled=!0),!1===this.options.enabled&&(this.physicsEnabled=!1,this.stopSimulation()),this.timestep=this.options.timestep)),this.init()}},{key:"init",value:function(){var t;"forceAtlas2Based"===this.options.solver?(t=this.options.forceAtlas2Based,this.nodesSolver=new Tu(this.body,this.physicsBody,t),this.edgesSolver=new ku(this.body,this.physicsBody,t),this.gravitySolver=new Cu(this.body,this.physicsBody,t)):"repulsion"===this.options.solver?(t=this.options.repulsion,this.nodesSolver=new xu(this.body,this.physicsBody,t),this.edgesSolver=new ku(this.body,this.physicsBody,t),this.gravitySolver=new Mu(this.body,this.physicsBody,t)):"hierarchicalRepulsion"===this.options.solver?(t=this.options.hierarchicalRepulsion,this.nodesSolver=new Su(this.body,this.physicsBody,t),this.edgesSolver=new Eu(this.body,this.physicsBody,t),this.gravitySolver=new Mu(this.body,this.physicsBody,t)):(t=this.options.barnesHut,this.nodesSolver=new wu(this.body,this.physicsBody,t),this.edgesSolver=new ku(this.body,this.physicsBody,t),this.gravitySolver=new Mu(this.body,this.physicsBody,t)),this.modelOptions=t}},{key:"initPhysics",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?!0===this.options.stabilization.enabled?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),void 0===this.viewFunction&&(this.viewFunction=this.simulationStep.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.stabilized=!0,!0===t&&this._emitStabilized(),void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,!0===t&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var t=Date.now();this.physicsTick(),(Date.now()-t<.4*this.simulationInterval||!0===this.runDoubleSpeed)&&!1===this.stabilized&&(this.physicsTick(),this.runDoubleSpeed=!0),!0===this.stabilized&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.stabilizationIterations;(1<this.stabilizationIterations||!0===this.startedStabilization)&&setTimeout(function(){t.body.emitter.emit("stabilized",{iterations:e}),t.startedStabilization=!1,t.stabilizationIterations=0},0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){!0===this._evaluateStepQuality()?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=r(this.options.timestep,this.timestep/1.2))}},{key:"physicsTick",value:function(){if(this._startStabilizing(),!0!==this.stabilized){if(!0===this.adaptiveTimestep&&!0===this.adaptiveTimestepEnabled){0==this.adaptiveCounter%this.adaptiveInterval?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1}else this.timestep=this.options.timestep,this.physicsStep();!0===this.stabilized&&this.revert(),this.stabilizationIterations++}}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var t=this.body.nodes,e=this.body.edges;for(var i in t)t.hasOwnProperty(i)&&!0===t[i].options.physics&&this.physicsBody.physicsNodeIndices.push(t[i].id);for(var n in e)e.hasOwnProperty(n)&&!0===e[n].options.physics&&this.physicsBody.physicsEdgeIndices.push(e[n].id);for(var r,o=0;o<this.physicsBody.physicsNodeIndices.length;o++)r=this.physicsBody.physicsNodeIndices[o],this.physicsBody.forces[r]={x:0,y:0},void 0===this.physicsBody.velocities[r]&&(this.physicsBody.velocities[r]={x:0,y:0});for(var s in this.physicsBody.velocities)void 0===t[s]&&delete this.physicsBody.velocities[s]}},{key:"revert",value:function(){var t=Object.keys(this.previousStates),e=this.body.nodes,i=this.physicsBody.velocities;this.referenceState={};for(var n,r=0;r<t.length;r++)n=t[r],void 0===e[n]?delete this.previousStates[n]:!0===e[n].options.physics&&(this.referenceState[n]={positions:{x:e[n].x,y:e[n].y}},i[n].x=this.previousStates[n].vx,i[n].y=this.previousStates[n].vy,e[n].x=this.previousStates[n].x,e[n].y=this.previousStates[n].y)}},{key:"_evaluateStepQuality",value:function(){var t,e,r=this.body.nodes,o=this.referenceState;for(var s in this.referenceState)if(this.referenceState.hasOwnProperty(s)&&void 0!==r[s]&&(t=r[s].x-o[s].positions.x,e=r[s].y-o[s].positions.y,i(n(t,2)+n(e,2))>.3))return!1;return!0}},{key:"moveNodes",value:function(){for(var t=this.physicsBody.physicsNodeIndices,e=0,i=0,n=0;n<t.length;n++){var o=t[n],s=this._performStep(o);e=r(e,s),i+=s}this.adaptiveTimestepEnabled=i/t.length<5,this.stabilized=e<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(t,e,i){t+=(e-this.modelOptions.damping*t)/i*this.timestep;var n=this.options.maxVelocity||1e9;return o(t)>n&&(t=0<t?n:-n),t}},{key:"_performStep",value:function(t){var e=this.body.nodes[t],r=this.physicsBody.forces[t],o=this.physicsBody.velocities[t];return this.previousStates[t]={x:e.x,y:e.y,vx:o.x,vy:o.y},!1===e.options.fixed.x?(o.x=this.calculateComponentVelocity(o.x,r.x,e.options.mass),e.x+=o.x*this.timestep):(r.x=0,o.x=0),!1===e.options.fixed.y?(o.y=this.calculateComponentVelocity(o.y,r.y,e.options.mass),e.y+=o.y*this.timestep):(r.y=0,o.y=0),i(n(o.x,2)+n(o.y,2))}},{key:"_freezeNodes",value:function(){var t=this.body.nodes;for(var e in t)if(t.hasOwnProperty(e)&&t[e].x&&t[e].y){var i=t[e].options.fixed;this.freezeCache[e]={x:i.x,y:i.y},i.x=!0,i.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var t=this.body.nodes;for(var e in t)t.hasOwnProperty(e)&&void 0!==this.freezeCache[e]&&(t[e].options.fixed.x=this.freezeCache[e].x,t[e].options.fixed.y=this.freezeCache[e].y);this.freezeCache={}}},{key:"stabilize",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options.stabilization.iterations;return"number"!=typeof e&&(e=this.options.stabilization.iterations,console.log("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),0===this.physicsBody.physicsNodeIndices.length?void(this.ready=!0):(this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,!0===this.options.stabilization.onlyDynamicEdges&&this._freezeNodes(),this.stabilizationIterations=0,void setTimeout(function(){return t._stabilizationBatch()},0))}},{key:"_startStabilizing",value:function(){return!0!==this.startedStabilization&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}},{key:"_stabilizationBatch",value:function(){var t=this,e=function(){return!1===t.stabilized&&t.stabilizationIterations<t.targetIterations},i=function(){t.body.emitter.emit("stabilizationProgress",{iterations:t.stabilizationIterations,total:t.targetIterations})};this._startStabilizing()&&i();for(var n=0;e()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;i(),e()?setTimeout(this._stabilizationBatch.bind(this),0):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),!0===this.options.stabilization.fit&&this.body.emitter.emit("fit"),!0===this.options.stabilization.onlyDynamicEdges&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),!0===this.stabilized?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(t){for(var o=0;o<this.physicsBody.physicsNodeIndices.length;o++){var a=this.physicsBody.physicsNodeIndices[o],h=this.body.nodes[a],l=this.physicsBody.forces[a],u=i(n(l.x,2)+n(l.x,2)),d=s(r(5,u),15),c=Os.HSVToHex((180-180*s(1,r(0,.03*u)))/360,1,1),f={x:h.x+20*l.x,y:h.y+20*l.y};t.lineWidth=d,t.strokeStyle=c,t.beginPath(),t.moveTo(h.x,h.y),t.lineTo(f.x,f.y),t.stroke();var p=e(l.y,l.x);t.fillStyle=c,du.draw(t,{type:"arrow",point:f,angle:p,length:3*d}),t.fill()}}}]),t}(),Pu=function(){function t(){ol(this,t)}return sl(t,null,[{key:"getRange",value:function(t){var e,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=1e9,r=-1e9,o=1e9,s=-1e9;if(0<i.length)for(var a=0;a<i.length;a++)e=t[i[a]],o>e.shape.boundingBox.left&&(o=e.shape.boundingBox.left),s<e.shape.boundingBox.right&&(s=e.shape.boundingBox.right),n>e.shape.boundingBox.top&&(n=e.shape.boundingBox.top),r<e.shape.boundingBox.bottom&&(r=e.shape.boundingBox.bottom);return 1e9===o&&-1e9===s&&1e9===n&&-1e9===r&&(n=0,r=0,o=0,s=0),{minX:o,maxX:s,minY:n,maxY:r}}},{key:"getRangeCore",value:function(t){var e,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=1e9,r=-1e9,o=1e9,s=-1e9;if(0<i.length)for(var a=0;a<i.length;a++)e=t[i[a]],o>e.x&&(o=e.x),s<e.x&&(s=e.x),n>e.y&&(n=e.y),r<e.y&&(r=e.y);return 1e9===o&&-1e9===s&&1e9===n&&-1e9===r&&(n=0,r=0,o=0,s=0),{minX:o,maxX:s,minY:n,maxY:r}}},{key:"findCenter",value:function(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}}},{key:"cloneOptions",value:function(t,e){var i={};return void 0===e||"node"===e?(Os.deepExtend(i,t.options,!0),i.x=t.x,i.y=t.y,i.amountOfConnections=t.edges.length):Os.deepExtend(i,t.options,!0),i}}]),t}(),Au=function(t){function e(t,i,n,r,o,s){var a;return ol(this,e),a=kl(this,El(e).call(this,t,i,n,r,o,s)),a.isCluster=!0,a.containedNodes={},a.containedEdges={},a}return Tl(e,t),sl(e,[{key:"_openChildCluster",value:function(t){var e=this,i=this.body.nodes[t];if(void 0===this.containedNodes[t])throw new Error("node with id: "+t+" not in current cluster");if(!i.isCluster)throw new Error("node with id: "+t+" is not a cluster");delete this.containedNodes[t],Os.forEach(i.edges,function(t){delete e.containedEdges[t.id]}),Os.forEach(i.containedNodes,function(t,i){e.containedNodes[i]=t}),i.containedNodes={},Os.forEach(i.containedEdges,function(t,i){e.containedEdges[i]=t}),i.containedEdges={},Os.forEach(i.edges,function(t){Os.forEach(e.edges,function(i){var n=i.clusteringEdgeReplacingIds.indexOf(t.id);-1===n||(Os.forEach(t.clusteringEdgeReplacingIds,function(t){i.clusteringEdgeReplacingIds.push(t),e.body.edges[t].edgeReplacedById=i.id}),i.clusteringEdgeReplacingIds.splice(n,1))})}),i.edges=[]}}]),e}(Xl),Du=function(){function t(e){var i=this;ol(this,t),this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},Os.extend(this.options,this.defaultOptions),this.body.emitter.on("_resetData",function(){i.clusteredNodes={},i.clusteredEdges={}})}var e=Math.sqrt,i=Math.pow,n=Math.floor;return sl(t,[{key:"clusterByHubsize",value:function(t,e){void 0===t?t=this._getHubSize():"object"===ml(t)&&(e=this._checkOptions(t),t=this._getHubSize());for(var i,n=[],r=0;r<this.body.nodeIndices.length;r++)i=this.body.nodes[this.body.nodeIndices[r]],i.edges.length>=t&&n.push(i.id);for(var o=0;o<n.length;o++)this.clusterByConnection(n[o],e,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(void 0===e.joinCondition)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);var n={},r={};Os.forEach(this.body.nodes,function(i,o){i.options&&!0===e.joinCondition(i.options)&&(n[o]=i,Os.forEach(i.edges,function(e){void 0===t.clusteredEdges[e.id]&&(r[e.id]=e)}))}),this._cluster(n,r,e,i)}},{key:"clusterByEdgeCount",value:function(t,e){var i=this,n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];e=this._checkOptions(e);for(var r,o,s,a=[],h={},l=0;l<this.body.nodeIndices.length;l++){var u,d,c;!function(n){var l={},f={},p=i.body.nodeIndices[n],m=i.body.nodes[p];if(void 0===h[p]){s=0,o=[];for(var v=0;v<m.edges.length;v++)r=m.edges[v],void 0===i.clusteredEdges[r.id]&&(r.toId!==r.fromId&&s++,o.push(r));if(s===t){u=function(t){if(void 0===e.joinCondition||null===e.joinCondition)return!0;var i=Pu.cloneOptions(t);return e.joinCondition(i)};for(var g=!0,y=0;y<o.length;y++){r=o[y];var b=i._getConnectedId(r,p);if(!u(m)){g=!1;break}f[r.id]=r,l[p]=m,l[b]=i.body.nodes[b],h[p]=!0}if(0<Object.keys(l).length&&0<Object.keys(f).length&&!0===g)if(d=function(){for(var t=0;t<a.length;++t)for(var e in l)if(void 0!==a[t].nodes[e])return a[t]},void 0!==(c=d())){for(var _ in l)void 0===c.nodes[_]&&(c.nodes[_]=l[_]);for(var w in f)void 0===c.edges[w]&&(c.edges[w]=f[w])}else a.push({nodes:l,edges:f})}}}(l)}for(var l=0;l<a.length;l++)this._cluster(a[l].nodes,a[l].edges,e,!1);!0===n&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(1,t,e)}},{key:"clusterBridges",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(2,t,e)}},{key:"clusterByConnection",value:function(t,e){var i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(void 0===t)throw new Error("No nodeId supplied to clusterByConnection!");if(void 0===this.body.nodes[t])throw new Error("The nodeId given to clusterByConnection does not exist!");var n=this.body.nodes[t];e=this._checkOptions(e,n),void 0===e.clusterNodeProperties.x&&(e.clusterNodeProperties.x=n.x),void 0===e.clusterNodeProperties.y&&(e.clusterNodeProperties.y=n.y),void 0===e.clusterNodeProperties.fixed&&(e.clusterNodeProperties.fixed={},e.clusterNodeProperties.fixed.x=n.options.fixed.x,e.clusterNodeProperties.fixed.y=n.options.fixed.y);var r={},o={},s=n.id,a=Pu.cloneOptions(n);r[s]=n;for(var h,l=0;l<n.edges.length;l++)if(h=n.edges[l],void 0===this.clusteredEdges[h.id]){var u=this._getConnectedId(h,s);if(void 0===this.clusteredNodes[u])if(u===s)o[h.id]=h;else if(void 0===e.joinCondition)o[h.id]=h,r[u]=this.body.nodes[u];else{var d=Pu.cloneOptions(this.body.nodes[u]);!0===e.joinCondition(a,d)&&(o[h.id]=h,r[u]=this.body.nodes[u])}}var c=Object.keys(r).map(function(t){return r[t].id});for(p in r)if(r.hasOwnProperty(p))for(var f,p=r[p],m=0;m<p.edges.length;m++)f=p.edges[m],-1<c.indexOf(this._getConnectedId(f,p.id))&&(o[f.id]=f);this._cluster(r,o,e,i)}},{key:"_createClusterEdges",value:function(t,e,i,n){for(var r,o,s,a,h,l,u=Object.keys(t),d=[],c=0;c<u.length;c++){o=u[c],s=t[o];for(var f=0;f<s.edges.length;f++)r=s.edges[f],void 0===this.clusteredEdges[r.id]&&(r.toId==r.fromId?e[r.id]=r:r.toId==o?(a=i.id,h=r.fromId,l=h):(a=r.toId,h=i.id,l=a),void 0===t[l]&&d.push({edge:r,fromId:h,toId:a}))}for(var p=[],m=0;m<d.length;m++){var v=d[m],g=v.edge,y=function(t){for(var e=0;e<p.length;e++){var i=p[e],n=t.fromId===i.fromId&&t.toId===i.toId,r=t.fromId===i.toId&&t.toId===i.fromId;if(n||r)return i}return null}(v);null===y?(y=this._createClusteredEdge(v.fromId,v.toId,g,n),p.push(y)):y.clusteringEdgeReplacingIds.push(g.id),this.body.edges[g.id].edgeReplacedById=y.id,this._backupEdgeOptions(g),g.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return void 0===t.clusterEdgeProperties&&(t.clusterEdgeProperties={}),void 0===t.clusterNodeProperties&&(t.clusterNodeProperties={}),t}},{key:"_cluster",value:function(t,e,i){var n=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],r=[];for(var o in t)t.hasOwnProperty(o)&&void 0!==this.clusteredNodes[o]&&r.push(o);for(var s=0;s<r.length;++s)delete t[r[s]];if(0!=Object.keys(t).length&&(1!=Object.keys(t).length||1==i.clusterNodeProperties.allowSingleNodeCluster)){var a=Os.deepExtend({},i.clusterNodeProperties);if(void 0!==i.processProperties){var h=[];for(var l in t)if(t.hasOwnProperty(l)){var u=Pu.cloneOptions(t[l]);h.push(u)}var d=[];for(var c in e)if(e.hasOwnProperty(c)&&"clusterEdge:"!==c.substr(0,12)){var f=Pu.cloneOptions(e[c],"edge");d.push(f)}if(!(a=i.processProperties(a,h,d)))throw new Error("The processProperties function does not return properties!")}void 0===a.id&&(a.id="cluster:"+Os.randomUUID());var p=a.id;void 0===a.label&&(a.label="cluster");var m;void 0===a.x&&(m=this._getClusterPosition(t),a.x=m.x),void 0===a.y&&(void 0===m&&(m=this._getClusterPosition(t)),a.y=m.y),a.id=p;var v=this.body.functions.createNode(a,Au);v.containedNodes=t,v.containedEdges=e,v.clusterEdgeProperties=i.clusterEdgeProperties,this.body.nodes[a.id]=v,this._clusterEdges(t,e,a,i.clusterEdgeProperties),a.id=void 0,!0===n&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(t){void 0===this.clusteredEdges[t.id]&&(this.clusteredEdges[t.id]={physics:t.options.physics})}},{key:"_restoreEdge",value:function(t){var e=this.clusteredEdges[t.id];void 0!==e&&(t.setOptions({physics:e.physics}),delete this.clusteredEdges[t.id])}},{key:"isCluster",value:function(t){return void 0===this.body.nodes[t]?(console.log("Node does not exist."),!1):!0===this.body.nodes[t].isCluster}},{key:"_getClusterPosition",value:function(t){for(var e,i=Object.keys(t),n=t[i[0]].x,r=t[i[0]].x,o=t[i[0]].y,s=t[i[0]].y,a=1;a<i.length;a++)e=t[i[a]],n=e.x<n?e.x:n,r=e.x>r?e.x:r,o=e.y<o?e.y:o,s=e.y>s?e.y:s;return{x:.5*(n+r),y:.5*(o+s)}}},{key:"openCluster",value:function(t,e){var i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(void 0===t)throw new Error("No clusterNodeId supplied to openCluster.");var n=this.body.nodes[t];if(void 0===n)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(!0!==n.isCluster||void 0===n.containedNodes||void 0===n.containedEdges)throw new Error("The node:"+t+" is not a valid cluster.");var r=this.findNode(t),o=r.indexOf(t)-1;if(0<=o){var s=r[o];return this.body.nodes[s]._openChildCluster(t),delete this.body.nodes[t],void(!0===i&&this.body.emitter.emit("_dataChanged"))}var a=n.containedNodes,h=n.containedEdges;if(void 0!==e&&void 0!==e.releaseFunction&&"function"==typeof e.releaseFunction){var l={},u={x:n.x,y:n.y};for(var d in a)if(a.hasOwnProperty(d)){var c=this.body.nodes[d];l[d]={x:c.x,y:c.y}}var f=e.releaseFunction(u,l);for(var p in a)if(a.hasOwnProperty(p)){var m=this.body.nodes[p];void 0!==f[p]&&(m.x=void 0===f[p].x?n.x:f[p].x,m.y=void 0===f[p].y?n.y:f[p].y)}}else Os.forEach(a,function(t){!1===t.options.fixed.x&&(t.x=n.x),!1===t.options.fixed.y&&(t.y=n.y)});for(var v in a)if(a.hasOwnProperty(v)){var g=this.body.nodes[v];g.vx=n.vx,g.vy=n.vy,g.setOptions({physics:!0}),delete this.clusteredNodes[v]}for(var y=[],b=0;b<n.edges.length;b++)y.push(n.edges[b]);for(var _=0;_<y.length;_++){for(var w=y[_],x=this._getConnectedId(w,t),S=this.clusteredNodes[x],k=0;k<w.clusteringEdgeReplacingIds.length;k++){var E=w.clusteringEdgeReplacingIds[k],M=this.body.edges[E];if(void 0!==M)if(void 0!==S){var T=this.body.nodes[S.clusterId];T.containedEdges[M.id]=M,delete h[M.id];var C=M.fromId,O=M.toId;M.toId==x?O=S.clusterId:C=S.clusterId,this._createClusteredEdge(C,O,M,T.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(M)}w.remove()}for(var P in h)h.hasOwnProperty(P)&&this._restoreEdge(h[P]);delete this.body.nodes[t],!0===i&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(t){var e=[];if(!0===this.isCluster(t)){var i=this.body.nodes[t].containedNodes;for(var n in i)i.hasOwnProperty(n)&&e.push(this.body.nodes[n].id)}return e}},{key:"findNode",value:function(t){for(var e,i=[],n=0;void 0!==this.clusteredNodes[t]&&n<100;){if(void 0===(e=this.body.nodes[t]))return[];i.push(e.id),t=this.clusteredNodes[t].clusterId,n++}return void 0===(e=this.body.nodes[t])?[]:(i.push(e.id),i.reverse(),i)}},{key:"updateClusteredNode",value:function(t,e){if(void 0===t)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(void 0===e)throw new Error("No newOptions supplied to updateClusteredNode.");if(void 0===this.body.nodes[t])throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[t].setOptions(e),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(t,e){if(void 0===t)throw new Error("No startEdgeId supplied to updateEdge.");if(void 0===e)throw new Error("No newOptions supplied to updateEdge.");if(void 0===this.body.edges[t])throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var i,n=this.getClusteredEdges(t),r=0;r<n.length;r++)i=this.body.edges[n[r]],i.setOptions(e);this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(t){for(var e=[],i=0;void 0!==t&&void 0!==this.body.edges[t]&&i<100;)e.push(this.body.edges[t].id),t=this.body.edges[t].edgeReplacedById,i++;return e.reverse(),e}},{key:"getBaseEdge",value:function(t){return this.getBaseEdges(t)[0]}},{key:"getBaseEdges",value:function(t){for(var e,i=[t],n=[],r=[],o=0;0<i.length&&o<100;)if(void 0!==(e=i.pop())){var s=this.body.edges[e];if(void 0!==s){o++;var a=s.clusteringEdgeReplacingIds;if(void 0===a)r.push(e);else for(var h,l=0;l<a.length;++l)h=a[l],-1===i.indexOf(a)&&-1===n.indexOf(a)&&i.push(h);n.push(e)}}return r}},{key:"_getConnectedId",value:function(t,e){return t.toId==e?(t.fromId,t.fromId):t.toId}},{key:"_getHubSize",value:function(){for(var t,r=0,o=0,s=0,a=0,h=0;h<this.body.nodeIndices.length;h++)t=this.body.nodes[this.body.nodeIndices[h]],t.edges.length>a&&(a=t.edges.length),r+=t.edges.length,o+=i(t.edges.length,2),s+=1;r/=s,o/=s;var l=o-i(r,2),u=e(l),d=n(r+2*u);return d>a&&(d=a),d}},{key:"_createClusteredEdge",value:function(t,e,i,n,r){var o=Pu.cloneOptions(i,"edge");Os.deepExtend(o,n),o.from=t,o.to=e,o.id="clusterEdge:"+Os.randomUUID(),void 0!==r&&Os.deepExtend(o,r);var s=this.body.functions.createEdge(o);return s.clusteringEdgeReplacingIds=[i.id],s.connect(),this.body.edges[s.id]=s,s}},{key:"_clusterEdges",value:function(t,e,i,n){if(e instanceof bu){var r=e,o={};o[r.id]=r,e=o}if(t instanceof Xl){var s=t,a={};a[s.id]=s,t=a}if(void 0===i||null===i)throw new Error("_clusterEdges: parameter clusterNode required");for(var h in void 0===n&&(n=i.clusterEdgeProperties),this._createClusterEdges(t,e,i,n),e)if(e.hasOwnProperty(h)&&void 0!==this.body.edges[h]){var l=this.body.edges[h];this._backupEdgeOptions(l),l.setOptions({physics:!1})}for(var u in t)t.hasOwnProperty(u)&&(this.clusteredNodes[u]={clusterId:i.id,node:this.body.nodes[u]},this.body.nodes[u].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(t){if(void 0!==t){var e=this.clusteredNodes[t];if(void 0!==e){var i=e.clusterId;return void 0===i?void 0:this.body.nodes[i]}}}},{key:"_filter",value:function(t,e){var i=[];return Os.forEach(t,function(t){e(t)&&i.push(t)}),i}},{key:"_updateState",value:function(){var t,e=this,i=[],n={},r=function(t){Os.forEach(e.body.nodes,function(e){!0===e.isCluster&&t(e)})};for(t in this.clusteredNodes)if(this.clusteredNodes.hasOwnProperty(t)){var o=this.body.nodes[t];void 0===o&&i.push(t)}r(function(t){for(var e=0;e<i.length;e++)delete t.containedNodes[i[e]]});for(var s=0;s<i.length;s++)delete this.clusteredNodes[i[s]];Os.forEach(this.clusteredEdges,function(t){var i=e.body.edges[t];void 0!==i&&i.endPointsValid()||(n[t]=t)}),r(function(t){Os.forEach(t.containedEdges,function(t,e){t.endPointsValid()||n[e]||(n[e]=e)})}),Os.forEach(this.body.edges,function(t,i){var r=!0,o=t.clusteringEdgeReplacingIds;if(void 0!==o){var s=0;Os.forEach(o,function(t){var i=e.body.edges[t];void 0!==i&&i.endPointsValid()&&(s+=1)}),r=0<s}t.endPointsValid()&&r||(n[i]=i)}),r(function(t){Os.forEach(n,function(i){delete t.containedEdges[i],Os.forEach(t.edges,function(r,o){return r.id===i?void(t.edges[o]=null):void(r.clusteringEdgeReplacingIds=e._filter(r.clusteringEdgeReplacingIds,function(t){return!n[t]}))}),t.edges=e._filter(t.edges,function(t){return null!==t})})}),Os.forEach(n,function(t){delete e.clusteredEdges[t]}),Os.forEach(n,function(t){delete e.body.edges[t]});var a=Object.keys(this.body.edges);Os.forEach(a,function(t){var i=e.body.edges[t],n=e._isClusteredNode(i.fromId)||e._isClusteredNode(i.toId);if(n!==e._isClusteredEdge(i.id))if(n){var r=e._getClusterNodeForNode(i.fromId);void 0!==r&&e._clusterEdges(e.body.nodes[i.fromId],i,r);var o=e._getClusterNodeForNode(i.toId);void 0!==o&&e._clusterEdges(e.body.nodes[i.toId],i,o)}else delete e._clusterEdges[t],e._restoreEdge(i)});for(var h=!1,l=!0;l;)!function(){var t=[];r(function(e){var i=Object.keys(e.containedNodes).length,n=!0===e.options.allowSingleNodeCluster;(n&&1>i||!n&&2>i)&&t.push(e.id)});for(var i=0;i<t.length;++i)e.openCluster(t[i],{},!1);l=0<t.length,h=h||l}();h&&this._updateState()}},{key:"_isClusteredNode",value:function(t){return void 0!==this.clusteredNodes[t]}},{key:"_isClusteredEdge",value:function(t){return void 0!==this.clusteredEdges[t]}}]),t}(),Iu=function(){function t(e,i){ol(this,t),_i(),this.body=e,this.canvas=i,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},Os.extend(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return sl(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("dragStart",function(){t.dragging=!0}),this.body.emitter.on("dragEnd",function(){t.dragging=!1}),this.body.emitter.on("zoom",function(){t.zooming=!0,window.clearTimeout(t.zoomTimeoutId),t.zoomTimeoutId=window.setTimeout(function(){t.zooming=!1,t._requestRedraw.bind(t)()},250)}),this.body.emitter.on("_resizeNodes",function(){t._resizeNodes()}),this.body.emitter.on("_redraw",function(){!1===t.renderingActive&&t._redraw()}),this.body.emitter.on("_blockRedraw",function(){t.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",function(){t.allowRedraw=!0,t.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",this._requestRedraw.bind(this)),this.body.emitter.on("_startRendering",function(){t.renderRequests+=1,t.renderingActive=!0,t._startRendering()}),this.body.emitter.on("_stopRendering",function(){t.renderRequests-=1,t.renderingActive=0<t.renderRequests,t.renderTimer=void 0}),this.body.emitter.on("destroy",function(){t.renderRequests=0,t.allowRedraw=!1,t.renderingActive=!1,!0===t.requiresTimeout?clearTimeout(t.renderTimer):window.cancelAnimationFrame(t.renderTimer),t.body.emitter.off()})}},{key:"setOptions",value:function(t){void 0!==t&&Os.selectiveDeepExtend(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,t)}},{key:"_requestNextFrame",value:function(t,e){if("undefined"!=typeof window){var i,n=window;return!0===this.requiresTimeout?i=n.setTimeout(t,e):n.requestAnimationFrame&&(i=n.requestAnimationFrame(t)),i}}},{key:"_startRendering",value:function(){!0===this.renderingActive&&void 0===this.renderTimer&&(this.renderTimer=this._requestNextFrame(this._renderStep.bind(this),this.simulationInterval))}},{key:"_renderStep",value:function(){!0===this.renderingActive&&(this.renderTimer=void 0,!0===this.requiresTimeout&&this._startRendering(),this._redraw(),!1===this.requiresTimeout&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var t=this;!0!==this.redrawRequested&&!1===this.renderingActive&&!0===this.allowRedraw&&(this.redrawRequested=!0,this._requestNextFrame(function(){t._redraw(!1)},0))}},{key:"_redraw",value:function(){var t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];if(!0===this.allowRedraw){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1,(0===this.canvas.frame.canvas.width||0===this.canvas.frame.canvas.height)&&this.canvas.setSize(),this.canvas.setTransform();var e=this.canvas.getContext(),i=this.canvas.frame.canvas.clientWidth,n=this.canvas.frame.canvas.clientHeight;if(e.clearRect(0,0,i,n),0===this.canvas.frame.clientWidth)return;e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale),e.beginPath(),this.body.emitter.emit("beforeDrawing",e),e.closePath(),!1===t&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&(!1===this.zooming||!0===this.zooming&&!1===this.options.hideEdgesOnZoom)&&this._drawEdges(e),(!1===this.dragging||!0===this.dragging&&!1===this.options.hideNodesOnDrag)&&this._drawNodes(e,t),e.beginPath(),this.body.emitter.emit("afterDrawing",e),e.closePath(),e.restore(),!0===t&&e.clearRect(0,0,i,n)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var t=this.canvas.getContext();t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale);var e,i=this.body.nodes;for(var n in i)i.hasOwnProperty(n)&&(e=i[n],e.resize(t),e.updateBoundingBox(t,e.selected));t.restore()}},{key:"_drawNodes",value:function(t){for(var e,i=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=this.body.nodes,r=this.body.nodeIndices,o=[],s=this.canvas.DOMtoCanvas({x:-20,y:-20}),a=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+20,y:this.canvas.frame.canvas.clientHeight+20}),h={top:s.y,left:s.x,bottom:a.y,right:a.x},l=0;l<r.length;l++)e=n[r[l]],e.isSelected()?o.push(r[l]):!0===i?e.draw(t):!0===e.isBoundingBoxOverlappingWith(h)?e.draw(t):e.updateBoundingBox(t,e.selected);for(var u=0;u<o.length;u++)e=n[o[u]],e.draw(t)}},{key:"_drawEdges",value:function(t){for(var e,i=this.body.edges,n=this.body.edgeIndices,r=0;r<n.length;r++)e=i[n[r]],!0===e.connected&&e.draw(t)}},{key:"_determineBrowserMethod",value:function(){if("undefined"!=typeof window){var t=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,-1==t.indexOf("msie 9.0")?-1!=t.indexOf("safari")&&-1>=t.indexOf("chrome")&&(this.requiresTimeout=!0):this.requiresTimeout=!0}else this.requiresTimeout=!0}}]),t}(),Ru=Ft(function(t,e){e.onTouch=function(t,e){e.inputHandler=function(t){t.isFirst&&e(t)},t.on("hammer.input",e.inputHandler)},e.onRelease=function(t,e){return e.inputHandler=function(t){t.isFinal&&e(t)},t.on("hammer.input",e.inputHandler)},e.offTouch=function(t,e){t.off("hammer.input",e.inputHandler)},e.offRelease=e.offTouch,e.disablePreventDefaultVertically=function(t){return t.getTouchAction=function(){return["pan-y"]},t}}),Lu=(Ru.onTouch,Ru.onRelease,Ru.offTouch,Ru.offRelease,Ru.disablePreventDefaultVertically,function(){function t(e){ol(this,t),this.body=e,this.pixelRatio=1,this.resizeTimer=void 0,this.resizeFunction=this._onResize.bind(this),this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},Os.extend(this.options,this.defaultOptions),this.bindEventListeners()}var e=Math.round;return sl(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.once("resize",function(e){0!==e.width&&(t.body.view.translation.x=.5*e.width),0!==e.height&&(t.body.view.translation.y=.5*e.height)}),this.body.emitter.on("setSize",this.setSize.bind(this)),this.body.emitter.on("destroy",function(){t.hammerFrame.destroy(),t.hammer.destroy(),t._cleanUp()})}},{key:"setOptions",value:function(t){var e=this;void 0!==t&&Os.selectiveDeepExtend(["width","height","autoResize"],this.options,t),!0===this.options.autoResize&&(this._cleanUp(),this.resizeTimer=setInterval(function(){!0===e.setSize()&&e.body.emitter.emit("_requestRedraw")},1e3),this.resizeFunction=this._onResize.bind(this),Os.addEventListener(window,"resize",this.resizeFunction))}},{key:"_cleanUp",value:function(){void 0!==this.resizeTimer&&clearInterval(this.resizeTimer),Os.removeEventListener(window,"resize",this.resizeFunction),this.resizeFunction=void 0}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.pixelRatio;!0===this.initialized&&(this.cameraState.previousWidth=this.frame.canvas.width/t,this.cameraState.previousHeight=this.frame.canvas.height/t,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/t,y:.5*this.frame.canvas.height/t}))}},{key:"_setCameraState",value:function(){if(void 0!==this.cameraState.scale&&0!==this.frame.canvas.clientWidth&&0!==this.frame.canvas.clientHeight&&0!==this.pixelRatio&&0<this.cameraState.previousWidth){var t=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,e=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,i=this.cameraState.scale;1!=t&&1!=e?i=.5*this.cameraState.scale*(t+e):1==t?1!=e&&(i=this.cameraState.scale*e):i=this.cameraState.scale*t,this.body.view.scale=i;var n=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),r={x:n.x-this.cameraState.position.x,y:n.y-this.cameraState.position.y};this.body.view.translation.x+=r.x*this.body.view.scale,this.body.view.translation.y+=r.y*this.body.view.scale}}},{key:"_prepareValue",value:function(t){if("number"==typeof t)return t+"px";if("string"==typeof t){if(-1!==t.indexOf("%")||-1!==t.indexOf("px"))return t;if(-1===t.indexOf("%"))return t+"px"}throw new Error("Could not use the value supplied for width or height:"+t)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=900,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var t=this;void 0!==this.hammer&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new tl(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:tl.DIRECTION_ALL}),Ru.onTouch(this.hammer,function(e){t.body.eventListeners.onTouch(e)}),this.hammer.on("tap",function(e){t.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",function(e){t.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",function(e){t.body.eventListeners.onHold(e)}),this.hammer.on("panstart",function(e){t.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",function(e){t.body.eventListeners.onDrag(e)}),this.hammer.on("panend",function(e){t.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",function(e){t.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("mousewheel",function(e){t.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("DOMMouseScroll",function(e){t.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",function(e){t.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",function(e){t.body.eventListeners.onContext(e)}),this.hammerFrame=new tl(this.frame),Ru.onRelease(this.hammerFrame,function(e){t.body.eventListeners.onRelease(e)})}},{key:"setSize",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options.width,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.options.height;t=this._prepareValue(t),i=this._prepareValue(i);var n=!1,r=this.frame.canvas.width,o=this.frame.canvas.height,s=this.pixelRatio;if(this._setPixelRatio(),t!=this.options.width||i!=this.options.height||this.frame.style.width!=t||this.frame.style.height!=i)this._getCameraState(s),this.frame.style.width=t,this.frame.style.height=i,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=e(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=e(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=t,this.options.height=i,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},n=!0;else{var a=e(this.frame.canvas.clientWidth*this.pixelRatio),h=e(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==a||this.frame.canvas.height!==h)&&this._getCameraState(s),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,n=!0),this.frame.canvas.height!==h&&(this.frame.canvas.height=h,n=!0)}return 1==n&&(this.body.emitter.emit("resize",{width:e(this.frame.canvas.width/this.pixelRatio),height:e(this.frame.canvas.height/this.pixelRatio),oldWidth:e(r/this.pixelRatio),oldHeight:e(o/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,n}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");var e=1;return"undefined"!=typeof window&&(e=window.devicePixelRatio||1),e/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}}},{key:"DOMtoCanvas",value:function(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}}}]),t}()),Nu=function(){function t(e,i){var n=this;ol(this,t),this.body=e,this.canvas=i,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",this.fit.bind(this)),this.body.emitter.on("animationFinished",function(){n.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",this.releaseNode.bind(this))}var e=Math.abs,i=Math.min;return sl(t,[{key:"setOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.options=t}},{key:"fit",value:function(){var t,n,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{nodes:[]},o=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(r=Object.assign({},r),(void 0===r.nodes||0===r.nodes.length)&&(r.nodes=this.body.nodeIndices),!0===o){var s=0;for(var a in this.body.nodes)if(this.body.nodes.hasOwnProperty(a)){var h=this.body.nodes[a];!0===h.predefinedPosition&&(s+=1)}if(s>.5*this.body.nodeIndices.length)return void this.fit(r,!1);t=Pu.getRange(this.body.nodes,r.nodes);n=12.662/(this.body.nodeIndices.length+7.4147)+.0964822;n*=i(this.canvas.frame.canvas.clientWidth/600,this.canvas.frame.canvas.clientHeight/600)}else{this.body.emitter.emit("_resizeNodes"),t=Pu.getRange(this.body.nodes,r.nodes);var l=1.1*e(t.maxX-t.minX),u=1.1*e(t.maxY-t.minY),d=this.canvas.frame.canvas.clientWidth/l,c=this.canvas.frame.canvas.clientHeight/u;n=d<=c?d:c}1<n?n=1:0===n&&(n=1);var f=Pu.findCenter(t),p={position:f,scale:n,animation:r.animation};this.moveTo(p)}},{key:"focus",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==this.body.nodes[t]){var i={x:this.body.nodes[t].x,y:this.body.nodes[t].y};e.position=i,e.lockedOnNode=t,this.moveTo(e)}else console.log("Node: "+t+" cannot be found.")}},{key:"moveTo",value:function(t){var e=Number.isFinite;if(void 0===t)return void(t={});if(null!=t.offset){if(null==t.offset.x)t.offset.x=0;else if(t.offset.x=+t.offset.x,!e(t.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.');if(null==t.offset.y)t.offset.x=0;else if(t.offset.y=+t.offset.y,!e(t.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else t.offset={x:0,y:0};if(null!=t.position){if(null==t.position.x)t.position.x=0;else if(t.position.x=+t.position.x,!e(t.position.x))throw new TypeError('The option "position.x" has to be a finite number.');if(null==t.position.y)t.position.x=0;else if(t.position.y=+t.position.y,!e(t.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else t.position=this.getViewPosition();if(null==t.scale)t.scale=this.body.view.scale;else if(t.scale=+t.scale,!(0<t.scale))throw new TypeError('The option "scale" has to be a number greater than zero.');void 0===t.animation&&(t.animation={duration:0}),!1===t.animation&&(t.animation={duration:0}),!0===t.animation&&(t.animation={}),void 0===t.animation.duration&&(t.animation.duration=1e3),void 0===t.animation.easingFunction&&(t.animation.easingFunction="easeInOutQuad"),this.animateView(t)}},{key:"animateView",value:function(t){if(void 0!==t){this.animationEasingFunction=t.animation.easingFunction,this.releaseNode(),!0===t.locked&&(this.lockedOnNodeId=t.lockedOnNode,this.lockedOnNodeOffset=t.offset),0!=this.easingTime&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=t.scale,this.body.view.scale=this.targetScale;var e=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:e.x-t.position.x,y:e.y-t.position.y};this.targetTranslation={x:this.sourceTranslation.x+i.x*this.targetScale+t.offset.x,y:this.sourceTranslation.y+i.y*this.targetScale+t.offset.y},0===t.animation.duration?null==this.lockedOnNodeId?(this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw")):(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)):(this.animationSpeed=1/(60*t.animation.duration*.001)||1/60,this.animationEasingFunction=t.animation.easingFunction,this.viewFunction=this._transitionRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))}}},{key:"_lockedRedraw",value:function(){var t={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},e=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:e.x-t.x,y:e.y-t.y},n=this.body.view.translation,r={x:n.x+i.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:n.y+i.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=r}},{key:"releaseNode",value:function(){void 0!==this.lockedOnNodeId&&void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];this.easingTime+=this.animationSpeed,this.easingTime=!0===t?1:this.easingTime;var e=Os.easingFunctions[this.animationEasingFunction](this.easingTime);this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*e,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*e,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*e},1<=this.easingTime&&(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,null!=this.lockedOnNodeId&&(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)),this.body.emitter.emit("animationFinished"))}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),t}(),Fu=function(){function t(e,i){var n=this;ol(this,t),this.body=e,this.canvas=i,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",function(){n.activated=!0,n.configureKeyboardBindings()}),this.body.emitter.on("deactivate",function(){n.activated=!1,n.configureKeyboardBindings()}),this.body.emitter.on("destroy",function(){void 0!==n.keycharm&&n.keycharm.destroy()}),this.options={}}return sl(t,[{key:"setOptions",value:function(t){void 0!==t&&(this.options=t,this.create())}},{key:"create",value:function(){!0===this.options.navigationButtons?!1===this.iconsCreated&&this.loadNavigationElements():!0===this.iconsCreated&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(0!=this.navigationHammers.length){for(var t=0;t<this.navigationHammers.length;t++)this.navigationHammers[t].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var t=this;this.cleanNavigation(),this.navigationDOM={};var e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],i=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var n=0;n<e.length;n++){this.navigationDOM[e[n]]=document.createElement("div"),this.navigationDOM[e[n]].className="vis-button vis-"+e[n],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[n]]);var r=new tl(this.navigationDOM[e[n]]);"_fit"===i[n]?Ru.onTouch(r,this._fit.bind(this)):Ru.onTouch(r,this.bindToRedraw.bind(this,i[n])),this.navigationHammers.push(r)}var o=new tl(this.canvas.frame);Ru.onRelease(o,function(){t._stopMovement()}),this.navigationHammers.push(o),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(t){void 0===this.boundFunctions[t]&&(this.boundFunctions[t]=this[t].bind(this),this.body.emitter.on("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(t){void 0!==this.boundFunctions[t]&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[t])}},{key:"_fit",value:function(){700<(new Date).valueOf()-this.touchTime&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=(new Date).valueOf())}},{key:"_stopMovement",value:function(){for(var t in this.boundFunctions)this.boundFunctions.hasOwnProperty(t)&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var t=this.body.view.scale,e=this.body.view.scale*(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,n=e/t,r=(1-n)*this.canvas.canvasViewCenter.x+i.x*n,o=(1-n)*this.canvas.canvasViewCenter.y+i.y*n;this.body.view.scale=e,this.body.view.translation={x:r,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var t=this.body.view.scale,e=this.body.view.scale/(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,n=e/t,r=(1-n)*this.canvas.canvasViewCenter.x+i.x*n,o=(1-n)*this.canvas.canvasViewCenter.y+i.y*n;this.body.view.scale=e,this.body.view.translation={x:r,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var t=this;void 0!==this.keycharm&&this.keycharm.destroy(),!0===this.options.keyboard.enabled&&(this.keycharm=Ta(!0===this.options.keyboard.bindToWindow?{container:window,preventDefault:!0}:{container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),!0===this.activated&&(this.keycharm.bind("up",function(){t.bindToRedraw("_moveUp")},"keydown"),this.keycharm.bind("down",function(){t.bindToRedraw("_moveDown")},"keydown"),this.keycharm.bind("left",function(){t.bindToRedraw("_moveLeft")},"keydown"),this.keycharm.bind("right",function(){t.bindToRedraw("_moveRight")},"keydown"),this.keycharm.bind("=",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num+",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num-",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("-",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("[",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("]",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pageup",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pagedown",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("up",function(){t.unbindFromRedraw("_moveUp")},"keyup"),this.keycharm.bind("down",function(){t.unbindFromRedraw("_moveDown")},"keyup"),this.keycharm.bind("left",function(){t.unbindFromRedraw("_moveLeft")},"keyup"),this.keycharm.bind("right",function(){t.unbindFromRedraw("_moveRight")},"keyup"),this.keycharm.bind("=",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num+",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("[",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("]",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pageup",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pagedown",function(){t.unbindFromRedraw("_zoomOut")},"keyup")))}}]),t}(),zu=function(){function t(e,i){ol(this,t),this.container=e,this.overflowMethod=i||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return sl(t,[{key:"setPosition",value:function(t,e){this.x=parseInt(t),this.y=parseInt(e)}},{key:"setText",value:function(t){t instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(t)):this.frame.innerHTML=t}},{key:"show",value:function(t){if(void 0===t&&(t=!0),!0===t){var e=this.frame.clientHeight,i=this.frame.clientWidth,n=this.frame.parentNode.clientHeight,r=this.frame.parentNode.clientWidth,o=0,s=0;if("flip"==this.overflowMethod){var a=!1,h=!0;this.y-e<this.padding&&(h=!1),this.x+i>r-this.padding&&(a=!0),o=a?this.x-i:this.x,s=h?this.y-e:this.y}else s=this.y-e,s+e+this.padding>n&&(s=n-e-this.padding),s<this.padding&&(s=this.padding),o=this.x,o+i+this.padding>r&&(o=r-i-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=s+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),t}(),Bu=function(){function t(e,i,n){ol(this,t),this.body=e,this.canvas=i,this.selectionHandler=n,this.navigationHandler=new Fu(e,i),this.body.eventListeners.onTap=this.onTap.bind(this),this.body.eventListeners.onTouch=this.onTouch.bind(this),this.body.eventListeners.onDoubleTap=this.onDoubleTap.bind(this),this.body.eventListeners.onHold=this.onHold.bind(this),this.body.eventListeners.onDragStart=this.onDragStart.bind(this),this.body.eventListeners.onDrag=this.onDrag.bind(this),this.body.eventListeners.onDragEnd=this.onDragEnd.bind(this),this.body.eventListeners.onMouseWheel=this.onMouseWheel.bind(this),this.body.eventListeners.onPinch=this.onPinch.bind(this),this.body.eventListeners.onMouseMove=this.onMouseMove.bind(this),this.body.eventListeners.onRelease=this.onRelease.bind(this),this.body.eventListeners.onContext=this.onContext.bind(this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=this.getPointer.bind(this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},Os.extend(this.options,this.defaultOptions),this.bindEventListeners()}return sl(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("destroy",function(){clearTimeout(t.popupTimer),delete t.body.functions.getPointer})}},{key:"setOptions",value:function(t){void 0!==t&&(Os.selectiveNotDeepExtend(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,t),Os.mergeOptions(this.options,t,"keyboard"),t.tooltip&&(Os.extend(this.options.tooltip,t.tooltip),t.tooltip.color&&(this.options.tooltip.color=Os.parseColor(t.tooltip.color)))),this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(t){return{x:t.x-Os.getAbsoluteLeft(this.canvas.frame.canvas),y:t.y-Os.getAbsoluteTop(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(t){50<(new Date).valueOf()-this.touchTime&&(this.drag.pointer=this.getPointer(t.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=(new Date).valueOf())}},{key:"onTap",value:function(t){var e=this.getPointer(t.center),i=this.selectionHandler.options.multiselect&&(t.changedPointers[0].ctrlKey||t.changedPointers[0].metaKey);this.checkSelectionChanges(e,t,i),this.selectionHandler._generateClickEvent("click",t,e)}},{key:"onDoubleTap",value:function(t){var e=this.getPointer(t.center);this.selectionHandler._generateClickEvent("doubleClick",t,e)}},{key:"onHold",value:function(t){var e=this.getPointer(t.center),i=this.selectionHandler.options.multiselect;this.checkSelectionChanges(e,t,i),this.selectionHandler._generateClickEvent("click",t,e),this.selectionHandler._generateClickEvent("hold",t,e)}},{key:"onRelease",value:function(t){if(10<(new Date).valueOf()-this.touchTime){var e=this.getPointer(t.center);this.selectionHandler._generateClickEvent("release",t,e),this.touchTime=(new Date).valueOf()}}},{key:"onContext",value:function(t){var e=this.getPointer({x:t.clientX,y:t.clientY});this.selectionHandler._generateClickEvent("oncontext",t,e)}},{key:"checkSelectionChanges",value:function(t,e){var i=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],n=this.selectionHandler.getSelection(),r=!1;r=!0===i?this.selectionHandler.selectAdditionalOnPoint(t):this.selectionHandler.selectOnPoint(t);var o=this.selectionHandler.getSelection(),s=this._determineDifference(n,o),a=this._determineDifference(o,n);0<s.edges.length&&(this.selectionHandler._generateClickEvent("deselectEdge",e,t,n),r=!0),0<s.nodes.length&&(this.selectionHandler._generateClickEvent("deselectNode",e,t,n),r=!0),0<a.nodes.length&&(this.selectionHandler._generateClickEvent("selectNode",e,t),r=!0),0<a.edges.length&&(this.selectionHandler._generateClickEvent("selectEdge",e,t),r=!0),!0===r&&this.selectionHandler._generateClickEvent("select",e,t)}},{key:"_determineDifference",value:function(t,e){var i=function(t,e){for(var i,n=[],r=0;r<t.length;r++)i=t[r],-1===e.indexOf(i)&&n.push(i);return n};return{nodes:i(t.nodes,e.nodes),edges:i(t.edges,e.edges)}}},{key:"onDragStart",value:function(t){void 0===this.drag.pointer&&this.onTouch(t);var e=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=Os.extend({},this.body.view.translation),this.drag.nodeId=void 0,void 0!==e&&!0===this.options.dragNodes){this.drag.nodeId=e.id,!1===e.isSelected()&&(this.selectionHandler.unselectAll(),this.selectionHandler.selectObject(e)),this.selectionHandler._generateClickEvent("dragStart",t,this.drag.pointer);var i=this.selectionHandler.selectionObj.nodes;for(var n in i)if(i.hasOwnProperty(n)){var r=i[n],o={id:r.id,node:r,x:r.x,y:r.y,xFixed:r.options.fixed.x,yFixed:r.options.fixed.y};r.options.fixed.x=!0,r.options.fixed.y=!0,this.drag.selection.push(o)}}else this.selectionHandler._generateClickEvent("dragStart",t,this.drag.pointer,void 0,!0)}},{key:"onDrag",value:function(t){var e=this;if(!0!==this.drag.pinched){this.body.emitter.emit("unlockNode");var i=this.getPointer(t.center),n=this.drag.selection;if(n&&n.length&&!0===this.options.dragNodes){this.selectionHandler._generateClickEvent("dragging",t,i);var r=i.x-this.drag.pointer.x,o=i.y-this.drag.pointer.y;n.forEach(function(t){var i=t.node;!1===t.xFixed&&(i.x=e.canvas._XconvertDOMtoCanvas(e.canvas._XconvertCanvasToDOM(t.x)+r)),!1===t.yFixed&&(i.y=e.canvas._YconvertDOMtoCanvas(e.canvas._YconvertCanvasToDOM(t.y)+o))}),this.body.emitter.emit("startSimulation")}else if(!0===this.options.dragView){if(this.selectionHandler._generateClickEvent("dragging",t,i,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(t);var s=i.x-this.drag.pointer.x,a=i.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+s,y:this.drag.translation.y+a},this.body.emitter.emit("_requestRedraw")}}}},{key:"onDragEnd",value:function(t){this.drag.dragging=!1;var e=this.drag.selection;e&&e.length?(e.forEach(function(t){t.node.options.fixed.x=t.xFixed,t.node.options.fixed.y=t.yFixed}),this.selectionHandler._generateClickEvent("dragEnd",t,this.getPointer(t.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler._generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}},{key:"onPinch",value:function(t){var e=this.getPointer(t.center);this.drag.pinched=!0,void 0===this.pinch.scale&&(this.pinch.scale=1);var i=this.pinch.scale*t.scale;this.zoom(i,e)}},{key:"zoom",value:function(t,e){if(!0===this.options.zoomView){var i=this.body.view.scale;1e-5>t&&(t=1e-5),10<t&&(t=10);var n;void 0!==this.drag&&!0===this.drag.dragging&&(n=this.canvas.DOMtoCanvas(this.drag.pointer));var r=this.body.view.translation,o=t/i,s=(1-o)*e.x+r.x*o,a=(1-o)*e.y+r.y*o;if(this.body.view.scale=t,this.body.view.translation={x:s,y:a},null!=n){var h=this.canvas.canvasToDOM(n);this.drag.pointer.x=h.x,this.drag.pointer.y=h.y}this.body.emitter.emit("_requestRedraw"),i<t?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:e}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:e})}}},{key:"onMouseWheel",value:function(t){if(!0===this.options.zoomView){var e=0;if(t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),0!=e){var i=this.body.view.scale,n=e*(this.options.zoomSpeed/10);0>e&&(n/=1-n),i*=1+n;var r=this.getPointer({x:t.clientX,y:t.clientY});this.zoom(i,r)}t.preventDefault()}}},{key:"onMouseMove",value:function(t){var e=this,i=this.getPointer({x:t.clientX,y:t.clientY}),n=!1;void 0!==this.popup&&(!1===this.popup.hidden&&this._checkHidePopup(i),!1===this.popup.hidden&&(n=!0,this.popup.setPosition(i.x+3,i.y-5),this.popup.show())),!1===this.options.keyboard.bindToWindow&&!0===this.options.keyboard.enabled&&this.canvas.frame.focus(),!1===n&&(void 0!==this.popupTimer&&(clearInterval(this.popupTimer),this.popupTimer=void 0),!this.drag.dragging&&(this.popupTimer=setTimeout(function(){return e._checkShowPopup(i)},this.options.tooltipDelay))),!0===this.options.hover&&this.selectionHandler.hoverObject(t,i)}},{key:"_checkShowPopup",value:function(t){var e=this.canvas._XconvertDOMtoCanvas(t.x),i=this.canvas._YconvertDOMtoCanvas(t.y),n={left:e,top:i,right:e,bottom:i},r=void 0===this.popupObj?void 0:this.popupObj.id,o=!1,s="node";if(void 0===this.popupObj){for(var a,h=this.body.nodeIndices,l=this.body.nodes,u=[],d=0;d<h.length;d++)a=l[h[d]],!0===a.isOverlappingWith(n)&&(o=!0,void 0!==a.getTitle()&&u.push(h[d]));0<u.length&&(this.popupObj=l[u[u.length-1]],o=!0)}if(void 0===this.popupObj&&!1===o){for(var c,f=this.body.edgeIndices,p=this.body.edges,m=[],v=0;v<f.length;v++)c=p[f[v]],!0===c.isOverlappingWith(n)&&!0===c.connected&&void 0!==c.getTitle()&&m.push(f[v]);0<m.length&&(this.popupObj=p[m[m.length-1]],s="edge")}void 0===this.popupObj?void 0!==this.popup&&(this.popup.hide(),this.body.emitter.emit("hidePopup")):this.popupObj.id!==r&&(void 0===this.popup&&(this.popup=new zu(this.canvas.frame)),this.popup.popupTargetType=s,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(t.x+3,t.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id))}},{key:"_checkHidePopup",value:function(t){var e=this.selectionHandler._pointerToPositionObject(t),i=!1;if("node"!==this.popup.popupTargetType)void 0===this.selectionHandler.getNodeAt(t)&&void 0!==this.body.edges[this.popup.popupTargetId]&&(i=this.body.edges[this.popup.popupTargetId].isOverlappingWith(e));else if(void 0!==this.body.nodes[this.popup.popupTargetId]&&!0===(i=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(e))){var n=this.selectionHandler.getNodeAt(t);i=void 0!==n&&n.id===this.popup.popupTargetId}!1===i&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),t}(),ju=function(){function t(e,i){var n=this;ol(this,t),this.body=e,this.canvas=i,this.selectionObj={nodes:[],edges:[]},this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},Os.extend(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",function(){n.updateSelection()})}return sl(t,[{key:"setOptions",value:function(t){void 0!==t&&Os.selectiveDeepExtend(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,t)}},{key:"selectOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var i=this.getNodeAt(t)||this.getEdgeAt(t);this.unselectAll(),void 0!==i&&(e=this.selectObject(i)),this.body.emitter.emit("_requestRedraw")}return e}},{key:"selectAdditionalOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var i=this.getNodeAt(t)||this.getEdgeAt(t);void 0!==i&&(e=!0,!0===i.isSelected()?this.deselectObject(i):this.selectObject(i),this.body.emitter.emit("_requestRedraw"))}return e}},{key:"_initBaseEvent",value:function(t,e){return{pointer:{DOM:{x:e.x,y:e.y},canvas:this.canvas.DOMtoCanvas(e)},event:t}}},{key:"_generateClickEvent",value:function(t,e,i,n){var r=!!(4<arguments.length&&void 0!==arguments[4])&&arguments[4],o=this._initBaseEvent(e,i);if(!0===r)o.nodes=[],o.edges=[];else{var s=this.getSelection();o.nodes=s.nodes,o.edges=s.edges}void 0!==n&&(o.previousSelection=n),"click"==t&&(o.items=this.getClickedItems(i)),void 0!==e.controlEdge&&(o.controlEdge=e.controlEdge),this.body.emitter.emit(t,o)}},{key:"selectObject",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.options.selectConnectedEdges;return void 0!==t&&(t instanceof Xl&&!0===e&&this._selectConnectedEdges(t),t.select(),this._addToSelection(t),!0)}},{key:"deselectObject",value:function(t){!0===t.isSelected()&&(t.selected=!1,this._removeFromSelection(t))}},{key:"_getAllNodesOverlappingWith",value:function(t){for(var e,i=[],n=this.body.nodes,r=0;r<this.body.nodeIndices.length;r++)e=this.body.nodeIndices[r],n[e].isOverlappingWith(t)&&i.push(e);return i}},{key:"_pointerToPositionObject",value:function(t){var e=this.canvas.DOMtoCanvas(t);return{left:e.x-1,top:e.y+1,right:e.x+1,bottom:e.y-1}}},{key:"getNodeAt",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=this._pointerToPositionObject(t),n=this._getAllNodesOverlappingWith(i);return 0<n.length?!0===e?this.body.nodes[n[n.length-1]]:n[n.length-1]:void 0}},{key:"_getEdgesOverlappingWith",value:function(t,e){for(var i,n=this.body.edges,r=0;r<this.body.edgeIndices.length;r++)i=this.body.edgeIndices[r],n[i].isOverlappingWith(t)&&e.push(i)}},{key:"_getAllEdgesOverlappingWith",value:function(t){var e=[];return this._getEdgesOverlappingWith(t,e),e}},{key:"getEdgeAt",value:function(t){for(var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=this.canvas.DOMtoCanvas(t),n=10,r=null,o=this.body.edges,s=0;s<this.body.edgeIndices.length;s++){var a=this.body.edgeIndices[s],h=o[a];if(h.connected){var l=h.from.x,u=h.from.y,d=h.to.x,c=h.to.y,f=h.edgeType.getDistanceToEdge(l,u,d,c,i.x,i.y);f<n&&(r=a,n=f)}}return null===r?void 0:!0===e?this.body.edges[r]:r}},{key:"_addToSelection",value:function(t){t instanceof Xl?this.selectionObj.nodes[t.id]=t:this.selectionObj.edges[t.id]=t}},{key:"_addToHover",value:function(t){t instanceof Xl?this.hoverObj.nodes[t.id]=t:this.hoverObj.edges[t.id]=t}},{key:"_removeFromSelection",value:function(t){t instanceof Xl?(delete this.selectionObj.nodes[t.id],this._unselectConnectedEdges(t)):delete this.selectionObj.edges[t.id]}},{key:"unselectAll",value:function(){for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&this.selectionObj.nodes[t].unselect();for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&this.selectionObj.edges[e].unselect();this.selectionObj={nodes:{},edges:{}}}},{key:"_getSelectedNodeCount",value:function(){var t=0;for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(t+=1);return t}},{key:"_getSelectedNode",value:function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t))return this.selectionObj.nodes[t]}},{key:"_getSelectedEdge",value:function(){for(var t in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(t))return this.selectionObj.edges[t]}},{key:"_getSelectedEdgeCount",value:function(){var t=0;for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&(t+=1);return t}},{key:"_getSelectedObjectCount",value:function(){var t=0;for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(t+=1);for(var i in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(i)&&(t+=1);return t}},{key:"_selectionIsEmpty",value:function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t))return!1;for(var e in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(e))return!1;return!0}},{key:"_clusterInSelection",value:function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t)&&1<this.selectionObj.nodes[t].clusterSize)return!0;return!1}},{key:"_selectConnectedEdges",value:function(t){for(var e,i=0;i<t.edges.length;i++)e=t.edges[i],e.select(),this._addToSelection(e)}},{key:"_hoverConnectedEdges",value:function(t){for(var e,i=0;i<t.edges.length;i++)e=t.edges[i],e.hover=!0,this._addToHover(e)}},{key:"_unselectConnectedEdges",value:function(t){for(var e,i=0;i<t.edges.length;i++)e=t.edges[i],e.unselect(),this._removeFromSelection(e)}},{key:"emitBlurEvent",value:function(t,e,i){var n=this._initBaseEvent(t,e);!0===i.hover&&(i.hover=!1,i instanceof Xl?(n.node=i.id,this.body.emitter.emit("blurNode",n)):(n.edge=i.id,this.body.emitter.emit("blurEdge",n)))}},{key:"emitHoverEvent",value:function(t,e,i){var n=this._initBaseEvent(t,e),r=!1;return!1===i.hover&&(i.hover=!0,this._addToHover(i),r=!0,i instanceof Xl?(n.node=i.id,this.body.emitter.emit("hoverNode",n)):(n.edge=i.id,this.body.emitter.emit("hoverEdge",n))),r}},{key:"hoverObject",value:function(t,e){var i=this.getNodeAt(e);void 0===i&&(i=this.getEdgeAt(e));var n=!1;for(var r in this.hoverObj.nodes)this.hoverObj.nodes.hasOwnProperty(r)&&(void 0===i||i instanceof Xl&&i.id!=r||i instanceof bu)&&(this.emitBlurEvent(t,e,this.hoverObj.nodes[r]),delete this.hoverObj.nodes[r],n=!0);for(var o in this.hoverObj.edges)this.hoverObj.edges.hasOwnProperty(o)&&(!0===n?(this.hoverObj.edges[o].hover=!1,delete this.hoverObj.edges[o]):(void 0===i||i instanceof bu&&i.id!=o||i instanceof Xl&&!i.hover)&&(this.emitBlurEvent(t,e,this.hoverObj.edges[o]),delete this.hoverObj.edges[o],n=!0));if(void 0!==i){var s=Object.keys(this.hoverObj.edges).length,a=Object.keys(this.hoverObj.nodes).length,h=i instanceof bu&&0===s&&0===a,l=i instanceof Xl&&0===s&&0===a;(n||h||l)&&(n=this.emitHoverEvent(t,e,i)),i instanceof Xl&&!0===this.options.hoverConnectedEdges&&this._hoverConnectedEdges(i)}!0===n&&this.body.emitter.emit("_requestRedraw")}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodes(),edges:this.getSelectedEdges()}}},{key:"getSelectedNodes",value:function(){var t=[];if(!0===this.options.selectable)for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&t.push(this.selectionObj.nodes[e].id);return t}},{key:"getSelectedEdges",value:function(){var t=[];if(!0===this.options.selectable)for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&t.push(this.selectionObj.edges[e].id);return t}},{key:"setSelection",value:function(t){var e,i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!t||!t.nodes&&!t.edges)throw"Selection must be an object with nodes and/or edges properties";if((n.unselectAll||void 0===n.unselectAll)&&this.unselectAll(),t.nodes)for(e=0;e<t.nodes.length;e++){i=t.nodes[e];var r=this.body.nodes[i];if(!r)throw new RangeError('Node with id "'+i+'" not found');this.selectObject(r,n.highlightEdges)}if(t.edges)for(e=0;e<t.edges.length;e++){i=t.edges[e];var o=this.body.edges[i];if(!o)throw new RangeError('Edge with id "'+i+'" not found');this.selectObject(o)}this.body.emitter.emit("_requestRedraw")}},{key:"selectNodes",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({nodes:t},{highlightEdges:e})}},{key:"selectEdges",value:function(t){if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({edges:t})}},{key:"updateSelection",value:function(){for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&(this.body.nodes.hasOwnProperty(t)||delete this.selectionObj.nodes[t]);for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&(this.body.edges.hasOwnProperty(e)||delete this.selectionObj.edges[e])}},{key:"getClickedItems",value:function(t){for(var e=this.canvas.DOMtoCanvas(t),i=[],n=this.body.nodeIndices,r=this.body.nodes,o=n.length-1;0<=o;o--){var s=r[n[o]],a=s.getItemsOnPoint(e);i.push.apply(i,a)}for(var h=this.body.edgeIndices,l=this.body.edges,u=h.length-1;0<=u;u--){var d=l[h[u]],c=d.getItemsOnPoint(e);i.push.apply(i,c)}return i}}]),t}(),Uu=Ft(function(t,e){!function(t,i){!function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return 1e5>t?100>t?10>t?0:1:1e4>t?1e3>t?2:3:4:1e7>t?1e6>t?5:6:1e9>t?1e8>t?7:8:9}function n(t,e){if(t===e)return 0;if(~~t===t&&~~e===e){if(0===t||0===e)return t<e?-1:1;if(0>t||0>e){if(0<=e)return-1;if(0<=t)return 1;t=-t,e=-e}var n=i(t),r=i(e),o=0;return n<r?(t*=c[r-n-1],e/=10,o=-1):n>r&&(e*=c[n-r-1],t/=10,o=1),t===e?o:t<e?-1:1}var s=t+"",a=e+"";return s===a?0:s<a?-1:1}function r(t){for(var e=0;t>=32;)e|=1&t,t>>=1;return t+e}function o(t,e,i,n){var r=e+1;if(r===i)return 1;if(0>n(t[r++],t[e])){for(;r<i&&0>n(t[r],t[r-1]);)r++;s(t,e,r)}else for(;r<i&&0<=n(t[r],t[r-1]);)r++;return r-e}function s(t,e,i){for(i--;e<i;){var n=t[e];t[e++]=t[i],t[i--]=n}}function a(t,e,i,n,r){for(n===e&&n++;n<i;n++){for(var o=t[n],s=e,a=n;s<a;){var h=s+a>>>1;0>r(o,t[h])?a=h:s=h+1}var l=n-s;switch(l){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:for(;0<l;)t[s+l]=t[s+l-1],l--}t[s]=o}}function h(t,e,i,n,r,o){var s=0,a=0,h=1;if(0<o(t,e[i+r])){for(a=n-r;h<a&&0<o(t,e[i+r+h]);)s=h,0>=(h=1+(h<<1))&&(h=a);h>a&&(h=a),s+=r,h+=r}else{for(a=r+1;h<a&&0>=o(t,e[i+r-h]);)s=h,0>=(h=1+(h<<1))&&(h=a);h>a&&(h=a);var l=s;s=r-h,h=r-l}for(s++;s<h;){var u=s+(h-s>>>1);0<o(t,e[i+u])?s=u+1:h=u}return h}function l(t,e,i,n,r,o){var s=0,a=0,h=1;if(0>o(t,e[i+r])){for(a=r+1;h<a&&0>o(t,e[i+r-h]);)s=h,0>=(h=1+(h<<1))&&(h=a);h>a&&(h=a);var l=s;s=r-h,h=r-l}else{for(a=n-r;h<a&&0<=o(t,e[i+r+h]);)s=h,0>=(h=1+(h<<1))&&(h=a);h>a&&(h=a),s+=r,h+=r}for(s++;s<h;){var u=s+(h-s>>>1);0>o(t,e[i+u])?h=u:s=u+1}return h}t.__esModule=!0,t.sort=function(t,e,i,s){if(!Array.isArray(t))throw new TypeError("Can only sort arrays");e?"function"!=typeof e&&(s=i,i=e,e=n):e=n,i||(i=0),s||(s=t.length);var h=s-i;if(!(2>h)){var l=0;if(32>h)return l=o(t,i,s,e),void a(t,i,s,i+l,e);var u=new f(t,e),d=r(h);do{if((l=o(t,i,s,e))<d){var c=h;c>d&&(c=d),a(t,i,i+c,i+l,e),l=c}u.pushRun(i,l),u.mergeRuns(),h-=l,i+=l}while(0!==h);u.forceMergeRuns()}};var u=7,d=256,c=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9],f=function(){function t(i,n){e(this,t),this.array=null,this.compare=null,this.minGallop=u,this.length=0,this.tmpStorageLength=d,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=i,this.compare=n,this.length=i.length,this.length<2*d&&(this.tmpStorageLength=this.length>>>1),this.tmp=Array(this.tmpStorageLength),this.stackLength=120>this.length?5:1542>this.length?10:119151>this.length?19:40,this.runStart=Array(this.stackLength),this.runLength=Array(this.stackLength)}return t.prototype.pushRun=function(t,e){this.runStart[this.stackSize]=t,this.runLength[this.stackSize]=e,this.stackSize+=1},t.prototype.mergeRuns=function(){for(;1<this.stackSize;){var t=this.stackSize-2;if(1<=t&&this.runLength[t-1]<=this.runLength[t]+this.runLength[t+1]||2<=t&&this.runLength[t-2]<=this.runLength[t]+this.runLength[t-1])this.runLength[t-1]<this.runLength[t+1]&&t--;else if(this.runLength[t]>this.runLength[t+1])break;this.mergeAt(t)}},t.prototype.forceMergeRuns=function(){for(;1<this.stackSize;){var t=this.stackSize-2;0<t&&this.runLength[t-1]<this.runLength[t+1]&&t--,this.mergeAt(t)}},t.prototype.mergeAt=function(t){var e=this.compare,i=this.array,n=this.runStart[t],r=this.runLength[t],o=this.runStart[t+1],s=this.runLength[t+1];this.runLength[t]=r+s,t===this.stackSize-3&&(this.runStart[t+1]=this.runStart[t+2],this.runLength[t+1]=this.runLength[t+2]),this.stackSize--;var a=l(i[o],i,n,r,0,e);n+=a,0!==(r-=a)&&(0===(s=h(i[n+r-1],i,o,s,s-1,e))||(r<=s?this.mergeLow(n,r,o,s):this.mergeHigh(n,r,o,s)))},t.prototype.mergeLow=function(t,e,i,n){var r=this.compare,o=this.array,s=this.tmp,a=0;for(a=0;a<e;a++)s[a]=o[t+a];var d=0,c=i,f=t;if(o[f++]=o[c++],0!=--n){if(1===e){for(a=0;a<n;a++)o[f+a]=o[c+a];return void(o[f+n]=s[d])}for(var p=this.minGallop;;){var m=0,v=0,g=!1;do{if(0>r(o[c],s[d])){if(o[f++]=o[c++],v++,m=0,0==--n){g=!0;break}}else if(o[f++]=s[d++],m++,v=0,1==--e){g=!0;break}}while((m|v)<p);if(g)break;do{if(0!==(m=l(o[c],s,d,e,0,r))){for(a=0;a<m;a++)o[f+a]=s[d+a];if(f+=m,d+=m,1>=(e-=m)){g=!0;break}}if(o[f++]=o[c++],0==--n){g=!0;break}if(0!==(v=h(s[d],o,c,n,0,r))){for(a=0;a<v;a++)o[f+a]=o[c+a];if(f+=v,c+=v,0===(n-=v)){g=!0;break}}if(o[f++]=s[d++],1==--e){g=!0;break}p--}while(m>=u||v>=u);if(g)break;0>p&&(p=0),p+=2}if(this.minGallop=p,1>p&&(this.minGallop=1),1===e){for(a=0;a<n;a++)o[f+a]=o[c+a];o[f+n]=s[d]}else{if(0===e)throw new Error("mergeLow preconditions were not respected");for(a=0;a<e;a++)o[f+a]=s[d+a]}}else for(a=0;a<e;a++)o[f+a]=s[d+a]},t.prototype.mergeHigh=function(t,e,i,n){var r=this.compare,o=this.array,s=this.tmp,a=0;for(a=0;a<n;a++)s[a]=o[i+a];var d=t+e-1,c=n-1,f=i+n-1,p=0,m=0;if(o[f--]=o[d--],0!=--e){if(1===n){for(f-=e,d-=e,m=f+1,p=d+1,a=e-1;0<=a;a--)o[m+a]=o[p+a];return void(o[f]=s[c])}for(var v=this.minGallop;;){var g=0,y=0,b=!1;do{if(0>r(s[c],o[d])){if(o[f--]=o[d--],g++,y=0,0==--e){b=!0;break}}else if(o[f--]=s[c--],y++,g=0,1==--n){b=!0;break}}while((g|y)<v);if(b)break;do{if(0!=(g=e-l(s[c],o,t,e,e-1,r))){for(f-=g,d-=g,e-=g,m=f+1,p=d+1,a=g-1;0<=a;a--)o[m+a]=o[p+a];if(0===e){b=!0;break}}if(o[f--]=s[c--],1==--n){b=!0;break}if(0!==(y=n-h(o[d],s,0,n,n-1,r))){for(f-=y,c-=y,n-=y,m=f+1,p=c+1,a=0;a<y;a++)o[m+a]=s[p+a];if(1>=n){b=!0;break}}if(o[f--]=o[d--],0==--e){b=!0;break}v--}while(g>=u||y>=u);if(b)break;0>v&&(v=0),v+=2}if(this.minGallop=v,1>v&&(this.minGallop=1),1===n){for(f-=e,d-=e,m=f+1,p=d+1,a=e-1;0<=a;a--)o[m+a]=o[p+a];o[f]=s[c]}else{if(0===n)throw new Error("mergeHigh preconditions were not respected");for(p=f-(n-1),a=0;a<n;a++)o[p+a]=s[a]}}else for(p=f-(n-1),a=0;a<n;a++)o[p+a]=s[a]},t}()}(e)}()});!function(t){t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")&&t.default}(Uu);var Hu=Uu,Vu=function(){function t(){ol(this,t)}return sl(t,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(t){return this.fake_use(t),this.abstract()}},{key:"setPosition",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;this.fake_use(t,e,i),this.abstract()}},{key:"getTreeSize",value:function(t){return this.fake_use(t),this.abstract()}},{key:"sort",value:function(t){this.fake_use(t),this.abstract()}},{key:"fix",value:function(t,e){this.fake_use(t,e),this.abstract()}},{key:"shift",value:function(t,e){this.fake_use(t,e),this.abstract()}}]),t}(),Gu=function(t){function e(t){var i;return ol(this,e),i=kl(this,El(e).call(this)),i.layout=t,i}return Tl(e,t),sl(e,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(t){return t.x}},{key:"setPosition",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==i&&this.layout.hierarchical.addToOrdering(t,i),t.x=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_x,max:e.max_x}}},{key:"sort",value:function(t){Hu.sort(t,function(t,e){return t.x-e.x})}},{key:"fix",value:function(t,e){t.y=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.y=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].x+=e}}]),e}(Vu),Wu=function(t){function e(t){var i;return ol(this,e),i=kl(this,El(e).call(this)),i.layout=t,i}return Tl(e,t),sl(e,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(t){return t.y}},{key:"setPosition",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==i&&this.layout.hierarchical.addToOrdering(t,i),t.y=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_y,max:e.max_y}}},{key:"sort",value:function(t){Hu.sort(t,function(t,e){return t.y-e.y})}},{key:"fix",value:function(t,e){t.x=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.x=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].y+=e}}]),e}(Vu),Yu=function(){function t(){ol(this,t),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}var e=Math.max,i=Math.min;return sl(t,[{key:"addRelation",value:function(t,e){void 0===this.childrenReference[t]&&(this.childrenReference[t]=[]),this.childrenReference[t].push(e),void 0===this.parentReference[e]&&(this.parentReference[e]=[]),this.parentReference[e].push(t)}},{key:"checkIfTree",value:function(){for(var t in this.parentReference)if(1<this.parentReference[t].length)return void(this.isTree=!1);this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(t,i){void 0===i||void 0===this.trees[t.id]&&(this.trees[t.id]=i,this.treeIndex=e(i,this.treeIndex))}},{key:"ensureLevel",value:function(t){void 0===this.levels[t]&&(this.levels[t]=0)}},{key:"getMaxLevel",value:function(t){var i=this,n={};return function t(r){if(void 0!==n[r])return n[r];var o=i.levels[r];if(i.childrenReference[r]){var s=i.childrenReference[r];if(0<s.length)for(var a=0;a<s.length;a++)o=e(o,t(s[a]))}return n[r]=o,o}(t)}},{key:"levelDownstream",value:function(t,e){void 0===this.levels[e.id]&&(void 0===this.levels[t.id]&&(this.levels[t.id]=0),this.levels[e.id]=this.levels[t.id]+1)}},{key:"setMinLevelToZero",value:function(t){var e=1e9;for(var n in t)t.hasOwnProperty(n)&&void 0!==this.levels[n]&&(e=i(this.levels[n],e));for(var r in t)t.hasOwnProperty(r)&&void 0!==this.levels[r]&&(this.levels[r]-=e)}},{key:"getTreeSize",value:function(t,n){var r=1e9,o=-1e9,s=1e9,a=-1e9;for(var h in this.trees)if(this.trees.hasOwnProperty(h)&&this.trees[h]===n){var l=t[h];r=i(l.x,r),o=e(l.x,o),s=i(l.y,s),a=e(l.y,a)}return{min_x:r,max_x:o,min_y:s,max_y:a}}},{key:"hasSameParent",value:function(t,e){var i=this.parentReference[t.id],n=this.parentReference[e.id];if(void 0===i||void 0===n)return!1;for(var r=0;r<i.length;r++)for(var o=0;o<n.length;o++)if(i[r]==n[o])return!0;return!1}},{key:"inSameSubNetwork",value:function(t,e){return this.trees[t.id]===this.trees[e.id]}},{key:"getLevels",value:function(){return Object.keys(this.distributionOrdering)}},{key:"addToOrdering",value:function(t,e){void 0===this.distributionOrdering[e]&&(this.distributionOrdering[e]=[]);var i=!1,n=this.distributionOrdering[e];for(var r in n)if(n[r]===t){i=!0;break}i||(this.distributionOrdering[e].push(t),this.distributionIndex[t.id]=this.distributionOrdering[e].length-1)}}]),t}(),$u=function(){function t(e){ol(this,t),this.body=e,this.initialRandomSeed=o(1e6*Math.random()),this.randomSeed=this.initialRandomSeed,this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},Os.extend(this.options,this.defaultOptions),this.bindEventListeners()}var e=Math.cos,i=Math.sin,n=Math.sqrt,r=Math.PI,o=Math.round,s=Math.pow,a=Math.max,h=Math.abs,l=Math.min,u=Math.floor;return sl(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("_dataChanged",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",function(){t.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",function(){if(!0===t.options.hierarchical.enabled){var e=t.direction.curveType();t.body.emitter.emit("_forceDisableDynamicCurves",e,!1)}})}},{key:"setOptions",value:function(t,e){if(void 0!==t){var i=this.options.hierarchical,n=i.enabled;if(Os.selectiveDeepExtend(["randomSeed","improvedLayout","clusterThreshold"],this.options,t),Os.mergeOptions(this.options,t,"hierarchical"),void 0!==t.randomSeed&&(this.initialRandomSeed=t.randomSeed),!0===i.enabled)return!0===n&&this.body.emitter.emit("refresh",!0),"RL"===i.direction||"DU"===i.direction?0<i.levelSeparation&&(i.levelSeparation*=-1):0>i.levelSeparation&&(i.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(e);if(!0===n)return this.body.emitter.emit("refresh"),Os.deepExtend(e,this.optionsBackup)}return e}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(t){if(!0===this.options.hierarchical.enabled){var e=this.optionsBackup.physics;void 0===t.physics||!0===t.physics?(t.physics={enabled:void 0===e.enabled||e.enabled,solver:"hierarchicalRepulsion"},e.enabled=void 0===e.enabled||e.enabled,e.solver=e.solver||"barnesHut"):"object"===ml(t.physics)?(e.enabled=void 0===t.physics.enabled||t.physics.enabled,e.solver=t.physics.solver||"barnesHut",t.physics.solver="hierarchicalRepulsion"):!1!==t.physics&&(e.solver="barnesHut",t.physics={solver:"hierarchicalRepulsion"});var i=this.direction.curveType();if(void 0===t.edges)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges={smooth:!1};else if(void 0===t.edges.smooth)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges.smooth=!1;else if("boolean"==typeof t.edges.smooth)this.optionsBackup.edges={smooth:t.edges.smooth},t.edges.smooth={enabled:t.edges.smooth,type:i};else{var n=t.edges.smooth;void 0!==n.type&&"dynamic"!==n.type&&(i=n.type),this.optionsBackup.edges={smooth:void 0===n.enabled||n.enabled,type:void 0===n.type?"dynamic":n.type,roundness:void 0===n.roundness?.5:n.roundness,forceDirection:void 0!==n.forceDirection&&n.forceDirection},t.edges.smooth={enabled:void 0===n.enabled||n.enabled,type:i,roundness:void 0===n.roundness?.5:n.roundness,forceDirection:void 0!==n.forceDirection&&n.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",i)}return t}},{key:"seededRandom",value:function(){var t=1e4*i(this.randomSeed++);return t-u(t)}},{key:"positionInitially",value:function(t){if(!0!==this.options.hierarchical.enabled){this.randomSeed=this.initialRandomSeed;for(var n=t.length+50,o=0;o<t.length;o++){var s=t[o],a=2*r*this.seededRandom();void 0===s.x&&(s.x=n*e(a)),void 0===s.y&&(s.y=n*i(a))}}}},{key:"layoutNetwork",value:function(){if(!0!==this.options.hierarchical.enabled&&!0===this.options.improvedLayout){for(var t,e=this.body.nodeIndices,i=0,n=0;n<e.length;n++)t=this.body.nodes[e[n]],!0===t.predefinedPosition&&(i+=1);if(i<.5*e.length){var r=0,o=this.options.clusterThreshold,s={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(e.length>o){for(var h=e.length;e.length>o&&10>=r;){r+=1;var l=e.length;0==r%3?this.body.modules.clustering.clusterBridges(s):this.body.modules.clustering.clusterOutliers(s);if(l==e.length&&0!=r%3)return this._declusterAll(),this.body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}this.body.modules.kamadaKawai.setOptions({springLength:a(150,2*h)})}10<r&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(e,this.body.edgeIndices,!0),this._shiftToCenter();for(var u,d=0;d<e.length;d++)u=this.body.nodes[e[d]],!1===u.predefinedPosition&&(u.x+=70*(.5-this.seededRandom()),u.y+=70*(.5-this.seededRandom()));this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var t,e=Pu.getRangeCore(this.body.nodes,this.body.nodeIndices),i=Pu.findCenter(e),n=0;n<this.body.nodeIndices.length;n++)t=this.body.nodes[this.body.nodeIndices[n]],t.x-=i.x,t.y-=i.y}},{key:"_declusterAll",value:function(){for(var t=!0;!0===t;){t=!1;for(var e=0;e<this.body.nodeIndices.length;e++)!0===this.body.nodes[this.body.nodeIndices[e]].isCluster&&(t=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[e],{},!1));!0===t&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(!0===this.options.hierarchical.enabled&&0<this.body.nodeIndices.length){var t,e,i=!1,n=!1;for(e in this.lastNodeOnLevel={},this.hierarchical=new Yu,this.body.nodes)this.body.nodes.hasOwnProperty(e)&&(t=this.body.nodes[e],void 0===t.options.level?n=!0:(i=!0,this.hierarchical.levels[e]=t.options.level));if(!0===n&&!0===i)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(!0===n){var r=this.options.hierarchical.sortMethod;"hubsize"===r?this._determineLevelsByHubsize():"directed"===r?this._determineLevelsDirected():"custom"===r&&this._determineLevelsCustomCallback()}for(var o in this.body.nodes)this.body.nodes.hasOwnProperty(o)&&this.hierarchical.ensureLevel(o);var s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var t=this,e=!1,i={},r=function(e,i){var n=t.hierarchical.trees;for(var r in n)n.hasOwnProperty(r)&&n[r]===e&&t.direction.shift(r,i)},u=function(){for(var e=[],i=0;i<t.hierarchical.numTrees();i++)e.push(t.direction.getTreeSize(i));return e},d=function e(i,n){if(!n[i.id]&&(n[i.id]=!0,t.hierarchical.childrenReference[i.id])){var r=t.hierarchical.childrenReference[i.id];if(0<r.length)for(var o=0;o<r.length;o++)e(t.body.nodes[r[o]],n)}},c=function(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e9,n=1e9,r=1e9,o=1e9,s=-1e9;for(var h in e)if(e.hasOwnProperty(h)){var u=t.body.nodes[h],d=t.hierarchical.levels[u.id],c=t.direction.getPosition(u),f=t._getSpaceAroundNode(u,e),p=pl(f,2),m=p[0],v=p[1];n=l(m,n),r=l(v,r),d<=i&&(o=l(c,o),s=a(c,s))}return[o,s,n,r]},f=function(e,i){var n=t.hierarchical.getMaxLevel(e.id),r=t.hierarchical.getMaxLevel(i.id);return l(n,r)},p=function(e,i,n){for(var r=t.hierarchical,o=0;o<i.length;o++){var s=i[o],a=r.distributionOrdering[s];if(1<a.length)for(var h=0;h<a.length-1;h++){var l=a[h],u=a[h+1];r.hasSameParent(l,u)&&r.inSameSubNetwork(l,u)&&e(l,u,n)}}},m=function(i,n){var r=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],o=t.direction.getPosition(i),s=t.direction.getPosition(n),a=h(s-o),l=t.options.hierarchical.nodeSpacing;if(a>l){var u={},p={};d(i,u),d(n,p);var m=f(i,n),v=c(u,m),g=c(p,m),y=v[1],b=g[0],_=g[2];if(h(y-b)>l){var w=y-b+l;w<-_+l&&(w=-_+l),0>w&&(t._shiftBlock(n.id,w),e=!0,!0===r&&t._centerParent(n))}}},v=function(r,h){for(var u,f=h.id,p=h.edges,m=t.hierarchical.levels[h.id],v=t.options.hierarchical.levelSeparation*t.options.hierarchical.levelSeparation,g={},y=[],b=0;b<p.length;b++)if(u=p[b],u.toId!=u.fromId){var _=u.toId==f?u.from:u.to;g[p[b].id]=_,t.hierarchical.levels[_.id]<m&&y.push(u)}var w=function(e,i){for(var r=0,o=0;o<i.length;o++)if(void 0!==g[i[o].id]){var s=t.direction.getPosition(g[i[o].id])-e;r+=s/n(s*s+v)}return r},x=function(e,i){for(var n=0,r=0;r<i.length;r++)if(void 0!==g[i[r].id]){var o=t.direction.getPosition(g[i[r].id])-e;n-=v*s(o*o+v,-1.5)}return n},S=function(e,i){for(var n=t.direction.getPosition(h),r={},s=0;s<e;s++){var u=w(n,i),d=x(n,i);if(n-=a(-40,l(40,o(u/d))),void 0!==r[n])break;r[n]=s}return n},k=S(r,y);(function(n){var r=t.direction.getPosition(h);if(void 0===i[h.id]){var o={};d(h,o),i[h.id]=o}var s=c(i[h.id]),a=s[2],u=s[3],f=n-r,p=0;0<f?p=l(f,u-t.options.hierarchical.nodeSpacing):0>f&&(p=-l(-f,a-t.options.hierarchical.nodeSpacing)),0!=p&&(t._shiftBlock(h.id,p),e=!0)})(k),k=S(r,p),function(i){var n=t.direction.getPosition(h),r=t._getSpaceAroundNode(h),o=pl(r,2),s=o[0],u=o[1],d=i-n,c=n;0<d?c=l(n+(u-t.options.hierarchical.nodeSpacing),i):0>d&&(c=a(n-(s-t.options.hierarchical.nodeSpacing),i)),c!==n&&(t.direction.setPosition(h,c),e=!0)}(k)};!0===this.options.hierarchical.blockShifting&&(function(i){var n=t.hierarchical.getLevels();n=n.reverse();for(var r=0;r<i&&(e=!1,p(m,n,!0),!0===e);r++);}(5),function(){for(var e in t.body.nodes)t.body.nodes.hasOwnProperty(e)&&t._centerParent(t.body.nodes[e])}()),!0===this.options.hierarchical.edgeMinimization&&function(i){var n=t.hierarchical.getLevels();n=n.reverse();for(var r=0;r<i;r++){e=!1;for(var o=0;o<n.length;o++)for(var s=n[o],a=t.hierarchical.distributionOrdering[s],h=0;h<a.length;h++)v(1e3,a[h]);if(!0!==e)break}}(20),!0===this.options.hierarchical.parentCentralization&&function(){var e=t.hierarchical.getLevels();e=e.reverse();for(var i=0;i<e.length;i++)for(var n=e[i],r=t.hierarchical.distributionOrdering[n],o=0;o<r.length;o++)t._centerParent(r[o])}(),function(){for(var e,i=u(),n=0,o=0;o<i.length-1;o++)e=i[o].max-i[o+1].min,n+=e+t.options.hierarchical.treeSpacing,r(o+1,n)}()}},{key:"_getSpaceAroundNode",value:function(t,e){var i=!0;void 0===e&&(i=!1);var n=this.hierarchical.levels[t.id];if(void 0!==n){var r=this.hierarchical.distributionIndex[t.id],o=this.direction.getPosition(t),s=this.hierarchical.distributionOrdering[n],a=1e9,h=1e9;if(0!==r){var u=s[r-1];if(1==i&&void 0===e[u.id]||0==i){a=o-this.direction.getPosition(u)}}if(r!=s.length-1){var d=s[r+1];if(1==i&&void 0===e[d.id]||0==i){var c=this.direction.getPosition(d);h=l(h,c-o)}}return[a,h]}return[0,0]}},{key:"_centerParent",value:function(t){if(this.hierarchical.parentReference[t.id])for(var e=this.hierarchical.parentReference[t.id],i=0;i<e.length;i++){var n=e[i],r=this.body.nodes[n],o=this.hierarchical.childrenReference[n];if(void 0!==o){var s=this._getCenterPosition(o),a=this.direction.getPosition(r),l=this._getSpaceAroundNode(r),u=pl(l,2),d=u[0],c=u[1],f=a-s;(0>f&&h(f)<c-this.options.hierarchical.nodeSpacing||0<f&&h(f)<d-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(r,s)}}}},{key:"_placeNodesByHierarchy",value:function(t){for(var e in this.positionedNodes={},t)if(t.hasOwnProperty(e)){var i=Object.keys(t[e]);i=this._indexArrayToNodes(i),this.direction.sort(i);for(var n,r=0,o=0;o<i.length;o++)if(n=i[o],void 0===this.positionedNodes[n.id]){var s=this.options.hierarchical.nodeSpacing,a=s*r;0<r&&(a=this.direction.getPosition(i[o-1])+s),this.direction.setPosition(n,a,e),this._validatePositionAndContinue(n,e,a),r++}}}},{key:"_placeBranchNodes",value:function(t,e){var i=this.hierarchical.childrenReference[t];if(void 0!==i){for(var n=[],r=0;r<i.length;r++)n.push(this.body.nodes[i[r]]);this.direction.sort(n);for(var o=0;o<n.length;o++){var s=n[o],a=this.hierarchical.levels[s.id];if(!(a>e&&void 0===this.positionedNodes[s.id]))return;var h=this.options.hierarchical.nodeSpacing,l=void 0;l=0==o?this.direction.getPosition(this.body.nodes[t]):this.direction.getPosition(n[o-1])+h,this.direction.setPosition(s,l,a),this._validatePositionAndContinue(s,a,l)}var u=this._getCenterPosition(n);this.direction.setPosition(this.body.nodes[t],u,e)}}},{key:"_validatePositionAndContinue",value:function(t,e,i){if(this.hierarchical.isTree){if(void 0!==this.lastNodeOnLevel[e]){var n=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[e]]);if(i-n<this.options.hierarchical.nodeSpacing){var r=n+this.options.hierarchical.nodeSpacing-i,o=this._findCommonParent(this.lastNodeOnLevel[e],t.id);this._shiftBlock(o.withChild,r)}}this.lastNodeOnLevel[e]=t.id,this.positionedNodes[t.id]=!0,this._placeBranchNodes(t.id,e)}}},{key:"_indexArrayToNodes",value:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.body.nodes[t[i]]);return e}},{key:"_getDistribution",value:function(){var t,e,i={};for(t in this.body.nodes)if(this.body.nodes.hasOwnProperty(t)){e=this.body.nodes[t];var n=void 0===this.hierarchical.levels[t]?0:this.hierarchical.levels[t];this.direction.fix(e,n),void 0===i[n]&&(i[n]={}),i[n][t]=e}return i}},{key:"_getActiveEdges",value:function(t){var e=this,i=[];return Os.forEach(t.edges,function(t){-1!==e.body.edgeIndices.indexOf(t.id)&&i.push(t)}),i}},{key:"_getHubSizes",value:function(){var t=this,e={},i=this.body.nodeIndices;Os.forEach(i,function(i){var n=t.body.nodes[i],r=t._getActiveEdges(n).length;e[r]=!0});var n=[];return Os.forEach(e,function(t){n.push(+t)}),Hu.sort(n,function(t,e){return e-t}),n}},{key:"_determineLevelsByHubsize",value:function(){for(var t=this,e=function(e,i){t.hierarchical.levelDownstream(e,i)},i=this._getHubSizes(),n=0;n<i.length&&"break"!==function(n){var r=i[n];return 0===r?"break":void Os.forEach(t.body.nodeIndices,function(i){var n=t.body.nodes[i];r===t._getActiveEdges(n).length&&t._crawlNetwork(e,i)})}(n);++n);}},{key:"_determineLevelsCustomCallback",value:function(){var t=this;this._crawlNetwork(function(e,i,n){var r=t.hierarchical.levels[e.id];void 0===r&&(r=t.hierarchical.levels[e.id]=1e5);var o=(Pu.cloneOptions(e,"node"),Pu.cloneOptions(i,"node"),void Pu.cloneOptions(n,"edge"));t.hierarchical.levels[i.id]=r+o}),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var t=this,e=function(e){return Os.forEach(t.body.edges,function(t){if(t.toId===e.fromId&&t.fromId===e.toId)return!0}),!1};this._crawlNetwork(function(i,n,r){var o=t.hierarchical.levels[i.id];t.hierarchical.levels[n.id];e(r),void 0===o&&(o=t.hierarchical.levels[i.id]=1e4),t.hierarchical.levels[n.id]=r.toId==n.id?o+1:o-1}),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var t=this;this._crawlNetwork(function(e,i){t.hierarchical.levels[i.id]>t.hierarchical.levels[e.id]&&t.hierarchical.addRelation(e.id,i.id)}),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){},i=1<arguments.length?arguments[1]:void 0,n={},r=function i(r,o){if(void 0===n[r.id]){t.hierarchical.setTreeIndex(r,o),n[r.id]=!0;for(var s,a,h=t._getActiveEdges(r),l=0;l<h.length;l++)a=h[l],!0===a.connected&&(s=a.toId==r.id?a.from:a.to,r.id!=s.id&&(e(r,s,a),i(s,o)))}};if(void 0===i){for(var o,s=0,a=0;a<this.body.nodeIndices.length;a++)if(o=this.body.nodeIndices[a],void 0===n[o]){var h=this.body.nodes[o];r(h,s),s+=1}}else{var l=this.body.nodes[i];if(void 0===l)return void console.error("Node not found:",i);r(l)}}},{key:"_shiftBlock",value:function(t,e){var i=this,n={};!function t(r){if(!n[r]){n[r]=!0,i.direction.shift(r,e);var o=i.hierarchical.childrenReference[r];if(void 0!==o)for(var s=0;s<o.length;s++)t(o[s])}}(t)}},{key:"_findCommonParent",value:function(t,e){var i=this,n={};return function t(e,n){var r=i.hierarchical.parentReference[n];if(void 0!==r)for(var o,s=0;s<r.length;s++)o=r[s],e[o]=!0,t(e,o)}(n,t),function t(e,n){var r=i.hierarchical.parentReference[n];if(void 0!==r)for(var o,s=0;s<r.length;s++){if(o=r[s],void 0!==e[o])return{foundParent:o,withChild:n};var a=t(e,o);if(null!==a.foundParent)return a}return{foundParent:null,withChild:n}}(n,e)}},{key:"setDirectionStrategy",value:function(){var t="UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction;this.direction=t?new Gu(this):new Wu(this)}},{key:"_getCenterPosition",value:function(t){for(var e,i=1e9,n=-1e9,r=0;r<t.length;r++){if(e=void 0,void 0!==t[r].id)e=t[r];else{var o=t[r];e=this.body.nodes[o]}var s=this.direction.getPosition(e);i=l(i,s),n=a(n,s)}return.5*(i+n)}}]),t}(),qu=function(){function t(e,i,n){var r=this;ol(this,t),this.body=e,this.canvas=i,this.selectionHandler=n,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this.manipulationHammers=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},Os.extend(this.options,this.defaultOptions),this.body.emitter.on("destroy",function(){r._clean()}),this.body.emitter.on("_dataChanged",this._restore.bind(this)),this.body.emitter.on("_resetData",this._restore.bind(this))}return sl(t,[{key:"_restore",value:function(){!1!==this.inMode&&(!0===this.options.initiallyActive?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(t,e,i){void 0!==e&&(this.options.locale=void 0===e.locale?i.locale:e.locale,this.options.locales=void 0===e.locales?i.locales:e.locales),void 0!==t&&("boolean"==typeof t?this.options.enabled=t:(this.options.enabled=!0,Os.deepExtend(this.options,t)),!0===this.options.initiallyActive&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){!0===this.editMode?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},!0===this.guiEnabled){this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var t=this.selectionHandler._getSelectedNodeCount(),e=this.selectionHandler._getSelectedEdgeCount(),i=this.options.locales[this.options.locale],n=!1;!1!==this.options.addNode&&(this._createAddNodeButton(i),n=!0),!1!==this.options.addEdge&&(!0===n?this._createSeperator(1):n=!0,this._createAddEdgeButton(i)),1===t&&"function"==typeof this.options.editNode?(!0===n?this._createSeperator(2):n=!0,this._createEditNodeButton(i)):1===e&&0===t&&!1!==this.options.editEdge&&(!0===n?this._createSeperator(3):n=!0,this._createEditEdgeButton(i)),0!==t+e&&(0<t&&!1!==this.options.deleteNode?(!0===n&&this._createSeperator(4),this._createDeleteButton(i)):0===t&&!1!==this.options.deleteEdge&&(!0===n&&this._createSeperator(4),this._createDeleteButton(i))),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this)),this._temporaryBindEvent("select",this.showManipulatorToolbar.bind(this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addNode",!0===this.guiEnabled){var t=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(t),this._createSeperator(),this._createDescription(t.addDescription||this.options.locales.en.addDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindEvent("click",this._performAddNode.bind(this))}},{key:"editNode",value:function(){var t=this;!0!==this.editMode&&this.enableEditMode(),this._clean();var e=this.selectionHandler._getSelectedNode();if(void 0===e)this.showManipulatorToolbar();else{if(this.inMode="editNode","function"!=typeof this.options.editNode)throw new Error("No function has been configured to handle the editing of nodes.");if(!0!==e.isCluster){var i=Os.deepExtend({},e.options,!1);if(i.x=e.x,i.y=e.y,2!==this.options.editNode.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editNode(i,function(e){null!==e&&void 0!==e&&"editNode"===t.inMode&&t.body.data.nodes.getDataSet().update(e),t.showManipulatorToolbar()})}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError)}}},{key:"addEdgeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addEdge",!0===this.guiEnabled){var t=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(t),this._createSeperator(),this._createDescription(t.edgeDescription||this.options.locales.en.edgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindUI("onTouch",this._handleConnect.bind(this)),this._temporaryBindUI("onDragEnd",this._finishConnect.bind(this)),this._temporaryBindUI("onDrag",this._dragControlNode.bind(this)),this._temporaryBindUI("onRelease",this._finishConnect.bind(this)),this._temporaryBindUI("onDragStart",this._dragStartEdge.bind(this)),this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="editEdge","object"===ml(this.options.editEdge)&&"function"==typeof this.options.editEdge.editWithoutDrag&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],void 0!==this.edgeBeingEditedId)){var t=this.body.edges[this.edgeBeingEditedId];return void this._performEditEdge(t.from,t.to)}if(!0===this.guiEnabled){var e=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(e),this._createSeperator(),this._createDescription(e.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],void 0!==this.edgeBeingEditedId){var i=this.body.edges[this.edgeBeingEditedId],n=this._getNewTargetNode(i.from.x,i.from.y),r=this._getNewTargetNode(i.to.x,i.to.y);this.temporaryIds.nodes.push(n.id),this.temporaryIds.nodes.push(r.id),this.body.nodes[n.id]=n,this.body.nodeIndices.push(n.id),this.body.nodes[r.id]=r,this.body.nodeIndices.push(r.id),this._temporaryBindUI("onTouch",this._controlNodeTouch.bind(this)),this._temporaryBindUI("onTap",function(){}),this._temporaryBindUI("onHold",function(){}),this._temporaryBindUI("onDragStart",this._controlNodeDragStart.bind(this)),this._temporaryBindUI("onDrag",this._controlNodeDrag.bind(this)),this._temporaryBindUI("onDragEnd",this._controlNodeDragEnd.bind(this)),this._temporaryBindUI("onMouseMove",function(){}),this._temporaryBindEvent("beforeDrawing",function(t){var e=i.edgeType.findBorderPositions(t);!1===n.selected&&(n.x=e.from.x,n.y=e.from.y),!1===r.selected&&(r.x=e.to.x,r.y=e.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}},{key:"deleteSelected",value:function(){var t=this;!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="delete";var e=this.selectionHandler.getSelectedNodes(),i=this.selectionHandler.getSelectedEdges(),n=void 0;if(0<e.length){for(var r=0;r<e.length;r++)if(!0===this.body.nodes[e[r]].isCluster)return void alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);"function"==typeof this.options.deleteNode&&(n=this.options.deleteNode)}else 0<i.length&&"function"==typeof this.options.deleteEdge&&(n=this.options.deleteEdge);if("function"==typeof n){if(2!==n.length)throw new Error("The function for delete does not support two arguments (data, callback)");n({nodes:e,edges:i},function(e){null!==e&&void 0!==e&&"delete"===t.inMode?(t.body.data.edges.getDataSet().remove(e.edges),t.body.data.nodes.getDataSet().remove(e.nodes),t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar()):(t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().remove(i),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){!0===this.options.enabled?(this.guiEnabled=!0,this._createWrappers(),!1===this.editMode?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.manipulationDiv.style.display=!0===this.editMode?"block":"none",this.canvas.frame.appendChild(this.manipulationDiv)),void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editModeDiv.style.display=!0===this.editMode?"none":"block",this.canvas.frame.appendChild(this.editModeDiv)),void 0===this.closeDiv&&(this.closeDiv=document.createElement("div"),this.closeDiv.className="vis-close",this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv))}},{key:"_getNewTargetNode",value:function(t,e){var i=Os.deepExtend({},this.options.controlNodeStyle);i.id="targetNode"+Os.randomUUID(),i.hidden=!1,i.physics=!1,i.x=t,i.y=e;var n=this.body.functions.createNode(i);return n.shape.boundingBox={left:t,right:t,top:e,bottom:e},n}},{key:"_createEditButton",value:function(){this._clean(),this.manipulationDOM={},Os.recursiveDOMDelete(this.editModeDiv);var t=this.options.locales[this.options.locale],e=this._createButton("editMode","vis-button vis-edit vis-edit-mode",t.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(e),this._bindHammerToDiv(e,this.toggleEditMode.bind(this))}},{key:"_clean",value:function(){this.inMode=!1,!0===this.guiEnabled&&(Os.recursiveDOMDelete(this.editModeDiv),Os.recursiveDOMDelete(this.manipulationDiv),this._cleanManipulatorHammers()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanManipulatorHammers",value:function(){if(0!=this.manipulationHammers.length){for(var t=0;t<this.manipulationHammers.length;t++)this.manipulationHammers[t].destroy();this.manipulationHammers=[]}}},{key:"_removeManipulationDOM",value:function(){this._clean(),Os.recursiveDOMDelete(this.manipulationDiv),Os.recursiveDOMDelete(this.editModeDiv),Os.recursiveDOMDelete(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+t]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+t].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+t])}},{key:"_createAddNodeButton",value:function(t){var e=this._createButton("addNode","vis-button vis-add",t.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.addNodeMode.bind(this))}},{key:"_createAddEdgeButton",value:function(t){var e=this._createButton("addEdge","vis-button vis-connect",t.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.addEdgeMode.bind(this))}},{key:"_createEditNodeButton",value:function(t){var e=this._createButton("editNode","vis-button vis-edit",t.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.editNode.bind(this))}},{key:"_createEditEdgeButton",value:function(t){var e=this._createButton("editEdge","vis-button vis-edit",t.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.editEdgeMode.bind(this))}},{key:"_createDeleteButton",value:function(t){var e=this.options.rtl?"vis-button vis-delete-rtl":"vis-button vis-delete",i=this._createButton("delete",e,t.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindHammerToDiv(i,this.deleteSelected.bind(this))}},{key:"_createBackButton",value:function(t){var e=this._createButton("back","vis-button vis-back",t.back||this.options.locales.en.back);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.showManipulatorToolbar.bind(this))}},{key:"_createButton",value:function(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"vis-label";return this.manipulationDOM[t+"Div"]=document.createElement("div"),this.manipulationDOM[t+"Div"].className=e,this.manipulationDOM[t+"Label"]=document.createElement("div"),this.manipulationDOM[t+"Label"].className=n,this.manipulationDOM[t+"Label"].innerHTML=i,this.manipulationDOM[t+"Div"].appendChild(this.manipulationDOM[t+"Label"]),this.manipulationDOM[t+"Div"]}},{key:"_createDescription",value:function(t){this.manipulationDiv.appendChild(this._createButton("description","vis-button vis-none",t))}},{key:"_temporaryBindEvent",value:function(t,e){this.temporaryEventFunctions.push({event:t,boundFunction:e}),this.body.emitter.on(t,e)}},{key:"_temporaryBindUI",value:function(t,e){if(void 0===this.body.eventListeners[t])throw new Error("This UI function does not exist. Typo? You tried: "+t+" possible are: "+JSON.stringify(Object.keys(this.body.eventListeners)));this.temporaryUIFunctions[t]=this.body.eventListeners[t],this.body.eventListeners[t]=e}},{key:"_unbindTemporaryUIs",value:function(){for(var t in this.temporaryUIFunctions)this.temporaryUIFunctions.hasOwnProperty(t)&&(this.body.eventListeners[t]=this.temporaryUIFunctions[t],delete this.temporaryUIFunctions[t]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var t=0;t<this.temporaryEventFunctions.length;t++){var e=this.temporaryEventFunctions[t].event,i=this.temporaryEventFunctions[t].boundFunction;this.body.emitter.off(e,i)}this.temporaryEventFunctions=[]}},{key:"_bindHammerToDiv",value:function(t,e){var i=new tl(t,{});Ru.onTouch(i,e),this.manipulationHammers.push(i)}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var t=0;t<this.temporaryIds.edges.length;t++){this.body.edges[this.temporaryIds.edges[t]].disconnect(),delete this.body.edges[this.temporaryIds.edges[t]];var e=this.body.edgeIndices.indexOf(this.temporaryIds.edges[t]);-1!==e&&this.body.edgeIndices.splice(e,1)}for(var i=0;i<this.temporaryIds.nodes.length;i++){delete this.body.nodes[this.temporaryIds.nodes[i]];var n=this.body.nodeIndices.indexOf(this.temporaryIds.nodes[i]);-1!==n&&this.body.nodeIndices.splice(n,1)}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(t){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=Os.extend({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(){var t=this.lastTouch,e=this.selectionHandler._pointerToPositionObject(t),i=this.body.nodes[this.temporaryIds.nodes[0]],n=this.body.nodes[this.temporaryIds.nodes[1]],r=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var o=i.isOverlappingWith(e),s=n.isOverlappingWith(e);!0===o?(this.selectedControlNode=i,r.edgeType.from=i):!0===s&&(this.selectedControlNode=n,r.edgeType.to=n),void 0!==this.selectedControlNode&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(t){this.body.emitter.emit("disablePhysics");var e=this.body.functions.getPointer(t.center),i=this.canvas.DOMtoCanvas(e);if(void 0!==this.selectedControlNode)this.selectedControlNode.x=i.x,this.selectedControlNode.y=i.y;else{var n=e.x-this.lastTouch.x,r=e.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+n,y:this.lastTouch.translation.y+r}}this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),n=this.body.edges[this.edgeBeingEditedId];if(void 0!==this.selectedControlNode){this.selectionHandler.unselectAll();for(var r=this.selectionHandler._getAllNodesOverlappingWith(i),o=void 0,s=r.length-1;0<=s;s--)if(r[s]!==this.selectedControlNode.id){o=this.body.nodes[r[s]];break}if(void 0===o||void 0===this.selectedControlNode)n.updateEdgeType(),this.body.emitter.emit("restorePhysics");else if(!0===o.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(o.id,n.to.id):this._performEditEdge(n.from.id,o.id)}this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(t){if(100<(new Date).valueOf()-this.touchTime){this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=Os.extend({},this.body.view.translation);var e=this.lastTouch,i=this.selectionHandler.getNodeAt(e);if(void 0!==i)if(!0===i.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var n=this._getNewTargetNode(i.x,i.y);this.body.nodes[n.id]=n,this.body.nodeIndices.push(n.id);var r=this.body.functions.createEdge({id:"connectionEdge"+Os.randomUUID(),from:i.id,to:n.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[r.id]=r,this.body.edgeIndices.push(r.id),this.temporaryIds.nodes.push(n.id),this.temporaryIds.edges.push(r.id)}this.touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),n=void 0;void 0!==this.temporaryIds.edges[0]&&(n=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var r=this.selectionHandler._getAllNodesOverlappingWith(i),o=void 0,s=r.length-1;0<=s;s--)if(-1===this.temporaryIds.nodes.indexOf(r[s])){o=this.body.nodes[r[s]];break}if(t.controlEdge={from:n,to:o?o.id:void 0},this.selectionHandler._generateClickEvent("controlNodeDragging",t,e),void 0!==this.temporaryIds.nodes[0]){var a=this.body.nodes[this.temporaryIds.nodes[0]];a.x=this.canvas._XconvertDOMtoCanvas(e.x),a.y=this.canvas._YconvertDOMtoCanvas(e.y),this.body.emitter.emit("_redraw")}else{var h=e.x-this.lastTouch.x,l=e.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+h,y:this.lastTouch.translation.y+l}}}},{key:"_finishConnect",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),n=void 0;void 0!==this.temporaryIds.edges[0]&&(n=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var r=this.selectionHandler._getAllNodesOverlappingWith(i),o=void 0,s=r.length-1;0<=s;s--)if(-1===this.temporaryIds.nodes.indexOf(r[s])){o=this.body.nodes[r[s]];break}this._cleanupTemporaryNodesAndEdges(),void 0!==o&&(!0===o.isCluster?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):void 0!==this.body.nodes[n]&&void 0!==this.body.nodes[o.id]&&this._performAddEdge(n,o.id)),t.controlEdge={from:n,to:o?o.id:void 0},this.selectionHandler._generateClickEvent("controlNodeDragEnd",t,e),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(t){var e=this.lastTouch;this.selectionHandler._generateClickEvent("dragStart",t,e,void 0,!0)}},{key:"_performAddNode",value:function(t){var e=this,i={id:Os.randomUUID(),x:t.pointer.canvas.x,y:t.pointer.canvas.y,label:"new"};if("function"!=typeof this.options.addNode)this.body.data.nodes.getDataSet().add(i),this.showManipulatorToolbar();else{if(2!==this.options.addNode.length)throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");this.options.addNode(i,function(t){null!==t&&void 0!==t&&"addNode"===e.inMode&&e.body.data.nodes.getDataSet().add(t),e.showManipulatorToolbar()})}}},{key:"_performAddEdge",value:function(t,e){var i=this,n={from:t,to:e};if("function"!=typeof this.options.addEdge)this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar();else{if(2!==this.options.addEdge.length)throw new Error("The function for connect does not support two arguments (data,callback)");this.options.addEdge(n,function(t){null!==t&&void 0!==t&&"addEdge"===i.inMode&&(i.body.data.edges.getDataSet().add(t),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())})}}},{key:"_performEditEdge",value:function(t,e){var i=this,n={id:this.edgeBeingEditedId,from:t,to:e,label:this.body.data.edges._data[this.edgeBeingEditedId].label},r=this.options.editEdge;if("object"===ml(r)&&(r=r.editWithoutDrag),"function"!=typeof r)this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar();else{if(2!==r.length)throw new Error("The function for edit does not support two arguments (data, callback)");r(n,function(t){null===t||void 0===t||"editEdge"!==i.inMode?(i.body.edges[n.id].updateEdgeType(),i.body.emitter.emit("_redraw"),i.showManipulatorToolbar()):(i.body.data.edges.getDataSet().update(t),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())})}}}]),t}(),Xu={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},Zu=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;ol(this,t),this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}var e=Math.atan2,i=Math.cos,n=Math.sin,r=Math.sqrt,o=Math.PI,s=Math.min;return sl(t,[{key:"insertTo",value:function(t){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=t}},{key:"setCloseCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=t}},{key:"_isColorString",value:function(t){if("string"==typeof t)return Xu[t]}},{key:"setColor",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if("none"!==t){var i,n=this._isColorString(t);if(void 0!==n&&(t=n),!0===Os.isString(t)){if(!0===Os.isValidRGB(t)){var r=t.substr(4).substr(0,t.length-5).split(",");i={r:r[0],g:r[1],b:r[2],a:1}}else if(!0===Os.isValidRGBA(t)){var o=t.substr(5).substr(0,t.length-6).split(",");i={r:o[0],g:o[1],b:o[2],a:o[3]}}else if(!0===Os.isValidHex(t)){var s=Os.hexToRGB(t);i={r:s.r,g:s.g,b:s.b,a:1}}}else if(t instanceof Object&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b){var a=void 0===t.a?"1.0":t.a;i={r:t.r,g:t.g,b:t.b,a:a}}if(void 0===i)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(t));this._setColor(i,e)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this;!0===(!(0<arguments.length&&void 0!==arguments[0])||arguments[0])&&(this.previousColor=Os.extend({},this.color)),!0===this.applied&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout(function(){void 0!==t.closeCallback&&(t.closeCallback(),t.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0===this.previousColor?alert("There is no last color to load..."):this.setColor(this.previousColor,!1)}},{key:"_setColor",value:function(t){!0===(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&(this.initialColor=Os.extend({},t)),this.color=t;var e=Os.RGBToHSV(t.r,t.g,t.b),r=2*o,s=this.r*e.s,a=this.centerCoordinates.x+s*n(r*e.h),h=this.centerCoordinates.y+s*i(r*e.h);this.colorPickerSelector.style.left=a-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var e=Os.RGBToHSV(this.color.r,this.color.g,this.color.b);e.v=t/100;var i=Os.HSVToRGB(e.h,e.s,e.v);i.a=this.color.a,this.color=i,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.color,e=Os.RGBToHSV(t.r,t.g,t.b),i=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var n=this.colorPickerCanvas.clientWidth,r=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,n,r),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-e.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),i.fill(),this.brightnessRange.value=100*e.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var t=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(e)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(e){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(e){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var i=this;this.opacityRange.onchange=function(){i._setOpacity(this.value)},this.opacityRange.oninput=function(){i._setOpacity(this.value)},this.brightnessRange.onchange=function(){i._setBrightness(this.value)},this.brightnessRange.oninput=function(){i._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new tl(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),Ru.onTouch(this.hammer,function(e){t._moveSelector(e)}),this.hammer.on("tap",function(e){t._moveSelector(e)}),this.hammer.on("panstart",function(e){t._moveSelector(e)}),this.hammer.on("panmove",function(e){t._moveSelector(e)}),this.hammer.on("panend",function(e){t._moveSelector(e)})}},{key:"_generateHueCircle",value:function(){if(!1===this.generated){var t=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var e=this.colorPickerCanvas.clientWidth,r=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,e,r);var s,a,h,l;this.centerCoordinates={x:.5*e,y:.5*r},this.r=.49*e;var u,d=2*o/360,c=1/this.r;for(h=0;360>h;h++)for(l=0;l<this.r;l++)s=this.centerCoordinates.x+l*n(d*h),a=this.centerCoordinates.y+l*i(d*h),u=Os.HSVToRGB(h*(1/360),l*c,1),t.fillStyle="rgb("+u.r+","+u.g+","+u.b+")",t.fillRect(s-.5,a-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,e,r)}this.generated=!0}},{key:"_moveSelector",value:function(t){var a=this.colorPickerDiv.getBoundingClientRect(),h=t.center.x-a.left,l=t.center.y-a.top,u=.5*this.colorPickerDiv.clientHeight,d=.5*this.colorPickerDiv.clientWidth,c=h-d,f=l-u,p=e(c,f),m=.98*s(r(c*c+f*f),d),v=i(p)*m+u,g=n(p)*m+d;this.colorPickerSelector.style.top=v-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=g-.5*this.colorPickerSelector.clientWidth+"px";var y=p/(2*o);y=0>y?y+1:y;var b=m/this.r,_=Os.RGBToHSV(this.color.r,this.color.g,this.color.b);_.h=y,_.s=b;var w=Os.HSVToRGB(_.h,_.s,_.v);w.a=this.color.a,this.color=w,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),t}(),Ku=function(){function t(e,i,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;ol(this,t),this.parent=e,this.changedOptions=[],this.container=i,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Os.extend(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new Zu(r),this.wrapper=void 0}var e=Math.ceil;return sl(t,[{key:"setOptions",value:function(t){if(void 0!==t){this.popupHistory={},this._removePopup();var e=!0;if("string"==typeof t)this.options.filter=t;else if(t instanceof Array)this.options.filter=t.join();else if("object"===ml(t)){if(null==t)throw new TypeError("options cannot be null");void 0!==t.container&&(this.options.container=t.container),void 0!==t.filter&&(this.options.filter=t.filter),void 0!==t.showButton&&(this.options.showButton=t.showButton),void 0!==t.enabled&&(e=t.enabled)}else"boolean"==typeof t?(this.options.filter=!0,e=t):"function"==typeof t&&(this.options.filter=t,e=!0);!1===this.options.filter&&(e=!1),this.options.enabled=e}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=this.options.filter,e=0,i=!1;for(var n in this.configureOptions)this.configureOptions.hasOwnProperty(n)&&(this.allowCreation=!1,i=!1,"function"==typeof t?(i=t(n,[]),i=i||this._handleObject(this.configureOptions[n],[n],!0)):(!0===t||-1!==t.indexOf(n))&&(i=!0),!1!==i&&(this.allowCreation=!0,0<e&&this._makeItem([]),this._makeHeader(n),this._handleObject(this.configureOptions[n],[n])),e++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var e=this.moduleOptions,i=0;i<t.length;i++){if(void 0===e[t[i]]){e=void 0;break}e=e[t[i]]}return e}},{key:"_makeItem",value:function(t){if(!0===this.allowCreation){var e=document.createElement("div");e.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var i=arguments.length,n=Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return n.forEach(function(t){e.appendChild(t)}),this.domElements.push(e),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var e=document.createElement("div");e.className="vis-configuration vis-config-header",e.innerHTML=t,this._makeItem([],e)}},{key:"_makeLabel",value:function(t,e){var i=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],n=document.createElement("div");return n.className="vis-configuration vis-config-label vis-config-s"+e.length,n.innerHTML=!0===i?"<i><b>"+t+":</b></i>":t+":",n}},{key:"_makeDropdown",value:function(t,e,i){var n=document.createElement("select");n.className="vis-configuration vis-config-select";var r=0;void 0!==e&&-1!==t.indexOf(e)&&(r=t.indexOf(e));for(var o,s=0;s<t.length;s++)o=document.createElement("option"),o.value=t[s],s==r&&(o.selected="selected"),o.innerHTML=t[s],n.appendChild(o);var a=this;n.onchange=function(){a._update(this.value,i)};var h=this._makeLabel(i[i.length-1],i);this._makeItem(i,h,n)}},{key:"_makeRange",value:function(t,i,n){var r=t[0],o=t[1],s=t[2],a=t[3],h=document.createElement("input");h.className="vis-configuration vis-config-range";try{h.type="range",h.min=o,h.max=s}catch(t){}h.step=a;var l="",u=0;if(void 0!==i){var d=1.2;0>i&&i*d<o?(h.min=e(i*d),u=h.min,l="range increased"):i/d<o&&(h.min=e(i/d),u=h.min,l="range increased"),i*d>s&&1!==s&&(h.max=e(i*d),u=h.max,l="range increased"),h.value=i}else h.value=r;var c=document.createElement("input");c.className="vis-configuration vis-config-rangeinput",c.value=h.value;var f=this;h.onchange=function(){c.value=this.value,f._update(+this.value,n)},h.oninput=function(){c.value=this.value};var p=this._makeLabel(n[n.length-1],n),m=this._makeItem(n,p,h,c);""!=l&&this.popupHistory[m]!==u&&(this.popupHistory[m]=u,this._setupPopup(l,m))}},{key:"_makeButton",value:function(){var t=this;if(!0===this.options.showButton){var e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerHTML="generate options",e.onclick=function(){t._printOptions()},e.onmouseover=function(){e.className="vis-configuration vis-config-button hover"},e.onmouseout=function(){e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}},{key:"_setupPopup",value:function(t,e){var i=this;if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){var n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerHTML=t,n.onclick=function(){i._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:e}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(void 0!==this.popupDiv.html){var e=this.domElements[this.popupDiv.index],i=e.getBoundingClientRect();this.popupDiv.html.style.left=i.left+"px",this.popupDiv.html.style.top=i.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,e,i){var n=document.createElement("input");n.type="checkbox",n.className="vis-configuration vis-config-checkbox",n.checked=t,void 0!==e&&(n.checked=e,e!==t&&("object"===ml(t)?e!==t.enabled&&this.changedOptions.push({path:i,value:e}):this.changedOptions.push({path:i,value:e})));var r=this;n.onchange=function(){r._update(this.checked,i)};var o=this._makeLabel(i[i.length-1],i);this._makeItem(i,o,n)}},{key:"_makeTextInput",value:function(t,e,i){var n=document.createElement("input");n.type="text",n.className="vis-configuration vis-config-text",n.value=e,e!==t&&this.changedOptions.push({path:i,value:e});var r=this;n.onchange=function(){r._update(this.value,i)};var o=this._makeLabel(i[i.length-1],i);this._makeItem(i,o,n)}},{key:"_makeColorField",value:function(t,e,i){var n=this,r=t[1],o=document.createElement("div");e=void 0===e?r:e,"none"===e?o.className="vis-configuration vis-config-colorBlock none":(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=e),e=void 0===e?r:e,o.onclick=function(){n._showColorPicker(e,o,i)};var s=this._makeLabel(i[i.length-1],i);this._makeItem(i,s,o)}},{key:"_showColorPicker",value:function(t,e,i){var n=this;e.onclick=function(){},this.colorPicker.insertTo(e),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback(function(t){var r="rgba("+t.r+","+t.g+","+t.b+","+t.a+")";e.style.backgroundColor=r,n._update(r,i)}),this.colorPicker.setCloseCallback(function(){e.onclick=function(){n._showColorPicker(t,e,i)}})}},{key:"_handleObject",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],n=!1,r=this.options.filter,o=!1;for(var s in t)if(t.hasOwnProperty(s)){n=!0;var a=t[s],h=Os.copyAndExtendArray(e,s);if("function"==typeof r&&!1===(n=r(s,e))&&!(a instanceof Array)&&"string"!=typeof a&&"boolean"!=typeof a&&a instanceof Object&&(this.allowCreation=!1,n=this._handleObject(a,h,!0),this.allowCreation=!1===i),!1!==n){o=!0;var l=this._getValue(h);if(a instanceof Array)this._handleArray(a,l,h);else if("string"==typeof a)this._makeTextInput(a,l,h);else if("boolean"==typeof a)this._makeCheckbox(a,l,h);else if(a instanceof Object){var u=!0;if(-1!==e.indexOf("physics")&&this.moduleOptions.physics.solver!==s&&(u=!1),1==u)if(void 0!==a.enabled){var d=Os.copyAndExtendArray(h,"enabled"),c=this._getValue(d);if(!0===c){var f=this._makeLabel(s,h,!0);this._makeItem(h,f),o=this._handleObject(a,h)||o}else this._makeCheckbox(a,c,h)}else{var p=this._makeLabel(s,h,!0);this._makeItem(h,p),o=this._handleObject(a,h)||o}}else console.error("dont know how to handle",a,s,h)}}return o}},{key:"_handleArray",value:function(t,e,i){"string"==typeof t[0]&&"color"===t[0]?(this._makeColorField(t,e,i),t[1]!==e&&this.changedOptions.push({path:i,value:e})):"string"==typeof t[0]?(this._makeDropdown(t,e,i),t[0]!==e&&this.changedOptions.push({path:i,value:e})):"number"==typeof t[0]&&(this._makeRange(t,e,i),t[0]!==e&&this.changedOptions.push({path:i,value:+e}))}},{key:"_update",value:function(t,e){var i=this._constructOptions(t,e);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}},{key:"_constructOptions",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=i;t="true"===t||t,t="false"!==t&&t;for(var r=0;r<e.length;r++)"global"!==e[r]&&(void 0===n[e[r]]&&(n[e[r]]={}),r==e.length-1?n[e[r]]=t:n=n[e[r]]);return i}},{key:"_printOptions",value:function(){var t=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+JSON.stringify(t,null,2)+"</pre>"}},{key:"getOptions",value:function(){for(var t={},e=0;e<this.changedOptions.length;e++)this._constructOptions(this.changedOptions[e].value,this.changedOptions[e].path,t);return t}}]),t}(),Qu="string",Ju="boolean",td="number",ed="object",id=["arrow","circle","bar"],nd={configure:{enabled:{boolean:Ju},filter:{boolean:Ju,string:Qu,array:"array",function:"function"},container:{dom:"dom"},showButton:{boolean:Ju},__type__:{object:ed,boolean:Ju,string:Qu,array:"array",function:"function"}},edges:{arrows:{to:{enabled:{boolean:Ju},scaleFactor:{number:td},type:{string:id},__type__:{object:ed,boolean:Ju}},middle:{enabled:{boolean:Ju},scaleFactor:{number:td},type:{string:id},__type__:{object:ed,boolean:Ju}},from:{enabled:{boolean:Ju},scaleFactor:{number:td},type:{string:id},__type__:{object:ed,boolean:Ju}},__type__:{string:["from","to","middle"],object:ed}},arrowStrikethrough:{boolean:Ju},background:{enabled:{boolean:Ju},color:{string:Qu},size:{number:td},dashes:{boolean:Ju,array:"array"},__type__:{object:ed,boolean:Ju}},chosen:{label:{boolean:Ju,function:"function"},edge:{boolean:Ju,function:"function"},__type__:{object:ed,boolean:Ju}},color:{color:{string:Qu},highlight:{string:Qu},hover:{string:Qu},inherit:{string:["from","to","both"],boolean:Ju},opacity:{number:td},__type__:{object:ed,string:Qu}},dashes:{boolean:Ju,array:"array"},font:{color:{string:Qu},size:{number:td},face:{string:Qu},background:{string:Qu},strokeWidth:{number:td},strokeColor:{string:Qu},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:td},multi:{boolean:Ju,string:Qu},bold:{color:{string:Qu},size:{number:td},face:{string:Qu},mod:{string:Qu},vadjust:{number:td},__type__:{object:ed,string:Qu}},boldital:{color:{string:Qu},size:{number:td},face:{string:Qu},mod:{string:Qu},vadjust:{number:td},__type__:{object:ed,string:Qu}},ital:{color:{string:Qu},size:{number:td},face:{string:Qu},mod:{string:Qu},vadjust:{number:td},__type__:{object:ed,string:Qu}},mono:{color:{string:Qu},size:{number:td},face:{string:Qu},mod:{string:Qu},vadjust:{number:td},__type__:{object:ed,string:Qu}},__type__:{object:ed,string:Qu}},hidden:{boolean:Ju},hoverWidth:{function:"function",number:td},label:{string:Qu,undefined:"undefined"},labelHighlightBold:{boolean:Ju},length:{number:td,undefined:"undefined"},physics:{boolean:Ju},scaling:{min:{number:td},max:{number:td},label:{enabled:{boolean:Ju},min:{number:td},max:{number:td},maxVisible:{number:td},drawThreshold:{number:td},__type__:{object:ed,boolean:Ju}},customScalingFunction:{function:"function"},__type__:{object:ed}},selectionWidth:{function:"function",number:td},selfReferenceSize:{number:td},shadow:{enabled:{boolean:Ju},color:{string:Qu},size:{number:td},x:{number:td},y:{number:td},__type__:{object:ed,boolean:Ju}},smooth:{enabled:{boolean:Ju},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:td},forceDirection:{string:["horizontal","vertical","none"],boolean:Ju},__type__:{object:ed,boolean:Ju}},title:{string:Qu,undefined:"undefined"},width:{number:td},widthConstraint:{maximum:{number:td},__type__:{object:ed,boolean:Ju,number:td}},value:{number:td,undefined:"undefined"},__type__:{object:ed}},groups:{useDefaultGroups:{boolean:Ju},__any__:"get from nodes, will be overwritten below",__type__:{object:ed}},interaction:{dragNodes:{boolean:Ju},dragView:{boolean:Ju},hideEdgesOnDrag:{boolean:Ju},hideEdgesOnZoom:{boolean:Ju},hideNodesOnDrag:{boolean:Ju},hover:{boolean:Ju},keyboard:{enabled:{boolean:Ju},speed:{x:{number:td},y:{number:td},zoom:{number:td},__type__:{object:ed}},bindToWindow:{boolean:Ju},__type__:{object:ed,boolean:Ju}},multiselect:{boolean:Ju},navigationButtons:{boolean:Ju},selectable:{boolean:Ju},selectConnectedEdges:{boolean:Ju},hoverConnectedEdges:{boolean:Ju},tooltipDelay:{number:td},zoomView:{boolean:Ju},zoomSpeed:{number:td},__type__:{object:ed}},layout:{randomSeed:{undefined:"undefined",number:td},improvedLayout:{boolean:Ju},clusterThreshold:{number:td},hierarchical:{enabled:{boolean:Ju},levelSeparation:{number:td},nodeSpacing:{number:td},treeSpacing:{number:td},blockShifting:{boolean:Ju},edgeMinimization:{boolean:Ju},parentCentralization:{boolean:Ju},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},__type__:{object:ed,boolean:Ju}},__type__:{object:ed}},manipulation:{enabled:{boolean:Ju},initiallyActive:{boolean:Ju},addNode:{boolean:Ju,function:"function"},addEdge:{boolean:Ju,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:ed,boolean:Ju,function:"function"}},deleteNode:{boolean:Ju,function:"function"},deleteEdge:{boolean:Ju,function:"function"},controlNodeStyle:"get from nodes, will be overwritten below",__type__:{object:ed,boolean:Ju}},nodes:{borderWidth:{number:td},borderWidthSelected:{number:td,undefined:"undefined"},brokenImage:{string:Qu,undefined:"undefined"},chosen:{label:{boolean:Ju,function:"function"},node:{boolean:Ju,function:"function"},__type__:{object:ed,boolean:Ju}},color:{border:{string:Qu},background:{string:Qu},highlight:{border:{string:Qu},background:{string:Qu},__type__:{object:ed,string:Qu}},hover:{border:{string:Qu},background:{string:Qu},__type__:{object:ed,string:Qu}},__type__:{object:ed,string:Qu}},fixed:{x:{boolean:Ju},y:{boolean:Ju},__type__:{object:ed,boolean:Ju}},font:{align:{string:Qu},color:{string:Qu},size:{number:td},face:{string:Qu},background:{string:Qu},strokeWidth:{number:td},strokeColor:{string:Qu},vadjust:{number:td},multi:{boolean:Ju,string:Qu},bold:{color:{string:Qu},size:{number:td},face:{string:Qu},mod:{string:Qu},vadjust:{number:td},__type__:{object:ed,string:Qu}},boldital:{color:{string:Qu},size:{number:td},face:{string:Qu},mod:{string:Qu},vadjust:{number:td},__type__:{object:ed,string:Qu}},ital:{color:{string:Qu},size:{number:td},face:{string:Qu},mod:{string:Qu},vadjust:{number:td},__type__:{object:ed,string:Qu}},mono:{color:{string:Qu},size:{number:td},face:{string:Qu},mod:{string:Qu},vadjust:{number:td},__type__:{object:ed,string:Qu}},__type__:{object:ed,string:Qu}},group:{string:Qu,number:td,undefined:"undefined"},heightConstraint:{minimum:{number:td},valign:{string:Qu},__type__:{object:ed,boolean:Ju,number:td}},hidden:{boolean:Ju},icon:{face:{string:Qu},code:{string:Qu},size:{number:td},color:{string:Qu},__type__:{object:ed}},id:{string:Qu,number:td},image:{selected:{string:Qu,undefined:"undefined"},unselected:{string:Qu,undefined:"undefined"},__type__:{object:ed,string:Qu}},imagePadding:{top:{number:td},right:{number:td},bottom:{number:td},left:{number:td},__type__:{object:ed,number:td}},label:{string:Qu,undefined:"undefined"},labelHighlightBold:{boolean:Ju},level:{number:td,undefined:"undefined"},margin:{top:{number:td},right:{number:td},bottom:{number:td},left:{number:td},__type__:{object:ed,number:td}},mass:{number:td},physics:{boolean:Ju},scaling:{min:{number:td},max:{number:td},label:{enabled:{boolean:Ju},min:{number:td},max:{number:td},maxVisible:{number:td},drawThreshold:{number:td},__type__:{object:ed,boolean:Ju}},customScalingFunction:{function:"function"},__type__:{object:ed}},shadow:{enabled:{boolean:Ju},color:{string:Qu},size:{number:td},x:{number:td},y:{number:td},__type__:{object:ed,boolean:Ju}},shape:{string:["ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},shapeProperties:{borderDashes:{boolean:Ju,array:"array"},borderRadius:{number:td},interpolation:{boolean:Ju},useImageSize:{boolean:Ju},useBorderWithImage:{boolean:Ju},__type__:{object:ed}},size:{number:td},title:{string:Qu,dom:"dom",undefined:"undefined"},value:{number:td,undefined:"undefined"},widthConstraint:{minimum:{number:td},maximum:{number:td},__type__:{object:ed,boolean:Ju,number:td}},x:{number:td},y:{number:td},__type__:{object:ed}},physics:{enabled:{boolean:Ju},barnesHut:{gravitationalConstant:{number:td},centralGravity:{number:td},springLength:{number:td},springConstant:{number:td},damping:{number:td},avoidOverlap:{number:td},__type__:{object:ed}},forceAtlas2Based:{gravitationalConstant:{number:td},centralGravity:{number:td},springLength:{number:td},springConstant:{number:td},damping:{number:td},avoidOverlap:{number:td},__type__:{object:ed}},repulsion:{centralGravity:{number:td},springLength:{number:td},springConstant:{number:td},nodeDistance:{number:td},damping:{number:td},__type__:{object:ed}},hierarchicalRepulsion:{centralGravity:{number:td},springLength:{number:td},springConstant:{number:td},nodeDistance:{number:td},damping:{number:td},__type__:{object:ed}},maxVelocity:{number:td},minVelocity:{number:td},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:Ju},iterations:{number:td},updateInterval:{number:td},onlyDynamicEdges:{boolean:Ju},fit:{boolean:Ju},__type__:{object:ed,boolean:Ju}},timestep:{number:td},adaptiveTimestep:{boolean:Ju},__type__:{object:ed,boolean:Ju}},autoResize:{boolean:Ju},clickToUse:{boolean:Ju},locale:{string:Qu},locales:{__any__:{any:"any"},__type__:{object:ed}},height:{string:Qu},width:{string:Qu},__type__:{object:ed}};nd.groups.__any__=nd.nodes,nd.manipulation.controlNodeStyle=nd.nodes;var rd={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,1,1,1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01]}},od=Object.freeze({allOptions:nd,configureOptions:rd}),sd=function(){function t(){ol(this,t)}var e=Math.min;return sl(t,[{key:"getDistances",value:function(t,i,n){for(var r={},o=t.edges,s=0;s<i.length;s++){var a=i[s],h={};r[a]=h;for(var l=0;l<i.length;l++)h[i[l]]=s==l?0:1e9}for(var u,d=0;d<n.length;d++)u=o[n[d]],!0===u.connected&&void 0!==r[u.fromId]&&void 0!==r[u.toId]&&(r[u.fromId][u.toId]=1,r[u.toId][u.fromId]=1);for(var c=i.length,f=0;f<c;f++)for(var p=i[f],m=r[p],v=0;v<c-1;v++)for(var g=i[v],y=r[g],b=v+1;b<c;b++){var _=i[b],w=r[_],x=e(y[_],y[p]+m[_]);y[_]=x,w[g]=x}return r}}]),t}(),ad=function(){function t(e,i,n){ol(this,t),this.body=e,this.springLength=i,this.springConstant=n,this.distanceSolver=new sd}var e=Math.sqrt,i=Math.pow,n=Math.max,r=Math.min;return sl(t,[{key:"setOptions",value:function(t){t&&(t.springLength&&(this.springLength=t.springLength),t.springConstant&&(this.springConstant=t.springConstant))}},{key:"solve",value:function(t,e){var i=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],o=this.distanceSolver.getDistances(this.body,t,e);this._createL_matrix(o),this._createK_matrix(o),this._createE_matrix();for(var s=0,a=n(1e3,r(10*this.body.nodeIndices.length,6e3)),h=1e9,l=0,u=0,d=0,c=0,f=0;h>.01&&s<a;){s+=1;var p=this._getHighestEnergyNode(i),m=pl(p,4);for(l=m[0],h=m[1],u=m[2],d=m[3],c=h,f=0;c>1&&f<5;){f+=1,this._moveNode(l,u,d);var v=this._getEnergy(l),g=pl(v,3);c=g[0],u=g[1],d=g[2]}}}},{key:"_getHighestEnergyNode",value:function(t){for(var e,i=this.body.nodeIndices,n=this.body.nodes,r=0,o=i[0],s=0,a=0,h=0;h<i.length;h++)if(e=i[h],!1===n[e].predefinedPosition||!0===n[e].isCluster&&!0===t||!0===n[e].options.fixed.x||!0===n[e].options.fixed.y){var l=this._getEnergy(e),u=pl(l,3),d=u[0],c=u[1],f=u[2];r<d&&(r=d,o=e,s=c,a=f)}return[o,r,s,a]}},{key:"_getEnergy",value:function(t){var n=pl(this.E_sums[t],2),r=n[0],o=n[1];return[e(i(r,2)+i(o,2)),r,o]}},{key:"_moveNode",value:function(t,e,n){for(var r,o=this.body.nodeIndices,s=this.body.nodes,a=0,h=0,l=0,u=s[t].x,d=s[t].y,c=this.K_matrix[t],f=this.L_matrix[t],p=0;p<o.length;p++)if((r=o[p])!==t){var m=s[r].x,v=s[r].y,g=c[r],y=f[r],b=1/i(i(u-m,2)+i(d-v,2),1.5);a+=g*(1-y*i(d-v,2)*b),h+=g*(y*(u-m)*(d-v)*b),l+=g*(1-y*i(u-m,2)*b)}var _=a,w=h,x=e,S=l,k=(x/_+n/w)/(w/_-S/w);s[t].x+=-(w*k+x)/_,s[t].y+=k,this._updateE_matrix(t)}},{key:"_createL_matrix",value:function(t){var e=this.body.nodeIndices,i=this.springLength;this.L_matrix=[];for(var n=0;n<e.length;n++){this.L_matrix[e[n]]={};for(var r=0;r<e.length;r++)this.L_matrix[e[n]][e[r]]=i*t[e[n]][e[r]]}}},{key:"_createK_matrix",value:function(t){var e=this.body.nodeIndices,n=this.springConstant;this.K_matrix=[];for(var r=0;r<e.length;r++){this.K_matrix[e[r]]={};for(var o=0;o<e.length;o++)this.K_matrix[e[r]][e[o]]=n*i(t[e[r]][e[o]],-2)}}},{key:"_createE_matrix",value:function(){var t=this.body.nodeIndices,n=this.body.nodes;this.E_matrix={},this.E_sums={};for(var r=0;r<t.length;r++)this.E_matrix[t[r]]=[];for(var o=0;o<t.length;o++){for(var s,a=t[o],h=n[a].x,l=n[a].y,u=0,d=0,c=o;c<t.length;c++)if((s=t[c])!==a){var f=n[s].x,p=n[s].y,m=1/e(i(h-f,2)+i(l-p,2));this.E_matrix[a][c]=[this.K_matrix[a][s]*(h-f-this.L_matrix[a][s]*(h-f)*m),this.K_matrix[a][s]*(l-p-this.L_matrix[a][s]*(l-p)*m)],this.E_matrix[s][o]=this.E_matrix[a][c],u+=this.E_matrix[a][c][0],d+=this.E_matrix[a][c][1]}this.E_sums[a]=[u,d]}}},{key:"_updateE_matrix",value:function(t){for(var n,r=this.body.nodeIndices,o=this.body.nodes,s=this.E_matrix[t],a=this.K_matrix[t],h=this.L_matrix[t],l=o[t].x,u=o[t].y,d=0,c=0,f=0;f<r.length;f++)if((n=r[f])!==t){var p=s[f],m=p[0],v=p[1],g=o[n].x,y=o[n].y,b=1/e(i(l-g,2)+i(u-y,2)),_=a[n]*(l-g-h[n]*(l-g)*b),w=a[n]*(u-y-h[n]*(u-y)*b);s[f]=[_,w],d+=_,c+=w;var x=this.E_sums[n];x[0]+=_-m,x[1]+=w-v}this.E_sums[t]=[d,c]}}]),t}();ua(wi.prototype),wi.prototype.setOptions=function(t){var e=this;if(null===t&&(t=void 0),void 0!==t){if(!0===ql.validate(t,nd)&&console.log("%cErrors have been found in the supplied options object.",$l),Os.selectiveDeepExtend(["locale","locales","clickToUse"],this.options,t),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),void 0!==t.groups&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(!this.configurator&&(this.configurator=new Ku(this,this.body.container,rd,this.canvas.pixelRatio)),this.configurator.setOptions(t.configure)),this.configurator&&!0===this.configurator.options.enabled){var i={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};Os.deepExtend(i.nodes,this.nodesHandler.options),Os.deepExtend(i.edges,this.edgesHandler.options),Os.deepExtend(i.layout,this.layoutEngine.options),Os.deepExtend(i.interaction,this.selectionHandler.options),Os.deepExtend(i.interaction,this.renderer.options),Os.deepExtend(i.interaction,this.interactionHandler.options),Os.deepExtend(i.manipulation,this.manipulation.options),Os.deepExtend(i.physics,this.physics.options),Os.deepExtend(i.global,this.canvas.options),Os.deepExtend(i.global,this.options),this.configurator.setModuleOptions(i)}void 0===t.clickToUse?this.body.emitter.emit("activate"):!0===t.clickToUse?void 0===this.activator&&(this.activator=new nl(this.canvas.frame),this.activator.on("change",function(){e.body.emitter.emit("activate")})):(void 0!==this.activator&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}},wi.prototype._updateVisibleIndices=function(){var t=this.body.nodes,e=this.body.edges;for(var i in this.body.nodeIndices=[],this.body.edgeIndices=[],t)t.hasOwnProperty(i)&&(this.clustering._isClusteredNode(i)||!1!==t[i].options.hidden||this.body.nodeIndices.push(t[i].id));for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],o=t[r.fromId],s=t[r.toId],a=!this.clustering._isClusteredEdge(n)&&!1===r.options.hidden&&void 0!==o&&void 0!==s&&!1===o.options.hidden&&!1===s.options.hidden;a&&this.body.edgeIndices.push(r.id)}},wi.prototype.bindEventListeners=function(){var t=this;this.body.emitter.on("_dataChanged",function(){t.edgesHandler._updateState(),t.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",function(){t.clustering._updateState(),t._updateVisibleIndices(),t._updateValueRange(t.body.nodes),t._updateValueRange(t.body.edges),t.body.emitter.emit("startSimulation"),t.body.emitter.emit("_requestRedraw")})},wi.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.log("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var e=Sa.DOTToGraph(t.dot);return void this.setData(e)}if(t&&t.gephi){console.log("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var i=le(t.gephi);return void this.setData(i)}this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")},wi.prototype.destroy=function(){for(var t in this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images,this.body.nodes)this.body.nodes.hasOwnProperty(t)&&delete this.body.nodes[t];for(var e in this.body.edges)this.body.edges.hasOwnProperty(e)&&delete this.body.edges[e];Os.recursiveDOMDelete(this.body.container)},wi.prototype._updateValueRange=function(t){var e,i=void 0,n=void 0,r=0;for(e in t)if(t.hasOwnProperty(e)){var o=t[e].getValue();void 0!==o&&(i=void 0===i?o:Math.min(o,i),n=void 0===n?o:Math.max(o,n),r+=o)}if(void 0!==i&&void 0!==n)for(e in t)t.hasOwnProperty(e)&&t[e].setValueRange(i,n,r)},wi.prototype.isActive=function(){return!this.activator||this.activator.active},wi.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)},wi.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)},wi.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)},wi.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)},wi.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)},wi.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)},wi.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)},wi.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)},wi.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)},wi.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)},wi.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)},wi.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)},wi.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)},wi.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)},wi.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)},wi.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)},wi.prototype.editNodeMode=function(){return console.log("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)},wi.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)},wi.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)},wi.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)},wi.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)},wi.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)},wi.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)},wi.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)},wi.prototype.getConnectedNodes=function(t){return void 0===this.body.nodes[t]?this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments):this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments)},wi.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)},wi.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)},wi.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)},wi.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)},wi.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)},wi.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)},wi.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodes.apply(this.selectionHandler,arguments)},wi.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdges.apply(this.selectionHandler,arguments)},wi.prototype.getNodeAt=function(){var t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},wi.prototype.getEdgeAt=function(){var t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},wi.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)},wi.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)},wi.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.redraw()},wi.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)},wi.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)},wi.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)},wi.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)},wi.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)},wi.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)},wi.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)},wi.prototype.getOptionsFromConfigurator=function(){var t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};var hd=Ft(function(t,e){e.prepareElements=function(t){for(var e in t)t.hasOwnProperty(e)&&(t[e].redundant=t[e].used,t[e].used=[])},e.cleanupElements=function(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e].redundant){for(var i=0;i<t[e].redundant.length;i++)t[e].redundant[i].parentNode.removeChild(t[e].redundant[i]);t[e].redundant=[]}},e.resetElements=function(t){e.prepareElements(t),e.cleanupElements(t),e.prepareElements(t)},e.getSVGElement=function(t,e,i){var n;return e.hasOwnProperty(t)?0<e[t].redundant.length?(n=e[t].redundant[0],e[t].redundant.shift()):(n=document.createElementNS("http://www.w3.org/2000/svg",t),i.appendChild(n)):(n=document.createElementNS("http://www.w3.org/2000/svg",t),e[t]={used:[],redundant:[]},i.appendChild(n)),e[t].used.push(n),n},e.getDOMElement=function(t,e,i,n){var r;return e.hasOwnProperty(t)?0<e[t].redundant.length?(r=e[t].redundant[0],e[t].redundant.shift()):(r=document.createElement(t),void 0===n?i.appendChild(r):i.insertBefore(r,n)):(r=document.createElement(t),e[t]={used:[],redundant:[]},void 0===n?i.appendChild(r):i.insertBefore(r,n)),e[t].used.push(r),r},e.drawPoint=function(t,i,n,r,o,s){var a;if("circle"==n.style?(a=e.getSVGElement("circle",r,o),a.setAttributeNS(null,"cx",t),a.setAttributeNS(null,"cy",i),a.setAttributeNS(null,"r",.5*n.size)):(a=e.getSVGElement("rect",r,o),a.setAttributeNS(null,"x",t-.5*n.size),a.setAttributeNS(null,"y",i-.5*n.size),a.setAttributeNS(null,"width",n.size),a.setAttributeNS(null,"height",n.size)),void 0!==n.styles&&a.setAttributeNS(null,"style",n.styles),a.setAttributeNS(null,"class",n.className+" vis-point"),s){var h=e.getSVGElement("text",r,o);s.xOffset&&(t+=s.xOffset),s.yOffset&&(i+=s.yOffset),s.content&&(h.textContent=s.content),s.className&&h.setAttributeNS(null,"class",s.className+" vis-label"),h.setAttributeNS(null,"x",t),h.setAttributeNS(null,"y",i)}return a},e.drawBar=function(t,i,n,r,o,s,a,h){if(0!=r){0>r&&(r*=-1,i-=r);var l=e.getSVGElement("rect",s,a);l.setAttributeNS(null,"x",t-.5*n),l.setAttributeNS(null,"y",i),l.setAttributeNS(null,"width",n),l.setAttributeNS(null,"height",r),l.setAttributeNS(null,"class",o),h&&l.setAttributeNS(null,"style",h)}}}),ld=hd.prepareElements,ud=hd.cleanupElements,dd=hd.resetElements,cd=hd.getSVGElement,fd=hd.getDOMElement,pd=hd.drawPoint,md=hd.drawBar,vd=Object.freeze({default:hd,__moduleExports:hd,prepareElements:ld,cleanupElements:ud,resetElements:dd,getSVGElement:cd,getDOMElement:fd,drawPoint:pd,drawBar:md}),gd=Ft(function(t){var e=Math.round,i=Math.pow,n=Math.max,r=Math.abs,o=Math.min,s=Math.floor,a=Math.ceil;!function(e,i){t.exports=function(){function h(){return qe.apply(null,arguments)}function l(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function u(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function d(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function c(t){return void 0===t}function f(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function p(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function m(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function v(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function g(t,e){for(var i in e)v(e,i)&&(t[i]=e[i]);return v(e,"toString")&&(t.toString=e.toString),v(e,"valueOf")&&(t.valueOf=e.valueOf),t}function y(t,e,i,n){return re(t,e,i,n,!0).utc()}function b(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function _(t){return null==t._pf&&(t._pf=b()),t._pf}function w(t){if(null==t._isValid){var e=_(t),i=Xe.call(e.parsedDateParts,function(t){return null!=t}),n=!isNaN(t._d.getTime())&&0>e.overflow&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i);if(t._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function x(t){var e=y(NaN);return null==t?_(e).userInvalidated=!0:g(_(e),t),e}function S(t,e){var i,n,r;if(c(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),c(e._i)||(t._i=e._i),c(e._f)||(t._f=e._f),c(e._l)||(t._l=e._l),c(e._strict)||(t._strict=e._strict),c(e._tzm)||(t._tzm=e._tzm),c(e._isUTC)||(t._isUTC=e._isUTC),c(e._offset)||(t._offset=e._offset),c(e._pf)||(t._pf=_(e)),c(e._locale)||(t._locale=e._locale),0<Ze.length)for(i=0;i<Ze.length;i++)n=Ze[i],r=e[n],c(r)||(t[n]=r);return t}function k(t){S(this,t),this._d=new Date(null==t._d?NaN:t._d.getTime()),this.isValid()||(this._d=new Date(NaN)),!1===Ke&&(Ke=!0,h.updateOffset(this),Ke=!1)}function E(t){return t instanceof k||null!=t&&null!=t._isAMomentObject}function M(t){return 0>t?a(t)||0:s(t)}function T(t){var e=+t,i=0;return 0!=e&&isFinite(e)&&(i=M(e)),i}function C(t,e,i){var n,s=o(t.length,e.length),a=r(t.length-e.length),h=0;for(n=0;n<s;n++)(i&&t[n]!==e[n]||!i&&T(t[n])!==T(e[n]))&&h++;return h+a}function O(t){!1===h.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function P(t,e){var i=!0;return g(function(){if(null!=h.deprecationHandler&&h.deprecationHandler(null,t),i){for(var n,r=[],o=0;o<arguments.length;o++){if(n="","object"==typeof arguments[o]){for(var s in n+="\n["+o+"] ",arguments[0])n+=s+": "+arguments[0][s]+", ";n=n.slice(0,-2)}else n=arguments[o];r.push(n)}O(t+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack),i=!1}return e.apply(this,arguments)},e)}function A(t,e){null!=h.deprecationHandler&&h.deprecationHandler(t,e),Qe[t]||(O(e),Qe[t]=!0)}function D(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function I(t){var e,i;for(i in t)e=t[i],D(e)?this[i]=e:this["_"+i]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function R(t,e){var i,n=g({},t);for(i in e)v(e,i)&&(u(t[i])&&u(e[i])?(n[i]={},g(n[i],t[i]),g(n[i],e[i])):null==e[i]?delete n[i]:n[i]=e[i]);for(i in t)v(t,i)&&!v(e,i)&&u(t[i])&&(n[i]=g({},n[i]));return n}function L(t){null!=t&&this.set(t)}function N(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return D(n)?n.call(e,i):n}function F(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function z(t,e){var i=t.toLowerCase();ei[i]=ei[i+"s"]=ei[e]=t}function B(t){return"string"==typeof t?ei[t]||ei[t.toLowerCase()]:void 0}function j(t){var e,i,n={};for(i in t)v(t,i)&&(e=B(i))&&(n[e]=t[i]);return n}function U(t,e){ii[t]=e}function H(t){var e=[];for(var i in t)e.push({unit:i,priority:ii[i]});return e.sort(function(t,e){return t.priority-e.priority}),e}function V(t,e,o){var s=""+r(t),a=e-s.length;return(0<=t?o?"+":"":"-")+i(10,n(0,a)).toString().substr(1)+s}function G(t,e,i,n){var r=n;"string"==typeof n&&(r=function(){return this[n]()}),t&&(si[t]=r),e&&(si[e[0]]=function(){return V(r.apply(this,arguments),e[1],e[2])}),i&&(si[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function W(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function Y(t){var e,i,n=t.match(ni);for(e=0,i=n.length;e<i;e++)n[e]=si[n[e]]?si[n[e]]:W(n[e]);return function(e){var r,o="";for(r=0;r<i;r++)o+=D(n[r])?n[r].call(e,t):n[r];return o}}function $(t,e){return t.isValid()?(e=q(e,t.localeData()),oi[e]=oi[e]||Y(e),oi[e](t)):t.localeData().invalidDate()}function q(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(ri.lastIndex=0;0<=n&&ri.test(t);)t=t.replace(ri,i),ri.lastIndex=0,n-=1;return t}function X(t,e,i){ki[t]=D(e)?e:function(t){return t&&i?i:e}}function Z(t,e){return v(ki,t)?ki[t](e._strict,e._locale):new RegExp(K(t))}function K(t){return Q(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,r){return e||i||n||r}))}function Q(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function J(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),f(e)&&(n=function(t,i){i[e]=T(t)}),i=0;i<t.length;i++)Ei[t[i]]=n}function tt(t,e){J(t,function(t,i,n,r){n._w=n._w||{},e(t,n._w,n,r)})}function et(t,e,i){null!=e&&v(Ei,t)&&Ei[t](e,i._a,i,t)}function it(t){return nt(t)?366:365}function nt(t){return 0==t%4&&0!=t%100||0==t%400}function rt(t,e){return function(i){return null==i?ot(this,t):(st(this,t,i),h.updateOffset(this,e),this)}}function ot(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function st(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&nt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),lt(i,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function at(t,e){if("object"==typeof t){t=j(t);for(var i=H(t),n=0;n<i.length;n++)this[i[n].unit](t[i[n].unit])}else if(t=B(t),D(this[t]))return this[t](e);return this}function ht(t,e){return(t%e+e)%e}function lt(t,e){if(isNaN(t)||isNaN(e))return NaN;var i=ht(e,12);return t+=(e-i)/12,1===i?nt(t)?29:28:31-i%7%2}function ut(t,e,i){var n,r,o,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;12>n;++n)o=y([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(o,"").toLocaleLowerCase();return i?"MMM"===e?(r=Mi.call(this._shortMonthsParse,s),-1===r?null:r):(r=Mi.call(this._longMonthsParse,s),-1===r?null:r):"MMM"===e?-1!==(r=Mi.call(this._shortMonthsParse,s))?r:(r=Mi.call(this._longMonthsParse,s),-1===r?null:r):-1!==(r=Mi.call(this._longMonthsParse,s))?r:(r=Mi.call(this._shortMonthsParse,s),-1===r?null:r)}function dt(t,e,i){var n,r,o;if(this._monthsParseExact)return ut.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(r=y([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function ct(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=T(e);else if(e=t.localeData().monthsParse(e),!f(e))return t;return i=o(t.date(),lt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function ft(t){return null==t?ot(this,"Month"):(ct(this,t),h.updateOffset(this,!0),this)}function pt(){function t(t,e){return e.length-t.length}var e,i,n=[],r=[],o=[];for(e=0;12>e;e++)i=y([2e3,e]),n.push(this.monthsShort(i,"")),r.push(this.months(i,"")),o.push(this.months(i,"")),o.push(this.monthsShort(i,""));for(n.sort(t),r.sort(t),o.sort(t),e=0;12>e;e++)n[e]=Q(n[e]),r[e]=Q(r[e]);for(e=0;24>e;e++)o[e]=Q(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function mt(t,e,i,n,r,o,s){var a;return 100>t&&0<=t?(a=new Date(t+400,e,i,n,r,o,s),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,i,n,r,o,s),a}function vt(t){var e;if(100>t&&0<=t){var i=Array.prototype.slice.call(arguments);i[0]=t+400,e=new Date(Date.UTC.apply(null,i)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)}else e=new Date(Date.UTC.apply(null,arguments));return e}function gt(t,e,i){var n=7+e-i;return-(7+vt(t,0,n).getUTCDay()-e)%7+n-1}function yt(t,e,i,n,r){var o,s,a=gt(t,n,r),h=1+7*(e-1)+(7+i-n)%7+a;return 0>=h?(o=t-1,s=it(o)+h):h>it(t)?(o=t+1,s=h-it(t)):(o=t,s=h),{year:o,dayOfYear:s}}function bt(t,e,i){var n,r,o=gt(t.year(),e,i),a=s((t.dayOfYear()-o-1)/7)+1;return 1>a?(r=t.year()-1,n=a+_t(r,e,i)):a>_t(t.year(),e,i)?(n=a-_t(t.year(),e,i),r=t.year()+1):(r=t.year(),n=a),{week:n,year:r}}function _t(t,e,i){var n=gt(t,e,i),r=gt(t+1,e,i);return(it(t)-n+r)/7}function wt(t,e){return"string"==typeof t?isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10):t}function xt(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function St(t,e){return t.slice(e,7).concat(t.slice(0,e))}function kt(t,e,i){var n,r,o,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;7>n;++n)o=y([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(o,"").toLocaleLowerCase();return i?"dddd"===e?(r=Mi.call(this._weekdaysParse,s),-1===r?null:r):"ddd"===e?(r=Mi.call(this._shortWeekdaysParse,s),-1===r?null:r):(r=Mi.call(this._minWeekdaysParse,s),-1===r?null:r):"dddd"===e?-1!==(r=Mi.call(this._weekdaysParse,s))?r:-1!==(r=Mi.call(this._shortWeekdaysParse,s))?r:(r=Mi.call(this._minWeekdaysParse,s),-1===r?null:r):"ddd"===e?-1!==(r=Mi.call(this._shortWeekdaysParse,s))?r:-1!==(r=Mi.call(this._weekdaysParse,s))?r:(r=Mi.call(this._minWeekdaysParse,s),-1===r?null:r):-1!==(r=Mi.call(this._minWeekdaysParse,s))?r:-1!==(r=Mi.call(this._weekdaysParse,s))?r:(r=Mi.call(this._shortWeekdaysParse,s),-1===r?null:r)}function Et(t,e,i){var n,r,o;if(this._weekdaysParseExact)return kt.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;7>n;n++){if(r=y([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}}function Mt(){function t(t,e){return e.length-t.length}var e,i,n,r,o,s=[],a=[],h=[],l=[];for(e=0;7>e;e++)i=y([2e3,1]).day(e),n=this.weekdaysMin(i,""),r=this.weekdaysShort(i,""),o=this.weekdays(i,""),s.push(n),a.push(r),h.push(o),l.push(n),l.push(r),l.push(o);for(s.sort(t),a.sort(t),h.sort(t),l.sort(t),e=0;7>e;e++)a[e]=Q(a[e]),h[e]=Q(h[e]),l[e]=Q(l[e]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Tt(){return this.hours()%12||12}function Ct(t,e){G(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Ot(t,e){return e._meridiemParse}function Pt(t){return t?t.toLowerCase().replace("_","-"):t}function At(t){for(var e,i,n,r,o=0;o<t.length;){for(r=Pt(t[o]).split("-"),e=r.length,i=Pt(t[o+1]),i=i?i.split("-"):null;0<e;){if(n=Dt(r.slice(0,e).join("-")))return n;if(i&&i.length>=e&&C(r,i,!0)>=e-1)break;e--}o++}return Ai}function Dt(e){var i=null;if(!Li[e]&&t&&t.exports)try{i=Ai._abbr,Nt("./locale/"+e),It(i)}catch(e){}return Li[e]}function It(t,e){var i;return t&&(i=c(e)?Lt(t):Rt(t,e),i?Ai=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Ai._abbr}function Rt(t,e){if(null!==e){var i,n=Ri;if(e.abbr=t,null!=Li[t])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Li[t]._config;else if(null!=e.parentLocale)if(null!=Li[e.parentLocale])n=Li[e.parentLocale]._config;else{if(null==(i=Dt(e.parentLocale)))return Ni[e.parentLocale]||(Ni[e.parentLocale]=[]),Ni[e.parentLocale].push({name:t,config:e}),null;n=i._config}return Li[t]=new L(R(n,e)),Ni[t]&&Ni[t].forEach(function(t){Rt(t.name,t.config)}),It(t),Li[t]}return delete Li[t],null}function Lt(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Ai;if(!l(t)){if(e=Dt(t))return e;t=[t]}return At(t)}function Ft(){return Je(Li)}function zt(t){var e,i=t._a;return i&&-2===_(t).overflow&&(e=0>i[1]||11<i[1]?1:1>i[2]||i[2]>lt(i[0],i[1])?2:0>i[3]||24<i[3]||24===i[3]&&(0!==i[4]||0!==i[5]||0!==i[6])?3:0>i[4]||59<i[4]?4:0>i[5]||59<i[5]?5:0>i[6]||999<i[6]?6:-1,_(t)._overflowDayOfYear&&(0>e||2<e)&&(e=2),_(t)._overflowWeeks&&-1===e&&(e=7),_(t)._overflowWeekday&&-1===e&&(e=8),_(t).overflow=e),t}function Bt(t,e,i){return null==t?null==e?i:e:t}function jt(t){var e=new Date(h.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Ut(t){var e,i,n,r,o,s=[];if(!t._d){for(n=jt(t),t._w&&null==t._a[2]&&null==t._a[1]&&Ht(t),null!=t._dayOfYear&&(o=Bt(t._a[0],n[0]),(t._dayOfYear>it(o)||0===t._dayOfYear)&&(_(t)._overflowDayOfYear=!0),i=vt(o,0,t._dayOfYear),t._a[1]=i.getUTCMonth(),t._a[2]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=s[e]=n[e];for(;7>e;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?vt:mt).apply(null,s),r=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&"undefined"!=typeof t._w.d&&t._w.d!==r&&(_(t).weekdayMismatch=!0)}}function Ht(t){var e,i,n,r,o,s,a,h;if(e=t._w,null!=e.GG||null!=e.W||null!=e.E)o=1,s=4,i=Bt(e.GG,t._a[0],bt(oe(),1,4).year),n=Bt(e.W,1),(1>(r=Bt(e.E,1))||7<r)&&(h=!0);else{o=t._locale._week.dow,s=t._locale._week.doy;var l=bt(oe(),o,s);i=Bt(e.gg,t._a[0],l.year),n=Bt(e.w,l.week),null==e.d?null==e.e?r=o:(r=e.e+o,(0>e.e||6<e.e)&&(h=!0)):(0>(r=e.d)||6<r)&&(h=!0)}1>n||n>_t(i,o,s)?_(t)._overflowWeeks=!0:null==h?(a=yt(i,n,r,o,s),t._a[0]=a.year,t._dayOfYear=a.dayOfYear):_(t)._overflowWeekday=!0}function Vt(t){var e,i,n,r,o,s,a=t._i,h=Fi.exec(a)||zi.exec(a);if(h){for(_(t).iso=!0,e=0,i=ji.length;e<i;e++)if(ji[e][1].exec(h[1])){r=ji[e][0],n=!1!==ji[e][2];break}if(null==r)return void(t._isValid=!1);if(h[3]){for(e=0,i=Ui.length;e<i;e++)if(Ui[e][1].exec(h[3])){o=(h[2]||" ")+Ui[e][0];break}if(null==o)return void(t._isValid=!1)}if(!n&&null!=o)return void(t._isValid=!1);if(h[4]){if(!Bi.exec(h[4]))return void(t._isValid=!1);s="Z"}t._f=r+(o||"")+(s||""),Kt(t)}else t._isValid=!1}function Gt(t,e,i,n,r,o){var s=[Wt(t),Oi.indexOf(e),parseInt(i,10),parseInt(n,10),parseInt(r,10)];return o&&s.push(parseInt(o,10)),s}function Wt(t){var e=parseInt(t,10);return 49>=e?2e3+e:999>=e?1900+e:e}function Yt(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function $t(t,e,i){if(t){if(Pi.indexOf(t)!==new Date(e[0],e[1],e[2]).getDay())return _(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}function qt(t,e,i){if(t)return Gi[t];if(e)return 0;var n=parseInt(i,10),r=n%100;return(n-r)/100*60+r}function Xt(t){var e=Vi.exec(Yt(t._i));if(e){var i=Gt(e[4],e[3],e[2],e[5],e[6],e[7]);if(!$t(e[1],i,t))return;t._a=i,t._tzm=qt(e[8],e[9],e[10]),t._d=vt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),_(t).rfc2822=!0}else t._isValid=!1}function Zt(t){var e=Hi.exec(t._i);if(null!==e)return void(t._d=new Date(+e[1]));Vt(t),!1===t._isValid&&(delete t._isValid,Xt(t),!1===t._isValid&&(delete t._isValid,h.createFromInputFallback(t)))}function Kt(t){if(t._f===h.ISO_8601)return void Vt(t);if(t._f===h.RFC_2822)return void Xt(t);t._a=[],_(t).empty=!0;var e,i,n,r,o,s=""+t._i,a=s.length,l=0;for(n=q(t._f,t._locale).match(ni)||[],e=0;e<n.length;e++)r=n[e],i=(s.match(Z(r,t))||[])[0],i&&(o=s.substr(0,s.indexOf(i)),0<o.length&&_(t).unusedInput.push(o),s=s.slice(s.indexOf(i)+i.length),l+=i.length),si[r]?(i?_(t).empty=!1:_(t).unusedTokens.push(r),et(r,i,t)):t._strict&&!i&&_(t).unusedTokens.push(r);_(t).charsLeftOver=a-l,0<s.length&&_(t).unusedInput.push(s),12>=t._a[3]&&!0===_(t).bigHour&&0<t._a[3]&&(_(t).bigHour=void 0),_(t).parsedDateParts=t._a.slice(0),_(t).meridiem=t._meridiem,t._a[3]=Qt(t._locale,t._a[3],t._meridiem),Ut(t),zt(t)}function Qt(t,e,i){var n;return null==i?e:null==t.meridiemHour?null==t.isPM?e:(n=t.isPM(i),n&&12>e&&(e+=12),n||12!==e||(e=0),e):t.meridiemHour(e,i)}function Jt(t){var e,i,n,r,o;if(0===t._f.length)return _(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)o=0,e=S({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],Kt(e),!!w(e)&&(o+=_(e).charsLeftOver,o+=10*_(e).unusedTokens.length,_(e).score=o,(null==n||o<n)&&(n=o,i=e));g(t,i||e)}function te(t){if(!t._d){var e=j(t._i);t._a=m([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),Ut(t)}}function ee(t){var e=new k(zt(ie(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function ie(t){var e=t._i,i=t._f;return t._locale=t._locale||Lt(t._l),null===e||void 0===i&&""===e?x({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),E(e)?new k(zt(e)):(p(e)?t._d=e:l(i)?Jt(t):i?Kt(t):ne(t),w(t)||(t._d=null),t))}function ne(t){var e=t._i;c(e)?t._d=new Date(h.now()):p(e)?t._d=new Date(e.valueOf()):"string"==typeof e?Zt(t):l(e)?(t._a=m(e.slice(0),function(t){return parseInt(t,10)}),Ut(t)):u(e)?te(t):f(e)?t._d=new Date(e):h.createFromInputFallback(t)}function re(t,e,i,n,r){var o={};return(!0===i||!1===i)&&(n=i,i=void 0),(u(t)&&d(t)||l(t)&&0===t.length)&&(t=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=i,o._i=t,o._f=e,o._strict=n,ee(o)}function oe(t,e,i,n){return re(t,e,i,n,!1)}function se(t,e){var i,n;if(1===e.length&&l(e[0])&&(e=e[0]),!e.length)return oe();for(i=e[0],n=1;n<e.length;++n)(!e[n].isValid()||e[n][t](i))&&(i=e[n]);return i}function ae(t){for(var e in t)if(-1===Mi.call($i,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var i=!1,n=0;n<$i.length;++n)if(t[$i[n]]){if(i)return!1;parseFloat(t[$i[n]])!==T(t[$i[n]])&&(i=!0)}return!0}function he(t){var e=j(t),i=e.year||0,n=e.quarter||0,r=e.month||0,o=e.week||e.isoWeek||0,s=e.day||0,a=e.hour||0,h=e.minute||0,l=e.second||0,u=e.millisecond||0;this._isValid=ae(e),this._milliseconds=+u+1e3*l+6e4*h+1e3*a*60*60,this._days=+s+7*o,this._months=+r+3*n+12*i,this._data={},this._locale=Lt(),this._bubble()}function le(t){return t instanceof he}function ue(t){return 0>t?-1*e(-1*t):e(t)}function de(t,e){G(t,0,0,function(){var t=this.utcOffset(),i="+";return 0>t&&(t=-t,i="-"),i+V(~~(t/60),2)+e+V(~~t%60,2)})}function ce(t,e){var i=(e||"").match(t);if(null===i)return null;var n=i[i.length-1]||[],r=(n+"").match(qi)||["-",0,0],o=60*r[1]+T(r[2]);return 0===o?0:"+"===r[0]?o:-o}function fe(t,e){var i,n;return e._isUTC?(i=e.clone(),n=(E(t)||p(t)?t.valueOf():oe(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+n),h.updateOffset(i,!1),i):oe(t).local()}function pe(t){return 15*-e(t._d.getTimezoneOffset()/15)}function me(){if(!c(this._isDSTShifted))return this._isDSTShifted;var t={};if(S(t,this),t=ie(t),t._a){var e=t._isUTC?y(t._a):oe(t._a);this._isDSTShifted=this.isValid()&&0<C(t._a,e.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted}function ve(){return!!this.isValid()&&this._isUTC&&0===this._offset}function ge(t,e){var i,n,r,o=t,s=null;return le(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:f(t)?(o={},e?o[e]=t:o.milliseconds=t):(s=Xi.exec(t))?(i="-"===s[1]?-1:1,o={y:0,d:T(s[2])*i,h:T(s[3])*i,m:T(s[4])*i,s:T(s[5])*i,ms:T(ue(1e3*s[6]))*i}):(s=Zi.exec(t))?(i="-"===s[1]?-1:1,o={y:ye(s[2],i),M:ye(s[3],i),w:ye(s[4],i),d:ye(s[5],i),h:ye(s[6],i),m:ye(s[7],i),s:ye(s[8],i)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=_e(oe(o.from),oe(o.to)),o={},o.ms=r.milliseconds,o.M=r.months),n=new he(o),le(t)&&v(t,"_locale")&&(n._locale=t._locale),n}function ye(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function be(t,e){var i={};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function _e(t,e){var i;return t.isValid()&&e.isValid()?(e=fe(e,t),t.isBefore(e)?i=be(t,e):(i=be(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function we(t,e){return function(i,n){var r,o;return null===n||isNaN(+n)||(A(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=i,i=n,n=o),i="string"==typeof i?+i:i,r=ge(i,n),xe(this,r,t),this}}function xe(t,e,i,n){var r=e._milliseconds,o=ue(e._days),s=ue(e._months);t.isValid()&&(n=null==n||n,s&&ct(t,ot(t,"Month")+s*i),o&&st(t,"Date",ot(t,"Date")+o*i),r&&t._d.setTime(t._d.valueOf()+r*i),n&&h.updateOffset(t,o||s))}function Se(t,e){var i,n,r=12*(e.year()-t.year())+(e.month()-t.month()),o=t.clone().add(r,"months");return 0>e-o?(i=t.clone().add(r-1,"months"),n=(e-o)/(o-i)):(i=t.clone().add(r+1,"months"),n=(e-o)/(i-o)),-(r+n)||0}function ke(t){var e;return void 0===t?this._locale._abbr:(e=Lt(t),null!=e&&(this._locale=e),this)}function Ee(){return this._locale}function Me(t,e){return(t%e+e)%e}function Te(t,e,i){return 100>t&&0<=t?new Date(t+400,e,i)-126227808e5:new Date(t,e,i).valueOf()}function Ce(t,e,i){return 100>t&&0<=t?Date.UTC(t+400,e,i)-126227808e5:Date.UTC(t,e,i)}function Oe(t,e){G(0,[t,t.length],0,e)}function Pe(t,e,i,n,r){var o;return null==t?bt(this,n,r).year:(o=_t(t,n,r),e>o&&(e=o),Ae.call(this,t,e,i,n,r))}function Ae(t,e,i,n,r){var o=yt(t,e,i,n,r),s=vt(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function De(t,e){e[6]=T(1e3*("0."+t))}function Ie(t){return t}function Re(t,e,i,n){var r=Lt(),o=y().set(n,e);return r[i](o,t)}function Le(t,e,i){if(f(t)&&(e=t,t=void 0),t=t||"",null!=e)return Re(t,e,i,"month");var n,r=[];for(n=0;12>n;n++)r[n]=Re(t,n,i,"month");return r}function Ne(t,e,i,n){"boolean"==typeof t?(f(e)&&(i=e,e=void 0),e=e||""):(e=t,i=e,t=!1,f(e)&&(i=e,e=void 0),e=e||"");var r=Lt(),o=t?r._week.dow:0;if(null!=i)return Re(e,(i+o)%7,n,"day");var s,a=[];for(s=0;7>s;s++)a[s]=Re(e,(s+o)%7,n,"day");return a}function Fe(t,e,i,n){var r=ge(e,i);return t._milliseconds+=n*r._milliseconds,t._days+=n*r._days,t._months+=n*r._months,t._bubble()}function ze(t){return 0>t?s(t):a(t)}function Be(t){return 4800*t/146097}function je(t){return 146097*t/4800}function Ue(t){return function(){return this.as(t)}}function He(t){return function(){return this.isValid()?this._data[t]:NaN}}function Ve(t,e,i,n,r){return r.relativeTime(e||1,!!i,t,n)}function Ge(t,e,i){var n=ge(t).abs(),r=En(n.as("s")),o=En(n.as("m")),s=En(n.as("h")),a=En(n.as("d")),h=En(n.as("M")),l=En(n.as("y")),u=r<=Mn.ss&&["s",r]||r<Mn.s&&["ss",r]||1>=o&&["m"]||o<Mn.m&&["mm",o]||1>=s&&["h"]||s<Mn.h&&["hh",s]||1>=a&&["d"]||a<Mn.d&&["dd",a]||1>=h&&["M"]||h<Mn.M&&["MM",h]||1>=l&&["y"]||["yy",l];return u[2]=e,u[3]=0<+t,u[4]=i,Ve.apply(null,u)}function We(t){return void 0===t?En:"function"==typeof t&&(En=t,!0)}function Ye(t){return(0<t)-(0>t)||+t}function $e(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i,n=Tn(this._milliseconds)/1e3,r=Tn(this._days),o=Tn(this._months);t=M(n/60),e=M(t/60),n%=60,t%=60,i=M(o/12),o%=12;var s=i,a=o,h=r,l=e,u=t,d=n?n.toFixed(3).replace(/\.?0+$/,""):"",c=this.asSeconds();if(!c)return"P0D";var f=0>c?"-":"",p=Ye(this._months)===Ye(c)?"":"-",m=Ye(this._days)===Ye(c)?"":"-",v=Ye(this._milliseconds)===Ye(c)?"":"-";return f+"P"+(s?p+s+"Y":"")+(a?p+a+"M":"")+(h?m+h+"D":"")+(l||u||d?"T":"")+(l?v+l+"H":"")+(u?v+u+"M":"")+(d?v+d+"S":"")}var qe,Xe;Xe=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,n=0;n<i;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var Ze=h.momentProperties=[],Ke=!1,Qe={};h.suppressDeprecationWarnings=!1,h.deprecationHandler=null;var Je=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)v(t,e)&&i.push(e);return i},ti=/\d{1,2}/,ei={},ii={},ni=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ri=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,oi={},si={},ai=/\d/,hi=/\d\d/,li=/\d{3}/,ui=/\d{4}/,di=/[+-]?\d{6}/,ci=/\d\d?/,fi=/\d\d\d\d?/,pi=/\d\d\d\d\d\d?/,mi=/\d{1,3}/,vi=/\d{1,4}/,gi=/[+-]?\d{1,6}/,yi=/\d+/,bi=/[+-]?\d+/,_i=/Z|[+-]\d\d:?\d\d/gi,wi=/Z|[+-]\d\d(?::?\d\d)?/gi,xi=/[+-]?\d+(\.\d{1,3})?/,Si=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ki={},Ei={};G("Y",0,0,function(){var t=this.year();return 9999>=t?""+t:"+"+t}),G(0,["YY",2],0,function(){return this.year()%100}),G(0,["YYYY",4],0,"year"),G(0,["YYYYY",5],0,"year"),G(0,["YYYYYY",6,!0],0,"year"),z("year","y"),U("year",1),X("Y",bi),X("YY",ci,hi),X("YYYY",vi,ui),X("YYYYY",gi,di),X("YYYYYY",gi,di),J(["YYYYY","YYYYYY"],0),J("YYYY",function(t,e){e[0]=2===t.length?h.parseTwoDigitYear(t):T(t)}),J("YY",function(t,e){e[0]=h.parseTwoDigitYear(t)}),J("Y",function(t,e){e[0]=parseInt(t,10)}),h.parseTwoDigitYear=function(t){return T(t)+(68<T(t)?1900:2e3)};var Mi,Ti=rt("FullYear",!0);Mi=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},G("M",["MM",2],"Mo",function(){return this.month()+1}),G("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),G("MMMM",0,0,function(t){return this.localeData().months(this,t)}),z("month","M"),U("month",8),X("M",ci),X("MM",ci,hi),X("MMM",function(t,e){return e.monthsShortRegex(t)}),X("MMMM",function(t,e){return e.monthsRegex(t)}),J(["M","MM"],function(t,e){e[1]=T(t)-1}),J(["MMM","MMMM"],function(t,e,i,n){var r=i._locale.monthsParse(t,n,i._strict);null==r?_(i).invalidMonth=t:e[1]=r});var Ci=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Oi=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];G("w",["ww",2],"wo","week"),G("W",["WW",2],"Wo","isoWeek"),z("week","w"),z("isoWeek","W"),U("week",5),U("isoWeek",5),X("w",ci),X("ww",ci,hi),X("W",ci),X("WW",ci,hi),tt(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=T(t)}),G("d",0,"do","day"),G("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),G("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),G("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),G("e",0,0,"weekday"),G("E",0,0,"isoWeekday"),z("day","d"),z("weekday","e"),z("isoWeekday","E"),U("day",11),U("weekday",11),U("isoWeekday",11),X("d",ci),X("e",ci),X("E",ci),X("dd",function(t,e){return e.weekdaysMinRegex(t)}),X("ddd",function(t,e){return e.weekdaysShortRegex(t)}),X("dddd",function(t,e){return e.weekdaysRegex(t)}),tt(["dd","ddd","dddd"],function(t,e,i,n){var r=i._locale.weekdaysParse(t,n,i._strict);null==r?_(i).invalidWeekday=t:e.d=r}),tt(["d","e","E"],function(t,e,i,n){e[n]=T(t)});var Pi=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];G("H",["HH",2],0,"hour"),G("h",["hh",2],0,Tt),G("k",["kk",2],0,function(){return this.hours()||24}),G("hmm",0,0,function(){return""+Tt.apply(this)+V(this.minutes(),2)}),G("hmmss",0,0,function(){return""+Tt.apply(this)+V(this.minutes(),2)+V(this.seconds(),2)}),G("Hmm",0,0,function(){return""+this.hours()+V(this.minutes(),2)}),G("Hmmss",0,0,function(){return""+this.hours()+V(this.minutes(),2)+V(this.seconds(),2)}),Ct("a",!0),Ct("A",!1),z("hour","h"),U("hour",13),X("a",Ot),X("A",Ot),X("H",ci),X("h",ci),X("k",ci),X("HH",ci,hi),X("hh",ci,hi),X("kk",ci,hi),X("hmm",fi),X("hmmss",pi),X("Hmm",fi),X("Hmmss",pi),J(["H","HH"],3),J(["k","kk"],function(t,e){var i=T(t);e[3]=24===i?0:i}),J(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),J(["h","hh"],function(t,e,i){e[3]=T(t),_(i).bigHour=!0}),J("hmm",function(t,e,i){var n=t.length-2;e[3]=T(t.substr(0,n)),e[4]=T(t.substr(n)),_(i).bigHour=!0}),J("hmmss",function(t,e,i){var n=t.length-4,r=t.length-2;e[3]=T(t.substr(0,n)),e[4]=T(t.substr(n,2)),e[5]=T(t.substr(r)),_(i).bigHour=!0}),J("Hmm",function(t,e){var i=t.length-2;e[3]=T(t.substr(0,i)),e[4]=T(t.substr(i))}),J("Hmmss",function(t,e){var i=t.length-4,n=t.length-2;e[3]=T(t.substr(0,i)),e[4]=T(t.substr(i,2)),e[5]=T(t.substr(n))});var Ai,Di=/[ap]\.?m?\.?/i,Ii=rt("Hours",!0),Ri={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:ti,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:Oi,week:{dow:0,doy:6},weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekdaysShort:Pi,meridiemParse:Di},Li={},Ni={},Fi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,zi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Bi=/Z|[+-]\d\d(?::?\d\d)?/,ji=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ui=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Hi=/^\/?Date\((\-?\d+)/i,Vi=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Gi={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};h.createFromInputFallback=P("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),h.ISO_8601=function(){},h.RFC_2822=function(){};var Wi=P("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=oe.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:x()}),Yi=P("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=oe.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:x()}),$i=["year","quarter","month","week","day","hour","minute","second","millisecond"];de("Z",":"),de("ZZ",""),X("Z",wi),X("ZZ",wi),J(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=ce(wi,t)});var qi=/([\+\-]|\d\d)/gi;h.updateOffset=function(){};var Xi=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Zi=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;ge.fn=he.prototype,ge.invalid=function(){return ge(NaN)};var Ki=we(1,"add"),Qi=we(-1,"subtract");h.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",h.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ji=P("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});G(0,["gg",2],0,function(){return this.weekYear()%100}),G(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Oe("gggg","weekYear"),Oe("ggggg","weekYear"),Oe("GGGG","isoWeekYear"),Oe("GGGGG","isoWeekYear"),z("weekYear","gg"),z("isoWeekYear","GG"),U("weekYear",1),U("isoWeekYear",1),X("G",bi),X("g",bi),X("GG",ci,hi),X("gg",ci,hi),X("GGGG",vi,ui),X("gggg",vi,ui),X("GGGGG",gi,di),X("ggggg",gi,di),tt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=T(t)}),tt(["gg","GG"],function(t,e,i,n){e[n]=h.parseTwoDigitYear(t)}),G("Q",0,"Qo","quarter"),z("quarter","Q"),U("quarter",7),X("Q",ai),J("Q",function(t,e){e[1]=3*(T(t)-1)}),G("D",["DD",2],"Do","date"),z("date","D"),U("date",9),X("D",ci),X("DD",ci,hi),X("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),J(["D","DD"],2),J("Do",function(t,e){e[2]=T(t.match(ci)[0])});var tn=rt("Date",!0);G("DDD",["DDDD",3],"DDDo","dayOfYear"),z("dayOfYear","DDD"),U("dayOfYear",4),X("DDD",mi),X("DDDD",li),J(["DDD","DDDD"],function(t,e,i){i._dayOfYear=T(t)}),G("m",["mm",2],0,"minute"),z("minute","m"),U("minute",14),X("m",ci),X("mm",ci,hi),J(["m","mm"],4);var en=rt("Minutes",!1);G("s",["ss",2],0,"second"),z("second","s"),U("second",15),X("s",ci),X("ss",ci,hi),J(["s","ss"],5);var nn=rt("Seconds",!1);G("S",0,0,function(){return~~(this.millisecond()/100)}),G(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),G(0,["SSS",3],0,"millisecond"),G(0,["SSSS",4],0,function(){return 10*this.millisecond()}),G(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),G(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),G(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),G(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),G(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),z("millisecond","ms"),U("millisecond",16),X("S",mi,ai),X("SS",mi,hi),X("SSS",mi,li);var rn;for(rn="SSSS";9>=rn.length;rn+="S")X(rn,yi);for(rn="S";9>=rn.length;rn+="S")J(rn,De);var on=rt("Milliseconds",!1);G("z",0,0,"zoneAbbr"),G("zz",0,0,"zoneName");var sn=k.prototype;sn.add=Ki,sn.calendar=function(t,e){var i=t||oe(),n=fe(i,this).startOf("day"),r=h.calendarFormat(this,n)||"sameElse",o=e&&(D(e[r])?e[r].call(this,i):e[r]);return this.format(o||this.localeData().calendar(r,this,oe(i)))},sn.clone=function(){return new k(this)},sn.diff=function(t,e,i){var n,r,o;return this.isValid()?(n=fe(t,this),n.isValid()?(r=6e4*(n.utcOffset()-this.utcOffset()),e=B(e),o="year"===e?Se(this,n)/12:"month"===e?Se(this,n):"quarter"===e?Se(this,n)/3:"second"===e?(this-n)/1e3:"minute"===e?(this-n)/6e4:"hour"===e?(this-n)/36e5:"day"===e?(this-n-r)/864e5:"week"===e?(this-n-r)/6048e5:this-n,i?o:M(o)):NaN):NaN},sn.endOf=function(t){var e;if(void 0===(t=B(t))||"millisecond"===t||!this.isValid())return this;var i=this._isUTC?Ce:Te;return"year"===t?e=i(this.year()+1,0,1)-1:"quarter"===t?e=i(this.year(),this.month()-this.month()%3+3,1)-1:"month"===t?e=i(this.year(),this.month()+1,1)-1:"week"===t?e=i(this.year(),this.month(),this.date()-this.weekday()+7)-1:"isoWeek"===t?e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1:"day"===t||"date"===t?e=i(this.year(),this.month(),this.date()+1)-1:"hour"===t?(e=this._d.valueOf(),e+=36e5-Me(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1):"minute"===t?(e=this._d.valueOf(),e+=6e4-Me(e,6e4)-1):"second"===t&&(e=this._d.valueOf(),e+=1e3-Me(e,1e3)-1),this._d.setTime(e),h.updateOffset(this,!0),this},sn.format=function(t){t||(t=this.isUtc()?h.defaultFormatUtc:h.defaultFormat);var e=$(this,t);return this.localeData().postformat(e)},sn.from=function(t,e){return this.isValid()&&(E(t)&&t.isValid()||oe(t).isValid())?ge({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},sn.fromNow=function(t){return this.from(oe(),t)},sn.to=function(t,e){return this.isValid()&&(E(t)&&t.isValid()||oe(t).isValid())?ge({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},sn.toNow=function(t){return this.to(oe(),t)},sn.get=function(t){return t=B(t),D(this[t])?this[t]():this},sn.invalidAt=function(){return _(this).overflow},sn.isAfter=function(t,e){var i=E(t)?t:oe(t);return!(!this.isValid()||!i.isValid())&&(e=B(e)||"millisecond","millisecond"===e?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())},sn.isBefore=function(t,e){var i=E(t)?t:oe(t);return!(!this.isValid()||!i.isValid())&&(e=B(e)||"millisecond","millisecond"===e?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())},sn.isBetween=function(t,e,i,n){var r=E(t)?t:oe(t),o=E(e)?e:oe(e);return!!(this.isValid()&&r.isValid()&&o.isValid())&&(n=n||"()",("("===n[0]?this.isAfter(r,i):!this.isBefore(r,i))&&(")"===n[1]?this.isBefore(o,i):!this.isAfter(o,i)))},sn.isSame=function(t,e){var i,n=E(t)?t:oe(t);return!(!this.isValid()||!n.isValid())&&(e=B(e)||"millisecond","millisecond"===e?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))},sn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},sn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},sn.isValid=function(){return w(this)},sn.lang=Ji,sn.locale=ke,sn.localeData=Ee,sn.max=Yi,sn.min=Wi,sn.parsingFlags=function(){return g({},_(this))},sn.set=at,sn.startOf=function(t){var e;if(void 0===(t=B(t))||"millisecond"===t||!this.isValid())return this;var i=this._isUTC?Ce:Te;return"year"===t?e=i(this.year(),0,1):"quarter"===t?e=i(this.year(),this.month()-this.month()%3,1):"month"===t?e=i(this.year(),this.month(),1):"week"===t?e=i(this.year(),this.month(),this.date()-this.weekday()):"isoWeek"===t?e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)):"day"===t||"date"===t?e=i(this.year(),this.month(),this.date()):"hour"===t?(e=this._d.valueOf(),e-=Me(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)):"minute"===t?(e=this._d.valueOf(),e-=Me(e,6e4)):"second"===t&&(e=this._d.valueOf(),e-=Me(e,1e3)),this._d.setTime(e),h.updateOffset(this,!0),this},sn.subtract=Qi,sn.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},sn.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},sn.toDate=function(){return new Date(this.valueOf())},sn.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,i=e?this.clone().utc():this;return 0>i.year()||9999<i.year()?$(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):D(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",$(i,"Z")):$(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},sn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var i="["+t+'("]',n=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY",r=e+'[")]';return this.format(i+n+"-MM-DD[T]HH:mm:ss.SSS"+r)},sn.toJSON=function(){return this.isValid()?this.toISOString():null},sn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},sn.unix=function(){return s(this.valueOf()/1e3)},sn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},sn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},sn.year=Ti,sn.isLeapYear=function(){return nt(this.year())},sn.weekYear=function(t){return Pe.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},sn.isoWeekYear=function(t){return Pe.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},sn.quarter=sn.quarters=function(t){return null==t?a((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},sn.month=ft,sn.daysInMonth=function(){return lt(this.year(),this.month())},sn.week=sn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},sn.isoWeek=sn.isoWeeks=function(t){var e=bt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},sn.weeksInYear=function(){var t=this.localeData()._week;return _t(this.year(),t.dow,t.doy)},sn.isoWeeksInYear=function(){return _t(this.year(),1,4)},sn.date=tn,sn.day=sn.days=function(t){if(!this.isValid())return null==t?NaN:this;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==t?e:(t=wt(t,this.localeData()),this.add(t-e,"d"))},sn.weekday=function(t){if(!this.isValid())return null==t?NaN:this;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},sn.isoWeekday=function(t){if(!this.isValid())return null==t?NaN:this;if(null!=t){var e=xt(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},sn.dayOfYear=function(t){var i=e((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?i:this.add(t-i,"d")},sn.hour=sn.hours=Ii,sn.minute=sn.minutes=en,sn.second=sn.seconds=nn,sn.millisecond=sn.milliseconds=on,sn.utcOffset=function(t,e,i){var n,o=this._offset||0;if(!this.isValid())return null==t?NaN:this;if(null!=t){if("string"!=typeof t)16>r(t)&&!i&&(t*=60);else if(null===(t=ce(wi,t)))return this;return!this._isUTC&&e&&(n=pe(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),o!==t&&(!e||this._changeInProgress?xe(this,ge(t-o,"m"),1,!1):!this._changeInProgress&&(this._changeInProgress=!0,h.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:pe(this)},sn.utc=function(t){return this.utcOffset(0,t)},sn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(pe(this),"m")),this},sn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=ce(_i,this._i);null==t?this.utcOffset(0,!0):this.utcOffset(t)}return this},sn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?oe(t).utcOffset():0,0==(this.utcOffset()-t)%60)},sn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},sn.isLocal=function(){return!!this.isValid()&&!this._isUTC},sn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},sn.isUtc=ve,sn.isUTC=ve,sn.zoneAbbr=function(){return this._isUTC?"UTC":""},sn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},sn.dates=P("dates accessor is deprecated. Use date instead.",tn),sn.months=P("months accessor is deprecated. Use month instead",ft),sn.years=P("years accessor is deprecated. Use year instead",Ti),sn.zone=P("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return null==t?-this.utcOffset():("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this)}),sn.isDSTShifted=P("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",me);var an=L.prototype;an.calendar=N,an.longDateFormat=F,an.invalidDate=function(){return this._invalidDate},an.ordinal=function(t){return this._ordinal.replace("%d",t)},an.preparse=Ie,an.postformat=Ie,an.relativeTime=function(t,e,i,n){var r=this._relativeTime[i];return D(r)?r(t,e,i,n):r.replace(/%d/i,t)},an.pastFuture=function(t,e){var i=this._relativeTime[0<t?"future":"past"];return D(i)?i(e):i.replace(/%s/i,e)},an.set=I,an.months=function(t,e){return t?l(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Ci).test(e)?"format":"standalone"][t.month()]:l(this._months)?this._months:this._months.standalone},an.monthsShort=function(t,e){return t?l(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Ci.test(e)?"format":"standalone"][t.month()]:l(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},an.monthsParse=dt,an.monthsRegex=function(t){return this._monthsParseExact?(v(this,"_monthsRegex")||pt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(v(this,"_monthsRegex")||(this._monthsRegex=Si),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},an.monthsShortRegex=function(t){return this._monthsParseExact?(v(this,"_monthsRegex")||pt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(v(this,"_monthsShortRegex")||(this._monthsShortRegex=Si),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},an.week=function(t){return bt(t,this._week.dow,this._week.doy).week},an.firstDayOfYear=function(){return this._week.doy},an.firstDayOfWeek=function(){return this._week.dow},an.weekdays=function(t,e){var i=l(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?St(i,this._week.dow):t?i[t.day()]:i},an.weekdaysMin=function(t){return!0===t?St(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},an.weekdaysShort=function(t){return!0===t?St(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},an.weekdaysParse=Et,an.weekdaysRegex=function(t){return this._weekdaysParseExact?(v(this,"_weekdaysRegex")||Mt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(v(this,"_weekdaysRegex")||(this._weekdaysRegex=Si),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},an.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(v(this,"_weekdaysRegex")||Mt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(v(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Si),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},an.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(v(this,"_weekdaysRegex")||Mt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(v(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Si),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},an.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},an.meridiem=function(t,e,i){return 11<t?i?"pm":"PM":i?"am":"AM"},It("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===T(t%100/10)?"th":1==e?"st":2==e?"nd":3==e?"rd":"th")}}),h.lang=P("moment.lang is deprecated. Use moment.locale instead.",It),h.langData=P("moment.langData is deprecated. Use moment.localeData instead.",Lt);var hn=r,ln=Ue("ms"),un=Ue("s"),dn=Ue("m"),cn=Ue("h"),fn=Ue("d"),pn=Ue("w"),mn=Ue("M"),vn=Ue("Q"),gn=Ue("y"),yn=He("milliseconds"),bn=He("seconds"),_n=He("minutes"),wn=He("hours"),xn=He("days"),Sn=He("months"),kn=He("years"),En=e,Mn={ss:44,s:45,m:45,h:22,d:26,M:11},Tn=r,Cn=he.prototype;return Cn.isValid=function(){return this._isValid},Cn.abs=function(){var t=this._data;return this._milliseconds=hn(this._milliseconds),this._days=hn(this._days),this._months=hn(this._months),t.milliseconds=hn(t.milliseconds),t.seconds=hn(t.seconds),t.minutes=hn(t.minutes),t.hours=hn(t.hours),t.months=hn(t.months),t.years=hn(t.years),this},Cn.add=function(t,e){return Fe(this,t,e,1)},Cn.subtract=function(t,e){return Fe(this,t,e,-1)},Cn.as=function(t){if(!this.isValid())return NaN;var i,n,r=this._milliseconds;if("month"===(t=B(t))||"quarter"===t||"year"===t)switch(i=this._days+r/864e5,n=this._months+Be(i),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(i=this._days+e(je(this._months)),t){case"week":return i/7+r/6048e5;case"day":return i+r/864e5;case"hour":return 24*i+r/36e5;case"minute":return 1440*i+r/6e4;case"second":return 86400*i+r/1e3;case"millisecond":return s(864e5*i)+r;default:throw new Error("Unknown unit "+t)}},Cn.asMilliseconds=ln,Cn.asSeconds=un,Cn.asMinutes=dn,Cn.asHours=cn,Cn.asDays=fn,Cn.asWeeks=pn,Cn.asMonths=mn,Cn.asQuarters=vn,Cn.asYears=gn,Cn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*T(this._months/12):NaN},Cn._bubble=function(){var t,e,i,n,r,o=this._milliseconds,s=this._days,a=this._months,h=this._data;return 0<=o&&0<=s&&0<=a||0>=o&&0>=s&&0>=a||(o+=864e5*ze(je(a)+s),s=0,a=0),h.milliseconds=o%1e3,t=M(o/1e3),h.seconds=t%60,e=M(t/60),h.minutes=e%60,i=M(e/60),h.hours=i%24,s+=M(i/24),r=M(Be(s)),a+=r,s-=ze(je(r)),n=M(a/12),a%=12,h.days=s,h.months=a,h.years=n,this},Cn.clone=function(){return ge(this)},Cn.get=function(t){return t=B(t),this.isValid()?this[t+"s"]():NaN},Cn.milliseconds=yn,Cn.seconds=bn,Cn.minutes=_n,Cn.hours=wn,Cn.days=xn,Cn.weeks=function(){return M(this.days()/7)},Cn.months=Sn,Cn.years=kn,Cn.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),i=Ge(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)},Cn.toISOString=$e,Cn.toString=$e,Cn.toJSON=$e,Cn.locale=ke,Cn.localeData=Ee,Cn.toIsoString=P("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",$e),Cn.lang=Ji,G("X",0,0,"unix"),G("x",0,0,"valueOf"),X("x",bi),X("X",xi),J("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),J("x",function(t,e,i){i._d=new Date(T(t))}),h.version="2.24.0",function(t){qe=t}(oe),h.fn=sn,h.min=function(){return se("isBefore",[].slice.call(arguments,0))},h.max=function(){return se("isAfter",[].slice.call(arguments,0))},h.now=function(){return Date.now?Date.now():+new Date},h.utc=y,h.unix=function(t){return oe(1e3*t)},h.months=function(t,e){return Le(t,e,"months")},h.isDate=p,h.locale=It,h.invalid=x,h.duration=ge,h.isMoment=E,h.weekdays=function(t,e,i){return Ne(t,e,i,"weekdays")},h.parseZone=function(){return oe.apply(null,arguments).parseZone()},h.localeData=Lt,h.isDuration=le,h.monthsShort=function(t,e){return Le(t,e,"monthsShort")},h.weekdaysMin=function(t,e,i){return Ne(t,e,i,"weekdaysMin")},h.defineLocale=Rt,h.updateLocale=function(t,e){if(null!=e){var i,n,r=Ri;n=Dt(t),null!=n&&(r=n._config),e=R(r,e),i=new L(e),i.parentLocale=Li[t],Li[t]=i,It(t)}else null!=Li[t]&&(null==Li[t].parentLocale?null!=Li[t]&&delete Li[t]:Li[t]=Li[t].parentLocale);return Li[t]},h.locales=Ft,h.weekdaysShort=function(t,e,i){return Ne(t,e,i,"weekdaysShort")},h.normalizeUnits=B,h.relativeTimeRounding=We,h.relativeTimeThreshold=function(t,e){return void 0!==Mn[t]&&(void 0===e?Mn[t]:(Mn[t]=e,"s"===t&&(Mn.ss=e-1),!0))},h.calendarFormat=function(t,e){var i=t.diff(e,"days",!0);return-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse"},h.prototype=sn,h.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},h}()}()}),yd="undefined"!=typeof window&&window.moment||gd,bd=Object.freeze({default:yd,__moduleExports:yd}),_d={Images:hl,dotparser:ka,gephiParser:Ea,allOptions:od,convertDot:xa,convertGephi:le},wd=Object.freeze({util:Ps,data:la,network:_d,DOMutil:vd,moment:bd,Hammer:el,keycharm:Ca,DataSet:sa,DataView:aa,Queue:ta,Network:wi});e.default=wd}.call(e,i(6))},function(t,e,i){function n(t,e,i){var n=e&&i||0,r=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){r<16&&(e[n+r++]=l[t])});r<16;)e[n+r++]=0;return e}function r(t,e){var i=e||0,n=h;return n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]}function o(t,e,i){var n=e&&i||0,o=e||[];t=t||{};var s=void 0!==t.clockseq?t.clockseq:f,a=void 0!==t.msecs?t.msecs:(new Date).getTime(),h=void 0!==t.nsecs?t.nsecs:m+1,l=a-p+(h-m)/1e4;if(l<0&&void 0===t.clockseq&&(s=s+1&16383),(l<0||a>p)&&void 0===t.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=a,m=h,f=s,a+=122192928e5;var u=(1e4*(268435455&a)+h)%4294967296;o[n++]=u>>>24&255,o[n++]=u>>>16&255,o[n++]=u>>>8&255,o[n++]=255&u;var d=a/4294967296*1e4&268435455;o[n++]=d>>>8&255,o[n++]=255&d,o[n++]=d>>>24&15|16,o[n++]=d>>>16&255,o[n++]=s>>>8|128,o[n++]=255&s;for(var v=t.node||c,g=0;g<6;g++)o[n+g]=v[g];return e||r(o)}function s(t,e,i){var n=e&&i||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null),t=t||{};var o=t.random||(t.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var s=0;s<16;s++)e[n+s]=o[s];return e||r(o)}for(var a=i(296),h=[],l={},u=0;u<256;u++)h[u]=(u+256).toString(16).substr(1),l[h[u]]=u;var d=a(),c=[1|d[0],d[1],d[2],d[3],d[4],d[5]],f=16383&(d[6]<<8|d[7]),p=0,m=0,v=s;v.v1=o,v.v4=s,v.parse=n,v.unparse=r,t.exports=v},function(t,e,i){(function(e){var i,n=e.crypto||e.msCrypto;if(n&&n.getRandomValues){var r=new Uint8Array(16);i=function(){return n.getRandomValues(r),r}}if(!i){var o=new Array(16);i=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}t.exports=i}).call(e,i(6))},function(t,e,i){"use strict";function n(){}function r(){}var o=i(298);r.resetWarningCache=n,t.exports=function(){function t(t,e,i,n,r,s){if(s!==o){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var i={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:r,resetWarningCache:n};return i.PropTypes=i,i}},function(t,e,i){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,i){"use strict";!function(e,i){t.exports=i()}(0,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=123)}([function(t,e,i){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,i){e.__esModule=!0;var n=i(169),r=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,r.default)(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}()},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i,n){var r=!1;!0===n&&(r=null===e[i]&&void 0!==t[i]),r?delete t[i]:t[i]=e[i]}var o=i(77),s=n(o),a=i(29),h=n(a),l=i(8),u=n(l),d=i(6),c=n(d),f=i(9),p=i(157);e.isNumber=function(t){return t instanceof Number||"number"==typeof t},e.recursiveDOMDelete=function(t){if(t)for(;!0===t.hasChildNodes();)e.recursiveDOMDelete(t.firstChild),t.removeChild(t.firstChild)},e.giveRange=function(t,e,i,n){if(e==t)return.5;var r=1/(e-t);return Math.max(0,(n-t)*r)},e.isString=function(t){return t instanceof String||"string"==typeof t},e.isDate=function(t){if(t instanceof Date)return!0;if(e.isString(t)){if(m.exec(t))return!0;if(!isNaN(Date.parse(t)))return!0}return!1},e.randomUUID=function(){return p.v4()},e.assignAllKeys=function(t,e){for(var i in t)t.hasOwnProperty(i)&&"object"!==(0,c.default)(t[i])&&(t[i]=e)},e.fillIfDefined=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var o in t)void 0!==i[o]&&(null===i[o]||"object"!==(0,c.default)(i[o])?r(t,i,o,n):"object"===(0,c.default)(t[o])&&e.fillIfDefined(t[o],i[o],n))},e.extend=function(t,e){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t},e.selectiveExtend=function(t,e,i){if(!Array.isArray(t))throw new Error("Array with property names expected as first argument");for(var n=2;n<arguments.length;n++)for(var r=arguments[n],o=0;o<t.length;o++){var s=t[o];r&&r.hasOwnProperty(s)&&(e[s]=r[s])}return e},e.selectiveDeepExtend=function(t,i,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Array.isArray(n))throw new TypeError("Arrays are not supported by deepExtend");for(var s=0;s<t.length;s++){var a=t[s];if(n.hasOwnProperty(a))if(n[a]&&n[a].constructor===Object)void 0===i[a]&&(i[a]={}),i[a].constructor===Object?e.deepExtend(i[a],n[a],!1,o):r(i,n,a,o);else{if(Array.isArray(n[a]))throw new TypeError("Arrays are not supported by deepExtend");r(i,n,a,o)}}return i},e.selectiveNotDeepExtend=function(t,i,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Array.isArray(n))throw new TypeError("Arrays are not supported by deepExtend");for(var s in n)if(n.hasOwnProperty(s)&&-1===t.indexOf(s))if(n[s]&&n[s].constructor===Object)void 0===i[s]&&(i[s]={}),i[s].constructor===Object?e.deepExtend(i[s],n[s]):r(i,n,s,o);else if(Array.isArray(n[s])){i[s]=[];for(var a=0;a<n[s].length;a++)i[s].push(n[s][a])}else r(i,n,s,o);return i},e.deepExtend=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var s in i)if(i.hasOwnProperty(s)||!0===n)if(i[s]&&i[s].constructor===Object)void 0===t[s]&&(t[s]={}),t[s].constructor===Object?e.deepExtend(t[s],i[s],n):r(t,i,s,o);else if(Array.isArray(i[s])){t[s]=[];for(var a=0;a<i[s].length;a++)t[s].push(i[s][a])}else r(t,i,s,o);return t},e.equalArray=function(t,e){if(t.length!=e.length)return!1;for(var i=0,n=t.length;i<n;i++)if(t[i]!=e[i])return!1;return!0},e.convert=function(t,i){var n;if(void 0!==t){if(null===t)return null;if(!i)return t;if("string"!==typeof i&&!(i instanceof String))throw new Error("Type must be a string");switch(i){case"boolean":case"Boolean":return Boolean(t);case"number":case"Number":return e.isString(t)&&!isNaN(Date.parse(t))?f(t).valueOf():Number(t.valueOf());case"string":case"String":return String(t);case"Date":if(e.isNumber(t))return new Date(t);if(t instanceof Date)return new Date(t.valueOf());if(f.isMoment(t))return new Date(t.valueOf());if(e.isString(t))return n=m.exec(t),n?new Date(Number(n[1])):f(new Date(t)).toDate();throw new Error("Cannot convert object of type "+e.getType(t)+" to type Date");case"Moment":if(e.isNumber(t))return f(t);if(t instanceof Date)return f(t.valueOf());if(f.isMoment(t))return f(t);if(e.isString(t))return n=m.exec(t),f(n?Number(n[1]):t);throw new Error("Cannot convert object of type "+e.getType(t)+" to type Date");case"ISODate":if(e.isNumber(t))return new Date(t);if(t instanceof Date)return t.toISOString();if(f.isMoment(t))return t.toDate().toISOString();if(e.isString(t))return n=m.exec(t),n?new Date(Number(n[1])).toISOString():f(t).format();throw new Error("Cannot convert object of type "+e.getType(t)+" to type ISODate");case"ASPDate":if(e.isNumber(t))return"/Date("+t+")/";if(t instanceof Date)return"/Date("+t.valueOf()+")/";if(e.isString(t)){n=m.exec(t);return"/Date("+(n?new Date(Number(n[1])).valueOf():new Date(t).valueOf())+")/"}throw new Error("Cannot convert object of type "+e.getType(t)+" to type ASPDate");default:throw new Error('Unknown type "'+i+'"')}}};var m=/^\/?Date\((\-?\d+)/i;e.getType=function(t){var e="undefined"===typeof t?"undefined":(0,c.default)(t);return"object"==e?null===t?"null":t instanceof Boolean?"Boolean":t instanceof Number?"Number":t instanceof String?"String":Array.isArray(t)?"Array":t instanceof Date?"Date":"Object":"number"==e?"Number":"boolean"==e?"Boolean":"string"==e?"String":void 0===e?"undefined":e},e.copyAndExtendArray=function(t,e){for(var i=[],n=0;n<t.length;n++)i.push(t[n]);return i.push(e),i},e.copyArray=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e},e.getAbsoluteLeft=function(t){return t.getBoundingClientRect().left},e.getAbsoluteRight=function(t){return t.getBoundingClientRect().right},e.getAbsoluteTop=function(t){return t.getBoundingClientRect().top},e.addClassName=function(t,e){var i=t.className.split(" "),n=e.split(" ");i=i.concat(n.filter(function(t){return i.indexOf(t)<0})),t.className=i.join(" ")},e.removeClassName=function(t,e){var i=t.className.split(" "),n=e.split(" ");i=i.filter(function(t){return n.indexOf(t)<0}),t.className=i.join(" ")},e.forEach=function(t,e){var i,n;if(Array.isArray(t))for(i=0,n=t.length;i<n;i++)e(t[i],i,t);else for(i in t)t.hasOwnProperty(i)&&e(t[i],i,t)},e.toArray=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e},e.updateProperty=function(t,e,i){return t[e]!==i&&(t[e]=i,!0)},e.throttle=function(t){var e=!1;return function(){e||(e=!0,requestAnimationFrame(function(){e=!1,t()}))}},e.addEventListener=function(t,e,i,n){t.addEventListener?(void 0===n&&(n=!1),"mousewheel"===e&&navigator.userAgent.indexOf("Firefox")>=0&&(e="DOMMouseScroll"),t.addEventListener(e,i,n)):t.attachEvent("on"+e,i)},e.removeEventListener=function(t,e,i,n){t.removeEventListener?(void 0===n&&(n=!1),"mousewheel"===e&&navigator.userAgent.indexOf("Firefox")>=0&&(e="DOMMouseScroll"),t.removeEventListener(e,i,n)):t.detachEvent("on"+e,i)},e.preventDefault=function(t){t||(t=window.event),t.preventDefault?t.preventDefault():t.returnValue=!1},e.getTarget=function(t){t||(t=window.event);var e;return t.target?e=t.target:t.srcElement&&(e=t.srcElement),void 0!=e.nodeType&&3==e.nodeType&&(e=e.parentNode),e},e.hasParent=function(t,e){for(var i=t;i;){if(i===e)return!0;i=i.parentNode}return!1},e.option={},e.option.asBoolean=function(t,e){return"function"==typeof t&&(t=t()),null!=t?0!=t:e||null},e.option.asNumber=function(t,e){return"function"==typeof t&&(t=t()),null!=t?Number(t)||e||null:e||null},e.option.asString=function(t,e){return"function"==typeof t&&(t=t()),null!=t?String(t):e||null},e.option.asSize=function(t,i){return"function"==typeof t&&(t=t()),e.isString(t)?t:e.isNumber(t)?t+"px":i||null},e.option.asElement=function(t,e){return"function"==typeof t&&(t=t()),t||e||null},e.hexToRGB=function(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,e,i,n){return e+e+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null},e.overrideOpacity=function(t,i){var n;return-1!=t.indexOf("rgba")?t:-1!=t.indexOf("rgb")?(n=t.substr(t.indexOf("(")+1).replace(")","").split(","),"rgba("+n[0]+","+n[1]+","+n[2]+","+i+")"):(n=e.hexToRGB(t),null==n?t:"rgba("+n.r+","+n.g+","+n.b+","+i+")")},e.RGBToHex=function(t,e,i){return"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},e.parseColor=function(t){var i;if(!0===e.isString(t)){if(!0===e.isValidRGB(t)){var n=t.substr(4).substr(0,t.length-5).split(",").map(function(t){return parseInt(t)});t=e.RGBToHex(n[0],n[1],n[2])}if(!0===e.isValidHex(t)){var r=e.hexToHSV(t),o={h:r.h,s:.8*r.s,v:Math.min(1,1.02*r.v)},s={h:r.h,s:Math.min(1,1.25*r.s),v:.8*r.v},a=e.HSVToHex(s.h,s.s,s.v),h=e.HSVToHex(o.h,o.s,o.v);i={background:t,border:a,highlight:{background:h,border:a},hover:{background:h,border:a}}}else i={background:t,border:t,highlight:{background:t,border:t},hover:{background:t,border:t}}}else i={},i.background=t.background||void 0,i.border=t.border||void 0,e.isString(t.highlight)?i.highlight={border:t.highlight,background:t.highlight}:(i.highlight={},i.highlight.background=t.highlight&&t.highlight.background||void 0,i.highlight.border=t.highlight&&t.highlight.border||void 0),e.isString(t.hover)?i.hover={border:t.hover,background:t.hover}:(i.hover={},i.hover.background=t.hover&&t.hover.background||void 0,i.hover.border=t.hover&&t.hover.border||void 0);return i},e.RGBToHSV=function(t,e,i){t/=255,e/=255,i/=255;var n=Math.min(t,Math.min(e,i)),r=Math.max(t,Math.max(e,i));if(n==r)return{h:0,s:0,v:n};var o=t==n?e-i:i==n?t-e:i-t;return{h:60*((t==n?3:i==n?1:5)-o/(r-n))/360,s:(r-n)/r,v:r}};var v={split:function(t){var e={};return t.split(";").forEach(function(t){if(""!=t.trim()){var i=t.split(":"),n=i[0].trim(),r=i[1].trim();e[n]=r}}),e},join:function(t){return(0,u.default)(t).map(function(e){return e+": "+t[e]}).join("; ")}};e.addCssText=function(t,i){var n=v.split(t.style.cssText),r=v.split(i),o=e.extend(n,r);t.style.cssText=v.join(o)},e.removeCssText=function(t,e){var i=v.split(t.style.cssText),n=v.split(e);for(var r in n)n.hasOwnProperty(r)&&delete i[r];t.style.cssText=v.join(i)},e.HSVToRGB=function(t,e,i){var n,r,o,s=Math.floor(6*t),a=6*t-s,h=i*(1-e),l=i*(1-a*e),u=i*(1-(1-a)*e);switch(s%6){case 0:n=i,r=u,o=h;break;case 1:n=l,r=i,o=h;break;case 2:n=h,r=i,o=u;break;case 3:n=h,r=l,o=i;break;case 4:n=u,r=h,o=i;break;case 5:n=i,r=h,o=l}return{r:Math.floor(255*n),g:Math.floor(255*r),b:Math.floor(255*o)}},e.HSVToHex=function(t,i,n){var r=e.HSVToRGB(t,i,n);return e.RGBToHex(r.r,r.g,r.b)},e.hexToHSV=function(t){var i=e.hexToRGB(t);return e.RGBToHSV(i.r,i.g,i.b)},e.isValidHex=function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},e.isValidRGB=function(t){return t=t.replace(" ",""),/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/i.test(t)},e.isValidRGBA=function(t){return t=t.replace(" ",""),/rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(.{1,3})\)/i.test(t)},e.selectiveBridgeObject=function(t,i){if(null!==i&&"object"===("undefined"===typeof i?"undefined":(0,c.default)(i))){for(var n=(0,h.default)(i),r=0;r<t.length;r++)i.hasOwnProperty(t[r])&&"object"==(0,c.default)(i[t[r]])&&(n[t[r]]=e.bridgeObject(i[t[r]]));return n}return null},e.bridgeObject=function(t){if(null!==t&&"object"===("undefined"===typeof t?"undefined":(0,c.default)(t))){var i=(0,h.default)(t);if(t instanceof Element)i=t;else{i=(0,h.default)(t);for(var n in t)t.hasOwnProperty(n)&&"object"==(0,c.default)(t[n])&&(i[n]=e.bridgeObject(t[n]))}return i}return null},e.insertSort=function(t,e){for(var i=0;i<t.length;i++){for(var n=t[i],r=i;r>0&&e(n,t[r-1])<0;r--)t[r]=t[r-1];t[r]=n}return t},e.mergeOptions=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=function(t){return null!==t&&void 0!==t},o=function(t){return null!==t&&"object"===("undefined"===typeof t?"undefined":(0,c.default)(t))};if(!o(t))throw new Error("Parameter mergeTarget must be an object");if(!o(e))throw new Error("Parameter options must be an object");if(!r(i))throw new Error("Parameter option must have a value");if(!o(n))throw new Error("Parameter globalOptions must be an object");var s=e[i],a=o(n)&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(n),l=a?n[i]:void 0,u=l?l.enabled:void 0;if(void 0!==s){if("boolean"===typeof s)return o(t[i])||(t[i]={}),void(t[i].enabled=s);if(null===s&&!o(t[i])){if(!r(l))return;t[i]=(0,h.default)(l)}if(o(s)){var d=!0;void 0!==s.enabled?d=s.enabled:void 0!==u&&(d=l.enabled),function(t,e,i){o(t[i])||(t[i]={});var n=e[i],r=t[i];for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])}(t,e,i),t[i].enabled=d}}},e.binarySearchCustom=function(t,e,i,n){for(var r=0,o=0,s=t.length-1;o<=s&&r<1e4;){var a=Math.floor((o+s)/2),h=t[a],l=void 0===n?h[i]:h[i][n],u=e(l);if(0==u)return a;-1==u?o=a+1:s=a-1,r++}return-1},e.binarySearchValue=function(t,e,i,n,r){var o,s,a,h,l=0,u=0,d=t.length-1;for(r=void 0!=r?r:function(t,e){return t==e?0:t<e?-1:1};u<=d&&l<1e4;){if(h=Math.floor(.5*(d+u)),o=t[Math.max(0,h-1)][i],s=t[h][i],a=t[Math.min(t.length-1,h+1)][i],0==r(s,e))return h;if(r(o,e)<0&&r(s,e)>0)return"before"==n?Math.max(0,h-1):h;if(r(s,e)<0&&r(a,e)>0)return"before"==n?h:Math.min(t.length-1,h+1);r(s,e)<0?u=h+1:d=h-1,l++}return-1},e.easingFunctions={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}},e.getScrollBarWidth=function(){var t=document.createElement("p");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e);var i=t.offsetWidth;e.style.overflow="scroll";var n=t.offsetWidth;return i==n&&(n=e.clientWidth),document.body.removeChild(e),i-n},e.topMost=function(t,e){var i=void 0;Array.isArray(e)||(e=[e]);var n=!0,r=!1,o=void 0;try{for(var a,h=(0,s.default)(t);!(n=(a=h.next()).done);n=!0){var l=a.value;if(l){i=l[e[0]];for(var u=1;u<e.length;u++)i&&(i=i[e[u]]);if("undefined"!=typeof i)break}}}catch(t){r=!0,o=t}finally{try{!n&&h.return&&h.return()}finally{if(r)throw o}}return i}},function(t,e,i){t.exports={default:i(194),__esModule:!0}},function(t,e,i){e.__esModule=!0;var n=i(6),r=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":(0,r.default)(e))&&"function"!==typeof e?t:e}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(196),o=n(r),s=i(29),a=n(s),h=i(6),l=n(h);e.default=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":(0,l.default)(e)));t.prototype=(0,a.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(142),o=n(r),s=i(144),a=n(s),h="function"===typeof a.default&&"symbol"===typeof o.default?function(t){return typeof t}:function(t){return t&&"function"===typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":typeof t};e.default="function"===typeof a.default&&"symbol"===h(o.default)?function(t){return"undefined"===typeof t?"undefined":h(t)}:function(t){return t&&"function"===typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":"undefined"===typeof t?"undefined":h(t)}},function(t,e){var i=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=i)},function(t,e,i){t.exports={default:i(140),__esModule:!0}},function(t,e,i){t.exports="undefined"!==typeof window&&window.moment||i(154)},function(t,e,i){function n(){var t=function(){};return{on:t,off:t,destroy:t,emit:t,get:function(e){return{set:t}}}}if("undefined"!==typeof window){var r=i(175),o=window.Hammer||i(176);t.exports=r(o,{preventDefault:"mouse"})}else t.exports=function(){return n()}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(t&&!Array.isArray(t)&&(e=t,t=null),this._options=e||{},this._data={},this.length=0,this._fieldId=this._options.fieldId||"id",this._type={},this._options.type)for(var i=(0,u.default)(this._options.type),n=0,r=i.length;n<r;n++){var o=i[n],s=this._options.type[o];this._type[o]="Date"==s||"ISODate"==s||"ASPDate"==s?"Date":s}this._subscribers={},t&&this.add(t),this.setOptions(e)}var o=i(19),s=n(o),a=i(6),h=n(a),l=i(8),u=n(l),d=i(2),c=i(43);r.prototype.setOptions=function(t){t&&void 0!==t.queue&&(!1===t.queue?this._queue&&(this._queue.destroy(),delete this._queue):(this._queue||(this._queue=c.extend(this,{replace:["add","update","remove"]})),"object"===(0,h.default)(t.queue)&&this._queue.setOptions(t.queue)))},r.prototype.on=function(t,e){var i=this._subscribers[t];i||(i=[],this._subscribers[t]=i),i.push({callback:e})},r.prototype.off=function(t,e){var i=this._subscribers[t];i&&(this._subscribers[t]=i.filter(function(t){return t.callback!=e}))},r.prototype._trigger=function(t,e,i){if("*"==t)throw new Error("Cannot trigger event *");var n=[];t in this._subscribers&&(n=n.concat(this._subscribers[t])),"*"in this._subscribers&&(n=n.concat(this._subscribers["*"]));for(var r=0,o=n.length;r<o;r++){var s=n[r];s.callback&&s.callback(t,e,i||null)}},r.prototype.add=function(t,e){var i,n=[],r=this;if(Array.isArray(t))for(var o=0,s=t.length;o<s;o++)i=r._addItem(t[o]),n.push(i);else{if(!t||"object"!==("undefined"===typeof t?"undefined":(0,h.default)(t)))throw new Error("Unknown dataType");i=r._addItem(t),n.push(i)}return n.length&&this._trigger("add",{items:n},e),n},r.prototype.update=function(t,e){var i=[],n=[],r=[],o=[],s=this,a=s._fieldId,l=function(t){var e=t[a];if(s._data[e]){var h=d.extend({},s._data[e]);e=s._updateItem(t),n.push(e),o.push(t),r.push(h)}else e=s._addItem(t),i.push(e)};if(Array.isArray(t))for(var u=0,c=t.length;u<c;u++)t[u]&&"object"===(0,h.default)(t[u])?l(t[u]):console.warn("Ignoring input item, which is not an object at index "+u);else{if(!t||"object"!==("undefined"===typeof t?"undefined":(0,h.default)(t)))throw new Error("Unknown dataType");l(t)}if(i.length&&this._trigger("add",{items:i},e),n.length){var f={items:n,oldData:r,data:o};this._trigger("update",f,e)}return i.concat(n)},r.prototype.get=function(t){var e,i,n,r=this,o=d.getType(arguments[0]);"String"==o||"Number"==o?(e=arguments[0],n=arguments[1]):"Array"==o?(i=arguments[0],n=arguments[1]):n=arguments[0];var s;if(n&&n.returnType){s=-1==["Array","Object"].indexOf(n.returnType)?"Array":n.returnType}else s="Array";var a,h,l,c,f,p=n&&n.type||this._options.type,m=n&&n.filter,v=[];if(void 0!=e)(a=r._getItem(e,p))&&m&&!m(a)&&(a=null);else if(void 0!=i)for(c=0,f=i.length;c<f;c++)a=r._getItem(i[c],p),m&&!m(a)||v.push(a);else for(h=(0,u.default)(this._data),c=0,f=h.length;c<f;c++)l=h[c],a=r._getItem(l,p),m&&!m(a)||v.push(a);if(n&&n.order&&void 0==e&&this._sort(v,n.order),n&&n.fields){var g=n.fields;if(void 0!=e)a=this._filterFields(a,g);else for(c=0,f=v.length;c<f;c++)v[c]=this._filterFields(v[c],g)}if("Object"==s){var y,b={};for(c=0,f=v.length;c<f;c++)y=v[c],b[y.id]=y;return b}return void 0!=e?a:v},r.prototype.getIds=function(t){var e,i,n,r,o,s=this._data,a=t&&t.filter,h=t&&t.order,l=t&&t.type||this._options.type,d=(0,u.default)(s),c=[];if(a)if(h){for(o=[],e=0,i=d.length;e<i;e++)n=d[e],r=this._getItem(n,l),a(r)&&o.push(r);for(this._sort(o,h),e=0,i=o.length;e<i;e++)c.push(o[e][this._fieldId])}else for(e=0,i=d.length;e<i;e++)n=d[e],r=this._getItem(n,l),a(r)&&c.push(r[this._fieldId]);else if(h){for(o=[],e=0,i=d.length;e<i;e++)n=d[e],o.push(s[n]);for(this._sort(o,h),e=0,i=o.length;e<i;e++)c.push(o[e][this._fieldId])}else for(e=0,i=d.length;e<i;e++)n=d[e],r=s[n],c.push(r[this._fieldId]);return c},r.prototype.getDataSet=function(){return this},r.prototype.forEach=function(t,e){var i,n,r,o,s=e&&e.filter,a=e&&e.type||this._options.type,h=this._data,l=(0,u.default)(h);if(e&&e.order){var d=this.get(e);for(i=0,n=d.length;i<n;i++)r=d[i],o=r[this._fieldId],t(r,o)}else for(i=0,n=l.length;i<n;i++)o=l[i],r=this._getItem(o,a),s&&!s(r)||t(r,o)},r.prototype.map=function(t,e){var i,n,r,o,s=e&&e.filter,a=e&&e.type||this._options.type,h=[],l=this._data,d=(0,u.default)(l);for(i=0,n=d.length;i<n;i++)r=d[i],o=this._getItem(r,a),s&&!s(o)||h.push(t(o,r));return e&&e.order&&this._sort(h,e.order),h},r.prototype._filterFields=function(t,e){if(!t)return t;var i,n,r={},o=(0,u.default)(t),s=o.length;if(Array.isArray(e))for(i=0;i<s;i++)n=o[i],-1!=e.indexOf(n)&&(r[n]=t[n]);else for(i=0;i<s;i++)n=o[i],e.hasOwnProperty(n)&&(r[e[n]]=t[n]);return r},r.prototype._sort=function(t,e){if(d.isString(e)){var i=e;t.sort(function(t,e){var n=t[i],r=e[i];return n>r?1:n<r?-1:0})}else{if("function"!==typeof e)throw new TypeError("Order must be a function or a string");t.sort(e)}},r.prototype.remove=function(t,e){var i,n,r,o,s=[],a=[],h=[];for(h=Array.isArray(t)?t:[t],i=0,n=h.length;i<n;i++)(o=this._remove(h[i]))&&void 0!=(r=o[this._fieldId])&&(s.push(r),a.push(o));return s.length&&this._trigger("remove",{items:s,oldData:a},e),s},r.prototype._remove=function(t){var e,i;return d.isNumber(t)||d.isString(t)?i=t:t&&"object"===("undefined"===typeof t?"undefined":(0,h.default)(t))&&(i=t[this._fieldId]),void 0!==i&&this._data[i]?(e=this._data[i],delete this._data[i],this.length--,e):null},r.prototype.clear=function(t){var e,i,n=(0,u.default)(this._data),r=[];for(e=0,i=n.length;e<i;e++)r.push(this._data[n[e]]);return this._data={},this.length=0,this._trigger("remove",{items:n,oldData:r},t),n},r.prototype.max=function(t){var e,i,n=this._data,r=(0,u.default)(n),o=null,s=null;for(e=0,i=r.length;e<i;e++){var a=r[e],h=n[a],l=h[t];null!=l&&(!o||l>s)&&(o=h,s=l)}return o},r.prototype.min=function(t){var e,i,n=this._data,r=(0,u.default)(n),o=null,s=null;for(e=0,i=r.length;e<i;e++){var a=r[e],h=n[a],l=h[t];null!=l&&(!o||l<s)&&(o=h,s=l)}return o},r.prototype.distinct=function(t){var e,i,n,r=this._data,o=(0,u.default)(r),s=[],a=this._options.type&&this._options.type[t]||null,h=0;for(e=0,n=o.length;e<n;e++){var l=o[e],c=r[l],f=c[t],p=!1;for(i=0;i<h;i++)if(s[i]==f){p=!0;break}p||void 0===f||(s[h]=f,h++)}if(a)for(e=0,n=s.length;e<n;e++)s[e]=d.convert(s[e],a);return s},r.prototype._addItem=function(t){var e=t[this._fieldId];if(void 0!=e){if(this._data[e])throw new Error("Cannot add item: item with id "+e+" already exists")}else e=d.randomUUID(),t[this._fieldId]=e;var i,n,r={},o=(0,u.default)(t);for(i=0,n=o.length;i<n;i++){var s=o[i],a=this._type[s];r[s]=d.convert(t[s],a)}return this._data[e]=r,this.length++,e},r.prototype._getItem=function(t,e){var i,n,r,o,s=this._data[t];if(!s)return null;var a={},h=(0,u.default)(s);if(e)for(r=0,o=h.length;r<o;r++)i=h[r],n=s[i],a[i]=d.convert(n,e[i]);else for(r=0,o=h.length;r<o;r++)i=h[r],n=s[i],a[i]=n;return a[this._fieldId]||(a[this._fieldId]=s.id),a},r.prototype._updateItem=function(t){var e=t[this._fieldId];if(void 0==e)throw new Error("Cannot update item: item has no id (item: "+(0,s.default)(t)+")");var i=this._data[e];if(!i)throw new Error("Cannot update item: no item with id "+e+" found");for(var n=(0,u.default)(t),r=0,o=n.length;r<o;r++){var a=n[r],h=this._type[a];i[a]=d.convert(t[a],h)}return e},t.exports=r},function(t,e,i){function n(t,e){this._data=null,this._ids={},this.length=0,this._options=e||{},this._fieldId="id",this._subscribers={};var i=this;this.listener=function(){i._onEvent.apply(i,arguments)},this.setData(t)}var r=i(8),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=i(2),a=i(11);n.prototype.setData=function(t){var e,i,n,r,o;if(this._data){for(this._data.off&&this._data.off("*",this.listener),e=this._data.getIds({filter:this._options&&this._options.filter}),o=[],n=0,r=e.length;n<r;n++)o.push(this._data._data[e[n]]);this._ids={},this.length=0,this._trigger("remove",{items:e,oldData:o})}if(this._data=t,this._data){for(this._fieldId=this._options.fieldId||this._data&&this._data.options&&this._data.options.fieldId||"id",e=this._data.getIds({filter:this._options&&this._options.filter}),n=0,r=e.length;n<r;n++)i=e[n],this._ids[i]=!0;this.length=e.length,this._trigger("add",{items:e}),this._data.on&&this._data.on("*",this.listener)}},n.prototype.refresh=function(){var t,e,i,n=this._data.getIds({filter:this._options&&this._options.filter}),r=(0,o.default)(this._ids),s={},a=[],h=[],l=[];for(e=0,i=n.length;e<i;e++)t=n[e],s[t]=!0,this._ids[t]||(a.push(t),this._ids[t]=!0);for(e=0,i=r.length;e<i;e++)t=r[e],s[t]||(h.push(t),l.push(this._data._data[t]),delete this._ids[t]);this.length+=a.length-h.length,a.length&&this._trigger("add",{items:a}),h.length&&this._trigger("remove",{items:h,oldData:l})},n.prototype.get=function(t){var e,i,n,r=this,o=s.getType(arguments[0]);"String"==o||"Number"==o||"Array"==o?(e=arguments[0],i=arguments[1],n=arguments[2]):(i=arguments[0],n=arguments[1]);var a=s.extend({},this._options,i);this._options.filter&&i&&i.filter&&(a.filter=function(t){return r._options.filter(t)&&i.filter(t)});var h=[];return void 0!=e&&h.push(e),h.push(a),h.push(n),this._data&&this._data.get.apply(this._data,h)},n.prototype.getIds=function(t){var e;if(this._data){var i,n=this._options.filter;i=t&&t.filter?n?function(e){return n(e)&&t.filter(e)}:t.filter:n,e=this._data.getIds({filter:i,order:t&&t.order})}else e=[];return e},n.prototype.map=function(t,e){var i=[];if(this._data){var n,r=this._options.filter;n=e&&e.filter?r?function(t){return r(t)&&e.filter(t)}:e.filter:r,i=this._data.map(t,{filter:n,order:e&&e.order})}else i=[];return i},n.prototype.getDataSet=function(){for(var t=this;t instanceof n;)t=t._data;return t||null},n.prototype._onEvent=function(t,e,i){var n,r,o,s,a=e&&e.items,h=[],l=[],u=[],d=[],c=[],f=[];if(a&&this._data){switch(t){case"add":for(n=0,r=a.length;n<r;n++)o=a[n],(s=this.get(o))&&(this._ids[o]=!0,h.push(o));break;case"update":for(n=0,r=a.length;n<r;n++)o=a[n],s=this.get(o),s?this._ids[o]?(l.push(o),c.push(e.data[n]),d.push(e.oldData[n])):(this._ids[o]=!0,h.push(o)):this._ids[o]&&(delete this._ids[o],u.push(o),f.push(e.oldData[n]));break;case"remove":for(n=0,r=a.length;n<r;n++)o=a[n],this._ids[o]&&(delete this._ids[o],u.push(o),f.push(e.oldData[n]))}this.length+=h.length-u.length,h.length&&this._trigger("add",{items:h},i),l.length&&this._trigger("update",{items:l,oldData:d,data:c},i),u.length&&this._trigger("remove",{items:u,oldData:f},i)}},n.prototype.on=a.prototype.on,n.prototype.off=a.prototype.off,n.prototype._trigger=a.prototype._trigger,n.prototype.subscribe=n.prototype.on,n.prototype.unsubscribe=n.prototype.off,t.exports=n},function(t,e,i){var n=i(57)("wks"),r=i(40),o=i(18).Symbol,s="function"==typeof o;(t.exports=function(t){return n[t]||(n[t]=s&&o[t]||(s?o:r)("Symbol."+t))}).store=n},function(t,e,i){e.prepareElements=function(t){for(var e in t)t.hasOwnProperty(e)&&(t[e].redundant=t[e].used,t[e].used=[])},e.cleanupElements=function(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e].redundant){for(var i=0;i<t[e].redundant.length;i++)t[e].redundant[i].parentNode.removeChild(t[e].redundant[i]);t[e].redundant=[]}},e.resetElements=function(t){e.prepareElements(t),e.cleanupElements(t),e.prepareElements(t)},e.getSVGElement=function(t,e,i){var n;return e.hasOwnProperty(t)?e[t].redundant.length>0?(n=e[t].redundant[0],e[t].redundant.shift()):(n=document.createElementNS("http://www.w3.org/2000/svg",t),i.appendChild(n)):(n=document.createElementNS("http://www.w3.org/2000/svg",t),e[t]={used:[],redundant:[]},i.appendChild(n)),e[t].used.push(n),n},e.getDOMElement=function(t,e,i,n){var r;return e.hasOwnProperty(t)?e[t].redundant.length>0?(r=e[t].redundant[0],e[t].redundant.shift()):(r=document.createElement(t),void 0!==n?i.insertBefore(r,n):i.appendChild(r)):(r=document.createElement(t),e[t]={used:[],redundant:[]},void 0!==n?i.insertBefore(r,n):i.appendChild(r)),e[t].used.push(r),r},e.drawPoint=function(t,i,n,r,o,s){var a;if("circle"==n.style?(a=e.getSVGElement("circle",r,o),a.setAttributeNS(null,"cx",t),a.setAttributeNS(null,"cy",i),a.setAttributeNS(null,"r",.5*n.size)):(a=e.getSVGElement("rect",r,o),a.setAttributeNS(null,"x",t-.5*n.size),a.setAttributeNS(null,"y",i-.5*n.size),a.setAttributeNS(null,"width",n.size),a.setAttributeNS(null,"height",n.size)),void 0!==n.styles&&a.setAttributeNS(null,"style",n.styles),a.setAttributeNS(null,"class",n.className+" vis-point"),s){var h=e.getSVGElement("text",r,o);s.xOffset&&(t+=s.xOffset),s.yOffset&&(i+=s.yOffset),s.content&&(h.textContent=s.content),s.className&&h.setAttributeNS(null,"class",s.className+" vis-label"),h.setAttributeNS(null,"x",t),h.setAttributeNS(null,"y",i)}return a},e.drawBar=function(t,i,n,r,o,s,a,h){if(0!=r){r<0&&(r*=-1,i-=r);var l=e.getSVGElement("rect",s,a);l.setAttributeNS(null,"x",t-.5*n),l.setAttributeNS(null,"y",i),l.setAttributeNS(null,"width",n),l.setAttributeNS(null,"height",r),l.setAttributeNS(null,"class",o),h&&l.setAttributeNS(null,"style",h)}}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.printStyle=void 0;var r=i(19),o=n(r),s=i(6),a=n(s),h=i(8),l=n(h),u=i(0),d=n(u),c=i(1),f=n(c),p=i(2),m=!1,v=void 0,g="background: #FFeeee; color: #dd0000",y=function(){function t(){(0,d.default)(this,t)}return(0,f.default)(t,null,[{key:"validate",value:function(e,i,n){m=!1,v=i;var r=i;return void 0!==n&&(r=i[n]),t.parse(e,r,[]),m}},{key:"parse",value:function(e,i,n){for(var r in e)e.hasOwnProperty(r)&&t.check(r,e,i,n)}},{key:"check",value:function(e,i,n,r){if(void 0===n[e]&&void 0===n.__any__)return void t.getSuggestion(e,n,r);var o=e,s=!0;void 0===n[e]&&void 0!==n.__any__&&(o="__any__",s="object"===t.getType(i[e]));var a=n[o];s&&void 0!==a.__type__&&(a=a.__type__),t.checkFields(e,i,n,o,a,r)}},{key:"checkFields",value:function(e,i,n,r,o,s){var a=function(i){console.log("%c"+i+t.printLocation(s,e),g)},h=t.getType(i[e]),u=o[h];void 0!==u?"array"===t.getType(u)&&-1===u.indexOf(i[e])?(a('Invalid option detected in "'+e+'". Allowed values are:'+t.print(u)+' not "'+i[e]+'". '),m=!0):"object"===h&&"__any__"!==r&&(s=p.copyAndExtendArray(s,e),t.parse(i[e],n[r],s)):void 0===o.any&&(a('Invalid type received for "'+e+'". Expected: '+t.print((0,l.default)(o))+". Received ["+h+'] "'+i[e]+'"'),m=!0)}},{key:"getType",value:function(t){var e="undefined"===typeof t?"undefined":(0,a.default)(t);return"object"===e?null===t?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":Array.isArray(t)?"array":t instanceof Date?"date":void 0!==t.nodeType?"dom":!0===t._isAMomentObject?"moment":"object":"number"===e?"number":"boolean"===e?"boolean":"string"===e?"string":void 0===e?"undefined":e}},{key:"getSuggestion",value:function(e,i,n){var r=t.findInOptions(e,i,n,!1),o=t.findInOptions(e,v,[],!0),s=void 0;s=void 0!==r.indexMatch?" in "+t.printLocation(r.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+r.indexMatch+'"?\n\n':o.distance<=4&&r.distance>o.distance?" in "+t.printLocation(r.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+t.printLocation(o.path,o.closestMatch,""):r.distance<=8?'. Did you mean "'+r.closestMatch+'"?'+t.printLocation(r.path,e):". Did you mean one of these: "+t.print((0,l.default)(i))+t.printLocation(n,e),console.log('%cUnknown option detected: "'+e+'"'+s,g),m=!0}},{key:"findInOptions",value:function(e,i,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=1e9,s="",a=[],h=e.toLowerCase(),l=void 0;for(var u in i){var d=void 0;if(void 0!==i[u].__type__&&!0===r){var c=t.findInOptions(e,i[u],p.copyAndExtendArray(n,u));o>c.distance&&(s=c.closestMatch,a=c.path,o=c.distance,l=c.indexMatch)}else-1!==u.toLowerCase().indexOf(h)&&(l=u),d=t.levenshteinDistance(e,u),o>d&&(s=u,a=p.copyArray(n),o=d)}return{closestMatch:s,path:a,distance:o,indexMatch:l}}},{key:"printLocation",value:function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Problem value found at: \n",n="\n\n"+i+"options = {\n",r=0;r<t.length;r++){for(var o=0;o<r+1;o++)n+="  ";n+=t[r]+": {\n"}for(var s=0;s<t.length+1;s++)n+="  ";n+=e+"\n";for(var a=0;a<t.length+1;a++){for(var h=0;h<t.length-a;h++)n+="  ";n+="}\n"}return n+"\n\n"}},{key:"print",value:function(t){return(0,o.default)(t).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}},{key:"levenshteinDistance",value:function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;var i,n=[];for(i=0;i<=e.length;i++)n[i]=[i];var r;for(r=0;r<=t.length;r++)n[0][r]=r;for(i=1;i<=e.length;i++)for(r=1;r<=t.length;r++)e.charAt(i-1)==t.charAt(r-1)?n[i][r]=n[i-1][r-1]:n[i][r]=Math.min(n[i-1][r-1]+1,Math.min(n[i][r-1]+1,n[i-1][r]+1));return n[e.length][t.length]}}]),t}();e.default=y,e.printStyle=g},function(t,e,i){function n(t,e){this.options=null,this.props=null}var r=i(2);n.prototype.setOptions=function(t){t&&r.extend(this.options,t)},n.prototype.redraw=function(){return!1},n.prototype.destroy=function(){},n.prototype._isResized=function(){var t=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,t},t.exports=n},function(t,e,i){var n=i(18),r=i(7),o=i(80),s=i(26),a=function(t,e,i){var h,l,u,d=t&a.F,c=t&a.G,f=t&a.S,p=t&a.P,m=t&a.B,v=t&a.W,g=c?r:r[e]||(r[e]={}),y=g.prototype,b=c?n:f?n[e]:(n[e]||{}).prototype;c&&(i=e);for(h in i)(l=!d&&b&&void 0!==b[h])&&h in g||(u=l?b[h]:i[h],g[h]=c&&"function"!=typeof b[h]?i[h]:m&&l?o(u,n):v&&b[h]==u?function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(u):p&&"function"==typeof u?o(Function.call,u):u,p&&((g.virtual||(g.virtual={}))[h]=u,t&a.R&&y&&!y[h]&&s(y,h,u)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){t.exports={default:i(160),__esModule:!0}},function(t,e,i){var n=i(27),r=i(81),o=i(53),s=Object.defineProperty;e.f=i(21)?Object.defineProperty:function(t,e,i){if(n(t),e=o(e,!0),n(i),r)try{return s(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){t.exports=!i(28)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(6),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=function(){function t(e,i,n){(0,a.default)(this,t),this.body=i,this.labelModule=n,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return(0,l.default)(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"_setMargins",value:function(t){this.margin={},this.options.margin&&("object"==(0,o.default)(this.options.margin)?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),t.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(t,e){var i=this.options.borderWidth;return this.resize(t),Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+i}},{key:"enableShadow",value:function(t,e){e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(t,e){if(!1!==e.borderDashes)if(void 0!==t.setLineDash){var i=e.borderDashes;!0===i&&(i=[5,15]),t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1}},{key:"disableBorderDashes",value:function(t,e){!1!==e.borderDashes&&(void 0!==t.setLineDash?t.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1))}},{key:"needsRefresh",value:function(t,e){return!0===this.refreshNeeded?(this.refreshNeeded=!1,!0):void 0===this.width||this.labelModule.differentState(t,e)}},{key:"initContextForDraw",value:function(t,e){var i=e.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,i),t.strokeStyle=e.borderColor,t.fillStyle=e.color}},{key:"performStroke",value:function(t,e){var i=e.borderWidth/this.body.view.scale;t.save(),i>0&&(this.enableBorderDashes(t,e),t.stroke(),this.disableBorderDashes(t,e)),t.restore()}},{key:"performFill",value:function(t,e){this.enableShadow(t,e),t.fill(),this.disableShadow(t,e),this.performStroke(t,e)}},{key:"_addBoundingBoxMargin",value:function(t){this.boundingBox.left-=t,this.boundingBox.top-=t,this.boundingBox.bottom+=t,this.boundingBox.right+=t}},{key:"_updateBoundingBox",value:function(t,e,i,n,r){void 0!==i&&this.resize(i,n,r),this.left=t-this.width/2,this.top=e-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(t,e,i,n,r){this._updateBoundingBox(t,e,i,n,r)}},{key:"getDimensionsFromLabel",value:function(t,e,i){this.textSize=this.labelModule.getTextSize(t,e,i);var n=this.textSize.width,r=this.textSize.height;return 0===n&&(n=14,r=14),{width:n,height:r}}}]),t}();e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(23),m=n(p),v=function(t){function e(t,i,n){return(0,a.default)(this,e),(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n))}return(0,f.default)(e,t),(0,l.default)(e,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{size:this.options.size};if(this.needsRefresh(e,i)){this.labelModule.getTextSize(t,e,i);var r=2*n.size;this.width=r,this.height=r,this.radius=.5*this.width}}},{key:"_drawShape",value:function(t,e,i,n,r,o,s,a){if(this.resize(t,o,s,a),this.left=n-this.width/2,this.top=r-this.height/2,this.initContextForDraw(t,a),t[e](n,r,a.size),this.performFill(t,a),void 0!==this.options.label){this.labelModule.calculateLabelSize(t,o,s,n,r,"hanging");var h=r+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(t,n,h,o,s,"hanging")}this.updateBoundingBox(n,r)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),e}(m.default);e.default=v},function(t,e,i){var n=i(78),r=i(51);t.exports=function(t){return n(r(t))}},function(t,e,i){var n=i(20),r=i(39);t.exports=i(21)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(32);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){t.exports={default:i(138),__esModule:!0}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(188),o=n(r),s=i(77),a=n(s);e.default=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var s,h=(0,a.default)(t);!(n=(s=h.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&h.return&&h.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if((0,o.default)(Object(e)))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e){t.exports={}},function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},function(t,e,i){var n=i(84),r=i(58);t.exports=Object.keys||function(t){return n(t,r)}},function(t,e,i){function n(t,e,i){this.x=void 0!==t?t:0,this.y=void 0!==e?e:0,this.z=void 0!==i?i:0}n.subtract=function(t,e){var i=new n;return i.x=t.x-e.x,i.y=t.y-e.y,i.z=t.z-e.z,i},n.add=function(t,e){var i=new n;return i.x=t.x+e.x,i.y=t.y+e.y,i.z=t.z+e.z,i},n.avg=function(t,e){return new n((t.x+e.x)/2,(t.y+e.y)/2,(t.z+e.z)/2)},n.crossProduct=function(t,e){var i=new n;return i.x=t.y*e.z-t.z*e.y,i.y=t.z*e.x-t.x*e.z,i.z=t.x*e.y-t.y*e.x,i},n.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.exports=n},function(t,e,i){var n,r,o;!function(i,s){r=[],n=s,void 0!==(o="function"===typeof n?n.apply(e,r):n)&&(t.exports=o)}(0,function(){function t(t){var e,i=t&&t.preventDefault||!1,n=t&&t.container||window,r={},o={keydown:{},keyup:{}},s={};for(e=97;e<=122;e++)s[String.fromCharCode(e)]={code:e-97+65,shift:!1};for(e=65;e<=90;e++)s[String.fromCharCode(e)]={code:e,shift:!0};for(e=0;e<=9;e++)s[""+e]={code:48+e,shift:!1};for(e=1;e<=12;e++)s["F"+e]={code:111+e,shift:!1};for(e=0;e<=9;e++)s["num"+e]={code:96+e,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(t){l(t,"keydown")},h=function(t){l(t,"keyup")},l=function(t,e){if(void 0!==o[e][t.keyCode]){for(var n=o[e][t.keyCode],r=0;r<n.length;r++)void 0===n[r].shift?n[r].fn(t):1==n[r].shift&&1==t.shiftKey?n[r].fn(t):0==n[r].shift&&0==t.shiftKey&&n[r].fn(t);1==i&&t.preventDefault()}};return r.bind=function(t,e,i){if(void 0===i&&(i="keydown"),void 0===s[t])throw new Error("unsupported key: "+t);void 0===o[i][s[t].code]&&(o[i][s[t].code]=[]),o[i][s[t].code].push({fn:e,shift:s[t].shift})},r.bindAll=function(t,e){void 0===e&&(e="keydown");for(var i in s)s.hasOwnProperty(i)&&r.bind(i,t,e)},r.getKey=function(t){for(var e in s)if(s.hasOwnProperty(e)){if(1==t.shiftKey&&1==s[e].shift&&t.keyCode==s[e].code)return e;if(0==t.shiftKey&&0==s[e].shift&&t.keyCode==s[e].code)return e;if(t.keyCode==s[e].code&&"shift"==e)return e}return"unknown key, currently not supported"},r.unbind=function(t,e,i){if(void 0===i&&(i="keydown"),void 0===s[t])throw new Error("unsupported key: "+t);if(void 0!==e){var n=[],r=o[i][s[t].code];if(void 0!==r)for(var a=0;a<r.length;a++)r[a].fn==e&&r[a].shift==s[t].shift||n.push(o[i][s[t].code][a]);o[i][s[t].code]=n}else o[i][s[t].code]=[]},r.reset=function(){o={keydown:{},keyup:{}}},r.destroy=function(){o={keydown:{},keyup:{}},n.removeEventListener("keydown",a,!0),n.removeEventListener("keyup",h,!0)},n.addEventListener("keydown",a,!0),n.addEventListener("keyup",h,!0),r}return t})},function(t,e,i){e.convertHiddenOptions=function(t,i,n){if(n&&!Array.isArray(n))return e.convertHiddenOptions(t,i,[n]);if(i.hiddenDates=[],n&&1==Array.isArray(n)){for(var r=0;r<n.length;r++)if(void 0===n[r].repeat){var o={};o.start=t(n[r].start).toDate().valueOf(),o.end=t(n[r].end).toDate().valueOf(),i.hiddenDates.push(o)}i.hiddenDates.sort(function(t,e){return t.start-e.start})}},e.updateHiddenDates=function(t,i,n){if(n&&!Array.isArray(n))return e.updateHiddenDates(t,i,[n]);if(n&&void 0!==i.domProps.centerContainer.width){e.convertHiddenOptions(t,i,n);for(var r=t(i.range.start),o=t(i.range.end),s=i.range.end-i.range.start,a=s/i.domProps.centerContainer.width,h=0;h<n.length;h++)if(void 0!==n[h].repeat){var l=t(n[h].start),u=t(n[h].end);if("Invalid Date"==l._d)throw new Error("Supplied start date is not valid: "+n[h].start);if("Invalid Date"==u._d)throw new Error("Supplied end date is not valid: "+n[h].end);var d=u-l;if(d>=4*a){var c=0,f=o.clone();switch(n[h].repeat){case"daily":l.day()!=u.day()&&(c=1),l.dayOfYear(r.dayOfYear()),l.year(r.year()),l.subtract(7,"days"),u.dayOfYear(r.dayOfYear()),u.year(r.year()),u.subtract(7-c,"days"),f.add(1,"weeks");break;case"weekly":var p=u.diff(l,"days"),m=l.day();l.date(r.date()),l.month(r.month()),l.year(r.year()),u=l.clone(),l.day(m),u.day(m),u.add(p,"days"),l.subtract(1,"weeks"),u.subtract(1,"weeks"),f.add(1,"weeks");break;case"monthly":l.month()!=u.month()&&(c=1),l.month(r.month()),l.year(r.year()),l.subtract(1,"months"),u.month(r.month()),u.year(r.year()),u.subtract(1,"months"),u.add(c,"months"),f.add(1,"months");break;case"yearly":l.year()!=u.year()&&(c=1),l.year(r.year()),l.subtract(1,"years"),u.year(r.year()),u.subtract(1,"years"),u.add(c,"years"),f.add(1,"years");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",n[h].repeat)}for(;l<f;)switch(i.hiddenDates.push({start:l.valueOf(),end:u.valueOf()}),n[h].repeat){case"daily":l.add(1,"days"),u.add(1,"days");break;case"weekly":l.add(1,"weeks"),u.add(1,"weeks");break;case"monthly":l.add(1,"months"),u.add(1,"months");break;case"yearly":l.add(1,"y"),u.add(1,"y");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",n[h].repeat)}i.hiddenDates.push({start:l.valueOf(),end:u.valueOf()})}}e.removeDuplicates(i);var v=e.isHidden(i.range.start,i.hiddenDates),g=e.isHidden(i.range.end,i.hiddenDates),y=i.range.start,b=i.range.end;1==v.hidden&&(y=1==i.range.startToFront?v.startDate-1:v.endDate+1),1==g.hidden&&(b=1==i.range.endToFront?g.startDate-1:g.endDate+1),1!=v.hidden&&1!=g.hidden||i.range._applyRange(y,b)}},e.removeDuplicates=function(t){for(var e=t.hiddenDates,i=[],n=0;n<e.length;n++)for(var r=0;r<e.length;r++)n!=r&&1!=e[r].remove&&1!=e[n].remove&&(e[r].start>=e[n].start&&e[r].end<=e[n].end?e[r].remove=!0:e[r].start>=e[n].start&&e[r].start<=e[n].end?(e[n].end=e[r].end,e[r].remove=!0):e[r].end>=e[n].start&&e[r].end<=e[n].end&&(e[n].start=e[r].start,e[r].remove=!0));for(n=0;n<e.length;n++)!0!==e[n].remove&&i.push(e[n]);t.hiddenDates=i,t.hiddenDates.sort(function(t,e){return t.start-e.start})},e.printDates=function(t){for(var e=0;e<t.length;e++)console.log(e,new Date(t[e].start),new Date(t[e].end),t[e].start,t[e].end,t[e].remove)},e.stepOverHiddenDates=function(t,e,i){for(var n=!1,r=e.current.valueOf(),o=0;o<e.hiddenDates.length;o++){var s=e.hiddenDates[o].start,a=e.hiddenDates[o].end;if(r>=s&&r<a){n=!0;break}}if(1==n&&r<e._end.valueOf()&&r!=i){var h=t(i),l=t(a);h.year()!=l.year()?e.switchedYear=!0:h.month()!=l.month()?e.switchedMonth=!0:h.dayOfYear()!=l.dayOfYear()&&(e.switchedDay=!0),e.current=l}},e.toScreen=function(t,i,n){var r;if(0==t.body.hiddenDates.length)return r=t.range.conversion(n),(i.valueOf()-r.offset)*r.scale;var o=e.isHidden(i,t.body.hiddenDates);1==o.hidden&&(i=o.startDate);var s=e.getHiddenDurationBetween(t.body.hiddenDates,t.range.start,t.range.end);if(i<t.range.start){r=t.range.conversion(n,s);var a=e.getHiddenDurationBeforeStart(t.body.hiddenDates,i,r.offset);return i=t.options.moment(i).toDate().valueOf(),i+=a,-(r.offset-i.valueOf())*r.scale}if(i>t.range.end){var h={start:t.range.start,end:i};return i=e.correctTimeForHidden(t.options.moment,t.body.hiddenDates,h,i),r=t.range.conversion(n,s),(i.valueOf()-r.offset)*r.scale}return i=e.correctTimeForHidden(t.options.moment,t.body.hiddenDates,t.range,i),r=t.range.conversion(n,s),(i.valueOf()-r.offset)*r.scale},e.toTime=function(t,i,n){if(0==t.body.hiddenDates.length){var r=t.range.conversion(n);return new Date(i/r.scale+r.offset)}var o=e.getHiddenDurationBetween(t.body.hiddenDates,t.range.start,t.range.end),s=t.range.end-t.range.start-o,a=s*i/n,h=e.getAccumulatedHiddenDuration(t.body.hiddenDates,t.range,a);return new Date(h+a+t.range.start)},e.getHiddenDurationBetween=function(t,e,i){for(var n=0,r=0;r<t.length;r++){var o=t[r].start,s=t[r].end;o>=e&&s<i&&(n+=s-o)}return n},e.getHiddenDurationBeforeStart=function(t,e,i){for(var n=0,r=0;r<t.length;r++){var o=t[r].start,s=t[r].end;o>=e&&s<=i&&(n+=s-o)}return n},e.correctTimeForHidden=function(t,i,n,r){return r=t(r).toDate().valueOf(),r-=e.getHiddenDurationBefore(t,i,n,r)},e.getHiddenDurationBefore=function(t,e,i,n){var r=0;n=t(n).toDate().valueOf();for(var o=0;o<e.length;o++){var s=e[o].start,a=e[o].end;s>=i.start&&a<i.end&&n>=a&&(r+=a-s)}return r},e.getAccumulatedHiddenDuration=function(t,e,i){for(var n=0,r=0,o=e.start,s=0;s<t.length;s++){var a=t[s].start,h=t[s].end;if(a>=e.start&&h<e.end){if(r+=a-o,o=h,r>=i)break;n+=h-a}}return n},e.snapAwayFromHidden=function(t,i,n,r){var o=e.isHidden(i,t);return 1==o.hidden?n<0?1==r?o.startDate-(o.endDate-i)-1:o.startDate-1:1==r?o.endDate+(i-o.startDate)+1:o.endDate+1:i},e.isHidden=function(t,e){for(var i=0;i<e.length;i++){var n=e[i].start,r=e[i].end;if(t>=n&&t<r)return{hidden:!0,startDate:n,endDate:r}}return{hidden:!1,startDate:n,endDate:r}}},function(t,e,i){e.onTouch=function(t,e){e.inputHandler=function(t){t.isFirst&&e(t)},t.on("hammer.input",e.inputHandler)},e.onRelease=function(t,e){return e.inputHandler=function(t){t.isFinal&&e(t)},t.on("hammer.input",e.inputHandler)},e.offTouch=function(t,e){t.off("hammer.input",e.inputHandler)},e.offRelease=e.offTouch,e.disablePreventDefaultVertically=function(t){return t.getTouchAction=function(){return["pan-y"]},t}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i){this.id=null,this.parent=null,this.data=t,this.dom=null,this.conversion=e||{},this.options=i||{},this.selected=!1,this.displayed=!1,this.groupShowing=!0,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.editable=null,this._updateEditStatus()}var o=i(6),s=n(o),a=i(8),h=n(a),l=i(10),u=i(2),d=i(9);r.prototype.stack=!0,r.prototype.select=function(){this.selected=!0,this.dirty=!0,this.displayed&&this.redraw()},r.prototype.unselect=function(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()},r.prototype.setData=function(t){void 0!=t.group&&this.data.group!=t.group&&null!=this.parent&&this.parent.itemSet._moveToGroup(this,t.group),this.parent&&(this.parent.stackDirty=!0),void 0!=t.subgroup&&this.data.subgroup!=t.subgroup&&null!=this.parent&&this.parent.changeSubgroup(this,this.data.subgroup,t.subgroup),this.data=t,this._updateEditStatus(),this.dirty=!0,this.displayed&&this.redraw()},r.prototype.setParent=function(t){this.displayed?(this.hide(),this.parent=t,this.parent&&this.show()):this.parent=t},r.prototype.isVisible=function(t){return!1},r.prototype.show=function(){return!1},r.prototype.hide=function(){return!1},r.prototype.redraw=function(){},r.prototype.repositionX=function(){},r.prototype.repositionY=function(){},r.prototype._repaintDragCenter=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragCenter){var t=this,e=document.createElement("div");e.className="vis-drag-center",e.dragCenterItem=this;var i=new l(e);i.on("tap",function(e){t.parent.itemSet.body.emitter.emit("click",{event:e,item:t.id})}),i.on("doubletap",function(e){e.stopPropagation(),t.parent.itemSet._onUpdateItem(t),t.parent.itemSet.body.emitter.emit("doubleClick",{event:e,item:t.id})}),this.dom.box?this.dom.dragLeft?this.dom.box.insertBefore(e,this.dom.dragLeft):this.dom.box.appendChild(e):this.dom.point&&this.dom.point.appendChild(e),this.dom.dragCenter=e}else!this.selected&&this.dom.dragCenter&&(this.dom.dragCenter.parentNode&&this.dom.dragCenter.parentNode.removeChild(this.dom.dragCenter),this.dom.dragCenter=null)},r.prototype._repaintDeleteButton=function(t){var e=(this.options.editable.overrideItems||null==this.editable)&&this.options.editable.remove||!this.options.editable.overrideItems&&null!=this.editable&&this.editable.remove;if(this.selected&&e&&!this.dom.deleteButton){var i=this,n=document.createElement("div");this.options.rtl?n.className="vis-delete-rtl":n.className="vis-delete",n.title="Delete this item",new l(n).on("tap",function(t){t.stopPropagation(),i.parent.removeFromDataSet(i)}),t.appendChild(n),this.dom.deleteButton=n}else!this.selected&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null)},r.prototype._repaintOnItemUpdateTimeTooltip=function(t){if(this.options.tooltipOnItemUpdateTime){var e=(this.options.editable.updateTime||!0===this.data.editable)&&!1!==this.data.editable;if(this.selected&&e&&!this.dom.onItemUpdateTimeTooltip){var i=document.createElement("div");i.className="vis-onUpdateTime-tooltip",t.appendChild(i),this.dom.onItemUpdateTimeTooltip=i}else!this.selected&&this.dom.onItemUpdateTimeTooltip&&(this.dom.onItemUpdateTimeTooltip.parentNode&&this.dom.onItemUpdateTimeTooltip.parentNode.removeChild(this.dom.onItemUpdateTimeTooltip),this.dom.onItemUpdateTimeTooltip=null);if(this.dom.onItemUpdateTimeTooltip){this.dom.onItemUpdateTimeTooltip.style.visibility=this.parent.itemSet.touchParams.itemIsDragging?"visible":"hidden",this.options.rtl?this.dom.onItemUpdateTimeTooltip.style.right=this.dom.content.style.right:this.dom.onItemUpdateTimeTooltip.style.left=this.dom.content.style.left;var n,r=this.parent.itemSet.body.domProps.scrollTop;n="top"==this.options.orientation.item?this.top:this.parent.height-this.top-this.height;n+this.parent.top-50<-r?(this.dom.onItemUpdateTimeTooltip.style.bottom="",this.dom.onItemUpdateTimeTooltip.style.top=this.height+2+"px"):(this.dom.onItemUpdateTimeTooltip.style.top="",this.dom.onItemUpdateTimeTooltip.style.bottom=this.height+2+"px");var o,s;this.options.tooltipOnItemUpdateTime&&this.options.tooltipOnItemUpdateTime.template?(s=this.options.tooltipOnItemUpdateTime.template.bind(this),o=s(this.data)):(o="start: "+d(this.data.start).format("MM/DD/YYYY hh:mm"),this.data.end&&(o+="<br> end: "+d(this.data.end).format("MM/DD/YYYY hh:mm"))),this.dom.onItemUpdateTimeTooltip.innerHTML=o}}},r.prototype._updateContents=function(t){var e,i,n,r,o=this.parent.itemSet.itemsData.get(this.id),s=this.dom.box||this.dom.point,a=s.getElementsByClassName("vis-item-visible-frame")[0];if(this.options.visibleFrameTemplate?(r=this.options.visibleFrameTemplate.bind(this),n=r(o,s)):n="",a)if(n instanceof Object&&!(n instanceof Element))r(o,a);else if(this._contentToString(this.itemVisibleFrameContent)!==this._contentToString(n)){if(n instanceof Element)a.innerHTML="",a.appendChild(n);else if(void 0!=n)a.innerHTML=n;else if("background"!=this.data.type||void 0!==this.data.content)throw new Error('Property "content" missing in item '+this.id);this.itemVisibleFrameContent=n}if(this.options.template?(i=this.options.template.bind(this),e=i(o,t,this.data)):e=this.data.content,e instanceof Object&&!(e instanceof Element))i(o,t);else if(this._contentToString(this.content)!==this._contentToString(e)){if(e instanceof Element)t.innerHTML="",t.appendChild(e);else if(void 0!=e)t.innerHTML=e;else if("background"!=this.data.type||void 0!==this.data.content)throw new Error('Property "content" missing in item '+this.id);this.content=e}},r.prototype._updateDataAttributes=function(t){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){var e=[];if(Array.isArray(this.options.dataAttributes))e=this.options.dataAttributes;else{if("all"!=this.options.dataAttributes)return;e=(0,h.default)(this.data)}for(var i=0;i<e.length;i++){var n=e[i],r=this.data[n];null!=r?t.setAttribute("data-"+n,r):t.removeAttribute("data-"+n)}}},r.prototype._updateStyle=function(t){this.style&&(u.removeCssText(t,this.style),this.style=null),this.data.style&&(u.addCssText(t,this.data.style),this.style=this.data.style)},r.prototype._contentToString=function(t){return"string"===typeof t?t:t&&"outerHTML"in t?t.outerHTML:t},r.prototype._updateEditStatus=function(){this.options&&("boolean"===typeof this.options.editable?this.editable={updateTime:this.options.editable,updateGroup:this.options.editable,remove:this.options.editable}:"object"===(0,s.default)(this.options.editable)&&(this.editable={},u.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.options.editable))),this.options&&this.options.editable&&!0===this.options.editable.overrideItems||this.data&&("boolean"===typeof this.data.editable?this.editable={updateTime:this.data.editable,updateGroup:this.data.editable,remove:this.data.editable}:"object"===(0,s.default)(this.data.editable)&&(this.editable={},u.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.data.editable)))},r.prototype.getWidthLeft=function(){return 0},r.prototype.getWidthRight=function(){return 0},r.prototype.getTitle=function(){return this.data.title},t.exports=r},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e,i){var n=i(51);t.exports=function(t){return Object(n(t))}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){function n(t){this.delay=null,this.max=1/0,this._queue=[],this._timeout=null,this._extended=null,this.setOptions(t)}n.prototype.setOptions=function(t){t&&"undefined"!==typeof t.delay&&(this.delay=t.delay),t&&"undefined"!==typeof t.max&&(this.max=t.max),this._flushIfNeeded()},n.extend=function(t,e){var i=new n(e);if(void 0!==t.flush)throw new Error("Target object already has a property flush");t.flush=function(){i.flush()};var r=[{name:"flush",original:void 0}];if(e&&e.replace)for(var o=0;o<e.replace.length;o++){var s=e.replace[o];r.push({name:s,original:t[s]}),i.replace(t,s)}return i._extended={object:t,methods:r},i},n.prototype.destroy=function(){if(this.flush(),this._extended){for(var t=this._extended.object,e=this._extended.methods,i=0;i<e.length;i++){var n=e[i];n.original?t[n.name]=n.original:delete t[n.name]}this._extended=null}},n.prototype.replace=function(t,e){var i=this,n=t[e];if(!n)throw new Error("Method "+e+" undefined");t[e]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.queue({args:t,fn:n,context:this})}},n.prototype.queue=function(t){"function"===typeof t?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()},n.prototype._flushIfNeeded=function(){if(this._queue.length>this.max&&this.flush(),clearTimeout(this._timeout),this.queue.length>0&&"number"===typeof this.delay){var t=this;this._timeout=setTimeout(function(){t.flush()},this.delay)}},n.prototype.flush=function(){for(;this._queue.length>0;){var t=this._queue.shift();t.fn.apply(t.context||t.fn,t.args||[])}},t.exports=n},function(t,e){function i(t){if(t)return n(t)}function n(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},i.prototype.once=function(t,e){function i(){n.off(t,i),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},i.fn=e,this.on(t,i),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,r=0;r<i.length;r++)if((n=i[r])===e||n.fn===e){i.splice(r,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i){i=i.slice(0);for(var n=0,r=i.length;n<r;++n)i[n].apply(this,e)}return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,i){function n(t,e){this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,maxMinorChars:7,format:h.FORMAT,moment:u,timeAxis:null},this.options=s.extend({},this.defaultOptions),this.body=t,this._create(),this.setOptions(e)}var r=i(6),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=i(2),a=i(16),h=i(66),l=i(36),u=i(9);n.prototype=new a,n.prototype.setOptions=function(t){t&&(s.selectiveExtend(["showMinorLabels","showMajorLabels","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,t),s.selectiveDeepExtend(["format"],this.options,t),"orientation"in t&&("string"===typeof t.orientation?this.options.orientation.axis=t.orientation:"object"===(0,o.default)(t.orientation)&&"axis"in t.orientation&&(this.options.orientation.axis=t.orientation.axis)),"locale"in t&&("function"===typeof u.locale?u.locale(t.locale):u.lang(t.locale)))},n.prototype._create=function(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"},n.prototype.destroy=function(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null},n.prototype.redraw=function(){var t=this.props,e=this.dom.foreground,i=this.dom.background,n="top"==this.options.orientation.axis?this.body.dom.top:this.body.dom.bottom,r=e.parentNode!==n;this._calculateCharSize();var o=this.options.showMinorLabels&&"none"!==this.options.orientation.axis,s=this.options.showMajorLabels&&"none"!==this.options.orientation.axis;t.minorLabelHeight=o?t.minorCharHeight:0,t.majorLabelHeight=s?t.majorCharHeight:0,t.height=t.minorLabelHeight+t.majorLabelHeight,t.width=e.offsetWidth,t.minorLineHeight=this.body.domProps.root.height-t.majorLabelHeight-("top"==this.options.orientation.axis?this.body.domProps.bottom.height:this.body.domProps.top.height),t.minorLineWidth=1,t.majorLineHeight=t.minorLineHeight+t.majorLabelHeight,t.majorLineWidth=1;var a=e.nextSibling,h=i.nextSibling;return e.parentNode&&e.parentNode.removeChild(e),i.parentNode&&i.parentNode.removeChild(i),e.style.height=this.props.height+"px",this._repaintLabels(),a?n.insertBefore(e,a):n.appendChild(e),h?this.body.dom.backgroundVertical.insertBefore(i,h):this.body.dom.backgroundVertical.appendChild(i),this._isResized()||r},n.prototype._repaintLabels=function(){var t=this.options.orientation.axis,e=s.convert(this.body.range.start,"Number"),i=s.convert(this.body.range.end,"Number"),n=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf(),r=n-l.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this.body.range,n);r-=this.body.util.toTime(0).valueOf();var o=new h(new Date(e),new Date(i),r,this.body.hiddenDates,this.options);o.setMoment(this.options.moment),this.options.format&&o.setFormat(this.options.format),this.options.timeAxis&&o.setScale(this.options.timeAxis),this.step=o;var a=this.dom;a.redundant.lines=a.lines,a.redundant.majorTexts=a.majorTexts,a.redundant.minorTexts=a.minorTexts,a.lines=[],a.majorTexts=[],a.minorTexts=[];var u,c,f,p,m,v,g,y,b,_=0,w=void 0,x=0;for(o.start(),u=o.getCurrent(),f=this.body.util.toScreen(u);o.hasNext()&&x<1e3;){switch(x++,p=o.isMajor(),b=o.getClassName(),y=o.getLabelMinor(),u,c=f,o.next(),u=o.getCurrent(),o.isMajor(),f=this.body.util.toScreen(u),v=_,_=f-c,o.scale){case"week":m=!0;break;default:m=_>=.4*v}if(this.options.showMinorLabels&&m){var S=this._repaintMinorText(c,y,t,b);S.style.width=_+"px"}p&&this.options.showMajorLabels?(c>0&&(void 0==w&&(w=c),S=this._repaintMajorText(c,o.getLabelMajor(),t,b)),g=this._repaintMajorLine(c,_,t,b)):m?g=this._repaintMinorLine(c,_,t,b):g&&(g.style.width=parseInt(g.style.width)+_+"px")}if(1e3!==x||d||(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to 1000 lines."),d=!0),this.options.showMajorLabels){var k=this.body.util.toTime(0),E=o.getLabelMajor(k),M=E.length*(this.props.majorCharWidth||10)+10;(void 0==w||M<w)&&this._repaintMajorText(0,E,t,b)}s.forEach(this.dom.redundant,function(t){for(;t.length;){var e=t.pop();e&&e.parentNode&&e.parentNode.removeChild(e)}})},n.prototype._repaintMinorText=function(t,e,i,n){var r=this.dom.redundant.minorTexts.shift();if(!r){var o=document.createTextNode("");r=document.createElement("div"),r.appendChild(o),this.dom.foreground.appendChild(r)}return this.dom.minorTexts.push(r),r.innerHTML=e,r.style.top="top"==i?this.props.majorLabelHeight+"px":"0",this.options.rtl?(r.style.left="",r.style.right=t+"px"):r.style.left=t+"px",r.className="vis-text vis-minor "+n,r},n.prototype._repaintMajorText=function(t,e,i,n){var r=this.dom.redundant.majorTexts.shift();if(!r){var o=document.createElement("div");r=document.createElement("div"),r.appendChild(o),this.dom.foreground.appendChild(r)}return r.childNodes[0].innerHTML=e,r.className="vis-text vis-major "+n,r.style.top="top"==i?"0":this.props.minorLabelHeight+"px",this.options.rtl?(r.style.left="",r.style.right=t+"px"):r.style.left=t+"px",this.dom.majorTexts.push(r),r},n.prototype._repaintMinorLine=function(t,e,i,n){var r=this.dom.redundant.lines.shift();r||(r=document.createElement("div"),this.dom.background.appendChild(r)),this.dom.lines.push(r);var o=this.props;return r.style.top="top"==i?o.majorLabelHeight+"px":this.body.domProps.top.height+"px",r.style.height=o.minorLineHeight+"px",this.options.rtl?(r.style.left="",r.style.right=t-o.minorLineWidth/2+"px",r.className="vis-grid vis-vertical-rtl vis-minor "+n):(r.style.left=t-o.minorLineWidth/2+"px",r.className="vis-grid vis-vertical vis-minor "+n),r.style.width=e+"px",r},n.prototype._repaintMajorLine=function(t,e,i,n){var r=this.dom.redundant.lines.shift();r||(r=document.createElement("div"),this.dom.background.appendChild(r)),this.dom.lines.push(r);var o=this.props;return r.style.top="top"==i?"0":this.body.domProps.top.height+"px",this.options.rtl?(r.style.left="",r.style.right=t-o.majorLineWidth/2+"px",r.className="vis-grid vis-vertical-rtl vis-major "+n):(r.style.left=t-o.majorLineWidth/2+"px",r.className="vis-grid vis-vertical vis-major "+n),r.style.height=o.majorLineHeight+"px",r.style.width=e+"px",r},n.prototype._calculateCharSize=function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth};var d=!1;t.exports=n},function(t,e,i){function n(t,e){this.body=t,this.defaultOptions={moment:a,locales:h,locale:"en",id:void 0,title:void 0},this.options=o.extend({},this.defaultOptions),e&&e.time?this.customTime=e.time:this.customTime=new Date,this.eventParams={},this.setOptions(e),this._create()}var r=i(10),o=i(2),s=i(16),a=i(9),h=i(98);n.prototype=new s,n.prototype.setOptions=function(t){t&&o.selectiveExtend(["moment","locale","locales","id"],this.options,t)},n.prototype._create=function(){function t(t){this.body.range._onMouseWheel(t)}var e=document.createElement("div");e["custom-time"]=this,e.className="vis-custom-time "+(this.options.id||""),e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e;var i=document.createElement("div");i.style.position="relative",i.style.top="0px",i.style.left="-10px",i.style.height="100%",i.style.width="20px",i.addEventListener?(i.addEventListener("mousewheel",t.bind(this),!1),i.addEventListener("DOMMouseScroll",t.bind(this),!1)):i.attachEvent("onmousewheel",t.bind(this)),e.appendChild(i),this.hammer=new r(i),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:r.DIRECTION_HORIZONTAL})},n.prototype.destroy=function(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null},n.prototype.redraw=function(){var t=this.body.dom.backgroundVertical;this.bar.parentNode!=t&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),t.appendChild(this.bar));var e=this.body.util.toScreen(this.customTime),i=this.options.locales[this.options.locale];i||(this.warned||(console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline/#Localization"),this.warned=!0),i=this.options.locales.en);var n=this.options.title;return void 0===n?(n=i.time+": "+this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss"),n=n.charAt(0).toUpperCase()+n.substring(1)):"function"===typeof n&&(n=n.call(this.customTime)),this.bar.style.left=e+"px",this.bar.title=n,!1},n.prototype.hide=function(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)},n.prototype.setCustomTime=function(t){this.customTime=o.convert(t,"Date"),this.redraw()},n.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())},n.prototype.setCustomTitle=function(t){this.options.title=t},n.prototype._onDragStart=function(t){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,t.stopPropagation()},n.prototype._onDrag=function(t){if(this.eventParams.dragging){var e=this.body.util.toScreen(this.eventParams.customTime)+t.deltaX,i=this.body.util.toTime(e);this.setCustomTime(i),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:t}),t.stopPropagation()}},n.prototype._onDragEnd=function(t){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:t}),t.stopPropagation())},n.customTimeFromTarget=function(t){for(var e=t.target;e;){if(e.hasOwnProperty("custom-time"))return e["custom-time"];e=e.parentNode}return null},t.exports=n},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=i(2),l=i(117).default,u=i(48).default,d=i(193).default,c=i(200).default,f=i(201).default,p=i(202).default,m=i(203).default,v=i(204).default,g=i(205).default,y=i(206).default,b=i(207).default,_=i(208).default,w=i(209).default,x=i(210).default,S=i(211).default,k=i(212).default,E=i(213).default,M=i(15),T=M.printStyle,C=function(){function t(e,i,n,r,s,a){(0,o.default)(this,t),this.options=h.bridgeObject(s),this.globalOptions=s,this.defaultOptions=a,this.body=i,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=r,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new l(this.body,this.options,!1),this.setOptions(e)}return(0,a.default)(t,[{key:"attachEdge",value:function(t){-1===this.edges.indexOf(t)&&this.edges.push(t)}},{key:"detachEdge",value:function(t){var e=this.edges.indexOf(t);-1!=e&&this.edges.splice(e,1)}},{key:"setOptions",value:function(e){var i=this.options.shape;if(e){if(void 0!==e.id&&(this.id=e.id),void 0===this.id)throw new Error("Node must have an id");t.checkMass(e,this.id),void 0!==e.x&&(null===e.x?(this.x=void 0,this.predefinedPosition=!1):(this.x=parseInt(e.x),this.predefinedPosition=!0)),void 0!==e.y&&(null===e.y?(this.y=void 0,this.predefinedPosition=!1):(this.y=parseInt(e.y),this.predefinedPosition=!0)),void 0!==e.size&&(this.baseSize=e.size),void 0!==e.value&&(e.value=parseFloat(e.value)),t.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);var n=[e,this.options,this.defaultOptions];return this.chooser=u.choosify("node",n),this._load_images(),this.updateLabelModule(e),this.updateShape(i),void 0!==e.hidden||void 0!==e.physics}}},{key:"_load_images",value:function(){if("circularImage"===this.options.shape||"image"===this.options.shape){if(void 0===this.options.image)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(void 0===this.imagelist)throw new Error("Internal Error: No images provided");if("string"===typeof this.options.image)this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(void 0===this.options.image.unselected)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),void 0!==this.options.image.selected?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}},{key:"getFormattingValues",value:function(){var t={color:this.options.color.background,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};return this.selected||this.hover?!0===this.chooser?this.selected?(t.borderWidth*=2,t.color=this.options.color.highlight.background,t.borderColor=this.options.color.highlight.border,t.shadow=this.options.shadow.enabled):this.hover&&(t.color=this.options.color.hover.background,t.borderColor=this.options.color.hover.border,t.shadow=this.options.shadow.enabled):"function"===typeof this.chooser&&(this.chooser(t,this.options.id,this.selected,this.hover),!1===t.shadow&&(t.shadowColor===this.options.shadow.color&&t.shadowSize===this.options.shadow.size&&t.shadowX===this.options.shadow.x&&t.shadowY===this.options.shadow.y||(t.shadow=!0))):t.shadow=this.options.shadow.enabled,t}},{key:"updateLabelModule",value:function(e){void 0!==this.options.label&&null!==this.options.label||(this.options.label=""),t.updateGroupOptions(this.options,e,this.grouplist);var i=this.grouplist.get(this.options.group,!1),n=[e,this.options,i,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(t){if(t===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new d(this.options,this.body,this.labelModule);break;case"circle":this.shape=new c(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new f(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"database":this.shape=new p(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new m(this.options,this.body,this.labelModule);break;case"dot":this.shape=new v(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new g(this.options,this.body,this.labelModule);break;case"icon":this.shape=new y(this.options,this.body,this.labelModule);break;case"image":this.shape=new b(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new _(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new w(this.options,this.body,this.labelModule);break;case"star":this.shape=new x(this.options,this.body,this.labelModule);break;case"text":this.shape=new S(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new k(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new E(this.options,this.body,this.labelModule);break;default:this.shape=new g(this.options,this.body,this.labelModule)}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(t,e){return this.shape.distanceToBorder(t,e)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(t,e,i){if(void 0!==this.options.value){var n=this.options.scaling.customScalingFunction(t,e,i,this.options.value),r=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+n*o}this.options.size=this.options.scaling.min+n*r}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(t){var e=this.getFormattingValues();this.shape.draw(t,this.x,this.y,this.selected,this.hover,e)}},{key:"updateBoundingBox",value:function(t){this.shape.updateBoundingBox(this.x,this.y,t)}},{key:"resize",value:function(t){var e=this.getFormattingValues();this.shape.resize(t,this.selected,this.hover,e)}},{key:"getItemsOnPoint",value:function(t){var e=[];return this.labelModule.visible()&&u.pointInRect(this.labelModule.getSize(),t)&&e.push({nodeId:this.id,labelId:0}),u.pointInRect(this.shape.boundingBox,t)&&e.push({nodeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){return this.shape.left<t.right&&this.shape.left+this.shape.width>t.left&&this.shape.top<t.bottom&&this.shape.top+this.shape.height>t.top}},{key:"isBoundingBoxOverlappingWith",value:function(t){return this.shape.boundingBox.left<t.right&&this.shape.boundingBox.right>t.left&&this.shape.boundingBox.top<t.bottom&&this.shape.boundingBox.bottom>t.top}}],[{key:"updateGroupOptions",value:function(t,e,i){if(void 0!==i){var n=t.group;if(void 0!==e&&void 0!==e.group&&n!==e.group)throw new Error("updateGroupOptions: group values in options don't match.");if("number"===typeof n||"string"===typeof n&&""!=n){var r=i.get(n);h.selectiveNotDeepExtend(["font"],t,r),t.color=h.parseColor(t.color)}}}},{key:"parseOptions",value:function(e,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments[4],s=["color","fixed","shadow"];if(h.selectiveNotDeepExtend(s,e,i,n),t.checkMass(i),h.mergeOptions(e,i,"shadow",r),void 0!==i.color&&null!==i.color){var a=h.parseColor(i.color);h.fillIfDefined(e.color,a)}else!0===n&&null===i.color&&(e.color=h.bridgeObject(r.color));void 0!==i.fixed&&null!==i.fixed&&("boolean"===typeof i.fixed?(e.fixed.x=i.fixed,e.fixed.y=i.fixed):(void 0!==i.fixed.x&&"boolean"===typeof i.fixed.x&&(e.fixed.x=i.fixed.x),void 0!==i.fixed.y&&"boolean"===typeof i.fixed.y&&(e.fixed.y=i.fixed.y))),!0===n&&null===i.font&&(e.font=h.bridgeObject(r.font)),t.updateGroupOptions(e,i,o),void 0!==i.scaling&&h.mergeOptions(e.scaling,i.scaling,"label",r.scaling)}},{key:"checkMass",value:function(t,e){if(void 0!==t.mass&&t.mass<=0){var i="";void 0!==e&&(i=" in node id: "+e),console.log("%cNegative or zero mass disallowed"+i+", setting mass to 1.",T),t.mass=1}}}]),t}();e.default=C},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(6),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(2),d=function(){function t(){(0,a.default)(this,t)}return(0,l.default)(t,null,[{key:"choosify",value:function(t,e){var i=["node","edge","label"],n=!0,r=u.topMost(e,"chosen");if("boolean"===typeof r)n=r;else if("object"===("undefined"===typeof r?"undefined":(0,o.default)(r))){if(-1===i.indexOf(t))throw new Error("choosify: subOption '"+t+"' should be one of '"+i.join("', '")+"'");var s=u.topMost(e,["chosen",t]);"boolean"!==typeof s&&"function"!==typeof s||(n=s)}return n}},{key:"pointInRect",value:function(t,e,i){if(t.width<=0||t.height<=0)return!1;if(void 0!==i){var n={x:e.x-i.x,y:e.y-i.y};if(0!==i.angle){var r=-i.angle;e={x:Math.cos(r)*n.x-Math.sin(r)*n.y,y:Math.sin(r)*n.x+Math.cos(r)*n.y}}else e=n}var o=t.x+t.width,s=t.y+t.width;return t.left<e.x&&o>e.x&&t.top<e.y&&s>e.y}},{key:"isValidLabel",value:function(t){return"string"===typeof t&&""!==t}}]),t}();e.default=d},function(t,e,i){i(125);for(var n=i(18),r=i(26),o=i(31),s=i(13)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),h=0;h<a.length;h++){var l=a[h],u=n[l],d=u&&u.prototype;d&&!d[s]&&r(d,s,l),o[l]=o.Array}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports=!0},function(t,e,i){var n=i(32);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){var n=i(27),r=i(130),o=i(58),s=i(56)("IE_PROTO"),a=function(){},h=function(){var t,e=i(82)("iframe"),n=o.length;for(e.style.display="none",i(134).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),h=t.F;n--;)delete h.prototype[o[n]];return h()};t.exports=Object.create||function(t,e){var i;return null!==t?(a.prototype=n(t),i=new a,a.prototype=null,i[s]=t):i=h(),void 0===e?i:r(i,e)}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e,i){var n=i(57)("keys"),r=i(40);t.exports=function(t){return n[t]||(n[t]=r(t))}},function(t,e,i){var n=i(18),r=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(t){return r[t]||(r[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){var n=i(20).f,r=i(22),o=i(13)("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,i){var n=i(135)(!0);i(79)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e,i){e.f=i(13)},function(t,e,i){var n=i(18),r=i(7),o=i(52),s=i(61),a=i(20).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var i=f().hours(0).minutes(0).seconds(0).milliseconds(0),n=i.clone().add(-3,"days").valueOf(),r=i.clone().add(3,"days").valueOf();this.millisecondsPerPixelCache=void 0,void 0===e?(this.start=n,this.end=r):(this.start=e.start||n,this.end=e.end||r),this.rolling=!1,this.body=t,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={rtl:!1,start:null,end:null,moment:f,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:31536e10,rollingMode:{follow:!1,offset:.5}},this.options=c.extend({},this.defaultOptions),this.props={touch:{}},this.animationTimer=null,this.body.emitter.on("panstart",this._onDragStart.bind(this)),this.body.emitter.on("panmove",this._onDrag.bind(this)),this.body.emitter.on("panend",this._onDragEnd.bind(this)),this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this)),this.body.emitter.on("touch",this._onTouch.bind(this)),this.body.emitter.on("pinch",this._onPinch.bind(this)),this.body.dom.rollingModeBtn.addEventListener("click",this.startRolling.bind(this)),this.setOptions(e)}function o(t){if("horizontal"!=t&&"vertical"!=t)throw new TypeError('Unknown direction "'+t+'". Choose "horizontal" or "vertical".')}var s=i(8),a=n(s),h=i(19),l=n(h),u=i(6),d=n(u),c=i(2),f=i(9),p=i(16),m=i(36);r.prototype=new p,r.prototype.setOptions=function(t){if(t){var e=["animation","direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","rtl","showCurrentTime","rollingMode","horizontalScroll"];c.selectiveExtend(e,this.options,t),t.rollingMode&&t.rollingMode.follow&&this.startRolling(),("start"in t||"end"in t)&&this.setRange(t.start,t.end)}},r.prototype.startRolling=function(){function t(){e.stopRolling(),e.rolling=!0;var i=e.end-e.start,n=c.convert(new Date,"Date").valueOf(),r=n-i*e.options.rollingMode.offset,o=n+i*(1-e.options.rollingMode.offset),s={animation:!1};e.setRange(r,o,s),i=1/e.conversion(e.body.domProps.center.width).scale/10,i<30&&(i=30),i>1e3&&(i=1e3),e.body.dom.rollingModeBtn.style.visibility="hidden",e.currentTimeTimer=setTimeout(t,i)}var e=this;t()},r.prototype.stopRolling=function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),this.rolling=!1,this.body.dom.rollingModeBtn.style.visibility="visible")},r.prototype.setRange=function(t,e,i,n,r){i||(i={}),!0!==i.byUser&&(i.byUser=!1);var o=this,s=void 0!=t?c.convert(t,"Date").valueOf():null,h=void 0!=e?c.convert(e,"Date").valueOf():null;if(this._cancelAnimation(),this.millisecondsPerPixelCache=void 0,i.animation){var u=this.start,f=this.end,p="object"===(0,d.default)(i.animation)&&"duration"in i.animation?i.animation.duration:500,v="object"===(0,d.default)(i.animation)&&"easingFunction"in i.animation?i.animation.easingFunction:"easeInOutQuad",g=c.easingFunctions[v];if(!g)throw new Error("Unknown easing function "+(0,l.default)(v)+". Choose from: "+(0,a.default)(c.easingFunctions).join(", "));var y=(new Date).valueOf(),b=!1;return function t(){if(!o.props.touch.dragging){var e=(new Date).valueOf(),a=e-y,l=g(a/p),d=a>p,c=d||null===s?s:u+(s-u)*l,v=d||null===h?h:f+(h-f)*l;_=o._applyRange(c,v),m.updateHiddenDates(o.options.moment,o.body,o.options.hiddenDates),b=b||_;var w={start:new Date(o.start),end:new Date(o.end),byUser:i.byUser,event:i.event};if(r&&r(l,_,d),_&&o.body.emitter.emit("rangechange",w),d){if(b&&(o.body.emitter.emit("rangechanged",w),n))return n()}else o.animationTimer=setTimeout(t,20)}}()}var _=this._applyRange(s,h);if(m.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),_){var w={start:new Date(this.start),end:new Date(this.end),byUser:i.byUser,event:i.event};if(this.body.emitter.emit("rangechange",w),clearTimeout(o.timeoutID),o.timeoutID=setTimeout(function(){o.body.emitter.emit("rangechanged",w)},200),n)return n()}},r.prototype.getMillisecondsPerPixel=function(){return void 0===this.millisecondsPerPixelCache&&(this.millisecondsPerPixelCache=(this.end-this.start)/this.body.dom.center.clientWidth),this.millisecondsPerPixelCache},r.prototype._cancelAnimation=function(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)},r.prototype._applyRange=function(t,e){var i,n=null!=t?c.convert(t,"Date").valueOf():this.start,r=null!=e?c.convert(e,"Date").valueOf():this.end,o=null!=this.options.max?c.convert(this.options.max,"Date").valueOf():null,s=null!=this.options.min?c.convert(this.options.min,"Date").valueOf():null;if(isNaN(n)||null===n)throw new Error('Invalid start "'+t+'"');if(isNaN(r)||null===r)throw new Error('Invalid end "'+e+'"');if(r<n&&(r=n),null!==s&&n<s&&(i=s-n,n+=i,r+=i,null!=o&&r>o&&(r=o)),null!==o&&r>o&&(i=r-o,n-=i,r-=i,null!=s&&n<s&&(n=s)),null!==this.options.zoomMin){var a=parseFloat(this.options.zoomMin);if(a<0&&(a=0),r-n<a){this.end-this.start===a&&n>=this.start-.5&&r<=this.end?(n=this.start,r=this.end):(i=a-(r-n),n-=i/2,r+=i/2)}}if(null!==this.options.zoomMax){var h=parseFloat(this.options.zoomMax);h<0&&(h=0),r-n>h&&(this.end-this.start===h&&n<this.start&&r>this.end?(n=this.start,r=this.end):(i=r-n-h,n+=i/2,r-=i/2))}var l=this.start!=n||this.end!=r;return n>=this.start&&n<=this.end||r>=this.start&&r<=this.end||this.start>=n&&this.start<=r||this.end>=n&&this.end<=r||this.body.emitter.emit("checkRangedItems"),this.start=n,this.end=r,l},r.prototype.getRange=function(){return{start:this.start,end:this.end}},r.prototype.conversion=function(t,e){return r.conversion(this.start,this.end,t,e)},r.conversion=function(t,e,i,n){return void 0===n&&(n=0),0!=i&&e-t!=0?{offset:t,scale:i/(e-t-n)}:{offset:0,scale:1}},r.prototype._onDragStart=function(t){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(t)&&this.props.touch.allowDragging&&(this.stopRolling(),this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))},r.prototype._onDrag=function(t){if(t&&this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging){var e=this.options.direction;o(e);var i="horizontal"==e?t.deltaX:t.deltaY;i-=this.deltaDifference;var n=this.props.touch.end-this.props.touch.start;n-=m.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);var r,s="horizontal"==e?this.body.domProps.center.width:this.body.domProps.center.height;r=this.options.rtl?i/s*n:-i/s*n;var a=this.props.touch.start+r,h=this.props.touch.end+r,l=m.snapAwayFromHidden(this.body.hiddenDates,a,this.previousDelta-i,!0),u=m.snapAwayFromHidden(this.body.hiddenDates,h,this.previousDelta-i,!0);if(l!=a||u!=h)return this.deltaDifference+=i,this.props.touch.start=l,this.props.touch.end=u,void this._onDrag(t);this.previousDelta=i,this._applyRange(a,h);var d=new Date(this.start),c=new Date(this.end);this.body.emitter.emit("rangechange",{start:d,end:c,byUser:!0,event:t}),this.body.emitter.emit("panmove")}},r.prototype._onDragEnd=function(t){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0,event:t}))},r.prototype._onMouseWheel=function(t){var e=0;if(t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),!(this.options.zoomKey&&!t[this.options.zoomKey]&&this.options.zoomable||!this.options.zoomable&&this.options.moveable)&&this.options.zoomable&&this.options.moveable&&this._isInsideRange(t)&&e){var i;i=e<0?1-e/5:1/(1+e/5);var n;if(this.rolling)n=this.start+(this.end-this.start)*this.options.rollingMode.offset;else{var r=this.getPointer({x:t.clientX,y:t.clientY},this.body.dom.center);n=this._pointerToDate(r)}this.zoom(i,n,e,t),t.preventDefault()}},r.prototype._onTouch=function(t){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.scaleOffset=0,this.deltaDifference=0,c.preventDefault(t)},r.prototype._onPinch=function(t){if(this.options.zoomable&&this.options.moveable){c.preventDefault(t),this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(t.center,this.body.dom.center)),this.stopRolling();var e=1/(t.scale+this.scaleOffset),i=this._pointerToDate(this.props.touch.center),n=m.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),r=m.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,i),o=n-r,s=i-r+(this.props.touch.start-(i-r))*e,a=i+o+(this.props.touch.end-(i+o))*e;this.startToFront=1-e<=0,this.endToFront=e-1<=0;var h=m.snapAwayFromHidden(this.body.hiddenDates,s,1-e,!0),l=m.snapAwayFromHidden(this.body.hiddenDates,a,e-1,!0);h==s&&l==a||(this.props.touch.start=h,this.props.touch.end=l,this.scaleOffset=1-t.scale,s=h,a=l);var u={animation:!1,byUser:!0,event:t};this.setRange(s,a,u),this.startToFront=!1,this.endToFront=!0}},r.prototype._isInsideRange=function(t){var e,i=t.center?t.center.x:t.clientX;e=this.options.rtl?i-c.getAbsoluteLeft(this.body.dom.centerContainer):c.getAbsoluteRight(this.body.dom.centerContainer)-i;var n=this.body.util.toTime(e);return n>=this.start&&n<=this.end},r.prototype._pointerToDate=function(t){var e,i=this.options.direction;if(o(i),"horizontal"==i)return this.body.util.toTime(t.x).valueOf();var n=this.body.domProps.center.height;return e=this.conversion(n),t.y/e.scale+e.offset},r.prototype.getPointer=function(t,e){return this.options.rtl?{x:c.getAbsoluteRight(e)-t.x,y:t.y-c.getAbsoluteTop(e)}:{x:t.x-c.getAbsoluteLeft(e),y:t.y-c.getAbsoluteTop(e)}},r.prototype.zoom=function(t,e,i,n){null==e&&(e=(this.start+this.end)/2);var r=m.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),o=m.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,e),s=r-o,a=e-o+(this.start-(e-o))*t,h=e+s+(this.end-(e+s))*t;this.startToFront=!(i>0),this.endToFront=!(-i>0);var l=m.snapAwayFromHidden(this.body.hiddenDates,a,i,!0),u=m.snapAwayFromHidden(this.body.hiddenDates,h,-i,!0);l==a&&u==h||(a=l,h=u);var d={animation:!1,byUser:!0,event:n};this.setRange(a,h,d),this.startToFront=!1,this.endToFront=!0},r.prototype.move=function(t){var e=this.end-this.start,i=this.start+e*t,n=this.end+e*t;this.start=i,this.end=n},r.prototype.moveTo=function(t){var e=(this.start+this.end)/2,i=e-t,n=this.start-i,r=this.end-i,o={animation:!1,byUser:!0,event:null};this.setRange(n,r,o)},t.exports=r},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function r(){}var o=i(19),s=n(o),a=i(6),h=n(a),l=i(44),u=i(10),d=i(37),c=i(2),f=i(45),p=i(97),m=i(36),v=i(46);l(r.prototype),r.prototype._create=function(t){function e(t){this.isActive()&&this.emit("mousewheel",t);var e=0,i=0;if("detail"in t&&(i=-1*t.detail),"wheelDelta"in t&&(i=t.wheelDelta),"wheelDeltaY"in t&&(i=t.wheelDeltaY),"wheelDeltaX"in t&&(e=-1*t.wheelDeltaX),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=-1*i,i=0),"deltaY"in t&&(i=-1*t.deltaY),"deltaX"in t&&(e=t.deltaX),this.options.zoomKey&&!t[this.options.zoomKey])if(t.preventDefault(),this.options.verticalScroll&&Math.abs(i)>=Math.abs(e)){var n=this.props.scrollTop,r=n+i;this.isActive()&&(this._setScrollTop(r),this._redraw(),this.emit("scroll",t))}else if(this.options.horizontalScroll){var o=Math.abs(e)>=Math.abs(i)?e:i,s=o/120*(this.range.end-this.range.start)/20,a=this.range.start+s,h=this.range.end+s,l={animation:!1,byUser:!0,event:t};this.range.setRange(a,h,l)}}function i(t){if(o.options.verticalScroll&&(t.preventDefault(),o.isActive())){var e=-t.target.scrollTop;o._setScrollTop(e),o._redraw(),o.emit("scrollSide",t)}}function n(t){if(t.preventDefault&&t.preventDefault(),!(!t.target.className.indexOf("vis")>-1)&&!a)return t.dataTransfer.dropEffect="move",a=!0,!1}function r(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation();try{var e=JSON.parse(t.dataTransfer.getData("text"));if(!e||!e.content)return}catch(t){return!1}return a=!1,t.center={x:t.clientX,y:t.clientY},"item"!==e.target?o.itemSet._onAddItem(t):o.itemSet._onDropObjectOnItem(t),o.emit("drop",o.getEventProperties(t)),!1}this.dom={},this.dom.container=t,this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.rollingModeBtn=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.rollingModeBtn.className="vis-rolling-mode-btn",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.rollingModeBtn),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.on("rangechange",function(){!0===this.initialDrawDone&&this._redraw()}.bind(this)),this.on("rangechanged",function(){this.initialRangeChangeDone||(this.initialRangeChangeDone=!0)}.bind(this)),this.on("touch",this._onTouch.bind(this)),this.on("panmove",this._onDrag.bind(this));var o=this;this._origRedraw=this._redraw.bind(this),this._redraw=c.throttle(this._origRedraw),this.on("_change",function(t){o.itemSet&&o.itemSet.initialItemSetDrawn&&t&&1==t.queue?o._redraw():o._origRedraw()}),this.hammer=new u(this.dom.root);var s=this.hammer.get("pinch").set({enable:!0});d.disablePreventDefaultVertically(s),this.hammer.get("pan").set({threshold:5,direction:u.DIRECTION_HORIZONTAL}),this.listeners={},["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(function(t){var e=function(e){o.isActive()&&o.emit(t,e)};o.hammer.on(t,e),o.listeners[t]=e}),d.onTouch(this.hammer,function(t){o.emit("touch",t)}.bind(this)),d.onRelease(this.hammer,function(t){o.emit("release",t)}.bind(this)),this.dom.centerContainer.addEventListener?(this.dom.centerContainer.addEventListener("mousewheel",e.bind(this),!1),this.dom.centerContainer.addEventListener("DOMMouseScroll",e.bind(this),!1)):this.dom.centerContainer.attachEvent("onmousewheel",e.bind(this)),this.dom.left.parentNode.addEventListener("scroll",i.bind(this)),this.dom.right.parentNode.addEventListener("scroll",i.bind(this));var a=!1;if(this.dom.center.addEventListener("dragover",n.bind(this),!1),this.dom.center.addEventListener("drop",r.bind(this),!1),this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,this.initialRangeChangeDone=!1,!t)throw new Error("No container provided");t.appendChild(this.dom.root)},r.prototype.setOptions=function(t){if(t){var e=["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","rtl","zoomKey","horizontalScroll","verticalScroll"];if(c.selectiveExtend(e,this.options,t),this.dom.rollingModeBtn.style.visibility="hidden",this.options.rtl&&(this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"),this.options.verticalScroll&&(this.options.rtl?this.dom.rightContainer.className="vis-panel vis-right vis-vertical-scroll":this.dom.leftContainer.className="vis-panel vis-left vis-vertical-scroll"),"object"!==(0,h.default)(this.options.orientation)&&(this.options.orientation={item:void 0,axis:void 0}),"orientation"in t&&("string"===typeof t.orientation?this.options.orientation={item:t.orientation,axis:t.orientation}:"object"===(0,h.default)(t.orientation)&&("item"in t.orientation&&(this.options.orientation.item=t.orientation.item),"axis"in t.orientation&&(this.options.orientation.axis=t.orientation.axis))),"both"===this.options.orientation.axis){if(!this.timeAxis2){var i=this.timeAxis2=new f(this.body);i.setOptions=function(t){var e=t?c.extend({},t):{};e.orientation="top",f.prototype.setOptions.call(i,e)},this.components.push(i)}}else if(this.timeAxis2){var n=this.components.indexOf(this.timeAxis2);-1!==n&&this.components.splice(n,1),this.timeAxis2.destroy(),this.timeAxis2=null}if("function"==typeof t.drawPoints&&(t.drawPoints={onRender:t.drawPoints}),"hiddenDates"in this.options&&m.convertHiddenOptions(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in t&&(t.clickToUse?this.activator||(this.activator=new p(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),"showCustomTime"in t)throw new Error("Option `showCustomTime` is deprecated. Create a custom time bar via timeline.addCustomTime(time [, id])");this._initAutoResize()}if(this.components.forEach(function(e){return e.setOptions(t)}),"configure"in t){this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(t.configure);var r=c.deepExtend({},this.options);this.components.forEach(function(t){c.deepExtend(r,t.options)}),this.configurator.setModuleOptions({global:r})}this._redraw()},r.prototype.isActive=function(){return!this.activator||this.activator.active},r.prototype.destroy=function(){this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(var t in this.listeners)this.listeners.hasOwnProperty(t)&&delete this.listeners[t];this.listeners=null,this.hammer=null,this.components.forEach(function(t){return t.destroy()}),this.body=null},r.prototype.setCustomTime=function(t,e){var i=this.customTimes.filter(function(t){return e===t.options.id});if(0===i.length)throw new Error("No custom time bar found with id "+(0,s.default)(e));i.length>0&&i[0].setCustomTime(t)},r.prototype.getCustomTime=function(t){var e=this.customTimes.filter(function(e){return e.options.id===t});if(0===e.length)throw new Error("No custom time bar found with id "+(0,s.default)(t));return e[0].getCustomTime()},r.prototype.setCustomTimeTitle=function(t,e){var i=this.customTimes.filter(function(t){return t.options.id===e});if(0===i.length)throw new Error("No custom time bar found with id "+(0,s.default)(e));if(i.length>0)return i[0].setCustomTitle(t)},r.prototype.getEventProperties=function(t){return{event:t}},r.prototype.addCustomTime=function(t,e){var i=void 0!==t?c.convert(t,"Date").valueOf():new Date;if(this.customTimes.some(function(t){return t.options.id===e}))throw new Error("A custom time with id "+(0,s.default)(e)+" already exists");var n=new v(this.body,c.extend({},this.options,{time:i,id:e}));return this.customTimes.push(n),this.components.push(n),this._redraw(),e},r.prototype.removeCustomTime=function(t){var e=this.customTimes.filter(function(e){return e.options.id===t});if(0===e.length)throw new Error("No custom time bar found with id "+(0,s.default)(t));e.forEach(function(t){this.customTimes.splice(this.customTimes.indexOf(t),1),this.components.splice(this.components.indexOf(t),1),t.destroy()}.bind(this))},r.prototype.getVisibleItems=function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]},r.prototype.fit=function(t,e){var i=this.getDataRange();if(null!==i.min||null!==i.max){var n=i.max-i.min,r=new Date(i.min.valueOf()-.01*n),o=new Date(i.max.valueOf()+.01*n),s=!t||void 0===t.animation||t.animation;this.range.setRange(r,o,{animation:s},e)}},r.prototype.getDataRange=function(){throw new Error("Cannot invoke abstract method getDataRange")},r.prototype.setWindow=function(t,e,i,n){"function"==typeof arguments[2]&&(n=arguments[2],i={});var r,o;1==arguments.length?(o=arguments[0],r=void 0===o.animation||o.animation,this.range.setRange(o.start,o.end,{animation:r})):2==arguments.length&&"function"==typeof arguments[1]?(o=arguments[0],n=arguments[1],r=void 0===o.animation||o.animation,this.range.setRange(o.start,o.end,{animation:r},n)):(r=!i||void 0===i.animation||i.animation,this.range.setRange(t,e,{animation:r},n))},r.prototype.moveTo=function(t,e,i){"function"==typeof arguments[1]&&(i=arguments[1],e={});var n=this.range.end-this.range.start,r=c.convert(t,"Date").valueOf(),o=r-n/2,s=r+n/2,a=!e||void 0===e.animation||e.animation;this.range.setRange(o,s,{animation:a},i)},r.prototype.getWindow=function(){var t=this.range.getRange();return{start:new Date(t.start),end:new Date(t.end)}},r.prototype.zoomIn=function(t,e,i){if(!(!t||t<0||t>1)){"function"==typeof arguments[1]&&(i=arguments[1],e={});var n=this.getWindow(),r=n.start.valueOf(),o=n.end.valueOf(),s=o-r,a=s/(1+t),h=(s-a)/2,l=r+h,u=o-h;this.setWindow(l,u,e,i)}},r.prototype.zoomOut=function(t,e,i){if(!(!t||t<0||t>1)){"function"==typeof arguments[1]&&(i=arguments[1],e={});var n=this.getWindow(),r=n.start.valueOf(),o=n.end.valueOf(),s=o-r,a=r-s*t/2,h=o+s*t/2;this.setWindow(a,h,e,i)}},r.prototype.redraw=function(){this._redraw()},r.prototype._redraw=function(){this.redrawCount++;var t=!1,e=this.options,i=this.props,n=this.dom;if(n&&n.container&&0!=n.root.offsetWidth){m.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),"top"==e.orientation?(c.addClassName(n.root,"vis-top"),c.removeClassName(n.root,"vis-bottom")):(c.removeClassName(n.root,"vis-top"),c.addClassName(n.root,"vis-bottom")),n.root.style.maxHeight=c.option.asSize(e.maxHeight,""),n.root.style.minHeight=c.option.asSize(e.minHeight,""),n.root.style.width=c.option.asSize(e.width,""),i.border.left=(n.centerContainer.offsetWidth-n.centerContainer.clientWidth)/2,i.border.right=i.border.left,i.border.top=(n.centerContainer.offsetHeight-n.centerContainer.clientHeight)/2,i.border.bottom=i.border.top,i.borderRootHeight=n.root.offsetHeight-n.root.clientHeight,i.borderRootWidth=n.root.offsetWidth-n.root.clientWidth,0===n.centerContainer.clientHeight&&(i.border.left=i.border.top,i.border.right=i.border.left),0===n.root.clientHeight&&(i.borderRootWidth=i.borderRootHeight),i.center.height=n.center.offsetHeight,i.left.height=n.left.offsetHeight,i.right.height=n.right.offsetHeight,i.top.height=n.top.clientHeight||-i.border.top,i.bottom.height=n.bottom.clientHeight||-i.border.bottom;var r=Math.max(i.left.height,i.center.height,i.right.height),o=i.top.height+r+i.bottom.height+i.borderRootHeight+i.border.top+i.border.bottom;n.root.style.height=c.option.asSize(e.height,o+"px"),i.root.height=n.root.offsetHeight,i.background.height=i.root.height-i.borderRootHeight;var s=i.root.height-i.top.height-i.bottom.height-i.borderRootHeight;i.centerContainer.height=s,i.leftContainer.height=s,i.rightContainer.height=i.leftContainer.height,i.root.width=n.root.offsetWidth,i.background.width=i.root.width-i.borderRootWidth,this.initialDrawDone||(i.scrollbarWidth=c.getScrollBarWidth()),e.verticalScroll?e.rtl?(i.left.width=n.leftContainer.clientWidth||-i.border.left,i.right.width=n.rightContainer.clientWidth+i.scrollbarWidth||-i.border.right):(i.left.width=n.leftContainer.clientWidth+i.scrollbarWidth||-i.border.left,i.right.width=n.rightContainer.clientWidth||-i.border.right):(i.left.width=n.leftContainer.clientWidth||-i.border.left,i.right.width=n.rightContainer.clientWidth||-i.border.right),this._setDOM();var a=this._updateScrollTop();"top"!=e.orientation.item&&(a+=Math.max(i.centerContainer.height-i.center.height-i.border.top-i.border.bottom,0)),n.center.style.top=a+"px";var h=0==i.scrollTop?"hidden":"",l=i.scrollTop==i.scrollTopMin?"hidden":"";n.shadowTop.style.visibility=h,n.shadowBottom.style.visibility=l,n.shadowTopLeft.style.visibility=h,n.shadowBottomLeft.style.visibility=l,n.shadowTopRight.style.visibility=h,n.shadowBottomRight.style.visibility=l,e.verticalScroll&&(n.rightContainer.className="vis-panel vis-right vis-vertical-scroll",n.leftContainer.className="vis-panel vis-left vis-vertical-scroll",n.shadowTopRight.style.visibility="hidden",n.shadowBottomRight.style.visibility="hidden",n.shadowTopLeft.style.visibility="hidden",n.shadowBottomLeft.style.visibility="hidden",n.left.style.top="0px",n.right.style.top="0px"),(!e.verticalScroll||i.center.height<i.centerContainer.height)&&(n.left.style.top=a+"px",n.right.style.top=a+"px",n.rightContainer.className=n.rightContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),n.leftContainer.className=n.leftContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),i.left.width=n.leftContainer.clientWidth||-i.border.left,i.right.width=n.rightContainer.clientWidth||-i.border.right,this._setDOM());var d=i.center.height>i.centerContainer.height;this.hammer.get("pan").set({direction:d?u.DIRECTION_ALL:u.DIRECTION_HORIZONTAL}),this.components.forEach(function(e){t=e.redraw()||t});if(t){if(this.redrawCount<5)return void this.body.emitter.emit("_change");console.log("WARNING: infinite loop in redraw?")}else this.redrawCount=0;this.body.emitter.emit("changed")}},r.prototype._setDOM=function(){var t=this.props,e=this.dom;t.leftContainer.width=t.left.width,t.rightContainer.width=t.right.width;var i=t.root.width-t.left.width-t.right.width-t.borderRootWidth;t.center.width=i,t.centerContainer.width=i,t.top.width=i,t.bottom.width=i,e.background.style.height=t.background.height+"px",e.backgroundVertical.style.height=t.background.height+"px",e.backgroundHorizontal.style.height=t.centerContainer.height+"px",e.centerContainer.style.height=t.centerContainer.height+"px",e.leftContainer.style.height=t.leftContainer.height+"px",e.rightContainer.style.height=t.rightContainer.height+"px",e.background.style.width=t.background.width+"px",e.backgroundVertical.style.width=t.centerContainer.width+"px",e.backgroundHorizontal.style.width=t.background.width+"px",e.centerContainer.style.width=t.center.width+"px",e.top.style.width=t.top.width+"px",e.bottom.style.width=t.bottom.width+"px",e.background.style.left="0",e.background.style.top="0",e.backgroundVertical.style.left=t.left.width+t.border.left+"px",e.backgroundVertical.style.top="0",e.backgroundHorizontal.style.left="0",e.backgroundHorizontal.style.top=t.top.height+"px",e.centerContainer.style.left=t.left.width+"px",e.centerContainer.style.top=t.top.height+"px",e.leftContainer.style.left="0",e.leftContainer.style.top=t.top.height+"px",e.rightContainer.style.left=t.left.width+t.center.width+"px",e.rightContainer.style.top=t.top.height+"px",e.top.style.left=t.left.width+"px",e.top.style.top="0",e.bottom.style.left=t.left.width+"px",e.bottom.style.top=t.top.height+t.centerContainer.height+"px",e.center.style.left="0",e.left.style.left="0",e.right.style.left="0"},r.prototype.repaint=function(){throw new Error("Function repaint is deprecated. Use redraw instead.")},r.prototype.setCurrentTime=function(t){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(t)},r.prototype.getCurrentTime=function(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()},r.prototype._toTime=function(t){return m.toTime(this,t,this.props.center.width)},r.prototype._toGlobalTime=function(t){return m.toTime(this,t,this.props.root.width)},r.prototype._toScreen=function(t){return m.toScreen(this,t,this.props.center.width)},r.prototype._toGlobalScreen=function(t){return m.toScreen(this,t,this.props.root.width)},r.prototype._initAutoResize=function(){1==this.options.autoResize?this._startAutoResize():this._stopAutoResize()},r.prototype._startAutoResize=function(){var t=this;this._stopAutoResize(),this._onResize=function(){if(1!=t.options.autoResize)return void t._stopAutoResize();t.dom.root&&(t.dom.root.offsetWidth==t.props.lastWidth&&t.dom.root.offsetHeight==t.props.lastHeight||(t.props.lastWidth=t.dom.root.offsetWidth,t.props.lastHeight=t.dom.root.offsetHeight,t.props.scrollbarWidth=c.getScrollBarWidth(),t.body.emitter.emit("_change")))},c.addEventListener(window,"resize",this._onResize),t.dom.root&&(t.props.lastWidth=t.dom.root.offsetWidth,t.props.lastHeight=t.dom.root.offsetHeight),this.watchTimer=setInterval(this._onResize,1e3)},r.prototype._stopAutoResize=function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(c.removeEventListener(window,"resize",this._onResize),this._onResize=null)},r.prototype._onTouch=function(t){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop},r.prototype._onPinch=function(t){this.touch.allowDragging=!1},r.prototype._onDrag=function(t){if(t&&this.touch.allowDragging){var e=t.deltaY,i=this._getScrollTop(),n=this._setScrollTop(this.touch.initialScrollTop+e);this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),n!=i&&this.emit("verticalDrag")}},r.prototype._setScrollTop=function(t){return this.props.scrollTop=t,this._updateScrollTop(),this.props.scrollTop},r.prototype._updateScrollTop=function(){var t=Math.min(this.props.centerContainer.height-this.props.center.height,0);return t!=this.props.scrollTopMin&&("top"!=this.options.orientation.item&&(this.props.scrollTop+=t-this.props.scrollTopMin),this.props.scrollTopMin=t),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<t&&(this.props.scrollTop=t),this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),this.props.scrollTop},r.prototype._getScrollTop=function(){return this.props.scrollTop},r.prototype._createConfigurator=function(){throw new Error("Cannot invoke abstract method _createConfigurator")},t.exports=r},function(t,e,i){function n(t,e,i,o,s){this.moment=r,this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(t,e,i),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Array.isArray(o)?this.hiddenDates=o:this.hiddenDates=void 0!=o?[o]:[],this.format=n.FORMAT,this.options=s||{}}var r=i(9),o=i(36),s=i(2);n.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},n.prototype.setMoment=function(t){this.moment=t,this.current=this.moment(this.current.valueOf()),this._start=this.moment(this._start.valueOf()),this._end=this.moment(this._end.valueOf())},n.prototype.setFormat=function(t){var e=s.deepExtend({},n.FORMAT);this.format=s.deepExtend(e,t)},n.prototype.setRange=function(t,e,i){if(!(t instanceof Date)||!(e instanceof Date))throw"No legal start or end date in method setRange";this._start=void 0!=t?this.moment(t.valueOf()):new Date,this._end=void 0!=e?this.moment(e.valueOf()):new Date,this.autoScale&&this.setMinimumStep(i)},n.prototype.start=function(){this.current=this._start.clone(),this.roundToMinor()},n.prototype.roundToMinor=function(){switch("week"==this.scale&&this.current.weekday(0),this.scale){case"year":this.current.year(this.step*Math.floor(this.current.year()/this.step)),this.current.month(0);case"month":this.current.date(1);case"week":case"day":case"weekday":this.current.hours(0);case"hour":this.current.minutes(0);case"minute":this.current.seconds(0);case"second":this.current.milliseconds(0)}if(1!=this.step)switch(this.scale){case"millisecond":this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current.subtract((this.current.date()-1)%this.step,"day");break;case"week":this.current.subtract(this.current.week()%this.step,"week");break;case"month":this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current.subtract(this.current.year()%this.step,"year")}},n.prototype.hasNext=function(){return this.current.valueOf()<=this._end.valueOf()},n.prototype.next=function(){var t=this.current.valueOf();switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour"),this.current.month()<6?this.current.subtract(this.current.hours()%this.step,"hour"):this.current.hours()%this.step!==0&&this.current.add(this.step-this.current.hours()%this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"week":if(0!==this.current.weekday())this.current.weekday(0),this.current.add(this.step,"week");else if(!1===this.options.showMajorLabels)this.current.add(this.step,"week");else{var e=this.current.clone();e.add(1,"week"),e.isSame(this.current,"month")?this.current.add(this.step,"week"):(this.current.add(this.step,"week"),this.current.date(1))}break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year")}if(1!=this.step)switch(this.scale){case"millisecond":this.current.milliseconds()>0&&this.current.milliseconds()<this.step&&this.current.milliseconds(0);break;case"second":this.current.seconds()>0&&this.current.seconds()<this.step&&this.current.seconds(0);break;case"minute":this.current.minutes()>0&&this.current.minutes()<this.step&&this.current.minutes(0);break;case"hour":this.current.hours()>0&&this.current.hours()<this.step&&this.current.hours(0);break;case"weekday":case"day":this.current.date()<this.step+1&&this.current.date(1);break;case"week":this.current.week()<this.step&&this.current.week(1);break;case"month":this.current.month()<this.step&&this.current.month(0)}this.current.valueOf()==t&&(this.current=this._end.clone()),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,o.stepOverHiddenDates(this.moment,this,t)},n.prototype.getCurrent=function(){return this.current},n.prototype.setScale=function(t){t&&"string"==typeof t.scale&&(this.scale=t.scale,this.step=t.step>0?t.step:1,this.autoScale=!1)},n.prototype.setAutoScale=function(t){this.autoScale=t},n.prototype.setMinimumStep=function(t){if(void 0!=t){31104e9>t&&(this.scale="year",this.step=1e3),15552e9>t&&(this.scale="year",this.step=500),31104e8>t&&(this.scale="year",this.step=100),15552e8>t&&(this.scale="year",this.step=50),31104e7>t&&(this.scale="year",this.step=10),15552e7>t&&(this.scale="year",this.step=5),31104e6>t&&(this.scale="year",this.step=1),7776e6>t&&(this.scale="month",this.step=3),2592e6>t&&(this.scale="month",this.step=1),432e6>t&&(this.scale="day",this.step=5),1728e5>t&&(this.scale="day",this.step=2),864e5>t&&(this.scale="day",this.step=1),432e5>t&&(this.scale="weekday",this.step=1),144e5>t&&(this.scale="hour",this.step=4),36e5>t&&(this.scale="hour",this.step=1),9e5>t&&(this.scale="minute",this.step=15),6e5>t&&(this.scale="minute",this.step=10),3e5>t&&(this.scale="minute",this.step=5),6e4>t&&(this.scale="minute",this.step=1),15e3>t&&(this.scale="second",this.step=15),1e4>t&&(this.scale="second",this.step=10),5e3>t&&(this.scale="second",this.step=5),1e3>t&&(this.scale="second",this.step=1),200>t&&(this.scale="millisecond",this.step=200),100>t&&(this.scale="millisecond",this.step=100),50>t&&(this.scale="millisecond",this.step=50),10>t&&(this.scale="millisecond",this.step=10),5>t&&(this.scale="millisecond",this.step=5),1>t&&(this.scale="millisecond",this.step=1)}},n.snap=function(t,e,i){var n=r(t);if("year"==e){var o=n.year()+Math.round(n.month()/12);n.year(Math.round(o/i)*i),n.month(0),n.date(0),n.hours(0),n.minutes(0),n.seconds(0),n.milliseconds(0)}else if("month"==e)n.date()>15?(n.date(1),n.add(1,"month")):n.date(1),n.hours(0),n.minutes(0),n.seconds(0),n.milliseconds(0);else if("week"==e)n.weekday()>2?(n.weekday(0),n.add(1,"week")):n.weekday(0),n.hours(0),n.minutes(0),n.seconds(0),n.milliseconds(0);else if("day"==e){switch(i){case 5:case 2:n.hours(24*Math.round(n.hours()/24));break;default:n.hours(12*Math.round(n.hours()/12))}n.minutes(0),n.seconds(0),n.milliseconds(0)}else if("weekday"==e){switch(i){case 5:case 2:n.hours(12*Math.round(n.hours()/12));break;default:n.hours(6*Math.round(n.hours()/6))}n.minutes(0),n.seconds(0),n.milliseconds(0)}else if("hour"==e){switch(i){case 4:n.minutes(60*Math.round(n.minutes()/60));break;default:n.minutes(30*Math.round(n.minutes()/30))}n.seconds(0),n.milliseconds(0)}else if("minute"==e){switch(i){case 15:case 10:n.minutes(5*Math.round(n.minutes()/5)),n.seconds(0);break;case 5:n.seconds(60*Math.round(n.seconds()/60));break;default:n.seconds(30*Math.round(n.seconds()/30))}n.milliseconds(0)}else if("second"==e)switch(i){case 15:case 10:n.seconds(5*Math.round(n.seconds()/5)),n.milliseconds(0);break;case 5:n.milliseconds(1e3*Math.round(n.milliseconds()/1e3));break;default:n.milliseconds(500*Math.round(n.milliseconds()/500))}else if("millisecond"==e){var s=i>5?i/2:1;n.milliseconds(Math.round(n.milliseconds()/s)*s)}return n},n.prototype.isMajor=function(){if(1==this.switchedYear)switch(this.scale){case"year":case"month":case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedMonth)switch(this.scale){case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedDay)switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}var t=this.moment(this.current);switch(this.scale){case"millisecond":return 0==t.milliseconds();case"second":return 0==t.seconds();case"minute":return 0==t.hours()&&0==t.minutes();case"hour":return 0==t.hours();case"weekday":case"day":case"week":return 1==t.date();case"month":return 0==t.month();case"year":default:return!1}},n.prototype.getLabelMinor=function(t){if(void 0==t&&(t=this.current),t instanceof Date&&(t=this.moment(t)),"function"===typeof this.format.minorLabels)return this.format.minorLabels(t,this.scale,this.step);var e=this.format.minorLabels[this.scale];switch(this.scale){case"week":if(this.isMajor()&&0!==t.weekday())return"";default:return e&&e.length>0?this.moment(t).format(e):""}},n.prototype.getLabelMajor=function(t){if(void 0==t&&(t=this.current),t instanceof Date&&(t=this.moment(t)),"function"===typeof this.format.majorLabels)return this.format.majorLabels(t,this.scale,this.step);var e=this.format.majorLabels[this.scale];return e&&e.length>0?this.moment(t).format(e):""},n.prototype.getClassName=function(){function t(t){return t/a%2==0?" vis-even":" vis-odd"}function e(t){return t.isSame(new Date,"day")?" vis-today":t.isSame(r().add(1,"day"),"day")?" vis-tomorrow":t.isSame(r().add(-1,"day"),"day")?" vis-yesterday":""}function i(t){return t.isSame(new Date,"week")?" vis-current-week":""}function n(t){return t.isSame(new Date,"month")?" vis-current-month":""}var r=this.moment,o=this.moment(this.current),s=o.locale?o.locale("en"):o.lang("en"),a=this.step,h=[];switch(this.scale){case"millisecond":h.push(e(s)),h.push(t(s.milliseconds()));break;case"second":h.push(e(s)),h.push(t(s.seconds()));break;case"minute":h.push(e(s)),h.push(t(s.minutes()));break;case"hour":h.push("vis-h"+s.hours()+(4==this.step?"-h"+(s.hours()+4):"")),h.push(e(s)),h.push(t(s.hours()));break;case"weekday":h.push("vis-"+s.format("dddd").toLowerCase()),h.push(e(s)),h.push(i(s)),h.push(t(s.date()));break;case"day":h.push("vis-day"+s.date()),h.push("vis-"+s.format("MMMM").toLowerCase()),h.push(e(s)),h.push(n(s)),h.push(this.step<=2?e(s):""),h.push(this.step<=2?"vis-"+s.format("dddd").toLowerCase():""),h.push(t(s.date()-1));break;case"week":h.push("vis-week"+s.format("w")),h.push(i(s)),h.push(t(s.week()));break;case"month":h.push("vis-"+s.format("MMMM").toLowerCase()),h.push(n(s)),h.push(t(s.month()));break;case"year":h.push("vis-year"+s.year()),h.push(function(t){return t.isSame(new Date,"year")?" vis-current-year":""}(s)),h.push(t(s.year()))}return h.filter(String).join(" ")},t.exports=n},function(t,e,i){function n(t,e){this.body=t,this.defaultOptions={rtl:!1,showCurrentTime:!0,moment:s,locales:a,locale:"en"},this.options=r.extend({},this.defaultOptions),this.offset=0,this._create(),this.setOptions(e)}var r=i(2),o=i(16),s=i(9),a=i(98);n.prototype=new o,n.prototype._create=function(){var t=document.createElement("div");t.className="vis-current-time",t.style.position="absolute",t.style.top="0px",t.style.height="100%",this.bar=t},n.prototype.destroy=function(){this.options.showCurrentTime=!1,this.redraw(),this.body=null},n.prototype.setOptions=function(t){t&&r.selectiveExtend(["rtl","showCurrentTime","moment","locale","locales"],this.options,t)},n.prototype.redraw=function(){if(this.options.showCurrentTime){var t=this.body.dom.backgroundVertical;this.bar.parentNode!=t&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),t.appendChild(this.bar),this.start());var e=this.options.moment((new Date).valueOf()+this.offset),i=this.body.util.toScreen(e),n=this.options.locales[this.options.locale];n||(this.warned||(console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline/#Localization"),this.warned=!0),n=this.options.locales.en);var r=n.current+" "+n.time+": "+e.format("dddd, MMMM Do YYYY, H:mm:ss");r=r.charAt(0).toUpperCase()+r.substring(1),this.options.rtl?this.bar.style.right=i+"px":this.bar.style.left=i+"px",this.bar.title=r}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1},n.prototype.start=function(){function t(){e.stop();var i=e.body.range.conversion(e.body.domProps.center.width).scale,n=1/i/10;n<30&&(n=30),n>1e3&&(n=1e3),e.redraw(),e.body.emitter.emit("currentTimeTick"),e.currentTimeTimer=setTimeout(t,n)}var e=this;t()},n.prototype.stop=function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)},n.prototype.setCurrentTime=function(t){var e=r.convert(t,"Date").valueOf(),i=(new Date).valueOf();this.offset=e-i,this.redraw()},n.prototype.getCurrentTime=function(){return new Date((new Date).valueOf()+this.offset)},t.exports=n},function(t,e,i){function n(t,e,i){if(this.groupId=t,this.subgroups={},this.subgroupStack={},this.subgroupStackAll=!1,this.doInnerStack=!1,this.subgroupIndex=0,this.subgroupOrderer=e&&e.subgroupOrder,this.itemSet=i,this.isVisible=null,this.stackDirty=!0,e&&e.nestedGroups&&(this.nestedGroups=e.nestedGroups,0==e.showNested?this.showNested=!1:this.showNested=!0),e&&e.subgroupStack)if("boolean"===typeof e.subgroupStack)this.doInnerStack=e.subgroupStack,this.subgroupStackAll=e.subgroupStack;else for(var n in e.subgroupStack)this.subgroupStack[n]=e.subgroupStack[n],this.doInnerStack=this.doInnerStack||e.subgroupStack[n];this.nestedInGroup=null,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.itemsInRange=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;var r=this;this.itemSet.body.emitter.on("checkRangedItems",function(){r.checkRangedItems=!0}),this._create(),this.setData(e)}var r=i(8),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=i(2),a=i(100);n.prototype._create=function(){var t=document.createElement("div");this.itemSet.options.groupEditable.order?t.className="vis-label draggable":t.className="vis-label",this.dom.label=t;var e=document.createElement("div");e.className="vis-inner",t.appendChild(e),this.dom.inner=e;var i=document.createElement("div");i.className="vis-group",i["timeline-group"]=this,this.dom.foreground=i,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.style.position="absolute",this.dom.marker.innerHTML="",this.dom.background.appendChild(this.dom.marker)},n.prototype.setData=function(t){var e,i;if(this.itemSet.options&&this.itemSet.options.groupTemplate?(i=this.itemSet.options.groupTemplate.bind(this),e=i(t,this.dom.inner)):e=t&&t.content,e instanceof Element){for(this.dom.inner.appendChild(e);this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(e)}else e instanceof Object?i(t,this.dom.inner):this.dom.inner.innerHTML=void 0!==e&&null!==e?e:this.groupId||"";if(this.dom.label.title=t&&t.title||"",this.dom.inner.firstChild?s.removeClassName(this.dom.inner,"vis-hidden"):s.addClassName(this.dom.inner,"vis-hidden"),t&&t.nestedGroups){this.nestedGroups&&this.nestedGroups==t.nestedGroups||(this.nestedGroups=t.nestedGroups),void 0===t.showNested&&void 0!==this.showNested||(0==t.showNested?this.showNested=!1:this.showNested=!0),s.addClassName(this.dom.label,"vis-nesting-group");var n=this.itemSet.options.rtl?"collapsed-rtl":"collapsed";this.showNested?(s.removeClassName(this.dom.label,n),s.addClassName(this.dom.label,"expanded")):(s.removeClassName(this.dom.label,"expanded"),s.addClassName(this.dom.label,n))}else this.nestedGroups&&(this.nestedGroups=null,n=this.itemSet.options.rtl?"collapsed-rtl":"collapsed",s.removeClassName(this.dom.label,n),s.removeClassName(this.dom.label,"expanded"),s.removeClassName(this.dom.label,"vis-nesting-group"));t&&t.nestedInGroup&&(s.addClassName(this.dom.label,"vis-nested-group"),this.itemSet.options&&this.itemSet.options.rtl?this.dom.inner.style.paddingRight="30px":this.dom.inner.style.paddingLeft="30px");var r=t&&t.className||null;r!=this.className&&(this.className&&(s.removeClassName(this.dom.label,this.className),s.removeClassName(this.dom.foreground,this.className),s.removeClassName(this.dom.background,this.className),s.removeClassName(this.dom.axis,this.className)),s.addClassName(this.dom.label,r),s.addClassName(this.dom.foreground,r),s.addClassName(this.dom.background,r),s.addClassName(this.dom.axis,r),this.className=r),this.style&&(s.removeCssText(this.dom.label,this.style),this.style=null),t&&t.style&&(s.addCssText(this.dom.label,t.style),this.style=t.style)},n.prototype.getLabelWidth=function(){return this.props.label.width},n.prototype._didMarkerHeightChange=function(){var t=this.dom.marker.clientHeight;if(t!=this.lastMarkerHeight){this.lastMarkerHeight=t;var e={},i=0;s.forEach(this.items,function(t,n){if(t.dirty=!0,t.displayed){e[n]=t.redraw(!0),i=e[n].length}});if(i>0)for(var n=0;n<i;n++)s.forEach(e,function(t){t[n]()});return!0}},n.prototype._calculateGroupSizeAndPosition=function(){var t=this.dom.foreground.offsetTop,e=this.dom.foreground.offsetLeft,i=this.dom.foreground.offsetWidth;this.top=t,this.right=e,this.width=i},n.prototype._redrawItems=function(t,e,i,n){if(t||this.stackDirty||this.isVisible&&!e){var r={},o=null;if("function"===typeof this.itemSet.options.order){var h=this,l={},u=0;if(s.forEach(this.items,function(t,e){t.displayed||(l[e]=t.redraw(!0),u=l[e].length,h.visibleItems.push(t))}),u>0)for(var d=0;d<u;d++)s.forEach(l,function(t){t[d]()});if(s.forEach(this.items,function(t){t.repositionX(!1)}),this.doInnerStack&&this.itemSet.options.stackSubgroups){for(o in this.subgroups)r[o]=this.subgroups[o].items.slice().sort(function(t,e){return h.itemSet.options.order(t.data,e.data)});a.stackSubgroupsWithInnerStack(r,i,this.subgroups)}else{var c=this.orderedItems.byStart.slice().sort(function(t,e){return h.itemSet.options.order(t.data,e.data)});a.stack(c,i,!0)}this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,n)}else if(this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,n),this.itemSet.options.stack)if(this.doInnerStack&&this.itemSet.options.stackSubgroups){for(o in this.subgroups)r[o]=this.subgroups[o].items;a.stackSubgroupsWithInnerStack(r,i,this.subgroups)}else a.stack(this.visibleItems,i,!0);else a.nostack(this.visibleItems,i,this.subgroups,this.itemSet.options.stackSubgroups);this.stackDirty=!1}},n.prototype._didResize=function(t,e){t=s.updateProperty(this,"height",e)||t;var i=this.dom.inner.clientWidth,n=this.dom.inner.clientHeight;return t=s.updateProperty(this.props.label,"width",i)||t,t=s.updateProperty(this.props.label,"height",n)||t},n.prototype._applyGroupHeight=function(t){this.dom.background.style.height=t+"px",this.dom.foreground.style.height=t+"px",this.dom.label.style.height=t+"px"},n.prototype._updateItemsVerticalPosition=function(t){for(var e=0,i=this.visibleItems.length;e<i;e++){var n=this.visibleItems[e];n.repositionY(t),this.isVisible||"__background__"==this.groupId||n.displayed&&n.hide()}},n.prototype.redraw=function(t,e,i,n){var r,o=!1,s=this.isVisible,a=[function(){i=this._didMarkerHeightChange.bind(this)}.bind(this),this._updateSubGroupHeights.bind(this,e),this._calculateGroupSizeAndPosition.bind(this),function(){this.isVisible=this._isGroupVisible.bind(this)(t,e)}.bind(this),function(){this._redrawItems.bind(this)(i,s,e,t)}.bind(this),this._updateSubgroupsSizes.bind(this),function(){r=this._calculateHeight.bind(this)(e)}.bind(this),this._calculateGroupSizeAndPosition.bind(this),function(){o=this._didResize.bind(this)(o,r)}.bind(this),function(){this._applyGroupHeight.bind(this)(r)}.bind(this),function(){this._updateItemsVerticalPosition.bind(this)(e)}.bind(this),function(){return!this.isVisible&&this.height&&(o=!1),o}];if(n)return a;var h;return a.forEach(function(t){h=t()}),h},n.prototype._updateSubGroupHeights=function(t){if((0,o.default)(this.subgroups).length>0){var e=this;this.resetSubgroups(),s.forEach(this.visibleItems,function(i){void 0!==i.data.subgroup&&(e.subgroups[i.data.subgroup].height=Math.max(e.subgroups[i.data.subgroup].height,i.height+t.item.vertical),e.subgroups[i.data.subgroup].visible=!0)})}},n.prototype._isGroupVisible=function(t,e){return this.top<=t.body.domProps.centerContainer.height-t.body.domProps.scrollTop+e.axis&&this.top+this.height+e.axis>=-t.body.domProps.scrollTop},n.prototype._calculateHeight=function(t){var e,i=this.visibleItems;if(i.length>0){var n=i[0].top,r=i[0].top+i[0].height;if(s.forEach(i,function(t){n=Math.min(n,t.top),r=Math.max(r,t.top+t.height)}),n>t.axis){var o=n-t.axis;r-=o,s.forEach(i,function(t){t.top-=o})}e=r+t.item.vertical/2}else e=0;return e=Math.max(e,this.props.label.height)},n.prototype.show=function(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)},n.prototype.hide=function(){var t=this.dom.label;t.parentNode&&t.parentNode.removeChild(t);var e=this.dom.foreground;e.parentNode&&e.parentNode.removeChild(e);var i=this.dom.background;i.parentNode&&i.parentNode.removeChild(i);var n=this.dom.axis;n.parentNode&&n.parentNode.removeChild(n)},n.prototype.add=function(t){if(this.items[t.id]=t,t.setParent(this),this.stackDirty=!0,void 0!==t.data.subgroup&&(this._addToSubgroup(t),this.orderSubgroups()),-1==this.visibleItems.indexOf(t)){var e=this.itemSet.body.range;this._checkIfVisible(t,this.visibleItems,e)}},n.prototype._addToSubgroup=function(t,e){e=e||t.data.subgroup,void 0!=e&&void 0===this.subgroups[e]&&(this.subgroups[e]={height:0,top:0,start:t.data.start,end:t.data.end||t.data.start,visible:!1,index:this.subgroupIndex,items:[],stack:this.subgroupStackAll||this.subgroupStack[e]||!1},this.subgroupIndex++),new Date(t.data.start)<new Date(this.subgroups[e].start)&&(this.subgroups[e].start=t.data.start);var i=t.data.end||t.data.start;new Date(i)>new Date(this.subgroups[e].end)&&(this.subgroups[e].end=i),this.subgroups[e].items.push(t)},n.prototype._updateSubgroupsSizes=function(){var t=this;if(t.subgroups)for(var e in t.subgroups){var i=t.subgroups[e].items[0].data.end||t.subgroups[e].items[0].data.start,n=t.subgroups[e].items[0].data.start,r=i-1;t.subgroups[e].items.forEach(function(t){new Date(t.data.start)<new Date(n)&&(n=t.data.start);var e=t.data.end||t.data.start;new Date(e)>new Date(r)&&(r=e)}),t.subgroups[e].start=n,t.subgroups[e].end=new Date(r-1)}},n.prototype.orderSubgroups=function(){if(void 0!==this.subgroupOrderer){var t,e=[];if("string"==typeof this.subgroupOrderer){for(t in this.subgroups)e.push({subgroup:t,sortField:this.subgroups[t].items[0].data[this.subgroupOrderer]});e.sort(function(t,e){return t.sortField-e.sortField})}else if("function"==typeof this.subgroupOrderer){for(t in this.subgroups)e.push(this.subgroups[t].items[0].data);e.sort(this.subgroupOrderer)}if(e.length>0)for(var i=0;i<e.length;i++)this.subgroups[e[i].subgroup].index=i}},n.prototype.resetSubgroups=function(){for(var t in this.subgroups)this.subgroups.hasOwnProperty(t)&&(this.subgroups[t].visible=!1,this.subgroups[t].height=0)},n.prototype.remove=function(t){delete this.items[t.id],t.setParent(null),this.stackDirty=!0;var e=this.visibleItems.indexOf(t);-1!=e&&this.visibleItems.splice(e,1),void 0!==t.data.subgroup&&(this._removeFromSubgroup(t),this.orderSubgroups())},n.prototype._removeFromSubgroup=function(t,e){if(void 0!=(e=e||t.data.subgroup)){var i=this.subgroups[e];if(i){var n=i.items.indexOf(t);n>=0&&(i.items.splice(n,1),i.items.length?this._updateSubgroupsSizes():delete this.subgroups[e])}}},n.prototype.removeFromDataSet=function(t){this.itemSet.removeItem(t.id)},n.prototype.order=function(){for(var t=s.toArray(this.items),e=[],i=[],n=0;n<t.length;n++)void 0!==t[n].data.end&&i.push(t[n]),e.push(t[n]);this.orderedItems={byStart:e,byEnd:i},a.orderByStart(this.orderedItems.byStart),a.orderByEnd(this.orderedItems.byEnd)},n.prototype._updateItemsInRange=function(t,e,i){var n=[],r={},o=(i.end-i.start)/4,a=i.start-o,h=i.end+o,l=function(t){return t<a?-1:t<=h?0:1};if(e.length>0)for(var u=0;u<e.length;u++)this._checkIfVisibleWithReference(e[u],n,r,i);var d=s.binarySearchCustom(t.byStart,l,"data","start");if(this._traceVisible(d,t.byStart,n,r,function(t){return t.data.start<a||t.data.start>h}),1==this.checkRangedItems)for(this.checkRangedItems=!1,u=0;u<t.byEnd.length;u++)this._checkIfVisibleWithReference(t.byEnd[u],n,r,i);else{var c=s.binarySearchCustom(t.byEnd,l,"data","end");this._traceVisible(c,t.byEnd,n,r,function(t){return t.data.end<a||t.data.end>h})}var f={},p=0;for(u=0;u<n.length;u++){var m=n[u];if(!m.displayed){f[u]=m.redraw(!0),p=f[u].length}}if(p>0)for(var v=0;v<p;v++)s.forEach(f,function(t){t[v]()});for(u=0;u<n.length;u++)n[u].repositionX();return n},n.prototype._traceVisible=function(t,e,i,n,r){if(-1!=t){var o,s;for(o=t;o>=0&&(s=e[o],!r(s));o--)void 0===n[s.id]&&(n[s.id]=!0,i.push(s));for(o=t+1;o<e.length&&(s=e[o],!r(s));o++)void 0===n[s.id]&&(n[s.id]=!0,i.push(s))}},n.prototype._checkIfVisible=function(t,e,i){t.isVisible(i)?(t.displayed||t.show(),t.repositionX(),e.push(t)):t.displayed&&t.hide()},n.prototype._checkIfVisibleWithReference=function(t,e,i,n){t.isVisible(n)?void 0===i[t.id]&&(i[t.id]=!0,e.push(t)):t.displayed&&t.hide()},n.prototype.changeSubgroup=function(t,e,i){this._removeFromSubgroup(t,e),this._addToSubgroup(t,i),this.orderSubgroups()},t.exports=n},function(t,e,i){function n(t,e,i){s.call(this,t,e,i),this.width=0,this.height=0,this.top=0,this.left=0}var r=i(29),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=i(68);n.prototype=(0,o.default)(s.prototype),n.prototype.redraw=function(t,e,i){this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,t),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(var n=0,r=this.visibleItems.length;n<r;n++){this.visibleItems[n].repositionY(e)}return!1},n.prototype.show=function(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)},t.exports=n},function(t,e,i){function n(t,e,i){if(this.props={content:{width:0}},this.overflow=!1,this.options=i,t){if(void 0==t.start)throw new Error('Property "start" missing in item '+t.id);if(void 0==t.end)throw new Error('Property "end" missing in item '+t.id)}r.call(this,t,e,i)}var r=i(38);n.prototype=new r(null,null,null),n.prototype.baseClassName="vis-item vis-range",n.prototype.isVisible=function(t){return this.data.start<t.end&&this.data.end>t.start},n.prototype._createDomElement=function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.visibleFrame=document.createElement("div"),this.dom.visibleFrame.className="vis-item-visible-frame",this.dom.box.appendChild(this.dom.visibleFrame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["timeline-item"]=this,this.dirty=!0)},n.prototype._appendDomElement=function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.box)}this.displayed=!0},n.prototype._updateDirtyDomComponents=function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var t=this.editable.updateTime||this.editable.updateGroup,e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(t?" vis-editable":" vis-readonly");this.dom.box.className=this.baseClassName+e,this.dom.content.style.maxWidth="none"}},n.prototype._getDomComponentsSizes=function(){return this.overflow="hidden"!==window.getComputedStyle(this.dom.frame).overflow,{content:{width:this.dom.content.offsetWidth},box:{height:this.dom.box.offsetHeight}}},n.prototype._updateDomComponentsSizes=function(t){this.props.content.width=t.content.width,this.height=t.box.height,this.dom.content.style.maxWidth="",this.dirty=!1},n.prototype._repaintDomAdditionals=function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDeleteButton(this.dom.box),this._repaintDragCenter(),this._repaintDragLeft(),this._repaintDragRight()},n.prototype.redraw=function(t){var e,i=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),function(){this.dirty&&(e=this._getDomComponentsSizes.bind(this)())}.bind(this),function(){this.dirty&&this._updateDomComponentsSizes.bind(this)(e)}.bind(this),this._repaintDomAdditionals.bind(this)];if(t)return i;var n;return i.forEach(function(t){n=t()}),n},n.prototype.show=function(){this.displayed||this.redraw()},n.prototype.hide=function(){if(this.displayed){var t=this.dom.box;t.parentNode&&t.parentNode.removeChild(t),this.displayed=!1}},n.prototype.repositionX=function(t){var e,i,n=this.parent.width,r=this.conversion.toScreen(this.data.start),o=this.conversion.toScreen(this.data.end),s=void 0===this.data.align?this.options.align:this.data.align;!1===this.data.limitSize||void 0!==t&&!0!==t||(r<-n&&(r=-n),o>2*n&&(o=2*n));var a=Math.max(o-r+.5,1);switch(this.overflow?(this.options.rtl?this.right=r:this.left=r,this.width=a+this.props.content.width,i=this.props.content.width):(this.options.rtl?this.right=r:this.left=r,this.width=a,i=Math.min(o-r,this.props.content.width)),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=a+"px",s){case"left":this.options.rtl?this.dom.content.style.right="0":this.dom.content.style.left="0";break;case"right":this.options.rtl?this.dom.content.style.right=Math.max(a-i,0)+"px":this.dom.content.style.left=Math.max(a-i,0)+"px";break;case"center":this.options.rtl?this.dom.content.style.right=Math.max((a-i)/2,0)+"px":this.dom.content.style.left=Math.max((a-i)/2,0)+"px";break;default:e=this.overflow?o>0?Math.max(-r,0):-i:r<0?-r:0,this.options.rtl?this.dom.content.style.right=e+"px":(this.dom.content.style.left=e+"px",this.dom.content.style.width="calc(100% - "+e+"px)")}},n.prototype.repositionY=function(){var t=this.options.orientation.item,e=this.dom.box;e.style.top="top"==t?this.top+"px":this.parent.height-this.top-this.height+"px"},n.prototype._repaintDragLeft=function(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.options.editable.updateTime&&!this.dom.dragLeft){var t=document.createElement("div");t.className="vis-drag-left",t.dragLeftItem=this,this.dom.box.appendChild(t),this.dom.dragLeft=t}else this.selected||this.options.itemsAlwaysDraggable.range||!this.dom.dragLeft||(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)},n.prototype._repaintDragRight=function(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.options.editable.updateTime&&!this.dom.dragRight){var t=document.createElement("div");t.className="vis-drag-right",t.dragRightItem=this,this.dom.box.appendChild(t),this.dom.dragRight=t}else this.selected||this.options.itemsAlwaysDraggable.range||!this.dom.dragRight||(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)},t.exports=n},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(19),o=n(r),s=i(6),a=n(s),h=i(0),l=n(h),u=i(1),d=n(u),c=i(2),f=i(179).default,p=function(){function t(e,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,l.default)(this,t),this.parent=e,this.changedOptions=[],this.container=i,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},c.extend(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new f(r),this.wrapper=void 0}return(0,d.default)(t,[{key:"setOptions",value:function(t){if(void 0!==t){this.popupHistory={},this._removePopup();var e=!0;"string"===typeof t?this.options.filter=t:t instanceof Array?this.options.filter=t.join():"object"===("undefined"===typeof t?"undefined":(0,a.default)(t))?(void 0!==t.container&&(this.options.container=t.container),void 0!==t.filter&&(this.options.filter=t.filter),void 0!==t.showButton&&(this.options.showButton=t.showButton),void 0!==t.enabled&&(e=t.enabled)):"boolean"===typeof t?(this.options.filter=!0,e=t):"function"===typeof t&&(this.options.filter=t,e=!0),!1===this.options.filter&&(e=!1),this.options.enabled=e}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){var t=this;this._clean(),this.changedOptions=[];var e=this.options.filter,i=0,n=!1;for(var r in this.configureOptions)this.configureOptions.hasOwnProperty(r)&&(this.allowCreation=!1,n=!1,"function"===typeof e?(n=e(r,[]),n=n||this._handleObject(this.configureOptions[r],[r],!0)):!0!==e&&-1===e.indexOf(r)||(n=!0),!1!==n&&(this.allowCreation=!0,i>0&&this._makeItem([]),this._makeHeader(r),this._handleObject(this.configureOptions[r],[r])),i++);if(!0===this.options.showButton){var o=document.createElement("div");o.className="vis-configuration vis-config-button",o.innerHTML="generate options",o.onclick=function(){t._printOptions()},o.onmouseover=function(){o.className="vis-configuration vis-config-button hover"},o.onmouseout=function(){o.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(o)}this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var e=this.moduleOptions,i=0;i<t.length;i++){if(void 0===e[t[i]]){e=void 0;break}e=e[t[i]]}return e}},{key:"_makeItem",value:function(t){if(!0===this.allowCreation){var e=document.createElement("div");e.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return n.forEach(function(t){e.appendChild(t)}),this.domElements.push(e),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var e=document.createElement("div");e.className="vis-configuration vis-config-header",e.innerHTML=t,this._makeItem([],e)}},{key:"_makeLabel",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=document.createElement("div");return n.className="vis-configuration vis-config-label vis-config-s"+e.length,n.innerHTML=!0===i?"<i><b>"+t+":</b></i>":t+":",n}},{key:"_makeDropdown",value:function(t,e,i){var n=document.createElement("select");n.className="vis-configuration vis-config-select";var r=0;void 0!==e&&-1!==t.indexOf(e)&&(r=t.indexOf(e));for(var o=0;o<t.length;o++){var s=document.createElement("option");s.value=t[o],o===r&&(s.selected="selected"),s.innerHTML=t[o],n.appendChild(s)}var a=this;n.onchange=function(){a._update(this.value,i)};var h=this._makeLabel(i[i.length-1],i);this._makeItem(i,h,n)}},{key:"_makeRange",value:function(t,e,i){var n=t[0],r=t[1],o=t[2],s=t[3],a=document.createElement("input");a.className="vis-configuration vis-config-range";try{a.type="range",a.min=r,a.max=o}catch(t){}a.step=s;var h="",l=0;if(void 0!==e){e<0&&1.2*e<r?(a.min=Math.ceil(1.2*e),l=a.min,h="range increased"):e/1.2<r&&(a.min=Math.ceil(e/1.2),l=a.min,h="range increased"),1.2*e>o&&1!==o&&(a.max=Math.ceil(1.2*e),l=a.max,h="range increased"),a.value=e}else a.value=n;var u=document.createElement("input");u.className="vis-configuration vis-config-rangeinput",u.value=a.value;var d=this;a.onchange=function(){u.value=this.value,d._update(Number(this.value),i)},a.oninput=function(){u.value=this.value};var c=this._makeLabel(i[i.length-1],i),f=this._makeItem(i,c,a,u);""!==h&&this.popupHistory[f]!==l&&(this.popupHistory[f]=l,this._setupPopup(h,f))}},{key:"_setupPopup",value:function(t,e){var i=this;if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){var n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerHTML=t,n.onclick=function(){i._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:e}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(void 0!==this.popupDiv.html){var e=this.domElements[this.popupDiv.index],i=e.getBoundingClientRect();this.popupDiv.html.style.left=i.left+"px",this.popupDiv.html.style.top=i.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,e,i){var n=document.createElement("input");n.type="checkbox",n.className="vis-configuration vis-config-checkbox",n.checked=t,void 0!==e&&(n.checked=e,e!==t&&("object"===("undefined"===typeof t?"undefined":(0,a.default)(t))?e!==t.enabled&&this.changedOptions.push({path:i,value:e}):this.changedOptions.push({path:i,value:e})));var r=this;n.onchange=function(){r._update(this.checked,i)};var o=this._makeLabel(i[i.length-1],i);this._makeItem(i,o,n)}},{key:"_makeTextInput",value:function(t,e,i){var n=document.createElement("input");n.type="text",n.className="vis-configuration vis-config-text",n.value=e,e!==t&&this.changedOptions.push({path:i,value:e});var r=this;n.onchange=function(){r._update(this.value,i)};var o=this._makeLabel(i[i.length-1],i);this._makeItem(i,o,n)}},{key:"_makeColorField",value:function(t,e,i){var n=this,r=t[1],o=document.createElement("div");e=void 0===e?r:e,"none"!==e?(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=e):o.className="vis-configuration vis-config-colorBlock none",e=void 0===e?r:e,o.onclick=function(){n._showColorPicker(e,o,i)};var s=this._makeLabel(i[i.length-1],i);this._makeItem(i,s,o)}},{key:"_showColorPicker",value:function(t,e,i){var n=this;e.onclick=function(){},this.colorPicker.insertTo(e),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback(function(t){var r="rgba("+t.r+","+t.g+","+t.b+","+t.a+")";e.style.backgroundColor=r,n._update(r,i)}),this.colorPicker.setCloseCallback(function(){e.onclick=function(){n._showColorPicker(t,e,i)}})}},{key:"_handleObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!1,r=this.options.filter,o=!1;for(var s in t)if(t.hasOwnProperty(s)){n=!0;var a=t[s],h=c.copyAndExtendArray(e,s);if("function"===typeof r&&!1===(n=r(s,e))&&!(a instanceof Array)&&"string"!==typeof a&&"boolean"!==typeof a&&a instanceof Object&&(this.allowCreation=!1,n=this._handleObject(a,h,!0),this.allowCreation=!1===i),!1!==n){o=!0;var l=this._getValue(h);if(a instanceof Array)this._handleArray(a,l,h);else if("string"===typeof a)this._makeTextInput(a,l,h);else if("boolean"===typeof a)this._makeCheckbox(a,l,h);else if(a instanceof Object){var u=!0;if(-1!==e.indexOf("physics")&&this.moduleOptions.physics.solver!==s&&(u=!1),!0===u)if(void 0!==a.enabled){var d=c.copyAndExtendArray(h,"enabled"),f=this._getValue(d);if(!0===f){var p=this._makeLabel(s,h,!0);this._makeItem(h,p),o=this._handleObject(a,h)||o}else this._makeCheckbox(a,f,h)}else{var m=this._makeLabel(s,h,!0);this._makeItem(h,m),o=this._handleObject(a,h)||o}}else console.error("dont know how to handle",a,s,h)}}return o}},{key:"_handleArray",value:function(t,e,i){"string"===typeof t[0]&&"color"===t[0]?(this._makeColorField(t,e,i),t[1]!==e&&this.changedOptions.push({path:i,value:e})):"string"===typeof t[0]?(this._makeDropdown(t,e,i),t[0]!==e&&this.changedOptions.push({path:i,value:e})):"number"===typeof t[0]&&(this._makeRange(t,e,i),t[0]!==e&&this.changedOptions.push({path:i,value:Number(e)}))}},{key:"_update",value:function(t,e){var i=this._constructOptions(t,e);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}},{key:"_constructOptions",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i;t="true"===t||t,t="false"!==t&&t;for(var r=0;r<e.length;r++)"global"!==e[r]&&(void 0===n[e[r]]&&(n[e[r]]={}),r!==e.length-1?n=n[e[r]]:n[e[r]]=t);return i}},{key:"_printOptions",value:function(){var t=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+(0,o.default)(t,null,2)+"</pre>"}},{key:"getOptions",value:function(){for(var t={},e=0;e<this.changedOptions.length;e++)this._constructOptions(this.changedOptions[e].value,this.changedOptions[e].path,t);return t}}]),t}();e.default=p},function(t,e,i){function n(t,e){}function r(t,e){return e="undefined"===typeof e?{}:e,{style:e.style||t.options.drawPoints.style,styles:e.styles||t.options.drawPoints.styles,size:e.size||t.options.drawPoints.size,className:e.className||t.className}}function o(t,e){var i=void 0;return t.options&&t.options.drawPoints&&t.options.drawPoints.onRender&&"function"==typeof t.options.drawPoints.onRender&&(i=t.options.drawPoints.onRender),e.group.options&&e.group.options.drawPoints&&e.group.options.drawPoints.onRender&&"function"==typeof e.group.options.drawPoints.onRender&&(i=e.group.options.drawPoints.onRender),i}var s=i(6),a=function(t){return t&&t.__esModule?t:{default:t}}(s),h=i(14);n.draw=function(t,e,i,n){n=n||0;for(var s=o(i,e),l=0;l<t.length;l++)if(s){var u=s(t[l],e);!0!==u&&"object"!==("undefined"===typeof u?"undefined":(0,a.default)(u))||h.drawPoint(t[l].screen_x+n,t[l].screen_y,r(e,u),i.svgElements,i.svg,t[l].label)}else h.drawPoint(t[l].screen_x+n,t[l].screen_y,r(e),i.svgElements,i.svg,t[l].label)},n.drawIcon=function(t,e,i,n,o,s){var a=.5*o,l=h.getSVGElement("rect",s.svgElements,s.svg);l.setAttributeNS(null,"x",e),l.setAttributeNS(null,"y",i-a),l.setAttributeNS(null,"width",n),l.setAttributeNS(null,"height",2*a),l.setAttributeNS(null,"class","vis-outline"),h.drawPoint(e+.5*n,i,r(t),s.svgElements,s.svg)},t.exports=n},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(23),m=n(p),v=function(t){function e(t,i,n){(0,a.default)(this,e);var r=(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n));return r.labelOffset=0,r.selected=!1,r}return(0,f.default)(e,t),(0,l.default)(e,[{key:"setOptions",value:function(t,e,i){this.options=t,void 0===e&&void 0===i||this.setImages(e,i)}},{key:"setImages",value:function(t,e){e&&this.selected?(this.imageObj=e,this.imageObjAlt=t):(this.imageObj=t,this.imageObjAlt=e)}},{key:"switchImages",value:function(t){var e=t&&!this.selected||!t&&this.selected;if(this.selected=t,void 0!==this.imageObjAlt&&e){var i=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=i}}},{key:"_resizeImage",value:function(){var t,e;if(!1===this.options.shapeProperties.useImageSize){var i=1,n=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?i=this.imageObj.width/this.imageObj.height:n=this.imageObj.height/this.imageObj.width),t=2*this.options.size*i,e=2*this.options.size*n}else t=this.imageObj.width,e=this.imageObj.height;this.width=t,this.height=e,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(t,e,i,n){this.initContextForDraw(t,n),t.circle(e,i,n.size),this.performFill(t,n)}},{key:"_drawImageAtPosition",value:function(t,e){if(0!=this.imageObj.width){t.globalAlpha=1,this.enableShadow(t,e);var i=1;!0===this.options.shapeProperties.interpolation&&(i=this.imageObj.width/this.width/this.body.view.scale),this.imageObj.drawImageAtPosition(t,i,this.left,this.top,this.width,this.height),this.disableShadow(t,e)}}},{key:"_drawImageLabel",value:function(t,e,i,n,r){var o,s=0;if(void 0!==this.height){s=.5*this.height;var a=this.labelModule.getTextSize(t,n,r);a.lineCount>=1&&(s+=a.height/2)}o=i+s,this.options.label&&(this.labelOffset=s),this.labelModule.draw(t,e,o,n,r,"hanging")}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(19),o=n(r),s=i(6),a=n(s),h=i(29),l=n(h),u=i(0),d=n(u),c=i(1),f=n(c),p=i(2),m=i(117).default,v=i(48).default,g=i(215).default,y=i(217).default,b=i(218).default,_=i(219).default,w=function(){function t(e,i,n,r){if((0,d.default)(this,t),void 0===i)throw new Error("No body provided");this.options=p.bridgeObject(n),this.globalOptions=n,this.defaultOptions=r,this.body=i,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new m(this.body,this.options,!0),this.setOptions(e)}return(0,f.default)(t,[{key:"setOptions",value:function(e){if(e){t.parseOptions(this.options,e,!0,this.globalOptions),void 0!==e.id&&(this.id=e.id),void 0!==e.from&&(this.fromId=e.from),void 0!==e.to&&(this.toId=e.to),void 0!==e.title&&(this.title=e.title),void 0!==e.value&&(e.value=parseFloat(e.value));var i=[e,this.options,this.defaultOptions];this.chooser=v.choosify("edge",i),this.updateLabelModule(e);var n=this.updateEdgeType();return this._setInteractionWidths(),this.connect(),void 0===e.hidden&&void 0===e.physics||(n=!0),n}}},{key:"getFormattingValues",value:function(){var t=!0===this.options.arrows.to||!0===this.options.arrows.to.enabled,e=!0===this.options.arrows.from||!0===this.options.arrows.from.enabled,i=!0===this.options.arrows.middle||!0===this.options.arrows.middle.enabled,n=this.options.color.inherit,r={toArrow:t,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,middleArrow:i,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,fromArrow:e,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,arrowStrikethrough:this.options.arrowStrikethrough,color:n?void 0:this.options.color.color,inheritsColor:n,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width};if(this.selected||this.hover)if(!0===this.chooser){if(this.selected){var o=this.options.selectionWidth;"function"===typeof o?r.width=o(r.width):"number"===typeof o&&(r.width+=o),r.width=Math.max(r.width,.3/this.body.view.scale),r.color=this.options.color.highlight,r.shadow=this.options.shadow.enabled}else if(this.hover){var s=this.options.hoverWidth;"function"===typeof s?r.width=s(r.width):"number"===typeof s&&(r.width+=s),r.width=Math.max(r.width,.3/this.body.view.scale),r.color=this.options.color.hover,r.shadow=this.options.shadow.enabled}}else"function"===typeof this.chooser&&(this.chooser(r,this.options.id,this.selected,this.hover),void 0!==r.color&&(r.inheritsColor=!1),!1===r.shadow&&(r.shadowColor===this.options.shadow.color&&r.shadowSize===this.options.shadow.size&&r.shadowX===this.options.shadow.x&&r.shadowY===this.options.shadow.y||(r.shadow=!0)));else r.shadow=this.options.shadow.enabled,r.width=Math.max(r.width,.3/this.body.view.scale);return r}},{key:"updateLabelModule",value:function(t){var e=[t,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,e),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var t=this.options.smooth,e=!1,i=!0;return void 0!==this.edgeType&&((this.edgeType instanceof y&&!0===t.enabled&&"dynamic"===t.type||this.edgeType instanceof g&&!0===t.enabled&&"cubicBezier"===t.type||this.edgeType instanceof b&&!0===t.enabled&&"dynamic"!==t.type&&"cubicBezier"!==t.type||this.edgeType instanceof _&&!1===t.type.enabled)&&(i=!1),!0===i&&(e=this.cleanup())),!0===i?!0===t.enabled?"dynamic"===t.type?(e=!0,this.edgeType=new y(this.options,this.body,this.labelModule)):"cubicBezier"===t.type?this.edgeType=new g(this.options,this.body,this.labelModule):this.edgeType=new b(this.options,this.body,this.labelModule):this.edgeType=new _(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),e}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=void 0!==this.from&&void 0!==this.to,!0===this.connected?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(t,e,i){if(void 0!==this.options.value){var n=this.options.scaling.customScalingFunction(t,e,i,this.options.value),r=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+n*o}this.options.width=this.options.scaling.min+n*r}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){"function"===typeof this.options.hoverWidth?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,"function"===typeof this.options.selectionWidth?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(t){var e=this.getFormattingValues();if(!e.hidden){var i=this.edgeType.getViaNode(),n={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,e.fromArrow&&(n.from=this.edgeType.getArrowData(t,"from",i,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.fromPoint=n.from.core)),e.toArrow&&(n.to=this.edgeType.getArrowData(t,"to",i,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.toPoint=n.to.core)),e.middleArrow&&(n.middle=this.edgeType.getArrowData(t,"middle",i,this.selected,this.hover,e)),this.edgeType.drawLine(t,e,this.selected,this.hover,i),this.drawArrows(t,n,e),this.drawLabel(t,i)}}},{key:"drawArrows",value:function(t,e,i){i.fromArrow&&this.edgeType.drawArrowHead(t,i,this.selected,this.hover,e.from),i.middleArrow&&this.edgeType.drawArrowHead(t,i,this.selected,this.hover,e.middle),i.toArrow&&this.edgeType.drawArrowHead(t,i,this.selected,this.hover,e.to)}},{key:"drawLabel",value:function(t,e){if(void 0!==this.options.label){var i=this.from,n=this.to;if(this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(t,this.selected,this.hover),i.id!=n.id){this.labelModule.pointToSelf=!1;var r=this.edgeType.getPoint(.5,e);t.save();var o=this._getRotation(t);0!=o.angle&&(t.translate(o.x,o.y),t.rotate(o.angle)),this.labelModule.draw(t,r.x,r.y,this.selected,this.hover),t.restore()}else{this.labelModule.pointToSelf=!0;var s,a,h=this.options.selfReferenceSize;i.shape.width>i.shape.height?(s=i.x+.5*i.shape.width,a=i.y-h):(s=i.x+h,a=i.y-.5*i.shape.height),r=this._pointOnCircle(s,a,h,.125),this.labelModule.draw(t,r.x,r.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(t){var e=[];if(this.labelModule.visible()){var i=this._getRotation();v.pointInRect(this.labelModule.getSize(),t,i)&&e.push({edgeId:this.id,labelId:0})}var n={left:t.x,top:t.y};return this.isOverlappingWith(n)&&e.push({edgeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){if(this.connected){var e=this.from.x,i=this.from.y,n=this.to.x,r=this.to.y,o=t.left,s=t.top;return this.edgeType.getDistanceToEdge(e,i,n,r,o,s)<10}return!1}},{key:"_getRotation",value:function(t){var e=this.edgeType.getViaNode(),i=this.edgeType.getPoint(.5,e);void 0!==t&&this.labelModule.calculateLabelSize(t,this.selected,this.hover,i.x,i.y);var n={x:i.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible())return n;if("horizontal"===this.options.font.align)return n;var r=this.from.y-this.to.y,o=this.from.x-this.to.x,s=Math.atan2(r,o);return(s<-1&&o<0||s>0&&o<0)&&(s+=Math.PI),n.angle=s,n}},{key:"_pointOnCircle",value:function(t,e,i,n){var r=2*n*Math.PI;return{x:t+i*Math.cos(r),y:e-i*Math.sin(r)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return void 0!==this.body.nodes[this.fromId]&&void 0!==this.body.nodes[this.toId]}}],[{key:"parseOptions",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=["arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","to","title","value","width","font","chosen","widthConstraint"];if(p.selectiveDeepExtend(s,t,e,i),v.isValidLabel(e.label)?t.label=e.label:t.label=void 0,p.mergeOptions(t,e,"smooth",n),p.mergeOptions(t,e,"shadow",n),void 0!==e.dashes&&null!==e.dashes?t.dashes=e.dashes:!0===i&&null===e.dashes&&(t.dashes=(0,l.default)(n.dashes)),void 0!==e.scaling&&null!==e.scaling?(void 0!==e.scaling.min&&(t.scaling.min=e.scaling.min),void 0!==e.scaling.max&&(t.scaling.max=e.scaling.max),p.mergeOptions(t.scaling,e.scaling,"label",n.scaling)):!0===i&&null===e.scaling&&(t.scaling=(0,l.default)(n.scaling)),void 0!==e.arrows&&null!==e.arrows)if("string"===typeof e.arrows){var h=e.arrows.toLowerCase();t.arrows.to.enabled=-1!=h.indexOf("to"),t.arrows.middle.enabled=-1!=h.indexOf("middle"),t.arrows.from.enabled=-1!=h.indexOf("from")}else{if("object"!==(0,a.default)(e.arrows))throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+(0,o.default)(e.arrows));p.mergeOptions(t.arrows,e.arrows,"to",n.arrows),p.mergeOptions(t.arrows,e.arrows,"middle",n.arrows),p.mergeOptions(t.arrows,e.arrows,"from",n.arrows)}else!0===i&&null===e.arrows&&(t.arrows=(0,l.default)(n.arrows));if(void 0!==e.color&&null!==e.color){var u=e.color,d=t.color;if(r)p.deepExtend(d,n.color,!1,i);else for(var c in d)d.hasOwnProperty(c)&&delete d[c];if(p.isString(d))d.color=d,d.highlight=d,d.hover=d,d.inherit=!1,void 0===u.opacity&&(d.opacity=1);else{var f=!1;void 0!==u.color&&(d.color=u.color,f=!0),void 0!==u.highlight&&(d.highlight=u.highlight,f=!0),void 0!==u.hover&&(d.hover=u.hover,f=!0),void 0!==u.inherit&&(d.inherit=u.inherit),void 0!==u.opacity&&(d.opacity=Math.min(1,Math.max(0,u.opacity))),!0===f?d.inherit=!1:void 0===d.inherit&&(d.inherit="from")}}else!0===i&&null===e.color&&(t.color=p.bridgeObject(n.color));!0===i&&null===e.font&&(t.font=p.bridgeObject(n.font))}}]),t}();e.default=w},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(118),m=n(p),v=function(t){function e(t,i,n){return(0,a.default)(this,e),(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n))}return(0,f.default)(e,t),(0,l.default)(e,[{key:"_findBorderPositionBezier",value:function(t,e){var i,n,r,o,s,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._getViaCoordinates(),h=0,l=0,u=1,d=this.to,c=!1;for(t.id===this.from.id&&(d=this.from,c=!0);l<=u&&h<10;){var f=.5*(l+u);if(i=this.getPoint(f,a),n=Math.atan2(d.y-i.y,d.x-i.x),r=d.distanceToBorder(e,n),o=Math.sqrt(Math.pow(i.x-d.x,2)+Math.pow(i.y-d.y,2)),s=r-o,Math.abs(s)<.2)break;s<0?!1===c?l=f:u=f:!1===c?u=f:l=f,h++}return i.t=f,i}},{key:"_getDistanceToBezierEdge",value:function(t,e,i,n,r,o,s){var a=1e9,h=void 0,l=void 0,u=void 0,d=void 0,c=void 0,f=t,p=e;for(l=1;l<10;l++)u=.1*l,d=Math.pow(1-u,2)*t+2*u*(1-u)*s.x+Math.pow(u,2)*i,c=Math.pow(1-u,2)*e+2*u*(1-u)*s.y+Math.pow(u,2)*n,l>0&&(h=this._getDistanceToLine(f,p,d,c,r,o),a=h<a?h:a),f=d,p=c;return a}},{key:"_bezierCurve",value:function(t,e,i,n){var r=void 0!==i&&void 0!==i.x,o=void 0!==n&&void 0!==n.x;t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),r&&o?t.bezierCurveTo(i.x,i.y,n.x,n.y,this.toPoint.x,this.toPoint.y):r?t.quadraticCurveTo(i.x,i.y,this.toPoint.x,this.toPoint.y):t.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=i(2),l=function(){function t(){(0,o.default)(this,t)}return(0,a.default)(t,null,[{key:"getRange",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=1e9,r=-1e9,o=1e9,s=-1e9;if(i.length>0)for(var a=0;a<i.length;a++)e=t[i[a]],o>e.shape.boundingBox.left&&(o=e.shape.boundingBox.left),s<e.shape.boundingBox.right&&(s=e.shape.boundingBox.right),n>e.shape.boundingBox.top&&(n=e.shape.boundingBox.top),r<e.shape.boundingBox.bottom&&(r=e.shape.boundingBox.bottom);return 1e9===o&&-1e9===s&&1e9===n&&-1e9===r&&(n=0,r=0,o=0,s=0),{minX:o,maxX:s,minY:n,maxY:r}}},{key:"getRangeCore",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=1e9,r=-1e9,o=1e9,s=-1e9;if(i.length>0)for(var a=0;a<i.length;a++)e=t[i[a]],o>e.x&&(o=e.x),s<e.x&&(s=e.x),n>e.y&&(n=e.y),r<e.y&&(r=e.y);return 1e9===o&&-1e9===s&&1e9===n&&-1e9===r&&(n=0,r=0,o=0,s=0),{minX:o,maxX:s,minY:n,maxY:r}}},{key:"findCenter",value:function(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}}},{key:"cloneOptions",value:function(t,e){var i={};return void 0===e||"node"===e?(h.deepExtend(i,t.options,!0),i.x=t.x,i.y=t.y,i.amountOfConnections=t.edges.length):h.deepExtend(i,t.options,!0),i}}]),t}();e.default=l},function(t,e,i){t.exports={default:i(124),__esModule:!0}},function(t,e,i){var n=i(50);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){var n=i(52),r=i(17),o=i(83),s=i(26),a=i(22),h=i(31),l=i(129),u=i(59),d=i(85),c=i(13)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,i,m,v,g,y){l(i,e,m);var b,_,w,x=function(t){if(!f&&t in M)return M[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},S=e+" Iterator",k="values"==v,E=!1,M=t.prototype,T=M[c]||M["@@iterator"]||v&&M[v],C=T||x(v),O=v?k?x("entries"):C:void 0,P="Array"==e?M.entries||T:T;if(P&&(w=d(P.call(new t)))!==Object.prototype&&w.next&&(u(w,S,!0),n||a(w,c)||s(w,c,p)),k&&T&&"values"!==T.name&&(E=!0,C=function(){return T.call(this)}),n&&!y||!f&&!E&&M[c]||s(M,c,C),h[e]=C,h[S]=p,v)if(b={values:k?C:x("values"),keys:g?C:x("keys"),entries:O},y)for(_ in b)_ in M||o(M,_,b[_]);else r(r.P+r.F*(f||E),e,b);return b}},function(t,e,i){var n=i(128);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,i){t.exports=!i(21)&&!i(28)(function(){return 7!=Object.defineProperty(i(82)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(32),r=i(18).document,o=n(r)&&n(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,i){t.exports=i(26)},function(t,e,i){var n=i(22),r=i(25),o=i(131)(!1),s=i(56)("IE_PROTO");t.exports=function(t,e){var i,a=r(t),h=0,l=[];for(i in a)i!=s&&n(a,i)&&l.push(i);for(;e.length>h;)n(a,i=e[h++])&&(~o(l,i)||l.push(i));return l}},function(t,e,i){var n=i(22),r=i(41),o=i(56)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,i){var n=i(50),r=i(13)("toStringTag"),o="Arguments"==n(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,i,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=s(e=Object(t),r))?i:o?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,i){var n=i(17),r=i(7),o=i(28);t.exports=function(t,e){var i=(r.Object||{})[t]||Object[t],s={};s[t]=e(i),n(n.S+n.F*o(function(){i(1)}),"Object",s)}},function(t,e,i){var n=i(84),r=i(58).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},function(t,e,i){var n=i(42),r=i(39),o=i(25),s=i(53),a=i(22),h=i(81),l=Object.getOwnPropertyDescriptor;e.f=i(21)?l:function(t,e){if(t=o(t),e=s(e,!0),h)try{return l(t,e)}catch(t){}if(a(t,e))return r(!n.f.call(t,e),t[e])}},function(t,e,i){t.exports={default:i(162),__esModule:!0}},function(t,e,i){function n(t,e){this.x=void 0!==t?t:0,this.y=void 0!==e?e:0}t.exports=n},function(t,e,i){function n(t,e){if(void 0===t)throw new Error("No container element defined");if(this.container=t,this.visible=!e||void 0==e.visible||e.visible,this.visible){this.frame=document.createElement("DIV"),this.frame.style.width="100%",this.frame.style.position="relative",this.container.appendChild(this.frame),this.frame.prev=document.createElement("INPUT"),this.frame.prev.type="BUTTON",this.frame.prev.value="Prev",this.frame.appendChild(this.frame.prev),this.frame.play=document.createElement("INPUT"),this.frame.play.type="BUTTON",this.frame.play.value="Play",this.frame.appendChild(this.frame.play),this.frame.next=document.createElement("INPUT"),this.frame.next.type="BUTTON",this.frame.next.value="Next",this.frame.appendChild(this.frame.next),this.frame.bar=document.createElement("INPUT"),this.frame.bar.type="BUTTON",this.frame.bar.style.position="absolute",this.frame.bar.style.border="1px solid red",this.frame.bar.style.width="100px",this.frame.bar.style.height="6px",this.frame.bar.style.borderRadius="2px",this.frame.bar.style.MozBorderRadius="2px",this.frame.bar.style.border="1px solid #7F7F7F",this.frame.bar.style.backgroundColor="#E5E5E5",this.frame.appendChild(this.frame.bar),this.frame.slide=document.createElement("INPUT"),this.frame.slide.type="BUTTON",this.frame.slide.style.margin="0px",this.frame.slide.value=" ",this.frame.slide.style.position="relative",this.frame.slide.style.left="-100px",this.frame.appendChild(this.frame.slide);var i=this;this.frame.slide.onmousedown=function(t){i._onMouseDown(t)},this.frame.prev.onclick=function(t){i.prev(t)},this.frame.play.onclick=function(t){i.togglePlay(t)},this.frame.next.onclick=function(t){i.next(t)}}this.onChangeCallback=void 0,this.values=[],this.index=void 0,this.playTimeout=void 0,this.playInterval=1e3,this.playLoop=!0}var r=i(2);n.prototype.prev=function(){var t=this.getIndex();t>0&&(t--,this.setIndex(t))},n.prototype.next=function(){var t=this.getIndex();t<this.values.length-1&&(t++,this.setIndex(t))},n.prototype.playNext=function(){var t=new Date,e=this.getIndex();e<this.values.length-1?(e++,this.setIndex(e)):this.playLoop&&(e=0,this.setIndex(e));var i=new Date,n=i-t,r=Math.max(this.playInterval-n,0),o=this;this.playTimeout=setTimeout(function(){o.playNext()},r)},n.prototype.togglePlay=function(){void 0===this.playTimeout?this.play():this.stop()},n.prototype.play=function(){this.playTimeout||(this.playNext(),this.frame&&(this.frame.play.value="Stop"))},n.prototype.stop=function(){clearInterval(this.playTimeout),this.playTimeout=void 0,this.frame&&(this.frame.play.value="Play")},n.prototype.setOnChangeCallback=function(t){this.onChangeCallback=t},n.prototype.setPlayInterval=function(t){this.playInterval=t},n.prototype.getPlayInterval=function(){return this.playInterval},n.prototype.setPlayLoop=function(t){this.playLoop=t},n.prototype.onChange=function(){void 0!==this.onChangeCallback&&this.onChangeCallback()},n.prototype.redraw=function(){if(this.frame){this.frame.bar.style.top=this.frame.clientHeight/2-this.frame.bar.offsetHeight/2+"px",this.frame.bar.style.width=this.frame.clientWidth-this.frame.prev.clientWidth-this.frame.play.clientWidth-this.frame.next.clientWidth-30+"px";var t=this.indexToLeft(this.index);this.frame.slide.style.left=t+"px"}},n.prototype.setValues=function(t){this.values=t,this.values.length>0?this.setIndex(0):this.index=void 0},n.prototype.setIndex=function(t){if(!(t<this.values.length))throw new Error("Index out of range");this.index=t,this.redraw(),this.onChange()},n.prototype.getIndex=function(){return this.index},n.prototype.get=function(){return this.values[this.index]},n.prototype._onMouseDown=function(t){if(t.which?1===t.which:1===t.button){this.startClientX=t.clientX,this.startSlideX=parseFloat(this.frame.slide.style.left),this.frame.style.cursor="move";var e=this;this.onmousemove=function(t){e._onMouseMove(t)},this.onmouseup=function(t){e._onMouseUp(t)},r.addEventListener(document,"mousemove",this.onmousemove),r.addEventListener(document,"mouseup",this.onmouseup),r.preventDefault(t)}},n.prototype.leftToIndex=function(t){var e=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,i=t-3,n=Math.round(i/e*(this.values.length-1));return n<0&&(n=0),n>this.values.length-1&&(n=this.values.length-1),n},n.prototype.indexToLeft=function(t){var e=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10;return t/(this.values.length-1)*e+3},n.prototype._onMouseMove=function(t){var e=t.clientX-this.startClientX,i=this.startSlideX+e,n=this.leftToIndex(i);this.setIndex(n),r.preventDefault()},n.prototype._onMouseUp=function(t){this.frame.style.cursor="auto",r.removeEventListener(document,"mousemove",this.onmousemove),r.removeEventListener(document,"mouseup",this.onmouseup),r.preventDefault()},t.exports=n},function(t,e,i){function n(t,e,i,n){this._start=0,this._end=0,this._step=1,this.prettyStep=!0,this.precision=5,this._current=0,this.setRange(t,e,i,n)}n.prototype.isNumeric=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},n.prototype.setRange=function(t,e,i,n){if(!this.isNumeric(t))throw new Error("Parameter 'start' is not numeric; value: "+t);if(!this.isNumeric(e))throw new Error("Parameter 'end' is not numeric; value: "+t);if(!this.isNumeric(i))throw new Error("Parameter 'step' is not numeric; value: "+t);this._start=t||0,this._end=e||0,this.setStep(i,n)},n.prototype.setStep=function(t,e){void 0===t||t<=0||(void 0!==e&&(this.prettyStep=e),!0===this.prettyStep?this._step=n.calculatePrettyStep(t):this._step=t)},n.calculatePrettyStep=function(t){var e=function(t){return Math.log(t)/Math.LN10},i=Math.pow(10,Math.round(e(t))),n=2*Math.pow(10,Math.round(e(t/2))),r=5*Math.pow(10,Math.round(e(t/5))),o=i;return Math.abs(n-t)<=Math.abs(o-t)&&(o=n),Math.abs(r-t)<=Math.abs(o-t)&&(o=r),o<=0&&(o=1),o},n.prototype.getCurrent=function(){return parseFloat(this._current.toPrecision(this.precision))},n.prototype.getStep=function(){return this._step},n.prototype.start=function(t){void 0===t&&(t=!1),this._current=this._start-this._start%this._step,t&&this.getCurrent()<this._start&&this.next()},n.prototype.next=function(){this._current+=this._step},n.prototype.end=function(){return this._current>this._end},t.exports=n},function(t,e,i){function n(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function r(t){return void 0===t||""===t||"string"!=typeof t?t:t.charAt(0).toUpperCase()+t.slice(1)}function o(t,e){return void 0===t||""===t?e:t+r(e)}function s(t,e,i,n){for(var r,s,a=0;a<i.length;++a)r=i[a],s=o(n,r),e[s]=t[r]}function a(t,e,i,n){for(var r,s,a=0;a<i.length;++a)r=i[a],void 0!==t[r]&&(s=o(n,r),e[s]=t[r])}function h(t,e){if(void 0===t||n(t))throw new Error("No DEFAULTS passed");if(void 0===e)throw new Error("No dst passed");T=t,s(t,e,E),s(t,e,M,"default"),u(t,e),e.margin=10,e.showGrayBottom=!1,e.showTooltip=!1,e.onclick_callback=null,e.eye=new x(0,0,-1)}function l(t,e){if(void 0!==t){if(void 0===e)throw new Error("No dst passed");if(void 0===T||n(T))throw new Error("DEFAULTS not set for module Settings");a(t,e,E),a(t,e,M,"default"),u(t,e)}}function u(t,e){void 0!==t.backgroundColor&&m(t.backgroundColor,e),v(t.dataColor,e),p(t.style,e),d(t.showLegend,e),g(t.cameraPosition,e),void 0!==t.tooltip&&(e.showTooltip=t.tooltip),void 0!=t.onclick&&(e.onclick_callback=t.onclick),void 0!==t.tooltipStyle&&_.selectiveDeepExtend(["tooltipStyle"],e,t)}function d(t,e){if(void 0===t){if(void 0===T.showLegend){var i=e.style===S.DOTCOLOR||e.style===S.DOTSIZE;e.showLegend=i}}else e.showLegend=t}function c(t){var e=k[t];return void 0===e?-1:e}function f(t){var e=!1;for(var i in S)if(S[i]===t){e=!0;break}return e}function p(t,e){if(void 0!==t){var i;if("string"===typeof t){if(-1===(i=c(t)))throw new Error("Style '"+t+"' is invalid")}else{if(!f(t))throw new Error("Style '"+t+"' is invalid");i=t}e.style=i}}function m(t,e){var i="white",n="gray",r=1;if("string"===typeof t)i=t,n="none",r=0;else{if("object"!==("undefined"===typeof t?"undefined":(0,b.default)(t)))throw new Error("Unsupported type of backgroundColor");void 0!==t.fill&&(i=t.fill),void 0!==t.stroke&&(n=t.stroke),void 0!==t.strokeWidth&&(r=t.strokeWidth)}e.frame.style.backgroundColor=i,e.frame.style.borderColor=n,e.frame.style.borderWidth=r+"px",e.frame.style.borderStyle="solid"}function v(t,e){void 0!==t&&(void 0===e.dataColor&&(e.dataColor={}),"string"===typeof t?(e.dataColor.fill=t,e.dataColor.stroke=t):(t.fill&&(e.dataColor.fill=t.fill),t.stroke&&(e.dataColor.stroke=t.stroke),void 0!==t.strokeWidth&&(e.dataColor.strokeWidth=t.strokeWidth)))}function g(t,e){var i=t;void 0!==i&&(void 0===e.camera&&(e.camera=new w),e.camera.setArmRotation(i.horizontal,i.vertical),e.camera.setArmLength(i.distance))}var y=i(6),b=function(t){return t&&t.__esModule?t:{default:t}}(y),_=i(2),w=i(95),x=i(34),S={BAR:0,BARCOLOR:1,BARSIZE:2,DOT:3,DOTLINE:4,DOTCOLOR:5,DOTSIZE:6,GRID:7,LINE:8,SURFACE:9},k={dot:S.DOT,"dot-line":S.DOTLINE,"dot-color":S.DOTCOLOR,"dot-size":S.DOTSIZE,line:S.LINE,grid:S.GRID,surface:S.SURFACE,bar:S.BAR,"bar-color":S.BARCOLOR,"bar-size":S.BARSIZE},E=["width","height","filterLabel","legendLabel","xLabel","yLabel","zLabel","xValueLabel","yValueLabel","zValueLabel","showXAxis","showYAxis","showZAxis","showGrid","showPerspective","showShadow","keepAspectRatio","verticalRatio","dotSizeRatio","dotSizeMinFraction","dotSizeMaxFraction","showAnimationControls","animationInterval","animationPreload","animationAutoStart","axisColor","gridColor","xCenter","yCenter"],M=["xBarWidth","yBarWidth","valueMin","valueMax","xMin","xMax","xStep","yMin","yMax","yStep","zMin","zMax","zStep"],T=void 0;t.exports.STYLE=S,t.exports.setDefaults=h,t.exports.setOptions=l,t.exports.setCameraPosition=g},function(t,e,i){function n(){this.armLocation=new s,this.armRotation={},this.armRotation.horizontal=0,this.armRotation.vertical=0,this.armLength=1.7,this.cameraOffset=new s,this.offsetMultiplier=.6,this.cameraLocation=new s,this.cameraRotation=new s(.5*Math.PI,0,0),this.calculateCameraOrientation()}var r=i(165),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=i(34);n.prototype.setOffset=function(t,e){var i=Math.abs,n=o.default,r=this.offsetMultiplier,s=this.armLength*r;i(t)>s&&(t=n(t)*s),i(e)>s&&(e=n(e)*s),this.cameraOffset.x=t,this.cameraOffset.y=e,this.calculateCameraOrientation()},n.prototype.getOffset=function(){return this.cameraOffset},n.prototype.setArmLocation=function(t,e,i){this.armLocation.x=t,this.armLocation.y=e,this.armLocation.z=i,this.calculateCameraOrientation()},n.prototype.setArmRotation=function(t,e){void 0!==t&&(this.armRotation.horizontal=t),void 0!==e&&(this.armRotation.vertical=e,this.armRotation.vertical<0&&(this.armRotation.vertical=0),this.armRotation.vertical>.5*Math.PI&&(this.armRotation.vertical=.5*Math.PI)),void 0===t&&void 0===e||this.calculateCameraOrientation()},n.prototype.getArmRotation=function(){var t={};return t.horizontal=this.armRotation.horizontal,t.vertical=this.armRotation.vertical,t},n.prototype.setArmLength=function(t){void 0!==t&&(this.armLength=t,this.armLength<.71&&(this.armLength=.71),this.armLength>5&&(this.armLength=5),this.setOffset(this.cameraOffset.x,this.cameraOffset.y),this.calculateCameraOrientation())},n.prototype.getArmLength=function(){return this.armLength},n.prototype.getCameraLocation=function(){return this.cameraLocation},n.prototype.getCameraRotation=function(){return this.cameraRotation},n.prototype.calculateCameraOrientation=function(){this.cameraLocation.x=this.armLocation.x-this.armLength*Math.sin(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.y=this.armLocation.y-this.armLength*Math.cos(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.z=this.armLocation.z+this.armLength*Math.sin(this.armRotation.vertical),this.cameraRotation.x=Math.PI/2-this.armRotation.vertical,this.cameraRotation.y=0,this.cameraRotation.z=-this.armRotation.horizontal;var t=this.cameraRotation.x,e=this.cameraRotation.z,i=this.cameraOffset.x,n=this.cameraOffset.y,r=Math.sin,o=Math.cos;this.cameraLocation.x=this.cameraLocation.x+i*o(e)+n*-r(e)*o(t),this.cameraLocation.y=this.cameraLocation.y+i*r(e)+n*o(e)*o(t),this.cameraLocation.z=this.cameraLocation.z+n*r(t)},t.exports=n},function(t,e,i){function n(t,e,i){this.dataGroup=t,this.column=e,this.graph=i,this.index=void 0,this.value=void 0,this.values=t.getDistinctValues(this.column),this.values.length>0&&this.selectValue(0),this.dataPoints=[],this.loaded=!1,this.onLoadCallback=void 0,i.animationPreload?(this.loaded=!1,this.loadInBackground()):this.loaded=!0}var r=i(12);n.prototype.isLoaded=function(){return this.loaded},n.prototype.getLoadedProgress=function(){for(var t=this.values.length,e=0;this.dataPoints[e];)e++;return Math.round(e/t*100)},n.prototype.getLabel=function(){return this.graph.filterLabel},n.prototype.getColumn=function(){return this.column},n.prototype.getSelectedValue=function(){if(void 0!==this.index)return this.values[this.index]},n.prototype.getValues=function(){return this.values},n.prototype.getValue=function(t){if(t>=this.values.length)throw new Error("Index out of range");return this.values[t]},n.prototype._getDataPoints=function(t){if(void 0===t&&(t=this.index),void 0===t)return[];var e;if(this.dataPoints[t])e=this.dataPoints[t];else{var i={};i.column=this.column,i.value=this.values[t];var n=new r(this.dataGroup.getDataSet(),{filter:function(t){return t[i.column]==i.value}}).get();e=this.dataGroup._getDataPoints(n),this.dataPoints[t]=e}return e},n.prototype.setOnLoadCallback=function(t){this.onLoadCallback=t},n.prototype.selectValue=function(t){if(t>=this.values.length)throw new Error("Index out of range");this.index=t,this.value=this.values[t]},n.prototype.loadInBackground=function(t){void 0===t&&(t=0);var e=this.graph.frame;if(t<this.values.length){void 0===e.progress&&(e.progress=document.createElement("DIV"),e.progress.style.position="absolute",e.progress.style.color="gray",e.appendChild(e.progress));var i=this.getLoadedProgress();e.progress.innerHTML="Loading animation... "+i+"%",e.progress.style.bottom="60px",e.progress.style.left="10px";var n=this;setTimeout(function(){n.loadInBackground(t+1)},10),this.loaded=!1}else this.loaded=!0,void 0!==e.progress&&(e.removeChild(e.progress),e.progress=void 0),this.onLoadCallback&&this.onLoadCallback()},t.exports=n},function(t,e,i){function n(t){this.active=!1,this.dom={container:t},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=a(this.dom.overlay),this.hammer.on("tap",this._onTapOverlay.bind(this));var e=this;["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(function(t){e.hammer.on(t,function(t){t.stopPropagation()})}),document&&document.body&&(this.onClick=function(i){r(i.target,t)||e.deactivate()},document.body.addEventListener("click",this.onClick)),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=o(),this.escListener=this.deactivate.bind(this)}function r(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}var o=i(35),s=i(44),a=i(10),h=i(2);s(n.prototype),n.current=null,n.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.hammer.destroy(),this.hammer=null},n.prototype.activate=function(){n.current&&n.current.deactivate(),n.current=this,this.active=!0,this.dom.overlay.style.display="none",h.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),this.keycharm.bind("esc",this.escListener)},n.prototype.deactivate=function(){this.active=!1,this.dom.overlay.style.display="",h.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")},n.prototype._onTapOverlay=function(t){this.activate(),t.stopPropagation()},t.exports=n},function(t,e,i){e.en={current:"current",time:"time"},e.en_EN=e.en,e.en_US=e.en,e.it={current:"attuale",time:"tempo"},e.it_IT=e.it,e.it_CH=e.it,e.nl={current:"huidige",time:"tijd"},e.nl_NL=e.nl,e.nl_BE=e.nl,e.de={current:"Aktuelle",time:"Zeit"},e.de_DE=e.de,e.fr={current:"actuel",time:"heure"},e.fr_FR=e.fr,e.fr_CA=e.fr,e.fr_BE=e.fr,e.es={current:"corriente",time:"hora"},e.es_ES=e.es},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){this.body=t,this.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:!0,stackSubgroups:!0,groupOrderSwap:function(t,e,i){var n=e.order;e.order=t.order,t.order=n},groupOrder:"order",selectable:!0,multiselect:!1,itemsAlwaysDraggable:{item:!1,range:!1},editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1,overrideItems:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:f.snap,onDropObjectOnItem:function(t,e,i){i(e)},onAdd:function(t,e){e(t)},onUpdate:function(t,e){e(t)},onMove:function(t,e){e(t)},onRemove:function(t,e){e(t)},onMoving:function(t,e){e(t)},onAddGroup:function(t,e){e(t)},onMoveGroup:function(t,e){e(t)},onRemoveGroup:function(t,e){e(t)},margin:{item:{horizontal:10,vertical:10},axis:20},showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip"},tooltipOnItemUpdateTime:!1},this.options=u.extend({},this.defaultOptions),this.options.rtl=e.rtl,this.itemOptions={type:{start:"Date",end:"Date"}},this.conversion={toScreen:t.util.toScreen,toTime:t.util.toTime},this.dom={},this.props={},this.hammer=null;var i=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(t,e,n){i._onAdd(e.items)},update:function(t,e,n){i._onUpdate(e.items)},remove:function(t,e,n){i._onRemove(e.items)}},this.groupListeners={add:function(t,e,n){if(i._onAddGroups(e.items),i.groupsData&&i.groupsData.length>0){var r=i.groupsData.getDataSet();r.get().forEach(function(t){if(t.nestedGroups){0!=t.showNested&&(t.showNested=!0);var e=[];t.nestedGroups.forEach(function(i){var n=r.get(i);n&&(n.nestedInGroup=t.id,0==t.showNested&&(n.visible=!1),e=e.concat(n))}),r.update(e,n)}})}},update:function(t,e,n){i._onUpdateGroups(e.items)},remove:function(t,e,n){i._onRemoveGroups(e.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.popup=null,this.touchParams={},this.groupTouchParams={},this._create(),this.setOptions(e)}var o=i(29),s=n(o),a=i(6),h=n(a),l=i(10),u=i(2),d=i(11),c=i(12),f=i(66),p=i(16),m=i(68),v=i(69),g=i(101),y=i(102),b=i(70),_=i(103),w=i(104).default,x="__ungrouped__",S="__background__";r.prototype=new p,r.types={background:_,box:g,range:b,point:y},r.prototype._create=function(){var t=document.createElement("div");t.className="vis-itemset",t["timeline-itemset"]=this,this.dom.frame=t;var e=document.createElement("div");e.className="vis-background",t.appendChild(e),this.dom.background=e;var i=document.createElement("div");i.className="vis-foreground",t.appendChild(i),this.dom.foreground=i;var n=document.createElement("div");n.className="vis-axis",this.dom.axis=n;var r=document.createElement("div");r.className="vis-labelset",this.dom.labelSet=r,this._updateUngrouped();var o=new v(S,null,this);o.show(),this.groups[S]=o,this.hammer=new l(this.body.dom.centerContainer),this.hammer.on("hammer.input",function(t){t.isFirst&&this._onTouch(t)}.bind(this)),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:l.DIRECTION_HORIZONTAL}),this.hammer.on("tap",this._onSelectItem.bind(this)),this.hammer.on("press",this._onMultiSelectItem.bind(this)),this.hammer.on("doubletap",this._onAddItem.bind(this)),this.options.rtl?this.groupHammer=new l(this.body.dom.rightContainer):this.groupHammer=new l(this.body.dom.leftContainer),this.groupHammer.on("tap",this._onGroupClick.bind(this)),this.groupHammer.on("panstart",this._onGroupDragStart.bind(this)),this.groupHammer.on("panmove",this._onGroupDrag.bind(this)),this.groupHammer.on("panend",this._onGroupDragEnd.bind(this)),this.groupHammer.get("pan").set({threshold:5,direction:l.DIRECTION_VERTICAL}),this.body.dom.centerContainer.addEventListener("mouseover",this._onMouseOver.bind(this)),this.body.dom.centerContainer.addEventListener("mouseout",this._onMouseOut.bind(this)),this.body.dom.centerContainer.addEventListener("mousemove",this._onMouseMove.bind(this)),this.body.dom.centerContainer.addEventListener("contextmenu",this._onDragEnd.bind(this)),this.body.dom.centerContainer.addEventListener("mousewheel",this._onMouseWheel.bind(this)),this.show()},r.prototype.setOptions=function(t){if(t){var e=["type","rtl","align","order","stack","stackSubgroups","selectable","multiselect","multiselectPerGroup","groupOrder","dataAttributes","template","groupTemplate","visibleFrameTemplate","hide","snap","groupOrderSwap","showTooltips","tooltip","tooltipOnItemUpdateTime"];u.selectiveExtend(e,this.options,t),"itemsAlwaysDraggable"in t&&("boolean"===typeof t.itemsAlwaysDraggable?(this.options.itemsAlwaysDraggable.item=t.itemsAlwaysDraggable,this.options.itemsAlwaysDraggable.range=!1):"object"===(0,h.default)(t.itemsAlwaysDraggable)&&(u.selectiveExtend(["item","range"],this.options.itemsAlwaysDraggable,t.itemsAlwaysDraggable),this.options.itemsAlwaysDraggable.item||(this.options.itemsAlwaysDraggable.range=!1))),"orientation"in t&&("string"===typeof t.orientation?this.options.orientation.item="top"===t.orientation?"top":"bottom":"object"===(0,h.default)(t.orientation)&&"item"in t.orientation&&(this.options.orientation.item=t.orientation.item)),"margin"in t&&("number"===typeof t.margin?(this.options.margin.axis=t.margin,this.options.margin.item.horizontal=t.margin,this.options.margin.item.vertical=t.margin):"object"===(0,h.default)(t.margin)&&(u.selectiveExtend(["axis"],this.options.margin,t.margin),"item"in t.margin&&("number"===typeof t.margin.item?(this.options.margin.item.horizontal=t.margin.item,this.options.margin.item.vertical=t.margin.item):"object"===(0,h.default)(t.margin.item)&&u.selectiveExtend(["horizontal","vertical"],this.options.margin.item,t.margin.item)))),"editable"in t&&("boolean"===typeof t.editable?(this.options.editable.updateTime=t.editable,this.options.editable.updateGroup=t.editable,this.options.editable.add=t.editable,this.options.editable.remove=t.editable,this.options.editable.overrideItems=!1):"object"===(0,h.default)(t.editable)&&u.selectiveExtend(["updateTime","updateGroup","add","remove","overrideItems"],this.options.editable,t.editable)),"groupEditable"in t&&("boolean"===typeof t.groupEditable?(this.options.groupEditable.order=t.groupEditable,this.options.groupEditable.add=t.groupEditable,this.options.groupEditable.remove=t.groupEditable):"object"===(0,h.default)(t.groupEditable)&&u.selectiveExtend(["order","add","remove"],this.options.groupEditable,t.groupEditable));["onDropObjectOnItem","onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"].forEach(function(e){var i=t[e];if(i){if(!(i instanceof Function))throw new Error("option "+e+" must be a function "+e+"(item, callback)");this.options[e]=i}}.bind(this)),this.markDirty()}},r.prototype.markDirty=function(t){this.groupIds=[],t&&t.refreshItems&&u.forEach(this.items,function(t){t.dirty=!0,t.displayed&&t.redraw()})},r.prototype.destroy=function(){this.hide(),this.setItems(null),this.setGroups(null),this.hammer=null,this.body=null,this.conversion=null},r.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)},r.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||(this.options.rtl?this.body.dom.right.appendChild(this.dom.labelSet):this.body.dom.left.appendChild(this.dom.labelSet))},r.prototype.setSelection=function(t){var e,i,n,r;for(void 0==t&&(t=[]),Array.isArray(t)||(t=[t]),e=0,i=this.selection.length;e<i;e++)n=this.selection[e],(r=this.items[n])&&r.unselect();for(this.selection=[],e=0,i=t.length;e<i;e++)n=t[e],(r=this.items[n])&&(this.selection.push(n),r.select())},r.prototype.getSelection=function(){return this.selection.concat([])},r.prototype.getVisibleItems=function(){var t,e,i=this.body.range.getRange();this.options.rtl?(t=this.body.util.toScreen(i.start),e=this.body.util.toScreen(i.end)):(e=this.body.util.toScreen(i.start),t=this.body.util.toScreen(i.end));var n=[];for(var r in this.groups)if(this.groups.hasOwnProperty(r))for(var o=this.groups[r],s=o.isVisible?o.visibleItems:[],a=0;a<s.length;a++){var h=s[a];this.options.rtl?h.right<e&&h.right+h.width>t&&n.push(h.id):h.left<t&&h.left+h.width>e&&n.push(h.id)}return n},r.prototype._deselect=function(t){for(var e=this.selection,i=0,n=e.length;i<n;i++)if(e[i]==t){e.splice(i,1);break}},r.prototype.redraw=function(){var t=this.options.margin,e=this.body.range,i=u.option.asSize,n=this.options,r=n.orientation.item,o=!1,s=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,s.className="vis-itemset",o=this._orderGroups()||o;var a=e.end-e.start,h=a!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth,l=e.start!=this.lastRangeStart,d=n.stack!=this.lastStack,c=n.stackSubgroups!=this.lastStackSubgroups,f=h||l||d||c;this.lastVisibleInterval=a,this.lastRangeStart=e.start,this.lastStack=n.stack,this.lastStackSubgroups=n.stackSubgroups,this.props.lastWidth=this.props.width;var p=this._firstGroup(),m={item:t.item,axis:t.axis},v={item:t.item,axis:t.item.vertical/2},g=0,y=t.axis+t.item.vertical;this.groups[S].redraw(e,v,f);var b={},_=0;if(u.forEach(this.groups,function(t,i){if(i!==S){var n=t==p?m:v;b[i]=t.redraw(e,n,f,!0),_=b[i].length}}),_>0){for(var w={},x=0;x<_;x++)u.forEach(b,function(t,e){w[e]=t[x]()});u.forEach(this.groups,function(t,e){if(e!==S){var i=w[e];o=i||o,g+=t.height}}),g=Math.max(g,y)}return g=Math.max(g,y),s.style.height=i(g),this.props.width=s.offsetWidth,this.props.height=g,this.dom.axis.style.top=i("top"==r?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",this.initialItemSetDrawn=!0,o=this._isResized()||o},r.prototype._firstGroup=function(){var t="top"==this.options.orientation.item?0:this.groupIds.length-1,e=this.groupIds[t];return this.groups[e]||this.groups[x]||null},r.prototype._updateUngrouped=function(){var t,e,i=this.groups[x];if(this.groupsData){if(i){i.hide(),delete this.groups[x];for(e in this.items)if(this.items.hasOwnProperty(e)){t=this.items[e],t.parent&&t.parent.remove(t);var n=this._getGroupId(t.data),r=this.groups[n];r&&r.add(t)||t.hide()}}}else if(!i){i=new m(null,null,this),this.groups[x]=i;for(e in this.items)this.items.hasOwnProperty(e)&&(t=this.items[e],i.add(t));i.show()}},r.prototype.getLabelSet=function(){return this.dom.labelSet},r.prototype.setItems=function(t){var e,i=this,n=this.itemsData;if(t){if(!(t instanceof d||t instanceof c))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=t}else this.itemsData=null;if(n&&(u.forEach(this.itemListeners,function(t,e){n.off(e,t)}),e=n.getIds(),this._onRemove(e)),this.itemsData){var r=this.id;u.forEach(this.itemListeners,function(t,e){i.itemsData.on(e,t,r)}),e=this.itemsData.getIds(),this._onAdd(e),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})},r.prototype.getItems=function(){return this.itemsData},r.prototype.setGroups=function(t){var e,i=this;if(this.groupsData&&(u.forEach(this.groupListeners,function(t,e){i.groupsData.off(e,t)}),e=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(e)),t){if(!(t instanceof d||t instanceof c))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=t}else this.groupsData=null;if(this.groupsData){var n=this.groupsData;this.groupsData instanceof c&&(n=this.groupsData.getDataSet()),n.get().forEach(function(t){t.nestedGroups&&t.nestedGroups.forEach(function(e){var i=n.get(e);i.nestedInGroup=t.id,0==t.showNested&&(i.visible=!1),n.update(i)})});var r=this.id;u.forEach(this.groupListeners,function(t,e){i.groupsData.on(e,t,r)}),e=this.groupsData.getIds(),this._onAddGroups(e)}this._updateUngrouped(),this._order(),this.body.emitter.emit("_change",{queue:!0})},r.prototype.getGroups=function(){return this.groupsData},r.prototype.removeItem=function(t){var e=this.itemsData.get(t),i=this.itemsData.getDataSet();e&&this.options.onRemove(e,function(e){e&&i.remove(t)})},r.prototype._getType=function(t){return t.type||this.options.type||(t.end?"range":"box")},r.prototype._getGroupId=function(t){return"background"==this._getType(t)&&void 0==t.group?S:this.groupsData?t.group:x},r.prototype._onUpdate=function(t){var e=this;t.forEach(function(t){var i,n=e.itemsData.get(t,e.itemOptions),o=e.items[t],s=n?e._getType(n):null,a=r.types[s];if(o&&(a&&o instanceof a?e._updateItem(o,n):(i=o.selected,e._removeItem(o),o=null)),!o&&n){if(!a)throw"rangeoverflow"==s?new TypeError('Item type "rangeoverflow" is deprecated. Use css styling instead: .vis-item.vis-range .vis-item-content {overflow: visible;}'):new TypeError('Unknown item type "'+s+'"');o=new a(n,e.conversion,e.options),o.id=t,e._addItem(o),i&&(this.selection.push(t),o.select())}}.bind(this)),this._order(),this.body.emitter.emit("_change",{queue:!0})},r.prototype._onAdd=r.prototype._onUpdate,r.prototype._onRemove=function(t){var e=0,i=this;t.forEach(function(t){var n=i.items[t];n&&(e++,i._removeItem(n))}),e&&(this._order(),this.body.emitter.emit("_change",{queue:!0}))},r.prototype._order=function(){u.forEach(this.groups,function(t){t.order()})},r.prototype._onUpdateGroups=function(t){this._onAddGroups(t)},r.prototype._onAddGroups=function(t){var e=this;t.forEach(function(t){var i=e.groupsData.get(t),n=e.groups[t];if(n)n.setData(i);else{if(t==x||t==S)throw new Error("Illegal group id. "+t+" is a reserved id.");var r=(0,s.default)(e.options);u.extend(r,{height:null}),n=new m(t,i,e),e.groups[t]=n;for(var o in e.items)if(e.items.hasOwnProperty(o)){var a=e.items[o];a.data.group==t&&n.add(a)}n.order(),n.show()}}),this.body.emitter.emit("_change",{queue:!0})},r.prototype._onRemoveGroups=function(t){var e=this.groups;t.forEach(function(t){var i=e[t];i&&(i.hide(),delete e[t])}),this.markDirty(),this.body.emitter.emit("_change",{queue:!0})},r.prototype._orderGroups=function(){if(this.groupsData){var t=this.groupsData.getIds({order:this.options.groupOrder});t=this._orderNestedGroups(t);var e=!u.equalArray(t,this.groupIds);if(e){var i=this.groups;t.forEach(function(t){i[t].hide()}),t.forEach(function(t){i[t].show()}),this.groupIds=t}return e}return!1},r.prototype._orderNestedGroups=function(t){var e=[];return t.forEach(function(t){var i=this.groupsData.get(t);if(i.nestedInGroup||e.push(t),i.nestedGroups){var n=this.groupsData.get({filter:function(e){return e.nestedInGroup==t},order:this.options.groupOrder}),r=n.map(function(t){return t.id});e=e.concat(r)}},this),e},r.prototype._addItem=function(t){this.items[t.id]=t;var e=this._getGroupId(t.data),i=this.groups[e];i?i&&i.data&&i.data.showNested&&(t.groupShowing=!0):t.groupShowing=!1,i&&i.add(t)},r.prototype._updateItem=function(t,e){t.setData(e);var i=this._getGroupId(t.data),n=this.groups[i];n?n&&n.data&&n.data.showNested&&(t.groupShowing=!0):t.groupShowing=!1},r.prototype._removeItem=function(t){t.hide(),delete this.items[t.id];var e=this.selection.indexOf(t.id);-1!=e&&this.selection.splice(e,1),t.parent&&t.parent.remove(t)},r.prototype._constructByEndArray=function(t){for(var e=[],i=0;i<t.length;i++)t[i]instanceof b&&e.push(t[i]);return e},r.prototype._onTouch=function(t){this.touchParams.item=this.itemFromTarget(t),this.touchParams.dragLeftItem=t.target.dragLeftItem||!1,this.touchParams.dragRightItem=t.target.dragRightItem||!1,this.touchParams.itemProps=null},r.prototype._getGroupIndex=function(t){for(var e=0;e<this.groupIds.length;e++)if(t==this.groupIds[e])return e},r.prototype._onDragStart=function(t){if(!this.touchParams.itemIsDragging){var e,i=this.touchParams.item||null,n=this;if(i&&(i.selected||this.options.itemsAlwaysDraggable.item)){if(this.options.editable.overrideItems&&!this.options.editable.updateTime&&!this.options.editable.updateGroup)return;if(null!=i.editable&&!i.editable.updateTime&&!i.editable.updateGroup&&!this.options.editable.overrideItems)return;var r=this.touchParams.dragLeftItem,o=this.touchParams.dragRightItem;if(this.touchParams.itemIsDragging=!0,this.touchParams.selectedItem=i,r)e={item:r,initialX:t.center.x,dragLeft:!0,data:this._cloneItemData(i.data)},this.touchParams.itemProps=[e];else if(o)e={item:o,initialX:t.center.x,dragRight:!0,data:this._cloneItemData(i.data)},this.touchParams.itemProps=[e];else if(this.options.editable.add&&(t.srcEvent.ctrlKey||t.srcEvent.metaKey))this._onDragStartAddItem(t);else{this.groupIds.length<1&&this.redraw();var s=this._getGroupIndex(i.data.group),a=this.options.itemsAlwaysDraggable.item&&!i.selected?[i.id]:this.getSelection();this.touchParams.itemProps=a.map(function(e){var i=n.items[e],r=n._getGroupIndex(i.data.group);return{item:i,initialX:t.center.x,groupOffset:s-r,data:this._cloneItemData(i.data)}}.bind(this))}t.stopPropagation()}else this.options.editable.add&&(t.srcEvent.ctrlKey||t.srcEvent.metaKey)&&this._onDragStartAddItem(t)}},r.prototype._onDragStartAddItem=function(t){var e,i,n=this.options.snap||null;this.options.rtl?(e=u.getAbsoluteRight(this.dom.frame),i=e-t.center.x+10):(e=u.getAbsoluteLeft(this.dom.frame),i=t.center.x-e-10);var r=this.body.util.toTime(i),o=this.body.util.getScale(),s=this.body.util.getStep(),a=n?n(r,o,s):r,h=a,l={type:"range",start:a,end:h,content:"new item"},d=u.randomUUID();l[this.itemsData._fieldId]=d;var c=this.groupFromTarget(t);c&&(l.group=c.groupId);var f=new b(l,this.conversion,this.options);f.id=d,f.data=this._cloneItemData(l),this._addItem(f),this.touchParams.selectedItem=f;var p={item:f,initialX:t.center.x,data:f.data};this.options.rtl?p.dragLeft=!0:p.dragRight=!0,this.touchParams.itemProps=[p],t.stopPropagation()},r.prototype._onDrag=function(t){if(this.touchParams.itemProps){t.stopPropagation();var e,i=this,n=this.options.snap||null;e=this.options.rtl?this.body.dom.root.offsetLeft+this.body.domProps.right.width:this.body.dom.root.offsetLeft+this.body.domProps.left.width;var r=this.body.util.getScale(),o=this.body.util.getStep(),s=this.touchParams.selectedItem,a=(this.options.editable.overrideItems||null==s.editable)&&this.options.editable.updateGroup||!this.options.editable.overrideItems&&null!=s.editable&&s.editable.updateGroup,h=null;if(a&&s&&void 0!=s.data.group){var l=i.groupFromTarget(t);l&&(h=this._getGroupIndex(l.groupId))}this.touchParams.itemProps.forEach(function(l){var d,c,f,p,m,v=i.body.util.toTime(t.center.x-e),g=i.body.util.toTime(l.initialX-e);d=this.options.rtl?-(v-g):v-g;var y=this._cloneItemData(l.item.data);if(null==l.item.editable||l.item.editable.updateTime||l.item.editable.updateGroup||i.options.editable.overrideItems){if((this.options.editable.overrideItems||null==s.editable)&&this.options.editable.updateTime||!this.options.editable.overrideItems&&null!=s.editable&&s.editable.updateTime)if(l.dragLeft)this.options.rtl?void 0!=y.end&&(f=u.convert(l.data.end,"Date"),m=new Date(f.valueOf()+d),y.end=n?n(m,r,o):m):void 0!=y.start&&(c=u.convert(l.data.start,"Date"),p=new Date(c.valueOf()+d),y.start=n?n(p,r,o):p);else if(l.dragRight)this.options.rtl?void 0!=y.start&&(c=u.convert(l.data.start,"Date"),p=new Date(c.valueOf()+d),y.start=n?n(p,r,o):p):void 0!=y.end&&(f=u.convert(l.data.end,"Date"),m=new Date(f.valueOf()+d),y.end=n?n(m,r,o):m);else if(void 0!=y.start)if(c=u.convert(l.data.start,"Date").valueOf(),p=new Date(c+d),void 0!=y.end){f=u.convert(l.data.end,"Date");var b=f.valueOf()-c.valueOf();y.start=n?n(p,r,o):p,y.end=new Date(y.start.valueOf()+b)}else y.start=n?n(p,r,o):p;if(a&&!l.dragLeft&&!l.dragRight&&null!=h&&void 0!=y.group){var _=h-l.groupOffset;_=Math.max(0,_),_=Math.min(i.groupIds.length-1,_),y.group=i.groupIds[_]}y=this._cloneItemData(y),i.options.onMoving(y,function(t){t&&l.item.setData(this._cloneItemData(t,"Date"))}.bind(this))}}.bind(this)),this.body.emitter.emit("_change")}},r.prototype._moveToGroup=function(t,e){var i=this.groups[e];if(i&&i.groupId!=t.data.group){var n=t.parent;n.remove(t),n.order(),t.data.group=i.groupId,i.add(t),i.order()}},r.prototype._onDragEnd=function(t){if(this.touchParams.itemIsDragging=!1,this.touchParams.itemProps){t.stopPropagation();var e=this,i=this.itemsData.getDataSet(),n=this.touchParams.itemProps;this.touchParams.itemProps=null,n.forEach(function(t){var n=t.item.id;if(null!=e.itemsData.get(n,e.itemOptions)){var r=this._cloneItemData(t.item.data);e.options.onMove(r,function(r){r?(r[i._fieldId]=n,i.update(r)):(t.item.setData(t.data),e.body.emitter.emit("_change"))})}else e.options.onAdd(t.item.data,function(i){e._removeItem(t.item),i&&e.itemsData.getDataSet().add(i),e.body.emitter.emit("_change")})}.bind(this))}},r.prototype._onGroupClick=function(t){var e=this.groupFromTarget(t);if(e&&e.nestedGroups){var i=this.groupsData.getDataSet(),n=i.get(e.groupId);void 0==n.showNested&&(n.showNested=!0),n.showNested=!n.showNested;var r=i.get(e.nestedGroups).map(function(t){return t.visible=n.showNested,t});if(i.update(r.concat(n)),n.showNested)u.removeClassName(e.dom.label,"collapsed"),u.addClassName(e.dom.label,"expanded");else{u.removeClassName(e.dom.label,"expanded");var o=this.options.rtl?"collapsed-rtl":"collapsed";u.addClassName(e.dom.label,o)}}},r.prototype._onGroupDragStart=function(t){this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(t),this.groupTouchParams.group&&(t.stopPropagation(),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))},r.prototype._onGroupDrag=function(t){if(this.options.groupEditable.order&&this.groupTouchParams.group){t.stopPropagation();var e=this.groupsData;this.groupsData instanceof c&&(e=this.groupsData.getDataSet());var i=this.groupFromTarget(t);if(i&&i.height!=this.groupTouchParams.group.height){var n=i.top<this.groupTouchParams.group.top,r=t.center?t.center.y:t.clientY,o=u.getAbsoluteTop(i.dom.foreground),s=this.groupTouchParams.group.height;if(n){if(o+s<r)return}else{if(o+i.height-s>r)return}}if(i&&i!=this.groupTouchParams.group){var a=e.get(i.groupId),h=e.get(this.groupTouchParams.group.groupId);h&&a&&(this.options.groupOrderSwap(h,a,e),e.update(h),e.update(a));var l=e.getIds({order:this.options.groupOrder});if(!u.equalArray(l,this.groupTouchParams.originalOrder))for(var d=this.groupTouchParams.originalOrder,f=this.groupTouchParams.group.groupId,p=Math.min(d.length,l.length),m=0,v=0,g=0;m<p;){for(;m+v<p&&m+g<p&&l[m+v]==d[m+g];)m++;if(m+v>=p)break;if(l[m+v]==f)v=1;else if(d[m+g]==f)g=1;else{var y=l.indexOf(d[m+g]),b=e.get(l[m+v]),_=e.get(d[m+g]);this.options.groupOrderSwap(b,_,e),e.update(b),e.update(_);var w=l[m+v];l[m+v]=d[m+g],l[y]=w,m++}}}}},r.prototype._onGroupDragEnd=function(t){if(this.options.groupEditable.order&&this.groupTouchParams.group){t.stopPropagation();var e=this,i=e.groupTouchParams.group.groupId,n=e.groupsData.getDataSet(),r=u.extend({},n.get(i));e.options.onMoveGroup(r,function(t){if(t)t[n._fieldId]=i,n.update(t);else{var r=n.getIds({order:e.options.groupOrder});if(!u.equalArray(r,e.groupTouchParams.originalOrder))for(var o=e.groupTouchParams.originalOrder,s=Math.min(o.length,r.length),a=0;a<s;){for(;a<s&&r[a]==o[a];)a++;if(a>=s)break;var h=r.indexOf(o[a]),l=n.get(r[a]),d=n.get(o[a]);e.options.groupOrderSwap(l,d,n),n.update(l),n.update(d);var c=r[a];r[a]=o[a],r[h]=c,a++}}}),e.body.emitter.emit("groupDragged",{groupId:i})}},r.prototype._onSelectItem=function(t){if(this.options.selectable){var e=t.srcEvent&&(t.srcEvent.ctrlKey||t.srcEvent.metaKey),i=t.srcEvent&&t.srcEvent.shiftKey;if(e||i)return void this._onMultiSelectItem(t);var n=this.getSelection(),r=this.itemFromTarget(t),o=r?[r.id]:[];this.setSelection(o);var s=this.getSelection();(s.length>0||n.length>0)&&this.body.emitter.emit("select",{items:s,event:t})}},r.prototype._onMouseOver=function(t){var e=this.itemFromTarget(t);if(e){if(e!==this.itemFromRelatedTarget(t)){var i=e.getTitle();if(this.options.showTooltips&&i){null==this.popup&&(this.popup=new w(this.body.dom.root,this.options.tooltip.overflowMethod||"flip")),this.popup.setText(i);var n=this.body.dom.centerContainer;this.popup.setPosition(t.clientX-u.getAbsoluteLeft(n)+n.offsetLeft,t.clientY-u.getAbsoluteTop(n)+n.offsetTop),this.popup.show()}else null!=this.popup&&this.popup.hide();this.body.emitter.emit("itemover",{item:e.id,event:t})}}},r.prototype._onMouseOut=function(t){var e=this.itemFromTarget(t);if(e){e!==this.itemFromRelatedTarget(t)&&(null!=this.popup&&this.popup.hide(),this.body.emitter.emit("itemout",{item:e.id,event:t}))}},r.prototype._onMouseMove=function(t){if(this.itemFromTarget(t)&&this.options.showTooltips&&this.options.tooltip.followMouse&&this.popup&&!this.popup.hidden){var e=this.body.dom.centerContainer;this.popup.setPosition(t.clientX-u.getAbsoluteLeft(e)+e.offsetLeft,t.clientY-u.getAbsoluteTop(e)+e.offsetTop),this.popup.show()}},r.prototype._onMouseWheel=function(t){this.touchParams.itemIsDragging&&this._onDragEnd(t)},r.prototype._onUpdateItem=function(t){if(this.options.selectable&&this.options.editable.add){var e=this;if(t){var i=e.itemsData.get(t.id);this.options.onUpdate(i,function(t){t&&e.itemsData.getDataSet().update(t)})}}},r.prototype._onDropObjectOnItem=function(t){var e=this.itemFromTarget(t),i=JSON.parse(t.dataTransfer.getData("text"));this.options.onDropObjectOnItem(i,e)},r.prototype._onAddItem=function(t){if(this.options.selectable&&this.options.editable.add){var e,i,n=this,r=this.options.snap||null;this.options.rtl?(e=u.getAbsoluteRight(this.dom.frame),i=e-t.center.x):(e=u.getAbsoluteLeft(this.dom.frame),i=t.center.x-e);var o,s,a=this.body.util.toTime(i),h=this.body.util.getScale(),l=this.body.util.getStep();"drop"==t.type?(s=JSON.parse(t.dataTransfer.getData("text")),s.content=s.content?s.content:"new item",s.start=s.start?s.start:r?r(a,h,l):a,s.type=s.type||"box",s[this.itemsData._fieldId]=s.id||u.randomUUID(),"range"!=s.type||s.end||(o=this.body.util.toTime(i+this.props.width/5),s.end=r?r(o,h,l):o)):(s={start:r?r(a,h,l):a,content:"new item"},s[this.itemsData._fieldId]=u.randomUUID(),"range"===this.options.type&&(o=this.body.util.toTime(i+this.props.width/5),s.end=r?r(o,h,l):o));var d=this.groupFromTarget(t);d&&(s.group=d.groupId),s=this._cloneItemData(s),this.options.onAdd(s,function(e){e&&(n.itemsData.getDataSet().add(e),"drop"==t.type&&n.setSelection([e.id]))})}},r.prototype._onMultiSelectItem=function(t){if(this.options.selectable){var e=this.itemFromTarget(t);if(e){var i=this.options.multiselect?this.getSelection():[];if((t.srcEvent&&t.srcEvent.shiftKey||!1)&&this.options.multiselect){var n=this.itemsData.get(e.id).group,o=void 0;this.options.multiselectPerGroup&&i.length>0&&(o=this.itemsData.get(i[0]).group),this.options.multiselectPerGroup&&void 0!=o&&o!=n||i.push(e.id);var s=r._getItemRange(this.itemsData.get(i,this.itemOptions));if(!this.options.multiselectPerGroup||o==n){i=[];for(var a in this.items)if(this.items.hasOwnProperty(a)){var h=this.items[a],l=h.data.start,u=void 0!==h.data.end?h.data.end:l;!(l>=s.min&&u<=s.max)||this.options.multiselectPerGroup&&o!=this.itemsData.get(h.id).group||h instanceof _||i.push(h.id)}}}else{var d=i.indexOf(e.id);-1==d?i.push(e.id):i.splice(d,1)}this.setSelection(i),this.body.emitter.emit("select",{items:this.getSelection(),event:t})}}},r._getItemRange=function(t){var e=null,i=null;return t.forEach(function(t){(null==i||t.start<i)&&(i=t.start),void 0!=t.end?(null==e||t.end>e)&&(e=t.end):(null==e||t.start>e)&&(e=t.start)}),{min:i,max:e}},r.prototype.itemFromElement=function(t){for(var e=t;e;){if(e.hasOwnProperty("timeline-item"))return e["timeline-item"];e=e.parentNode}return null},r.prototype.itemFromTarget=function(t){return this.itemFromElement(t.target)},r.prototype.itemFromRelatedTarget=function(t){return this.itemFromElement(t.relatedTarget)},r.prototype.groupFromTarget=function(t){var e=t.center?t.center.y:t.clientY,i=this.groupIds;i.length<=0&&this.groupsData&&(i=this.groupsData.getIds({order:this.options.groupOrder}));for(var n=0;n<i.length;n++){var r=i[n],o=this.groups[r],s=o.dom.foreground,a=u.getAbsoluteTop(s);if(e>a&&e<a+s.offsetHeight)return o;if("top"===this.options.orientation.item){if(n===this.groupIds.length-1&&e>a)return o}else if(0===n&&e<a+s.offset)return o}return null},r.itemSetFromTarget=function(t){for(var e=t.target;e;){if(e.hasOwnProperty("timeline-itemset"))return e["timeline-itemset"];e=e.parentNode}return null},r.prototype._cloneItemData=function(t,e){var i=u.extend({},t);return e||(e=this.itemsData.getDataSet()._options.type),void 0!=i.start&&(i.start=u.convert(i.start,e&&e.start||"Date")),void 0!=i.end&&(i.end=u.convert(i.end,e&&e.end||"Date")),i},t.exports=r},function(t,e,i){e.orderByStart=function(t){t.sort(function(t,e){return t.data.start-e.data.start})},e.orderByEnd=function(t){t.sort(function(t,e){return("end"in t.data?t.data.end:t.data.start)-("end"in e.data?e.data.end:e.data.start)})},e.stack=function(t,i,n){if(n)for(var r=0;r<t.length;r++)t[r].top=null;for(var r=0;r<t.length;r++){var o=t[r];if(o.stack&&null===o.top){o.top=i.axis;do{for(var s=null,a=0,h=t.length;a<h;a++){var l=t[a];if(null!==l.top&&l!==o&&l.stack&&e.collision(o,l,i.item,l.options.rtl)){s=l;break}}null!=s&&(o.top=s.top+s.height+i.item.vertical)}while(s)}}},e.substack=function(t,i,n){for(var r=0;r<t.length;r++)t[r].top=null;var o=n.height;for(r=0;r<t.length;r++){var s=t[r];if(s.stack&&null===s.top){s.top=s.baseTop;do{for(var a=null,h=0,l=t.length;h<l;h++){var u=t[h];if(null!==u.top&&u!==s&&e.collision(s,u,i.item,u.options.rtl)){a=u;break}}null!=a&&(s.top=a.top+a.height+i.item.vertical),s.top+s.height>o&&(o=s.top+s.height)}while(a)}}n.height=o-n.top+.5*i.item.vertical},e.nostack=function(t,i,n,r){for(var o=0;o<t.length;o++)if(void 0==t[o].data.subgroup)t[o].top=i.item.vertical;else if(void 0!==t[o].data.subgroup&&r){var s=0;for(var a in n)n.hasOwnProperty(a)&&1==n[a].visible&&n[a].index<n[t[o].data.subgroup].index&&(s+=n[a].height,n[t[o].data.subgroup].top=s);t[o].top=s+.5*i.item.vertical}r||e.stackSubgroups(t,i,n)},e.stackSubgroups=function(t,i,n){for(var r in n)if(n.hasOwnProperty(r)){n[r].top=0;do{var o=null;for(var s in n)if(null!==n[s].top&&s!==r&&n[r].index>n[s].index&&e.collisionByTimes(n[r],n[s])){o=n[s];break}null!=o&&(n[r].top=o.top+o.height)}while(o)}for(var a=0;a<t.length;a++)void 0!==t[a].data.subgroup&&(t[a].top=n[t[a].data.subgroup].top+.5*i.item.vertical)},e.stackSubgroupsWithInnerStack=function(t,i,n){var r=!1,o=[];for(var s in n)n[s].hasOwnProperty("index")?o[n[s].index]=s:o.push(s);for(var a=0;a<o.length;a++)if(s=o[a],n.hasOwnProperty(s)){r=r||n[s].stack,n[s].top=0;for(var h in n)n[h].visible&&n[s].index>n[h].index&&(n[s].top+=n[h].height);for(var l=t[s],u=0;u<l.length;u++)void 0!==l[u].data.subgroup&&(l[u].top=n[l[u].data.subgroup].top+.5*i.item.vertical,n[s].stack&&(l[u].baseTop=l[u].top));r&&n[s].stack&&e.substack(t[s],i,n[s])}},e.collision=function(t,e,i,n){return n?t.right-i.horizontal+.001<e.right+e.width&&t.right+t.width+i.horizontal-.001>e.right&&t.top-i.vertical+.001<e.top+e.height&&t.top+t.height+i.vertical-.001>e.top:t.left-i.horizontal+.001<e.left+e.width&&t.left+t.width+i.horizontal-.001>e.left&&t.top-i.vertical+.001<e.top+e.height&&t.top+t.height+i.vertical-.001>e.top},e.collisionByTimes=function(t,e){return t.start<=e.start&&t.end>=e.start&&t.top<e.top+e.height&&t.top+t.height>e.top||e.start<=t.start&&e.end>=t.start&&e.top<t.top+t.height&&e.top+e.height>t.top}},function(t,e,i){function n(t,e,i){if(this.props={dot:{width:0,height:0},line:{width:0,height:0}},this.options=i,t&&void 0==t.start)throw new Error('Property "start" missing in item '+t);r.call(this,t,e,i)}var r=i(38);n.prototype=new r(null,null,null),n.prototype.isVisible=function(t){var e=this.options.align,i=this.width*t.getMillisecondsPerPixel();return"right"==e?this.data.start.getTime()>t.start&&this.data.start.getTime()-i<t.end:"left"==e?this.data.start.getTime()+i>t.start&&this.data.start.getTime()<t.end:this.data.start.getTime()+i/2>t.start&&this.data.start.getTime()-i/2<t.end},n.prototype._createDomElement=function(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-line",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-dot",this.dom.box["timeline-item"]=this,this.dirty=!0)},n.prototype._appendDomElement=function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.box)}if(!this.dom.line.parentNode){var e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var i=this.parent.dom.axis;if(!e)throw new Error("Cannot redraw item: parent has no axis container element");i.appendChild(this.dom.dot)}this.displayed=!0},n.prototype._updateDirtyDomComponents=function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var t=this.editable.updateTime||this.editable.updateGroup,e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(t?" vis-editable":" vis-readonly");this.dom.box.className="vis-item vis-box"+e,this.dom.line.className="vis-item vis-line"+e,this.dom.dot.className="vis-item vis-dot"+e}},n.prototype._getDomComponentsSizes=function(){return{previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},dot:{height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},line:{width:this.dom.line.offsetWidth},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}}},n.prototype._updateDomComponentsSizes=function(t){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.props.dot.height=t.dot.height,this.props.dot.width=t.dot.width,this.props.line.width=t.line.width,this.width=t.box.width,this.height=t.box.height,this.options.rtl?this.dom.box.style.right=t.previous.right:this.dom.box.style.left=t.previous.left,this.dirty=!1},n.prototype._repaintDomAdditionals=function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.box)},n.prototype.redraw=function(t){var e,i=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),function(){this.dirty&&(e=this._getDomComponentsSizes())}.bind(this),function(){this.dirty&&this._updateDomComponentsSizes.bind(this)(e)}.bind(this),this._repaintDomAdditionals.bind(this)];if(t)return i;var n;return i.forEach(function(t){n=t()}),n},n.prototype.show=function(){this.displayed||this.redraw()},n.prototype.hide=function(){if(this.displayed){var t=this.dom;t.box.parentNode&&t.box.parentNode.removeChild(t.box),t.line.parentNode&&t.line.parentNode.removeChild(t.line),t.dot.parentNode&&t.dot.parentNode.removeChild(t.dot),this.displayed=!1}},n.prototype.repositionX=function(){var t=this.conversion.toScreen(this.data.start),e=this.options.align;"right"==e?this.options.rtl?(this.right=t-this.width,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=t-this.props.line.width+"px",this.dom.dot.style.right=t-this.props.line.width/2-this.props.dot.width/2+"px"):(this.left=t-this.width,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=t-this.props.line.width+"px",this.dom.dot.style.left=t-this.props.line.width/2-this.props.dot.width/2+"px"):"left"==e?this.options.rtl?(this.right=t,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=t+"px",this.dom.dot.style.right=t+this.props.line.width/2-this.props.dot.width/2+"px"):(this.left=t,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=t+"px",this.dom.dot.style.left=t+this.props.line.width/2-this.props.dot.width/2+"px"):this.options.rtl?(this.right=t-this.width/2,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=t-this.props.line.width+"px",this.dom.dot.style.right=t-this.props.dot.width/2+"px"):(this.left=t-this.width/2,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=t-this.props.line.width/2+"px",this.dom.dot.style.left=t-this.props.dot.width/2+"px")},n.prototype.repositionY=function(){var t=this.options.orientation.item,e=this.dom.box,i=this.dom.line,n=this.dom.dot;if("top"==t)e.style.top=(this.top||0)+"px",i.style.top="0",i.style.height=this.parent.top+this.top+1+"px",i.style.bottom="";else{var r=this.parent.itemSet.props.height,o=r-this.parent.top-this.parent.height+this.top;e.style.top=(this.parent.height-this.top-this.height||0)+"px",i.style.top=r-o+"px",i.style.bottom="0"}n.style.top=-this.props.dot.height/2+"px"},n.prototype.getWidthLeft=function(){return this.width/2},n.prototype.getWidthRight=function(){return this.width/2},t.exports=n},function(t,e,i){function n(t,e,i){if(this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},this.options=i,t&&void 0==t.start)throw new Error('Property "start" missing in item '+t);r.call(this,t,e,i)}var r=i(38);n.prototype=new r(null,null,null),n.prototype.isVisible=function(t){var e=this.width*t.getMillisecondsPerPixel();return this.data.start.getTime()+e>t.start&&this.data.start<t.end},n.prototype._createDomElement=function(){this.dom||(this.dom={},this.dom.point=document.createElement("div"),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.point.appendChild(this.dom.content),this.dom.dot=document.createElement("div"),this.dom.point.appendChild(this.dom.dot),this.dom.point["timeline-item"]=this,this.dirty=!0)},n.prototype._appendDomElement=function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.point.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.point)}this.displayed=!0},n.prototype._updateDirtyDomComponents=function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);var t=this.editable.updateTime||this.editable.updateGroup,e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(t?" vis-editable":" vis-readonly");this.dom.point.className="vis-item vis-point"+e,this.dom.dot.className="vis-item vis-dot"+e}},n.prototype._getDomComponentsSizes=function(){return{dot:{width:this.dom.dot.offsetWidth,height:this.dom.dot.offsetHeight},content:{width:this.dom.content.offsetWidth,height:this.dom.content.offsetHeight},point:{width:this.dom.point.offsetWidth,height:this.dom.point.offsetHeight}}},n.prototype._updateDomComponentsSizes=function(t){this.props.dot.width=t.dot.width,this.props.dot.height=t.dot.height,this.props.content.height=t.content.height,this.options.rtl?this.dom.content.style.marginRight=2*this.props.dot.width+"px":this.dom.content.style.marginLeft=2*this.props.dot.width+"px",this.width=t.point.width,this.height=t.point.height,this.dom.dot.style.top=(this.height-this.props.dot.height)/2+"px",this.options.rtl?this.dom.dot.style.right=this.props.dot.width/2+"px":this.dom.dot.style.left=this.props.dot.width/2+"px",this.dirty=!1},n.prototype._repaintDomAdditionals=function(){this._repaintOnItemUpdateTimeTooltip(this.dom.point),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.point)},n.prototype.redraw=function(t){var e,i=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),function(){this.dirty&&(e=this._getDomComponentsSizes())}.bind(this),function(){this.dirty&&this._updateDomComponentsSizes.bind(this)(e)}.bind(this),this._repaintDomAdditionals.bind(this)];if(t)return i;var n;return i.forEach(function(t){n=t()}),n},n.prototype.show=function(){this.displayed||this.redraw()},n.prototype.hide=function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)},n.prototype.repositionX=function(){var t=this.conversion.toScreen(this.data.start);this.options.rtl?(this.right=t-this.props.dot.width,this.dom.point.style.right=this.right+"px"):(this.left=t-this.props.dot.width,this.dom.point.style.left=this.left+"px")},n.prototype.repositionY=function(){var t=this.options.orientation.item,e=this.dom.point;e.style.top="top"==t?this.top+"px":this.parent.height-this.top-this.height+"px"},n.prototype.getWidthLeft=function(){return this.props.dot.width},n.prototype.getWidthRight=function(){return this.props.dot.width},t.exports=n},function(t,e,i){function n(t,e,i){if(this.props={content:{width:0}},this.overflow=!1,t){if(void 0==t.start)throw new Error('Property "start" missing in item '+t.id);if(void 0==t.end)throw new Error('Property "end" missing in item '+t.id)}r.call(this,t,e,i)}var r=i(38),o=i(69),s=i(70);n.prototype=new r(null,null,null),n.prototype.baseClassName="vis-item vis-background",n.prototype.stack=!1,n.prototype.isVisible=function(t){return this.data.start<t.end&&this.data.end>t.start},n.prototype._createDomElement=function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dirty=!0)},n.prototype._appendDomElement=function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var t=this.parent.dom.background;if(!t)throw new Error("Cannot redraw item: parent has no background container element");t.appendChild(this.dom.box)}this.displayed=!0},n.prototype._updateDirtyDomComponents=function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);var t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");this.dom.box.className=this.baseClassName+t}},n.prototype._getDomComponentsSizes=function(){return this.overflow="hidden"!==window.getComputedStyle(this.dom.content).overflow,{content:{width:this.dom.content.offsetWidth}}},n.prototype._updateDomComponentsSizes=function(t){this.props.content.width=t.content.width,this.height=0,this.dirty=!1},n.prototype._repaintDomAdditionals=function(){},n.prototype.redraw=function(t){var e,i=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),function(){this.dirty&&(e=this._getDomComponentsSizes.bind(this)())}.bind(this),function(){this.dirty&&this._updateDomComponentsSizes.bind(this)(e)}.bind(this),this._repaintDomAdditionals.bind(this)];if(t)return i;var n;return i.forEach(function(t){n=t()}),n},n.prototype.show=s.prototype.show,n.prototype.hide=s.prototype.hide,n.prototype.repositionX=s.prototype.repositionX,n.prototype.repositionY=function(t){var e,i=this.options.orientation.item;if(void 0!==this.data.subgroup){var n=this.data.subgroup;this.dom.box.style.height=this.parent.subgroups[n].height+"px",this.dom.box.style.top="top"==i?this.parent.top+this.parent.subgroups[n].top+"px":this.parent.top+this.parent.height-this.parent.subgroups[n].top-this.parent.subgroups[n].height+"px",this.dom.box.style.bottom=""}else this.parent instanceof o?(e=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.bottom="bottom"==i?"0":"",this.dom.box.style.top="top"==i?"0":""):(e=this.parent.height,this.dom.box.style.top=this.parent.top+"px",this.dom.box.style.bottom="");this.dom.box.style.height=e+"px"},t.exports=n},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=function(){function t(e,i){(0,o.default)(this,t),this.container=e,this.overflowMethod=i||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return(0,a.default)(t,[{key:"setPosition",value:function(t,e){this.x=parseInt(t),this.y=parseInt(e)}},{key:"setText",value:function(t){t instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(t)):this.frame.innerHTML=t}},{key:"show",value:function(t){if(void 0===t&&(t=!0),!0===t){var e=this.frame.clientHeight,i=this.frame.clientWidth,n=this.frame.parentNode.clientHeight,r=this.frame.parentNode.clientWidth,o=0,s=0;if("flip"==this.overflowMethod){var a=!1,h=!0;this.y-e<this.padding&&(h=!1),this.x+i>r-this.padding&&(a=!0),o=a?this.x-i:this.x,s=h?this.y-e:this.y}else s=this.y-e,s+e+this.padding>n&&(s=n-e-this.padding),s<this.padding&&(s=this.padding),o=this.x,o+i+this.padding>r&&(o=r-i-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=s+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),t}();e.default=h},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n="string",r="boolean",o="number",s="object",a={configure:{enabled:{boolean:r},filter:{boolean:r,function:"function"},container:{dom:"dom"},__type__:{object:s,boolean:r,function:"function"}},align:{string:n},rtl:{boolean:r,undefined:"undefined"},rollingMode:{follow:{boolean:r},offset:{number:o,undefined:"undefined"},__type__:{object:s}},verticalScroll:{boolean:r,undefined:"undefined"},horizontalScroll:{boolean:r,undefined:"undefined"},autoResize:{boolean:r},throttleRedraw:{number:o},clickToUse:{boolean:r},dataAttributes:{string:n,array:"array"},editable:{add:{boolean:r,undefined:"undefined"},remove:{boolean:r,undefined:"undefined"},updateGroup:{boolean:r,undefined:"undefined"},updateTime:{boolean:r,undefined:"undefined"},overrideItems:{boolean:r,undefined:"undefined"},__type__:{boolean:r,object:s}},end:{number:o,date:"date",string:n,moment:"moment"},format:{minorLabels:{millisecond:{string:n,undefined:"undefined"},second:{string:n,undefined:"undefined"},minute:{string:n,undefined:"undefined"},hour:{string:n,undefined:"undefined"},weekday:{string:n,undefined:"undefined"},day:{string:n,undefined:"undefined"},week:{string:n,undefined:"undefined"},month:{string:n,undefined:"undefined"},year:{string:n,undefined:"undefined"},__type__:{object:s,function:"function"}},majorLabels:{millisecond:{string:n,undefined:"undefined"},second:{string:n,undefined:"undefined"},minute:{string:n,undefined:"undefined"},hour:{string:n,undefined:"undefined"},weekday:{string:n,undefined:"undefined"},day:{string:n,undefined:"undefined"},week:{string:n,undefined:"undefined"},month:{string:n,undefined:"undefined"},year:{string:n,undefined:"undefined"},__type__:{object:s,function:"function"}},__type__:{object:s}},moment:{function:"function"},groupOrder:{string:n,function:"function"},groupEditable:{add:{boolean:r,undefined:"undefined"},remove:{boolean:r,undefined:"undefined"},order:{boolean:r,undefined:"undefined"},__type__:{boolean:r,object:s}},groupOrderSwap:{function:"function"},height:{string:n,number:o},hiddenDates:{start:{date:"date",number:o,string:n,moment:"moment"},end:{date:"date",number:o,string:n,moment:"moment"},repeat:{string:n},__type__:{object:s,array:"array"}},itemsAlwaysDraggable:{item:{boolean:r,undefined:"undefined"},range:{boolean:r,undefined:"undefined"},__type__:{boolean:r,object:s}},limitSize:{boolean:r},locale:{string:n},locales:{__any__:{any:"any"},__type__:{object:s}},margin:{axis:{number:o},item:{horizontal:{number:o,undefined:"undefined"},vertical:{number:o,undefined:"undefined"},__type__:{object:s,number:o}},__type__:{object:s,number:o}},max:{date:"date",number:o,string:n,moment:"moment"},maxHeight:{number:o,string:n},maxMinorChars:{number:o},min:{date:"date",number:o,string:n,moment:"moment"},minHeight:{number:o,string:n},moveable:{boolean:r},multiselect:{boolean:r},multiselectPerGroup:{boolean:r},onAdd:{function:"function"},onDropObjectOnItem:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},onInitialDrawComplete:{function:"function"},order:{function:"function"},orientation:{axis:{string:n,undefined:"undefined"},item:{string:n,undefined:"undefined"},__type__:{string:n,object:s}},selectable:{boolean:r},showCurrentTime:{boolean:r},showMajorLabels:{boolean:r},showMinorLabels:{boolean:r},stack:{boolean:r},stackSubgroups:{boolean:r},snap:{function:"function",null:"null"},start:{date:"date",number:o,string:n,moment:"moment"},template:{function:"function"},groupTemplate:{function:"function"},visibleFrameTemplate:{string:n,function:"function"},showTooltips:{boolean:r},tooltip:{followMouse:{boolean:r},overflowMethod:{string:["cap","flip"]},__type__:{object:s}},tooltipOnItemUpdateTime:{template:{function:"function"},__type__:{boolean:r,object:s}},timeAxis:{scale:{string:n,undefined:"undefined"},step:{number:o,undefined:"undefined"},__type__:{object:s}},type:{string:n},width:{string:n,number:o},zoomable:{boolean:r},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:o},zoomMin:{number:o},__type__:{object:s}},h={global:{align:["center","left","right"],direction:!1,autoResize:!0,clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},groupsDraggable:!1,height:"",locale:"",margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,stackSubgroups:!0,start:"",showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip"},tooltipOnItemUpdateTime:!1,type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1]}};e.allOptions=a,e.configureOptions=h},function(t,e,i){function n(t,e){this.id=s.randomUUID(),this.body=t,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=s.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var i=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(t,e,n){i._onAdd(e.items)},update:function(t,e,n){i._onUpdate(e.items)},remove:function(t,e,n){i._onRemove(e.items)}},this.groupListeners={add:function(t,e,n){i._onAddGroups(e.items)},update:function(t,e,n){i._onUpdateGroups(e.items)},remove:function(t,e,n){i._onRemoveGroups(e.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(e),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){i.lastStart=i.body.range.start,i.svg.style.left=s.option.asSize(-i.props.width),i.forceGraphUpdate=!0,i.redraw.call(i)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}var r=i(6),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=i(2),a=i(14),h=i(11),l=i(12),u=i(16),d=i(107),c=i(109),f=i(112),p=i(110),m=i(111),v=i(72);n.prototype=new u,n.prototype._create=function(){var t=document.createElement("div");t.className="vis-line-graph",this.dom.frame=t,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",t.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new d(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new d(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new f(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new f(this.body,this.options.legend,"right",this.options.groups),this.show()},n.prototype.setOptions=function(t){if(t){var e=["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];void 0===t.graphHeight&&void 0!==t.height?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):void 0!==this.body.domProps.centerContainer.height&&void 0!==t.graphHeight&&parseInt((t.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),s.selectiveDeepExtend(e,this.options,t),s.mergeOptions(this.options,t,"interpolation"),s.mergeOptions(this.options,t,"drawPoints"),s.mergeOptions(this.options,t,"shaded"),s.mergeOptions(this.options,t,"legend"),t.interpolation&&"object"==(0,o.default)(t.interpolation)&&t.interpolation.parametrization&&("uniform"==t.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==t.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&void 0!==t.dataAxis&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&void 0!==t.legend&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty("__ungrouped__")&&this.groups.__ungrouped__.setOptions(t)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))},n.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},n.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},n.prototype.setItems=function(t){var e,i=this,n=this.itemsData;if(t){if(!(t instanceof h||t instanceof l))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=t}else this.itemsData=null;if(n&&(s.forEach(this.itemListeners,function(t,e){n.off(e,t)}),e=n.getIds(),this._onRemove(e)),this.itemsData){var r=this.id;s.forEach(this.itemListeners,function(t,e){i.itemsData.on(e,t,r)}),e=this.itemsData.getIds(),this._onAdd(e)}},n.prototype.setGroups=function(t){var e,i=this;if(this.groupsData){s.forEach(this.groupListeners,function(t,e){i.groupsData.off(e,t)}),e=this.groupsData.getIds(),this.groupsData=null;for(var n=0;n<e.length;n++)this._removeGroup(e[n])}if(t){if(!(t instanceof h||t instanceof l))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=t}else this.groupsData=null;if(this.groupsData){var r=this.id;s.forEach(this.groupListeners,function(t,e){i.groupsData.on(e,t,r)}),e=this.groupsData.getIds(),this._onAddGroups(e)}},n.prototype._onUpdate=function(t){this._updateAllGroupData(t)},n.prototype._onAdd=function(t){this._onUpdate(t)},n.prototype._onRemove=function(t){this._onUpdate(t)},n.prototype._onUpdateGroups=function(t){this._updateAllGroupData(null,t)},n.prototype._onAddGroups=function(t){this._onUpdateGroups(t)},n.prototype._onRemoveGroups=function(t){for(var e=0;e<t.length;e++)this._removeGroup(t[e]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})},n.prototype._removeGroup=function(t){this.groups.hasOwnProperty(t)&&("right"==this.groups[t].options.yAxisOrientation?(this.yAxisRight.removeGroup(t),this.legendRight.removeGroup(t),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(t),this.legendLeft.removeGroup(t),this.legendLeft.redraw()),delete this.groups[t])},n.prototype._updateGroup=function(t,e){this.groups.hasOwnProperty(e)?(this.groups[e].update(t),"right"==this.groups[e].options.yAxisOrientation?(this.yAxisRight.updateGroup(e,this.groups[e]),this.legendRight.updateGroup(e,this.groups[e]),this.yAxisLeft.removeGroup(e),this.legendLeft.removeGroup(e)):(this.yAxisLeft.updateGroup(e,this.groups[e]),this.legendLeft.updateGroup(e,this.groups[e]),this.yAxisRight.removeGroup(e),this.legendRight.removeGroup(e))):(this.groups[e]=new c(t,e,this.options,this.groupsUsingDefaultStyles),"right"==this.groups[e].options.yAxisOrientation?(this.yAxisRight.addGroup(e,this.groups[e]),this.legendRight.addGroup(e,this.groups[e])):(this.yAxisLeft.addGroup(e,this.groups[e]),this.legendLeft.addGroup(e,this.groups[e]))),this.legendLeft.redraw(),this.legendRight.redraw()},n.prototype._updateAllGroupData=function(t,e){if(null!=this.itemsData){var i={},n=this.itemsData.get(),r=this.itemsData._fieldId,o={};t&&t.map(function(t){o[t]=t});for(var a={},h=0;h<n.length;h++){var l=n[h],u=l.group;null!==u&&void 0!==u||(u="__ungrouped__"),a.hasOwnProperty(u)?a[u]++:a[u]=1}var d={};if(!e&&t)for(u in this.groups)if(this.groups.hasOwnProperty(u)){v=this.groups[u];var c=v.getItems();i[u]=c.filter(function(t){return d[t[r]]=t[r],t[r]!==o[t[r]]});var f=a[u];a[u]-=i[u].length,i[u].length<f&&(i[u][f-1]={})}for(h=0;h<n.length;h++)if(l=n[h],u=l.group,null!==u&&void 0!==u||(u="__ungrouped__"),e||!t||l[r]===o[l[r]]||!d.hasOwnProperty(l[r])){i.hasOwnProperty(u)||(i[u]=new Array(a[u]));var p=s.bridgeObject(l);p.x=s.convert(l.x,"Date"),p.end=s.convert(l.end,"Date"),p.orginalY=l.y,p.y=Number(l.y),p[r]=l[r];var m=i[u].length-a[u]--;i[u][m]=p}for(u in this.groups)this.groups.hasOwnProperty(u)&&(i.hasOwnProperty(u)||(i[u]=new Array(0)));for(u in i)if(i.hasOwnProperty(u))if(0==i[u].length)this.groups.hasOwnProperty(u)&&this._removeGroup(u);else{var v=void 0;void 0!=this.groupsData&&(v=this.groupsData.get(u)),void 0==v&&(v={id:u,content:this.options.defaultGroup+u}),this._updateGroup(v,u),this.groups[u].setItems(i[u])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}},n.prototype.redraw=function(){var t=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,t=this._isResized()||t;var e=this.body.range.end-this.body.range.start,i=e!=this.lastVisibleInterval;if(this.lastVisibleInterval=e,1==t&&(this.svg.style.width=s.option.asSize(3*this.props.width),this.svg.style.left=s.option.asSize(-this.props.width),-1==(this.options.height+"").indexOf("%")&&1!=this.updateSVGheightOnResize||(this.updateSVGheight=!0)),1==this.updateSVGheight?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",1==t||1==i||1==this.abortedGraphUpdate||1==this.forceGraphUpdate)t=this._updateGraph()||t,this.forceGraphUpdate=!1;else if(0!=this.lastStart){var n=this.body.range.start-this.lastStart,r=this.body.range.end-this.body.range.start;if(0!=this.props.width){var o=this.props.width/r,a=n*o;this.svg.style.left=-this.props.width-a+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),t},n.prototype._getSortedGroupIds=function(){var t=[];for(var e in this.groups)if(this.groups.hasOwnProperty(e)){var i=this.groups[e];1!=i.visible||void 0!==this.options.groups.visibility[e]&&1!=this.options.groups.visibility[e]||t.push({id:e,zIndex:i.options.zIndex})}s.insertSort(t,function(t,e){var i=t.zIndex,n=e.zIndex;return void 0===i&&(i=0),void 0===n&&(n=0),i==n?0:i<n?-1:1});for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r].id;return n},n.prototype._updateGraph=function(){if(a.prepareElements(this.svgElements),0!=this.props.width&&null!=this.itemsData){var t,e,i={},n=this.body.util.toGlobalTime(-this.body.domProps.root.width),r=this.body.util.toGlobalTime(2*this.body.domProps.root.width),o=this._getSortedGroupIds();if(o.length>0){var s={};for(this._getRelevantData(o,s,n,r),this._applySampling(o,s),e=0;e<o.length;e++)this._convertXcoordinates(s[o[e]]);if(this._getYRanges(o,s,i),1==this._updateYAxis(o,i))return a.cleanupElements(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var h=void 0;for(e=0;e<o.length;e++)t=this.groups[o[e]],!0===this.options.stack&&"line"===this.options.style&&(void 0!=t.options.excludeFromStacking&&t.options.excludeFromStacking||(void 0!=h&&(this._stack(s[t.id],s[h.id]),1==t.options.shaded.enabled&&"group"!==t.options.shaded.orientation&&("top"==t.options.shaded.orientation&&"group"!==h.options.shaded.orientation?(h.options.shaded.orientation="group",h.options.shaded.groupId=t.id):(t.options.shaded.orientation="group",t.options.shaded.groupId=h.id))),h=t)),this._convertYcoordinates(s[o[e]],t);var l={};for(e=0;e<o.length;e++)if(t=this.groups[o[e]],"line"===t.options.style&&1==t.options.shaded.enabled){var u=s[o[e]];if(null==u||0==u.length)continue;if(l.hasOwnProperty(o[e])||(l[o[e]]=m.calcPath(u,t)),"group"===t.options.shaded.orientation){var d=t.options.shaded.groupId;if(-1===o.indexOf(d)){console.log(t.id+": Unknown shading group target given:"+d);continue}l.hasOwnProperty(d)||(l[d]=m.calcPath(s[d],this.groups[d])),m.drawShading(l[o[e]],t,l[d],this.framework)}else m.drawShading(l[o[e]],t,void 0,this.framework)}for(p.draw(o,s,this.framework),e=0;e<o.length;e++)if(t=this.groups[o[e]],s[o[e]].length>0)switch(t.options.style){case"line":l.hasOwnProperty(o[e])||(l[o[e]]=m.calcPath(s[o[e]],t)),m.draw(l[o[e]],t,this.framework);case"point":case"points":"point"!=t.options.style&&"points"!=t.options.style&&1!=t.options.drawPoints.enabled||v.draw(s[o[e]],t,this.framework)}}}return a.cleanupElements(this.svgElements),!1},n.prototype._stack=function(t,e){var i,n,r,o,s;i=0;for(var a=0;a<t.length;a++){o=void 0,s=void 0;for(var h=i;h<e.length;h++){if(e[h].x===t[a].x){o=e[h],s=e[h],i=h;break}if(e[h].x>t[a].x){s=e[h],o=0==h?s:e[h-1],i=h;break}}void 0===s&&(o=e[e.length-1],s=e[e.length-1]),n=s.x-o.x,r=s.y-o.y,t[a].y=0==n?t[a].orginalY+s.y:t[a].orginalY+r/n*(t[a].x-o.x)+o.y}},n.prototype._getRelevantData=function(t,e,i,n){var r,o,a,h;if(t.length>0)for(o=0;o<t.length;o++){r=this.groups[t[o]];var l=r.getItems();if(1==r.options.sort){var u=function(t,e){return t.getTime()==e.getTime()?0:t<e?-1:1},d=Math.max(0,s.binarySearchValue(l,i,"x","before",u)),c=Math.min(l.length,s.binarySearchValue(l,n,"x","after",u)+1);c<=0&&(c=l.length);var f=new Array(c-d);for(a=d;a<c;a++)h=r.itemsData[a],f[a-d]=h;e[t[o]]=f}else e[t[o]]=r.itemsData}},n.prototype._applySampling=function(t,e){var i;if(t.length>0)for(var n=0;n<t.length;n++)if(i=this.groups[t[n]],1==i.options.sampling){var r=e[t[n]];if(r.length>0){var o=1,s=r.length,a=this.body.util.toGlobalScreen(r[r.length-1].x)-this.body.util.toGlobalScreen(r[0].x),h=s/a;o=Math.min(Math.ceil(.2*s),Math.max(1,Math.round(h)));for(var l=new Array(s),u=0;u<s;u+=o){var d=Math.round(u/o);l[d]=r[u]}e[t[n]]=l.splice(0,Math.round(s/o))}}},n.prototype._getYRanges=function(t,e,i){var n,r,o,s,a=[],h=[];if(t.length>0){for(o=0;o<t.length;o++)n=e[t[o]],s=this.groups[t[o]].options,n.length>0&&(r=this.groups[t[o]],!0===s.stack&&"bar"===s.style?"left"===s.yAxisOrientation?a=a.concat(n):h=h.concat(n):i[t[o]]=r.getYRange(n,t[o]));p.getStackedYRange(a,i,t,"__barStackLeft","left"),p.getStackedYRange(h,i,t,"__barStackRight","right")}},n.prototype._updateYAxis=function(t,e){var i,n,r=!1,o=!1,s=!1,a=1e9,h=1e9,l=-1e9,u=-1e9;if(t.length>0){for(var d=0;d<t.length;d++){var c=this.groups[t[d]];c&&"right"!=c.options.yAxisOrientation?(o=!0,a=1e9,l=-1e9):c&&c.options.yAxisOrientation&&(s=!0,h=1e9,u=-1e9)}for(d=0;d<t.length;d++)e.hasOwnProperty(t[d])&&!0!==e[t[d]].ignore&&(i=e[t[d]].min,n=e[t[d]].max,"right"!=e[t[d]].yAxisOrientation?(o=!0,a=a>i?i:a,l=l<n?n:l):(s=!0,h=h>i?i:h,u=u<n?n:u));1==o&&this.yAxisLeft.setRange(a,l),1==s&&this.yAxisRight.setRange(h,u)}r=this._toggleAxisVisiblity(o,this.yAxisLeft)||r,r=this._toggleAxisVisiblity(s,this.yAxisRight)||r,1==s&&1==o?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!o,this.yAxisRight.masterAxis=this.yAxisLeft,0==this.yAxisRight.master?(this.yAxisLeft.lineOffset=1==s?this.yAxisRight.width:0,r=this.yAxisLeft.redraw()||r,r=this.yAxisRight.redraw()||r):r=this.yAxisRight.redraw()||r;var f=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(d=0;d<f.length;d++)-1!=t.indexOf(f[d])&&t.splice(t.indexOf(f[d]),1);return r},n.prototype._toggleAxisVisiblity=function(t,e){var i=!1;return 0==t?e.dom.frame.parentNode&&0==e.hidden&&(e.hide(),i=!0):e.dom.frame.parentNode||1!=e.hidden||(e.show(),i=!0),i},n.prototype._convertXcoordinates=function(t){for(var e=this.body.util.toScreen,i=0;i<t.length;i++)t[i].screen_x=e(t[i].x)+this.props.width,t[i].screen_y=t[i].y,void 0!=t[i].end?t[i].screen_end=e(t[i].end)+this.props.width:t[i].screen_end=void 0},n.prototype._convertYcoordinates=function(t,e){var i=this.yAxisLeft,n=Number(this.svg.style.height.replace("px",""));"right"==e.options.yAxisOrientation&&(i=this.yAxisRight);for(var r=0;r<t.length;r++)t[r].screen_y=Math.round(i.convertValue(t[r].y));e.setZeroPosition(Math.min(n,i.convertValue(0)))},t.exports=n},function(t,e,i){function n(t,e,i,n){this.id=s.randomUUID(),this.body=t,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format:function(t){return""+parseFloat(t.toPrecision(3))},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format:function(t){return""+parseFloat(t.toPrecision(3))},title:{text:void 0,style:void 0}}},this.linegraphOptions=n,this.linegraphSVG=i,this.props={},this.DOMelements={lines:{},labels:{},title:{}},this.dom={},this.scale=void 0,this.range={start:0,end:0},this.options=s.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(e),this.width=Number((""+this.options.width).replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.getBoundingClientRect().height,this.hidden=!1,this.stepPixels=25,this.zeroCrossing=-1,this.amountOfSteps=-1,this.lineOffset=0,this.master=!0,this.masterAxis=null,this.svgElements={},this.iconsRemoved=!1,this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};var r=this;this.body.emitter.on("verticalDrag",function(){r.dom.lineContainer.style.top=r.body.domProps.scrollTop+"px"})}var r=i(8),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=i(2),a=i(14),h=i(16),l=i(108);n.prototype=new h,n.prototype.addGroup=function(t,e){this.groups.hasOwnProperty(t)||(this.groups[t]=e),this.amountOfGroups+=1},n.prototype.updateGroup=function(t,e){this.groups.hasOwnProperty(t)||(this.amountOfGroups+=1),this.groups[t]=e},n.prototype.removeGroup=function(t){this.groups.hasOwnProperty(t)&&(delete this.groups[t],this.amountOfGroups-=1)},n.prototype.setOptions=function(t){if(t){var e=!1;this.options.orientation!=t.orientation&&void 0!==t.orientation&&(e=!0);var i=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"];s.selectiveDeepExtend(i,this.options,t),this.minWidth=Number((""+this.options.width).replace("px","")),!0===e&&this.dom.frame&&(this.hide(),this.show())}},n.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)},n.prototype._redrawGroupIcons=function(){a.prepareElements(this.svgElements);var t,e=this.options.iconWidth,i=11.5;t="left"===this.options.orientation?4:this.width-e-4;var n=(0,o.default)(this.groups);n.sort(function(t,e){return t<e?-1:1});for(var r=0;r<n.length;r++){var s=n[r];!0!==this.groups[s].visible||void 0!==this.linegraphOptions.visibility[s]&&!0!==this.linegraphOptions.visibility[s]||(this.groups[s].getLegend(e,15,this.framework,t,i),i+=19)}a.cleanupElements(this.svgElements),this.iconsRemoved=!1},n.prototype._cleanupIcons=function(){!1===this.iconsRemoved&&(a.prepareElements(this.svgElements),a.cleanupElements(this.svgElements),this.iconsRemoved=!0)},n.prototype.show=function(){this.hidden=!1,this.dom.frame.parentNode||("left"===this.options.orientation?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer)},n.prototype.hide=function(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.parentNode&&this.dom.lineContainer.parentNode.removeChild(this.dom.lineContainer)},n.prototype.setRange=function(t,e){this.range.start=t,this.range.end=e},n.prototype.redraw=function(){var t=!1,e=0;this.dom.lineContainer.style.top=this.body.domProps.scrollTop+"px";for(var i in this.groups)this.groups.hasOwnProperty(i)&&(!0!==this.groups[i].visible||void 0!==this.linegraphOptions.visibility[i]&&!0!==this.linegraphOptions.visibility[i]||e++);if(0===this.amountOfGroups||0===e)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height=this.height+"px",this.width=!0===this.options.visible?Number((""+this.options.width).replace("px","")):0;var n=this.props,r=this.dom.frame;r.className="vis-data-axis",this._calculateCharSize();var o=this.options.orientation,s=this.options.showMinorLabels,a=this.options.showMajorLabels;n.minorLabelHeight=s?n.minorCharHeight:0,n.majorLabelHeight=a?n.majorCharHeight:0,n.minorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.minorLinesOffset,n.minorLineHeight=1,n.majorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.majorLinesOffset,n.majorLineHeight=1,"left"===o?(r.style.top="0",r.style.left="0",r.style.bottom="",r.style.width=this.width+"px",r.style.height=this.height+"px",this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(r.style.top="",r.style.bottom="0",r.style.left="0",r.style.width=this.width+"px",r.style.height=this.height+"px",this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),t=this._redrawLabels(),t=this._isResized()||t,!0===this.options.icons?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(o)}return t},n.prototype._redrawLabels=function(){var t=this,e=!1;a.prepareElements(this.DOMelements.lines),a.prepareElements(this.DOMelements.labels);var i=this.options.orientation,n=void 0!=this.options[i].range?this.options[i].range:{},r=!0;void 0!=n.max&&(this.range.end=n.max,r=!1);var o=!0;void 0!=n.min&&(this.range.start=n.min,o=!1),this.scale=new l(this.range.start,this.range.end,o,r,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[i].format),!1===this.master&&void 0!=this.masterAxis&&this.scale.followScale(this.masterAxis.scale),this.maxLabelSize=0,this.scale.getLines().forEach(function(e){var n=e.y,r=e.major;t.options.showMinorLabels&&!1===r&&t._redrawLabel(n-2,e.val,i,"vis-y-axis vis-minor",t.props.minorCharHeight),r&&n>=0&&t._redrawLabel(n-2,e.val,i,"vis-y-axis vis-major",t.props.majorCharHeight),!0===t.master&&(r?t._redrawLine(n,i,"vis-grid vis-horizontal vis-major",t.options.majorLinesOffset,t.props.majorLineWidth):t._redrawLine(n,i,"vis-grid vis-horizontal vis-minor",t.options.minorLinesOffset,t.props.minorLineWidth))});var s=0;void 0!==this.options[i].title&&void 0!==this.options[i].title.text&&(s=this.props.titleCharHeight);var h=!0===this.options.icons?Math.max(this.options.iconWidth,s)+this.options.labelOffsetX+15:s+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-h&&!0===this.options.visible?(this.width=this.maxLabelSize+h,this.options.width=this.width+"px",a.cleanupElements(this.DOMelements.lines),a.cleanupElements(this.DOMelements.labels),this.redraw(),e=!0):this.maxLabelSize<this.width-h&&!0===this.options.visible&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+h),this.options.width=this.width+"px",a.cleanupElements(this.DOMelements.lines),a.cleanupElements(this.DOMelements.labels),this.redraw(),e=!0):(a.cleanupElements(this.DOMelements.lines),a.cleanupElements(this.DOMelements.labels),e=!1),e},n.prototype.convertValue=function(t){return this.scale.convertValue(t)},n.prototype.screenToValue=function(t){return this.scale.screenToValue(t)},n.prototype._redrawLabel=function(t,e,i,n,r){var o=a.getDOMElement("div",this.DOMelements.labels,this.dom.frame);o.className=n,o.innerHTML=e,"left"===i?(o.style.left="-"+this.options.labelOffsetX+"px",o.style.textAlign="right"):(o.style.right="-"+this.options.labelOffsetX+"px",o.style.textAlign="left"),o.style.top=t-.5*r+this.options.labelOffsetY+"px",e+="";var s=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<e.length*s&&(this.maxLabelSize=e.length*s)},n.prototype._redrawLine=function(t,e,i,n,r){if(!0===this.master){var o=a.getDOMElement("div",this.DOMelements.lines,this.dom.lineContainer);o.className=i,o.innerHTML="","left"===e?o.style.left=this.width-n+"px":o.style.right=this.width-n+"px",o.style.width=r+"px",o.style.top=t+"px"}},n.prototype._redrawTitle=function(t){if(a.prepareElements(this.DOMelements.title),void 0!==this.options[t].title&&void 0!==this.options[t].title.text){var e=a.getDOMElement("div",this.DOMelements.title,this.dom.frame);e.className="vis-y-axis vis-title vis-"+t,e.innerHTML=this.options[t].title.text,void 0!==this.options[t].title.style&&s.addCssText(e,this.options[t].title.style),"left"===t?e.style.left=this.props.titleCharHeight+"px":e.style.right=this.props.titleCharHeight+"px",e.style.width=this.height+"px"}a.cleanupElements(this.DOMelements.title)},n.prototype._calculateCharSize=function(){if(!("minorCharHeight"in this.props)){var t=document.createTextNode("0"),e=document.createElement("div");e.className="vis-y-axis vis-minor vis-measure",e.appendChild(t),this.dom.frame.appendChild(e),this.props.minorCharHeight=e.clientHeight,this.props.minorCharWidth=e.clientWidth,this.dom.frame.removeChild(e)}if(!("majorCharHeight"in this.props)){var i=document.createTextNode("0"),n=document.createElement("div");n.className="vis-y-axis vis-major vis-measure",n.appendChild(i),this.dom.frame.appendChild(n),this.props.majorCharHeight=n.clientHeight,this.props.majorCharWidth=n.clientWidth,this.dom.frame.removeChild(n)}if(!("titleCharHeight"in this.props)){var r=document.createTextNode("0"),o=document.createElement("div");o.className="vis-y-axis vis-title vis-measure",o.appendChild(r),this.dom.frame.appendChild(o),this.props.titleCharHeight=o.clientHeight,this.props.titleCharWidth=o.clientWidth,this.dom.frame.removeChild(o)}},t.exports=n},function(t,e,i){function n(t,e,i,n,r,o){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];if(this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=r,this.majorCharHeight=o,this._start=t,this._end=e,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=s,this.autoScaleStart=i,this.autoScaleEnd=n,this.formattingFunction=a,i||n){var h=this,l=function(t){var e=t-t%(h.magnitudefactor*h.minorSteps[h.minorStepIdx]);return t%(h.magnitudefactor*h.minorSteps[h.minorStepIdx])>h.magnitudefactor*h.minorSteps[h.minorStepIdx]*.5?e+h.magnitudefactor*h.minorSteps[h.minorStepIdx]:e};i&&(this._start-=2*this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._start=l(this._start)),n&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=l(this._end)),this.determineScale()}}n.prototype.setCharHeight=function(t){this.majorCharHeight=t},n.prototype.setHeight=function(t){this.containerHeight=t},n.prototype.determineScale=function(){var t=this._end-this._start;this.scale=this.containerHeight/t;var e=this.majorCharHeight/this.scale,i=t>0?Math.round(Math.log(t)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,i);var n=0;i<0&&(n=i);for(var r=!1,o=n;Math.abs(o)<=Math.abs(i);o++){this.magnitudefactor=Math.pow(10,o);for(var s=0;s<this.minorSteps.length;s++){if(this.magnitudefactor*this.minorSteps[s]>=e){r=!0,this.minorStepIdx=s;break}}if(!0===r)break}},n.prototype.is_major=function(t){return t%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])===0},n.prototype.getStep=function(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]},n.prototype.getFirstMajor=function(){var t=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(t-this._start%t)%t)},n.prototype.formatValue=function(t){var e=t.toPrecision(5);return"function"===typeof this.formattingFunction&&(e=this.formattingFunction(t)),"number"===typeof e?""+e:"string"===typeof e?e:t.toPrecision(5)},n.prototype.getLines=function(){for(var t=[],e=this.getStep(),i=(e-this._start%e)%e,n=this._start+i;this._end-n>1e-5;n+=e)n!=this._start&&t.push({major:this.is_major(n),y:this.convertValue(n),val:this.formatValue(n)});return t},n.prototype.followScale=function(t){var e=this.minorStepIdx,i=this._start,n=this._end,r=this,o=function(){r.magnitudefactor*=2},s=function(){r.magnitudefactor/=2};t.minorStepIdx<=1&&this.minorStepIdx<=1||t.minorStepIdx>1&&this.minorStepIdx>1||(t.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,2==e?o():(o(),o())):(this.minorStepIdx=2,1==e?s():(s(),s())));for(var a=t.convertValue(0),h=t.getStep()*t.scale,l=!1,u=0;!l&&u++<5;){this.scale=h/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);var d=this.containerHeight/this.scale;this._start=i,this._end=this._start+d;var c=this._end*this.scale,f=this.magnitudefactor*this.majorSteps[this.minorStepIdx],p=this.getFirstMajor()-t.getFirstMajor();if(this.zeroAlign){var m=a-c;this._end+=m/this.scale,this._start=this._end-d}else this.autoScaleStart?(this._start-=p/this.scale,this._end=this._start+d):(this._start+=f-p/this.scale,this._end=this._start+d);if(!this.autoScaleEnd&&this._end>n+1e-5)s(),l=!1;else{if(!this.autoScaleStart&&this._start<i-1e-5){if(!(this.zeroAlign&&i>=0)){s(),l=!1;continue}console.warn("Can't adhere to given 'min' range, due to zeroalign")}this.autoScaleStart&&this.autoScaleEnd&&d<n-i?(o(),l=!1):l=!0}}},n.prototype.convertValue=function(t){return this.containerHeight-(t-this._start)*this.scale},n.prototype.screenToValue=function(t){return(this.containerHeight-t)/this.scale+this._start},t.exports=n},function(t,e,i){function n(t,e,i,n){this.id=e;var r=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"];this.options=s.selectiveBridgeObject(r,i),this.usingDefaultStyle=void 0===t.className,this.groupsUsingDefaultStyles=n,this.zeroPosition=0,this.update(t),1==this.usingDefaultStyle&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=void 0===t.visible||t.visible}var r=i(6),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=i(2),a=i(110),h=i(111),l=i(72);n.prototype.setItems=function(t){null!=t?(this.itemsData=t,1==this.options.sort&&s.insertSort(this.itemsData,function(t,e){return t.x>e.x?1:-1})):this.itemsData=[]},n.prototype.getItems=function(){return this.itemsData},n.prototype.setZeroPosition=function(t){this.zeroPosition=t},n.prototype.setOptions=function(t){if(void 0!==t){var e=["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"];s.selectiveDeepExtend(e,this.options,t),"function"==typeof t.drawPoints&&(t.drawPoints={onRender:t.drawPoints}),s.mergeOptions(this.options,t,"interpolation"),s.mergeOptions(this.options,t,"drawPoints"),s.mergeOptions(this.options,t,"shaded"),t.interpolation&&"object"==(0,o.default)(t.interpolation)&&t.interpolation.parametrization&&("uniform"==t.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==t.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5))}},n.prototype.update=function(t){this.group=t,this.content=t.content||"graph",this.className=t.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=void 0===t.visible||t.visible,this.style=t.style,this.setOptions(t.options)},n.prototype.getLegend=function(t,e,i,n,r){if(void 0==i||null==i){i={svg:document.createElementNS("http://www.w3.org/2000/svg","svg"),svgElements:{},options:this.options,groups:[this]}}switch(void 0!=n&&null!=n||(n=0),void 0!=r&&null!=r||(r=.5*e),this.options.style){case"line":h.drawIcon(this,n,r,t,e,i);break;case"points":case"point":l.drawIcon(this,n,r,t,e,i);break;case"bar":a.drawIcon(this,n,r,t,e,i)}return{icon:i.svg,label:this.content,orientation:this.options.yAxisOrientation}},n.prototype.getYRange=function(t){for(var e=t[0].y,i=t[0].y,n=0;n<t.length;n++)e=e>t[n].y?t[n].y:e,i=i<t[n].y?t[n].y:i;return{min:e,max:i,yAxisOrientation:this.options.yAxisOrientation}},t.exports=n},function(t,e,i){function n(t,e){}var r=i(14),o=i(72);n.drawIcon=function(t,e,i,n,o,s){var a=.5*o,h=r.getSVGElement("rect",s.svgElements,s.svg);h.setAttributeNS(null,"x",e),h.setAttributeNS(null,"y",i-a),h.setAttributeNS(null,"width",n),h.setAttributeNS(null,"height",2*a),h.setAttributeNS(null,"class","vis-outline");var l=Math.round(.3*n),u=t.options.barChart.width,d=u/l,c=Math.round(.4*o),f=Math.round(.75*o),p=Math.round((n-2*l)/3);if(r.drawBar(e+.5*l+p,i+a-c-1,l,c,t.className+" vis-bar",s.svgElements,s.svg,t.style),r.drawBar(e+1.5*l+p+2,i+a-f-1,l,f,t.className+" vis-bar",s.svgElements,s.svg,t.style),1==t.options.drawPoints.enabled){var m={style:t.options.drawPoints.style,styles:t.options.drawPoints.styles,size:t.options.drawPoints.size/d,className:t.className};r.drawPoint(e+.5*l+p,i+a-c-1,m,s.svgElements,s.svg),r.drawPoint(e+1.5*l+p+2,i+a-f-1,m,s.svgElements,s.svg)}},n.draw=function(t,e,i){var s,a,h,l,u,d,c=[],f={},p=0;for(u=0;u<t.length;u++)if(l=i.groups[t[u]],"bar"===l.options.style&&!0===l.visible&&(void 0===i.options.groups.visibility[t[u]]||!0===i.options.groups.visibility[t[u]]))for(d=0;d<e[t[u]].length;d++)c.push({screen_x:e[t[u]][d].screen_x,screen_end:e[t[u]][d].screen_end,screen_y:e[t[u]][d].screen_y,x:e[t[u]][d].x,end:e[t[u]][d].end,y:e[t[u]][d].y,groupId:t[u],label:e[t[u]][d].label}),p+=1;if(0!==p)for(c.sort(function(t,e){return t.screen_x===e.screen_x?t.groupId<e.groupId?-1:1:t.screen_x-e.screen_x}),n._getDataIntersections(f,c),u=0;u<c.length;u++){l=i.groups[c[u].groupId];var m=void 0!=l.options.barChart.minWidth?l.options.barChart.minWidth:.1*l.options.barChart.width;a=c[u].screen_x;var v=0;if(void 0===f[a])u+1<c.length&&(s=Math.abs(c[u+1].screen_x-a)),h=n._getSafeDrawData(s,l,m);else{var g=u+(f[a].amount-f[a].resolved);g<c.length&&(s=Math.abs(c[g].screen_x-a)),h=n._getSafeDrawData(s,l,m),f[a].resolved+=1,!0===l.options.stack&&!0!==l.options.excludeFromStacking?c[u].screen_y<l.zeroPosition?(v=f[a].accumulatedNegative,f[a].accumulatedNegative+=l.zeroPosition-c[u].screen_y):(v=f[a].accumulatedPositive,f[a].accumulatedPositive+=l.zeroPosition-c[u].screen_y):!0===l.options.barChart.sideBySide&&(h.width=h.width/f[a].amount,h.offset+=f[a].resolved*h.width-.5*h.width*(f[a].amount+1))}var y=h.width,b=c[u].screen_x;if(void 0!=c[u].screen_end?(y=c[u].screen_end-c[u].screen_x,b+=.5*y):b+=h.offset,r.drawBar(b,c[u].screen_y-v,y,l.zeroPosition-c[u].screen_y,l.className+" vis-bar",i.svgElements,i.svg,l.style),!0===l.options.drawPoints.enabled){var _={screen_x:c[u].screen_x,screen_y:c[u].screen_y-v,x:c[u].x,y:c[u].y,groupId:c[u].groupId,label:c[u].label};o.draw([_],l,i,h.offset)}}},n._getDataIntersections=function(t,e){for(var i,n=0;n<e.length;n++)n+1<e.length&&(i=Math.abs(e[n+1].screen_x-e[n].screen_x)),n>0&&(i=Math.min(i,Math.abs(e[n-1].screen_x-e[n].screen_x))),0===i&&(void 0===t[e[n].screen_x]&&(t[e[n].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),t[e[n].screen_x].amount+=1)},n._getSafeDrawData=function(t,e,i){var n,r;return t<e.options.barChart.width&&t>0?(n=t<i?i:t,r=0,"left"===e.options.barChart.align?r-=.5*t:"right"===e.options.barChart.align&&(r+=.5*t)):(n=e.options.barChart.width,r=0,"left"===e.options.barChart.align?r-=.5*e.options.barChart.width:"right"===e.options.barChart.align&&(r+=.5*e.options.barChart.width)),{width:n,offset:r}},n.getStackedYRange=function(t,e,i,r,o){if(t.length>0){t.sort(function(t,e){return t.screen_x===e.screen_x?t.groupId<e.groupId?-1:1:t.screen_x-e.screen_x});var s={};n._getDataIntersections(s,t),e[r]=n._getStackedYRange(s,t),e[r].yAxisOrientation=o,i.push(r)}},n._getStackedYRange=function(t,e){for(var i,n=e[0].screen_y,r=e[0].screen_y,o=0;o<e.length;o++)i=e[o].screen_x,void 0===t[i]?(n=n>e[o].screen_y?e[o].screen_y:n,r=r<e[o].screen_y?e[o].screen_y:r):e[o].screen_y<0?t[i].accumulatedNegative+=e[o].screen_y:t[i].accumulatedPositive+=e[o].screen_y;for(var s in t)t.hasOwnProperty(s)&&(n=n>t[s].accumulatedNegative?t[s].accumulatedNegative:n,n=n>t[s].accumulatedPositive?t[s].accumulatedPositive:n,r=r<t[s].accumulatedNegative?t[s].accumulatedNegative:r,r=r<t[s].accumulatedPositive?t[s].accumulatedPositive:r);return{min:n,max:r}},t.exports=n},function(t,e,i){function n(t,e){}var r=i(14);n.calcPath=function(t,e){if(null!=t&&t.length>0){return 1==e.options.interpolation.enabled?n._catmullRom(t,e):n._linear(t)}},n.drawIcon=function(t,e,i,n,o,s){var a,h,l=.5*o,u=r.getSVGElement("rect",s.svgElements,s.svg);if(u.setAttributeNS(null,"x",e),u.setAttributeNS(null,"y",i-l),u.setAttributeNS(null,"width",n),u.setAttributeNS(null,"height",2*l),u.setAttributeNS(null,"class","vis-outline"),a=r.getSVGElement("path",s.svgElements,s.svg),a.setAttributeNS(null,"class",t.className),void 0!==t.style&&a.setAttributeNS(null,"style",t.style),a.setAttributeNS(null,"d","M"+e+","+i+" L"+(e+n)+","+i),1==t.options.shaded.enabled&&(h=r.getSVGElement("path",s.svgElements,s.svg),"top"==t.options.shaded.orientation?h.setAttributeNS(null,"d","M"+e+", "+(i-l)+"L"+e+","+i+" L"+(e+n)+","+i+" L"+(e+n)+","+(i-l)):h.setAttributeNS(null,"d","M"+e+","+i+" L"+e+","+(i+l)+" L"+(e+n)+","+(i+l)+"L"+(e+n)+","+i),h.setAttributeNS(null,"class",t.className+" vis-icon-fill"),void 0!==t.options.shaded.style&&""!==t.options.shaded.style&&h.setAttributeNS(null,"style",t.options.shaded.style)),1==t.options.drawPoints.enabled){var d={style:t.options.drawPoints.style,styles:t.options.drawPoints.styles,size:t.options.drawPoints.size,className:t.className};r.drawPoint(e+.5*n,i,d,s.svgElements,s.svg)}},n.drawShading=function(t,e,i,n){if(1==e.options.shaded.enabled){var o=Number(n.svg.style.height.replace("px","")),s=r.getSVGElement("path",n.svgElements,n.svg),a="L";1==e.options.interpolation.enabled&&(a="C");var h,l=0;l="top"==e.options.shaded.orientation?0:"bottom"==e.options.shaded.orientation?o:Math.min(Math.max(0,e.zeroPosition),o),h="group"==e.options.shaded.orientation&&null!=i&&void 0!=i?"M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,a,!1)+" L"+i[i.length-1][0]+","+i[i.length-1][1]+" "+this.serializePath(i,a,!0)+i[0][0]+","+i[0][1]+" Z":"M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,a,!1)+" V"+l+" H"+t[0][0]+" Z",s.setAttributeNS(null,"class",e.className+" vis-fill"),void 0!==e.options.shaded.style&&s.setAttributeNS(null,"style",e.options.shaded.style),s.setAttributeNS(null,"d",h)}},n.draw=function(t,e,i){if(null!=t&&void 0!=t){var n=r.getSVGElement("path",i.svgElements,i.svg);n.setAttributeNS(null,"class",e.className),void 0!==e.style&&n.setAttributeNS(null,"style",e.style);var o="L";1==e.options.interpolation.enabled&&(o="C"),n.setAttributeNS(null,"d","M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,o,!1))}},n.serializePath=function(t,e,i){if(t.length<2)return"";var n,r=e;if(i)for(n=t.length-2;n>0;n--)r+=t[n][0]+","+t[n][1]+" ";else for(n=1;n<t.length;n++)r+=t[n][0]+","+t[n][1]+" ";return r},n._catmullRomUniform=function(t){var e,i,n,r,o,s,a=[];a.push([Math.round(t[0].screen_x),Math.round(t[0].screen_y)]);for(var h=t.length,l=0;l<h-1;l++)e=0==l?t[0]:t[l-1],i=t[l],n=t[l+1],r=l+2<h?t[l+2]:n,o={screen_x:(-e.screen_x+6*i.screen_x+n.screen_x)*(1/6),screen_y:(-e.screen_y+6*i.screen_y+n.screen_y)*(1/6)},s={screen_x:(i.screen_x+6*n.screen_x-r.screen_x)*(1/6),screen_y:(i.screen_y+6*n.screen_y-r.screen_y)*(1/6)},a.push([o.screen_x,o.screen_y]),a.push([s.screen_x,s.screen_y]),a.push([n.screen_x,n.screen_y]);return a},n._catmullRom=function(t,e){var i=e.options.interpolation.alpha;if(0==i||void 0===i)return this._catmullRomUniform(t);var n,r,o,s,a,h,l,u,d,c,f,p,m,v,g,y,b,_,w,x=[];x.push([Math.round(t[0].screen_x),Math.round(t[0].screen_y)]);for(var S=t.length,k=0;k<S-1;k++)n=0==k?t[0]:t[k-1],r=t[k],o=t[k+1],s=k+2<S?t[k+2]:o,l=Math.sqrt(Math.pow(n.screen_x-r.screen_x,2)+Math.pow(n.screen_y-r.screen_y,2)),u=Math.sqrt(Math.pow(r.screen_x-o.screen_x,2)+Math.pow(r.screen_y-o.screen_y,2)),d=Math.sqrt(Math.pow(o.screen_x-s.screen_x,2)+Math.pow(o.screen_y-s.screen_y,2)),v=Math.pow(d,i),y=Math.pow(d,2*i),g=Math.pow(u,i),b=Math.pow(u,2*i),w=Math.pow(l,i),_=Math.pow(l,2*i),c=2*_+3*w*g+b,f=2*y+3*v*g+b,p=3*w*(w+g),p>0&&(p=1/p),m=3*v*(v+g),m>0&&(m=1/m),a={screen_x:(-b*n.screen_x+c*r.screen_x+_*o.screen_x)*p,screen_y:(-b*n.screen_y+c*r.screen_y+_*o.screen_y)*p},h={screen_x:(y*r.screen_x+f*o.screen_x-b*s.screen_x)*m,screen_y:(y*r.screen_y+f*o.screen_y-b*s.screen_y)*m},0==a.screen_x&&0==a.screen_y&&(a=r),0==h.screen_x&&0==h.screen_y&&(h=o),x.push([a.screen_x,a.screen_y]),x.push([h.screen_x,h.screen_y]),x.push([o.screen_x,o.screen_y]);return x},n._linear=function(t){for(var e=[],i=0;i<t.length;i++)e.push([t[i].screen_x,t[i].screen_y]);return e},t.exports=n},function(t,e,i){function n(t,e,i,n){this.body=t,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=i,this.options=s.extend({},this.defaultOptions),this.linegraphOptions=n,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(e)}var r=i(8),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=i(2),a=i(14),h=i(16);n.prototype=new h,n.prototype.clear=function(){this.groups={},this.amountOfGroups=0},n.prototype.addGroup=function(t,e){1!=e.options.excludeFromLegend&&(this.groups.hasOwnProperty(t)||(this.groups[t]=e),this.amountOfGroups+=1)},n.prototype.updateGroup=function(t,e){this.groups[t]=e},n.prototype.removeGroup=function(t){this.groups.hasOwnProperty(t)&&(delete this.groups[t],this.amountOfGroups-=1)},n.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)},n.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},n.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},n.prototype.setOptions=function(t){var e=["enabled","orientation","icons","left","right"];s.selectiveDeepExtend(e,this.options,t)},n.prototype.redraw=function(){var t=0,e=(0,o.default)(this.groups);e.sort(function(t,e){return t<e?-1:1});for(var i=0;i<e.length;i++){var n=e[i];1!=this.groups[n].visible||void 0!==this.linegraphOptions.visibility[n]&&1!=this.linegraphOptions.visibility[n]||t++}if(0==this.options[this.side].visible||0==this.amountOfGroups||0==this.options.enabled||0==t)this.hide();else{if(this.show(),"top-left"==this.options[this.side].position||"bottom-left"==this.options[this.side].position?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),"top-left"==this.options[this.side].position||"top-right"==this.options[this.side].position)this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var r=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+r+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}0==this.options.icons?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var s="";for(i=0;i<e.length;i++)n=e[i],1!=this.groups[n].visible||void 0!==this.linegraphOptions.visibility[n]&&1!=this.linegraphOptions.visibility[n]||(s+=this.groups[n].content+"<br />");this.dom.textArea.innerHTML=s,this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}},n.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var t=(0,o.default)(this.groups);t.sort(function(t,e){return t<e?-1:1}),a.resetElements(this.svgElements);var e=window.getComputedStyle(this.dom.frame).paddingTop,i=Number(e.replace("px","")),n=i,r=this.options.iconSize,s=.75*this.options.iconSize,h=i+.5*s+3;this.svg.style.width=r+5+i+"px";for(var l=0;l<t.length;l++){var u=t[l];1!=this.groups[u].visible||void 0!==this.linegraphOptions.visibility[u]&&1!=this.linegraphOptions.visibility[u]||(this.groups[u].getLegend(r,s,this.framework,n,h),h+=s+this.options.iconSpacing)}}},t.exports=n},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n="string",r="boolean",o="number",s="object",a={configure:{enabled:{boolean:r},filter:{boolean:r,function:"function"},container:{dom:"dom"},__type__:{object:s,boolean:r,function:"function"}},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:n},sort:{boolean:r},sampling:{boolean:r},stack:{boolean:r},graphHeight:{string:n,number:o},shaded:{enabled:{boolean:r},orientation:{string:["bottom","top","zero","group"]},groupId:{object:s},__type__:{boolean:r,object:s}},style:{string:["line","bar","points"]},barChart:{width:{number:o},minWidth:{number:o},sideBySide:{boolean:r},align:{string:["left","center","right"]},__type__:{object:s}},interpolation:{enabled:{boolean:r},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:o},__type__:{object:s,boolean:r}},drawPoints:{enabled:{boolean:r},onRender:{function:"function"},size:{number:o},style:{string:["square","circle"]},__type__:{object:s,boolean:r,function:"function"}},dataAxis:{showMinorLabels:{boolean:r},showMajorLabels:{boolean:r},icons:{boolean:r},width:{string:n,number:o},visible:{boolean:r},alignZeros:{boolean:r},left:{range:{min:{number:o,undefined:"undefined"},max:{number:o,undefined:"undefined"},__type__:{object:s}},format:{function:"function"},title:{text:{string:n,number:o,undefined:"undefined"},style:{string:n,undefined:"undefined"},__type__:{object:s}},__type__:{object:s}},right:{range:{min:{number:o,undefined:"undefined"},max:{number:o,undefined:"undefined"},__type__:{object:s}},format:{function:"function"},title:{text:{string:n,number:o,undefined:"undefined"},style:{string:n,undefined:"undefined"},__type__:{object:s}},__type__:{object:s}},__type__:{object:s}},legend:{enabled:{boolean:r},icons:{boolean:r},left:{visible:{boolean:r},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:s}},right:{visible:{boolean:r},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:s}},__type__:{object:s,boolean:r}},groups:{visibility:{any:"any"},__type__:{object:s}},autoResize:{boolean:r},throttleRedraw:{number:o},clickToUse:{boolean:r},end:{number:o,date:"date",string:n,moment:"moment"},format:{minorLabels:{millisecond:{string:n,undefined:"undefined"},second:{string:n,undefined:"undefined"},minute:{string:n,undefined:"undefined"},hour:{string:n,undefined:"undefined"},weekday:{string:n,undefined:"undefined"},day:{string:n,undefined:"undefined"},month:{string:n,undefined:"undefined"},year:{string:n,undefined:"undefined"},__type__:{object:s}},majorLabels:{millisecond:{string:n,undefined:"undefined"},second:{string:n,undefined:"undefined"},minute:{string:n,undefined:"undefined"},hour:{string:n,undefined:"undefined"},weekday:{string:n,undefined:"undefined"},day:{string:n,undefined:"undefined"},month:{string:n,undefined:"undefined"},year:{string:n,undefined:"undefined"},__type__:{object:s}},__type__:{object:s}},moment:{function:"function"},height:{string:n,number:o},hiddenDates:{start:{date:"date",number:o,string:n,moment:"moment"},end:{date:"date",number:o,string:n,moment:"moment"},repeat:{string:n},__type__:{object:s,array:"array"}},locale:{string:n},locales:{__any__:{any:"any"},__type__:{object:s}},max:{date:"date",number:o,string:n,moment:"moment"},maxHeight:{number:o,string:n},maxMinorChars:{number:o},min:{date:"date",number:o,string:n,moment:"moment"},minHeight:{number:o,string:n},moveable:{boolean:r},multiselect:{boolean:r},orientation:{string:n},showCurrentTime:{boolean:r},showMajorLabels:{boolean:r},showMinorLabels:{boolean:r},start:{date:"date",number:o,string:n,moment:"moment"},timeAxis:{scale:{string:n,undefined:"undefined"},step:{number:o,undefined:"undefined"},__type__:{object:s}},width:{string:n,number:o},zoomable:{boolean:r},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:o},zoomMin:{number:o},zIndex:{number:o},__type__:{object:s}},h={global:{sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}};e.allOptions=a,e.configureOptions=h},function(t,e,i){function n(t){return R=t,p()}function r(){L=0,N=R.charAt(0)}function o(){L++,N=R.charAt(L)}function s(){return R.charAt(L+1)}function a(t){return B.test(t)}function h(t,e){if(t||(t={}),e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function l(t,e,i){for(var n=e.split("."),r=t;n.length;){var o=n.shift();n.length?(r[o]||(r[o]={}),r=r[o]):r[o]=i}}function u(t,e){for(var i,n,r=null,o=[t],s=t;s.parent;)o.push(s.parent),s=s.parent;if(s.nodes)for(i=0,n=s.nodes.length;i<n;i++)if(e.id===s.nodes[i].id){r=s.nodes[i];break}for(r||(r={id:e.id},t.node&&(r.attr=h(r.attr,t.node))),i=o.length-1;i>=0;i--){var a=o[i];a.nodes||(a.nodes=[]),-1===a.nodes.indexOf(r)&&a.nodes.push(r)}e.attr&&(r.attr=h(r.attr,e.attr))}function d(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var i=h({},t.edge);e.attr=h(i,e.attr)}}function c(t,e,i,n,r){var o={from:e,to:i,type:n};return t.edge&&(o.attr=h({},t.edge)),o.attr=h(o.attr||{},r),o}function f(){for(z=D.NULL,F="";" "===N||"\t"===N||"\n"===N||"\r"===N;)o();do{var t=!1;if("#"===N){for(var e=L-1;" "===R.charAt(e)||"\t"===R.charAt(e);)e--;if("\n"===R.charAt(e)||""===R.charAt(e)){for(;""!=N&&"\n"!=N;)o();t=!0}}if("/"===N&&"/"===s()){for(;""!=N&&"\n"!=N;)o();t=!0}if("/"===N&&"*"===s()){for(;""!=N;){if("*"===N&&"/"===s()){o(),o();break}o()}t=!0}for(;" "===N||"\t"===N||"\n"===N||"\r"===N;)o()}while(t);if(""===N)return void(z=D.DELIMITER);var i=N+s();if(I[i])return z=D.DELIMITER,F=i,o(),void o();if(I[N])return z=D.DELIMITER,F=N,void o();if(a(N)||"-"===N){for(F+=N,o();a(N);)F+=N,o();return"false"===F?F=!1:"true"===F?F=!0:isNaN(Number(F))||(F=Number(F)),void(z=D.IDENTIFIER)}if('"'===N){for(o();""!=N&&('"'!=N||'"'===N&&'"'===s());)'"'===N?(F+=N,o()):"\\"===N&&"n"===s()?(F+="\n",o()):F+=N,o();if('"'!=N)throw x('End of string " expected');return o(),void(z=D.IDENTIFIER)}for(z=D.UNKNOWN;""!=N;)F+=N,o();throw new SyntaxError('Syntax error in part "'+S(F,30)+'"')}function p(){var t={};if(r(),f(),"strict"===F&&(t.strict=!0,f()),"graph"!==F&&"digraph"!==F||(t.type=F,f()),z===D.IDENTIFIER&&(t.id=F,f()),"{"!=F)throw x("Angle bracket { expected");if(f(),m(t),"}"!=F)throw x("Angle bracket } expected");if(f(),""!==F)throw x("End of file expected");return f(),delete t.node,delete t.edge,delete t.graph,t}function m(t){for(;""!==F&&"}"!=F;)v(t),";"===F&&f()}function v(t){var e=g(t);if(e)return void _(t,e);if(!y(t)){if(z!=D.IDENTIFIER)throw x("Identifier expected");var i=F;if(f(),"="===F){if(f(),z!=D.IDENTIFIER)throw x("Identifier expected");t[i]=F,f()}else b(t,i)}}function g(t){var e=null;if("subgraph"===F&&(e={},e.type="subgraph",f(),z===D.IDENTIFIER&&(e.id=F,f())),"{"===F){if(f(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,m(e),"}"!=F)throw x("Angle bracket } expected");f(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function y(t){return"node"===F?(f(),t.node=w(),"node"):"edge"===F?(f(),t.edge=w(),"edge"):"graph"===F?(f(),t.graph=w(),"graph"):null}function b(t,e){var i={id:e},n=w();n&&(i.attr=n),u(t,i),_(t,e)}function _(t,e){for(;"->"===F||"--"===F;){var i,n=F;f();var r=g(t);if(r)i=r;else{if(z!=D.IDENTIFIER)throw x("Identifier or subgraph expected");i=F,u(t,{id:i}),f()}d(t,c(t,e,i,n,w())),e=i}}function w(){for(var t=null,e={dashed:!0,solid:!1,dotted:[1,5]};"["===F;){for(f(),t={};""!==F&&"]"!=F;){if(z!=D.IDENTIFIER)throw x("Attribute name expected");var i=F;if(f(),"="!=F)throw x("Equal sign = expected");if(f(),z!=D.IDENTIFIER)throw x("Attribute value expected");var n=F;"style"===i&&(n=e[n]),l(t,i,n),f(),","==F&&f()}if("]"!=F)throw x("Bracket ] expected");f()}return t}function x(t){return new SyntaxError(t+', got "'+S(F,30)+'" (char '+L+")")}function S(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function k(t,e,i){Array.isArray(t)?t.forEach(function(t){Array.isArray(e)?e.forEach(function(e){i(t,e)}):i(t,e)}):Array.isArray(e)?e.forEach(function(e){i(t,e)}):i(t,e)}function E(t,e,i){for(var n=e.split("."),r=n.pop(),o=t,s=0;s<n.length;s++){var a=n[s];a in o||(o[a]={}),o=o[a]}return o[r]=i,t}function M(t,e){var i={};for(var n in t)if(t.hasOwnProperty(n)){var r=e[n];Array.isArray(r)?r.forEach(function(e){E(i,e,t[n])}):"string"===typeof r?E(i,r,t[n]):E(i,n,t[n])}return i}function T(t){var e=n(t),i={nodes:[],edges:[],options:{}};if(e.nodes&&e.nodes.forEach(function(t){var e={id:t.id,label:String(t.label||t.id)};h(e,M(t.attr,P)),e.image&&(e.shape="image"),i.nodes.push(e)}),e.edges){var r=function(t){var e={from:t.from,to:t.to};return h(e,M(t.attr,A)),e.arrows="->"===t.type?"to":void 0,e};e.edges.forEach(function(t){var e,n;e=t.from instanceof Object?t.from.nodes:{id:t.from},n=t.to instanceof Object?t.to.nodes:{id:t.to},t.from instanceof Object&&t.from.edges&&t.from.edges.forEach(function(t){var e=r(t);i.edges.push(e)}),k(e,n,function(e,n){var o=c(i,e.id,n.id,t.type,t.attr),s=r(o);i.edges.push(s)}),t.to instanceof Object&&t.to.edges&&t.to.edges.forEach(function(t){var e=r(t);i.edges.push(e)})})}return e.attr&&(i.options=e.attr),i}var C=i(29),O=function(t){return t&&t.__esModule?t:{default:t}}(C),P={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},A=(0,O.default)(P);A.color="color.color",A.style="dashes";var D={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},I={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},R="",L=0,N="",F="",z=D.NULL,B=/[a-zA-Z_0-9.:#]/;e.parseDOT=n,e.DOTToGraph=T},function(t,e,i){function n(t,e){var i=[],n=[],r={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};void 0!==e&&(void 0!==e.fixed&&(r.nodes.fixed=e.fixed),void 0!==e.parseColor&&(r.nodes.parseColor=e.parseColor),void 0!==e.inheritColor&&(r.edges.inheritColor=e.inheritColor));for(var o=t.edges,s=t.nodes,a=0;a<o.length;a++){var h={},l=o[a];h.id=l.id,h.from=l.source,h.to=l.target,h.attributes=l.attributes,h.label=l.label,h.title=void 0!==l.attributes?l.attributes.title:void 0,"Directed"===l.type&&(h.arrows="to"),l.color&&!1===r.inheritColor&&(h.color=l.color),i.push(h)}for(var u=0;u<s.length;u++){var d={},c=s[u];d.id=c.id,d.attributes=c.attributes,d.x=c.x,d.y=c.y,d.label=c.label,d.title=void 0!==c.attributes?c.attributes.title:c.title,!0===r.nodes.parseColor?d.color=c.color:d.color=void 0!==c.color?{background:c.color,border:c.color,highlight:{background:c.color,border:c.color},hover:{background:c.color,border:c.color}}:void 0,d.size=c.size,d.fixed=r.nodes.fixed&&void 0!==c.x&&void 0!==c.y,n.push(d)}return{nodes:n,edges:i}}e.parseGephi=n},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=i(185),l=n(h),u=function(){function t(e){(0,o.default)(this,t),this.images={},this.imageBroken={},this.callback=e}return(0,a.default)(t,[{key:"_tryloadBrokenUrl",value:function(t,e,i){if(void 0!==t&&void 0!==i){if(void 0===e)return void console.warn("No broken url image defined");i.onerror=function(){console.error("Could not load brokenImage:",e)},i.image.src=e}}},{key:"_redrawWithImage",value:function(t){this.callback&&this.callback(t)}},{key:"load",value:function(t,e){var i=this,n=this.images[t];if(n)return n;var r=new l.default;return this.images[t]=r,r.image.onload=function(){i._fixImageCoordinates(r.image),r.init(),i._redrawWithImage(r)},r.image.onerror=function(){console.error("Could not load image:",t),i._tryloadBrokenUrl(t,e,r)},r.image.src=t,r}},{key:"_fixImageCoordinates",value:function(t){0===t.width&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t))}}]),t}();e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(30),o=n(r),s=i(6),a=n(s),h=i(0),l=n(h),u=i(1),d=n(u),c=i(2),f=i(48).default,p=i(191).default,m=["bold","ital","boldital","mono"],v=function(){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,l.default)(this,t),this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(i),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}return(0,d.default)(t,[{key:"setOptions",value:function(t){if(this.elementOptions=t,this.initFontOptions(t.font),f.isValidLabel(t.label)?this.labelDirty=!0:t.label="",void 0!==t.font&&null!==t.font)if("string"===typeof t.font)this.baseSize=this.fontOptions.size;else if("object"===(0,a.default)(t.font)){var e=t.font.size;void 0!==e&&(this.baseSize=e)}}},{key:"initFontOptions",value:function(e){var i=this;if(c.forEach(m,function(t){i.fontOptions[t]={}}),t.parseFontString(this.fontOptions,e))return void(this.fontOptions.vadjust=0);c.forEach(e,function(t,e){void 0!==t&&null!==t&&"object"!==("undefined"===typeof t?"undefined":(0,a.default)(t))&&(i.fontOptions[e]=t)})}},{key:"constrain",value:function(t){var e={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},i=c.topMost(t,"widthConstraint");if("number"===typeof i)e.maxWdt=Number(i),e.minWdt=Number(i);else if("object"===("undefined"===typeof i?"undefined":(0,a.default)(i))){var n=c.topMost(t,["widthConstraint","maximum"]);"number"===typeof n&&(e.maxWdt=Number(n));var r=c.topMost(t,["widthConstraint","minimum"]);"number"===typeof r&&(e.minWdt=Number(r))}var o=c.topMost(t,"heightConstraint");if("number"===typeof o)e.minHgt=Number(o);else if("object"===("undefined"===typeof o?"undefined":(0,a.default)(o))){var s=c.topMost(t,["heightConstraint","minimum"]);"number"===typeof s&&(e.minHgt=Number(s));var h=c.topMost(t,["heightConstraint","valign"]);"string"===typeof h&&("top"!==h&&"bottom"!==h||(e.valign=h))}return e}},{key:"update",value:function(t,e){this.setOptions(t,!0),this.propagateFonts(e),c.deepExtend(this.fontOptions,this.constrain(e)),this.fontOptions.chooser=f.choosify("label",e)}},{key:"adjustSizes",value:function(t){var e=t?t.right+t.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=e,this.fontOptions.minWdt-=e);var i=t?t.top+t.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=i)}},{key:"addFontOptionsToPile",value:function(t,e){for(var i=0;i<e.length;++i)this.addFontToPile(t,e[i])}},{key:"addFontToPile",value:function(t,e){if(void 0!==e&&void 0!==e.font&&null!==e.font){var i=e.font;t.push(i)}}},{key:"getBasicOptions",value:function(e){for(var i={},n=0;n<e.length;++n){var r=e[n],o={};t.parseFontString(o,r)&&(r=o),c.forEach(r,function(t,e){void 0!==t&&(i.hasOwnProperty(e)||(-1!==m.indexOf(e)?i[e]={}:i[e]=t))})}return i}},{key:"getFontOption",value:function(e,i,n){for(var r=void 0,o=0;o<e.length;++o){var s=e[o];if(s.hasOwnProperty(i)){if(void 0===(r=s[i])||null===r)continue;var a={};if(t.parseFontString(a,r)&&(r=a),r.hasOwnProperty(n))return r[n]}}if(this.fontOptions.hasOwnProperty(n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}},{key:"getFontOptions",value:function(t,e){for(var i={},n=["color","size","face","mod","vadjust"],r=0;r<n.length;++r){var o=n[r];i[o]=this.getFontOption(t,e,o)}return i}},{key:"propagateFonts",value:function(t){var e=this,i=[];this.addFontOptionsToPile(i,t),this.fontOptions=this.getBasicOptions(i);for(var n=0;n<m.length;++n)!function(t){var n=m[t],r=e.fontOptions[n],o=e.getFontOptions(i,n);c.forEach(o,function(t,e){r[e]=t}),r.size=Number(r.size),r.vadjust=Number(r.vadjust)}(n)}},{key:"draw",value:function(t,e,i,n,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";if(void 0!==this.elementOptions.label){var s=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&s<this.elementOptions.scaling.label.drawThreshold-1||(s>=this.elementOptions.scaling.label.maxVisible&&(s=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(t,n,r,e,i,o),this._drawBackground(t),this._drawText(t,e,this.size.yLine,o,s))}}},{key:"_drawBackground",value:function(t){if(void 0!==this.fontOptions.background&&"none"!==this.fontOptions.background){t.fillStyle=this.fontOptions.background;var e=this.getSize();t.fillRect(e.left,e.top,e.width,e.height)}}},{key:"_drawText",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"middle",r=arguments[4],s=this._setAlignment(t,e,i,n),a=(0,o.default)(s,2);e=a[0],i=a[1],t.textAlign="left",e-=this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&("top"===this.fontOptions.valign&&(i-=(this.size.height-this.size.labelHeight)/2),"bottom"===this.fontOptions.valign&&(i+=(this.size.height-this.size.labelHeight)/2));for(var h=0;h<this.lineCount;h++){var l=this.lines[h];if(l&&l.blocks){var u=0;this.isEdgeLabel||"center"===this.fontOptions.align?u+=(this.size.width-l.width)/2:"right"===this.fontOptions.align&&(u+=this.size.width-l.width);for(var d=0;d<l.blocks.length;d++){var c=l.blocks[d];t.font=c.font;var f=this._getColor(c.color,r,c.strokeColor),p=(0,o.default)(f,2),m=p[0],v=p[1];c.strokeWidth>0&&(t.lineWidth=c.strokeWidth,t.strokeStyle=v,t.lineJoin="round"),t.fillStyle=m,c.strokeWidth>0&&t.strokeText(c.text,e+u,i+c.vadjust),t.fillText(c.text,e+u,i+c.vadjust),u+=c.width}i+=l.height}}}},{key:"_setAlignment",value:function(t,e,i,n){if(this.isEdgeLabel&&"horizontal"!==this.fontOptions.align&&!1===this.pointToSelf){e=0,i=0;"top"===this.fontOptions.align?(t.textBaseline="alphabetic",i-=4):"bottom"===this.fontOptions.align?(t.textBaseline="hanging",i+=4):t.textBaseline="middle"}else t.textBaseline=n;return[e,i]}},{key:"_getColor",value:function(t,e,i){var n=t||"#000000",r=i||"#ffffff";if(e<=this.elementOptions.scaling.label.drawThreshold){var o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-e)));n=c.overrideOpacity(n,o),r=c.overrideOpacity(r,o)}return[n,r]}},{key:"getTextSize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._processLabel(t,e,i),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var t=this.size.left,e=this.size.top-1;if(this.isEdgeLabel){var i=.5*-this.size.width;switch(this.fontOptions.align){case"middle":t=i,e=.5*-this.size.height;break;case"top":t=i,e=-(this.size.height+2);break;case"bottom":t=i,e=2}}return{left:t,top:e,width:this.size.width,height:this.size.height}}},{key:"calculateLabelSize",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";this._processLabel(t,e,i),this.size.left=n-.5*this.size.width,this.size.top=r-.5*this.size.height,this.size.yLine=r+.5*(1-this.lineCount)*this.fontOptions.size,"hanging"===o&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(t,e,i,n){var r=function(t,e,i){return"normal"===e?"mod"===i?"":t[i]:void 0!==t[e][i]?t[e][i]:t[i]},o={color:r(this.fontOptions,n,"color"),size:r(this.fontOptions,n,"size"),face:r(this.fontOptions,n,"face"),mod:r(this.fontOptions,n,"mod"),vadjust:r(this.fontOptions,n,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(e||i)&&("normal"===n&&!0===this.fontOptions.chooser&&this.elementOptions.labelHighlightBold?o.mod="bold":"function"===typeof this.fontOptions.chooser&&this.fontOptions.chooser(o,this.elementOptions.id,e,i));var s="";return void 0!==o.mod&&""!==o.mod&&(s+=o.mod+" "),s+=o.size+"px "+o.face,t.font=s.replace(/"/g,""),o.font=t.font,o.height=o.size,o}},{key:"differentState",value:function(t,e){return t!==this.selectedState||e!==this.hoverState}},{key:"_processLabelText",value:function(t,e,i,n){return new p(t,this,e,i).process(n)}},{key:"_processLabel",value:function(t,e,i){if(!1!==this.labelDirty||this.differentState(e,i)){var n=this._processLabelText(t,e,i,this.elementOptions.label);this.fontOptions.minWdt>0&&n.width<this.fontOptions.minWdt&&(n.width=this.fontOptions.minWdt),this.size.labelHeight=n.height,this.fontOptions.minHgt>0&&n.height<this.fontOptions.minHgt&&(n.height=this.fontOptions.minHgt),this.lines=n.lines,this.lineCount=n.lines.length,this.size.width=n.width,this.size.height=n.height,this.selectedState=e,this.hoverState=i,this.labelDirty=!1}}},{key:"visible",value:function(){return 0!==this.size.width&&0!==this.size.height&&void 0!==this.elementOptions.label&&!(this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(t,e){if(!e||"string"!==typeof e)return!1;var i=e.split(" ");return t.size=i[0].replace("px",""),t.face=i[1],t.color=i[2],!0}}]),t}();e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(30),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(2),d=i(119).default,c=function(){function t(e,i,n){(0,a.default)(this,t),this.body=i,this.labelModule=n,this.options={},this.setOptions(e),this.colorDirty=!0,this.color={},this.selectionWidth=2,this.hoverWidth=1.5,this.fromPoint=this.from,this.toPoint=this.to}return(0,l.default)(t,[{key:"connect",value:function(){this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(t){this.options=t,this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(t,e,i,n,r){t.strokeStyle=this.getColor(t,e,i,n),t.lineWidth=e.width,!1!==e.dashes?this._drawDashedLine(t,e,r):this._drawLine(t,e,r)}},{key:"_drawLine",value:function(t,e,i,n,r){if(this.from!=this.to)this._line(t,e,i,n,r);else{var s=this._getCircleData(t),a=(0,o.default)(s,3),h=a[0],l=a[1],u=a[2];this._circle(t,e,h,l,u)}}},{key:"_drawDashedLine",value:function(t,e,i,n,r){t.lineCap="round";var s=[5,5];if(!0===Array.isArray(e.dashes)&&(s=e.dashes),void 0!==t.setLineDash){if(t.save(),t.setLineDash(s),t.lineDashOffset=0,this.from!=this.to)this._line(t,e,i);else{var a=this._getCircleData(t),h=(0,o.default)(a,3),l=h[0],u=h[1],d=h[2];this._circle(t,e,l,u,d)}t.setLineDash([0]),t.lineDashOffset=0,t.restore()}else{if(this.from!=this.to)t.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,s);else{var c=this._getCircleData(t),f=(0,o.default)(c,3),p=f[0],m=f[1],v=f[2];this._circle(t,e,p,m,v)}this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}}},{key:"findBorderPosition",value:function(t,e,i){return this.from!=this.to?this._findBorderPosition(t,e,i):this._findBorderPositionCircle(t,e,i)}},{key:"findBorderPositions",value:function(t){var e={},i={};if(this.from!=this.to)e=this._findBorderPosition(this.from,t),i=this._findBorderPosition(this.to,t);else{var n=this._getCircleData(t).slice(0,2),r=(0,o.default)(n,2),s=r[0],a=r[1];e=this._findBorderPositionCircle(this.from,t,{x:s,y:a,low:.25,high:.6,direction:-1}),i=this._findBorderPositionCircle(this.from,t,{x:s,y:a,low:.6,high:.8,direction:1})}return{from:e,to:i}}},{key:"_getCircleData",value:function(t){var e=void 0,i=void 0,n=this.from,r=this.options.selfReferenceSize;return void 0!==t&&void 0===n.shape.width&&n.shape.resize(t),n.shape.width>n.shape.height?(e=n.x+.5*n.shape.width,i=n.y-r):(e=n.x+r,i=n.y-.5*n.shape.height),[e,i,r]}},{key:"_pointOnCircle",value:function(t,e,i,n){var r=2*n*Math.PI;return{x:t+i*Math.cos(r),y:e-i*Math.sin(r)}}},{key:"_findBorderPositionCircle",value:function(t,e,i){for(var n=i.x,r=i.y,o=i.low,s=i.high,a=i.direction,h=0,l=this.options.selfReferenceSize,u=void 0,d=void 0,c=void 0,f=void 0,p=void 0,m=.5*(o+s);o<=s&&h<10&&(m=.5*(o+s),u=this._pointOnCircle(n,r,l,m),d=Math.atan2(t.y-u.y,t.x-u.x),c=t.distanceToBorder(e,d),f=Math.sqrt(Math.pow(u.x-t.x,2)+Math.pow(u.y-t.y,2)),p=c-f,!(Math.abs(p)<.05));)p>0?a>0?o=m:s=m:a>0?s=m:o=m,h++;return u.t=m,u}},{key:"getLineWidth",value:function(t,e){return!0===t?Math.max(this.selectionWidth,.3/this.body.view.scale):!0===e?Math.max(this.hoverWidth,.3/this.body.view.scale):Math.max(this.options.width,.3/this.body.view.scale)}},{key:"getColor",value:function(t,e,i,n){if(!1!==e.inheritsColor){if("both"===e.inheritsColor&&this.from.id!==this.to.id){var r=t.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),o=void 0,s=void 0;return o=this.from.options.color.highlight.border,s=this.to.options.color.highlight.border,!1===this.from.selected&&!1===this.to.selected?(o=u.overrideOpacity(this.from.options.color.border,e.opacity),s=u.overrideOpacity(this.to.options.color.border,e.opacity)):!0===this.from.selected&&!1===this.to.selected?s=this.to.options.color.border:!1===this.from.selected&&!0===this.to.selected&&(o=this.from.options.color.border),r.addColorStop(0,o),r.addColorStop(1,s),r}return"to"===e.inheritsColor?u.overrideOpacity(this.to.options.color.border,e.opacity):u.overrideOpacity(this.from.options.color.border,e.opacity)}return u.overrideOpacity(e.color,e.opacity)}},{key:"_circle",value:function(t,e,i,n,r){this.enableShadow(t,e),t.beginPath(),t.arc(i,n,r,0,2*Math.PI,!1),t.stroke(),this.disableShadow(t,e)}},{key:"getDistanceToEdge",value:function(t,e,i,n,r,s,a,h){var l=0;if(this.from!=this.to)l=this._getDistanceToEdge(t,e,i,n,r,s,a);else{var u=this._getCircleData(void 0),d=(0,o.default)(u,3),c=d[0],f=d[1],p=d[2],m=c-r,v=f-s;l=Math.abs(Math.sqrt(m*m+v*v)-p)}return l}},{key:"_getDistanceToLine",value:function(t,e,i,n,r,o){var s=i-t,a=n-e,h=s*s+a*a,l=((r-t)*s+(o-e)*a)/h;l>1?l=1:l<0&&(l=0);var u=t+l*s,d=e+l*a,c=u-r,f=d-o;return Math.sqrt(c*c+f*f)}},{key:"getArrowData",value:function(t,e,i,n,r,s){var a=void 0,h=void 0,l=void 0,u=void 0,d=void 0,c=void 0,f=void 0,p=s.width;if("from"===e?(l=this.from,u=this.to,d=.1,c=s.fromArrowScale,f=s.fromArrowType):"to"===e?(l=this.to,u=this.from,d=-.1,c=s.toArrowScale,f=s.toArrowType):(l=this.to,u=this.from,c=s.middleArrowScale,f=s.middleArrowType),l!=u)if("middle"!==e)if(!0===this.options.smooth.enabled){h=this.findBorderPosition(l,t,{via:i});var m=this.getPoint(Math.max(0,Math.min(1,h.t+d)),i);a=Math.atan2(h.y-m.y,h.x-m.x)}else a=Math.atan2(l.y-u.y,l.x-u.x),h=this.findBorderPosition(l,t);else a=Math.atan2(l.y-u.y,l.x-u.x),h=this.getPoint(.5,i);else{var v=this._getCircleData(t),g=(0,o.default)(v,3),y=g[0],b=g[1],_=g[2];"from"===e?(h=this.findBorderPosition(this.from,t,{x:y,y:b,low:.25,high:.6,direction:-1}),a=-2*h.t*Math.PI+1.5*Math.PI+.1*Math.PI):"to"===e?(h=this.findBorderPosition(this.from,t,{x:y,y:b,low:.6,high:1,direction:1}),a=-2*h.t*Math.PI+1.5*Math.PI-1.1*Math.PI):(h=this._pointOnCircle(y,b,_,.175),a=3.9269908169872414)}"middle"===e&&c<0&&(p*=-1);var w=15*c+3*p;return{point:h,core:{x:h.x-.9*w*Math.cos(a),y:h.y-.9*w*Math.sin(a)},angle:a,length:w,type:f}}},{key:"drawArrowHead",value:function(t,e,i,n,r){t.strokeStyle=this.getColor(t,e,i,n),t.fillStyle=t.strokeStyle,t.lineWidth=e.width,d.draw(t,r),this.enableShadow(t,e),t.fill(),this.disableShadow(t,e)}},{key:"enableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}}]),t}();e.default=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(4),a=n(s),h=i(5),l=n(h),u=i(0),d=n(u),c=i(1),f=n(c),p=function(){function t(){(0,d.default)(this,t)}return(0,f.default)(t,null,[{key:"transform",value:function(t,e){t instanceof Array||(t=[t]);for(var i=e.point.x,n=e.point.y,r=e.angle,o=e.length,s=0;s<t.length;++s){var a=t[s],h=a.x*Math.cos(r)-a.y*Math.sin(r),l=a.x*Math.sin(r)+a.y*Math.cos(r);a.x=i+o*h,a.y=n+o*l}}},{key:"drawPath",value:function(t,e){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var i=1;i<e.length;++i)t.lineTo(e[i].x,e[i].y);t.closePath()}}]),t}(),m=function(t){function e(){return(0,d.default)(this,e),(0,a.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments))}return(0,l.default)(e,t),(0,f.default)(e,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];p.transform(i,e),p.drawPath(t,i)}}]),e}(p),v=function(){function t(){(0,d.default)(this,t)}return(0,f.default)(t,null,[{key:"draw",value:function(t,e){var i={x:-.4,y:0};p.transform(i,e),t.circle(i.x,i.y,.4*e.length)}}]),t}(),g=function(){function t(){(0,d.default)(this,t)}return(0,f.default)(t,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];p.transform(i,e),p.drawPath(t,i)}}]),t}(),y=function(){function t(){(0,d.default)(this,t)}return(0,f.default)(t,null,[{key:"draw",value:function(t,e){var i;switch(e.type&&(i=e.type.toLowerCase()),i){case"circle":v.draw(t,e);break;case"bar":g.draw(t,e);break;case"arrow":default:m.draw(t,e)}}}]),t}();e.default=y},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=function(){function t(e,i,n){(0,o.default)(this,t),this.body=e,this.physicsBody=i,this.barnesHutTree,this.setOptions(n),this.randomSeed=5}return(0,a.default)(t,[{key:"setOptions",value:function(t){this.options=t,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"seededRandom",value:function(){var t=1e4*Math.sin(this.randomSeed++);return t-Math.floor(t)}},{key:"solve",value:function(){if(0!==this.options.gravitationalConstant&&this.physicsBody.physicsNodeIndices.length>0){var t=void 0,e=this.body.nodes,i=this.physicsBody.physicsNodeIndices,n=i.length,r=this._formBarnesHutTree(e,i);this.barnesHutTree=r;for(var o=0;o<n;o++)t=e[i[o]],t.options.mass>0&&this._getForceContributions(r.root,t)}}},{key:"_getForceContributions",value:function(t,e){this._getForceContribution(t.children.NW,e),this._getForceContribution(t.children.NE,e),this._getForceContribution(t.children.SW,e),this._getForceContribution(t.children.SE,e)}},{key:"_getForceContribution",value:function(t,e){if(t.childrenCount>0){var i=void 0,n=void 0,r=void 0;i=t.centerOfMass.x-e.x,n=t.centerOfMass.y-e.y,r=Math.sqrt(i*i+n*n),r*t.calcSize>this.thetaInversed?this._calculateForces(r,i,n,e,t):4===t.childrenCount?this._getForceContributions(t,e):t.children.data.id!=e.id&&this._calculateForces(r,i,n,e,t)}}},{key:"_calculateForces",value:function(t,e,i,n,r){0===t&&(t=.1,e=t),this.overlapAvoidanceFactor<1&&n.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*n.shape.radius,t-n.shape.radius));var o=this.options.gravitationalConstant*r.mass*n.options.mass/Math.pow(t,3),s=e*o,a=i*o;this.physicsBody.forces[n.id].x+=s,this.physicsBody.forces[n.id].y+=a}},{key:"_formBarnesHutTree",value:function(t,e){for(var i=void 0,n=e.length,r=t[e[0]].x,o=t[e[0]].y,s=t[e[0]].x,a=t[e[0]].y,h=1;h<n;h++){var l=t[e[h]],u=l.x,d=l.y;l.options.mass>0&&(u<r&&(r=u),u>s&&(s=u),d<o&&(o=d),d>a&&(a=d))}var c=Math.abs(s-r)-Math.abs(a-o);c>0?(o-=.5*c,a+=.5*c):(r+=.5*c,s-=.5*c);var f=Math.max(1e-5,Math.abs(s-r)),p=.5*f,m=.5*(r+s),v=.5*(o+a),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:m-p,maxX:m+p,minY:v-p,maxY:v+p},size:f,calcSize:1/f,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(var y=0;y<n;y++)i=t[e[y]],i.options.mass>0&&this._placeInTree(g.root,i);return g}},{key:"_updateBranchMass",value:function(t,e){var i=t.centerOfMass,n=t.mass+e.options.mass,r=1/n;i.x=i.x*t.mass+e.x*e.options.mass,i.x*=r,i.y=i.y*t.mass+e.y*e.options.mass,i.y*=r,t.mass=n;var o=Math.max(Math.max(e.height,e.radius),e.width);t.maxWidth=t.maxWidth<o?o:t.maxWidth}},{key:"_placeInTree",value:function(t,e,i){1==i&&void 0!==i||this._updateBranchMass(t,e);var n=t.children.NW.range,r=void 0;r=n.maxX>e.x?n.maxY>e.y?"NW":"SW":n.maxY>e.y?"NE":"SE",this._placeInRegion(t,e,r)}},{key:"_placeInRegion",value:function(t,e,i){var n=t.children[i];switch(n.childrenCount){case 0:n.children.data=e,n.childrenCount=1,this._updateBranchMass(n,e);break;case 1:n.children.data.x===e.x&&n.children.data.y===e.y?(e.x+=this.seededRandom(),e.y+=this.seededRandom()):(this._splitBranch(n),this._placeInTree(n,e));break;case 4:this._placeInTree(n,e)}}},{key:"_splitBranch",value:function(t){var e=null;1===t.childrenCount&&(e=t.children.data,t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),t.childrenCount=4,t.children.data=null,this._insertRegion(t,"NW"),this._insertRegion(t,"NE"),this._insertRegion(t,"SW"),this._insertRegion(t,"SE"),null!=e&&this._placeInTree(t,e)}},{key:"_insertRegion",value:function(t,e){var i=void 0,n=void 0,r=void 0,o=void 0,s=.5*t.size;switch(e){case"NW":i=t.range.minX,n=t.range.minX+s,r=t.range.minY,o=t.range.minY+s;break;case"NE":i=t.range.minX+s,n=t.range.maxX,r=t.range.minY,o=t.range.minY+s;break;case"SW":i=t.range.minX,n=t.range.minX+s,r=t.range.minY+s,o=t.range.maxY;break;case"SE":i=t.range.minX+s,n=t.range.maxX,r=t.range.minY+s,o=t.range.maxY}t.children[e]={centerOfMass:{x:0,y:0},mass:0,range:{minX:i,maxX:n,minY:r,maxY:o},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}}},{key:"_debug",value:function(t,e){void 0!==this.barnesHutTree&&(t.lineWidth=1,this._drawBranch(this.barnesHutTree.root,t,e))}},{key:"_drawBranch",value:function(t,e,i){void 0===i&&(i="#FF0000"),4===t.childrenCount&&(this._drawBranch(t.children.NW,e),this._drawBranch(t.children.NE,e),this._drawBranch(t.children.SE,e),this._drawBranch(t.children.SW,e)),e.strokeStyle=i,e.beginPath(),e.moveTo(t.range.minX,t.range.minY),e.lineTo(t.range.maxX,t.range.minY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.minY),e.lineTo(t.range.maxX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.maxY),e.lineTo(t.range.minX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.minX,t.range.maxY),e.lineTo(t.range.minX,t.range.minY),e.stroke()}}]),t}();e.default=h},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=function(){function t(e,i,n){(0,o.default)(this,t),this.body=e,this.physicsBody=i,this.setOptions(n)}return(0,a.default)(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t=void 0,e=void 0,i=void 0,n=void 0,r=this.body.nodes,o=this.physicsBody.physicsNodeIndices,s=this.physicsBody.forces,a=0;a<o.length;a++){n=r[o[a]],t=-n.x,e=-n.y,i=Math.sqrt(t*t+e*e),this._calculateForces(i,t,e,s,n)}}},{key:"_calculateForces",value:function(t,e,i,n,r){var o=0===t?0:this.options.centralGravity/t;n[r.id].x=e*o,n[r.id].y=i*o}}]),t}();e.default=h},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n="string",r="boolean",o="number",s="object",a=["arrow","circle","bar"],h={configure:{enabled:{boolean:r},filter:{boolean:r,string:n,array:"array",function:"function"},container:{dom:"dom"},showButton:{boolean:r},__type__:{object:s,boolean:r,string:n,array:"array",function:"function"}},edges:{arrows:{to:{enabled:{boolean:r},scaleFactor:{number:o},type:{string:a},__type__:{object:s,boolean:r}},middle:{enabled:{boolean:r},scaleFactor:{number:o},type:{string:a},__type__:{object:s,boolean:r}},from:{enabled:{boolean:r},scaleFactor:{number:o},type:{string:a},__type__:{object:s,boolean:r}},__type__:{string:["from","to","middle"],object:s}},arrowStrikethrough:{boolean:r},chosen:{label:{boolean:r,function:"function"},edge:{boolean:r,function:"function"},__type__:{object:s,boolean:r}},color:{color:{string:n},highlight:{string:n},hover:{string:n},inherit:{string:["from","to","both"],boolean:r},opacity:{number:o},__type__:{object:s,string:n}},dashes:{boolean:r,array:"array"},font:{color:{string:n},size:{number:o},face:{string:n},background:{string:n},strokeWidth:{number:o},strokeColor:{string:n},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:o},multi:{boolean:r,string:n},bold:{color:{string:n},size:{number:o},face:{string:n},mod:{string:n},vadjust:{number:o},__type__:{object:s,string:n}},boldital:{color:{string:n},size:{number:o},face:{string:n},mod:{string:n},vadjust:{number:o},__type__:{object:s,string:n}},ital:{color:{string:n},size:{number:o},face:{string:n},mod:{string:n},vadjust:{number:o},__type__:{object:s,string:n}},mono:{color:{string:n},size:{number:o},face:{string:n},mod:{string:n},vadjust:{number:o},__type__:{object:s,string:n}},__type__:{object:s,string:n}},hidden:{boolean:r},hoverWidth:{function:"function",number:o},label:{string:n,undefined:"undefined"},labelHighlightBold:{boolean:r},length:{number:o,undefined:"undefined"},physics:{boolean:r},scaling:{min:{number:o},max:{number:o},label:{enabled:{boolean:r},min:{number:o},max:{number:o},maxVisible:{number:o},drawThreshold:{number:o},__type__:{object:s,boolean:r}},customScalingFunction:{function:"function"},__type__:{object:s}},selectionWidth:{function:"function",number:o},selfReferenceSize:{number:o},shadow:{enabled:{boolean:r},color:{string:n},size:{number:o},x:{number:o},y:{number:o},__type__:{object:s,boolean:r}},smooth:{enabled:{boolean:r},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:o},forceDirection:{string:["horizontal","vertical","none"],boolean:r},__type__:{object:s,boolean:r}},title:{string:n,undefined:"undefined"},width:{number:o},widthConstraint:{maximum:{number:o},__type__:{object:s,boolean:r,number:o}},value:{number:o,undefined:"undefined"},__type__:{object:s}},groups:{useDefaultGroups:{boolean:r},__any__:"get from nodes, will be overwritten below",__type__:{object:s}},interaction:{dragNodes:{boolean:r},dragView:{boolean:r},hideEdgesOnDrag:{boolean:r},hideNodesOnDrag:{boolean:r},hover:{boolean:r},keyboard:{enabled:{boolean:r},speed:{x:{number:o},y:{number:o},zoom:{number:o},__type__:{object:s}},bindToWindow:{boolean:r},__type__:{object:s,boolean:r}},multiselect:{boolean:r},navigationButtons:{boolean:r},selectable:{boolean:r},selectConnectedEdges:{boolean:r},hoverConnectedEdges:{boolean:r},tooltipDelay:{number:o},zoomView:{boolean:r},__type__:{object:s}},layout:{randomSeed:{undefined:"undefined",number:o},improvedLayout:{boolean:r},hierarchical:{enabled:{boolean:r},levelSeparation:{number:o},nodeSpacing:{number:o},treeSpacing:{number:o},blockShifting:{boolean:r},edgeMinimization:{boolean:r},parentCentralization:{boolean:r},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},__type__:{object:s,boolean:r}},__type__:{object:s}},manipulation:{enabled:{boolean:r},initiallyActive:{boolean:r},addNode:{boolean:r,function:"function"},addEdge:{boolean:r,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:s,boolean:r,function:"function"}},deleteNode:{boolean:r,function:"function"},deleteEdge:{boolean:r,function:"function"},controlNodeStyle:"get from nodes, will be overwritten below",__type__:{object:s,boolean:r}},nodes:{borderWidth:{number:o},borderWidthSelected:{number:o,undefined:"undefined"},brokenImage:{string:n,undefined:"undefined"},chosen:{label:{boolean:r,function:"function"},node:{boolean:r,function:"function"},__type__:{object:s,boolean:r}},color:{border:{string:n},background:{string:n},highlight:{border:{string:n},background:{string:n},__type__:{object:s,string:n}},hover:{border:{string:n},background:{string:n},__type__:{object:s,string:n}},__type__:{object:s,string:n}},fixed:{x:{boolean:r},y:{boolean:r},__type__:{object:s,boolean:r}},font:{align:{string:n},color:{string:n},size:{number:o},face:{string:n},background:{string:n},strokeWidth:{number:o},strokeColor:{string:n},vadjust:{number:o},multi:{boolean:r,string:n},bold:{color:{string:n},size:{number:o},face:{string:n},mod:{string:n},vadjust:{number:o},__type__:{object:s,string:n}},boldital:{color:{string:n},size:{number:o},face:{string:n},mod:{string:n},vadjust:{number:o},__type__:{object:s,string:n}},ital:{color:{string:n},size:{number:o},face:{string:n},mod:{string:n},vadjust:{number:o},__type__:{object:s,string:n}},mono:{color:{string:n},size:{number:o},face:{string:n},mod:{string:n},vadjust:{number:o},__type__:{object:s,string:n}},__type__:{object:s,string:n}},group:{string:n,number:o,undefined:"undefined"},heightConstraint:{minimum:{number:o},valign:{string:n},__type__:{object:s,boolean:r,number:o}},hidden:{boolean:r},icon:{face:{string:n},code:{string:n},size:{number:o},color:{string:n},__type__:{object:s}},id:{string:n,number:o},image:{selected:{string:n,undefined:"undefined"},unselected:{string:n,undefined:"undefined"},__type__:{object:s,string:n}},label:{string:n,undefined:"undefined"},labelHighlightBold:{boolean:r},level:{number:o,undefined:"undefined"},margin:{top:{number:o},right:{number:o},bottom:{number:o},left:{number:o},__type__:{object:s,number:o}},mass:{number:o},physics:{boolean:r},scaling:{min:{number:o},max:{number:o},label:{enabled:{boolean:r},min:{number:o},max:{number:o},maxVisible:{number:o},drawThreshold:{number:o},__type__:{object:s,boolean:r}},customScalingFunction:{function:"function"},__type__:{object:s}},shadow:{enabled:{boolean:r},color:{string:n},size:{number:o},x:{number:o},y:{number:o},__type__:{object:s,boolean:r}},shape:{string:["ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},shapeProperties:{borderDashes:{boolean:r,array:"array"},borderRadius:{number:o},interpolation:{boolean:r},useImageSize:{boolean:r},useBorderWithImage:{boolean:r},__type__:{object:s}},size:{number:o},title:{string:n,dom:"dom",undefined:"undefined"},value:{number:o,undefined:"undefined"},widthConstraint:{minimum:{number:o},maximum:{number:o},__type__:{object:s,boolean:r,number:o}},x:{number:o},y:{number:o},__type__:{object:s}},physics:{enabled:{boolean:r},barnesHut:{gravitationalConstant:{number:o},centralGravity:{number:o},springLength:{number:o},springConstant:{number:o},damping:{number:o},avoidOverlap:{number:o},__type__:{object:s}},forceAtlas2Based:{gravitationalConstant:{number:o},centralGravity:{number:o},springLength:{number:o},springConstant:{number:o},damping:{number:o},avoidOverlap:{number:o},__type__:{object:s}},repulsion:{centralGravity:{number:o},springLength:{number:o},springConstant:{number:o},nodeDistance:{number:o},damping:{number:o},__type__:{object:s}},hierarchicalRepulsion:{centralGravity:{number:o},springLength:{number:o},springConstant:{number:o},nodeDistance:{number:o},damping:{number:o},__type__:{object:s}},maxVelocity:{number:o},minVelocity:{number:o},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:r},iterations:{number:o},updateInterval:{number:o},onlyDynamicEdges:{boolean:r},fit:{boolean:r},__type__:{object:s,boolean:r}},timestep:{number:o},adaptiveTimestep:{boolean:r},__type__:{object:s,boolean:r}},autoResize:{boolean:r},clickToUse:{boolean:r},locale:{string:n},locales:{__any__:{any:"any"},__type__:{object:s}},height:{string:n},width:{string:n},__type__:{object:s}};h.groups.__any__=h.nodes,h.manipulation.controlNodeStyle=h.nodes;var l={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01]}};e.allOptions=h,e.configureOptions=l},function(t,e,i){var n=i(2);n.extend(e,i(159)),n.extend(e,i(177)),n.extend(e,i(181))},function(t,e,i){i(49),i(60),t.exports=i(136)},function(t,e,i){var n=i(126),r=i(127),o=i(31),s=i(25);t.exports=i(79)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,i):"values"==e?r(0,t[i]):r(0,[i,t[i]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var n=i(54),r=i(39),o=i(59),s={};i(26)(s,i(13)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(s,{next:r(1,i)}),o(t,e+" Iterator")}},function(t,e,i){var n=i(20),r=i(27),o=i(33);t.exports=i(21)?Object.defineProperties:function(t,e){r(t);for(var i,s=o(e),a=s.length,h=0;a>h;)n.f(t,i=s[h++],e[i]);return t}},function(t,e,i){var n=i(25),r=i(132),o=i(133);t.exports=function(t){return function(e,i,s){var a,h=n(e),l=r(h.length),u=o(s,l);if(t&&i!=i){for(;l>u;)if((a=h[u++])!=a)return!0}else for(;l>u;u++)if((t||u in h)&&h[u]===i)return t||u||0;return!t&&-1}}},function(t,e,i){var n=i(55),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},function(t,e,i){var n=i(55),r=Math.max,o=Math.min;t.exports=function(t,e){return t=n(t),t<0?r(t+e,0):o(t,e)}},function(t,e,i){var n=i(18).document;t.exports=n&&n.documentElement},function(t,e,i){var n=i(55),r=i(51);t.exports=function(t){return function(e,i){var o,s,a=String(r(e)),h=n(i),l=a.length;return h<0||h>=l?t?"":void 0:(o=a.charCodeAt(h),o<55296||o>56319||h+1===l||(s=a.charCodeAt(h+1))<56320||s>57343?t?a.charAt(h):o:t?a.slice(h,h+2):s-56320+(o-55296<<10)+65536)}}},function(t,e,i){var n=i(27),r=i(137);t.exports=i(7).getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},function(t,e,i){var n=i(86),r=i(13)("iterator"),o=i(31);t.exports=i(7).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[n(t)]}},function(t,e,i){i(139);var n=i(7).Object;t.exports=function(t,e){return n.create(t,e)}},function(t,e,i){var n=i(17);n(n.S,"Object",{create:i(54)})},function(t,e,i){i(141),t.exports=i(7).Object.keys},function(t,e,i){var n=i(41),r=i(33);i(87)("keys",function(){return function(t){return r(n(t))}})},function(t,e,i){t.exports={default:i(143),__esModule:!0}},function(t,e,i){i(60),i(49),t.exports=i(61).f("iterator")},function(t,e,i){t.exports={default:i(145),__esModule:!0}},function(t,e,i){i(146),i(151),i(152),i(153),t.exports=i(7).Symbol},function(t,e,i){var n=i(18),r=i(22),o=i(21),s=i(17),a=i(83),h=i(147).KEY,l=i(28),u=i(57),d=i(59),c=i(40),f=i(13),p=i(61),m=i(62),v=i(148),g=i(149),y=i(27),b=i(25),_=i(53),w=i(39),x=i(54),S=i(150),k=i(89),E=i(20),M=i(33),T=k.f,C=E.f,O=S.f,P=n.Symbol,A=n.JSON,D=A&&A.stringify,I=f("_hidden"),R=f("toPrimitive"),L={}.propertyIsEnumerable,N=u("symbol-registry"),F=u("symbols"),z=u("op-symbols"),B=Object.prototype,j="function"==typeof P,U=n.QObject,H=!U||!U.prototype||!U.prototype.findChild,V=o&&l(function(){return 7!=x(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=T(B,e);n&&delete B[e],C(t,e,i),n&&t!==B&&C(B,e,n)}:C,G=function(t){var e=F[t]=x(P.prototype);return e._k=t,e},W=j&&"symbol"==typeof P.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof P},Y=function(t,e,i){return t===B&&Y(z,e,i),y(t),e=_(e,!0),y(i),r(F,e)?(i.enumerable?(r(t,I)&&t[I][e]&&(t[I][e]=!1),i=x(i,{enumerable:w(0,!1)})):(r(t,I)||C(t,I,w(1,{})),t[I][e]=!0),V(t,e,i)):C(t,e,i)},$=function(t,e){y(t);for(var i,n=v(e=b(e)),r=0,o=n.length;o>r;)Y(t,i=n[r++],e[i]);return t},q=function(t,e){return void 0===e?x(t):$(x(t),e)},X=function(t){var e=L.call(this,t=_(t,!0));return!(this===B&&r(F,t)&&!r(z,t))&&(!(e||!r(this,t)||!r(F,t)||r(this,I)&&this[I][t])||e)},Z=function(t,e){if(t=b(t),e=_(e,!0),t!==B||!r(F,e)||r(z,e)){var i=T(t,e);return!i||!r(F,e)||r(t,I)&&t[I][e]||(i.enumerable=!0),i}},K=function(t){for(var e,i=O(b(t)),n=[],o=0;i.length>o;)r(F,e=i[o++])||e==I||e==h||n.push(e);return n},Q=function(t){for(var e,i=t===B,n=O(i?z:b(t)),o=[],s=0;n.length>s;)!r(F,e=n[s++])||i&&!r(B,e)||o.push(F[e]);return o};j||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var t=c(arguments.length>0?arguments[0]:void 0),e=function(i){this===B&&e.call(z,i),r(this,I)&&r(this[I],t)&&(this[I][t]=!1),V(this,t,w(1,i))};return o&&H&&V(B,t,{configurable:!0,set:e}),G(t)},a(P.prototype,"toString",function(){return this._k}),k.f=Z,E.f=Y,i(88).f=S.f=K,i(42).f=X,i(63).f=Q,o&&!i(52)&&a(B,"propertyIsEnumerable",X,!0),p.f=function(t){return G(f(t))}),s(s.G+s.W+s.F*!j,{Symbol:P});for(var J="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;J.length>tt;)f(J[tt++]);for(var et=M(f.store),it=0;et.length>it;)m(et[it++]);s(s.S+s.F*!j,"Symbol",{for:function(t){return r(N,t+="")?N[t]:N[t]=P(t)},keyFor:function(t){if(!W(t))throw TypeError(t+" is not a symbol!");for(var e in N)if(N[e]===t)return e},useSetter:function(){H=!0},useSimple:function(){H=!1}}),s(s.S+s.F*!j,"Object",{create:q,defineProperty:Y,defineProperties:$,getOwnPropertyDescriptor:Z,getOwnPropertyNames:K,getOwnPropertySymbols:Q}),A&&s(s.S+s.F*(!j||l(function(){var t=P();return"[null]"!=D([t])||"{}"!=D({a:t})||"{}"!=D(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!W(t)){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);return e=n[1],"function"==typeof e&&(i=e),!i&&g(e)||(e=function(t,e){if(i&&(e=i.call(this,t,e)),!W(e))return e}),n[1]=e,D.apply(A,n)}}}),P.prototype[R]||i(26)(P.prototype,R,P.prototype.valueOf),d(P,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},function(t,e,i){var n=i(40)("meta"),r=i(32),o=i(22),s=i(20).f,a=0,h=Object.isExtensible||function(){return!0},l=!i(28)(function(){return h(Object.preventExtensions({}))}),u=function(t){s(t,n,{value:{i:"O"+ ++a,w:{}}})},d=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,n)){if(!h(t))return"F";if(!e)return"E";u(t)}return t[n].i},c=function(t,e){if(!o(t,n)){if(!h(t))return!0;if(!e)return!1;u(t)}return t[n].w},f=function(t){return l&&p.NEED&&h(t)&&!o(t,n)&&u(t),t},p=t.exports={KEY:n,NEED:!1,fastKey:d,getWeak:c,onFreeze:f}},function(t,e,i){var n=i(33),r=i(63),o=i(42);t.exports=function(t){var e=n(t),i=r.f;if(i)for(var s,a=i(t),h=o.f,l=0;a.length>l;)h.call(t,s=a[l++])&&e.push(s);return e}},function(t,e,i){var n=i(50);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){var n=i(25),r=i(88).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return r(t)}catch(t){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?a(t):r(n(t))}},function(t,e){},function(t,e,i){i(62)("asyncIterator")},function(t,e,i){i(62)("observable")},function(t,e,i){(function(t){!function(e,i){t.exports=i()}(0,function(){function e(){return Tn.apply(null,arguments)}function i(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function n(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function r(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function o(t){return void 0===t}function s(t){return"number"===typeof t||"[object Number]"===Object.prototype.toString.call(t)}function a(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function h(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function l(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function u(t,e){for(var i in e)l(e,i)&&(t[i]=e[i]);return l(e,"toString")&&(t.toString=e.toString),l(e,"valueOf")&&(t.valueOf=e.valueOf),t}function d(t,e,i,n){return ke(t,e,i,n,!0).utc()}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function f(t){return null==t._pf&&(t._pf=c()),t._pf}function p(t){if(null==t._isValid){var e=f(t),i=Cn.call(e.parsedDateParts,function(t){return null!=t}),n=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i);if(t._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function m(t){var e=d(NaN);return null!=t?u(f(e),t):f(e).userInvalidated=!0,e}function v(t,e){var i,n,r;if(o(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),o(e._i)||(t._i=e._i),o(e._f)||(t._f=e._f),o(e._l)||(t._l=e._l),o(e._strict)||(t._strict=e._strict),o(e._tzm)||(t._tzm=e._tzm),o(e._isUTC)||(t._isUTC=e._isUTC),o(e._offset)||(t._offset=e._offset),o(e._pf)||(t._pf=f(e)),o(e._locale)||(t._locale=e._locale),On.length>0)for(i=0;i<On.length;i++)n=On[i],r=e[n],o(r)||(t[n]=r);return t}function g(t){v(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===Pn&&(Pn=!0,e.updateOffset(this),Pn=!1)}function y(t){return t instanceof g||null!=t&&null!=t._isAMomentObject}function b(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function _(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=b(e)),i}function w(t,e,i){var n,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),s=0;for(n=0;n<r;n++)(i&&t[n]!==e[n]||!i&&_(t[n])!==_(e[n]))&&s++;return s+o}function x(t){!1===e.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function S(t,i){var n=!0;return u(function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),n){for(var r,o=[],s=0;s<arguments.length;s++){if(r="","object"===typeof arguments[s]){r+="\n["+s+"] ";for(var a in arguments[0])r+=a+": "+arguments[0][a]+", ";r=r.slice(0,-2)}else r=arguments[s];o.push(r)}x(t+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),n=!1}return i.apply(this,arguments)},i)}function k(t,i){null!=e.deprecationHandler&&e.deprecationHandler(t,i),An[t]||(x(i),An[t]=!0)}function E(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function M(t){var e,i;for(i in t)e=t[i],E(e)?this[i]=e:this["_"+i]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function T(t,e){var i,r=u({},t);for(i in e)l(e,i)&&(n(t[i])&&n(e[i])?(r[i]={},u(r[i],t[i]),u(r[i],e[i])):null!=e[i]?r[i]=e[i]:delete r[i]);for(i in t)l(t,i)&&!l(e,i)&&n(t[i])&&(r[i]=u({},r[i]));return r}function C(t){null!=t&&this.set(t)}function O(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return E(n)?n.call(e,i):n}function P(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function A(){return this._invalidDate}function D(t){return this._ordinal.replace("%d",t)}function I(t,e,i,n){var r=this._relativeTime[i];return E(r)?r(t,e,i,n):r.replace(/%d/i,t)}function R(t,e){var i=this._relativeTime[t>0?"future":"past"];return E(i)?i(e):i.replace(/%s/i,e)}function L(t,e){var i=t.toLowerCase();Fn[i]=Fn[i+"s"]=Fn[e]=t}function N(t){return"string"===typeof t?Fn[t]||Fn[t.toLowerCase()]:void 0}function F(t){var e,i,n={};for(i in t)l(t,i)&&(e=N(i))&&(n[e]=t[i]);return n}function z(t,e){zn[t]=e}function B(t){var e=[];for(var i in t)e.push({unit:i,priority:zn[i]});return e.sort(function(t,e){return t.priority-e.priority}),e}function j(t,e,i){var n=""+Math.abs(t),r=e-n.length;return(t>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}function U(t,e,i,n){var r=n;"string"===typeof n&&(r=function(){return this[n]()}),t&&(Hn[t]=r),e&&(Hn[e[0]]=function(){return j(r.apply(this,arguments),e[1],e[2])}),i&&(Hn[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function H(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function V(t){var e,i,n=t.match(Bn);for(e=0,i=n.length;e<i;e++)Hn[n[e]]?n[e]=Hn[n[e]]:n[e]=H(n[e]);return function(e){var r,o="";for(r=0;r<i;r++)o+=E(n[r])?n[r].call(e,t):n[r];return o}}function G(t,e){return t.isValid()?(e=W(e,t.localeData()),Un[e]=Un[e]||V(e),Un[e](t)):t.localeData().invalidDate()}function W(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(jn.lastIndex=0;n>=0&&jn.test(t);)t=t.replace(jn,i),jn.lastIndex=0,n-=1;return t}function Y(t,e,i){sr[t]=E(e)?e:function(t,n){return t&&i?i:e}}function $(t,e){return l(sr,t)?sr[t](e._strict,e._locale):new RegExp(q(t))}function q(t){return X(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,r){return e||i||n||r}))}function X(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(t,e){var i,n=e;for("string"===typeof t&&(t=[t]),s(e)&&(n=function(t,i){i[e]=_(t)}),i=0;i<t.length;i++)ar[t[i]]=n}function K(t,e){Z(t,function(t,i,n,r){n._w=n._w||{},e(t,n._w,n,r)})}function Q(t,e,i){null!=e&&l(ar,t)&&ar[t](e,i._a,i,t)}function J(t){return tt(t)?366:365}function tt(t){return t%4===0&&t%100!==0||t%400===0}function et(){return tt(this.year())}function it(t,i){return function(n){return null!=n?(rt(this,t,n),e.updateOffset(this,i),this):nt(this,t)}}function nt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function rt(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&tt(t.year())?t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),ht(i,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function ot(t){return t=N(t),E(this[t])?this[t]():this}function st(t,e){if("object"===typeof t){t=F(t);for(var i=B(t),n=0;n<i.length;n++)this[i[n].unit](t[i[n].unit])}else if(t=N(t),E(this[t]))return this[t](e);return this}function at(t,e){return(t%e+e)%e}function ht(t,e){if(isNaN(t)||isNaN(e))return NaN;var i=at(e,12);return t+=(e-i)/12,1===i?tt(t)?29:28:31-i%7%2}function lt(t,e){return t?i(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||br).test(e)?"format":"standalone"][t.month()]:i(this._months)?this._months:this._months.standalone}function ut(t,e){return t?i(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[br.test(e)?"format":"standalone"][t.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function dt(t,e,i){var n,r,o,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)o=d([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(o,"").toLocaleLowerCase();return i?"MMM"===e?(r=gr.call(this._shortMonthsParse,s),-1!==r?r:null):(r=gr.call(this._longMonthsParse,s),-1!==r?r:null):"MMM"===e?-1!==(r=gr.call(this._shortMonthsParse,s))?r:(r=gr.call(this._longMonthsParse,s),-1!==r?r:null):-1!==(r=gr.call(this._longMonthsParse,s))?r:(r=gr.call(this._shortMonthsParse,s),-1!==r?r:null)}function ct(t,e,i){var n,r,o;if(this._monthsParseExact)return dt.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(r=d([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function ft(t,e){var i;if(!t.isValid())return t;if("string"===typeof e)if(/^\d+$/.test(e))e=_(e);else if(e=t.localeData().monthsParse(e),!s(e))return t;return i=Math.min(t.date(),ht(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function pt(t){return null!=t?(ft(this,t),e.updateOffset(this,!0),this):nt(this,"Month")}function mt(){return ht(this.year(),this.month())}function vt(t){return this._monthsParseExact?(l(this,"_monthsRegex")||yt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=xr),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function gt(t){return this._monthsParseExact?(l(this,"_monthsRegex")||yt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Sr),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function yt(){function t(t,e){return e.length-t.length}var e,i,n=[],r=[],o=[];for(e=0;e<12;e++)i=d([2e3,e]),n.push(this.monthsShort(i,"")),r.push(this.months(i,"")),o.push(this.months(i,"")),o.push(this.monthsShort(i,""));for(n.sort(t),r.sort(t),o.sort(t),e=0;e<12;e++)n[e]=X(n[e]),r[e]=X(r[e]);for(e=0;e<24;e++)o[e]=X(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function bt(t,e,i,n,r,o,s){var a=new Date(t,e,i,n,r,o,s);return t<100&&t>=0&&isFinite(a.getFullYear())&&a.setFullYear(t),a}function _t(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function wt(t,e,i){var n=7+e-i;return-(7+_t(t,0,n).getUTCDay()-e)%7+n-1}function xt(t,e,i,n,r){var o,s,a=(7+i-n)%7,h=wt(t,n,r),l=1+7*(e-1)+a+h;return l<=0?(o=t-1,s=J(o)+l):l>J(t)?(o=t+1,s=l-J(t)):(o=t,s=l),{year:o,dayOfYear:s}}function St(t,e,i){var n,r,o=wt(t.year(),e,i),s=Math.floor((t.dayOfYear()-o-1)/7)+1;return s<1?(r=t.year()-1,n=s+kt(r,e,i)):s>kt(t.year(),e,i)?(n=s-kt(t.year(),e,i),r=t.year()+1):(r=t.year(),n=s),{week:n,year:r}}function kt(t,e,i){var n=wt(t,e,i),r=wt(t+1,e,i);return(J(t)-n+r)/7}function Et(t){return St(t,this._week.dow,this._week.doy).week}function Mt(){return this._week.dow}function Tt(){return this._week.doy}function Ct(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Ot(t){var e=St(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Pt(t,e){return"string"!==typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"===typeof t?t:null):parseInt(t,10)}function At(t,e){return"string"===typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Dt(t,e){return t?i(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:i(this._weekdays)?this._weekdays:this._weekdays.standalone}function It(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Rt(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Lt(t,e,i){var n,r,o,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)o=d([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(o,"").toLocaleLowerCase();return i?"dddd"===e?(r=gr.call(this._weekdaysParse,s),-1!==r?r:null):"ddd"===e?(r=gr.call(this._shortWeekdaysParse,s),-1!==r?r:null):(r=gr.call(this._minWeekdaysParse,s),-1!==r?r:null):"dddd"===e?-1!==(r=gr.call(this._weekdaysParse,s))?r:-1!==(r=gr.call(this._shortWeekdaysParse,s))?r:(r=gr.call(this._minWeekdaysParse,s),-1!==r?r:null):"ddd"===e?-1!==(r=gr.call(this._shortWeekdaysParse,s))?r:-1!==(r=gr.call(this._weekdaysParse,s))?r:(r=gr.call(this._minWeekdaysParse,s),-1!==r?r:null):-1!==(r=gr.call(this._minWeekdaysParse,s))?r:-1!==(r=gr.call(this._weekdaysParse,s))?r:(r=gr.call(this._shortWeekdaysParse,s),-1!==r?r:null)}function Nt(t,e,i){var n,r,o;if(this._weekdaysParseExact)return Lt.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(r=d([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}}function Ft(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Pt(t,this.localeData()),this.add(t-e,"d")):e}function zt(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Bt(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=At(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function jt(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Vt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Cr),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ut(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Vt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Or),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ht(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Vt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Pr),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Vt(){function t(t,e){return e.length-t.length}var e,i,n,r,o,s=[],a=[],h=[],l=[];for(e=0;e<7;e++)i=d([2e3,1]).day(e),n=this.weekdaysMin(i,""),r=this.weekdaysShort(i,""),o=this.weekdays(i,""),s.push(n),a.push(r),h.push(o),l.push(n),l.push(r),l.push(o);for(s.sort(t),a.sort(t),h.sort(t),l.sort(t),e=0;e<7;e++)a[e]=X(a[e]),h[e]=X(h[e]),l[e]=X(l[e]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Gt(){return this.hours()%12||12}function Wt(){return this.hours()||24}function Yt(t,e){U(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function $t(t,e){return e._meridiemParse}function qt(t){return"p"===(t+"").toLowerCase().charAt(0)}function Xt(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}function Zt(t){return t?t.toLowerCase().replace("_","-"):t}function Kt(t){for(var e,i,n,r,o=0;o<t.length;){for(r=Zt(t[o]).split("-"),e=r.length,i=Zt(t[o+1]),i=i?i.split("-"):null;e>0;){if(n=Qt(r.slice(0,e).join("-")))return n;if(i&&i.length>=e&&w(r,i,!0)>=e-1)break;e--}o++}return null}function Qt(e){var i=null;if(!Lr[e]&&"undefined"!==typeof t&&t&&t.exports)try{i=Ar._abbr;!function(){var t=new Error('Cannot find module "./locale"');throw t.code="MODULE_NOT_FOUND",t}(),Jt(i)}catch(t){}return Lr[e]}function Jt(t,e){var i;return t&&(i=o(e)?ie(t):te(t,e))&&(Ar=i),Ar._abbr}function te(t,e){if(null!==e){var i=Rr;if(e.abbr=t,null!=Lr[t])k("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Lr[t]._config;else if(null!=e.parentLocale){if(null==Lr[e.parentLocale])return Nr[e.parentLocale]||(Nr[e.parentLocale]=[]),Nr[e.parentLocale].push({name:t,config:e}),null;i=Lr[e.parentLocale]._config}return Lr[t]=new C(T(i,e)),Nr[t]&&Nr[t].forEach(function(t){te(t.name,t.config)}),Jt(t),Lr[t]}return delete Lr[t],null}function ee(t,e){if(null!=e){var i,n=Rr;null!=Lr[t]&&(n=Lr[t]._config),e=T(n,e),i=new C(e),i.parentLocale=Lr[t],Lr[t]=i,Jt(t)}else null!=Lr[t]&&(null!=Lr[t].parentLocale?Lr[t]=Lr[t].parentLocale:null!=Lr[t]&&delete Lr[t]);return Lr[t]}function ie(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Ar;if(!i(t)){if(e=Qt(t))return e;t=[t]}return Kt(t)}function ne(){return Dn(Lr)}function re(t){var e,i=t._a;return i&&-2===f(t).overflow&&(e=i[lr]<0||i[lr]>11?lr:i[ur]<1||i[ur]>ht(i[hr],i[lr])?ur:i[dr]<0||i[dr]>24||24===i[dr]&&(0!==i[cr]||0!==i[fr]||0!==i[pr])?dr:i[cr]<0||i[cr]>59?cr:i[fr]<0||i[fr]>59?fr:i[pr]<0||i[pr]>999?pr:-1,f(t)._overflowDayOfYear&&(e<hr||e>ur)&&(e=ur),f(t)._overflowWeeks&&-1===e&&(e=mr),f(t)._overflowWeekday&&-1===e&&(e=vr),f(t).overflow=e),t}function oe(t,e,i){return null!=t?t:null!=e?e:i}function se(t){var i=new Date(e.now());return t._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function ae(t){var e,i,n,r,o=[];if(!t._d){for(n=se(t),t._w&&null==t._a[ur]&&null==t._a[lr]&&he(t),null!=t._dayOfYear&&(r=oe(t._a[hr],n[hr]),(t._dayOfYear>J(r)||0===t._dayOfYear)&&(f(t)._overflowDayOfYear=!0),i=_t(r,0,t._dayOfYear),t._a[lr]=i.getUTCMonth(),t._a[ur]=i.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=o[e]=n[e];for(;e<7;e++)t._a[e]=o[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[dr]&&0===t._a[cr]&&0===t._a[fr]&&0===t._a[pr]&&(t._nextDay=!0,t._a[dr]=0),t._d=(t._useUTC?_t:bt).apply(null,o),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[dr]=24),t._w&&"undefined"!==typeof t._w.d&&t._w.d!==t._d.getDay()&&(f(t).weekdayMismatch=!0)}}function he(t){var e,i,n,r,o,s,a,h;if(e=t._w,null!=e.GG||null!=e.W||null!=e.E)o=1,s=4,i=oe(e.GG,t._a[hr],St(Ee(),1,4).year),n=oe(e.W,1),((r=oe(e.E,1))<1||r>7)&&(h=!0);else{o=t._locale._week.dow,s=t._locale._week.doy;var l=St(Ee(),o,s);i=oe(e.gg,t._a[hr],l.year),n=oe(e.w,l.week),null!=e.d?((r=e.d)<0||r>6)&&(h=!0):null!=e.e?(r=e.e+o,(e.e<0||e.e>6)&&(h=!0)):r=o}n<1||n>kt(i,o,s)?f(t)._overflowWeeks=!0:null!=h?f(t)._overflowWeekday=!0:(a=xt(i,n,r,o,s),t._a[hr]=a.year,t._dayOfYear=a.dayOfYear)}function le(t){var e,i,n,r,o,s,a=t._i,h=Fr.exec(a)||zr.exec(a);if(h){for(f(t).iso=!0,e=0,i=jr.length;e<i;e++)if(jr[e][1].exec(h[1])){r=jr[e][0],n=!1!==jr[e][2];break}if(null==r)return void(t._isValid=!1);if(h[3]){for(e=0,i=Ur.length;e<i;e++)if(Ur[e][1].exec(h[3])){o=(h[2]||" ")+Ur[e][0];break}if(null==o)return void(t._isValid=!1)}if(!n&&null!=o)return void(t._isValid=!1);if(h[4]){if(!Br.exec(h[4]))return void(t._isValid=!1);s="Z"}t._f=r+(o||"")+(s||""),ge(t)}else t._isValid=!1}function ue(t,e,i,n,r,o){var s=[de(t),wr.indexOf(e),parseInt(i,10),parseInt(n,10),parseInt(r,10)];return o&&s.push(parseInt(o,10)),s}function de(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function ce(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function fe(t,e,i){if(t){if(Mr.indexOf(t)!==new Date(e[0],e[1],e[2]).getDay())return f(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}function pe(t,e,i){if(t)return Gr[t];if(e)return 0;var n=parseInt(i,10),r=n%100;return(n-r)/100*60+r}function me(t){var e=Vr.exec(ce(t._i));if(e){var i=ue(e[4],e[3],e[2],e[5],e[6],e[7]);if(!fe(e[1],i,t))return;t._a=i,t._tzm=pe(e[8],e[9],e[10]),t._d=_t.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),f(t).rfc2822=!0}else t._isValid=!1}function ve(t){var i=Hr.exec(t._i);if(null!==i)return void(t._d=new Date(+i[1]));le(t),!1===t._isValid&&(delete t._isValid,me(t),!1===t._isValid&&(delete t._isValid,e.createFromInputFallback(t)))}function ge(t){if(t._f===e.ISO_8601)return void le(t);if(t._f===e.RFC_2822)return void me(t);t._a=[],f(t).empty=!0;var i,n,r,o,s,a=""+t._i,h=a.length,l=0;for(r=W(t._f,t._locale).match(Bn)||[],i=0;i<r.length;i++)o=r[i],n=(a.match($(o,t))||[])[0],n&&(s=a.substr(0,a.indexOf(n)),s.length>0&&f(t).unusedInput.push(s),a=a.slice(a.indexOf(n)+n.length),l+=n.length),Hn[o]?(n?f(t).empty=!1:f(t).unusedTokens.push(o),Q(o,n,t)):t._strict&&!n&&f(t).unusedTokens.push(o);f(t).charsLeftOver=h-l,a.length>0&&f(t).unusedInput.push(a),t._a[dr]<=12&&!0===f(t).bigHour&&t._a[dr]>0&&(f(t).bigHour=void 0),f(t).parsedDateParts=t._a.slice(0),f(t).meridiem=t._meridiem,t._a[dr]=ye(t._locale,t._a[dr],t._meridiem),ae(t),re(t)}function ye(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(n=t.isPM(i),n&&e<12&&(e+=12),n||12!==e||(e=0),e):e}function be(t){var e,i,n,r,o;if(0===t._f.length)return f(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)o=0,e=v({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],ge(e),p(e)&&(o+=f(e).charsLeftOver,o+=10*f(e).unusedTokens.length,f(e).score=o,(null==n||o<n)&&(n=o,i=e));u(t,i||e)}function _e(t){if(!t._d){var e=F(t._i);t._a=h([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),ae(t)}}function we(t){var e=new g(re(xe(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function xe(t){var e=t._i,n=t._f;return t._locale=t._locale||ie(t._l),null===e||void 0===n&&""===e?m({nullInput:!0}):("string"===typeof e&&(t._i=e=t._locale.preparse(e)),y(e)?new g(re(e)):(a(e)?t._d=e:i(n)?be(t):n?ge(t):Se(t),p(t)||(t._d=null),t))}function Se(t){var r=t._i;o(r)?t._d=new Date(e.now()):a(r)?t._d=new Date(r.valueOf()):"string"===typeof r?ve(t):i(r)?(t._a=h(r.slice(0),function(t){return parseInt(t,10)}),ae(t)):n(r)?_e(t):s(r)?t._d=new Date(r):e.createFromInputFallback(t)}function ke(t,e,o,s,a){var h={};return!0!==o&&!1!==o||(s=o,o=void 0),(n(t)&&r(t)||i(t)&&0===t.length)&&(t=void 0),h._isAMomentObject=!0,h._useUTC=h._isUTC=a,h._l=o,h._i=t,h._f=e,h._strict=s,we(h)}function Ee(t,e,i,n){return ke(t,e,i,n,!1)}function Me(t,e){var n,r;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return Ee();for(n=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](n)||(n=e[r]);return n}function Te(){return Me("isBefore",[].slice.call(arguments,0))}function Ce(){return Me("isAfter",[].slice.call(arguments,0))}function Oe(t){for(var e in t)if(-1===gr.call(qr,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var i=!1,n=0;n<qr.length;++n)if(t[qr[n]]){if(i)return!1;parseFloat(t[qr[n]])!==_(t[qr[n]])&&(i=!0)}return!0}function Pe(){return this._isValid}function Ae(){return Ze(NaN)}function De(t){var e=F(t),i=e.year||0,n=e.quarter||0,r=e.month||0,o=e.week||0,s=e.day||0,a=e.hour||0,h=e.minute||0,l=e.second||0,u=e.millisecond||0;this._isValid=Oe(e),this._milliseconds=+u+1e3*l+6e4*h+1e3*a*60*60,this._days=+s+7*o,this._months=+r+3*n+12*i,this._data={},this._locale=ie(),this._bubble()}function Ie(t){return t instanceof De}function Re(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Le(t,e){U(t,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+j(~~(t/60),2)+e+j(~~t%60,2)})}function Ne(t,e){var i=(e||"").match(t);if(null===i)return null;var n=i[i.length-1]||[],r=(n+"").match(Xr)||["-",0,0],o=60*r[1]+_(r[2]);return 0===o?0:"+"===r[0]?o:-o}function Fe(t,i){var n,r;return i._isUTC?(n=i.clone(),r=(y(t)||a(t)?t.valueOf():Ee(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),e.updateOffset(n,!1),n):Ee(t).local()}function ze(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Be(t,i,n){var r,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"===typeof t){if(null===(t=Ne(nr,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&i&&(r=ze(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),o!==t&&(!i||this._changeInProgress?ei(this,Ze(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:ze(this)}function je(t,e){return null!=t?("string"!==typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Ue(t){return this.utcOffset(0,t)}function He(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(ze(this),"m")),this}function Ve(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var t=Ne(ir,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Ge(t){return!!this.isValid()&&(t=t?Ee(t).utcOffset():0,(this.utcOffset()-t)%60===0)}function We(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ye(){if(!o(this._isDSTShifted))return this._isDSTShifted;var t={};if(v(t,this),t=xe(t),t._a){var e=t._isUTC?d(t._a):Ee(t._a);this._isDSTShifted=this.isValid()&&w(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function $e(){return!!this.isValid()&&!this._isUTC}function qe(){return!!this.isValid()&&this._isUTC}function Xe(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Ze(t,e){var i,n,r,o=t,a=null;return Ie(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:s(t)?(o={},e?o[e]=t:o.milliseconds=t):(a=Zr.exec(t))?(i="-"===a[1]?-1:1,o={y:0,d:_(a[ur])*i,h:_(a[dr])*i,m:_(a[cr])*i,s:_(a[fr])*i,ms:_(Re(1e3*a[pr]))*i}):(a=Kr.exec(t))?(i="-"===a[1]?-1:(a[1],1),o={y:Ke(a[2],i),M:Ke(a[3],i),w:Ke(a[4],i),d:Ke(a[5],i),h:Ke(a[6],i),m:Ke(a[7],i),s:Ke(a[8],i)}):null==o?o={}:"object"===typeof o&&("from"in o||"to"in o)&&(r=Je(Ee(o.from),Ee(o.to)),o={},o.ms=r.milliseconds,o.M=r.months),n=new De(o),Ie(t)&&l(t,"_locale")&&(n._locale=t._locale),n}function Ke(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Qe(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Je(t,e){var i;return t.isValid()&&e.isValid()?(e=Fe(e,t),t.isBefore(e)?i=Qe(t,e):(i=Qe(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function ti(t,e){return function(i,n){var r,o;return null===n||isNaN(+n)||(k(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=i,i=n,n=o),i="string"===typeof i?+i:i,r=Ze(i,n),ei(this,r,t),this}}function ei(t,i,n,r){var o=i._milliseconds,s=Re(i._days),a=Re(i._months);t.isValid()&&(r=null==r||r,a&&ft(t,nt(t,"Month")+a*n),s&&rt(t,"Date",nt(t,"Date")+s*n),o&&t._d.setTime(t._d.valueOf()+o*n),r&&e.updateOffset(t,s||a))}function ii(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function ni(t,i){var n=t||Ee(),r=Fe(n,this).startOf("day"),o=e.calendarFormat(this,r)||"sameElse",s=i&&(E(i[o])?i[o].call(this,n):i[o]);return this.format(s||this.localeData().calendar(o,this,Ee(n)))}function ri(){return new g(this)}function oi(t,e){var i=y(t)?t:Ee(t);return!(!this.isValid()||!i.isValid())&&(e=N(o(e)?"millisecond":e),"millisecond"===e?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())}function si(t,e){var i=y(t)?t:Ee(t);return!(!this.isValid()||!i.isValid())&&(e=N(o(e)?"millisecond":e),"millisecond"===e?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())}function ai(t,e,i,n){return n=n||"()",("("===n[0]?this.isAfter(t,i):!this.isBefore(t,i))&&(")"===n[1]?this.isBefore(e,i):!this.isAfter(e,i))}function hi(t,e){var i,n=y(t)?t:Ee(t);return!(!this.isValid()||!n.isValid())&&(e=N(e||"millisecond"),"millisecond"===e?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))}function li(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function ui(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function di(t,e,i){var n,r,o;if(!this.isValid())return NaN;if(n=Fe(t,this),!n.isValid())return NaN;switch(r=6e4*(n.utcOffset()-this.utcOffset()),e=N(e)){case"year":o=ci(this,n)/12;break;case"month":o=ci(this,n);break;case"quarter":o=ci(this,n)/3;break;case"second":o=(this-n)/1e3;break;case"minute":o=(this-n)/6e4;break;case"hour":o=(this-n)/36e5;break;case"day":o=(this-n-r)/864e5;break;case"week":o=(this-n-r)/6048e5;break;default:o=this-n}return i?o:b(o)}function ci(t,e){var i,n,r=12*(e.year()-t.year())+(e.month()-t.month()),o=t.clone().add(r,"months");return e-o<0?(i=t.clone().add(r-1,"months"),n=(e-o)/(o-i)):(i=t.clone().add(r+1,"months"),n=(e-o)/(i-o)),-(r+n)||0}function fi(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function pi(){if(!this.isValid())return null;var t=this.clone().utc();return t.year()<0||t.year()>9999?G(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):E(Date.prototype.toISOString)?this.toDate().toISOString():G(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function mi(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var i="["+t+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r=e+'[")]';return this.format(i+n+"-MM-DD[T]HH:mm:ss.SSS"+r)}function vi(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var i=G(this,t);return this.localeData().postformat(i)}function gi(t,e){return this.isValid()&&(y(t)&&t.isValid()||Ee(t).isValid())?Ze({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function yi(t){return this.from(Ee(),t)}function bi(t,e){return this.isValid()&&(y(t)&&t.isValid()||Ee(t).isValid())?Ze({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function _i(t){return this.to(Ee(),t)}function wi(t){var e;return void 0===t?this._locale._abbr:(e=ie(t),null!=e&&(this._locale=e),this)}function xi(){return this._locale}function Si(t){switch(t=N(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function ki(t){return void 0===(t=N(t))||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function Ei(){return this._d.valueOf()-6e4*(this._offset||0)}function Mi(){return Math.floor(this.valueOf()/1e3)}function Ti(){return new Date(this.valueOf())}function Ci(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Oi(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Pi(){return this.isValid()?this.toISOString():null}function Ai(){return p(this)}function Di(){return u({},f(this))}function Ii(){return f(this).overflow}function Ri(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Li(t,e){U(0,[t,t.length],0,e)}function Ni(t){return ji.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Fi(t){return ji.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function zi(){return kt(this.year(),1,4)}function Bi(){var t=this.localeData()._week;return kt(this.year(),t.dow,t.doy)}function ji(t,e,i,n,r){var o;return null==t?St(this,n,r).year:(o=kt(t,n,r),e>o&&(e=o),Ui.call(this,t,e,i,n,r))}function Ui(t,e,i,n,r){var o=xt(t,e,i,n,r),s=_t(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Hi(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Vi(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function Gi(t,e){e[pr]=_(1e3*("0."+t))}function Wi(){return this._isUTC?"UTC":""}function Yi(){return this._isUTC?"Coordinated Universal Time":""}function $i(t){return Ee(1e3*t)}function qi(){return Ee.apply(null,arguments).parseZone()}function Xi(t){return t}function Zi(t,e,i,n){var r=ie(),o=d().set(n,e);return r[i](o,t)}function Ki(t,e,i){if(s(t)&&(e=t,t=void 0),t=t||"",null!=e)return Zi(t,e,i,"month");var n,r=[];for(n=0;n<12;n++)r[n]=Zi(t,n,i,"month");return r}function Qi(t,e,i,n){"boolean"===typeof t?(s(e)&&(i=e,e=void 0),e=e||""):(e=t,i=e,t=!1,s(e)&&(i=e,e=void 0),e=e||"");var r=ie(),o=t?r._week.dow:0;if(null!=i)return Zi(e,(i+o)%7,n,"day");var a,h=[];for(a=0;a<7;a++)h[a]=Zi(e,(a+o)%7,n,"day");return h}function Ji(t,e){return Ki(t,e,"months")}function tn(t,e){return Ki(t,e,"monthsShort")}function en(t,e,i){return Qi(t,e,i,"weekdays")}function nn(t,e,i){return Qi(t,e,i,"weekdaysShort")}function rn(t,e,i){return Qi(t,e,i,"weekdaysMin")}function on(){var t=this._data;return this._milliseconds=ho(this._milliseconds),this._days=ho(this._days),this._months=ho(this._months),t.milliseconds=ho(t.milliseconds),t.seconds=ho(t.seconds),t.minutes=ho(t.minutes),t.hours=ho(t.hours),t.months=ho(t.months),t.years=ho(t.years),this}function sn(t,e,i,n){var r=Ze(e,i);return t._milliseconds+=n*r._milliseconds,t._days+=n*r._days,t._months+=n*r._months,t._bubble()}function an(t,e){return sn(this,t,e,1)}function hn(t,e){return sn(this,t,e,-1)}function ln(t){return t<0?Math.floor(t):Math.ceil(t)}function un(){var t,e,i,n,r,o=this._milliseconds,s=this._days,a=this._months,h=this._data;return o>=0&&s>=0&&a>=0||o<=0&&s<=0&&a<=0||(o+=864e5*ln(cn(a)+s),s=0,a=0),h.milliseconds=o%1e3,t=b(o/1e3),h.seconds=t%60,e=b(t/60),h.minutes=e%60,i=b(e/60),h.hours=i%24,s+=b(i/24),r=b(dn(s)),a+=r,s-=ln(cn(r)),n=b(a/12),a%=12,h.days=s,h.months=a,h.years=n,this}function dn(t){return 4800*t/146097}function cn(t){return 146097*t/4800}function fn(t){if(!this.isValid())return NaN;var e,i,n=this._milliseconds;if("month"===(t=N(t))||"year"===t)return e=this._days+n/864e5,i=this._months+dn(e),"month"===t?i:i/12;switch(e=this._days+Math.round(cn(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}}function pn(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*_(this._months/12):NaN}function mn(t){return function(){return this.as(t)}}function vn(){return Ze(this)}function gn(t){return t=N(t),this.isValid()?this[t+"s"]():NaN}function yn(t){return function(){return this.isValid()?this._data[t]:NaN}}function bn(){return b(this.days()/7)}function _n(t,e,i,n,r){return r.relativeTime(e||1,!!i,t,n)}function wn(t,e,i){var n=Ze(t).abs(),r=Eo(n.as("s")),o=Eo(n.as("m")),s=Eo(n.as("h")),a=Eo(n.as("d")),h=Eo(n.as("M")),l=Eo(n.as("y")),u=r<=Mo.ss&&["s",r]||r<Mo.s&&["ss",r]||o<=1&&["m"]||o<Mo.m&&["mm",o]||s<=1&&["h"]||s<Mo.h&&["hh",s]||a<=1&&["d"]||a<Mo.d&&["dd",a]||h<=1&&["M"]||h<Mo.M&&["MM",h]||l<=1&&["y"]||["yy",l];return u[2]=e,u[3]=+t>0,u[4]=i,_n.apply(null,u)}function xn(t){return void 0===t?Eo:"function"===typeof t&&(Eo=t,!0)}function Sn(t,e){return void 0!==Mo[t]&&(void 0===e?Mo[t]:(Mo[t]=e,"s"===t&&(Mo.ss=e-1),!0))}function kn(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),i=wn(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}function En(t){return(t>0)-(t<0)||+t}function Mn(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i,n=To(this._milliseconds)/1e3,r=To(this._days),o=To(this._months);t=b(n/60),e=b(t/60),n%=60,t%=60,i=b(o/12),o%=12;var s=i,a=o,h=r,l=e,u=t,d=n?n.toFixed(3).replace(/\.?0+$/,""):"",c=this.asSeconds();if(!c)return"P0D";var f=c<0?"-":"",p=En(this._months)!==En(c)?"-":"",m=En(this._days)!==En(c)?"-":"",v=En(this._milliseconds)!==En(c)?"-":"";return f+"P"+(s?p+s+"Y":"")+(a?p+a+"M":"")+(h?m+h+"D":"")+(l||u||d?"T":"")+(l?v+l+"H":"")+(u?v+u+"M":"")+(d?v+d+"S":"")}var Tn,Cn;Cn=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,n=0;n<i;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var On=e.momentProperties=[],Pn=!1,An={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var Dn;Dn=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)l(t,e)&&i.push(e);return i};var In={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Rn={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Ln=/\d{1,2}/,Nn={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Fn={},zn={},Bn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,jn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Un={},Hn={},Vn=/\d/,Gn=/\d\d/,Wn=/\d{3}/,Yn=/\d{4}/,$n=/[+-]?\d{6}/,qn=/\d\d?/,Xn=/\d\d\d\d?/,Zn=/\d\d\d\d\d\d?/,Kn=/\d{1,3}/,Qn=/\d{1,4}/,Jn=/[+-]?\d{1,6}/,tr=/\d+/,er=/[+-]?\d+/,ir=/Z|[+-]\d\d:?\d\d/gi,nr=/Z|[+-]\d\d(?::?\d\d)?/gi,rr=/[+-]?\d+(\.\d{1,3})?/,or=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,sr={},ar={},hr=0,lr=1,ur=2,dr=3,cr=4,fr=5,pr=6,mr=7,vr=8;U("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),U(0,["YY",2],0,function(){return this.year()%100}),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),L("year","y"),z("year",1),Y("Y",er),Y("YY",qn,Gn),Y("YYYY",Qn,Yn),Y("YYYYY",Jn,$n),Y("YYYYYY",Jn,$n),Z(["YYYYY","YYYYYY"],hr),Z("YYYY",function(t,i){i[hr]=2===t.length?e.parseTwoDigitYear(t):_(t)}),Z("YY",function(t,i){i[hr]=e.parseTwoDigitYear(t)}),Z("Y",function(t,e){e[hr]=parseInt(t,10)}),e.parseTwoDigitYear=function(t){return _(t)+(_(t)>68?1900:2e3)};var gr,yr=it("FullYear",!0);gr=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},U("M",["MM",2],"Mo",function(){return this.month()+1}),U("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),U("MMMM",0,0,function(t){return this.localeData().months(this,t)}),L("month","M"),z("month",8),Y("M",qn),Y("MM",qn,Gn),Y("MMM",function(t,e){return e.monthsShortRegex(t)}),Y("MMMM",function(t,e){return e.monthsRegex(t)}),Z(["M","MM"],function(t,e){e[lr]=_(t)-1}),Z(["MMM","MMMM"],function(t,e,i,n){var r=i._locale.monthsParse(t,n,i._strict);null!=r?e[lr]=r:f(i).invalidMonth=t});var br=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,_r="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),wr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),xr=or,Sr=or;U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),L("week","w"),L("isoWeek","W"),z("week",5),z("isoWeek",5),Y("w",qn),Y("ww",qn,Gn),Y("W",qn),Y("WW",qn,Gn),K(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=_(t)});var kr={dow:0,doy:6};U("d",0,"do","day"),U("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),U("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),U("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),L("day","d"),L("weekday","e"),L("isoWeekday","E"),z("day",11),z("weekday",11),z("isoWeekday",11),Y("d",qn),Y("e",qn),Y("E",qn),Y("dd",function(t,e){return e.weekdaysMinRegex(t)}),Y("ddd",function(t,e){return e.weekdaysShortRegex(t)}),Y("dddd",function(t,e){return e.weekdaysRegex(t)}),K(["dd","ddd","dddd"],function(t,e,i,n){var r=i._locale.weekdaysParse(t,n,i._strict);null!=r?e.d=r:f(i).invalidWeekday=t}),K(["d","e","E"],function(t,e,i,n){e[n]=_(t)});var Er="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Mr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Tr="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Cr=or,Or=or,Pr=or;U("H",["HH",2],0,"hour"),U("h",["hh",2],0,Gt),U("k",["kk",2],0,Wt),U("hmm",0,0,function(){return""+Gt.apply(this)+j(this.minutes(),2)}),U("hmmss",0,0,function(){return""+Gt.apply(this)+j(this.minutes(),2)+j(this.seconds(),2)}),U("Hmm",0,0,function(){return""+this.hours()+j(this.minutes(),2)}),U("Hmmss",0,0,function(){return""+this.hours()+j(this.minutes(),2)+j(this.seconds(),2)}),Yt("a",!0),Yt("A",!1),L("hour","h"),z("hour",13),Y("a",$t),Y("A",$t),Y("H",qn),Y("h",qn),Y("k",qn),Y("HH",qn,Gn),Y("hh",qn,Gn),Y("kk",qn,Gn),Y("hmm",Xn),Y("hmmss",Zn),Y("Hmm",Xn),Y("Hmmss",Zn),Z(["H","HH"],dr),Z(["k","kk"],function(t,e,i){var n=_(t);e[dr]=24===n?0:n}),Z(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),Z(["h","hh"],function(t,e,i){e[dr]=_(t),f(i).bigHour=!0}),Z("hmm",function(t,e,i){var n=t.length-2;e[dr]=_(t.substr(0,n)),e[cr]=_(t.substr(n)),f(i).bigHour=!0}),Z("hmmss",function(t,e,i){var n=t.length-4,r=t.length-2;e[dr]=_(t.substr(0,n)),e[cr]=_(t.substr(n,2)),e[fr]=_(t.substr(r)),f(i).bigHour=!0}),Z("Hmm",function(t,e,i){var n=t.length-2;e[dr]=_(t.substr(0,n)),e[cr]=_(t.substr(n))}),Z("Hmmss",function(t,e,i){var n=t.length-4,r=t.length-2;e[dr]=_(t.substr(0,n)),e[cr]=_(t.substr(n,2)),e[fr]=_(t.substr(r))});var Ar,Dr=/[ap]\.?m?\.?/i,Ir=it("Hours",!0),Rr={calendar:In,longDateFormat:Rn,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:Ln,relativeTime:Nn,months:_r,monthsShort:wr,week:kr,weekdays:Er,weekdaysMin:Tr,weekdaysShort:Mr,meridiemParse:Dr},Lr={},Nr={},Fr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,zr=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Br=/Z|[+-]\d\d(?::?\d\d)?/,jr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ur=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Hr=/^\/?Date\((\-?\d+)/i,Vr=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Gr={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};e.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),e.ISO_8601=function(){},e.RFC_2822=function(){};var Wr=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Ee.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:m()}),Yr=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Ee.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:m()}),$r=function(){return Date.now?Date.now():+new Date},qr=["year","quarter","month","week","day","hour","minute","second","millisecond"];Le("Z",":"),Le("ZZ",""),Y("Z",nr),Y("ZZ",nr),Z(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=Ne(nr,t)});var Xr=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Zr=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Kr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Ze.fn=De.prototype,Ze.invalid=Ae;var Qr=ti(1,"add"),Jr=ti(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var to=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});U(0,["gg",2],0,function(){return this.weekYear()%100}),U(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Li("gggg","weekYear"),Li("ggggg","weekYear"),Li("GGGG","isoWeekYear"),Li("GGGGG","isoWeekYear"),L("weekYear","gg"),L("isoWeekYear","GG"),z("weekYear",1),z("isoWeekYear",1),Y("G",er),Y("g",er),Y("GG",qn,Gn),Y("gg",qn,Gn),Y("GGGG",Qn,Yn),Y("gggg",Qn,Yn),Y("GGGGG",Jn,$n),Y("ggggg",Jn,$n),K(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=_(t)}),K(["gg","GG"],function(t,i,n,r){i[r]=e.parseTwoDigitYear(t)}),U("Q",0,"Qo","quarter"),L("quarter","Q"),z("quarter",7),Y("Q",Vn),Z("Q",function(t,e){e[lr]=3*(_(t)-1)}),U("D",["DD",2],"Do","date"),L("date","D"),z("date",9),Y("D",qn),Y("DD",qn,Gn),Y("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),Z(["D","DD"],ur),Z("Do",function(t,e){e[ur]=_(t.match(qn)[0],10)});var eo=it("Date",!0);U("DDD",["DDDD",3],"DDDo","dayOfYear"),L("dayOfYear","DDD"),z("dayOfYear",4),Y("DDD",Kn),Y("DDDD",Wn),Z(["DDD","DDDD"],function(t,e,i){i._dayOfYear=_(t)}),U("m",["mm",2],0,"minute"),L("minute","m"),z("minute",14),Y("m",qn),Y("mm",qn,Gn),Z(["m","mm"],cr);var io=it("Minutes",!1);U("s",["ss",2],0,"second"),L("second","s"),z("second",15),Y("s",qn),Y("ss",qn,Gn),Z(["s","ss"],fr);var no=it("Seconds",!1);U("S",0,0,function(){return~~(this.millisecond()/100)}),U(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,function(){return 10*this.millisecond()}),U(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),U(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),U(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),U(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),U(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),L("millisecond","ms"),z("millisecond",16),Y("S",Kn,Vn),Y("SS",Kn,Gn),Y("SSS",Kn,Wn);var ro;for(ro="SSSS";ro.length<=9;ro+="S")Y(ro,tr);for(ro="S";ro.length<=9;ro+="S")Z(ro,Gi);var oo=it("Milliseconds",!1);U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var so=g.prototype;so.add=Qr,so.calendar=ni,so.clone=ri,so.diff=di,so.endOf=ki,so.format=vi,so.from=gi,so.fromNow=yi,so.to=bi,so.toNow=_i,so.get=ot,so.invalidAt=Ii,so.isAfter=oi,so.isBefore=si,so.isBetween=ai,so.isSame=hi,so.isSameOrAfter=li,so.isSameOrBefore=ui,so.isValid=Ai,so.lang=to,so.locale=wi,so.localeData=xi,so.max=Yr,so.min=Wr,so.parsingFlags=Di,so.set=st,so.startOf=Si,so.subtract=Jr,so.toArray=Ci,so.toObject=Oi,so.toDate=Ti,so.toISOString=pi,so.inspect=mi,so.toJSON=Pi,so.toString=fi,so.unix=Mi,so.valueOf=Ei,so.creationData=Ri,so.year=yr,so.isLeapYear=et,so.weekYear=Ni,so.isoWeekYear=Fi,so.quarter=so.quarters=Hi,so.month=pt,so.daysInMonth=mt,so.week=so.weeks=Ct,so.isoWeek=so.isoWeeks=Ot,so.weeksInYear=Bi,so.isoWeeksInYear=zi,so.date=eo,so.day=so.days=Ft,so.weekday=zt,so.isoWeekday=Bt,so.dayOfYear=Vi,so.hour=so.hours=Ir,so.minute=so.minutes=io,so.second=so.seconds=no,so.millisecond=so.milliseconds=oo,so.utcOffset=Be,so.utc=Ue,so.local=He,so.parseZone=Ve,so.hasAlignedHourOffset=Ge,so.isDST=We,so.isLocal=$e,so.isUtcOffset=qe,so.isUtc=Xe,so.isUTC=Xe,so.zoneAbbr=Wi,so.zoneName=Yi,so.dates=S("dates accessor is deprecated. Use date instead.",eo),so.months=S("months accessor is deprecated. Use month instead",pt),so.years=S("years accessor is deprecated. Use year instead",yr),so.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",je),so.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ye);var ao=C.prototype;ao.calendar=O,ao.longDateFormat=P,ao.invalidDate=A,ao.ordinal=D,ao.preparse=Xi,ao.postformat=Xi,ao.relativeTime=I,ao.pastFuture=R,ao.set=M,ao.months=lt,ao.monthsShort=ut,ao.monthsParse=ct,ao.monthsRegex=gt,ao.monthsShortRegex=vt,ao.week=Et,ao.firstDayOfYear=Tt,ao.firstDayOfWeek=Mt,ao.weekdays=Dt,ao.weekdaysMin=Rt,ao.weekdaysShort=It,ao.weekdaysParse=Nt,ao.weekdaysRegex=jt,ao.weekdaysShortRegex=Ut,ao.weekdaysMinRegex=Ht,ao.isPM=qt,ao.meridiem=Xt,Jt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===_(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),e.lang=S("moment.lang is deprecated. Use moment.locale instead.",Jt),e.langData=S("moment.langData is deprecated. Use moment.localeData instead.",ie);var ho=Math.abs,lo=mn("ms"),uo=mn("s"),co=mn("m"),fo=mn("h"),po=mn("d"),mo=mn("w"),vo=mn("M"),go=mn("y"),yo=yn("milliseconds"),bo=yn("seconds"),_o=yn("minutes"),wo=yn("hours"),xo=yn("days"),So=yn("months"),ko=yn("years"),Eo=Math.round,Mo={ss:44,s:45,m:45,h:22,d:26,M:11},To=Math.abs,Co=De.prototype;return Co.isValid=Pe,Co.abs=on,Co.add=an,Co.subtract=hn,Co.as=fn,Co.asMilliseconds=lo,Co.asSeconds=uo,Co.asMinutes=co,Co.asHours=fo,Co.asDays=po,Co.asWeeks=mo,Co.asMonths=vo,Co.asYears=go,Co.valueOf=pn,Co._bubble=un,Co.clone=vn,Co.get=gn,Co.milliseconds=yo,Co.seconds=bo,Co.minutes=_o,Co.hours=wo,Co.days=xo,Co.weeks=bn,Co.months=So,Co.years=ko,Co.humanize=kn,Co.toISOString=Mn,Co.toString=Mn,Co.toJSON=Mn,Co.locale=wi,Co.localeData=xi,Co.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Mn),Co.lang=to,U("X",0,0,"unix"),U("x",0,0,"valueOf"),Y("x",er),Y("X",rr),Z("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),Z("x",function(t,e,i){i._d=new Date(_(t))}),e.version="2.19.1",function(t){Tn=t}(Ee),e.fn=so,e.min=Te,e.max=Ce,e.now=$r,e.utc=d,e.unix=$i,e.months=Ji,e.isDate=a,e.locale=Jt,e.invalid=m,e.duration=Ze,e.isMoment=y,e.weekdays=en,e.parseZone=qi,e.localeData=ie,e.isDuration=Ie,e.monthsShort=tn,e.weekdaysMin=rn,e.defineLocale=te,e.updateLocale=ee,e.locales=ne,e.weekdaysShort=nn,e.normalizeUnits=N,e.relativeTimeRounding=xn,e.relativeTimeThreshold=Sn,e.calendarFormat=ii,e.prototype=so,e})}).call(e,i(155)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){function i(t){throw new Error("Cannot find module '"+t+"'.")}i.keys=function(){return[]},i.resolve=i,t.exports=i,i.id=156},function(t,e,i){(function(e){function i(t,e,i){var n=e&&i||0,r=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){r<16&&(e[n+r++]=d[t])});r<16;)e[n+r++]=0;return e}function n(t,e){var i=e||0,n=u;return n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]}function r(t,e,i){var r=e&&i||0,o=e||[];t=t||{};var s=void 0!==t.clockseq?t.clockseq:m,a=void 0!==t.msecs?t.msecs:(new Date).getTime(),h=void 0!==t.nsecs?t.nsecs:g+1,l=a-v+(h-g)/1e4;if(l<0&&void 0===t.clockseq&&(s=s+1&16383),(l<0||a>v)&&void 0===t.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");v=a,g=h,m=s,a+=122192928e5;var u=(1e4*(268435455&a)+h)%4294967296;o[r++]=u>>>24&255,o[r++]=u>>>16&255,o[r++]=u>>>8&255,o[r++]=255&u;var d=a/4294967296*1e4&268435455;o[r++]=d>>>8&255,o[r++]=255&d,o[r++]=d>>>24&15|16,o[r++]=d>>>16&255,o[r++]=s>>>8|128,o[r++]=255&s;for(var c=t.node||p,f=0;f<6;f++)o[r+f]=c[f];return e||n(o)}function o(t,e,i){var r=e&&i||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null),t=t||{};var o=t.random||(t.rng||s)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var a=0;a<16;a++)e[r+a]=o[a];return e||n(o)}var s,a="undefined"!==typeof window?window:"undefined"!==typeof e?e:null;if(a&&a.crypto&&crypto.getRandomValues){var h=new Uint8Array(16);s=function(){return crypto.getRandomValues(h),h}}if(!s){var l=new Array(16);s=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),l[e]=t>>>((3&e)<<3)&255;return l}}for(var u=[],d={},c=0;c<256;c++)u[c]=(c+256).toString(16).substr(1),d[u[c]]=c;var f=s(),p=[1|f[0],f[1],f[2],f[3],f[4],f[5]],m=16383&(f[6]<<8|f[7]),v=0,g=0,y=o;y.v1=r,y.v4=o,y.parse=i,y.unparse=n,t.exports=y}).call(e,i(158))},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"===typeof window&&(i=window)}t.exports=i},function(t,e,i){e.util=i(2),e.DOMutil=i(14),e.DataSet=i(11),e.DataView=i(12),e.Queue=i(43),e.Graph3d=i(161),e.graph3d={Camera:i(95),Filter:i(96),Point2d:i(91),Point3d:i(34),Slider:i(92),StepNumber:i(93)},e.moment=i(9),e.Hammer=i(10),e.keycharm=i(35)},function(t,e,i){var n=i(7),r=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},function(t,e,i){function n(t,e,i){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.containerElement=t,this.dataGroup=new _,this.dataPoints=null,this.create(),p.setDefaults(n.DEFAULTS,this),this.colX=void 0,this.colY=void 0,this.colZ=void 0,this.colValue=void 0,this.setOptions(i),this.setData(e)}function r(t){return"clientX"in t?t.clientX:t.targetTouches[0]&&t.targetTouches[0].clientX||0}function o(t){return"clientY"in t?t.clientY:t.targetTouches[0]&&t.targetTouches[0].clientY||0}var s=i(90),a=function(t){return t&&t.__esModule?t:{default:t}}(s),h=i(44),l=i(2),u=i(34),d=i(91),c=i(92),f=i(93),p=i(94),m=i(15).default,v=i(15),g=v.printStyle,y=i(172),b=y.allOptions,_=i(173);n.STYLE=p.STYLE;n.DEFAULTS={width:"400px",height:"400px",filterLabel:"time",legendLabel:"value",xLabel:"x",yLabel:"y",zLabel:"z",xValueLabel:function(t){return t},yValueLabel:function(t){return t},zValueLabel:function(t){return t},showXAxis:!0,showYAxis:!0,showZAxis:!0,showGrid:!0,showPerspective:!0,showShadow:!1,keepAspectRatio:!0,verticalRatio:.5,dotSizeRatio:.02,dotSizeMinFraction:.5,dotSizeMaxFraction:2.5,showAnimationControls:void 0,animationInterval:1e3,animationPreload:!1,animationAutoStart:void 0,axisColor:"#4D4D4D",gridColor:"#D3D3D3",xCenter:"55%",yCenter:"50%",style:n.STYLE.DOT,tooltip:!1,tooltipStyle:{content:{padding:"10px",border:"1px solid #4d4d4d",color:"#1a1a1a",background:"rgba(255,255,255,0.7)",borderRadius:"2px",boxShadow:"5px 5px 10px rgba(128,128,128,0.5)"},line:{height:"40px",width:"0",borderLeft:"1px solid #4d4d4d"},dot:{height:"0",width:"0",border:"5px solid #4d4d4d",borderRadius:"5px"}},dataColor:{fill:"#7DC1FF",stroke:"#3267D2",strokeWidth:1},cameraPosition:{horizontal:1,vertical:.5,distance:1.7},showLegend:void 0,backgroundColor:void 0,xBarWidth:void 0,yBarWidth:void 0,valueMin:void 0,valueMax:void 0,xMin:void 0,xMax:void 0,xStep:void 0,yMin:void 0,yMax:void 0,yStep:void 0,zMin:void 0,zMax:void 0,zStep:void 0},h(n.prototype),n.prototype._setScale=function(){this.scale=new u(1/this.xRange.range(),1/this.yRange.range(),1/this.zRange.range()),this.keepAspectRatio&&(this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y),this.scale.z*=this.verticalRatio,void 0!==this.valueRange&&(this.scale.value=1/this.valueRange.range());var t=this.xRange.center()*this.scale.x,e=this.yRange.center()*this.scale.y,i=this.zRange.center()*this.scale.z;this.camera.setArmLocation(t,e,i)},n.prototype._convert3Dto2D=function(t){var e=this._convertPointToTranslation(t);return this._convertTranslationToScreen(e)},n.prototype._convertPointToTranslation=function(t){var e=this.camera.getCameraLocation(),i=this.camera.getCameraRotation(),n=t.x*this.scale.x,r=t.y*this.scale.y,o=t.z*this.scale.z,s=e.x,a=e.y,h=e.z,l=Math.sin(i.x),d=Math.cos(i.x),c=Math.sin(i.y),f=Math.cos(i.y),p=Math.sin(i.z),m=Math.cos(i.z);return new u(f*(p*(r-a)+m*(n-s))-c*(o-h),l*(f*(o-h)+c*(p*(r-a)+m*(n-s)))+d*(m*(r-a)-p*(n-s)),d*(f*(o-h)+c*(p*(r-a)+m*(n-s)))-l*(m*(r-a)-p*(n-s)))},n.prototype._convertTranslationToScreen=function(t){var e,i,n=this.eye.x,r=this.eye.y,o=this.eye.z,s=t.x,a=t.y,h=t.z;return this.showPerspective?(e=o/h*(s-n),i=o/h*(a-r)):(e=s*(-o/this.camera.getArmLength()),i=a*(-o/this.camera.getArmLength())),new d(this.currentXCenter+e*this.frame.canvas.clientWidth,this.currentYCenter-i*this.frame.canvas.clientWidth)},n.prototype._calcTranslations=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.trans=this._convertPointToTranslation(i.point),i.screen=this._convertTranslationToScreen(i.trans);var n=this._convertPointToTranslation(i.bottom);i.dist=this.showPerspective?n.length():-n.z}var r=function(t,e){return e.dist-t.dist};t.sort(r)},n.prototype._initializeRanges=function(){var t=this.dataGroup;this.xRange=t.xRange,this.yRange=t.yRange,this.zRange=t.zRange,this.valueRange=t.valueRange,this.xStep=t.xStep,this.yStep=t.yStep,this.zStep=t.zStep,this.xBarWidth=t.xBarWidth,this.yBarWidth=t.yBarWidth,this.colX=t.colX,this.colY=t.colY,this.colZ=t.colZ,this.colValue=t.colValue,this._setScale()},n.prototype.getDataPoints=function(t){for(var e=[],i=0;i<t.length;i++){var n=new u;n.x=t[i][this.colX]||0,n.y=t[i][this.colY]||0,n.z=t[i][this.colZ]||0,n.data=t[i],void 0!==this.colValue&&(n.value=t[i][this.colValue]||0);var r={};r.point=n,r.bottom=new u(n.x,n.y,this.zRange.min),r.trans=void 0,r.screen=void 0,e.push(r)}return e},n.prototype._getDataPoints=function(t){var e,i,r,o,s=[];if(this.style===n.STYLE.GRID||this.style===n.STYLE.SURFACE){var a=this.dataGroup.getDistinctValues(this.colX,t),h=this.dataGroup.getDistinctValues(this.colY,t);s=this.getDataPoints(t);var l=[];for(r=0;r<s.length;r++){o=s[r];var u=a.indexOf(o.point.x),d=h.indexOf(o.point.y);void 0===l[u]&&(l[u]=[]),l[u][d]=o}for(e=0;e<l.length;e++)for(i=0;i<l[e].length;i++)l[e][i]&&(l[e][i].pointRight=e<l.length-1?l[e+1][i]:void 0,l[e][i].pointTop=i<l[e].length-1?l[e][i+1]:void 0,l[e][i].pointCross=e<l.length-1&&i<l[e].length-1?l[e+1][i+1]:void 0)}else if(this._checkValueField(t),s=this.getDataPoints(t),this.style===n.STYLE.LINE)for(r=0;r<s.length;r++)r>0&&(s[r-1].pointNext=s[r]);return s},n.prototype.create=function(){for(;this.containerElement.hasChildNodes();)this.containerElement.removeChild(this.containerElement.firstChild);this.frame=document.createElement("div"),this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas);var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t),this.frame.filter=document.createElement("div"),this.frame.filter.style.position="absolute",this.frame.filter.style.bottom="0px",this.frame.filter.style.left="0px",this.frame.filter.style.width="100%",this.frame.appendChild(this.frame.filter);var e=this,i=function(t){e._onMouseDown(t)},n=function(t){e._onTouchStart(t)},r=function(t){e._onWheel(t)},o=function(t){e._onTooltip(t)},s=function(t){e._onClick(t)};l.addEventListener(this.frame.canvas,"mousedown",i),l.addEventListener(this.frame.canvas,"touchstart",n),l.addEventListener(this.frame.canvas,"mousewheel",r),l.addEventListener(this.frame.canvas,"mousemove",o),l.addEventListener(this.frame.canvas,"click",s),this.containerElement.appendChild(this.frame)},n.prototype._setSize=function(t,e){this.frame.style.width=t,this.frame.style.height=e,this._resizeCanvas()},n.prototype._resizeCanvas=function(){this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=this.frame.canvas.clientWidth,this.frame.canvas.height=this.frame.canvas.clientHeight,this.frame.filter.style.width=this.frame.canvas.clientWidth-20+"px"},n.prototype.animationStart=function(){if(this.animationAutoStart&&this.dataGroup.dataFilter){if(!this.frame.filter||!this.frame.filter.slider)throw new Error("No animation available");this.frame.filter.slider.play()}},n.prototype.animationStop=function(){this.frame.filter&&this.frame.filter.slider&&this.frame.filter.slider.stop()},n.prototype._resizeCenter=function(){"%"===this.xCenter.charAt(this.xCenter.length-1)?this.currentXCenter=parseFloat(this.xCenter)/100*this.frame.canvas.clientWidth:this.currentXCenter=parseFloat(this.xCenter),"%"===this.yCenter.charAt(this.yCenter.length-1)?this.currentYCenter=parseFloat(this.yCenter)/100*(this.frame.canvas.clientHeight-this.frame.filter.clientHeight):this.currentYCenter=parseFloat(this.yCenter)},n.prototype.getCameraPosition=function(){var t=this.camera.getArmRotation();return t.distance=this.camera.getArmLength(),t},n.prototype._readData=function(t){this.dataPoints=this.dataGroup.initializeData(this,t,this.style),this._initializeRanges(),this._redrawFilter()},n.prototype.setData=function(t){void 0!==t&&null!==t&&(this._readData(t),this.redraw(),this.animationStart())},n.prototype.setOptions=function(t){if(void 0!==t){!0===m.validate(t,b)&&console.log("%cErrors have been found in the supplied options object.",g),this.animationStop(),p.setOptions(t,this),this.setPointDrawingMethod(),this._setSize(this.width,this.height),this.setData(this.dataGroup.getDataTable()),this.animationStart()}},n.prototype.setPointDrawingMethod=function(){var t=void 0;switch(this.style){case n.STYLE.BAR:t=n.prototype._redrawBarGraphPoint;break;case n.STYLE.BARCOLOR:t=n.prototype._redrawBarColorGraphPoint;break;case n.STYLE.BARSIZE:t=n.prototype._redrawBarSizeGraphPoint;break;case n.STYLE.DOT:t=n.prototype._redrawDotGraphPoint;break;case n.STYLE.DOTLINE:t=n.prototype._redrawDotLineGraphPoint;break;case n.STYLE.DOTCOLOR:t=n.prototype._redrawDotColorGraphPoint;break;case n.STYLE.DOTSIZE:t=n.prototype._redrawDotSizeGraphPoint;break;case n.STYLE.SURFACE:t=n.prototype._redrawSurfaceGraphPoint;break;case n.STYLE.GRID:t=n.prototype._redrawGridGraphPoint;break;case n.STYLE.LINE:t=n.prototype._redrawLineGraphPoint;break;default:throw new Error("Can not determine point drawing method for graph style '"+this.style+"'")}this._pointDrawingMethod=t},n.prototype.redraw=function(){if(void 0===this.dataPoints)throw new Error("Graph data not initialized");this._resizeCanvas(),this._resizeCenter(),this._redrawSlider(),this._redrawClear(),this._redrawAxis(),this._redrawDataGraph(),this._redrawInfo(),this._redrawLegend()},n.prototype._getContext=function(){var t=this.frame.canvas,e=t.getContext("2d");return e.lineJoin="round",e.lineCap="round",e},n.prototype._redrawClear=function(){var t=this.frame.canvas;t.getContext("2d").clearRect(0,0,t.width,t.height)},n.prototype._dotSize=function(){return this.frame.clientWidth*this.dotSizeRatio},n.prototype._getLegendWidth=function(){var t;if(this.style===n.STYLE.DOTSIZE){t=this._dotSize()*this.dotSizeMaxFraction}else t=this.style===n.STYLE.BARSIZE?this.xBarWidth:20;return t},n.prototype._redrawLegend=function(){if(!0===this.showLegend&&this.style!==n.STYLE.LINE&&this.style!==n.STYLE.BARSIZE){var t=this.style===n.STYLE.BARSIZE||this.style===n.STYLE.DOTSIZE,e=this.style===n.STYLE.DOTSIZE||this.style===n.STYLE.DOTCOLOR||this.style===n.STYLE.BARCOLOR,i=Math.max(.25*this.frame.clientHeight,100),r=this.margin,o=this._getLegendWidth(),s=this.frame.clientWidth-this.margin,a=s-o,h=r+i,l=this._getContext();if(l.lineWidth=1,l.font="14px arial",!1===t){var u,c=i;for(u=0;u<c;u++){var p=(u-0)/(c-0),m=240*p,v=this._hsv2rgb(m,1,1);l.strokeStyle=v,l.beginPath(),l.moveTo(a,r+u),l.lineTo(s,r+u),l.stroke()}l.strokeStyle=this.axisColor,l.strokeRect(a,r,o,i)}else{var g;this.style===n.STYLE.DOTSIZE?g=o*(this.dotSizeMinFraction/this.dotSizeMaxFraction):(this.style,n.STYLE.BARSIZE),l.strokeStyle=this.axisColor,l.fillStyle=this.dataColor.fill,l.beginPath(),l.moveTo(a,r),l.lineTo(s,r),l.lineTo(a+g,h),l.lineTo(a,h),l.closePath(),l.fill(),l.stroke()}var y=e?this.valueRange.min:this.zRange.min,b=e?this.valueRange.max:this.zRange.max,_=new f(y,b,(b-y)/5,!0);_.start(!0);for(var w,x;!_.end();)u=h-(_.getCurrent()-y)/(b-y)*i,w=new d(a-5,u),x=new d(a,u),this._line(l,w,x),l.textAlign="right",l.textBaseline="middle",l.fillStyle=this.axisColor,l.fillText(_.getCurrent(),a-10,u),_.next();l.textAlign="right",l.textBaseline="top";var S=this.legendLabel;l.fillText(S,s,h+this.margin)}},n.prototype._redrawFilter=function(){var t=this.dataGroup.dataFilter,e=this.frame.filter;if(e.innerHTML="",!t)return void(e.slider=void 0);var i={visible:this.showAnimationControls},n=new c(e,i);e.slider=n,e.style.padding="10px",n.setValues(t.values),n.setPlayInterval(this.animationInterval);var r=this,o=function(){var t=r.dataGroup.dataFilter,e=n.getIndex();t.selectValue(e),r.dataPoints=t._getDataPoints(),r.redraw()};n.setOnChangeCallback(o)},n.prototype._redrawSlider=function(){void 0!==this.frame.filter.slider&&this.frame.filter.slider.redraw()},n.prototype._redrawInfo=function(){var t=this.dataGroup.getInfo();if(void 0!==t){var e=this._getContext();e.font="14px arial",e.lineStyle="gray",e.fillStyle="gray",e.textAlign="left",e.textBaseline="top";var i=this.margin,n=this.margin;e.fillText(t,i,n)}},n.prototype._line=function(t,e,i,n){void 0!==n&&(t.strokeStyle=n),t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(i.x,i.y),t.stroke()},n.prototype.drawAxisLabelX=function(t,e,i,n,r){void 0===r&&(r=0);var o=this._convert3Dto2D(e);Math.cos(2*n)>0?(t.textAlign="center",t.textBaseline="top",o.y+=r):Math.sin(2*n)<0?(t.textAlign="right",t.textBaseline="middle"):(t.textAlign="left",t.textBaseline="middle"),t.fillStyle=this.axisColor,t.fillText(i,o.x,o.y)},n.prototype.drawAxisLabelY=function(t,e,i,n,r){void 0===r&&(r=0);var o=this._convert3Dto2D(e);Math.cos(2*n)<0?(t.textAlign="center",t.textBaseline="top",o.y+=r):Math.sin(2*n)>0?(t.textAlign="right",t.textBaseline="middle"):(t.textAlign="left",t.textBaseline="middle"),t.fillStyle=this.axisColor,t.fillText(i,o.x,o.y)},n.prototype.drawAxisLabelZ=function(t,e,i,n){void 0===n&&(n=0);var r=this._convert3Dto2D(e);t.textAlign="right",t.textBaseline="middle",t.fillStyle=this.axisColor,t.fillText(i,r.x-n,r.y)},n.prototype._line3d=function(t,e,i,n){var r=this._convert3Dto2D(e),o=this._convert3Dto2D(i);this._line(t,r,o,n)},n.prototype._redrawAxis=function(){var t,e,i,n,r,o,s,a,h,l,c,p=this._getContext();p.font=24/this.camera.getArmLength()+"px arial";var m,v=.025/this.scale.x,g=.025/this.scale.y,y=5/this.camera.getArmLength(),b=this.camera.getArmRotation().horizontal,_=new d(Math.cos(b),Math.sin(b)),w=this.xRange,x=this.yRange,S=this.zRange;for(p.lineWidth=1,n=void 0===this.defaultXStep,i=new f(w.min,w.max,this.xStep,n),i.start(!0);!i.end();){var k=i.getCurrent();if(this.showGrid?(t=new u(k,x.min,S.min),e=new u(k,x.max,S.min),this._line3d(p,t,e,this.gridColor)):this.showXAxis&&(t=new u(k,x.min,S.min),e=new u(k,x.min+v,S.min),this._line3d(p,t,e,this.axisColor),t=new u(k,x.max,S.min),e=new u(k,x.max-v,S.min),this._line3d(p,t,e,this.axisColor)),this.showXAxis){s=_.x>0?x.min:x.max,m=new u(k,s,S.min);var E="  "+this.xValueLabel(k)+"  ";this.drawAxisLabelX(p,m,E,b,y)}i.next()}for(p.lineWidth=1,n=void 0===this.defaultYStep,i=new f(x.min,x.max,this.yStep,n),i.start(!0);!i.end();){var M=i.getCurrent();if(this.showGrid?(t=new u(w.min,M,S.min),e=new u(w.max,M,S.min),this._line3d(p,t,e,this.gridColor)):this.showYAxis&&(t=new u(w.min,M,S.min),e=new u(w.min+g,M,S.min),this._line3d(p,t,e,this.axisColor),t=new u(w.max,M,S.min),e=new u(w.max-g,M,S.min),this._line3d(p,t,e,this.axisColor)),this.showYAxis){o=_.y>0?w.min:w.max,m=new u(o,M,S.min);var T="  "+this.yValueLabel(M)+"  ";this.drawAxisLabelY(p,m,T,b,y)}i.next()}if(this.showZAxis){for(p.lineWidth=1,n=void 0===this.defaultZStep,i=new f(S.min,S.max,this.zStep,n),i.start(!0),o=_.x>0?w.min:w.max,s=_.y<0?x.min:x.max;!i.end();){var C=i.getCurrent(),O=new u(o,s,C),P=this._convert3Dto2D(O);e=new d(P.x-y,P.y),this._line(p,P,e,this.axisColor);var A=this.zValueLabel(C)+" ";this.drawAxisLabelZ(p,O,A,5),i.next()}p.lineWidth=1,t=new u(o,s,S.min),e=new u(o,s,S.max),this._line3d(p,t,e,this.axisColor)}if(this.showXAxis){var D,I;p.lineWidth=1,D=new u(w.min,x.min,S.min),I=new u(w.max,x.min,S.min),this._line3d(p,D,I,this.axisColor),D=new u(w.min,x.max,S.min),I=new u(w.max,x.max,S.min),this._line3d(p,D,I,this.axisColor)}this.showYAxis&&(p.lineWidth=1,t=new u(w.min,x.min,S.min),e=new u(w.min,x.max,S.min),this._line3d(p,t,e,this.axisColor),t=new u(w.max,x.min,S.min),e=new u(w.max,x.max,S.min),this._line3d(p,t,e,this.axisColor));var R=this.xLabel;R.length>0&&this.showXAxis&&(c=.1/this.scale.y,o=(w.max+3*w.min)/4,s=_.x>0?x.min-c:x.max+c,r=new u(o,s,S.min),this.drawAxisLabelX(p,r,R,b));var L=this.yLabel;L.length>0&&this.showYAxis&&(l=.1/this.scale.x,o=_.y>0?w.min-l:w.max+l,s=(x.max+3*x.min)/4,r=new u(o,s,S.min),this.drawAxisLabelY(p,r,L,b));var N=this.zLabel;N.length>0&&this.showZAxis&&(h=30,o=_.x>0?w.min:w.max,s=_.y<0?x.min:x.max,a=(S.max+3*S.min)/4,r=new u(o,s,a),this.drawAxisLabelZ(p,r,N,h))},n.prototype._hsv2rgb=function(t,e,i){var n,r,o,s,a,h;switch(s=i*e,a=Math.floor(t/60),h=s*(1-Math.abs(t/60%2-1)),a){case 0:n=s,r=h,o=0;break;case 1:n=h,r=s,o=0;break;case 2:n=0,r=s,o=h;break;case 3:n=0,r=h,o=s;break;case 4:n=h,r=0,o=s;break;case 5:n=s,r=0,o=h;break;default:n=0,r=0,o=0}return"RGB("+parseInt(255*n)+","+parseInt(255*r)+","+parseInt(255*o)+")"},n.prototype._getStrokeWidth=function(t){return void 0!==t?this.showPerspective?1/-t.trans.z*this.dataColor.strokeWidth:-this.eye.z/this.camera.getArmLength()*this.dataColor.strokeWidth:this.dataColor.strokeWidth},n.prototype._redrawBar=function(t,e,i,n,r,o){var s,a=this,h=e.point,l=this.zRange.min,d=[{point:new u(h.x-i,h.y-n,h.z)},{point:new u(h.x+i,h.y-n,h.z)},{point:new u(h.x+i,h.y+n,h.z)},{point:new u(h.x-i,h.y+n,h.z)}],c=[{point:new u(h.x-i,h.y-n,l)},{point:new u(h.x+i,h.y-n,l)},{point:new u(h.x+i,h.y+n,l)},{point:new u(h.x-i,h.y+n,l)}];d.forEach(function(t){t.screen=a._convert3Dto2D(t.point)}),c.forEach(function(t){t.screen=a._convert3Dto2D(t.point)});var f=[{corners:d,center:u.avg(c[0].point,c[2].point)},{corners:[d[0],d[1],c[1],c[0]],center:u.avg(c[1].point,c[0].point)},{corners:[d[1],d[2],c[2],c[1]],center:u.avg(c[2].point,c[1].point)},{corners:[d[2],d[3],c[3],c[2]],center:u.avg(c[3].point,c[2].point)},{corners:[d[3],d[0],c[0],c[3]],center:u.avg(c[0].point,c[3].point)}];e.surfaces=f;for(var p=0;p<f.length;p++){s=f[p];var m=this._convertPointToTranslation(s.center);s.dist=this.showPerspective?m.length():-m.z}f.sort(function(t,e){var i=e.dist-t.dist;return i||(t.corners===d?1:e.corners===d?-1:0)}),t.lineWidth=this._getStrokeWidth(e),t.strokeStyle=o,t.fillStyle=r;for(var v=2;v<f.length;v++)s=f[v],this._polygon(t,s.corners)},n.prototype._polygon=function(t,e,i,n){if(!(e.length<2)){void 0!==i&&(t.fillStyle=i),void 0!==n&&(t.strokeStyle=n),t.beginPath(),t.moveTo(e[0].screen.x,e[0].screen.y);for(var r=1;r<e.length;++r){var o=e[r];t.lineTo(o.screen.x,o.screen.y)}t.closePath(),t.fill(),t.stroke()}},n.prototype._drawCircle=function(t,e,i,n,r){var o=this._calcRadius(e,r);t.lineWidth=this._getStrokeWidth(e),t.strokeStyle=n,t.fillStyle=i,t.beginPath(),t.arc(e.screen.x,e.screen.y,o,0,2*Math.PI,!0),t.fill(),t.stroke()},n.prototype._getColorsRegular=function(t){var e=240*(1-(t.point.z-this.zRange.min)*this.scale.z/this.verticalRatio);return{fill:this._hsv2rgb(e,1,1),border:this._hsv2rgb(e,1,.8)}},n.prototype._getColorsColor=function(t){var e,i;if("string"===typeof t.point.value)e=t.point.value,i=t.point.value;else{var n=240*(1-(t.point.value-this.valueRange.min)*this.scale.value);e=this._hsv2rgb(n,1,1),i=this._hsv2rgb(n,1,.8)}return{fill:e,border:i}},n.prototype._getColorsSize=function(){return{fill:this.dataColor.fill,border:this.dataColor.stroke}},n.prototype._calcRadius=function(t,e){void 0===e&&(e=this._dotSize());var i;return i=this.showPerspective?e/-t.trans.z:e*(-this.eye.z/this.camera.getArmLength()),i<0&&(i=0),i},n.prototype._redrawBarGraphPoint=function(t,e){var i=this.xBarWidth/2,n=this.yBarWidth/2,r=this._getColorsRegular(e);this._redrawBar(t,e,i,n,r.fill,r.border)},n.prototype._redrawBarColorGraphPoint=function(t,e){var i=this.xBarWidth/2,n=this.yBarWidth/2,r=this._getColorsColor(e);this._redrawBar(t,e,i,n,r.fill,r.border)},n.prototype._redrawBarSizeGraphPoint=function(t,e){var i=(e.point.value-this.valueRange.min)/this.valueRange.range(),n=this.xBarWidth/2*(.8*i+.2),r=this.yBarWidth/2*(.8*i+.2),o=this._getColorsSize();this._redrawBar(t,e,n,r,o.fill,o.border)},n.prototype._redrawDotGraphPoint=function(t,e){var i=this._getColorsRegular(e);this._drawCircle(t,e,i.fill,i.border)},n.prototype._redrawDotLineGraphPoint=function(t,e){var i=this._convert3Dto2D(e.bottom);t.lineWidth=1,this._line(t,i,e.screen,this.gridColor),this._redrawDotGraphPoint(t,e)},n.prototype._redrawDotColorGraphPoint=function(t,e){var i=this._getColorsColor(e);this._drawCircle(t,e,i.fill,i.border)},n.prototype._redrawDotSizeGraphPoint=function(t,e){var i=this._dotSize(),n=(e.point.value-this.valueRange.min)/this.valueRange.range(),r=i*this.dotSizeMinFraction,o=i*this.dotSizeMaxFraction-r,s=r+o*n,a=this._getColorsSize();this._drawCircle(t,e,a.fill,a.border,s)},n.prototype._redrawSurfaceGraphPoint=function(t,e){var i=e.pointRight,n=e.pointTop,r=e.pointCross;if(void 0!==e&&void 0!==i&&void 0!==n&&void 0!==r){var o,s,a=!0;if(this.showGrayBottom||this.showShadow){var h=u.subtract(r.trans,e.trans),l=u.subtract(n.trans,i.trans),d=u.crossProduct(h,l),c=d.length();a=d.z>0}if(a){var f,p=(e.point.z+i.point.z+n.point.z+r.point.z)/4,m=240*(1-(p-this.zRange.min)*this.scale.z/this.verticalRatio);this.showShadow?(f=Math.min(1+d.x/c/2,1),o=this._hsv2rgb(m,1,f),s=o):(f=1,o=this._hsv2rgb(m,1,f),s=this.axisColor)}else o="gray",s=this.axisColor;t.lineWidth=this._getStrokeWidth(e);var v=[e,i,r,n];this._polygon(t,v,o,s)}},n.prototype._drawGridLine=function(t,e,i){if(void 0!==e&&void 0!==i){var n=(e.point.z+i.point.z)/2,r=240*(1-(n-this.zRange.min)*this.scale.z/this.verticalRatio);t.lineWidth=2*this._getStrokeWidth(e),t.strokeStyle=this._hsv2rgb(r,1,1),this._line(t,e.screen,i.screen)}},n.prototype._redrawGridGraphPoint=function(t,e){this._drawGridLine(t,e,e.pointRight),this._drawGridLine(t,e,e.pointTop)},n.prototype._redrawLineGraphPoint=function(t,e){void 0!==e.pointNext&&(t.lineWidth=this._getStrokeWidth(e),t.strokeStyle=this.dataColor.stroke,this._line(t,e.screen,e.pointNext.screen))},n.prototype._redrawDataGraph=function(){var t,e=this._getContext();if(!(void 0===this.dataPoints||this.dataPoints.length<=0))for(this._calcTranslations(this.dataPoints),t=0;t<this.dataPoints.length;t++){var i=this.dataPoints[t];this._pointDrawingMethod.call(this,e,i)}},n.prototype._storeMousePosition=function(t){this.startMouseX=r(t),this.startMouseY=o(t),this._startCameraOffset=this.camera.getOffset()},n.prototype._onMouseDown=function(t){if(t=t||window.event,this.leftButtonDown&&this._onMouseUp(t),this.leftButtonDown=t.which?1===t.which:1===t.button,this.leftButtonDown||this.touchDown){this._storeMousePosition(t),this.startStart=new Date(this.start),this.startEnd=new Date(this.end),this.startArmRotation=this.camera.getArmRotation(),this.frame.style.cursor="move";var e=this;this.onmousemove=function(t){e._onMouseMove(t)},this.onmouseup=function(t){e._onMouseUp(t)},l.addEventListener(document,"mousemove",e.onmousemove),l.addEventListener(document,"mouseup",e.onmouseup),l.preventDefault(t)}},n.prototype._onMouseMove=function(t){this.moving=!0,t=t||window.event;var e=parseFloat(r(t))-this.startMouseX,i=parseFloat(o(t))-this.startMouseY;if(t&&!0===t.ctrlKey){var n=.5*this.frame.clientWidth,s=.5*this.frame.clientHeight,a=(this._startCameraOffset.x||0)-e/n*this.camera.armLength*.8,h=(this._startCameraOffset.y||0)+i/s*this.camera.armLength*.8;this.camera.setOffset(a,h),this._storeMousePosition(t)}else{var u=this.startArmRotation.horizontal+e/200,d=this.startArmRotation.vertical+i/200,c=Math.sin(4/360*2*Math.PI);Math.abs(Math.sin(u))<c&&(u=Math.round(u/Math.PI)*Math.PI-.001),Math.abs(Math.cos(u))<c&&(u=(Math.round(u/Math.PI-.5)+.5)*Math.PI-.001),Math.abs(Math.sin(d))<c&&(d=Math.round(d/Math.PI)*Math.PI),Math.abs(Math.cos(d))<c&&(d=(Math.round(d/Math.PI-.5)+.5)*Math.PI),this.camera.setArmRotation(u,d)}this.redraw();var f=this.getCameraPosition();this.emit("cameraPositionChange",f),l.preventDefault(t)},n.prototype._onMouseUp=function(t){this.frame.style.cursor="auto",this.leftButtonDown=!1,l.removeEventListener(document,"mousemove",this.onmousemove),l.removeEventListener(document,"mouseup",this.onmouseup),l.preventDefault(t)},n.prototype._onClick=function(t){if(this.onclick_callback){if(this.moving)this.moving=!1;else{var e=this.frame.getBoundingClientRect(),i=r(t)-e.left,n=o(t)-e.top,s=this._dataPointFromXY(i,n);s&&this.onclick_callback(s.point.data)}l.preventDefault(t)}},n.prototype._onTooltip=function(t){var e=this.frame.getBoundingClientRect(),i=r(t)-e.left,n=o(t)-e.top;if(this.showTooltip){if(this.tooltipTimeout&&clearTimeout(this.tooltipTimeout),this.leftButtonDown)return void this._hideTooltip();if(this.tooltip&&this.tooltip.dataPoint){var s=this._dataPointFromXY(i,n);s!==this.tooltip.dataPoint&&(s?this._showTooltip(s):this._hideTooltip())}else{var a=this;this.tooltipTimeout=setTimeout(function(){a.tooltipTimeout=null;var t=a._dataPointFromXY(i,n);t&&a._showTooltip(t)},300)}}},n.prototype._onTouchStart=function(t){this.touchDown=!0;var e=this;this.ontouchmove=function(t){e._onTouchMove(t)},this.ontouchend=function(t){e._onTouchEnd(t)},l.addEventListener(document,"touchmove",e.ontouchmove),l.addEventListener(document,"touchend",e.ontouchend),this._onMouseDown(t)},n.prototype._onTouchMove=function(t){this._onMouseMove(t)},n.prototype._onTouchEnd=function(t){this.touchDown=!1,l.removeEventListener(document,"touchmove",this.ontouchmove),l.removeEventListener(document,"touchend",this.ontouchend),this._onMouseUp(t)},n.prototype._onWheel=function(t){t||(t=window.event);var e=0;if(t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e){var i=this.camera.getArmLength(),n=i*(1-e/10);this.camera.setArmLength(n),this.redraw(),this._hideTooltip()}var r=this.getCameraPosition();this.emit("cameraPositionChange",r),l.preventDefault(t)},n.prototype._insideTriangle=function(t,e){function i(t){return t>0?1:t<0?-1:0}var n=e[0],r=e[1],o=e[2],s=i((r.x-n.x)*(t.y-n.y)-(r.y-n.y)*(t.x-n.x)),a=i((o.x-r.x)*(t.y-r.y)-(o.y-r.y)*(t.x-r.x)),h=i((n.x-o.x)*(t.y-o.y)-(n.y-o.y)*(t.x-o.x));return(0==s||0==a||s==a)&&(0==a||0==h||a==h)&&(0==s||0==h||s==h)},n.prototype._dataPointFromXY=function(t,e){var i,r=null,o=null,s=null,a=new d(t,e);if(this.style===n.STYLE.BAR||this.style===n.STYLE.BARCOLOR||this.style===n.STYLE.BARSIZE)for(i=this.dataPoints.length-1;i>=0;i--){r=this.dataPoints[i];var h=r.surfaces;if(h)for(var l=h.length-1;l>=0;l--){var u=h[l],c=u.corners,f=[c[0].screen,c[1].screen,c[2].screen],p=[c[2].screen,c[3].screen,c[0].screen];if(this._insideTriangle(a,f)||this._insideTriangle(a,p))return r}}else for(i=0;i<this.dataPoints.length;i++){r=this.dataPoints[i];var m=r.screen;if(m){var v=Math.abs(t-m.x),g=Math.abs(e-m.y),y=Math.sqrt(v*v+g*g);(null===s||y<s)&&y<100&&(s=y,o=r)}}return o},n.prototype.hasBars=function(t){return t==n.STYLE.BAR||t==n.STYLE.BARCOLOR||t==n.STYLE.BARSIZE},n.prototype._showTooltip=function(t){var e,i,n;this.tooltip?(e=this.tooltip.dom.content,i=this.tooltip.dom.line,n=this.tooltip.dom.dot):(e=document.createElement("div"),(0,a.default)(e.style,{},this.tooltipStyle.content),e.style.position="absolute",i=document.createElement("div"),(0,a.default)(i.style,{},this.tooltipStyle.line),i.style.position="absolute",n=document.createElement("div"),(0,a.default)(n.style,{},this.tooltipStyle.dot),n.style.position="absolute",this.tooltip={dataPoint:null,dom:{content:e,line:i,dot:n}}),this._hideTooltip(),this.tooltip.dataPoint=t,"function"===typeof this.showTooltip?e.innerHTML=this.showTooltip(t.point):e.innerHTML="<table><tr><td>"+this.xLabel+":</td><td>"+t.point.x+"</td></tr><tr><td>"+this.yLabel+":</td><td>"+t.point.y+"</td></tr><tr><td>"+this.zLabel+":</td><td>"+t.point.z+"</td></tr></table>",e.style.left="0",e.style.top="0",this.frame.appendChild(e),this.frame.appendChild(i),this.frame.appendChild(n);var r=e.offsetWidth,o=e.offsetHeight,s=i.offsetHeight,h=n.offsetWidth,l=n.offsetHeight,u=t.screen.x-r/2;u=Math.min(Math.max(u,10),this.frame.clientWidth-10-r),i.style.left=t.screen.x+"px",i.style.top=t.screen.y-s+"px",e.style.left=u+"px",e.style.top=t.screen.y-s-o+"px",n.style.left=t.screen.x-h/2+"px",n.style.top=t.screen.y-l/2+"px"},n.prototype._hideTooltip=function(){if(this.tooltip){this.tooltip.dataPoint=null;for(var t in this.tooltip.dom)if(this.tooltip.dom.hasOwnProperty(t)){var e=this.tooltip.dom[t];e&&e.parentNode&&e.parentNode.removeChild(e)}}},n.prototype.setCameraPosition=function(t){p.setCameraPosition(t,this),this.redraw()},n.prototype.setSize=function(t,e){this._setSize(t,e),this.redraw()},t.exports=n},function(t,e,i){i(163),t.exports=i(7).Object.assign},function(t,e,i){var n=i(17);n(n.S+n.F,"Object",{assign:i(164)})},function(t,e,i){var n=i(33),r=i(63),o=i(42),s=i(41),a=i(78),h=Object.assign;t.exports=!h||i(28)(function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach(function(t){e[t]=t}),7!=h({},t)[i]||Object.keys(h({},e)).join("")!=n})?function(t,e){for(var i=s(t),h=arguments.length,l=1,u=r.f,d=o.f;h>l;)for(var c,f=a(arguments[l++]),p=u?n(f).concat(u(f)):n(f),m=p.length,v=0;m>v;)d.call(f,c=p[v++])&&(i[c]=f[c]);return i}:h},function(t,e,i){t.exports={default:i(166),__esModule:!0}},function(t,e,i){i(167),t.exports=i(7).Math.sign},function(t,e,i){var n=i(17);n(n.S,"Math",{sign:i(168)})},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,i){t.exports={default:i(170),__esModule:!0}},function(t,e,i){i(171);var n=i(7).Object;t.exports=function(t,e,i){return n.defineProperty(t,e,i)}},function(t,e,i){var n=i(17);n(n.S+n.F*!i(21),"Object",{defineProperty:i(20).f})},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n="string",r="boolean",o="number",s={fill:{string:n},stroke:{string:n},strokeWidth:{number:o},__type__:{string:n,object:"object",undefined:"undefined"}},a={animationAutoStart:{boolean:r,undefined:"undefined"},animationInterval:{number:o},animationPreload:{boolean:r},axisColor:{string:n},backgroundColor:s,xBarWidth:{number:o,undefined:"undefined"},yBarWidth:{number:o,undefined:"undefined"},cameraPosition:{distance:{number:o},horizontal:{number:o},vertical:{number:o},__type__:{object:"object"}},xCenter:{string:n},yCenter:{string:n},dataColor:s,dotSizeMinFraction:{number:o},dotSizeMaxFraction:{number:o},dotSizeRatio:{number:o},filterLabel:{string:n},gridColor:{string:n},onclick:{function:"function"},keepAspectRatio:{boolean:r},xLabel:{string:n},yLabel:{string:n},zLabel:{string:n},legendLabel:{string:n},xMin:{number:o,undefined:"undefined"},yMin:{number:o,undefined:"undefined"},zMin:{number:o,undefined:"undefined"},xMax:{number:o,undefined:"undefined"},yMax:{number:o,undefined:"undefined"},zMax:{number:o,undefined:"undefined"},showAnimationControls:{boolean:r,undefined:"undefined"},showGrid:{boolean:r},showLegend:{boolean:r,undefined:"undefined"},showPerspective:{boolean:r},showShadow:{boolean:r},showXAxis:{boolean:r},showYAxis:{boolean:r},showZAxis:{boolean:r},xStep:{number:o,undefined:"undefined"},yStep:{number:o,undefined:"undefined"},zStep:{number:o,undefined:"undefined"},style:{number:o,string:["bar","bar-color","bar-size","dot","dot-line","dot-color","dot-size","line","grid","surface"]},tooltip:{boolean:r,function:"function"},tooltipStyle:{content:{color:{string:n},background:{string:n},border:{string:n},borderRadius:{string:n},boxShadow:{string:n},padding:{string:n},__type__:{object:"object"}},line:{borderLeft:{string:n},height:{string:n},width:{string:n},__type__:{object:"object"}},dot:{border:{string:n},borderRadius:{string:n},height:{string:n},width:{string:n},__type__:{object:"object"}},__type__:{object:"object"}},xValueLabel:{function:"function"},yValueLabel:{function:"function"},zValueLabel:{function:"function"},valueMax:{number:o,undefined:"undefined"},valueMin:{number:o,undefined:"undefined"},verticalRatio:{number:o},height:{string:n},width:{string:n},__type__:{object:"object"}};e.allOptions=a},function(t,e,i){function n(){this.dataTable=null}var r=i(11),o=i(12),s=i(174),a=i(96),h=i(94),l=i(34);n.prototype.initializeData=function(t,e,i){if(void 0!==e){Array.isArray(e)&&(e=new r(e));var n;if(!(e instanceof r||e instanceof o))throw new Error("Array, DataSet, or DataView expected");if(n=e.get(),0!=n.length){this.style=i,this.dataSet&&this.dataSet.off("*",this._onChange),this.dataSet=e,this.dataTable=n;var s=this;this._onChange=function(){t.setData(s.dataSet)},this.dataSet.on("*",this._onChange),this.colX="x",this.colY="y",this.colZ="z";var h=t.hasBars(i);if(h&&(void 0!==t.defaultXBarWidth?this.xBarWidth=t.defaultXBarWidth:this.xBarWidth=this.getSmallestDifference(n,this.colX)||1,void 0!==t.defaultYBarWidth?this.yBarWidth=t.defaultYBarWidth:this.yBarWidth=this.getSmallestDifference(n,this.colY)||1),this._initializeRange(n,this.colX,t,h),this._initializeRange(n,this.colY,t,h),this._initializeRange(n,this.colZ,t,!1),n[0].hasOwnProperty("style")){this.colValue="style";var l=this.getColumnRange(n,this.colValue);this._setRangeDefaults(l,t.defaultValueMin,t.defaultValueMax),this.valueRange=l}this.getDataTable()[0].hasOwnProperty("filter")&&void 0===this.dataFilter&&(this.dataFilter=new a(this,"filter",t),this.dataFilter.setOnLoadCallback(function(){t.redraw()}));return this.dataFilter?this.dataFilter._getDataPoints():this._getDataPoints(this.getDataTable())}}},n.prototype._collectRangeSettings=function(t,e){if(-1==["x","y","z"].indexOf(t))throw new Error("Column '"+t+"' invalid");var i=t.toUpperCase();return{barWidth:this[t+"BarWidth"],min:e["default"+i+"Min"],max:e["default"+i+"Max"],step:e["default"+i+"Step"],range_label:t+"Range",step_label:t+"Step"}},n.prototype._initializeRange=function(t,e,i,n){var r=this._collectRangeSettings(e,i),o=this.getColumnRange(t,e);n&&"z"!=e&&o.expand(r.barWidth/2),this._setRangeDefaults(o,r.min,r.max),this[r.range_label]=o,this[r.step_label]=void 0!==r.step?r.step:o.range()/5},n.prototype.getDistinctValues=function(t,e){void 0===e&&(e=this.dataTable);for(var i=[],n=0;n<e.length;n++){var r=e[n][t]||0;-1===i.indexOf(r)&&i.push(r)}return i.sort(function(t,e){return t-e})},n.prototype.getSmallestDifference=function(t,e){for(var i=this.getDistinctValues(t,e),n=null,r=1;r<i.length;r++){var o=i[r]-i[r-1];(null==n||n>o)&&(n=o)}return n},n.prototype.getColumnRange=function(t,e){for(var i=new s,n=0;n<t.length;n++){var r=t[n][e];i.adjust(r)}return i},n.prototype.getNumberOfRows=function(){return this.dataTable.length},n.prototype._setRangeDefaults=function(t,e,i){void 0!==e&&(t.min=e),void 0!==i&&(t.max=i),t.max<=t.min&&(t.max=t.min+1)},n.prototype.getDataTable=function(){return this.dataTable},n.prototype.getDataSet=function(){return this.dataSet},n.prototype.getDataPoints=function(t){for(var e=[],i=0;i<t.length;i++){var n=new l;n.x=t[i][this.colX]||0,n.y=t[i][this.colY]||0,n.z=t[i][this.colZ]||0,n.data=t[i],void 0!==this.colValue&&(n.value=t[i][this.colValue]||0);var r={};r.point=n,r.bottom=new l(n.x,n.y,this.zRange.min),r.trans=void 0,r.screen=void 0,e.push(r)}return e},n.prototype.initDataAsMatrix=function(t){var e,i,n,r,o=this.getDistinctValues(this.colX,t),s=this.getDistinctValues(this.colY,t),a=this.getDataPoints(t),h=[];for(n=0;n<a.length;n++){r=a[n];var l=o.indexOf(r.point.x),u=s.indexOf(r.point.y);void 0===h[l]&&(h[l]=[]),h[l][u]=r}for(e=0;e<h.length;e++)for(i=0;i<h[e].length;i++)h[e][i]&&(h[e][i].pointRight=e<h.length-1?h[e+1][i]:void 0,h[e][i].pointTop=i<h[e].length-1?h[e][i+1]:void 0,h[e][i].pointCross=e<h.length-1&&i<h[e].length-1?h[e+1][i+1]:void 0);return a},n.prototype.getInfo=function(){var t=this.dataFilter;if(t)return t.getLabel()+": "+t.getSelectedValue()},n.prototype.reload=function(){this.dataTable&&this.setData(this.dataTable)},n.prototype._getDataPoints=function(t){var e=[];if(this.style===h.STYLE.GRID||this.style===h.STYLE.SURFACE)e=this.initDataAsMatrix(t);else if(this._checkValueField(t),e=this.getDataPoints(t),this.style===h.STYLE.LINE)for(var i=0;i<e.length;i++)i>0&&(e[i-1].pointNext=e[i]);return e},n.prototype._checkValueField=function(t){if(this.style===h.STYLE.BARCOLOR||this.style===h.STYLE.BARSIZE||this.style===h.STYLE.DOTCOLOR||this.style===h.STYLE.DOTSIZE){if(void 0===this.colValue)throw new Error("Expected data to have  field 'style'  for graph style '"+this.style+"'");if(void 0===t[0][this.colValue])throw new Error("Expected data to have  field '"+this.colValue+"'  for graph style '"+this.style+"'")}},t.exports=n},function(t,e,i){function n(){this.min=void 0,this.max=void 0}n.prototype.adjust=function(t){void 0!==t&&((void 0===this.min||this.min>t)&&(this.min=t),(void 0===this.max||this.max<t)&&(this.max=t))},n.prototype.combine=function(t){this.add(t.min),this.add(t.max)},n.prototype.expand=function(t){if(void 0!==t){var e=this.min-t,i=this.max+t;if(e>i)throw new Error("Passed expansion value makes range invalid");this.min=e,this.max=i}},n.prototype.range=function(){return this.max-this.min},n.prototype.center=function(){return(this.min+this.max)/2},t.exports=n},function(t,e,i){var n,r,o;!function(i){r=[],n=i,void 0!==(o="function"===typeof n?n.apply(e,r):n)&&(t.exports=o)}(function(){var t=null;return function e(i,n){function r(t){return t.match(/[^ ]+/g)}function o(e){if("hammer.input"!==e.type){if(e.srcEvent._handled||(e.srcEvent._handled={}),e.srcEvent._handled[e.type])return;e.srcEvent._handled[e.type]=!0}var i=!1;e.stopPropagation=function(){i=!0};var n=e.srcEvent.stopPropagation.bind(e.srcEvent);"function"==typeof n&&(e.srcEvent.stopPropagation=function(){n(),e.stopPropagation()}),e.firstTarget=t;for(var r=t;r&&!i;){var o=r.hammer;if(o)for(var s,a=0;a<o.length;a++)if(s=o[a]._handlers[e.type])for(var h=0;h<s.length&&!i;h++)s[h](e);r=r.parentNode}}var s=n||{preventDefault:!1};if(i.Manager){var a=i,h=function(t,i){var n=Object.create(s);return i&&a.assign(n,i),e(new a(t,n),n)};return a.assign(h,a),h.Manager=function(t,i){var n=Object.create(s);return i&&a.assign(n,i),e(new a.Manager(t,n),n)},h}var l=Object.create(i),u=i.element;return u.hammer||(u.hammer=[]),u.hammer.push(l),i.on("hammer.input",function(e){!0!==s.preventDefault&&s.preventDefault!==e.pointerType||e.preventDefault(),e.isFirst&&(t=e.target)}),l._handlers={},l.on=function(t,e){return r(t).forEach(function(t){var n=l._handlers[t];n||(l._handlers[t]=n=[],i.on(t,o)),n.push(e)}),l},l.off=function(t,e){return r(t).forEach(function(t){var n=l._handlers[t];n&&(n=e?n.filter(function(t){return t!==e}):[],n.length>0?l._handlers[t]=n:(i.off(t,o),delete l._handlers[t]))}),l},l.emit=function(e,n){t=n.target,i.emit(e,n)},l.destroy=function(){var t=i.element.hammer,e=t.indexOf(l);-1!==e&&t.splice(e,1),t.length||delete i.element.hammer,l._handlers={},i.destroy()},l}})},function(t,e,i){var n;!function(r,o,s,a){function h(t,e,i){return setTimeout(f(t,i),e)}function l(t,e,i){return!!Array.isArray(t)&&(u(t,i[e],i),!0)}function u(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==a)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function d(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,n,i),t.apply(this,arguments)}}function c(t,e,i){var n,r=e.prototype;n=t.prototype=Object.create(r),n.constructor=t,n._super=r,i&&pt(n,i)}function f(t,e){return function(){return t.apply(e,arguments)}}function p(t,e){return typeof t==gt?t.apply(e?e[0]||a:a,e):t}function m(t,e){return t===a?e:t}function v(t,e,i){u(_(e),function(e){t.addEventListener(e,i,!1)})}function g(t,e,i){u(_(e),function(e){t.removeEventListener(e,i,!1)})}function y(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function b(t,e){return t.indexOf(e)>-1}function _(t){return t.trim().split(/\s+/g)}function w(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function x(t){return Array.prototype.slice.call(t,0)}function S(t,e,i){for(var n=[],r=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];w(r,s)<0&&n.push(t[o]),r[o]=s,o++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function k(t,e){for(var i,n,r=e[0].toUpperCase()+e.slice(1),o=0;o<mt.length;){if(i=mt[o],(n=i?i+r:e)in t)return n;o++}return a}function E(){return St++}function M(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}function T(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){p(t.options.enable,[t])&&i.handler(e)},this.init()}function C(t){var e=t.options.inputClass;return new(e||(Mt?H:Tt?W:Et?$:U))(t,O)}function O(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,o=e&Ot&&n-r===0,s=e&(At|Dt)&&n-r===0;i.isFirst=!!o,i.isFinal=!!s,o&&(t.session={}),i.eventType=e,P(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function P(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=I(e)),r>1&&!i.firstMultiple?i.firstMultiple=I(e):1===r&&(i.firstMultiple=!1);var o=i.firstInput,s=i.firstMultiple,a=s?s.center:o.center,h=e.center=R(n);e.timeStamp=_t(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=z(a,h),e.distance=F(a,h),A(i,e),e.offsetDirection=N(e.deltaX,e.deltaY);var l=L(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=bt(l.x)>bt(l.y)?l.x:l.y,e.scale=s?j(s.pointers,n):1,e.rotation=s?B(s.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,D(i,e);var u=t.element;y(e.srcEvent.target,u)&&(u=e.srcEvent.target),e.target=u}function A(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};e.eventType!==Ot&&o.eventType!==At||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}function D(t,e){var i,n,r,o,s=t.lastInterval||e,h=e.timeStamp-s.timeStamp;if(e.eventType!=Dt&&(h>Ct||s.velocity===a)){var l=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,d=L(h,l,u);n=d.x,r=d.y,i=bt(d.x)>bt(d.y)?d.x:d.y,o=N(l,u),t.lastInterval=e}else i=s.velocity,n=s.velocityX,r=s.velocityY,o=s.direction;e.velocity=i,e.velocityX=n,e.velocityY=r,e.direction=o}function I(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:yt(t.pointers[i].clientX),clientY:yt(t.pointers[i].clientY)},i++;return{timeStamp:_t(),pointers:e,center:R(e),deltaX:t.deltaX,deltaY:t.deltaY}}function R(t){var e=t.length;if(1===e)return{x:yt(t[0].clientX),y:yt(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:yt(i/e),y:yt(n/e)}}function L(t,e,i){return{x:e/t||0,y:i/t||0}}function N(t,e){return t===e?It:bt(t)>=bt(e)?t<0?Rt:Lt:e<0?Nt:Ft}function F(t,e,i){i||(i=Ut);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function z(t,e,i){i||(i=Ut);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}function B(t,e){return z(e[1],e[0],Ht)+z(t[1],t[0],Ht)}function j(t,e){return F(e[0],e[1],Ht)/F(t[0],t[1],Ht)}function U(){this.evEl=Gt,this.evWin=Wt,this.pressed=!1,T.apply(this,arguments)}function H(){this.evEl=qt,this.evWin=Xt,T.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function V(){this.evTarget=Kt,this.evWin=Qt,this.started=!1,T.apply(this,arguments)}function G(t,e){var i=x(t.touches),n=x(t.changedTouches);return e&(At|Dt)&&(i=S(i.concat(n),"identifier",!0)),[i,n]}function W(){this.evTarget=te,this.targetIds={},T.apply(this,arguments)}function Y(t,e){var i=x(t.touches),n=this.targetIds;if(e&(Ot|Pt)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,o,s=x(t.changedTouches),a=[],h=this.target;if(o=i.filter(function(t){return y(t.target,h)}),e===Ot)for(r=0;r<o.length;)n[o[r].identifier]=!0,r++;for(r=0;r<s.length;)n[s[r].identifier]&&a.push(s[r]),e&(At|Dt)&&delete n[s[r].identifier],r++;return a.length?[S(o.concat(a),"identifier",!0),a]:void 0}function $(){T.apply(this,arguments);var t=f(this.handler,this);this.touch=new W(this.manager,t),this.mouse=new U(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function q(t,e){t&Ot?(this.primaryTouch=e.changedPointers[0].identifier,X.call(this,e)):t&(At|Dt)&&X.call(this,e)}function X(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches,r=function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)};setTimeout(r,ee)}}function Z(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],o=Math.abs(e-r.x),s=Math.abs(i-r.y);if(o<=ie&&s<=ie)return!0}return!1}function K(t,e){this.manager=t,this.set(e)}function Q(t){if(b(t,ae))return ae;var e=b(t,he),i=b(t,le);return e&&i?ae:e||i?e?he:le:b(t,se)?se:oe}function J(t){this.options=pt({},this.defaults,t||{}),this.id=E(),this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=de,this.simultaneous={},this.requireFail=[]}function tt(t){return t&ve?"cancel":t&pe?"end":t&fe?"move":t&ce?"start":""}function et(t){return t==Ft?"down":t==Nt?"up":t==Rt?"left":t==Lt?"right":""}function it(t,e){var i=e.manager;return i?i.get(t):t}function nt(){J.apply(this,arguments)}function rt(){nt.apply(this,arguments),this.pX=null,this.pY=null}function ot(){nt.apply(this,arguments)}function st(){J.apply(this,arguments),this._timer=null,this._input=null}function at(){nt.apply(this,arguments)}function ht(){nt.apply(this,arguments)}function lt(){J.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ut(t,e){return e=e||{},e.recognizers=m(e.recognizers,ut.defaults.preset),new dt(t,e)}function dt(t,e){this.options=pt({},ut.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=C(this),this.touchAction=new K(this,this.options.touchAction),ct(this,!0),u(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ct(t,e){var i=t.element;if(i.style){var n;u(t.options.cssProps,function(r,o){n=k(i.style,o),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function ft(t,e){var i=o.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}var pt,mt=["","webkit","Moz","MS","ms","o"],vt=o.createElement("div"),gt="function",yt=Math.round,bt=Math.abs,_t=Date.now;pt="function"!==typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==a&&null!==n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}:Object.assign;var wt=d(function(t,e,i){for(var n=Object.keys(e),r=0;r<n.length;)(!i||i&&t[n[r]]===a)&&(t[n[r]]=e[n[r]]),r++;return t},"extend","Use `assign`."),xt=d(function(t,e){return wt(t,e,!0)},"merge","Use `assign`."),St=1,kt=/mobile|tablet|ip(ad|hone|od)|android/i,Et="ontouchstart"in r,Mt=k(r,"PointerEvent")!==a,Tt=Et&&kt.test(navigator.userAgent),Ct=25,Ot=1,Pt=2,At=4,Dt=8,It=1,Rt=2,Lt=4,Nt=8,Ft=16,zt=Rt|Lt,Bt=Nt|Ft,jt=zt|Bt,Ut=["x","y"],Ht=["clientX","clientY"];T.prototype={handler:function(){},init:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(M(this.element),this.evWin,this.domHandler)}};var Vt={mousedown:Ot,mousemove:Pt,mouseup:At},Gt="mousedown",Wt="mousemove mouseup";c(U,T,{handler:function(t){var e=Vt[t.type];e&Ot&&0===t.button&&(this.pressed=!0),e&Pt&&1!==t.which&&(e=At),this.pressed&&(e&At&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Yt={pointerdown:Ot,pointermove:Pt,pointerup:At,pointercancel:Dt,pointerout:Dt},$t={2:"touch",3:"pen",4:"mouse",5:"kinect"},qt="pointerdown",Xt="pointermove pointerup pointercancel";r.MSPointerEvent&&!r.PointerEvent&&(qt="MSPointerDown",Xt="MSPointerMove MSPointerUp MSPointerCancel"),c(H,T,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=Yt[n],o=$t[t.pointerType]||t.pointerType,s="touch"==o,a=w(e,t.pointerId,"pointerId");r&Ot&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):r&(At|Dt)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))}});var Zt={touchstart:Ot,touchmove:Pt,touchend:At,touchcancel:Dt},Kt="touchstart",Qt="touchstart touchmove touchend touchcancel";c(V,T,{handler:function(t){var e=Zt[t.type];if(e===Ot&&(this.started=!0),this.started){var i=G.call(this,t,e);e&(At|Dt)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var Jt={touchstart:Ot,touchmove:Pt,touchend:At,touchcancel:Dt},te="touchstart touchmove touchend touchcancel";c(W,T,{handler:function(t){var e=Jt[t.type],i=Y.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});var ee=2500,ie=25;c($,T,{handler:function(t,e,i){var n="touch"==i.pointerType,r="mouse"==i.pointerType;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)q.call(this,e,i);else if(r&&Z.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ne=k(vt.style,"touchAction"),re=ne!==a,oe="auto",se="manipulation",ae="none",he="pan-x",le="pan-y",ue=function(){if(!re)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){t[i]=!e||r.CSS.supports("touch-action",i)}),t}();K.prototype={set:function(t){"compute"==t&&(t=this.compute()),re&&this.manager.element.style&&ue[t]&&(this.manager.element.style[ne]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return u(this.manager.recognizers,function(e){p(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Q(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,r=b(n,ae)&&!ue[ae],o=b(n,le)&&!ue[le],s=b(n,he)&&!ue[he];if(r){var a=1===t.pointers.length,h=t.distance<2,l=t.deltaTime<250;if(a&&h&&l)return}return s&&o?void 0:r||o&&i&zt||s&&i&Bt?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var de=1,ce=2,fe=4,pe=8,me=pe,ve=16;J.prototype={defaults:{},set:function(t){return pt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(l(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=it(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return l(t,"dropRecognizeWith",this)?this:(t=it(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(l(t,"requireFailure",this))return this;var e=this.requireFail;return t=it(t,this),-1===w(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(l(t,"dropRequireFailure",this))return this;t=it(t,this);var e=w(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(e,t)}var i=this,n=this.state;n<pe&&e(i.options.event+tt(n)),e(i.options.event),t.additionalEvent&&e(t.additionalEvent),n>=pe&&e(i.options.event+tt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|de)))return!1;t++}return!0},recognize:function(t){var e=pt({},t);if(!p(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(me|ve|32)&&(this.state=de),this.state=this.process(e),this.state&(ce|fe|pe|ve)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},c(nt,J,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(ce|fe),r=this.attrTest(t);return n&&(i&Dt||!r)?e|ve:n||r?i&At?e|pe:e&ce?e|fe:ce:32}}),c(rt,nt,{defaults:{event:"pan",threshold:10,pointers:1,direction:jt},getTouchAction:function(){var t=this.options.direction,e=[];return t&zt&&e.push(le),t&Bt&&e.push(he),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(e.direction&zt?(r=0===o?It:o<0?Rt:Lt,i=o!=this.pX,n=Math.abs(t.deltaX)):(r=0===s?It:s<0?Nt:Ft,i=s!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return nt.prototype.attrTest.call(this,t)&&(this.state&ce||!(this.state&ce)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=et(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),c(ot,nt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ae]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ce)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),c(st,J,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[oe]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(At|Dt)&&!r)this.reset();else if(t.eventType&Ot)this.reset(),this._timer=h(function(){this.state=me,this.tryEmit()},e.time,this);else if(t.eventType&At)return me;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===me&&(t&&t.eventType&At?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=_t(),this.manager.emit(this.options.event,this._input)))}}),c(at,nt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ae]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ce)}}),c(ht,nt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:zt|Bt,pointers:1},getTouchAction:function(){return rt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(zt|Bt)?e=t.overallVelocity:i&zt?e=t.overallVelocityX:i&Bt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&bt(e)>this.options.velocity&&t.eventType&At},emit:function(t){var e=et(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),c(lt,J,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[se]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Ot&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=At)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||F(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=h(function(){this.state=me,this.tryEmit()},e.interval,this),ce):me}return 32},failTimeout:function(){return this._timer=h(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==me&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ut.VERSION="2.0.7",ut.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[at,{enable:!1}],[ot,{enable:!1},["rotate"]],[ht,{direction:zt}],[rt,{direction:zt},["swipe"]],[lt],[lt,{event:"doubletap",taps:2},["tap"]],[st]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};dt.prototype={set:function(t){return pt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&me)&&(r=e.curRecognizer=null);for(var o=0;o<n.length;)i=n[o],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(ce|fe|pe)&&(r=e.curRecognizer=i),o++}},get:function(t){if(t instanceof J)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(l(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(l(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=w(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var i=this.handlers;return u(_(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==a){var i=this.handlers;return u(_(t),function(t){e?i[t]&&i[t].splice(w(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&ft(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&ct(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},pt(ut,{INPUT_START:Ot,INPUT_MOVE:Pt,INPUT_END:At,INPUT_CANCEL:Dt,STATE_POSSIBLE:de,STATE_BEGAN:ce,STATE_CHANGED:fe,STATE_ENDED:pe,STATE_RECOGNIZED:me,STATE_CANCELLED:ve,STATE_FAILED:32,DIRECTION_NONE:It,DIRECTION_LEFT:Rt,DIRECTION_RIGHT:Lt,DIRECTION_UP:Nt,DIRECTION_DOWN:Ft,DIRECTION_HORIZONTAL:zt,DIRECTION_VERTICAL:Bt,DIRECTION_ALL:jt,Manager:dt,Input:T,TouchAction:K,TouchInput:W,MouseInput:U,PointerEventInput:H,TouchMouseInput:$,SingleTouchInput:V,Recognizer:J,AttrRecognizer:nt,Tap:lt,Pan:rt,Swipe:ht,Pinch:ot,Rotate:at,Press:st,on:v,off:g,each:u,merge:xt,extend:wt,assign:pt,inherit:c,bindFn:f,prefixed:k}),("undefined"!==typeof r?r:"undefined"!==typeof self?self:{}).Hammer=ut,(n=function(){return ut}.call(e,i,e,t))!==a&&(t.exports=n)}(window,document)},function(t,e,i){e.util=i(2),e.DOMutil=i(14),e.DataSet=i(11),e.DataView=i(12),e.Queue=i(43),e.Timeline=i(178),e.Graph2d=i(180),e.timeline={Core:i(65),DateUtil:i(36),Range:i(64),stack:i(100),TimeStep:i(66),components:{items:{Item:i(38),BackgroundItem:i(103),BoxItem:i(101),PointItem:i(102),RangeItem:i(70)},BackgroundGroup:i(69),Component:i(16),CurrentTime:i(67),CustomTime:i(46),DataAxis:i(107),DataScale:i(108),GraphGroup:i(109),Group:i(68),ItemSet:i(99),Legend:i(112),LineGraph:i(106),TimeAxis:i(45)}},e.moment=i(9),e.Hammer=i(10),e.keycharm=i(35)},function(t,e,i){function n(t,e,i,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!(Array.isArray(i)||i instanceof l||i instanceof u)&&i instanceof Object){var o=r;r=i,i=o}r&&r.throttleRedraw&&console.warn('Timeline option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var s=this;if(this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:a,width:null,height:null,maxHeight:null,minHeight:null},this.options=h.deepExtend({},this.defaultOptions),this._create(t),!r||r&&"undefined"==typeof r.rtl){this.dom.root.style.visibility="hidden";for(var c,m=this.dom.root;!c&&m;)c=window.getComputedStyle(m,null).direction,m=m.parentElement;this.options.rtl=c&&"rtl"==c.toLowerCase()}else this.options.rtl=r.rtl;this.options.rollingMode=r&&r.rollingMode,this.options.onInitialDrawComplete=r&&r.onInitialDrawComplete,this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale:function(){return s.timeAxis.step.scale},getStep:function(){return s.timeAxis.step.step},toScreen:s._toScreen.bind(s),toGlobalScreen:s._toGlobalScreen.bind(s),toTime:s._toTime.bind(s),toGlobalTime:s._toGlobalTime.bind(s)}},this.range=new d(this.body,this.options),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new f(this.body,this.options),this.timeAxis2=null,this.components.push(this.timeAxis),this.currentTime=new p(this.body,this.options),this.components.push(this.currentTime),this.itemSet=new v(this.body,this.options),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null,this.dom.root.onclick=function(t){s.emit("click",s.getEventProperties(t))},this.dom.root.ondblclick=function(t){s.emit("doubleClick",s.getEventProperties(t))},this.dom.root.oncontextmenu=function(t){s.emit("contextmenu",s.getEventProperties(t))},this.dom.root.onmouseover=function(t){s.emit("mouseOver",s.getEventProperties(t))},window.PointerEvent?(this.dom.root.onpointerdown=function(t){s.emit("mouseDown",s.getEventProperties(t))},this.dom.root.onpointermove=function(t){s.emit("mouseMove",s.getEventProperties(t))},this.dom.root.onpointerup=function(t){s.emit("mouseUp",s.getEventProperties(t))}):(this.dom.root.onmousemove=function(t){s.emit("mouseMove",s.getEventProperties(t))},this.dom.root.onmousedown=function(t){s.emit("mouseDown",s.getEventProperties(t))},this.dom.root.onmouseup=function(t){s.emit("mouseUp",s.getEventProperties(t))}),this.initialFitDone=!1,this.on("changed",function(){if(null!=this.itemsData&&!this.options.rollingMode){if(!s.initialFitDone)if(s.initialFitDone=!0,void 0!=s.options.start||void 0!=s.options.end){if(void 0==s.options.start||void 0==s.options.end)var t=s.getItemRange();var e=void 0!=s.options.start?s.options.start:t.min,i=void 0!=s.options.end?s.options.end:t.max;s.setWindow(e,i,{animation:!1})}else s.fit({animation:!1});!s.initialDrawDone&&s.initialRangeChangeDone&&(s.initialDrawDone=!0,s.dom.root.style.visibility="visible",s.options.onInitialDrawComplete&&setTimeout(function(){return s.options.onInitialDrawComplete()},0))}}),r&&this.setOptions(r),i&&this.setGroups(i),e&&this.setItems(e),this._redraw()}function r(t){return h.convert(t.data.start,"Date").valueOf()}function o(t){var e=void 0!=t.data.end?t.data.end:t.data.start;return h.convert(e,"Date").valueOf()}function s(t,e){var i=t.props.leftContainer.height,n=t.props.left.height,r=e.parent,o=r.top,s=!0,a=t.timeAxis.options.orientation.axis,h=function(){return"bottom"==a?r.height-e.top-e.height:e.top},l=-1*t._getScrollTop(),u=o+h(),d=e.height;return u<l?o+i<=o+h()+d&&(o+=h()-t.itemSet.options.margin.item.vertical):u+d>l+i?o+=h()+d-i+t.itemSet.options.margin.item.vertical:s=!1,o=Math.min(o,n-i),{shouldScroll:s,scrollOffset:o,itemTop:u}}var a=i(9),h=i(2),l=i(11),u=i(12),d=i(64),c=i(65),f=i(45),p=i(67),m=i(46),v=i(99),g=i(15).printStyle,y=i(105).allOptions,b=i(105).configureOptions,_=i(71).default,w=i(15).default;n.prototype=new c,n.prototype._createConfigurator=function(){return new _(this,this.dom.container,b)},n.prototype.redraw=function(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()},n.prototype.setOptions=function(t){if(!0===w.validate(t,y)&&console.log("%cErrors have been found in the supplied options object.",g),c.prototype.setOptions.call(this,t),"type"in t&&t.type!==this.options.type){this.options.type=t.type;var e=this.itemsData;if(e){var i=this.getSelection();this.setItems(null),this.setItems(e),this.setSelection(i)}}},n.prototype.setItems=function(t){var e;e=t?t instanceof l||t instanceof u?t:new l(t,{type:{start:"Date",end:"Date"}}):null,this.itemsData=e,this.itemSet&&this.itemSet.setItems(e)},n.prototype.setGroups=function(t){var e;if(t){var i=function(t){return!1!==t.visible};e=t instanceof l||t instanceof u?new u(t,{filter:i}):new l(t.filter(i))}else e=null;this.groupsData=e,this.itemSet.setGroups(e)},n.prototype.setData=function(t){t&&t.groups&&this.setGroups(t.groups),t&&t.items&&this.setItems(t.items)},n.prototype.setSelection=function(t,e){this.itemSet&&this.itemSet.setSelection(t),e&&e.focus&&this.focus(t,e)},n.prototype.getSelection=function(){return this.itemSet&&this.itemSet.getSelection()||[]},n.prototype.focus=function(t,e){if(this.itemsData&&void 0!=t){var i=Array.isArray(t)?t:[t],n=this.itemsData.getDataSet().get(i,{type:{start:"Date",end:"Date"}}),r=null,o=null;if(n.forEach(function(t){var e=t.start.valueOf(),i="end"in t?t.end.valueOf():t.start.valueOf();(null===r||e<r)&&(r=e),(null===o||i>o)&&(o=i)}),null!==r&&null!==o){var a=this,h=this.itemSet.items[i[0]],l=-1*this._getScrollTop(),u=null,d=function(t,e,i){var n=s(a,h);if(u||(u=n),u.itemTop!=n.itemTop||u.shouldScroll){u.itemTop!=n.itemTop&&n.shouldScroll&&(u=n,l=-1*a._getScrollTop());var r=l,o=u.scrollOffset,d=i?o:r+(o-r)*t;a._setScrollTop(-d),e||a._redraw()}},c=function(){var t=s(a,h);t.shouldScroll&&t.itemTop!=u.itemTop&&(a._setScrollTop(-t.scrollOffset),a._redraw())},f=function(){c(),setTimeout(c,100)},p=(r+o)/2,m=Math.max(this.range.end-this.range.start,1.1*(o-r)),v=!e||void 0===e.animation||e.animation;v||(u={shouldScroll:!1,scrollOffset:-1,itemTop:-1}),this.range.setRange(p-m/2,p+m/2,{animation:v},f,d)}}},n.prototype.fit=function(t,e){var i,n=!t||void 0===t.animation||t.animation,r=this.itemsData&&this.itemsData.getDataSet();1===r.length&&void 0===r.get()[0].end?(i=this.getDataRange(),this.moveTo(i.min.valueOf(),{animation:n},e)):(i=this.getItemRange(),this.range.setRange(i.min,i.max,{animation:n},e))},n.prototype.getItemRange=function(){var t=this.getDataRange(),e=null!==t.min?t.min.valueOf():null,i=null!==t.max?t.max.valueOf():null,n=null,s=null;if(null!=e&&null!=i){var a=i-e;a<=0&&(a=10);var l=a/this.props.center.width,u={},d=0;h.forEach(this.itemSet.items,function(t,e){if(t.groupShowing){u[e]=t.redraw(!0),d=u[e].length}});if(d>0)for(var c=0;c<d;c++)h.forEach(u,function(t){t[c]()});if(h.forEach(this.itemSet.items,function(t){var a,h,u=r(t),d=o(t);this.options.rtl?(a=u-(t.getWidthRight()+10)*l,h=d+(t.getWidthLeft()+10)*l):(a=u-(t.getWidthLeft()+10)*l,h=d+(t.getWidthRight()+10)*l),a<e&&(e=a,n=t),h>i&&(i=h,s=t)}.bind(this)),n&&s){var f=n.getWidthLeft()+10,p=s.getWidthRight()+10,m=this.props.center.width-f-p;m>0&&(this.options.rtl?(e=r(n)-p*a/m,i=o(s)+f*a/m):(e=r(n)-f*a/m,i=o(s)+p*a/m))}}return{min:null!=e?new Date(e):null,max:null!=i?new Date(i):null}},n.prototype.getDataRange=function(){var t=null,e=null,i=this.itemsData&&this.itemsData.getDataSet();return i&&i.forEach(function(i){var n=h.convert(i.start,"Date").valueOf(),r=h.convert(void 0!=i.end?i.end:i.start,"Date").valueOf();(null===t||n<t)&&(t=n),(null===e||r>e)&&(e=r)}),{min:null!=t?new Date(t):null,max:null!=e?new Date(e):null}},n.prototype.getEventProperties=function(t){var e,i=t.center?t.center.x:t.clientX,n=t.center?t.center.y:t.clientY;e=this.options.rtl?h.getAbsoluteRight(this.dom.centerContainer)-i:i-h.getAbsoluteLeft(this.dom.centerContainer);var r=n-h.getAbsoluteTop(this.dom.centerContainer),o=this.itemSet.itemFromTarget(t),s=this.itemSet.groupFromTarget(t),a=m.customTimeFromTarget(t),l=this.itemSet.options.snap||null,u=this.body.util.getScale(),d=this.body.util.getStep(),c=this._toTime(e),f=l?l(c,u,d):c,p=h.getTarget(t),v=null;return null!=o?v="item":null!=a?v="custom-time":h.hasParent(p,this.timeAxis.dom.foreground)?v="axis":this.timeAxis2&&h.hasParent(p,this.timeAxis2.dom.foreground)?v="axis":h.hasParent(p,this.itemSet.dom.labelSet)?v="group-label":h.hasParent(p,this.currentTime.bar)?v="current-time":h.hasParent(p,this.dom.center)&&(v="background"),{event:t,item:o?o.id:null,group:s?s.groupId:null,what:v,pageX:t.srcEvent?t.srcEvent.pageX:t.pageX,pageY:t.srcEvent?t.srcEvent.pageY:t.pageY,x:e,y:r,time:c,snappedTime:f}},n.prototype.toggleRollingMode=function(){this.range.rolling?this.range.stopRolling():(void 0==this.options.rollingMode&&this.setOptions(this.options),this.range.startRolling())},t.exports=n},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(19),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(10),d=i(37),c=i(2),f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,a.default)(this,t),this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return(0,l.default)(t,[{key:"insertTo",value:function(t){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if("function"!==typeof t)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=t}},{key:"setCloseCallback",value:function(t){if("function"!==typeof t)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=t}},{key:"_isColorString",value:function(t){var e={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};if("string"===typeof t)return e[t]}},{key:"setColor",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("none"!==t){var i=void 0,n=this._isColorString(t);if(void 0!==n&&(t=n),!0===c.isString(t)){if(!0===c.isValidRGB(t)){var r=t.substr(4).substr(0,t.length-5).split(",");i={r:r[0],g:r[1],b:r[2],a:1}}else if(!0===c.isValidRGBA(t)){var s=t.substr(5).substr(0,t.length-6).split(",");i={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(!0===c.isValidHex(t)){var a=c.hexToRGB(t);i={r:a.r,g:a.g,b:a.b,a:1}}}else if(t instanceof Object&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b){var h=void 0!==t.a?t.a:"1.0";i={r:t.r,g:t.g,b:t.b,a:h}}if(void 0===i)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+(0,o.default)(t));this._setColor(i,e)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this;!0===(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.previousColor=c.extend({},this.color)),!0===this.applied&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout(function(){void 0!==t.closeCallback&&(t.closeCallback(),t.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){!0===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this.initialColor=c.extend({},t)),this.color=t;var e=c.RGBToHSV(t.r,t.g,t.b),i=2*Math.PI,n=this.r*e.s,r=this.centerCoordinates.x+n*Math.sin(i*e.h),o=this.centerCoordinates.y+n*Math.cos(i*e.h);this.colorPickerSelector.style.left=r-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=o-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var e=c.RGBToHSV(this.color.r,this.color.g,this.color.b);e.v=t/100;var i=c.HSVToRGB(e.h,e.s,e.v);i.a=this.color.a,this.color=i,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.color,e=c.RGBToHSV(t.r,t.g,t.b),i=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var n=this.colorPickerCanvas.clientWidth,r=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,n,r),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-e.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),i.fill(),this.brightnessRange.value=100*e.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var t=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(e)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(t){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(t){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var i=this;this.opacityRange.onchange=function(){i._setOpacity(this.value)},this.opacityRange.oninput=function(){i._setOpacity(this.value)},this.brightnessRange.onchange=function(){i._setBrightness(this.value)},this.brightnessRange.oninput=function(){i._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new u(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),d.onTouch(this.hammer,function(e){t._moveSelector(e)}),this.hammer.on("tap",function(e){t._moveSelector(e)}),this.hammer.on("panstart",function(e){t._moveSelector(e)}),this.hammer.on("panmove",function(e){t._moveSelector(e)}),this.hammer.on("panend",function(e){t._moveSelector(e)})}},{key:"_generateHueCircle",value:function(){if(!1===this.generated){var t=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var e=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,e,i);var n=void 0,r=void 0,o=void 0,s=void 0;this.centerCoordinates={x:.5*e,y:.5*i},this.r=.49*e;var a=2*Math.PI/360,h=1/this.r,l=void 0;for(o=0;o<360;o++)for(s=0;s<this.r;s++)n=this.centerCoordinates.x+s*Math.sin(a*o),r=this.centerCoordinates.y+s*Math.cos(a*o),l=c.HSVToRGB(o*(1/360),s*h,1),t.fillStyle="rgb("+l.r+","+l.g+","+l.b+")",t.fillRect(n-.5,r-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,e,i)}this.generated=!0}},{key:"_moveSelector",value:function(t){var e=this.colorPickerDiv.getBoundingClientRect(),i=t.center.x-e.left,n=t.center.y-e.top,r=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,s=i-o,a=n-r,h=Math.atan2(s,a),l=.98*Math.min(Math.sqrt(s*s+a*a),o),u=Math.cos(h)*l+r,d=Math.sin(h)*l+o;this.colorPickerSelector.style.top=u-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=d-.5*this.colorPickerSelector.clientWidth+"px";var f=h/(2*Math.PI);f=f<0?f+1:f;var p=l/this.r,m=c.RGBToHSV(this.color.r,this.color.g,this.color.b);m.h=f,m.s=p;var v=c.HSVToRGB(m.h,m.s,m.v);v.a=this.color.a,this.color=v,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),t}();e.default=f},function(t,e,i){function n(t,e,i,n){if(!(Array.isArray(i)||i instanceof s||i instanceof a)&&i instanceof Object){var l=n;n=i,i=l}n&&n.throttleRedraw&&console.warn('Graph2d option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var c=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:r,width:null,height:null,maxHeight:null,minHeight:null},this.options=o.deepExtend({},this.defaultOptions),this._create(t),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{toScreen:c._toScreen.bind(c),toGlobalScreen:c._toGlobalScreen.bind(c),toTime:c._toTime.bind(c),toGlobalTime:c._toGlobalTime.bind(c)}},this.range=new h(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new u(this.body),this.components.push(this.timeAxis),this.currentTime=new d(this.body),this.components.push(this.currentTime),this.linegraph=new f(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(t){c.emit("click",c.getEventProperties(t))}),this.on("doubletap",function(t){c.emit("doubleClick",c.getEventProperties(t))}),this.dom.root.oncontextmenu=function(t){c.emit("contextmenu",c.getEventProperties(t))},n&&this.setOptions(n),i&&this.setGroups(i),e&&this.setItems(e),this._redraw()}var r=i(9),o=i(2),s=i(11),a=i(12),h=i(64),l=i(65),u=i(45),d=i(67),c=i(46),f=i(106),p=i(15).printStyle,m=i(113).allOptions,v=i(113).configureOptions,g=i(71).default,y=i(15).default;n.prototype=new l,n.prototype.setOptions=function(t){!0===y.validate(t,m)&&console.log("%cErrors have been found in the supplied options object.",p),l.prototype.setOptions.call(this,t)},n.prototype.setItems=function(t){var e,i=null==this.itemsData;if(e=t?t instanceof s||t instanceof a?t:new s(t,{type:{start:"Date",end:"Date"}}):null,this.itemsData=e,this.linegraph&&this.linegraph.setItems(e),i)if(void 0!=this.options.start||void 0!=this.options.end){var n=void 0!=this.options.start?this.options.start:null,r=void 0!=this.options.end?this.options.end:null;this.setWindow(n,r,{animation:!1})}else this.fit({animation:!1})},n.prototype.setGroups=function(t){var e;e=t?t instanceof s||t instanceof a?t:new s(t):null,this.groupsData=e,this.linegraph.setGroups(e)},n.prototype.getLegend=function(t,e,i){return void 0===e&&(e=15),void 0===i&&(i=15),void 0!==this.linegraph.groups[t]?this.linegraph.groups[t].getLegend(e,i):"cannot find group:'"+t+"'"},n.prototype.isGroupVisible=function(t){return void 0!==this.linegraph.groups[t]&&(this.linegraph.groups[t].visible&&(void 0===this.linegraph.options.groups.visibility[t]||1==this.linegraph.options.groups.visibility[t]))},n.prototype.getDataRange=function(){var t=null,e=null;for(var i in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(i)&&1==this.linegraph.groups[i].visible)for(var n=0;n<this.linegraph.groups[i].itemsData.length;n++){var r=this.linegraph.groups[i].itemsData[n],s=o.convert(r.x,"Date").valueOf();t=null==t?s:t>s?s:t,e=null==e?s:e<s?s:e}return{min:null!=t?new Date(t):null,max:null!=e?new Date(e):null}},n.prototype.getEventProperties=function(t){var e=t.center?t.center.x:t.clientX,i=t.center?t.center.y:t.clientY,n=e-o.getAbsoluteLeft(this.dom.centerContainer),r=i-o.getAbsoluteTop(this.dom.centerContainer),s=this._toTime(n),a=c.customTimeFromTarget(t),h=o.getTarget(t),l=null;o.hasParent(h,this.timeAxis.dom.foreground)?l="axis":this.timeAxis2&&o.hasParent(h,this.timeAxis2.dom.foreground)?l="axis":o.hasParent(h,this.linegraph.yAxisLeft.dom.frame)?l="data-axis":o.hasParent(h,this.linegraph.yAxisRight.dom.frame)?l="data-axis":o.hasParent(h,this.linegraph.legendLeft.dom.frame)?l="legend":o.hasParent(h,this.linegraph.legendRight.dom.frame)?l="legend":null!=a?l="custom-time":o.hasParent(h,this.currentTime.bar)?l="current-time":o.hasParent(h,this.dom.center)&&(l="background");var u=[],d=this.linegraph.yAxisLeft,f=this.linegraph.yAxisRight;return!d.hidden&&this.itemsData.length>0&&u.push(d.screenToValue(r)),!f.hidden&&this.itemsData.length>0&&u.push(f.screenToValue(r)),{event:t,what:l,pageX:t.srcEvent?t.srcEvent.pageX:t.pageX,pageY:t.srcEvent?t.srcEvent.pageY:t.pageY,x:n,y:r,time:s,value:u}},n.prototype._createConfigurator=function(){return new g(this,this.dom.container,v)},t.exports=n},function(t,e,i){e.util=i(2),e.DOMutil=i(14),e.DataSet=i(11),e.DataView=i(12),e.Queue=i(43),e.Network=i(182),e.network={Images:i(116),dotparser:i(114),gephiParser:i(115),allOptions:i(122)},e.network.convertDot=function(t){return e.network.dotparser.DOTToGraph(t)},e.network.convertGephi=function(t,i){return e.network.gephiParser.parseGephi(t,i)},e.moment=i(9),e.Hammer=i(10),e.keycharm=i(35)},function(t,e,i){function n(t,e,i){var r=this;if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:l,clickToUse:!1},o.extend(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this),once:this.once.bind(this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}}},this.bindEventListeners(),this.images=new u(function(){return r.body.emitter.emit("_requestRedraw")}),this.groups=new d,this.canvas=new g(this.body),this.selectionHandler=new _(this.body,this.canvas),this.interactionHandler=new b(this.body,this.canvas,this.selectionHandler),this.view=new y(this.body,this.canvas),this.renderer=new v(this.body,this.canvas),this.physics=new p(this.body),this.layoutEngine=new w(this.body),this.clustering=new m(this.body),this.manipulation=new x(this.body,this.canvas,this.selectionHandler),this.nodesHandler=new c(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new f(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new P(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(i),this.setData(e)}i(183);var r=i(44),o=i(2),s=i(114),a=i(115),h=i(97),l=i(184),u=i(116).default,d=i(186).default,c=i(187).default,f=i(214).default,p=i(220).default,m=i(227).default,v=i(229).default,g=i(230).default,y=i(231).default,b=i(232).default,_=i(234).default,w=i(235).default,x=i(237).default,S=i(71).default,k=i(15).default,E=i(15),M=E.printStyle,T=i(122),C=T.allOptions,O=T.configureOptions,P=i(238).default;r(n.prototype),n.prototype.setOptions=function(t){var e=this;if(void 0!==t){!0===k.validate(t,C)&&console.log("%cErrors have been found in the supplied options object.",M);var i=["locale","locales","clickToUse"];if(o.selectiveDeepExtend(i,this.options,t),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),void 0!==t.groups&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new S(this,this.body.container,O,this.canvas.pixelRatio)),this.configurator.setOptions(t.configure)),this.configurator&&!0===this.configurator.options.enabled){var n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};o.deepExtend(n.nodes,this.nodesHandler.options),o.deepExtend(n.edges,this.edgesHandler.options),o.deepExtend(n.layout,this.layoutEngine.options),o.deepExtend(n.interaction,this.selectionHandler.options),o.deepExtend(n.interaction,this.renderer.options),o.deepExtend(n.interaction,this.interactionHandler.options),o.deepExtend(n.manipulation,this.manipulation.options),o.deepExtend(n.physics,this.physics.options),o.deepExtend(n.global,this.canvas.options),o.deepExtend(n.global,this.options),this.configurator.setModuleOptions(n)}void 0!==t.clickToUse?!0===t.clickToUse?void 0===this.activator&&(this.activator=new h(this.canvas.frame),this.activator.on("change",function(){e.body.emitter.emit("activate")})):(void 0!==this.activator&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}},n.prototype._updateVisibleIndices=function(){var t=this.body.nodes,e=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(var i in t)t.hasOwnProperty(i)&&(this.clustering._isClusteredNode(i)||!1!==t[i].options.hidden||this.body.nodeIndices.push(t[i].id));for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],o=t[r.fromId],s=t[r.toId],a=void 0!==o&&void 0!==s,h=!this.clustering._isClusteredEdge(n)&&!1===r.options.hidden&&a&&!1===o.options.hidden&&!1===s.options.hidden;h&&this.body.edgeIndices.push(r.id)}},n.prototype.bindEventListeners=function(){var t=this;this.body.emitter.on("_dataChanged",function(){t.edgesHandler._updateState(),t.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",function(){t.clustering._updateState(),t._updateVisibleIndices(),t._updateValueRange(t.body.nodes),t._updateValueRange(t.body.edges),t.body.emitter.emit("startSimulation"),t.body.emitter.emit("_requestRedraw")})},n.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.log("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var e=s.DOTToGraph(t.dot);return void this.setData(e)}if(t&&t.gephi){console.log("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var i=a.parseGephi(t.gephi);return void this.setData(i)}this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")},n.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(var t in this.body.nodes)this.body.nodes.hasOwnProperty(t)&&delete this.body.nodes[t];for(var e in this.body.edges)this.body.edges.hasOwnProperty(e)&&delete this.body.edges[e];o.recursiveDOMDelete(this.body.container)},n.prototype._updateValueRange=function(t){var e,i=void 0,n=void 0,r=0;for(e in t)if(t.hasOwnProperty(e)){var o=t[e].getValue();void 0!==o&&(i=void 0===i?o:Math.min(o,i),n=void 0===n?o:Math.max(o,n),r+=o)}if(void 0!==i&&void 0!==n)for(e in t)t.hasOwnProperty(e)&&t[e].setValueRange(i,n,r)},n.prototype.isActive=function(){return!this.activator||this.activator.active},n.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)},n.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)},n.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)},n.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)},n.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)},n.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)},n.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)},n.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)},n.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)},n.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)},n.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)},n.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)},n.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)},n.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)},n.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)},n.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)},n.prototype.editNodeMode=function(){return console.log("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)},n.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)},n.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)},n.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)},n.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)},n.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)},n.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)},n.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)},n.prototype.getConnectedNodes=function(t){return void 0!==this.body.nodes[t]?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)},n.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)},n.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)},n.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)},n.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)},n.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)},n.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)},n.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodes.apply(this.selectionHandler,arguments)},n.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdges.apply(this.selectionHandler,arguments)},n.prototype.getNodeAt=function(){var t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},n.prototype.getEdgeAt=function(){var t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},n.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)},n.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)},n.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.redraw()},n.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)},n.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)},n.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)},n.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)},n.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)},n.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)},n.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)},n.prototype.getOptionsFromConfigurator=function(){var t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t},t.exports=n},function(t,e,i){"undefined"!==typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.circle=function(t,e,i){this.beginPath(),this.arc(t,e,i,0,2*Math.PI,!1),this.closePath()},CanvasRenderingContext2D.prototype.square=function(t,e,i){this.beginPath(),this.rect(t-i,e-i,2*i,2*i),this.closePath()},CanvasRenderingContext2D.prototype.triangle=function(t,e,i){this.beginPath(),i*=1.15,e+=.275*i;var n=2*i,r=n/2,o=Math.sqrt(3)/6*n,s=Math.sqrt(n*n-r*r);this.moveTo(t,e-(s-o)),this.lineTo(t+r,e+o),this.lineTo(t-r,e+o),this.lineTo(t,e-(s-o)),this.closePath()},CanvasRenderingContext2D.prototype.triangleDown=function(t,e,i){this.beginPath(),i*=1.15,e-=.275*i;var n=2*i,r=n/2,o=Math.sqrt(3)/6*n,s=Math.sqrt(n*n-r*r);this.moveTo(t,e+(s-o)),this.lineTo(t+r,e-o),this.lineTo(t-r,e-o),this.lineTo(t,e+(s-o)),this.closePath()},CanvasRenderingContext2D.prototype.star=function(t,e,i){this.beginPath(),i*=.82,e+=.1*i;for(var n=0;n<10;n++){var r=n%2===0?1.3*i:.5*i;this.lineTo(t+r*Math.sin(2*n*Math.PI/10),e-r*Math.cos(2*n*Math.PI/10))}this.closePath()},CanvasRenderingContext2D.prototype.diamond=function(t,e,i){this.beginPath(),this.lineTo(t,e+i),this.lineTo(t+i,e),this.lineTo(t,e-i),this.lineTo(t-i,e),this.closePath()},CanvasRenderingContext2D.prototype.roundRect=function(t,e,i,n,r){var o=Math.PI/180;i-2*r<0&&(r=i/2),n-2*r<0&&(r=n/2),this.beginPath(),this.moveTo(t+r,e),this.lineTo(t+i-r,e),this.arc(t+i-r,e+r,r,270*o,360*o,!1),this.lineTo(t+i,e+n-r),this.arc(t+i-r,e+n-r,r,0,90*o,!1),this.lineTo(t+r,e+n),this.arc(t+r,e+n-r,r,90*o,180*o,!1),this.lineTo(t,e+r),this.arc(t+r,e+r,r,180*o,270*o,!1),this.closePath()},CanvasRenderingContext2D.prototype.ellipse_vis=function(t,e,i,n){var r=i/2*.5522848,o=n/2*.5522848,s=t+i,a=e+n,h=t+i/2,l=e+n/2;this.beginPath(),this.moveTo(t,l),this.bezierCurveTo(t,l-o,h-r,e,h,e),this.bezierCurveTo(h+r,e,s,l-o,s,l),this.bezierCurveTo(s,l+o,h+r,a,h,a),this.bezierCurveTo(h-r,a,t,l+o,t,l),this.closePath()},CanvasRenderingContext2D.prototype.database=function(t,e,i,n){var r=i,o=n*(1/3),s=r/2*.5522848,a=o/2*.5522848,h=t+r,l=e+o,u=t+r/2,d=e+o/2,c=e+(n-o/2),f=e+n;this.beginPath(),this.moveTo(h,d),this.bezierCurveTo(h,d+a,u+s,l,u,l),this.bezierCurveTo(u-s,l,t,d+a,t,d),this.bezierCurveTo(t,d-a,u-s,e,u,e),this.bezierCurveTo(u+s,e,h,d-a,h,d),this.lineTo(h,c),this.bezierCurveTo(h,c+a,u+s,f,u,f),this.bezierCurveTo(u-s,f,t,c+a,t,c),this.lineTo(t,d)},CanvasRenderingContext2D.prototype.dashedLine=function(t,e,i,n,r){this.beginPath(),this.moveTo(t,e);for(var o=r.length,s=i-t,a=n-e,h=a/s,l=Math.sqrt(s*s+a*a),u=0,d=!0,c=0,f=r[0];l>=.1;)f=r[u++%o],f>l&&(f=l),c=Math.sqrt(f*f/(1+h*h)),c=s<0?-c:c,t+=c,e+=h*c,!0===d?this.lineTo(t,e):this.moveTo(t,e),l-=f,d=!d},CanvasRenderingContext2D.prototype.hexagon=function(t,e,i){this.beginPath();var n=2*Math.PI/6;this.moveTo(t+i,e);for(var r=1;r<6;r++)this.lineTo(t+i*Math.cos(n*r),e+i*Math.sin(n*r));this.closePath()})},function(t,e,i){e.en={edit:"Edit",del:"Delete selected",back:"Back",addNode:"Add Node",addEdge:"Add Edge",editNode:"Edit Node",editEdge:"Edit Edge",addDescription:"Click in an empty space to place a new node.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",createEdgeError:"Cannot link edges to a cluster.",deleteClusterError:"Clusters cannot be deleted.",editClusterError:"Clusters cannot be edited."},e.en_EN=e.en,e.en_US=e.en,e.de={edit:"Editieren",del:"L\xf6sche Auswahl",back:"Zur\xfcck",addNode:"Knoten hinzuf\xfcgen",addEdge:"Kante hinzuf\xfcgen",editNode:"Knoten editieren",editEdge:"Kante editieren",addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",createEdgeError:"Es ist nicht m\xf6glich, Kanten mit Clustern zu verbinden.",deleteClusterError:"Cluster k\xf6nnen nicht gel\xf6scht werden.",editClusterError:"Cluster k\xf6nnen nicht editiert werden."},e.de_DE=e.de,e.es={edit:"Editar",del:"Eliminar selecci\xf3n",back:"\xc1tras",addNode:"A\xf1adir nodo",addEdge:"A\xf1adir arista",editNode:"Editar nodo",editEdge:"Editar arista",addDescription:"Haga clic en un lugar vac\xedo para colocar un nuevo nodo.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",createEdgeError:"No se puede conectar una arista a un grupo.",deleteClusterError:"No es posible eliminar grupos.",editClusterError:"No es posible editar grupos."},e.es_ES=e.es,e.it={edit:"Modifica",del:"Cancella la selezione",back:"Indietro",addNode:"Aggiungi un nodo",addEdge:"Aggiungi un vertice",editNode:"Modifica il nodo",editEdge:"Modifica il vertice",addDescription:"Clicca per aggiungere un nuovo nodo",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",createEdgeError:"Non si possono collegare vertici ad un cluster",deleteClusterError:"I cluster non possono essere cancellati",editClusterError:"I clusters non possono essere modificati."},e.it_IT=e.it,e.nl={edit:"Wijzigen",del:"Selectie verwijderen",back:"Terug",addNode:"Node toevoegen",addEdge:"Link toevoegen",editNode:"Node wijzigen",editEdge:"Link wijzigen",addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",createEdgeError:"Kan geen link maken naar een cluster.",deleteClusterError:"Clusters kunnen niet worden verwijderd.",editClusterError:"Clusters kunnen niet worden aangepast."},e.nl_NL=e.nl,e.nl_BE=e.nl,e["pt-br"]={edit:"Editar",del:"Remover selecionado",back:"Voltar",addNode:"Adicionar n\xf3",addEdge:"Adicionar aresta",editNode:"Editar n\xf3",editEdge:"Editar aresta",addDescription:"Clique em um espa\xe7o em branco para adicionar um novo n\xf3",edgeDescription:"Clique em um n\xf3 e arraste a aresta at\xe9 outro n\xf3 para conect\xe1-los",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n\xf3 para conect\xe1-los",createEdgeError:"N\xe3o foi poss\xedvel linkar arestas a um cluster.",deleteClusterError:"Clusters n\xe3o puderam ser removidos.",editClusterError:"Clusters n\xe3o puderam ser editados."},e["pt-BR"]=e["pt-br"],e.pt_BR=e["pt-br"],e.pt_br=e["pt-br"],e.ru={edit:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",del:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0435",back:"\u041d\u0430\u0437\u0430\u0434",addNode:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0437\u0435\u043b",addEdge:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0435\u0431\u0440\u043e",editNode:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0443\u0437\u0435\u043b",editEdge:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0440\u0435\u0431\u0440\u043e",addDescription:"\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u0432 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0435 \u043c\u0435\u0441\u0442\u043e, \u0447\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0443\u0437\u0435\u043b.",edgeDescription:"\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u043d\u0430 \u0443\u0437\u0435\u043b \u0438 \u043f\u0440\u043e\u0442\u044f\u043d\u0438\u0442\u0435 \u0440\u0435\u0431\u0440\u043e \u043a \u0434\u0440\u0443\u0433\u043e\u043c\u0443 \u0443\u0437\u043b\u0443, \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0438\u0445.",editEdgeDescription:"\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u043d\u0430 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0442\u043e\u0447\u043a\u0438 \u0438 \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0438\u0445 \u0432 \u0443\u0437\u0435\u043b, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u043d\u0435\u043c\u0443.",createEdgeError:"\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0440\u0435\u0431\u0440\u0430 \u0432 \u043a\u043b\u0430\u0441\u0442\u0435\u0440.",deleteClusterError:"\u041a\u043b\u0430\u0441\u0442\u0435\u0440\u044b \u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u044b",editClusterError:"\u041a\u043b\u0430\u0441\u0442\u0435\u0440\u044b \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0434\u043b\u044f \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f."},e.ru_RU=e.ru,e.cn={edit:"\u7f16\u8f91",del:"\u5220\u9664\u9009\u5b9a",back:"\u8fd4\u56de",addNode:"\u6dfb\u52a0\u8282\u70b9",addEdge:"\u6dfb\u52a0\u8fde\u63a5\u7ebf",editNode:"\u7f16\u8f91\u8282\u70b9",editEdge:"\u7f16\u8f91\u8fde\u63a5\u7ebf",addDescription:"\u5355\u51fb\u7a7a\u767d\u5904\u653e\u7f6e\u65b0\u8282\u70b9\u3002",edgeDescription:"\u5355\u51fb\u67d0\u4e2a\u8282\u70b9\u5e76\u5c06\u8be5\u8fde\u63a5\u7ebf\u62d6\u52a8\u5230\u53e6\u4e00\u4e2a\u8282\u70b9\u4ee5\u8fde\u63a5\u5b83\u4eec\u3002",editEdgeDescription:"\u5355\u51fb\u63a7\u5236\u8282\u70b9\u5e76\u5c06\u5b83\u4eec\u62d6\u5230\u8282\u70b9\u4e0a\u8fde\u63a5\u3002",createEdgeError:"\u65e0\u6cd5\u5c06\u8fde\u63a5\u7ebf\u8fde\u63a5\u5230\u7fa4\u96c6\u3002",deleteClusterError:"\u65e0\u6cd5\u5220\u9664\u7fa4\u96c6\u3002",editClusterError:"\u65e0\u6cd5\u7f16\u8f91\u7fa4\u96c6\u3002"},e.zh_CN=e.cn},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=function(){function t(){(0,o.default)(this,t),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}return(0,a.default)(t,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var t=this.image.width,e=this.image.height;this.width=t,this.height=e;var i=Math.floor(e/2),n=Math.floor(e/4),r=Math.floor(e/8),o=Math.floor(e/16),s=Math.floor(t/2),a=Math.floor(t/4),h=Math.floor(t/8),l=Math.floor(t/16);this.canvas.width=3*a,this.canvas.height=i,this.coordinates=[[0,0,s,i],[s,0,a,n],[s,n,h,r],[5*h,n,l,o]],this._fillMipMap()}}},{key:"initialized",value:function(){return void 0!==this.coordinates}},{key:"_fillMipMap",value:function(){var t=this.canvas.getContext("2d"),e=this.coordinates[0];t.drawImage(this.image,e[0],e[1],e[2],e[3]);for(var i=1;i<this.NUM_ITERATIONS;i++){var n=this.coordinates[i-1],r=this.coordinates[i];t.drawImage(this.canvas,n[0],n[1],n[2],n[3],r[0],r[1],r[2],r[3])}}},{key:"drawImageAtPosition",value:function(t,e,i,n,r,o){if(this.initialized())if(e>2){e*=.5;for(var s=0;e>2&&s<this.NUM_ITERATIONS;)e*=.5,s+=1;s>=this.NUM_ITERATIONS&&(s=this.NUM_ITERATIONS-1);var a=this.coordinates[s];t.drawImage(this.canvas,a[0],a[1],a[2],a[3],i,n,r,o)}else t.drawImage(this.image,i,n,r,o)}}]),t}();e.default=h},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=i(2),l=function(){function t(){(0,o.default)(this,t),this.clear(),this.defaultIndex=0,this.groupsArray=[],this.groupIndex=0,this.defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},h.extend(this.options,this.defaultOptions)}return(0,a.default)(t,[{key:"setOptions",value:function(t){var e=["useDefaultGroups"];if(void 0!==t)for(var i in t)if(t.hasOwnProperty(i)&&-1===e.indexOf(i)){var n=t[i];this.add(i,n)}}},{key:"clear",value:function(){this.groups={},this.groupsArray=[]}},{key:"get",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.groups[t];if(void 0===i&&e)if(!1===this.options.useDefaultGroups&&this.groupsArray.length>0){var n=this.groupIndex%this.groupsArray.length;this.groupIndex++,i={},i.color=this.groups[this.groupsArray[n]],this.groups[t]=i}else{var r=this.defaultIndex%this.defaultGroups.length;this.defaultIndex++,i={},i.color=this.defaultGroups[r],this.groups[t]=i}return i}},{key:"add",value:function(t,e){return this.groups[t]=e,this.groupsArray.push(t),e}}]),t}();e.default=l},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=i(2),l=i(11),u=i(12),d=i(47).default,c=function(){function t(e,i,n,r){var s=this;if((0,o.default)(this,t),this.body=e,this.images=i,this.groups=n,this.layoutEngine=r,this.body.functions.createNode=this.create.bind(this),this.nodesListeners={add:function(t,e){s.add(e.items)},update:function(t,e){s.update(e.items,e.data,e.oldData)},remove:function(t,e){s.remove(e.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:2,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,i,n){if(e===t)return.5;var r=1/(e-t);return Math.max(0,(n-t)*r)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=h.bridgeObject(this.defaultOptions),this.bindEventListeners()}return(0,a.default)(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("refreshNodes",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){h.forEach(t.nodesListeners,function(e,i){t.body.data.nodes&&t.body.data.nodes.off(i,e)}),delete t.body.functions.createNode,delete t.nodesListeners.add,delete t.nodesListeners.update,delete t.nodesListeners.remove,delete t.nodesListeners})}},{key:"setOptions",value:function(t){if(void 0!==t){if(d.parseOptions(this.options,t),void 0!==t.shape)for(var e in this.body.nodes)this.body.nodes.hasOwnProperty(e)&&this.body.nodes[e].updateShape();if(void 0!==t.font)for(var i in this.body.nodes)this.body.nodes.hasOwnProperty(i)&&(this.body.nodes[i].updateLabelModule(),this.body.nodes[i].needsRefresh());if(void 0!==t.size)for(var n in this.body.nodes)this.body.nodes.hasOwnProperty(n)&&this.body.nodes[n].needsRefresh();void 0===t.hidden&&void 0===t.physics||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.body.data.nodes;if(t instanceof l||t instanceof u)this.body.data.nodes=t;else if(Array.isArray(t))this.body.data.nodes=new l,this.body.data.nodes.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.nodes=new l}if(i&&h.forEach(this.nodesListeners,function(t,e){i.off(e,t)}),this.body.nodes={},this.body.data.nodes){var n=this;h.forEach(this.nodesListeners,function(t,e){n.body.data.nodes.on(e,t)});var r=this.body.data.nodes.getIds();this.add(r,!0)}!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=void 0,n=[],r=0;r<t.length;r++){i=t[r];var o=this.body.data.nodes.get(i),s=this.create(o);n.push(s),this.body.nodes[i]=s}this.layoutEngine.positionInitially(n),!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t,e,i){for(var n=this.body.nodes,r=!1,o=0;o<t.length;o++){var s=t[o],a=n[s],h=e[o];void 0!==a?a.setOptions(h)&&(r=!0):(r=!0,a=this.create(h),n[s]=a)}r||void 0===i||(r=e.some(function(t,e){var n=i[e];return n&&n.level!==t.level})),!0===r?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){for(var e=this.body.nodes,i=0;i<t.length;i++){delete e[t[i]]}this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(t){return new(arguments.length>1&&void 0!==arguments[1]?arguments[1]:d)(t,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h.forEach(this.body.nodes,function(i,n){var r=t.body.data.nodes.get(n);void 0!==r&&(!0===e&&i.setOptions({x:null,y:null}),i.setOptions({fixed:!1}),i.setOptions(r))})}},{key:"getPositions",value:function(t){var e={};if(void 0!==t){if(!0===Array.isArray(t)){for(var i=0;i<t.length;i++)if(void 0!==this.body.nodes[t[i]]){var n=this.body.nodes[t[i]];e[t[i]]={x:Math.round(n.x),y:Math.round(n.y)}}}else if(void 0!==this.body.nodes[t]){var r=this.body.nodes[t];e[t]={x:Math.round(r.x),y:Math.round(r.y)}}}else for(var o=0;o<this.body.nodeIndices.length;o++){var s=this.body.nodes[this.body.nodeIndices[o]];e[this.body.nodeIndices[o]]={x:Math.round(s.x),y:Math.round(s.y)}}return e}},{key:"storePositions",value:function(){var t=[],e=this.body.data.nodes.getDataSet();for(var i in e._data)if(e._data.hasOwnProperty(i)){var n=this.body.nodes[i];e._data[i].x==Math.round(n.x)&&e._data[i].y==Math.round(n.y)||t.push({id:n.id,x:Math.round(n.x),y:Math.round(n.y)})}e.update(t)}},{key:"getBoundingBox",value:function(t){if(void 0!==this.body.nodes[t])return this.body.nodes[t].shape.boundingBox}},{key:"getConnectedNodes",value:function(t,e){var i=[];if(void 0!==this.body.nodes[t])for(var n=this.body.nodes[t],r={},o=0;o<n.edges.length;o++){var s=n.edges[o];"to"!==e&&s.toId==n.id?void 0===r[s.fromId]&&(i.push(s.fromId),r[s.fromId]=!0):"from"!==e&&s.fromId==n.id&&void 0===r[s.toId]&&(i.push(s.toId),r[s.toId]=!0)}return i}},{key:"getConnectedEdges",value:function(t){var e=[];if(void 0!==this.body.nodes[t])for(var i=this.body.nodes[t],n=0;n<i.edges.length;n++)e.push(i.edges[n].id);else console.log("NodeId provided for getConnectedEdges does not exist. Provided: ",t);return e}},{key:"moveNode",value:function(t,e,i){var n=this;void 0!==this.body.nodes[t]?(this.body.nodes[t].x=Number(e),this.body.nodes[t].y=Number(i),setTimeout(function(){n.body.emitter.emit("startSimulation")},0)):console.log("Node id supplied to moveNode does not exist. Provided: ",t)}}]),t}();e.default=c},function(t,e,i){t.exports={default:i(189),__esModule:!0}},function(t,e,i){i(49),i(60),t.exports=i(190)},function(t,e,i){var n=i(86),r=i(13)("iterator"),o=i(31);t.exports=i(7).isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||o.hasOwnProperty(n(e))}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=i(192).default,l=i(48).default,u=function(){function t(e,i,n,r){var s=this;(0,o.default)(this,t),this.ctx=e,this.parent=i;var a=function(t,i){if(void 0===t)return 0;var o=s.parent.getFormattingValues(e,n,r,i),a=0;if(""!==t){a=s.ctx.measureText(t).width}return{width:a,values:o}};this.lines=new h(a)}return(0,a.default)(t,[{key:"process",value:function(t){if(!l.isValidLabel(t))return this.lines.finalize();var e=this.parent.fontOptions;t=t.replace(/\r\n/g,"\n"),t=t.replace(/\r/g,"\n");var i=String(t).split("\n"),n=i.length;if(e.multi)for(var r=0;r<n;r++){var o=this.splitBlocks(i[r],e.multi);if(void 0!==o)if(0!==o.length){if(e.maxWdt>0)for(var s=0;s<o.length;s++){var a=o[s].mod,h=o[s].text;this.splitStringIntoLines(h,a,!0)}else for(var u=0;u<o.length;u++){var d=o[u].mod,c=o[u].text;this.lines.append(c,d)}this.lines.newLine()}else this.lines.newLine("")}else if(e.maxWdt>0)for(var f=0;f<n;f++)this.splitStringIntoLines(i[f]);else for(var p=0;p<n;p++)this.lines.newLine(i[p]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(t){var e="none";return"markdown"===t||"md"===t?e="markdown":!0!==t&&"html"!==t||(e="html"),e}},{key:"splitHtmlBlocks",value:function(t){var e=[],i={bold:!1,ital:!1,mono:!1,spacing:!1,position:0,buffer:"",modStack:[]};for(i.mod=function(){return 0===this.modStack.length?"normal":this.modStack[0]},i.modName=function(){return 0===this.modStack.length?"normal":"mono"===this.modStack[0]?"mono":i.bold&&i.ital?"boldital":i.bold?"bold":i.ital?"ital":void 0},i.emitBlock=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(e.push({text:this.buffer,mod:this.modName()}),this.buffer="")},i.add=function(t){" "===t&&(i.spacing=!0),i.spacing&&(this.buffer+=" ",this.spacing=!1)," "!=t&&(this.buffer+=t)};i.position<t.length;){var n=t.charAt(i.position);/[ \t]/.test(n)?i.mono?i.add(n):i.spacing=!0:/</.test(n)?i.mono||i.bold||!/<b>/.test(t.substr(i.position,3))?i.mono||i.ital||!/<i>/.test(t.substr(i.position,3))?!i.mono&&/<code>/.test(t.substr(i.position,6))?(i.emitBlock(),i.mono=!0,i.modStack.unshift("mono"),i.position+=5):!i.mono&&"bold"===i.mod()&&/<\/b>/.test(t.substr(i.position,4))?(i.emitBlock(),i.bold=!1,i.modStack.shift(),i.position+=3):!i.mono&&"ital"===i.mod()&&/<\/i>/.test(t.substr(i.position,4))?(i.emitBlock(),i.ital=!1,i.modStack.shift(),i.position+=3):"mono"===i.mod()&&/<\/code>/.test(t.substr(i.position,7))?(i.emitBlock(),i.mono=!1,i.modStack.shift(),i.position+=6):i.add(n):(i.emitBlock(),i.ital=!0,i.modStack.unshift("ital"),i.position+=2):(i.emitBlock(),i.bold=!0,i.modStack.unshift("bold"),i.position+=2):/&/.test(n)?/&lt;/.test(t.substr(i.position,4))?(i.add("<"),i.position+=3):/&amp;/.test(t.substr(i.position,5))?(i.add("&"),i.position+=4):i.add("&"):i.add(n),i.position++}return i.emitBlock(),e}},{key:"splitMarkdownBlocks",value:function(t){var e=[],i={bold:!1,ital:!1,mono:!1,beginable:!0,spacing:!1,position:0,buffer:"",modStack:[]};for(i.mod=function(){return 0===this.modStack.length?"normal":this.modStack[0]},i.modName=function(){return 0===this.modStack.length?"normal":"mono"===this.modStack[0]?"mono":i.bold&&i.ital?"boldital":i.bold?"bold":i.ital?"ital":void 0},i.emitBlock=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(e.push({text:this.buffer,mod:this.modName()}),this.buffer="")},i.add=function(t){" "===t&&(i.spacing=!0),i.spacing&&(this.buffer+=" ",this.spacing=!1)," "!=t&&(this.buffer+=t)};i.position<t.length;){var n=t.charAt(i.position);/[ \t]/.test(n)?(i.mono?i.add(n):i.spacing=!0,i.beginable=!0):/\\/.test(n)?i.position<t.length+1&&(i.position++,n=t.charAt(i.position),/ \t/.test(n)?i.spacing=!0:(i.add(n),i.beginable=!1)):i.mono||i.bold||!i.beginable&&!i.spacing||!/\*/.test(n)?i.mono||i.ital||!i.beginable&&!i.spacing||!/\_/.test(n)?!i.mono&&(i.beginable||i.spacing)&&/`/.test(n)?(i.emitBlock(),i.mono=!0,i.modStack.unshift("mono")):!i.mono&&"bold"===i.mod()&&/\*/.test(n)?i.position===t.length-1||/[.,_` \t\n]/.test(t.charAt(i.position+1))?(i.emitBlock(),i.bold=!1,i.modStack.shift()):i.add(n):!i.mono&&"ital"===i.mod()&&/\_/.test(n)?i.position===t.length-1||/[.,*` \t\n]/.test(t.charAt(i.position+1))?(i.emitBlock(),i.ital=!1,i.modStack.shift()):i.add(n):i.mono&&"mono"===i.mod()&&/`/.test(n)?i.position===t.length-1||/[.,*_ \t\n]/.test(t.charAt(i.position+1))?(i.emitBlock(),i.mono=!1,i.modStack.shift()):i.add(n):(i.add(n),i.beginable=!1):(i.emitBlock(),i.ital=!0,i.modStack.unshift("ital")):(i.emitBlock(),i.bold=!0,i.modStack.unshift("bold")),i.position++}return i.emitBlock(),e}},{key:"splitBlocks",value:function(t,e){var i=this.decodeMarkupSystem(e);return"none"===i?[{text:t,mod:"normal"}]:"markdown"===i?this.splitMarkdownBlocks(t):"html"===i?this.splitHtmlBlocks(t):void 0}},{key:"overMaxWidth",value:function(t){var e=this.ctx.measureText(t).width;return this.lines.curWidth()+e>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(t){for(var e="",i=0;i<t.length;){var n=""===e?"":" ",r=e+n+t[i];if(this.overMaxWidth(r))break;e=r,i++}return i}},{key:"getLongestFitWord",value:function(t){for(var e=0;e<t.length&&!this.overMaxWidth(t.slice(0,e));)e++;return e}},{key:"splitStringIntoLines",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t=t.replace(/^( +)/g,"$1\r"),t=t.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");for(var n=t.split("\r");n.length>0;){var r=this.getLongestFit(n);if(0===r){var o=n[0],s=this.getLongestFitWord(o);this.lines.newLine(o.slice(0,s),e),n[0]=o.slice(s)}else{var a=r;" "===n[r-1]?r--:" "===n[a]&&a++;var h=n.slice(0,r).join("");r==n.length&&i?this.lines.append(h,e):this.lines.newLine(h,e),n=n.slice(a)}}}}]),t}();e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(90),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=function(){function t(e){(0,a.default)(this,t),this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}return(0,l.default)(t,[{key:"_add",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";void 0===this.lines[t]&&(this.lines[t]={width:0,height:0,blocks:[]});var n=e;void 0!==e&&""!==e||(n=" ");var r=this.measureText(n,i),s=(0,o.default)({},r.values);s.text=e,s.width=r.width,s.mod=i,void 0!==e&&""!==e||(s.width=0),this.lines[t].blocks.push(s),this.lines[t].width+=s.width}},{key:"curWidth",value:function(){var t=this.lines[this.current];return void 0===t?0:t.width}},{key:"append",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,t,e)}},{key:"newLine",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,t,e),this.current++}},{key:"determineLineHeights",value:function(){for(var t=0;t<this.lines.length;t++){var e=this.lines[t],i=0;if(void 0!==e.blocks)for(var n=0;n<e.blocks.length;n++){var r=e.blocks[n];i<r.height&&(i=r.height)}e.height=i}}},{key:"determineLabelSize",value:function(){for(var t=0,e=0,i=0;i<this.lines.length;i++){var n=this.lines[i];n.width>t&&(t=n.width),e+=n.height}this.width=t,this.height=e}},{key:"removeEmptyBlocks",value:function(){for(var t=[],e=0;e<this.lines.length;e++){var i=this.lines[e];if(0!==i.blocks.length&&(e!==this.lines.length-1||0!==i.width)){var n={};(0,o.default)(n,i),n.blocks=[];for(var r=void 0,s=[],a=0;a<i.blocks.length;a++){var h=i.blocks[a];0!==h.width?s.push(h):void 0===r&&(r=h)}0===s.length&&void 0!==r&&s.push(r),n.blocks=s,t.push(n)}}return t}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var t=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:t}}}]),t}();e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(23),m=n(p),v=function(t){function e(t,i,n){(0,a.default)(this,e);var r=(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n));return r._setMargins(n),r}return(0,f.default)(e,t),(0,l.default)(e,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,i)){var n=this.getDimensionsFromLabel(t,e,i);this.width=n.width+this.margin.right+this.margin.left,this.height=n.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,n,r,o){this.resize(t,n,r),this.left=e-this.width/2,this.top=i-this.height/2,this.initContextForDraw(t,o),t.roundRect(this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(t,o),this.updateBoundingBox(e,i,t,n,r),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,r)}},{key:"updateBoundingBox",value:function(t,e,i,n,r){this._updateBoundingBox(t,e,i,n,r);var o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}},{key:"distanceToBorder",value:function(t,e){this.resize(t);var i=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+i}}]),e}(m.default);e.default=v},function(t,e,i){i(195),t.exports=i(7).Object.getPrototypeOf},function(t,e,i){var n=i(41),r=i(85);i(87)("getPrototypeOf",function(){return function(t){return r(n(t))}})},function(t,e,i){t.exports={default:i(197),__esModule:!0}},function(t,e,i){i(198),t.exports=i(7).Object.setPrototypeOf},function(t,e,i){var n=i(17);n(n.S,"Object",{setPrototypeOf:i(199).set})},function(t,e,i){var n=i(32),r=i(27),o=function(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=i(80)(Function.call,i(89).f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return o(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:o}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(73),m=n(p),v=function(t){function e(t,i,n){(0,a.default)(this,e);var r=(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n));return r._setMargins(n),r}return(0,f.default)(e,t),(0,l.default)(e,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,i)){var n=this.getDimensionsFromLabel(t,e,i),r=Math.max(n.width+this.margin.right+this.margin.left,n.height+this.margin.top+this.margin.bottom);this.options.size=r/2,this.width=r,this.height=r,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,n,r,o){this.resize(t,n,r),this.left=e-this.width/2,this.top=i-this.height/2,this._drawRawCircle(t,e,i,o),this.updateBoundingBox(e,i),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,i,n,r)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size}},{key:"distanceToBorder",value:function(t,e){return this.resize(t),.5*this.width}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(73),m=n(p),v=function(t){function e(t,i,n,r,s){(0,a.default)(this,e);var h=(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n));return h.setImages(r,s),h}return(0,f.default)(e,t),(0,l.default)(e,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){var n=2*this.options.size;return this.width=n,this.height=n,void(this.radius=.5*this.width)}this.needsRefresh(e,i)&&this._resizeImage()}},{key:"draw",value:function(t,e,i,n,r,o){this.switchImages(n),this.resize(),this.left=e-this.width/2,this.top=i-this.height/2,this._drawRawCircle(t,e,i,o),t.save(),t.clip(),this._drawImageAtPosition(t,o),t.restore(),this._drawImageLabel(t,e,i,n,r),this.updateBoundingBox(e,i)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size,this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(t,e){return this.resize(t),.5*this.width}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(23),m=n(p),v=function(t){function e(t,i,n){(0,a.default)(this,e);var r=(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n));return r._setMargins(n),r}return(0,f.default)(e,t),(0,l.default)(e,[{key:"resize",value:function(t,e,i){if(this.needsRefresh(e,i)){var n=this.getDimensionsFromLabel(t,e,i),r=n.width+this.margin.right+this.margin.left;this.width=r,this.height=r,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,n,r,o){this.resize(t,n,r),this.left=e-this.width/2,this.top=i-this.height/2,this.initContextForDraw(t,o),t.database(e-this.width/2,i-this.height/2,this.width,this.height),this.performFill(t,o),this.updateBoundingBox(e,i,t,n,r),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(24),m=n(p),v=function(t){function e(t,i,n){return(0,a.default)(this,e),(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n))}return(0,f.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(t,e,i,n,r,o){this._drawShape(t,"diamond",4,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(24),m=n(p),v=function(t){function e(t,i,n){return(0,a.default)(this,e),(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n))}return(0,f.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(t,e,i,n,r,o){this._drawShape(t,"circle",2,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t,e){return this.resize(t),this.options.size}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(23),m=n(p),v=function(t){function e(t,i,n){return(0,a.default)(this,e),(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n))}return(0,f.default)(e,t),(0,l.default)(e,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,i)){var n=this.getDimensionsFromLabel(t,e,i);this.height=2*n.height,this.width=n.width+n.height,this.radius=.5*this.width}}},{key:"draw",value:function(t,e,i,n,r,o){this.resize(t,n,r),this.left=e-.5*this.width,this.top=i-.5*this.height,this.initContextForDraw(t,o),t.ellipse_vis(this.left,this.top,this.width,this.height),this.performFill(t,o),this.updateBoundingBox(e,i,t,n,r),this.labelModule.draw(t,e,i,n,r)}},{key:"distanceToBorder",value:function(t,e){this.resize(t);var i=.5*this.width,n=.5*this.height,r=Math.sin(e)*i,o=Math.cos(e)*n;return i*n/Math.sqrt(r*r+o*o)}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(23),m=n(p),v=function(t){function e(t,i,n){(0,a.default)(this,e);var r=(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n));return r._setMargins(n),r}return(0,f.default)(e,t),(0,l.default)(e,[{key:"resize",value:function(t,e,i){this.needsRefresh(e,i)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,i,n,r,o){if(this.resize(t,n,r),this.options.icon.size=this.options.icon.size||50,this.left=e-this.width/2,this.top=i-this.height/2,this._icon(t,e,i,n,r,o),void 0!==this.options.label){this.labelModule.draw(t,this.left+this.iconSize.width/2+this.margin.left,i+this.height/2+5,n)}this.updateBoundingBox(e,i)}},{key:"updateBoundingBox",value:function(t,e){if(this.boundingBox.top=e-.5*this.options.icon.size,this.boundingBox.left=t-.5*this.options.icon.size,this.boundingBox.right=t+.5*this.options.icon.size,this.boundingBox.bottom=e+.5*this.options.icon.size,void 0!==this.options.label&&this.labelModule.size.width>0){this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5)}}},{key:"_icon",value:function(t,e,i,n,r,o){var s=Number(this.options.icon.size);void 0!==this.options.icon.code?(t.font=(n?"bold ":"")+s+"px "+this.options.icon.face,t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",this.enableShadow(t,o),t.fillText(this.options.icon.code,e,i),this.disableShadow(t,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(73),m=n(p),v=function(t){function e(t,i,n,r,s){(0,a.default)(this,e);var h=(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n));return h.setImages(r,s),h}return(0,f.default)(e,t),(0,l.default)(e,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){var n=2*this.options.size;return this.width=n,void(this.height=n)}this.needsRefresh(e,i)&&this._resizeImage()}},{key:"draw",value:function(t,e,i,n,r,o){if(this.switchImages(n),this.resize(),this.left=e-this.width/2,this.top=i-this.height/2,!0===this.options.shapeProperties.useBorderWithImage){var s=this.options.borderWidth,a=this.options.borderWidthSelected||2*this.options.borderWidth,h=(n?a:s)/this.body.view.scale;t.lineWidth=Math.min(this.width,h),t.beginPath(),t.strokeStyle=n?this.options.color.highlight.border:r?this.options.color.hover.border:this.options.color.border,t.fillStyle=n?this.options.color.highlight.background:r?this.options.color.hover.background:this.options.color.background,t.rect(this.left-.5*t.lineWidth,this.top-.5*t.lineWidth,this.width+t.lineWidth,this.height+t.lineWidth),t.fill(),this.performStroke(t,o),t.closePath()}this._drawImageAtPosition(t,o),this._drawImageLabel(t,e,i,n,r),this.updateBoundingBox(e,i)}},{key:"updateBoundingBox",value:function(t,e){this.resize(),this._updateBoundingBox(t,e),void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(24),m=n(p),v=function(t){function e(t,i,n){return(0,a.default)(this,e),(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n))}return(0,f.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(t,e,i,n,r,o){this._drawShape(t,"square",2,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(24),m=n(p),v=function(t){function e(t,i,n){return(0,a.default)(this,e),(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n))}return(0,f.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(t,e,i,n,r,o){this._drawShape(t,"hexagon",4,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(24),m=n(p),v=function(t){function e(t,i,n){return(0,a.default)(this,e),(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n))}return(0,f.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(t,e,i,n,r,o){this._drawShape(t,"star",4,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(23),m=n(p),v=function(t){function e(t,i,n){(0,a.default)(this,e);var r=(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n));return r._setMargins(n),r}return(0,f.default)(e,t),(0,l.default)(e,[{key:"resize",value:function(t,e,i){this.needsRefresh(e,i)&&(this.textSize=this.labelModule.getTextSize(t,e,i),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,i,n,r,o){this.resize(t,n,r),this.left=e-this.width/2,this.top=i-this.height/2,this.enableShadow(t,o),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,r),this.disableShadow(t,o),this.updateBoundingBox(e,i,t,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(24),m=n(p),v=function(t){function e(t,i,n){return(0,a.default)(this,e),(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n))}return(0,f.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(t,e,i,n,r,o){this._drawShape(t,"triangle",3,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(24),m=n(p),v=function(t){function e(t,i,n){return(0,a.default)(this,e),(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n))}return(0,f.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(t,e,i,n,r,o){this._drawShape(t,"triangleDown",3,e,i,n,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=i(2),l=i(11),u=i(12),d=i(74).default,c=function(){function t(e,i,n){var r=this;(0,o.default)(this,t),this.body=e,this.images=i,this.groups=n,this.body.functions.createEdge=this.create.bind(this),this.edgesListeners={add:function(t,e){r.add(e.items)},update:function(t,e){r.update(e.items)},remove:function(t,e){r.remove(e.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,i,n){if(e===t)return.5;var r=1/(e-t);return Math.max(0,(n-t)*r)}},selectionWidth:1.5,selfReferenceSize:20,shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},h.deepExtend(this.options,this.defaultOptions),this.bindEventListeners()}return(0,a.default)(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("_forceDisableDynamicCurves",function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"dynamic"===e&&(e="continuous");var n=!1;for(var r in t.body.edges)if(t.body.edges.hasOwnProperty(r)){var o=t.body.edges[r],s=t.body.data.edges._data[r];if(void 0!==s){var a=s.smooth;void 0!==a&&!0===a.enabled&&"dynamic"===a.type&&(void 0===e?o.setOptions({smooth:!1}):o.setOptions({smooth:{type:e}}),n=!0)}}!0===i&&!0===n&&t.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",function(){t.reconnectEdges()}),this.body.emitter.on("refreshEdges",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){h.forEach(t.edgesListeners,function(e,i){t.body.data.edges&&t.body.data.edges.off(i,e)}),delete t.body.functions.createEdge,delete t.edgesListeners.add,delete t.edgesListeners.update,delete t.edgesListeners.remove,delete t.edgesListeners})}},{key:"setOptions",value:function(t){if(void 0!==t){d.parseOptions(this.options,t,!0,this.defaultOptions,!0);var e=!1;if(void 0!==t.smooth)for(var i in this.body.edges)this.body.edges.hasOwnProperty(i)&&(e=this.body.edges[i].updateEdgeType()||e);if(void 0!==t.font)for(var n in this.body.edges)this.body.edges.hasOwnProperty(n)&&this.body.edges[n].updateLabelModule();void 0===t.hidden&&void 0===t.physics&&!0!==e||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.body.data.edges;if(t instanceof l||t instanceof u)this.body.data.edges=t;else if(Array.isArray(t))this.body.data.edges=new l,this.body.data.edges.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.edges=new l}if(n&&h.forEach(this.edgesListeners,function(t,e){n.off(e,t)}),this.body.edges={},this.body.data.edges){h.forEach(this.edgesListeners,function(t,i){e.body.data.edges.on(i,t)});var r=this.body.data.edges.getIds();this.add(r,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===i&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.body.edges,n=this.body.data.edges,r=0;r<t.length;r++){var o=t[r],s=i[o];s&&s.disconnect();var a=n.get(o,{showInternalIds:!0});i[o]=this.create(a)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t){for(var e=this.body.edges,i=this.body.data.edges,n=!1,r=0;r<t.length;r++){var o=t[r],s=i.get(o),a=e[o];void 0!==a?(a.disconnect(),n=a.setOptions(s)||n,a.connect()):(this.body.edges[o]=this.create(s),n=!0)}!0===n?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0!==t.length){var i=this.body.edges;h.forEach(t,function(t){var e=i[t];void 0!==e&&e.remove()}),e&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var t=this;h.forEach(this.body.edges,function(e,i){var n=t.body.data.edges._data[i];void 0!==n&&e.setOptions(n)})}},{key:"create",value:function(t){return new d(t,this.body,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var t,e=this.body.nodes,i=this.body.edges;for(t in e)e.hasOwnProperty(t)&&(e[t].edges=[]);for(t in i)if(i.hasOwnProperty(t)){var n=i[t];n.from=null,n.to=null,n.connect()}}},{key:"getConnectedNodes",value:function(t){var e=[];if(void 0!==this.body.edges[t]){var i=this.body.edges[t];void 0!==i.fromId&&e.push(i.fromId),void 0!==i.toId&&e.push(i.toId)}return e}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var t=this,e=[];h.forEach(this.body.edges,function(i,n){var r=t.body.nodes[i.toId],o=t.body.nodes[i.fromId];void 0!==r&&!0===r.isCluster||void 0!==o&&!0===o.isCluster||void 0!==r&&void 0!==o||e.push(n)}),this.remove(e,!1)}},{key:"_addMissingEdges",value:function(){var t=this.body.edges,e=this.body.data.edges,i=[];e.forEach(function(e,n){void 0===t[n]&&i.push(n)}),this.add(i,!0)}}]),t}();e.default=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(30),o=n(r),s=i(3),a=n(s),h=i(0),l=n(h),u=i(1),d=n(u),c=i(4),f=n(c),p=i(5),m=n(p),v=i(216),g=n(v),y=function(t){function e(t,i,n){return(0,l.default)(this,e),(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t,i,n))}return(0,m.default)(e,t),(0,d.default)(e,[{key:"_line",value:function(t,e,i){var n=i[0],r=i[1];this._bezierCurve(t,e,n,r)}},{key:"_getViaCoordinates",value:function(){var t=this.from.x-this.to.x,e=this.from.y-this.to.y,i=void 0,n=void 0,r=void 0,o=void 0,s=this.options.smooth.roundness;return(Math.abs(t)>Math.abs(e)||!0===this.options.smooth.forceDirection||"horizontal"===this.options.smooth.forceDirection)&&"vertical"!==this.options.smooth.forceDirection?(n=this.from.y,o=this.to.y,i=this.from.x-s*t,r=this.to.x+s*t):(n=this.from.y-s*e,o=this.to.y+s*e,i=this.from.x,r=this.to.x),[{x:i,y:n},{x:r,y:o}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e)}},{key:"_getDistanceToEdge",value:function(t,e,i,n,r,s){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates(),h=(0,o.default)(a,2),l=h[0],u=h[1];return this._getDistanceToBezierEdge(t,e,i,n,r,s,l,u)}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),i=(0,o.default)(e,2),n=i[0],r=i[1],s=t,a=[];return a[0]=Math.pow(1-s,3),a[1]=3*s*Math.pow(1-s,2),a[2]=3*Math.pow(s,2)*(1-s),a[3]=Math.pow(s,3),{x:a[0]*this.fromPoint.x+a[1]*n.x+a[2]*r.x+a[3]*this.toPoint.x,y:a[0]*this.fromPoint.y+a[1]*n.y+a[2]*r.y+a[3]*this.toPoint.y}}}]),e}(g.default);e.default=y},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(75),m=n(p),v=function(t){function e(t,i,n){return(0,a.default)(this,e),(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n))}return(0,f.default)(e,t),(0,l.default)(e,[{key:"_getDistanceToBezierEdge",value:function(t,e,i,n,r,o,s,a){var h=1e9,l=void 0,u=void 0,d=void 0,c=void 0,f=void 0,p=t,m=e,v=[0,0,0,0];for(u=1;u<10;u++)d=.1*u,v[0]=Math.pow(1-d,3),v[1]=3*d*Math.pow(1-d,2),v[2]=3*Math.pow(d,2)*(1-d),v[3]=Math.pow(d,3),c=v[0]*t+v[1]*s.x+v[2]*a.x+v[3]*i,f=v[0]*e+v[1]*s.y+v[2]*a.y+v[3]*n,u>0&&(l=this._getDistanceToLine(p,m,c,f,r,o),h=l<h?l:h),p=c,m=f;return h}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(30),o=n(r),s=i(3),a=n(s),h=i(0),l=n(h),u=i(1),d=n(u),c=i(4),f=n(c),p=i(5),m=n(p),v=i(75),g=n(v),y=function(t){function e(t,i,n){(0,l.default)(this,e);var r=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t,i,n));return r._boundFunction=function(){r.positionBezierNode()},r.body.emitter.on("_repositionBezierNodes",r._boundFunction),r}return(0,m.default)(e,t),(0,d.default)(e,[{key:"setOptions",value:function(t){var e=!1;this.options.physics!==t.physics&&(e=!0),this.options=t,this.id=this.options.id,this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],this.setupSupportNode(),this.connect(),!0===e&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],void 0===this.from||void 0===this.to||!1===this.options.physics?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this.body.emitter.off("_repositionBezierNodes",this._boundFunction),void 0!==this.via&&(delete this.body.nodes[this.via.id],this.via=void 0,!0)}},{key:"setupSupportNode",value:function(){if(void 0===this.via){var t="edgeId:"+this.id,e=this.body.functions.createNode({id:t,shape:"circle",physics:!0,hidden:!0});this.body.nodes[t]=e,this.via=e,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){void 0!==this.via&&void 0!==this.from&&void 0!==this.to?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):void 0!==this.via&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(t,e,i){this._bezierCurve(t,e,i)}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.via,i=t,n=void 0,r=void 0;if(this.from===this.to){var s=this._getCircleData(this.from),a=(0,o.default)(s,3),h=a[0],l=a[1],u=a[2],d=2*Math.PI*(1-i);n=h+u*Math.sin(d),r=l+u-u*(1-Math.cos(d))}else n=Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*e.x+Math.pow(i,2)*this.toPoint.x,r=Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*e.y+Math.pow(i,2)*this.toPoint.y;return{x:n,y:r}}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e,this.via)}},{key:"_getDistanceToEdge",value:function(t,e,i,n,r,o){return this._getDistanceToBezierEdge(t,e,i,n,r,o,this.via)}}]),e}(g.default);e.default=y},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(75),m=n(p),v=function(t){function e(t,i,n){return(0,a.default)(this,e),(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n))}return(0,f.default)(e,t),(0,l.default)(e,[{key:"_line",value:function(t,e,i){this._bezierCurve(t,e,i)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var t=void 0,e=void 0,i=this.options.smooth.roundness,n=this.options.smooth.type,r=Math.abs(this.from.x-this.to.x),o=Math.abs(this.from.y-this.to.y);if("discrete"===n||"diagonalCross"===n){var s=void 0,a=void 0;s=a=r<=o?i*o:i*r,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(a=-a),t=this.from.x+s,e=this.from.y+a,"discrete"===n&&(r<=o?t=r<i*o?this.from.x:t:e=o<i*r?this.from.y:e)}else if("straightCross"===n){var h=(1-i)*r,l=(1-i)*o;r<=o?(h=0,this.from.y<this.to.y&&(l=-l)):(this.from.x<this.to.x&&(h=-h),l=0),t=this.to.x+h,e=this.to.y+l}else if("horizontal"===n){var u=(1-i)*r;this.from.x<this.to.x&&(u=-u),t=this.to.x+u,e=this.from.y}else if("vertical"===n){var d=(1-i)*o;this.from.y<this.to.y&&(d=-d),t=this.from.x,e=this.to.y+d}else if("curvedCW"===n){r=this.to.x-this.from.x,o=this.from.y-this.to.y;var c=Math.sqrt(r*r+o*o),f=Math.PI,p=Math.atan2(o,r),m=(p+(.5*i+.5)*f)%(2*f);t=this.from.x+(.5*i+.5)*c*Math.sin(m),e=this.from.y+(.5*i+.5)*c*Math.cos(m)}else if("curvedCCW"===n){r=this.to.x-this.from.x,o=this.from.y-this.to.y;var v=Math.sqrt(r*r+o*o),g=Math.PI,y=Math.atan2(o,r),b=(y+(.5*-i+.5)*g)%(2*g);t=this.from.x+(.5*i+.5)*v*Math.sin(b),e=this.from.y+(.5*i+.5)*v*Math.cos(b)}else{var _=void 0,w=void 0;_=w=r<=o?i*o:i*r,this.from.x>this.to.x&&(_=-_),this.from.y>=this.to.y&&(w=-w),t=this.from.x+_,e=this.from.y+w,r<=o?t=this.from.x<=this.to.x?this.to.x<t?this.to.x:t:this.to.x>t?this.to.x:t:e=this.from.y>=this.to.y?this.to.y>e?this.to.y:e:this.to.y<e?this.to.y:e}return{x:t,y:e}}},{key:"_findBorderPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._findBorderPositionBezier(t,e,i.via)}},{key:"_getDistanceToEdge",value:function(t,e,i,n,r,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(t,e,i,n,r,o,s)}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),i=t;return{x:Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*e.x+Math.pow(i,2)*this.toPoint.x,y:Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*e.y+Math.pow(i,2)*this.toPoint.y}}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(118),m=n(p),v=function(t){function e(t,i,n){return(0,a.default)(this,e),(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n))}return(0,f.default)(e,t),(0,l.default)(e,[{key:"_line",value:function(t,e){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),t.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(t){return{x:(1-t)*this.fromPoint.x+t*this.toPoint.x,y:(1-t)*this.fromPoint.y+t*this.toPoint.y}}},{key:"_findBorderPosition",value:function(t,e){var i=this.to,n=this.from;t.id===this.from.id&&(i=this.from,n=this.to);var r=Math.atan2(i.y-n.y,i.x-n.x),o=i.x-n.x,s=i.y-n.y,a=Math.sqrt(o*o+s*s),h=t.distanceToBorder(e,r),l=(a-h)/a,u={};return u.x=(1-l)*n.x+l*i.x,u.y=(1-l)*n.y+l*i.y,u}},{key:"_getDistanceToEdge",value:function(t,e,i,n,r,o){return this._getDistanceToLine(t,e,i,n,r,o)}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(120).default,d=i(221).default,c=i(222).default,f=i(223).default,p=i(224).default,m=i(121).default,v=i(225).default,g=i(226).default,y=i(2),b=i(119).default,_=function(){function t(e){(0,a.default)(this,t),this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0},y.extend(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return(0,l.default)(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("initPhysics",function(){t.initPhysics()}),this.body.emitter.on("_layoutFailed",function(){t.layoutFailed=!0}),this.body.emitter.on("resetPhysics",function(){t.stopSimulation(),t.ready=!1}),this.body.emitter.on("disablePhysics",function(){t.physicsEnabled=!1,t.stopSimulation()}),this.body.emitter.on("restorePhysics",function(){t.setOptions(t.options),!0===t.ready&&t.startSimulation()}),this.body.emitter.on("startSimulation",function(){!0===t.ready&&t.startSimulation()}),this.body.emitter.on("stopSimulation",function(){t.stopSimulation()}),this.body.emitter.on("destroy",function(){t.stopSimulation(!1),t.body.emitter.off()}),this.body.emitter.on("_dataChanged",function(){t.updatePhysicsData()})}},{key:"setOptions",value:function(t){void 0!==t&&(!1===t?(this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation()):!0===t?(this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation()):(this.physicsEnabled=!0,y.selectiveNotDeepExtend(["stabilization"],this.options,t),y.mergeOptions(this.options,t,"stabilization"),void 0===t.enabled&&(this.options.enabled=!0),!1===this.options.enabled&&(this.physicsEnabled=!1,this.stopSimulation()),this.timestep=this.options.timestep)),this.init()}},{key:"init",value:function(){var t;"forceAtlas2Based"===this.options.solver?(t=this.options.forceAtlas2Based,this.nodesSolver=new v(this.body,this.physicsBody,t),this.edgesSolver=new f(this.body,this.physicsBody,t),this.gravitySolver=new g(this.body,this.physicsBody,t)):"repulsion"===this.options.solver?(t=this.options.repulsion,this.nodesSolver=new d(this.body,this.physicsBody,t),this.edgesSolver=new f(this.body,this.physicsBody,t),this.gravitySolver=new m(this.body,this.physicsBody,t)):"hierarchicalRepulsion"===this.options.solver?(t=this.options.hierarchicalRepulsion,this.nodesSolver=new c(this.body,this.physicsBody,t),this.edgesSolver=new p(this.body,this.physicsBody,t),this.gravitySolver=new m(this.body,this.physicsBody,t)):(t=this.options.barnesHut,this.nodesSolver=new u(this.body,this.physicsBody,t),this.edgesSolver=new f(this.body,this.physicsBody,t),this.gravitySolver=new m(this.body,this.physicsBody,t)),this.modelOptions=t}},{key:"initPhysics",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?!0===this.options.stabilization.enabled?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),void 0===this.viewFunction&&(this.viewFunction=this.simulationStep.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.stabilized=!0,!0===t&&this._emitStabilized(),void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,!0===t&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var t=Date.now();this.physicsTick(),(Date.now()-t<.4*this.simulationInterval||!0===this.runDoubleSpeed)&&!1===this.stabilized&&(this.physicsTick(),this.runDoubleSpeed=!0),!0===this.stabilized&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||!0===this.startedStabilization)&&setTimeout(function(){t.body.emitter.emit("stabilized",{iterations:e}),t.startedStabilization=!1,t.stabilizationIterations=0},0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){!0===this._evaluateStepQuality()?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}},{key:"physicsTick",value:function(){if(this._startStabilizing(),!0!==this.stabilized){if(!0===this.adaptiveTimestep&&!0===this.adaptiveTimestepEnabled){this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1}else this.timestep=this.options.timestep,this.physicsStep();!0===this.stabilized&&this.revert(),this.stabilizationIterations++}}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var t=this.body.nodes,e=this.body.edges;for(var i in t)t.hasOwnProperty(i)&&!0===t[i].options.physics&&this.physicsBody.physicsNodeIndices.push(t[i].id);for(var n in e)e.hasOwnProperty(n)&&!0===e[n].options.physics&&this.physicsBody.physicsEdgeIndices.push(e[n].id);for(var r=0;r<this.physicsBody.physicsNodeIndices.length;r++){var o=this.physicsBody.physicsNodeIndices[r];this.physicsBody.forces[o]={x:0,y:0},void 0===this.physicsBody.velocities[o]&&(this.physicsBody.velocities[o]={x:0,y:0})}for(var s in this.physicsBody.velocities)void 0===t[s]&&delete this.physicsBody.velocities[s]}},{key:"revert",value:function(){var t=(0,o.default)(this.previousStates),e=this.body.nodes,i=this.physicsBody.velocities;this.referenceState={};for(var n=0;n<t.length;n++){var r=t[n];void 0!==e[r]?!0===e[r].options.physics&&(this.referenceState[r]={positions:{x:e[r].x,y:e[r].y}},i[r].x=this.previousStates[r].vx,i[r].y=this.previousStates[r].vy,e[r].x=this.previousStates[r].x,e[r].y=this.previousStates[r].y):delete this.previousStates[r]}}},{key:"_evaluateStepQuality",value:function(){var t=void 0,e=void 0,i=this.body.nodes,n=this.referenceState;for(var r in this.referenceState)if(this.referenceState.hasOwnProperty(r)&&void 0!==i[r]&&(t=i[r].x-n[r].positions.x,e=i[r].y-n[r].positions.y,Math.sqrt(Math.pow(t,2)+Math.pow(e,2))>.3))return!1;return!0}},{key:"moveNodes",value:function(){for(var t=this.physicsBody.physicsNodeIndices,e=0,i=0,n=0;n<t.length;n++){var r=t[n],o=this._performStep(r);e=Math.max(e,o),i+=o}this.adaptiveTimestepEnabled=i/t.length<5,this.stabilized=e<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(t,e,i){t+=(e-this.modelOptions.damping*t)/i*this.timestep;var n=this.options.maxVelocity||1e9;return Math.abs(t)>n&&(t=t>0?n:-n),t}},{key:"_performStep",value:function(t){var e=this.body.nodes[t],i=this.physicsBody.forces[t],n=this.physicsBody.velocities[t];return this.previousStates[t]={x:e.x,y:e.y,vx:n.x,vy:n.y},!1===e.options.fixed.x?(n.x=this.calculateComponentVelocity(n.x,i.x,e.options.mass),e.x+=n.x*this.timestep):(i.x=0,n.x=0),!1===e.options.fixed.y?(n.y=this.calculateComponentVelocity(n.y,i.y,e.options.mass),e.y+=n.y*this.timestep):(i.y=0,n.y=0),Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))}},{key:"_freezeNodes",value:function(){var t=this.body.nodes;for(var e in t)if(t.hasOwnProperty(e)&&t[e].x&&t[e].y){var i=t[e].options.fixed;this.freezeCache[e]={x:i.x,y:i.y},i.x=!0,i.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var t=this.body.nodes;for(var e in t)t.hasOwnProperty(e)&&void 0!==this.freezeCache[e]&&(t[e].options.fixed.x=this.freezeCache[e].x,t[e].options.fixed.y=this.freezeCache[e].y);this.freezeCache={}}},{key:"stabilize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.stabilization.iterations;if("number"!==typeof e&&(e=this.options.stabilization.iterations,console.log("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),0===this.physicsBody.physicsNodeIndices.length)return void(this.ready=!0);this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,!0===this.options.stabilization.onlyDynamicEdges&&this._freezeNodes(),this.stabilizationIterations=0,setTimeout(function(){return t._stabilizationBatch()},0)}},{key:"_startStabilizing",value:function(){return!0!==this.startedStabilization&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}},{key:"_stabilizationBatch",value:function(){var t=this,e=function(){return!1===t.stabilized&&t.stabilizationIterations<t.targetIterations},i=function(){t.body.emitter.emit("stabilizationProgress",{iterations:t.stabilizationIterations,total:t.targetIterations})};this._startStabilizing()&&i();for(var n=0;e()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;i(),e()?setTimeout(this._stabilizationBatch.bind(this),0):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),!0===this.options.stabilization.fit&&this.body.emitter.emit("fit"),!0===this.options.stabilization.onlyDynamicEdges&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),!0===this.stabilized?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(t){for(var e=0;e<this.physicsBody.physicsNodeIndices.length;e++){var i=this.physicsBody.physicsNodeIndices[e],n=this.body.nodes[i],r=this.physicsBody.forces[i],o=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.x,2)),s=Math.min(Math.max(5,o),15),a=3*s,h=y.HSVToHex((180-180*Math.min(1,Math.max(0,.03*o)))/360,1,1),l={x:n.x+20*r.x,y:n.y+20*r.y};t.lineWidth=s,t.strokeStyle=h,t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(l.x,l.y),t.stroke();var u=Math.atan2(r.y,r.x);t.fillStyle=h,b.draw(t,{type:"arrow",point:l,angle:u,length:a}),t.fill()}}}]),t}();e.default=_},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=function(){function t(e,i,n){(0,o.default)(this,t),this.body=e,this.physicsBody=i,this.setOptions(n)}return(0,a.default)(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,n,r,o,s,a,h=this.body.nodes,l=this.physicsBody.physicsNodeIndices,u=this.physicsBody.forces,d=this.options.nodeDistance,c=-2/3/d,f=0;f<l.length-1;f++){s=h[l[f]];for(var p=f+1;p<l.length;p++)a=h[l[p]],t=a.x-s.x,e=a.y-s.y,i=Math.sqrt(t*t+e*e),0===i&&(i=.1*Math.random(),t=i),i<2*d&&(o=i<.5*d?1:c*i+4/3,o/=i,n=t*o,r=e*o,u[s.id].x-=n,u[s.id].y-=r,u[a.id].x+=n,u[a.id].y+=r)}}}]),t}();e.default=h},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=function(){function t(e,i,n){(0,o.default)(this,t),this.body=e,this.physicsBody=i,this.setOptions(n)}return(0,a.default)(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){var t,e,i,n,r,o,s,a,h,l,u=this.body.nodes,d=this.physicsBody.physicsNodeIndices,c=this.physicsBody.forces,f=this.options.nodeDistance;for(h=0;h<d.length-1;h++)for(s=u[d[h]],l=h+1;l<d.length;l++)if(a=u[d[l]],s.level===a.level){t=a.x-s.x,e=a.y-s.y,i=Math.sqrt(t*t+e*e);o=i<f?-Math.pow(.05*i,2)+Math.pow(.05*f,2):0,0===i?i=.01:o/=i,n=t*o,r=e*o,c[s.id].x-=n,c[s.id].y-=r,c[a.id].x+=n,c[a.id].y+=r}}}]),t}();e.default=h},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=function(){function t(e,i,n){(0,o.default)(this,t),this.body=e,this.physicsBody=i,this.setOptions(n)}return(0,a.default)(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t=void 0,e=void 0,i=this.physicsBody.physicsEdgeIndices,n=this.body.edges,r=void 0,o=void 0,s=void 0,a=0;a<i.length;a++)e=n[i[a]],!0===e.connected&&e.toId!==e.fromId&&void 0!==this.body.nodes[e.toId]&&void 0!==this.body.nodes[e.fromId]&&(void 0!==e.edgeType.via?(t=void 0===e.options.length?this.options.springLength:e.options.length,r=e.to,o=e.edgeType.via,s=e.from,this._calculateSpringForce(r,o,.5*t),this._calculateSpringForce(o,s,.5*t)):(t=void 0===e.options.length?1.5*this.options.springLength:e.options.length,this._calculateSpringForce(e.from,e.to,t)))}},{key:"_calculateSpringForce",value:function(t,e,i){var n=t.x-e.x,r=t.y-e.y,o=Math.max(Math.sqrt(n*n+r*r),.01),s=this.options.springConstant*(i-o)/o,a=n*s,h=r*s;void 0!==this.physicsBody.forces[t.id]&&(this.physicsBody.forces[t.id].x+=a,this.physicsBody.forces[t.id].y+=h),void 0!==this.physicsBody.forces[e.id]&&(this.physicsBody.forces[e.id].x-=a,this.physicsBody.forces[e.id].y-=h)}}]),t}();e.default=h},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=function(){function t(e,i,n){(0,o.default)(this,t),this.body=e,this.physicsBody=i,this.setOptions(n)}return(0,a.default)(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,n,r,o,s,a,h=this.body.edges,l=this.physicsBody.physicsEdgeIndices,u=this.physicsBody.physicsNodeIndices,d=this.physicsBody.forces,c=0;c<u.length;c++){var f=u[c];d[f].springFx=0,d[f].springFy=0}for(var p=0;p<l.length;p++)e=h[l[p]],!0===e.connected&&(t=void 0===e.options.length?this.options.springLength:e.options.length,i=e.from.x-e.to.x,n=e.from.y-e.to.y,a=Math.sqrt(i*i+n*n),a=0===a?.01:a,s=this.options.springConstant*(t-a)/a,r=i*s,o=n*s,e.to.level!=e.from.level?(void 0!==d[e.toId]&&(d[e.toId].springFx-=r,d[e.toId].springFy-=o),void 0!==d[e.fromId]&&(d[e.fromId].springFx+=r,d[e.fromId].springFy+=o)):(void 0!==d[e.toId]&&(d[e.toId].x-=.5*r,d[e.toId].y-=.5*o),void 0!==d[e.fromId]&&(d[e.fromId].x+=.5*r,d[e.fromId].y+=.5*o)));s=1;for(var m,v,g=0;g<u.length;g++){var y=u[g];m=Math.min(s,Math.max(-s,d[y].springFx)),v=Math.min(s,Math.max(-s,d[y].springFy)),d[y].x+=m,d[y].y+=v}for(var b=0,_=0,w=0;w<u.length;w++){var x=u[w];b+=d[x].x,_+=d[x].y}for(var S=b/u.length,k=_/u.length,E=0;E<u.length;E++){var M=u[E];d[M].x-=S,d[M].y-=k}}}]),t}();e.default=h},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(120),m=n(p),v=function(t){function e(t,i,n){return(0,a.default)(this,e),(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n))}return(0,f.default)(e,t),(0,l.default)(e,[{key:"_calculateForces",value:function(t,e,i,n,r){0===t&&(t=.1*Math.random(),e=t),this.overlapAvoidanceFactor<1&&n.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*n.shape.radius,t-n.shape.radius));var o=n.edges.length+1,s=this.options.gravitationalConstant*r.mass*n.options.mass*o/Math.pow(t,2),a=e*s,h=i*s;this.physicsBody.forces[n.id].x+=a,this.physicsBody.forces[n.id].y+=h}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(121),m=n(p),v=function(t){function e(t,i,n){return(0,a.default)(this,e),(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n))}return(0,f.default)(e,t),(0,l.default)(e,[{key:"_calculateForces",value:function(t,e,i,n,r){if(t>0){var o=r.edges.length+1,s=this.options.centralGravity*o*r.options.mass;n[r.id].x=e*s,n[r.id].y=i*s}}}]),e}(m.default);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),o=n(r),s=i(6),a=n(s),h=i(0),l=n(h),u=i(1),d=n(u),c=i(2),f=i(76).default,p=i(228).default,m=i(74).default,v=i(47).default,g=function(){function t(e){var i=this;(0,l.default)(this,t),this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},c.extend(this.options,this.defaultOptions),this.body.emitter.on("_resetData",function(){i.clusteredNodes={},i.clusteredEdges={}})}return(0,d.default)(t,[{key:"clusterByHubsize",value:function(t,e){void 0===t?t=this._getHubSize():"object"===("undefined"===typeof t?"undefined":(0,a.default)(t))&&(e=this._checkOptions(t),t=this._getHubSize());for(var i=[],n=0;n<this.body.nodeIndices.length;n++){var r=this.body.nodes[this.body.nodeIndices[n]];r.edges.length>=t&&i.push(r.id)}for(var o=0;o<i.length;o++)this.clusterByConnection(i[o],e,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0===e.joinCondition)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);var n={},r={};c.forEach(this.body.nodes,function(i,o){var s=f.cloneOptions(i);!0===e.joinCondition(s)&&(n[o]=i,c.forEach(i.edges,function(e){void 0===t.clusteredEdges[e.id]&&(r[e.id]=e)}))}),this._cluster(n,r,e,i)}},{key:"clusterByEdgeCount",value:function(t,e){var i=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=this._checkOptions(e);for(var r=[],s={},a=void 0,h=void 0,l=void 0,u=0;u<this.body.nodeIndices.length;u++){var d,c,p;!function(n){var u={},m={},v=i.body.nodeIndices[n],g=i.body.nodes[v];if(void 0===s[v]){l=0,h=[];for(var y=0;y<g.edges.length;y++)a=g.edges[y],void 0===i.clusteredEdges[a.id]&&(a.toId!==a.fromId&&l++,h.push(a));if(l===t){d=function(t){if(void 0===e.joinCondition||null===e.joinCondition)return!0;var i=f.cloneOptions(t);return e.joinCondition(i)};for(var b=!0,_=0;_<h.length;_++){a=h[_];var w=i._getConnectedId(a,v);if(!d(g)){b=!1;break}m[a.id]=a,u[v]=g,u[w]=i.body.nodes[w],s[v]=!0}if((0,o.default)(u).length>0&&(0,o.default)(m).length>0&&!0===b)if(c=function(){for(var t=0;t<r.length;++t)for(var e in u)if(void 0!==r[t].nodes[e])return r[t]},void 0!==(p=c())){for(var x in u)void 0===p.nodes[x]&&(p.nodes[x]=u[x]);for(var S in m)void 0===p.edges[S]&&(p.edges[S]=m[S])}else r.push({nodes:u,edges:m})}}}(u)}for(var u=0;u<r.length;u++)this._cluster(r[u].nodes,r[u].edges,e,!1);!0===n&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(1,t,e)}},{key:"clusterBridges",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(2,t,e)}},{key:"clusterByConnection",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===t)throw new Error("No nodeId supplied to clusterByConnection!");if(void 0===this.body.nodes[t])throw new Error("The nodeId given to clusterByConnection does not exist!");var n=this.body.nodes[t];e=this._checkOptions(e,n),void 0===e.clusterNodeProperties.x&&(e.clusterNodeProperties.x=n.x),void 0===e.clusterNodeProperties.y&&(e.clusterNodeProperties.y=n.y),void 0===e.clusterNodeProperties.fixed&&(e.clusterNodeProperties.fixed={},e.clusterNodeProperties.fixed.x=n.options.fixed.x,e.clusterNodeProperties.fixed.y=n.options.fixed.y);var r={},s={},a=n.id,h=f.cloneOptions(n);r[a]=n;for(var l=0;l<n.edges.length;l++){var u=n.edges[l];if(void 0===this.clusteredEdges[u.id]){var d=this._getConnectedId(u,a);if(void 0===this.clusteredNodes[d])if(d!==a)if(void 0===e.joinCondition)s[u.id]=u,r[d]=this.body.nodes[d];else{var c=f.cloneOptions(this.body.nodes[d]);!0===e.joinCondition(h,c)&&(s[u.id]=u,r[d]=this.body.nodes[d])}else s[u.id]=u}}var p=(0,o.default)(r).map(function(t){return r[t].id});for(m in r)if(r.hasOwnProperty(m))for(var m=r[m],v=0;v<m.edges.length;v++){var g=m.edges[v];p.indexOf(this._getConnectedId(g,m.id))>-1&&(s[g.id]=g)}this._cluster(r,s,e,i)}},{key:"_createClusterEdges",value:function(t,e,i,n){for(var r=void 0,s=void 0,a=void 0,h=void 0,l=void 0,u=void 0,d=(0,o.default)(t),c=[],f=0;f<d.length;f++){s=d[f],a=t[s];for(var p=0;p<a.edges.length;p++)r=a.edges[p],void 0===this.clusteredEdges[r.id]&&(r.toId==r.fromId?e[r.id]=r:r.toId==s?(h=i.id,l=r.fromId,u=l):(h=r.toId,l=i.id,u=h),void 0===t[u]&&c.push({edge:r,fromId:l,toId:h}))}for(var m=[],v=0;v<c.length;v++){var g=c[v],y=g.edge,b=function(t){for(var e=0;e<m.length;e++){var i=m[e],n=t.fromId===i.fromId&&t.toId===i.toId,r=t.fromId===i.toId&&t.toId===i.fromId;if(n||r)return i}return null}(g);null===b?(b=this._createClusteredEdge(g.fromId,g.toId,y,n),m.push(b)):b.clusteringEdgeReplacingIds.push(y.id),this.body.edges[y.id].edgeReplacedById=b.id,this._backupEdgeOptions(y),y.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0===t.clusterEdgeProperties&&(t.clusterEdgeProperties={}),void 0===t.clusterNodeProperties&&(t.clusterNodeProperties={}),t}},{key:"_cluster",value:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=[];for(var s in t)t.hasOwnProperty(s)&&void 0!==this.clusteredNodes[s]&&r.push(s);for(var a=0;a<r.length;++a)delete t[r[a]];if(0!=(0,o.default)(t).length&&(1!=(0,o.default)(t).length||1==i.clusterNodeProperties.allowSingleNodeCluster)){var h=c.deepExtend({},i.clusterNodeProperties);if(void 0!==i.processProperties){var l=[];for(var u in t)if(t.hasOwnProperty(u)){var d=f.cloneOptions(t[u]);l.push(d)}var m=[];for(var v in e)if(e.hasOwnProperty(v)&&"clusterEdge:"!==v.substr(0,12)){var g=f.cloneOptions(e[v],"edge");m.push(g)}if(!(h=i.processProperties(h,l,m)))throw new Error("The processProperties function does not return properties!")}void 0===h.id&&(h.id="cluster:"+c.randomUUID());var y=h.id;void 0===h.label&&(h.label="cluster");var b=void 0;void 0===h.x&&(b=this._getClusterPosition(t),h.x=b.x),void 0===h.y&&(void 0===b&&(b=this._getClusterPosition(t)),h.y=b.y),h.id=y;var _=this.body.functions.createNode(h,p);_.containedNodes=t,_.containedEdges=e,_.clusterEdgeProperties=i.clusterEdgeProperties,this.body.nodes[h.id]=_,this._clusterEdges(t,e,h,i.clusterEdgeProperties),h.id=void 0,!0===n&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(t){void 0===this.clusteredEdges[t.id]&&(this.clusteredEdges[t.id]={physics:t.options.physics})}},{key:"_restoreEdge",value:function(t){var e=this.clusteredEdges[t.id];void 0!==e&&(t.setOptions({physics:e.physics}),delete this.clusteredEdges[t.id])}},{key:"isCluster",value:function(t){return void 0!==this.body.nodes[t]?!0===this.body.nodes[t].isCluster:(console.log("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(t){for(var e=(0,o.default)(t),i=t[e[0]].x,n=t[e[0]].x,r=t[e[0]].y,s=t[e[0]].y,a=void 0,h=1;h<e.length;h++)a=t[e[h]],i=a.x<i?a.x:i,n=a.x>n?a.x:n,r=a.y<r?a.y:r,s=a.y>s?a.y:s;return{x:.5*(i+n),y:.5*(r+s)}}},{key:"openCluster",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===t)throw new Error("No clusterNodeId supplied to openCluster.");var n=this.body.nodes[t];if(void 0===n)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(!0!==n.isCluster||void 0===n.containedNodes||void 0===n.containedEdges)throw new Error("The node:"+t+" is not a valid cluster.");var r=this.findNode(t),o=r.indexOf(t)-1;if(o>=0){var s=r[o];return this.body.nodes[s]._openChildCluster(t),delete this.body.nodes[t],void(!0===i&&this.body.emitter.emit("_dataChanged"))}var a=n.containedNodes,h=n.containedEdges;if(void 0!==e&&void 0!==e.releaseFunction&&"function"===typeof e.releaseFunction){var l={},u={x:n.x,y:n.y};for(var d in a)if(a.hasOwnProperty(d)){var f=this.body.nodes[d];l[d]={x:f.x,y:f.y}}var p=e.releaseFunction(u,l);for(var m in a)if(a.hasOwnProperty(m)){var v=this.body.nodes[m];void 0!==p[m]&&(v.x=void 0===p[m].x?n.x:p[m].x,v.y=void 0===p[m].y?n.y:p[m].y)}}else c.forEach(a,function(t){!1===t.options.fixed.x&&(t.x=n.x),!1===t.options.fixed.y&&(t.y=n.y)});for(var g in a)if(a.hasOwnProperty(g)){var y=this.body.nodes[g];y.vx=n.vx,y.vy=n.vy,y.setOptions({physics:!0}),delete this.clusteredNodes[g]}for(var b=[],_=0;_<n.edges.length;_++)b.push(n.edges[_]);for(var w=0;w<b.length;w++){for(var x=b[w],S=this._getConnectedId(x,t),k=this.clusteredNodes[S],E=0;E<x.clusteringEdgeReplacingIds.length;E++){var M=x.clusteringEdgeReplacingIds[E],T=this.body.edges[M];if(void 0!==T)if(void 0!==k){var C=this.body.nodes[k.clusterId];C.containedEdges[T.id]=T,delete h[T.id];var O=T.fromId,P=T.toId;T.toId==S?P=k.clusterId:O=k.clusterId,this._createClusteredEdge(O,P,T,C.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(T)}x.remove()}for(var A in h)h.hasOwnProperty(A)&&this._restoreEdge(h[A]);delete this.body.nodes[t],!0===i&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(t){var e=[];if(!0===this.isCluster(t)){var i=this.body.nodes[t].containedNodes;for(var n in i)i.hasOwnProperty(n)&&e.push(this.body.nodes[n].id)}return e}},{key:"findNode",value:function(t){for(var e=[],i=0,n=void 0;void 0!==this.clusteredNodes[t]&&i<100;){if(void 0===(n=this.body.nodes[t]))return[];e.push(n.id),t=this.clusteredNodes[t].clusterId,i++}return void 0===(n=this.body.nodes[t])?[]:(e.push(n.id),e.reverse(),e)}},{key:"updateClusteredNode",value:function(t,e){if(void 0===t)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(void 0===e)throw new Error("No newOptions supplied to updateClusteredNode.");if(void 0===this.body.nodes[t])throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[t].setOptions(e),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(t,e){if(void 0===t)throw new Error("No startEdgeId supplied to updateEdge.");if(void 0===e)throw new Error("No newOptions supplied to updateEdge.");if(void 0===this.body.edges[t])throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var i=this.getClusteredEdges(t),n=0;n<i.length;n++){this.body.edges[i[n]].setOptions(e)}this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(t){for(var e=[],i=0;void 0!==t&&void 0!==this.body.edges[t]&&i<100;)e.push(this.body.edges[t].id),t=this.body.edges[t].edgeReplacedById,i++;return e.reverse(),e}},{key:"getBaseEdge",value:function(t){return this.getBaseEdges(t)[0]}},{key:"getBaseEdges",value:function(t){for(var e=[t],i=[],n=[],r=0;e.length>0&&r<100;){var o=e.pop();if(void 0!==o){var s=this.body.edges[o];if(void 0!==s){r++;var a=s.clusteringEdgeReplacingIds;if(void 0===a)n.push(o);else for(var h=0;h<a.length;++h){var l=a[h];-1===e.indexOf(a)&&-1===i.indexOf(a)&&e.push(l)}i.push(o)}}}return n}},{key:"_getConnectedId",value:function(t,e){return t.toId!=e?t.toId:(t.fromId,t.fromId)}},{key:"_getHubSize",value:function(){for(var t=0,e=0,i=0,n=0,r=0;r<this.body.nodeIndices.length;r++){var o=this.body.nodes[this.body.nodeIndices[r]];o.edges.length>n&&(n=o.edges.length),t+=o.edges.length,e+=Math.pow(o.edges.length,2),i+=1}t/=i,e/=i;var s=e-Math.pow(t,2),a=Math.sqrt(s),h=Math.floor(t+2*a);return h>n&&(h=n),h}},{key:"_createClusteredEdge",value:function(t,e,i,n,r){var o=f.cloneOptions(i,"edge");c.deepExtend(o,n),o.from=t,o.to=e,o.id="clusterEdge:"+c.randomUUID(),void 0!==r&&c.deepExtend(o,r);var s=this.body.functions.createEdge(o);return s.clusteringEdgeReplacingIds=[i.id],s.connect(),this.body.edges[s.id]=s,s}},{key:"_clusterEdges",value:function(t,e,i,n){if(e instanceof m){var r=e,o={};o[r.id]=r,e=o}if(t instanceof v){var s=t,a={};a[s.id]=s,t=a}if(void 0===i||null===i)throw new Error("_clusterEdges: parameter clusterNode required");void 0===n&&(n=i.clusterEdgeProperties),this._createClusterEdges(t,e,i,n);for(var h in e)if(e.hasOwnProperty(h)&&void 0!==this.body.edges[h]){var l=this.body.edges[h];this._backupEdgeOptions(l),l.setOptions({physics:!1})}for(var u in t)t.hasOwnProperty(u)&&(this.clusteredNodes[u]={clusterId:i.id,node:this.body.nodes[u]},this.body.nodes[u].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(t){if(void 0!==t){var e=this.clusteredNodes[t];if(void 0!==e){var i=e.clusterId;if(void 0!==i)return this.body.nodes[i]}}}},{key:"_filter",value:function(t,e){var i=[];return c.forEach(t,function(t){e(t)&&i.push(t)}),i}},{key:"_updateState",value:function(){var t=this,e=void 0,i=[],n=[],r=function(e){c.forEach(t.body.nodes,function(t){!0===t.isCluster&&e(t)})};for(e in this.clusteredNodes)if(this.clusteredNodes.hasOwnProperty(e)){var s=this.body.nodes[e];void 0===s&&i.push(e)}r(function(t){for(var e=0;e<i.length;e++)delete t.containedNodes[i[e]]});for(var a=0;a<i.length;a++)delete this.clusteredNodes[i[a]];c.forEach(this.clusteredEdges,function(e){var i=t.body.edges[e];void 0!==i&&i.endPointsValid()||n.push(e)}),r(function(t){c.forEach(t.containedEdges,function(t,e){t.endPointsValid()||-1!==n.indexOf(e)||n.push(e)})}),c.forEach(this.body.edges,function(e,i){var r=!0,o=e.clusteringEdgeReplacingIds;if(void 0!==o){var s=0;c.forEach(o,function(e){var i=t.body.edges[e];void 0!==i&&i.endPointsValid()&&(s+=1)}),r=s>0}e.endPointsValid()&&r||n.push(i)}),r(function(e){c.forEach(n,function(i){delete e.containedEdges[i],c.forEach(e.edges,function(r,o){if(r.id===i)return void(e.edges[o]=null);r.clusteringEdgeReplacingIds=t._filter(r.clusteringEdgeReplacingIds,function(t){return-1===n.indexOf(t)})}),e.edges=t._filter(e.edges,function(t){return null!==t})})}),c.forEach(n,function(e){delete t.clusteredEdges[e]}),c.forEach(n,function(e){delete t.body.edges[e]});var h=(0,o.default)(this.body.edges);c.forEach(h,function(e){var i=t.body.edges[e],n=t._isClusteredNode(i.fromId)||t._isClusteredNode(i.toId);if(n!==t._isClusteredEdge(i.id)){if(!n)throw new Error("remove edge from clustering not implemented!");var r=t._getClusterNodeForNode(i.fromId);void 0!==r&&t._clusterEdges(t.body.nodes[i.fromId],i,r);var o=t._getClusterNodeForNode(i.toId);void 0!==o&&t._clusterEdges(t.body.nodes[i.toId],i,o)}});for(var l=!1,u=!0;u;)!function(){var e=[];r(function(t){var i=(0,o.default)(t.containedNodes).length,n=!0===t.options.allowSingleNodeCluster;(n&&i<1||!n&&i<2)&&e.push(t.id)});for(var i=0;i<e.length;++i)t.openCluster(e[i],{},!1);u=e.length>0,l=l||u}();l&&this._updateState()}},{key:"_isClusteredNode",value:function(t){return void 0!==this.clusteredNodes[t]}},{key:"_isClusteredEdge",value:function(t){return void 0!==this.clusteredEdges[t]}}]),t}();e.default=g},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(4),d=n(u),c=i(5),f=n(c),p=i(2),m=i(47).default,v=function(t){function e(t,i,n,r,s,h){(0,a.default)(this,e);var l=(0,d.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,i,n,r,s,h));return l.isCluster=!0,l.containedNodes={},l.containedEdges={},l}return(0,f.default)(e,t),(0,l.default)(e,[{key:"_openChildCluster",value:function(t){var e=this,i=this.body.nodes[t];if(void 0===this.containedNodes[t])throw new Error("node with id: "+t+" not in current cluster");if(!i.isCluster)throw new Error("node with id: "+t+" is not a cluster");delete this.containedNodes[t],p.forEach(i.edges,function(t){delete e.containedEdges[t.id]}),p.forEach(i.containedNodes,function(t,i){e.containedNodes[i]=t}),i.containedNodes={},p.forEach(i.containedEdges,function(t,i){e.containedEdges[i]=t}),i.containedEdges={},p.forEach(i.edges,function(t){p.forEach(e.edges,function(i){var n=i.clusteringEdgeReplacingIds.indexOf(t.id);-1!==n&&(p.forEach(t.clusteringEdgeReplacingIds,function(t){i.clusteringEdgeReplacingIds.push(t),e.body.edges[t].edgeReplacedById=i.id}),i.clusteringEdgeReplacingIds.splice(n,1))})}),i.edges=[]}}]),e}(m);e.default=v},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function r(){var t;void 0!==window&&(t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),window.requestAnimationFrame=void 0===t?function(t){t()}:t}Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),s=n(o),a=i(1),h=n(a),l=i(2),u=function(){function t(e,i){(0,s.default)(this,t),r(),this.body=e,this.canvas=i,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideNodesOnDrag:!1},l.extend(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return(0,h.default)(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("dragStart",function(){t.dragging=!0}),this.body.emitter.on("dragEnd",function(){t.dragging=!1}),this.body.emitter.on("_resizeNodes",function(){t._resizeNodes()}),this.body.emitter.on("_redraw",function(){!1===t.renderingActive&&t._redraw()}),this.body.emitter.on("_blockRedraw",function(){t.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",function(){t.allowRedraw=!0,t.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",this._requestRedraw.bind(this)),this.body.emitter.on("_startRendering",function(){t.renderRequests+=1,t.renderingActive=!0,t._startRendering()}),this.body.emitter.on("_stopRendering",function(){t.renderRequests-=1,t.renderingActive=t.renderRequests>0,t.renderTimer=void 0}),this.body.emitter.on("destroy",function(){t.renderRequests=0,t.allowRedraw=!1,t.renderingActive=!1,!0===t.requiresTimeout?clearTimeout(t.renderTimer):window.cancelAnimationFrame(t.renderTimer),t.body.emitter.off()})}},{key:"setOptions",value:function(t){if(void 0!==t){var e=["hideEdgesOnDrag","hideNodesOnDrag"];l.selectiveDeepExtend(e,this.options,t)}}},{key:"_requestNextFrame",value:function(t,e){if("undefined"!==typeof window){var i=void 0,n=window;return!0===this.requiresTimeout?i=n.setTimeout(t,e):n.requestAnimationFrame&&(i=n.requestAnimationFrame(t)),i}}},{key:"_startRendering",value:function(){!0===this.renderingActive&&void 0===this.renderTimer&&(this.renderTimer=this._requestNextFrame(this._renderStep.bind(this),this.simulationInterval))}},{key:"_renderStep",value:function(){!0===this.renderingActive&&(this.renderTimer=void 0,!0===this.requiresTimeout&&this._startRendering(),this._redraw(),!1===this.requiresTimeout&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var t=this;!0!==this.redrawRequested&&!1===this.renderingActive&&!0===this.allowRedraw&&(this.redrawRequested=!0,this._requestNextFrame(function(){t._redraw(!1)},0))}},{key:"_redraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.allowRedraw){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1,0!==this.canvas.frame.canvas.width&&0!==this.canvas.frame.canvas.height||this.canvas.setSize(),this.canvas.setTransform();var e=this.canvas.getContext(),i=this.canvas.frame.canvas.clientWidth,n=this.canvas.frame.canvas.clientHeight;if(e.clearRect(0,0,i,n),0===this.canvas.frame.clientWidth)return;e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale),e.beginPath(),this.body.emitter.emit("beforeDrawing",e),e.closePath(),!1===t&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&this._drawEdges(e),(!1===this.dragging||!0===this.dragging&&!1===this.options.hideNodesOnDrag)&&this._drawNodes(e,t),e.beginPath(),this.body.emitter.emit("afterDrawing",e),e.closePath(),e.restore(),!0===t&&e.clearRect(0,0,i,n)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var t=this.canvas.getContext();t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale);var e=this.body.nodes,i=void 0;for(var n in e)e.hasOwnProperty(n)&&(i=e[n],i.resize(t),i.updateBoundingBox(t,i.selected));t.restore()}},{key:"_drawNodes",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.body.nodes,n=this.body.nodeIndices,r=void 0,o=[],s=this.canvas.DOMtoCanvas({x:-20,y:-20}),a=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+20,y:this.canvas.frame.canvas.clientHeight+20}),h={top:s.y,left:s.x,bottom:a.y,right:a.x},l=0;l<n.length;l++)r=i[n[l]],r.isSelected()?o.push(n[l]):!0===e?r.draw(t):!0===r.isBoundingBoxOverlappingWith(h)?r.draw(t):r.updateBoundingBox(t,r.selected);for(var u=0;u<o.length;u++)r=i[o[u]],r.draw(t)}},{key:"_drawEdges",value:function(t){for(var e=this.body.edges,i=this.body.edgeIndices,n=void 0,r=0;r<i.length;r++)n=e[i[r]],!0===n.connected&&n.draw(t)}},{key:"_determineBrowserMethod",value:function(){if("undefined"!==typeof window){var t=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,-1!=t.indexOf("msie 9.0")?this.requiresTimeout=!0:-1!=t.indexOf("safari")&&t.indexOf("chrome")<=-1&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}}]),t}();e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=i(10),l=i(37),u=i(2),d=function(){function t(e){(0,o.default)(this,t),this.body=e,this.pixelRatio=1,this.resizeTimer=void 0,this.resizeFunction=this._onResize.bind(this),this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},u.extend(this.options,this.defaultOptions),this.bindEventListeners()}return(0,a.default)(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.once("resize",function(e){0!==e.width&&(t.body.view.translation.x=.5*e.width),0!==e.height&&(t.body.view.translation.y=.5*e.height)}),this.body.emitter.on("setSize",this.setSize.bind(this)),this.body.emitter.on("destroy",function(){t.hammerFrame.destroy(),t.hammer.destroy(),t._cleanUp()})}},{key:"setOptions",value:function(t){var e=this;if(void 0!==t){var i=["width","height","autoResize"];u.selectiveDeepExtend(i,this.options,t)}!0===this.options.autoResize&&(this._cleanUp(),this.resizeTimer=setInterval(function(){!0===e.setSize()&&e.body.emitter.emit("_requestRedraw")},1e3),this.resizeFunction=this._onResize.bind(this),u.addEventListener(window,"resize",this.resizeFunction))}},{key:"_cleanUp",value:function(){void 0!==this.resizeTimer&&clearInterval(this.resizeTimer),u.removeEventListener(window,"resize",this.resizeFunction),this.resizeFunction=void 0}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pixelRatio;!0===this.initialized&&(this.cameraState.previousWidth=this.frame.canvas.width/t,this.cameraState.previousHeight=this.frame.canvas.height/t,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/t,y:.5*this.frame.canvas.height/t}))}},{key:"_setCameraState",value:function(){if(void 0!==this.cameraState.scale&&0!==this.frame.canvas.clientWidth&&0!==this.frame.canvas.clientHeight&&0!==this.pixelRatio&&this.cameraState.previousWidth>0){var t=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,e=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,i=this.cameraState.scale;1!=t&&1!=e?i=.5*this.cameraState.scale*(t+e):1!=t?i=this.cameraState.scale*t:1!=e&&(i=this.cameraState.scale*e),this.body.view.scale=i;var n=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),r={x:n.x-this.cameraState.position.x,y:n.y-this.cameraState.position.y};this.body.view.translation.x+=r.x*this.body.view.scale,this.body.view.translation.y+=r.y*this.body.view.scale}}},{key:"_prepareValue",value:function(t){if("number"===typeof t)return t+"px";if("string"===typeof t){if(-1!==t.indexOf("%")||-1!==t.indexOf("px"))return t;if(-1===t.indexOf("%"))return t+"px"}throw new Error("Could not use the value supplied for width or height:"+t)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=900,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var t=this;void 0!==this.hammer&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new h(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:h.DIRECTION_ALL}),l.onTouch(this.hammer,function(e){t.body.eventListeners.onTouch(e)}),this.hammer.on("tap",function(e){t.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",function(e){t.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",function(e){t.body.eventListeners.onHold(e)}),this.hammer.on("panstart",function(e){t.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",function(e){t.body.eventListeners.onDrag(e)}),this.hammer.on("panend",function(e){t.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",function(e){t.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("mousewheel",function(e){t.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("DOMMouseScroll",function(e){t.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",function(e){t.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",function(e){t.body.eventListeners.onContext(e)}),this.hammerFrame=new h(this.frame),l.onRelease(this.hammerFrame,function(e){t.body.eventListeners.onRelease(e)})}},{key:"setSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.width,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.height;t=this._prepareValue(t),e=this._prepareValue(e);var i=!1,n=this.frame.canvas.width,r=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),t!=this.options.width||e!=this.options.height||this.frame.style.width!=t||this.frame.style.height!=e)this._getCameraState(o),this.frame.style.width=t,this.frame.style.height=e,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=t,this.options.height=e,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},i=!0;else{var s=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),a=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);this.frame.canvas.width===s&&this.frame.canvas.height===a||this._getCameraState(o),this.frame.canvas.width!==s&&(this.frame.canvas.width=s,i=!0),this.frame.canvas.height!==a&&(this.frame.canvas.height=a,i=!0)}return!0===i&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(n/this.pixelRatio),oldHeight:Math.round(r/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,i}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");var e=1;return"undefined"!==typeof window&&(e=window.devicePixelRatio||1),e/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}}},{key:"DOMtoCanvas",value:function(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}}}]),t}();e.default=d},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=i(2),l=i(76).default,u=function(){function t(e,i){var n=this;(0,o.default)(this,t),this.body=e,this.canvas=i,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",this.fit.bind(this)),this.body.emitter.on("animationFinished",function(){n.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",this.releaseNode.bind(this))}return(0,a.default)(t,[{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t}},{key:"fit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{nodes:[]},e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=void 0,n=void 0;if(void 0!==t.nodes&&0!==t.nodes.length||(t.nodes=this.body.nodeIndices),!0===e){var r=0;for(var o in this.body.nodes)if(this.body.nodes.hasOwnProperty(o)){var s=this.body.nodes[o];!0===s.predefinedPosition&&(r+=1)}if(r>.5*this.body.nodeIndices.length)return void this.fit(t,!1);i=l.getRange(this.body.nodes,t.nodes);n=12.662/(this.body.nodeIndices.length+7.4147)+.0964822;n*=Math.min(this.canvas.frame.canvas.clientWidth/600,this.canvas.frame.canvas.clientHeight/600)}else{this.body.emitter.emit("_resizeNodes"),i=l.getRange(this.body.nodes,t.nodes);var a=1.1*Math.abs(i.maxX-i.minX),h=1.1*Math.abs(i.maxY-i.minY),u=this.canvas.frame.canvas.clientWidth/a,d=this.canvas.frame.canvas.clientHeight/h;n=u<=d?u:d}n>1?n=1:0===n&&(n=1);var c=l.findCenter(i),f={position:c,scale:n,animation:t.animation};this.moveTo(f)}},{key:"focus",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==this.body.nodes[t]){var i={x:this.body.nodes[t].x,y:this.body.nodes[t].y};e.position=i,e.lockedOnNode=t,this.moveTo(e)}else console.log("Node: "+t+" cannot be found.")}},{key:"moveTo",value:function(t){if(void 0===t)return void(t={});void 0===t.offset&&(t.offset={x:0,y:0}),void 0===t.offset.x&&(t.offset.x=0),void 0===t.offset.y&&(t.offset.y=0),void 0===t.scale&&(t.scale=this.body.view.scale),void 0===t.position&&(t.position=this.getViewPosition()),void 0===t.animation&&(t.animation={duration:0}),!1===t.animation&&(t.animation={duration:0}),!0===t.animation&&(t.animation={}),void 0===t.animation.duration&&(t.animation.duration=1e3),void 0===t.animation.easingFunction&&(t.animation.easingFunction="easeInOutQuad"),this.animateView(t)}},{key:"animateView",value:function(t){if(void 0!==t){this.animationEasingFunction=t.animation.easingFunction,this.releaseNode(),!0===t.locked&&(this.lockedOnNodeId=t.lockedOnNode,this.lockedOnNodeOffset=t.offset),0!=this.easingTime&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=t.scale,this.body.view.scale=this.targetScale;var e=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:e.x-t.position.x,y:e.y-t.position.y};this.targetTranslation={x:this.sourceTranslation.x+i.x*this.targetScale+t.offset.x,y:this.sourceTranslation.y+i.y*this.targetScale+t.offset.y},0===t.animation.duration?void 0!=this.lockedOnNodeId?(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)):(this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw")):(this.animationSpeed=1/(60*t.animation.duration*.001)||1/60,this.animationEasingFunction=t.animation.easingFunction,this.viewFunction=this._transitionRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))}}},{key:"_lockedRedraw",value:function(){var t={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},e=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i={x:e.x-t.x,y:e.y-t.y},n=this.body.view.translation,r={x:n.x+i.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:n.y+i.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=r}},{key:"releaseNode",value:function(){void 0!==this.lockedOnNodeId&&void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.easingTime+=this.animationSpeed,this.easingTime=!0===t?1:this.easingTime;var e=h.easingFunctions[this.animationEasingFunction](this.easingTime);this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*e,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*e,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*e},this.easingTime>=1&&(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,void 0!=this.lockedOnNodeId&&(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)),this.body.emitter.emit("animationFinished"))}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),t}();e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=i(2),l=i(233).default,u=i(104).default,d=function(){function t(e,i,n){(0,o.default)(this,t),this.body=e,this.canvas=i,this.selectionHandler=n,this.navigationHandler=new l(e,i),this.body.eventListeners.onTap=this.onTap.bind(this),this.body.eventListeners.onTouch=this.onTouch.bind(this),this.body.eventListeners.onDoubleTap=this.onDoubleTap.bind(this),this.body.eventListeners.onHold=this.onHold.bind(this),this.body.eventListeners.onDragStart=this.onDragStart.bind(this),this.body.eventListeners.onDrag=this.onDrag.bind(this),this.body.eventListeners.onDragEnd=this.onDragEnd.bind(this),this.body.eventListeners.onMouseWheel=this.onMouseWheel.bind(this),this.body.eventListeners.onPinch=this.onPinch.bind(this),this.body.eventListeners.onMouseMove=this.onMouseMove.bind(this),this.body.eventListeners.onRelease=this.onRelease.bind(this),this.body.eventListeners.onContext=this.onContext.bind(this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=this.getPointer.bind(this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0},h.extend(this.options,this.defaultOptions),this.bindEventListeners()}return(0,a.default)(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("destroy",function(){clearTimeout(t.popupTimer),delete t.body.functions.getPointer})}},{key:"setOptions",value:function(t){if(void 0!==t){var e=["hideEdgesOnDrag","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"];h.selectiveNotDeepExtend(e,this.options,t),h.mergeOptions(this.options,t,"keyboard"),t.tooltip&&(h.extend(this.options.tooltip,t.tooltip),t.tooltip.color&&(this.options.tooltip.color=h.parseColor(t.tooltip.color)))}this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(t){return{x:t.x-h.getAbsoluteLeft(this.canvas.frame.canvas),y:t.y-h.getAbsoluteTop(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(t){(new Date).valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(t.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=(new Date).valueOf())}},{key:"onTap",value:function(t){var e=this.getPointer(t.center),i=this.selectionHandler.options.multiselect&&(t.changedPointers[0].ctrlKey||t.changedPointers[0].metaKey);this.checkSelectionChanges(e,t,i),this.selectionHandler._generateClickEvent("click",t,e)}},{key:"onDoubleTap",value:function(t){var e=this.getPointer(t.center);this.selectionHandler._generateClickEvent("doubleClick",t,e)}},{key:"onHold",value:function(t){var e=this.getPointer(t.center),i=this.selectionHandler.options.multiselect;this.checkSelectionChanges(e,t,i),this.selectionHandler._generateClickEvent("click",t,e),this.selectionHandler._generateClickEvent("hold",t,e)}},{key:"onRelease",value:function(t){if((new Date).valueOf()-this.touchTime>10){var e=this.getPointer(t.center);this.selectionHandler._generateClickEvent("release",t,e),this.touchTime=(new Date).valueOf()}}},{key:"onContext",value:function(t){var e=this.getPointer({x:t.clientX,y:t.clientY});this.selectionHandler._generateClickEvent("oncontext",t,e)}},{key:"checkSelectionChanges",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.selectionHandler.getSelection(),r=!1;r=!0===i?this.selectionHandler.selectAdditionalOnPoint(t):this.selectionHandler.selectOnPoint(t);var o=this.selectionHandler.getSelection(),s=this._determineDifference(n,o),a=this._determineDifference(o,n);s.edges.length>0&&(this.selectionHandler._generateClickEvent("deselectEdge",e,t,n),r=!0),s.nodes.length>0&&(this.selectionHandler._generateClickEvent("deselectNode",e,t,n),r=!0),a.nodes.length>0&&(this.selectionHandler._generateClickEvent("selectNode",e,t),r=!0),a.edges.length>0&&(this.selectionHandler._generateClickEvent("selectEdge",e,t),r=!0),!0===r&&this.selectionHandler._generateClickEvent("select",e,t)}},{key:"_determineDifference",value:function(t,e){var i=function(t,e){for(var i=[],n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&i.push(r)}return i};return{nodes:i(t.nodes,e.nodes),edges:i(t.edges,e.edges)}}},{key:"onDragStart",value:function(t){void 0===this.drag.pointer&&this.onTouch(t);var e=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=h.extend({},this.body.view.translation),this.drag.nodeId=void 0,void 0!==e&&!0===this.options.dragNodes){this.drag.nodeId=e.id,!1===e.isSelected()&&(this.selectionHandler.unselectAll(),this.selectionHandler.selectObject(e)),this.selectionHandler._generateClickEvent("dragStart",t,this.drag.pointer);var i=this.selectionHandler.selectionObj.nodes;for(var n in i)if(i.hasOwnProperty(n)){var r=i[n],o={id:r.id,node:r,x:r.x,y:r.y,xFixed:r.options.fixed.x,yFixed:r.options.fixed.y};r.options.fixed.x=!0,r.options.fixed.y=!0,this.drag.selection.push(o)}}else this.selectionHandler._generateClickEvent("dragStart",t,this.drag.pointer,void 0,!0)}},{key:"onDrag",value:function(t){var e=this;if(!0!==this.drag.pinched){this.body.emitter.emit("unlockNode");var i=this.getPointer(t.center),n=this.drag.selection;if(n&&n.length&&!0===this.options.dragNodes){this.selectionHandler._generateClickEvent("dragging",t,i);var r=i.x-this.drag.pointer.x,o=i.y-this.drag.pointer.y;n.forEach(function(t){var i=t.node;!1===t.xFixed&&(i.x=e.canvas._XconvertDOMtoCanvas(e.canvas._XconvertCanvasToDOM(t.x)+r)),!1===t.yFixed&&(i.y=e.canvas._YconvertDOMtoCanvas(e.canvas._YconvertCanvasToDOM(t.y)+o))}),this.body.emitter.emit("startSimulation")}else if(!0===this.options.dragView){if(this.selectionHandler._generateClickEvent("dragging",t,i,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(t);var s=i.x-this.drag.pointer.x,a=i.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+s,y:this.drag.translation.y+a},this.body.emitter.emit("_requestRedraw")}}}},{key:"onDragEnd",value:function(t){this.drag.dragging=!1;var e=this.drag.selection;e&&e.length?(e.forEach(function(t){t.node.options.fixed.x=t.xFixed,t.node.options.fixed.y=t.yFixed}),this.selectionHandler._generateClickEvent("dragEnd",t,this.getPointer(t.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler._generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}},{key:"onPinch",value:function(t){var e=this.getPointer(t.center);this.drag.pinched=!0,void 0===this.pinch.scale&&(this.pinch.scale=1);var i=this.pinch.scale*t.scale;this.zoom(i,e)}},{key:"zoom",value:function(t,e){if(!0===this.options.zoomView){var i=this.body.view.scale;t<1e-5&&(t=1e-5),t>10&&(t=10);var n=void 0;void 0!==this.drag&&!0===this.drag.dragging&&(n=this.canvas.DOMtoCanvas(this.drag.pointer));var r=this.body.view.translation,o=t/i,s=(1-o)*e.x+r.x*o,a=(1-o)*e.y+r.y*o;if(this.body.view.scale=t,this.body.view.translation={x:s,y:a},void 0!=n){var h=this.canvas.canvasToDOM(n);this.drag.pointer.x=h.x,this.drag.pointer.y=h.y}this.body.emitter.emit("_requestRedraw"),i<t?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:e}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:e})}}},{key:"onMouseWheel",value:function(t){if(!0===this.options.zoomView){var e=0;if(t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),0!==e){var i=this.body.view.scale,n=e/10;e<0&&(n/=1-n),i*=1+n;var r=this.getPointer({x:t.clientX,y:t.clientY});this.zoom(i,r)}t.preventDefault()}}},{key:"onMouseMove",value:function(t){var e=this,i=this.getPointer({x:t.clientX,y:t.clientY}),n=!1;void 0!==this.popup&&(!1===this.popup.hidden&&this._checkHidePopup(i),!1===this.popup.hidden&&(n=!0,this.popup.setPosition(i.x+3,i.y-5),this.popup.show())),!1===this.options.keyboard.bindToWindow&&!0===this.options.keyboard.enabled&&this.canvas.frame.focus(),!1===n&&(void 0!==this.popupTimer&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=setTimeout(function(){return e._checkShowPopup(i)},this.options.tooltipDelay))),!0===this.options.hover&&this.selectionHandler.hoverObject(t,i)}},{key:"_checkShowPopup",value:function(t){var e=this.canvas._XconvertDOMtoCanvas(t.x),i=this.canvas._YconvertDOMtoCanvas(t.y),n={left:e,top:i,right:e,bottom:i},r=void 0===this.popupObj?void 0:this.popupObj.id,o=!1,s="node";if(void 0===this.popupObj){for(var a=this.body.nodeIndices,h=this.body.nodes,l=void 0,d=[],c=0;c<a.length;c++)l=h[a[c]],!0===l.isOverlappingWith(n)&&void 0!==l.getTitle()&&d.push(a[c]);d.length>0&&(this.popupObj=h[d[d.length-1]],o=!0)}if(void 0===this.popupObj&&!1===o){for(var f=this.body.edgeIndices,p=this.body.edges,m=void 0,v=[],g=0;g<f.length;g++)m=p[f[g]],!0===m.isOverlappingWith(n)&&!0===m.connected&&void 0!==m.getTitle()&&v.push(f[g]);v.length>0&&(this.popupObj=p[v[v.length-1]],s="edge")}void 0!==this.popupObj?this.popupObj.id!==r&&(void 0===this.popup&&(this.popup=new u(this.canvas.frame)),this.popup.popupTargetType=s,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(t.x+3,t.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):void 0!==this.popup&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(t){var e=this.selectionHandler._pointerToPositionObject(t),i=!1;if("node"===this.popup.popupTargetType){if(void 0!==this.body.nodes[this.popup.popupTargetId]&&!0===(i=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(e))){var n=this.selectionHandler.getNodeAt(t);i=void 0!==n&&n.id===this.popup.popupTargetId}}else void 0===this.selectionHandler.getNodeAt(t)&&void 0!==this.body.edges[this.popup.popupTargetId]&&(i=this.body.edges[this.popup.popupTargetId].isOverlappingWith(e));!1===i&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),t}();e.default=d},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=i(10),l=i(37),u=i(35),d=function(){function t(e,i){var n=this;(0,o.default)(this,t),this.body=e,this.canvas=i,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",function(){n.activated=!0,n.configureKeyboardBindings()}),this.body.emitter.on("deactivate",function(){n.activated=!1,n.configureKeyboardBindings()}),this.body.emitter.on("destroy",function(){void 0!==n.keycharm&&n.keycharm.destroy()}),this.options={}}return(0,a.default)(t,[{key:"setOptions",value:function(t){void 0!==t&&(this.options=t,this.create())}},{key:"create",value:function(){!0===this.options.navigationButtons?!1===this.iconsCreated&&this.loadNavigationElements():!0===this.iconsCreated&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(0!=this.navigationHammers.length){for(var t=0;t<this.navigationHammers.length;t++)this.navigationHammers[t].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var t=this;this.cleanNavigation(),this.navigationDOM={};var e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],i=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var n=0;n<e.length;n++){this.navigationDOM[e[n]]=document.createElement("div"),this.navigationDOM[e[n]].className="vis-button vis-"+e[n],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[n]]);var r=new h(this.navigationDOM[e[n]]);"_fit"===i[n]?l.onTouch(r,this._fit.bind(this)):l.onTouch(r,this.bindToRedraw.bind(this,i[n])),this.navigationHammers.push(r)}var o=new h(this.canvas.frame);l.onRelease(o,function(){t._stopMovement()}),this.navigationHammers.push(o),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(t){void 0===this.boundFunctions[t]&&(this.boundFunctions[t]=this[t].bind(this),this.body.emitter.on("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(t){void 0!==this.boundFunctions[t]&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[t])}},{key:"_fit",value:function(){(new Date).valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=(new Date).valueOf())}},{key:"_stopMovement",value:function(){for(var t in this.boundFunctions)this.boundFunctions.hasOwnProperty(t)&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var t=this.body.view.scale,e=this.body.view.scale*(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,n=e/t,r=(1-n)*this.canvas.canvasViewCenter.x+i.x*n,o=(1-n)*this.canvas.canvasViewCenter.y+i.y*n;this.body.view.scale=e,this.body.view.translation={x:r,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var t=this.body.view.scale,e=this.body.view.scale/(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,n=e/t,r=(1-n)*this.canvas.canvasViewCenter.x+i.x*n,o=(1-n)*this.canvas.canvasViewCenter.y+i.y*n;this.body.view.scale=e,this.body.view.translation={x:r,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var t=this;void 0!==this.keycharm&&this.keycharm.destroy(),!0===this.options.keyboard.enabled&&(!0===this.options.keyboard.bindToWindow?this.keycharm=u({container:window,preventDefault:!0}):this.keycharm=u({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),!0===this.activated&&(this.keycharm.bind("up",function(){t.bindToRedraw("_moveUp")},"keydown"),this.keycharm.bind("down",function(){t.bindToRedraw("_moveDown")},"keydown"),this.keycharm.bind("left",function(){t.bindToRedraw("_moveLeft")},"keydown"),this.keycharm.bind("right",function(){t.bindToRedraw("_moveRight")},"keydown"),this.keycharm.bind("=",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num+",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num-",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("-",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("[",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("]",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pageup",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pagedown",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("up",function(){t.unbindFromRedraw("_moveUp")},"keyup"),this.keycharm.bind("down",function(){t.unbindFromRedraw("_moveDown")},"keyup"),this.keycharm.bind("left",function(){t.unbindFromRedraw("_moveLeft")},"keyup"),this.keycharm.bind("right",function(){t.unbindFromRedraw("_moveRight")},"keyup"),this.keycharm.bind("=",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num+",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("[",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("]",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pageup",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pagedown",function(){t.unbindFromRedraw("_zoomOut")},"keyup")))}}]),t}();e.default=d},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=i(47).default,l=i(74).default,u=i(2),d=function(){function t(e,i){var n=this;(0,o.default)(this,t),this.body=e,this.canvas=i,this.selectionObj={nodes:[],edges:[]},this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},u.extend(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",function(){n.updateSelection()})}return(0,a.default)(t,[{key:"setOptions",value:function(t){if(void 0!==t){var e=["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"];u.selectiveDeepExtend(e,this.options,t)}}},{key:"selectOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var i=this.getNodeAt(t)||this.getEdgeAt(t);this.unselectAll(),void 0!==i&&(e=this.selectObject(i)),this.body.emitter.emit("_requestRedraw")}return e}},{key:"selectAdditionalOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var i=this.getNodeAt(t)||this.getEdgeAt(t);void 0!==i&&(e=!0,!0===i.isSelected()?this.deselectObject(i):this.selectObject(i),this.body.emitter.emit("_requestRedraw"))}return e}},{key:"_initBaseEvent",value:function(t,e){var i={};return i.pointer={DOM:{x:e.x,y:e.y},canvas:this.canvas.DOMtoCanvas(e)},i.event=t,i}},{key:"_generateClickEvent",value:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this._initBaseEvent(e,i);if(!0===r)o.nodes=[],o.edges=[];else{var s=this.getSelection();o.nodes=s.nodes,o.edges=s.edges}void 0!==n&&(o.previousSelection=n),"click"==t&&(o.items=this.getClickedItems(i)),this.body.emitter.emit(t,o)}},{key:"selectObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.selectConnectedEdges;return void 0!==t&&(t instanceof h&&!0===e&&this._selectConnectedEdges(t),t.select(),this._addToSelection(t),!0)}},{key:"deselectObject",value:function(t){!0===t.isSelected()&&(t.selected=!1,this._removeFromSelection(t))}},{key:"_getAllNodesOverlappingWith",value:function(t){for(var e=[],i=this.body.nodes,n=0;n<this.body.nodeIndices.length;n++){var r=this.body.nodeIndices[n];i[r].isOverlappingWith(t)&&e.push(r)}return e}},{key:"_pointerToPositionObject",value:function(t){var e=this.canvas.DOMtoCanvas(t);return{left:e.x-1,top:e.y+1,right:e.x+1,bottom:e.y-1}}},{key:"getNodeAt",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._pointerToPositionObject(t),n=this._getAllNodesOverlappingWith(i);return n.length>0?!0===e?this.body.nodes[n[n.length-1]]:n[n.length-1]:void 0}},{key:"_getEdgesOverlappingWith",value:function(t,e){for(var i=this.body.edges,n=0;n<this.body.edgeIndices.length;n++){var r=this.body.edgeIndices[n];i[r].isOverlappingWith(t)&&e.push(r)}}},{key:"_getAllEdgesOverlappingWith",value:function(t){var e=[];return this._getEdgesOverlappingWith(t,e),e}},{key:"getEdgeAt",value:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.canvas.DOMtoCanvas(t),n=10,r=null,o=this.body.edges,s=0;s<this.body.edgeIndices.length;s++){var a=this.body.edgeIndices[s],h=o[a];if(h.connected){var l=h.from.x,u=h.from.y,d=h.to.x,c=h.to.y,f=h.edgeType.getDistanceToEdge(l,u,d,c,i.x,i.y);f<n&&(r=a,n=f)}}return null!==r?!0===e?this.body.edges[r]:r:void 0}},{key:"_addToSelection",value:function(t){t instanceof h?this.selectionObj.nodes[t.id]=t:this.selectionObj.edges[t.id]=t}},{key:"_addToHover",value:function(t){t instanceof h?this.hoverObj.nodes[t.id]=t:this.hoverObj.edges[t.id]=t}},{key:"_removeFromSelection",value:function(t){t instanceof h?(delete this.selectionObj.nodes[t.id],this._unselectConnectedEdges(t)):delete this.selectionObj.edges[t.id]}},{key:"unselectAll",value:function(){for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&this.selectionObj.nodes[t].unselect();for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&this.selectionObj.edges[e].unselect();this.selectionObj={nodes:{},edges:{}}}},{key:"_getSelectedNodeCount",value:function(){var t=0;for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(t+=1);return t}},{key:"_getSelectedNode",value:function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t))return this.selectionObj.nodes[t]}},{key:"_getSelectedEdge",value:function(){for(var t in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(t))return this.selectionObj.edges[t]}},{key:"_getSelectedEdgeCount",value:function(){var t=0;for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&(t+=1);return t}},{key:"_getSelectedObjectCount",value:function(){var t=0;for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(t+=1);for(var i in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(i)&&(t+=1);return t}},{key:"_selectionIsEmpty",value:function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t))return!1;for(var e in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(e))return!1;return!0}},{key:"_clusterInSelection",value:function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t)&&this.selectionObj.nodes[t].clusterSize>1)return!0;return!1}},{key:"_selectConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var i=t.edges[e];i.select(),this._addToSelection(i)}}},{key:"_hoverConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var i=t.edges[e];i.hover=!0,this._addToHover(i)}}},{key:"_unselectConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var i=t.edges[e];i.unselect(),this._removeFromSelection(i)}}},{key:"emitBlurEvent",value:function(t,e,i){var n=this._initBaseEvent(t,e);!0===i.hover&&(i.hover=!1,i instanceof h?(n.node=i.id,this.body.emitter.emit("blurNode",n)):(n.edge=i.id,this.body.emitter.emit("blurEdge",n)))}},{key:"emitHoverEvent",value:function(t,e,i){var n=this._initBaseEvent(t,e),r=!1;return!1===i.hover&&(i.hover=!0,this._addToHover(i),r=!0,i instanceof h?(n.node=i.id,this.body.emitter.emit("hoverNode",n)):(n.edge=i.id,this.body.emitter.emit("hoverEdge",n))),r}},{key:"hoverObject",value:function(t,e){var i=this.getNodeAt(e);void 0===i&&(i=this.getEdgeAt(e));var n=!1;for(var r in this.hoverObj.nodes)this.hoverObj.nodes.hasOwnProperty(r)&&(void 0===i||i instanceof h&&i.id!=r||i instanceof l)&&(this.emitBlurEvent(t,e,this.hoverObj.nodes[r]),delete this.hoverObj.nodes[r],n=!0);for(var o in this.hoverObj.edges)this.hoverObj.edges.hasOwnProperty(o)&&(!0===n?(this.hoverObj.edges[o].hover=!1,delete this.hoverObj.edges[o]):(void 0===i||i instanceof l&&i.id!=o||i instanceof h&&!i.hover)&&(this.emitBlurEvent(t,e,this.hoverObj.edges[o]),delete this.hoverObj.edges[o],n=!0));void 0!==i&&(n=n||this.emitHoverEvent(t,e,i),i instanceof h&&!0===this.options.hoverConnectedEdges&&this._hoverConnectedEdges(i)),!0===n&&this.body.emitter.emit("_requestRedraw")}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodes(),edges:this.getSelectedEdges()}}},{key:"getSelectedNodes",value:function(){var t=[];if(!0===this.options.selectable)for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&t.push(this.selectionObj.nodes[e].id);return t}},{key:"getSelectedEdges",value:function(){var t=[];if(!0===this.options.selectable)for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&t.push(this.selectionObj.edges[e].id);return t}},{key:"setSelection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=void 0,n=void 0;if(!t||!t.nodes&&!t.edges)throw"Selection must be an object with nodes and/or edges properties";if((e.unselectAll||void 0===e.unselectAll)&&this.unselectAll(),t.nodes)for(i=0;i<t.nodes.length;i++){n=t.nodes[i];var r=this.body.nodes[n];if(!r)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(r,e.highlightEdges)}if(t.edges)for(i=0;i<t.edges.length;i++){n=t.edges[i];var o=this.body.edges[n];if(!o)throw new RangeError('Edge with id "'+n+'" not found');this.selectObject(o)}this.body.emitter.emit("_requestRedraw")}},{key:"selectNodes",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({nodes:t},{highlightEdges:e})}},{key:"selectEdges",value:function(t){if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({edges:t})}},{key:"updateSelection",value:function(){for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&(this.body.nodes.hasOwnProperty(t)||delete this.selectionObj.nodes[t]);for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&(this.body.edges.hasOwnProperty(e)||delete this.selectionObj.edges[e])}},{key:"getClickedItems",value:function(t){for(var e=this.canvas.DOMtoCanvas(t),i=[],n=this.body.nodeIndices,r=this.body.nodes,o=n.length-1;o>=0;o--){var s=r[n[o]],a=s.getItemsOnPoint(e);i.push.apply(i,a)}for(var h=this.body.edgeIndices,l=this.body.edges,u=h.length-1;u>=0;u--){var d=l[h[u]],c=d.getItemsOnPoint(e);i.push.apply(i,c)}return i}}]),t}();e.default=d},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(30),o=n(r),s=i(6),a=n(s),h=i(8),l=n(h),u=i(0),d=n(u),c=i(1),f=n(c),p=i(2),m=i(76).default,v=i(236),g=v.HorizontalStrategy,y=v.VerticalStrategy,b=function(){function t(){(0,d.default)(this,t),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}return(0,f.default)(t,[{key:"addRelation",value:function(t,e){void 0===this.childrenReference[t]&&(this.childrenReference[t]=[]),this.childrenReference[t].push(e),void 0===this.parentReference[e]&&(this.parentReference[e]=[]),this.parentReference[e].push(t)}},{key:"checkIfTree",value:function(){for(var t in this.parentReference)if(this.parentReference[t].length>1)return void(this.isTree=!1);this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(t,e){void 0!==e&&void 0===this.trees[t.id]&&(this.trees[t.id]=e,this.treeIndex=Math.max(e,this.treeIndex))}},{key:"ensureLevel",value:function(t){void 0===this.levels[t]&&(this.levels[t]=0)}},{key:"getMaxLevel",value:function(t){var e=this,i={};return function t(n){if(void 0!==i[n])return i[n];var r=e.levels[n];if(e.childrenReference[n]){var o=e.childrenReference[n];if(o.length>0)for(var s=0;s<o.length;s++)r=Math.max(r,t(o[s]))}return i[n]=r,r}(t)}},{key:"levelDownstream",value:function(t,e){void 0===this.levels[e.id]&&(void 0===this.levels[t.id]&&(this.levels[t.id]=0),this.levels[e.id]=this.levels[t.id]+1)}},{key:"setMinLevelToZero",value:function(t){var e=1e9;for(var i in t)t.hasOwnProperty(i)&&void 0!==this.levels[i]&&(e=Math.min(this.levels[i],e));for(var n in t)t.hasOwnProperty(n)&&void 0!==this.levels[n]&&(this.levels[n]-=e)}},{key:"getTreeSize",value:function(t,e){var i=1e9,n=-1e9,r=1e9,o=-1e9;for(var s in this.trees)if(this.trees.hasOwnProperty(s)&&this.trees[s]===e){var a=t[s];i=Math.min(a.x,i),n=Math.max(a.x,n),r=Math.min(a.y,r),o=Math.max(a.y,o)}return{min_x:i,max_x:n,min_y:r,max_y:o}}},{key:"hasSameParent",value:function(t,e){var i=this.parentReference[t.id],n=this.parentReference[e.id];if(void 0===i||void 0===n)return!1;for(var r=0;r<i.length;r++)for(var o=0;o<n.length;o++)if(i[r]==n[o])return!0;return!1}},{key:"inSameSubNetwork",value:function(t,e){return this.trees[t.id]===this.trees[e.id]}},{key:"getLevels",value:function(){return(0,l.default)(this.distributionOrdering)}},{key:"addToOrdering",value:function(t,e){void 0===this.distributionOrdering[e]&&(this.distributionOrdering[e]=[]);var i=!1,n=this.distributionOrdering[e];for(var r in n)if(n[r]===t){i=!0;break}i||(this.distributionOrdering[e].push(t),this.distributionIndex[t.id]=this.distributionOrdering[e].length-1)}}]),t}(),_=function(){function t(e){(0,d.default)(this,t),this.body=e,this.initialRandomSeed=Math.round(1e6*Math.random()),this.randomSeed=this.initialRandomSeed,this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},p.extend(this.options,this.defaultOptions),this.bindEventListeners()}return(0,f.default)(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("_dataChanged",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",function(){t.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",function(){if(!0===t.options.hierarchical.enabled){var e=t.direction.curveType();t.body.emitter.emit("_forceDisableDynamicCurves",e,!1)}})}},{key:"setOptions",value:function(t,e){if(void 0!==t){var i=this.options.hierarchical,n=i.enabled;if(p.selectiveDeepExtend(["randomSeed","improvedLayout"],this.options,t),p.mergeOptions(this.options,t,"hierarchical"),void 0!==t.randomSeed&&(this.initialRandomSeed=t.randomSeed),!0===i.enabled)return!0===n&&this.body.emitter.emit("refresh",!0),"RL"===i.direction||"DU"===i.direction?i.levelSeparation>0&&(i.levelSeparation*=-1):i.levelSeparation<0&&(i.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(e);if(!0===n)return this.body.emitter.emit("refresh"),p.deepExtend(e,this.optionsBackup)}return e}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(t){if(!0===this.options.hierarchical.enabled){var e=this.optionsBackup.physics;void 0===t.physics||!0===t.physics?(t.physics={enabled:void 0===e.enabled||e.enabled,solver:"hierarchicalRepulsion"},e.enabled=void 0===e.enabled||e.enabled,e.solver=e.solver||"barnesHut"):"object"===(0,a.default)(t.physics)?(e.enabled=void 0===t.physics.enabled||t.physics.enabled,e.solver=t.physics.solver||"barnesHut",t.physics.solver="hierarchicalRepulsion"):!1!==t.physics&&(e.solver="barnesHut",t.physics={solver:"hierarchicalRepulsion"});var i=this.direction.curveType();if(void 0===t.edges)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges={smooth:!1};else if(void 0===t.edges.smooth)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges.smooth=!1;else if("boolean"===typeof t.edges.smooth)this.optionsBackup.edges={smooth:t.edges.smooth},t.edges.smooth={enabled:t.edges.smooth,type:i};else{var n=t.edges.smooth;void 0!==n.type&&"dynamic"!==n.type&&(i=n.type),this.optionsBackup.edges={smooth:void 0===n.enabled||n.enabled,type:void 0===n.type?"dynamic":n.type,roundness:void 0===n.roundness?.5:n.roundness,forceDirection:void 0!==n.forceDirection&&n.forceDirection},t.edges.smooth={enabled:void 0===n.enabled||n.enabled,type:i,roundness:void 0===n.roundness?.5:n.roundness,forceDirection:void 0!==n.forceDirection&&n.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",i)}return t}},{key:"seededRandom",value:function(){var t=1e4*Math.sin(this.randomSeed++);return t-Math.floor(t)}},{key:"positionInitially",value:function(t){if(!0!==this.options.hierarchical.enabled){this.randomSeed=this.initialRandomSeed;for(var e=t.length+50,i=0;i<t.length;i++){var n=t[i],r=2*Math.PI*this.seededRandom();void 0===n.x&&(n.x=e*Math.cos(r)),void 0===n.y&&(n.y=e*Math.sin(r))}}}},{key:"layoutNetwork",value:function(){if(!0!==this.options.hierarchical.enabled&&!0===this.options.improvedLayout){for(var t=this.body.nodeIndices,e=0,i=0;i<t.length;i++){!0===this.body.nodes[t[i]].predefinedPosition&&(e+=1)}if(e<.5*t.length){var n=0,r={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(t.length>150){for(var o=t.length;t.length>150&&n<=10;){n+=1;var s=t.length;n%3===0?this.body.modules.clustering.clusterBridges(r):this.body.modules.clustering.clusterOutliers(r);if(s==t.length&&n%3!==0)return this._declusterAll(),this.body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*o)})}n>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(t,this.body.edgeIndices,!0),this._shiftToCenter();for(var a=0;a<t.length;a++){var h=this.body.nodes[t[a]];!1===h.predefinedPosition&&(h.x+=70*(.5-this.seededRandom()),h.y+=70*(.5-this.seededRandom()))}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var t=m.getRangeCore(this.body.nodes,this.body.nodeIndices),e=m.findCenter(t),i=0;i<this.body.nodeIndices.length;i++){var n=this.body.nodes[this.body.nodeIndices[i]];n.x-=e.x,n.y-=e.y}}},{key:"_declusterAll",value:function(){for(var t=!0;!0===t;){t=!1;for(var e=0;e<this.body.nodeIndices.length;e++)!0===this.body.nodes[this.body.nodeIndices[e]].isCluster&&(t=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[e],{},!1));!0===t&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(!0===this.options.hierarchical.enabled&&this.body.nodeIndices.length>0){var t=void 0,e=void 0,i=!1,n=!1;this.lastNodeOnLevel={},this.hierarchical=new b;for(e in this.body.nodes)this.body.nodes.hasOwnProperty(e)&&(t=this.body.nodes[e],void 0!==t.options.level?(i=!0,this.hierarchical.levels[e]=t.options.level):n=!0);if(!0===n&&!0===i)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(!0===n){var r=this.options.hierarchical.sortMethod;"hubsize"===r?this._determineLevelsByHubsize():"directed"===r?this._determineLevelsDirected():"custom"===r&&this._determineLevelsCustomCallback()}for(var o in this.body.nodes)this.body.nodes.hasOwnProperty(o)&&this.hierarchical.ensureLevel(o);var s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var t=this,e=!1,i={},n=function(e,i){var n=t.hierarchical.trees;for(var r in n)n.hasOwnProperty(r)&&n[r]===e&&t.direction.shift(r,i)},r=function(){for(var e=[],i=0;i<t.hierarchical.numTrees();i++)e.push(t.direction.getTreeSize(i));return e},s=function e(i,n){if(!n[i.id]&&(n[i.id]=!0,t.hierarchical.childrenReference[i.id])){var r=t.hierarchical.childrenReference[i.id];if(r.length>0)for(var o=0;o<r.length;o++)e(t.body.nodes[r[o]],n)}},a=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e9,n=1e9,r=1e9,s=1e9,a=-1e9;for(var h in e)if(e.hasOwnProperty(h)){var l=t.body.nodes[h],u=t.hierarchical.levels[l.id],d=t.direction.getPosition(l),c=t._getSpaceAroundNode(l,e),f=(0,o.default)(c,2),p=f[0],m=f[1];n=Math.min(p,n),r=Math.min(m,r),u<=i&&(s=Math.min(d,s),a=Math.max(d,a))}return[s,a,n,r]},h=function(e,i){var n=t.hierarchical.getMaxLevel(e.id),r=t.hierarchical.getMaxLevel(i.id);return Math.min(n,r)},l=function(e,i,n){for(var r=t.hierarchical,o=0;o<i.length;o++){var s=i[o],a=r.distributionOrdering[s];if(a.length>1)for(var h=0;h<a.length-1;h++){var l=a[h],u=a[h+1];r.hasSameParent(l,u)&&r.inSameSubNetwork(l,u)&&e(l,u,n)}}},u=function(i,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t.direction.getPosition(i),l=t.direction.getPosition(n),u=Math.abs(l-o),d=t.options.hierarchical.nodeSpacing;if(u>d){var c={},f={};s(i,c),s(n,f);var p=h(i,n),m=a(c,p),v=a(f,p),g=m[1],y=v[0],b=v[2];if(Math.abs(g-y)>d){var _=g-y+d;_<-b+d&&(_=-b+d),_<0&&(t._shiftBlock(n.id,_),e=!0,!0===r&&t._centerParent(n))}}},d=function(n,r){for(var h=r.id,l=r.edges,u=t.hierarchical.levels[r.id],d=t.options.hierarchical.levelSeparation*t.options.hierarchical.levelSeparation,c={},f=[],p=0;p<l.length;p++){var m=l[p];if(m.toId!=m.fromId){var v=m.toId==h?m.from:m.to;c[l[p].id]=v,t.hierarchical.levels[v.id]<u&&f.push(m)}}var g=function(e,i){for(var n=0,r=0;r<i.length;r++)if(void 0!==c[i[r].id]){var o=t.direction.getPosition(c[i[r].id])-e;n+=o/Math.sqrt(o*o+d)}return n},y=function(e,i){for(var n=0,r=0;r<i.length;r++)if(void 0!==c[i[r].id]){var o=t.direction.getPosition(c[i[r].id])-e;n-=d*Math.pow(o*o+d,-1.5)}return n},b=function(e,i){for(var n=t.direction.getPosition(r),o={},s=0;s<e;s++){var a=g(n,i),h=y(n,i);if(n-=Math.max(-40,Math.min(40,Math.round(a/h))),void 0!==o[n])break;o[n]=s}return n},_=b(n,f);!function(n){var o=t.direction.getPosition(r);if(void 0===i[r.id]){var h={};s(r,h),i[r.id]=h}var l=a(i[r.id]),u=l[2],d=l[3],c=n-o,f=0;c>0?f=Math.min(c,d-t.options.hierarchical.nodeSpacing):c<0&&(f=-Math.min(-c,u-t.options.hierarchical.nodeSpacing)),0!=f&&(t._shiftBlock(r.id,f),e=!0)}(_),_=b(n,l),function(i){var n=t.direction.getPosition(r),s=t._getSpaceAroundNode(r),a=(0,o.default)(s,2),h=a[0],l=a[1],u=i-n,d=n;u>0?d=Math.min(n+(l-t.options.hierarchical.nodeSpacing),i):u<0&&(d=Math.max(n-(h-t.options.hierarchical.nodeSpacing),i)),d!==n&&(t.direction.setPosition(r,d),e=!0)}(_)};!0===this.options.hierarchical.blockShifting&&(function(i){var n=t.hierarchical.getLevels();n=n.reverse();for(var r=0;r<i&&(e=!1,l(u,n,!0),!0===e);r++);}(5),function(){for(var e in t.body.nodes)t.body.nodes.hasOwnProperty(e)&&t._centerParent(t.body.nodes[e])}()),!0===this.options.hierarchical.edgeMinimization&&function(i){var n=t.hierarchical.getLevels();n=n.reverse();for(var r=0;r<i;r++){e=!1;for(var o=0;o<n.length;o++)for(var s=n[o],a=t.hierarchical.distributionOrdering[s],h=0;h<a.length;h++)d(1e3,a[h]);if(!0!==e)break}}(20),!0===this.options.hierarchical.parentCentralization&&function(){var e=t.hierarchical.getLevels();e=e.reverse();for(var i=0;i<e.length;i++)for(var n=e[i],r=t.hierarchical.distributionOrdering[n],o=0;o<r.length;o++)t._centerParent(r[o])}(),function(){for(var e=r(),i=0,o=0;o<e.length-1;o++){i+=e[o].max-e[o+1].min+t.options.hierarchical.treeSpacing,n(o+1,i)}}()}},{key:"_getSpaceAroundNode",value:function(t,e){var i=!0;void 0===e&&(i=!1);var n=this.hierarchical.levels[t.id];if(void 0!==n){var r=this.hierarchical.distributionIndex[t.id],o=this.direction.getPosition(t),s=this.hierarchical.distributionOrdering[n],a=1e9,h=1e9;if(0!==r){var l=s[r-1];if(!0===i&&void 0===e[l.id]||!1===i){a=o-this.direction.getPosition(l)}}if(r!=s.length-1){var u=s[r+1];if(!0===i&&void 0===e[u.id]||!1===i){var d=this.direction.getPosition(u);h=Math.min(h,d-o)}}return[a,h]}return[0,0]}},{key:"_centerParent",value:function(t){if(this.hierarchical.parentReference[t.id])for(var e=this.hierarchical.parentReference[t.id],i=0;i<e.length;i++){var n=e[i],r=this.body.nodes[n],s=this.hierarchical.childrenReference[n];if(void 0!==s){var a=this._getCenterPosition(s),h=this.direction.getPosition(r),l=this._getSpaceAroundNode(r),u=(0,o.default)(l,2),d=u[0],c=u[1],f=h-a;(f<0&&Math.abs(f)<c-this.options.hierarchical.nodeSpacing||f>0&&Math.abs(f)<d-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(r,a)}}}},{key:"_placeNodesByHierarchy",value:function(t){this.positionedNodes={};for(var e in t)if(t.hasOwnProperty(e)){var i=(0,l.default)(t[e]);i=this._indexArrayToNodes(i),this.direction.sort(i);for(var n=0,r=0;r<i.length;r++){var o=i[r];if(void 0===this.positionedNodes[o.id]){var s=this.options.hierarchical.nodeSpacing,a=s*n;n>0&&(a=this.direction.getPosition(i[r-1])+s),this.direction.setPosition(o,a,e),this._validatePositionAndContinue(o,e,a),n++}}}}},{key:"_placeBranchNodes",value:function(t,e){var i=this.hierarchical.childrenReference[t];if(void 0!==i){for(var n=[],r=0;r<i.length;r++)n.push(this.body.nodes[i[r]]);this.direction.sort(n);for(var o=0;o<n.length;o++){var s=n[o],a=this.hierarchical.levels[s.id];if(!(a>e&&void 0===this.positionedNodes[s.id]))return;var h=this.options.hierarchical.nodeSpacing,l=void 0;l=0===o?this.direction.getPosition(this.body.nodes[t]):this.direction.getPosition(n[o-1])+h,this.direction.setPosition(s,l,a),this._validatePositionAndContinue(s,a,l)}var u=this._getCenterPosition(n);this.direction.setPosition(this.body.nodes[t],u,e)}}},{key:"_validatePositionAndContinue",value:function(t,e,i){if(this.hierarchical.isTree){if(void 0!==this.lastNodeOnLevel[e]){var n=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[e]]);if(i-n<this.options.hierarchical.nodeSpacing){var r=n+this.options.hierarchical.nodeSpacing-i,o=this._findCommonParent(this.lastNodeOnLevel[e],t.id);this._shiftBlock(o.withChild,r)}}this.lastNodeOnLevel[e]=t.id,this.positionedNodes[t.id]=!0,this._placeBranchNodes(t.id,e)}}},{key:"_indexArrayToNodes",value:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.body.nodes[t[i]]);return e}},{key:"_getDistribution",value:function(){var t={},e=void 0,i=void 0;for(e in this.body.nodes)if(this.body.nodes.hasOwnProperty(e)){i=this.body.nodes[e];var n=void 0===this.hierarchical.levels[e]?0:this.hierarchical.levels[e];this.direction.fix(i,n),void 0===t[n]&&(t[n]={}),t[n][e]=i}return t}},{key:"_getActiveEdges",value:function(t){var e=this,i=[];return p.forEach(t.edges,function(t){-1!==e.body.edgeIndices.indexOf(t.id)&&i.push(t)}),i}},{key:"_getHubSizes",value:function(){var t=this,e={},i=this.body.nodeIndices;p.forEach(i,function(i){var n=t.body.nodes[i],r=t._getActiveEdges(n).length;e[r]=!0});var n=[];return p.forEach(e,function(t){n.push(Number(t))}),n.sort(function(t,e){return e-t}),n}},{key:"_determineLevelsByHubsize",value:function(){for(var t=this,e=function(e,i){t.hierarchical.levelDownstream(e,i)},i=this._getHubSizes(),n=0;n<i.length;++n){if("break"===function(n){var r=i[n];if(0===r)return"break";p.forEach(t.body.nodeIndices,function(i){var n=t.body.nodes[i];r===t._getActiveEdges(n).length&&t._crawlNetwork(e,i)})}(n))break}}},{key:"_determineLevelsCustomCallback",value:function(){var t=this,e=function(e,i,n){var r=t.hierarchical.levels[e.id];void 0===r&&(r=t.hierarchical.levels[e.id]=1e5);var o=(m.cloneOptions(e,"node"),m.cloneOptions(i,"node"),void m.cloneOptions(n,"edge"));t.hierarchical.levels[i.id]=r+o};this._crawlNetwork(e),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var t=this,e=function(e){return p.forEach(t.body.edges,function(t){if(t.toId===e.fromId&&t.fromId===e.toId)return!0}),!1},i=function(i,n,r){var o=t.hierarchical.levels[i.id],s=t.hierarchical.levels[n.id];e(r)&&void 0!==o&&void 0!==s||(void 0===o&&(o=t.hierarchical.levels[i.id]=1e4),r.toId==n.id?t.hierarchical.levels[n.id]=o+1:t.hierarchical.levels[n.id]=o-1)};this._crawlNetwork(i),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var t=this,e=function(e,i){t.hierarchical.levels[i.id]>t.hierarchical.levels[e.id]&&t.hierarchical.addRelation(e.id,i.id)};this._crawlNetwork(e),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},i=arguments[1],n={},r=function i(r,o){if(void 0===n[r.id]){t.hierarchical.setTreeIndex(r,o),n[r.id]=!0;for(var s=void 0,a=t._getActiveEdges(r),h=0;h<a.length;h++){var l=a[h];!0===l.connected&&(s=l.toId==r.id?l.from:l.to,r.id!=s.id&&(e(r,s,l),i(s,o)))}}};if(void 0===i)for(var o=0,s=0;s<this.body.nodeIndices.length;s++){var a=this.body.nodeIndices[s];if(void 0===n[a]){var h=this.body.nodes[a];r(h,o),o+=1}}else{var l=this.body.nodes[i];if(void 0===l)return void console.error("Node not found:",i);r(l)}}},{key:"_shiftBlock",value:function(t,e){var i=this,n={};!function t(r){if(!n[r]){n[r]=!0,i.direction.shift(r,e);var o=i.hierarchical.childrenReference[r];if(void 0!==o)for(var s=0;s<o.length;s++)t(o[s])}}(t)}},{key:"_findCommonParent",value:function(t,e){var i=this,n={};return function t(e,n){var r=i.hierarchical.parentReference[n];if(void 0!==r)for(var o=0;o<r.length;o++){var s=r[o];e[s]=!0,t(e,s)}}(n,t),function t(e,n){var r=i.hierarchical.parentReference[n];if(void 0!==r)for(var o=0;o<r.length;o++){var s=r[o];if(void 0!==e[s])return{foundParent:s,withChild:n};var a=t(e,s);if(null!==a.foundParent)return a}return{foundParent:null,withChild:n}}(n,e)}},{key:"setDirectionStrategy",value:function(){var t="UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction;this.direction=t?new y(this):new g(this)}},{key:"_getCenterPosition",value:function(t){for(var e=1e9,i=-1e9,n=0;n<t.length;n++){var r=void 0;if(void 0!==t[n].id)r=t[n];else{var o=t[n];r=this.body.nodes[o]}var s=this.direction.getPosition(r);e=Math.min(e,s),i=Math.max(i,s)}return.5*(e+i)}}]),t}();e.default=_},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.VerticalStrategy=e.HorizontalStrategy=void 0;var r=i(3),o=n(r),s=i(4),a=n(s),h=i(5),l=n(h),u=i(0),d=n(u),c=i(1),f=n(c),p=function(){function t(){(0,d.default)(this,t)}return(0,f.default)(t,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(t){return this.fake_use(t),this.abstract()}},{key:"setPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.fake_use(t,e,i),this.abstract()}},{key:"getTreeSize",value:function(t){return this.fake_use(t),this.abstract()}},{key:"sort",value:function(t){this.fake_use(t),this.abstract()}},{key:"fix",value:function(t,e){this.fake_use(t,e),this.abstract()}},{key:"shift",value:function(t,e){this.fake_use(t,e),this.abstract()}}]),t}(),m=function(t){function e(t){(0,d.default)(this,e);var i=(0,a.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return i.layout=t,i}return(0,l.default)(e,t),(0,f.default)(e,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(t){return t.x}},{key:"setPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==i&&this.layout.hierarchical.addToOrdering(t,i),t.x=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_x,max:e.max_x}}},{key:"sort",value:function(t){t.sort(function(t,e){return void 0===t.x||void 0===e.x?0:t.x-e.x})}},{key:"fix",value:function(t,e){t.y=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.y=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].x+=e}}]),e}(p),v=function(t){function e(t){(0,d.default)(this,e);var i=(0,a.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return i.layout=t,i}return(0,l.default)(e,t),(0,f.default)(e,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(t){return t.y}},{key:"setPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==i&&this.layout.hierarchical.addToOrdering(t,i),t.y=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_y,max:e.max_y}}},{key:"sort",value:function(t){t.sort(function(t,e){return void 0===t.y||void 0===e.y?0:t.y-e.y})}},{key:"fix",value:function(t,e){t.x=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.x=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].y+=e}}]),e}(p);e.HorizontalStrategy=v,e.VerticalStrategy=m},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),o=n(r),s=i(19),a=n(s),h=i(6),l=n(h),u=i(0),d=n(u),c=i(1),f=n(c),p=i(2),m=i(10),v=i(37),g=function(){function t(e,i,n){var r=this;(0,d.default)(this,t),this.body=e,this.canvas=i,this.selectionHandler=n,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this.manipulationHammers=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},p.extend(this.options,this.defaultOptions),this.body.emitter.on("destroy",function(){r._clean()}),this.body.emitter.on("_dataChanged",this._restore.bind(this)),this.body.emitter.on("_resetData",this._restore.bind(this))}return(0,f.default)(t,[{key:"_restore",value:function(){!1!==this.inMode&&(!0===this.options.initiallyActive?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(t,e,i){void 0!==e&&(void 0!==e.locale?this.options.locale=e.locale:this.options.locale=i.locale,void 0!==e.locales?this.options.locales=e.locales:this.options.locales=i.locales),void 0!==t&&("boolean"===typeof t?this.options.enabled=t:(this.options.enabled=!0,p.deepExtend(this.options,t)),!0===this.options.initiallyActive&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){!0===this.editMode?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},!0===this.guiEnabled){this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var t=this.selectionHandler._getSelectedNodeCount(),e=this.selectionHandler._getSelectedEdgeCount(),i=t+e,n=this.options.locales[this.options.locale],r=!1;!1!==this.options.addNode&&(this._createAddNodeButton(n),r=!0),!1!==this.options.addEdge&&(!0===r?this._createSeperator(1):r=!0,this._createAddEdgeButton(n)),1===t&&"function"===typeof this.options.editNode?(!0===r?this._createSeperator(2):r=!0,this._createEditNodeButton(n)):1===e&&0===t&&!1!==this.options.editEdge&&(!0===r?this._createSeperator(3):r=!0,this._createEditEdgeButton(n)),0!==i&&(t>0&&!1!==this.options.deleteNode?(!0===r&&this._createSeperator(4),this._createDeleteButton(n)):0===t&&!1!==this.options.deleteEdge&&(!0===r&&this._createSeperator(4),this._createDeleteButton(n))),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this)),this._temporaryBindEvent("select",this.showManipulatorToolbar.bind(this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addNode",!0===this.guiEnabled){var t=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(t),this._createSeperator(),this._createDescription(t.addDescription||this.options.locales.en.addDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindEvent("click",this._performAddNode.bind(this))}},{key:"editNode",value:function(){var t=this;!0!==this.editMode&&this.enableEditMode(),this._clean();var e=this.selectionHandler._getSelectedNode();if(void 0!==e){if(this.inMode="editNode","function"!==typeof this.options.editNode)throw new Error("No function has been configured to handle the editing of nodes.");if(!0!==e.isCluster){var i=p.deepExtend({},e.options,!1);if(i.x=e.x,i.y=e.y,2!==this.options.editNode.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editNode(i,function(e){null!==e&&void 0!==e&&"editNode"===t.inMode&&t.body.data.nodes.getDataSet().update(e),t.showManipulatorToolbar()})}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError)}else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addEdge",!0===this.guiEnabled){var t=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(t),this._createSeperator(),this._createDescription(t.edgeDescription||this.options.locales.en.edgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindUI("onTouch",this._handleConnect.bind(this)),this._temporaryBindUI("onDragEnd",this._finishConnect.bind(this)),this._temporaryBindUI("onDrag",this._dragControlNode.bind(this)),this._temporaryBindUI("onRelease",this._finishConnect.bind(this)),this._temporaryBindUI("onDragStart",this._dragStartEdge.bind(this)),this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="editEdge","object"===(0,l.default)(this.options.editEdge)&&"function"===typeof this.options.editEdge.editWithoutDrag&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],void 0!==this.edgeBeingEditedId)){var t=this.body.edges[this.edgeBeingEditedId];return void this._performEditEdge(t.from,t.to)}if(!0===this.guiEnabled){var e=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(e),this._createSeperator(),this._createDescription(e.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],void 0!==this.edgeBeingEditedId){var i=this.body.edges[this.edgeBeingEditedId],n=this._getNewTargetNode(i.from.x,i.from.y),r=this._getNewTargetNode(i.to.x,i.to.y);this.temporaryIds.nodes.push(n.id),this.temporaryIds.nodes.push(r.id),this.body.nodes[n.id]=n,this.body.nodeIndices.push(n.id),this.body.nodes[r.id]=r,this.body.nodeIndices.push(r.id),this._temporaryBindUI("onTouch",this._controlNodeTouch.bind(this)),this._temporaryBindUI("onTap",function(){}),this._temporaryBindUI("onHold",function(){}),this._temporaryBindUI("onDragStart",this._controlNodeDragStart.bind(this)),this._temporaryBindUI("onDrag",this._controlNodeDrag.bind(this)),this._temporaryBindUI("onDragEnd",this._controlNodeDragEnd.bind(this)),this._temporaryBindUI("onMouseMove",function(){}),this._temporaryBindEvent("beforeDrawing",function(t){var e=i.edgeType.findBorderPositions(t);!1===n.selected&&(n.x=e.from.x,n.y=e.from.y),!1===r.selected&&(r.x=e.to.x,r.y=e.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}},{key:"deleteSelected",value:function(){var t=this;!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="delete";var e=this.selectionHandler.getSelectedNodes(),i=this.selectionHandler.getSelectedEdges(),n=void 0;if(e.length>0){for(var r=0;r<e.length;r++)if(!0===this.body.nodes[e[r]].isCluster)return void alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);"function"===typeof this.options.deleteNode&&(n=this.options.deleteNode)}else i.length>0&&"function"===typeof this.options.deleteEdge&&(n=this.options.deleteEdge);if("function"===typeof n){var o={nodes:e,edges:i};if(2!==n.length)throw new Error("The function for delete does not support two arguments (data, callback)");n(o,function(e){null!==e&&void 0!==e&&"delete"===t.inMode?(t.body.data.edges.getDataSet().remove(e.edges),t.body.data.nodes.getDataSet().remove(e.nodes),t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar()):(t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().remove(i),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){!0===this.options.enabled?(this.guiEnabled=!0,this._createWrappers(),!1===this.editMode?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",!0===this.editMode?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",!0===this.editMode?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),void 0===this.closeDiv&&(this.closeDiv=document.createElement("div"),this.closeDiv.className="vis-close",this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv))}},{key:"_getNewTargetNode",value:function(t,e){var i=p.deepExtend({},this.options.controlNodeStyle);i.id="targetNode"+p.randomUUID(),i.hidden=!1,i.physics=!1,i.x=t,i.y=e;var n=this.body.functions.createNode(i);return n.shape.boundingBox={left:t,right:t,top:e,bottom:e},n}},{key:"_createEditButton",value:function(){this._clean(),this.manipulationDOM={},p.recursiveDOMDelete(this.editModeDiv);var t=this.options.locales[this.options.locale],e=this._createButton("editMode","vis-button vis-edit vis-edit-mode",t.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(e),this._bindHammerToDiv(e,this.toggleEditMode.bind(this))}},{key:"_clean",value:function(){this.inMode=!1,!0===this.guiEnabled&&(p.recursiveDOMDelete(this.editModeDiv),p.recursiveDOMDelete(this.manipulationDiv),this._cleanManipulatorHammers()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanManipulatorHammers",value:function(){if(0!=this.manipulationHammers.length){for(var t=0;t<this.manipulationHammers.length;t++)this.manipulationHammers[t].destroy();this.manipulationHammers=[]}}},{key:"_removeManipulationDOM",value:function(){this._clean(),p.recursiveDOMDelete(this.manipulationDiv),p.recursiveDOMDelete(this.editModeDiv),p.recursiveDOMDelete(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+t]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+t].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+t])}},{key:"_createAddNodeButton",value:function(t){var e=this._createButton("addNode","vis-button vis-add",t.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.addNodeMode.bind(this))}},{key:"_createAddEdgeButton",value:function(t){var e=this._createButton("addEdge","vis-button vis-connect",t.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.addEdgeMode.bind(this))}},{key:"_createEditNodeButton",value:function(t){var e=this._createButton("editNode","vis-button vis-edit",t.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.editNode.bind(this))}},{key:"_createEditEdgeButton",value:function(t){var e=this._createButton("editEdge","vis-button vis-edit",t.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.editEdgeMode.bind(this))}},{key:"_createDeleteButton",value:function(t){var e;e=this.options.rtl?"vis-button vis-delete-rtl":"vis-button vis-delete";var i=this._createButton("delete",e,t.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindHammerToDiv(i,this.deleteSelected.bind(this))}},{key:"_createBackButton",value:function(t){var e=this._createButton("back","vis-button vis-back",t.back||this.options.locales.en.back);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.showManipulatorToolbar.bind(this))}},{key:"_createButton",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vis-label";return this.manipulationDOM[t+"Div"]=document.createElement("div"),this.manipulationDOM[t+"Div"].className=e,this.manipulationDOM[t+"Label"]=document.createElement("div"),this.manipulationDOM[t+"Label"].className=n,this.manipulationDOM[t+"Label"].innerHTML=i,this.manipulationDOM[t+"Div"].appendChild(this.manipulationDOM[t+"Label"]),this.manipulationDOM[t+"Div"]}},{key:"_createDescription",value:function(t){this.manipulationDiv.appendChild(this._createButton("description","vis-button vis-none",t))}},{key:"_temporaryBindEvent",value:function(t,e){this.temporaryEventFunctions.push({event:t,boundFunction:e}),this.body.emitter.on(t,e)}},{key:"_temporaryBindUI",value:function(t,e){if(void 0===this.body.eventListeners[t])throw new Error("This UI function does not exist. Typo? You tried: "+t+" possible are: "+(0,a.default)((0,o.default)(this.body.eventListeners)));this.temporaryUIFunctions[t]=this.body.eventListeners[t],this.body.eventListeners[t]=e}},{key:"_unbindTemporaryUIs",value:function(){for(var t in this.temporaryUIFunctions)this.temporaryUIFunctions.hasOwnProperty(t)&&(this.body.eventListeners[t]=this.temporaryUIFunctions[t],delete this.temporaryUIFunctions[t]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var t=0;t<this.temporaryEventFunctions.length;t++){var e=this.temporaryEventFunctions[t].event,i=this.temporaryEventFunctions[t].boundFunction;this.body.emitter.off(e,i)}this.temporaryEventFunctions=[]}},{key:"_bindHammerToDiv",value:function(t,e){var i=new m(t,{});v.onTouch(i,e),this.manipulationHammers.push(i)}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var t=0;t<this.temporaryIds.edges.length;t++){this.body.edges[this.temporaryIds.edges[t]].disconnect(),delete this.body.edges[this.temporaryIds.edges[t]];var e=this.body.edgeIndices.indexOf(this.temporaryIds.edges[t]);-1!==e&&this.body.edgeIndices.splice(e,1)}for(var i=0;i<this.temporaryIds.nodes.length;i++){delete this.body.nodes[this.temporaryIds.nodes[i]];var n=this.body.nodeIndices.indexOf(this.temporaryIds.nodes[i]);-1!==n&&this.body.nodeIndices.splice(n,1)}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(t){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=p.extend({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(t){var e=this.lastTouch,i=this.selectionHandler._pointerToPositionObject(e),n=this.body.nodes[this.temporaryIds.nodes[0]],r=this.body.nodes[this.temporaryIds.nodes[1]],o=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var s=n.isOverlappingWith(i),a=r.isOverlappingWith(i);!0===s?(this.selectedControlNode=n,o.edgeType.from=n):!0===a&&(this.selectedControlNode=r,o.edgeType.to=r),void 0!==this.selectedControlNode&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(t){this.body.emitter.emit("disablePhysics");var e=this.body.functions.getPointer(t.center),i=this.canvas.DOMtoCanvas(e);if(void 0!==this.selectedControlNode)this.selectedControlNode.x=i.x,this.selectedControlNode.y=i.y;else{var n=e.x-this.lastTouch.x,r=e.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+n,y:this.lastTouch.translation.y+r}}this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),n=this.body.edges[this.edgeBeingEditedId];if(void 0!==this.selectedControlNode){this.selectionHandler.unselectAll();for(var r=this.selectionHandler._getAllNodesOverlappingWith(i),o=void 0,s=r.length-1;s>=0;s--)if(r[s]!==this.selectedControlNode.id){o=this.body.nodes[r[s]];break}if(void 0!==o&&void 0!==this.selectedControlNode)if(!0===o.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(o.id,n.to.id):this._performEditEdge(n.from.id,o.id)}else n.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(t){if((new Date).valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=p.extend({},this.body.view.translation);var e=this.lastTouch,i=this.selectionHandler.getNodeAt(e);if(void 0!==i)if(!0===i.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var n=this._getNewTargetNode(i.x,i.y);this.body.nodes[n.id]=n,this.body.nodeIndices.push(n.id);var r=this.body.functions.createEdge({id:"connectionEdge"+p.randomUUID(),from:i.id,to:n.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[r.id]=r,this.body.edgeIndices.push(r.id),this.temporaryIds.nodes.push(n.id),this.temporaryIds.edges.push(r.id)}this.touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function(t){var e=this.body.functions.getPointer(t.center);if(void 0!==this.temporaryIds.nodes[0]){var i=this.body.nodes[this.temporaryIds.nodes[0]];i.x=this.canvas._XconvertDOMtoCanvas(e.x),i.y=this.canvas._YconvertDOMtoCanvas(e.y),this.body.emitter.emit("_redraw")}else{var n=e.x-this.lastTouch.x,r=e.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+n,y:this.lastTouch.translation.y+r}}}},{key:"_finishConnect",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),n=void 0;void 0!==this.temporaryIds.edges[0]&&(n=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var r=this.selectionHandler._getAllNodesOverlappingWith(i),o=void 0,s=r.length-1;s>=0;s--)if(-1===this.temporaryIds.nodes.indexOf(r[s])){o=this.body.nodes[r[s]];break}this._cleanupTemporaryNodesAndEdges(),void 0!==o&&(!0===o.isCluster?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):void 0!==this.body.nodes[n]&&void 0!==this.body.nodes[o.id]&&this._performAddEdge(n,o.id)),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(t){var e=this.lastTouch;this.selectionHandler._generateClickEvent("dragStart",t,e,void 0,!0)}},{key:"_performAddNode",value:function(t){var e=this,i={id:p.randomUUID(),x:t.pointer.canvas.x,y:t.pointer.canvas.y,label:"new"};if("function"===typeof this.options.addNode){if(2!==this.options.addNode.length)throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");this.options.addNode(i,function(t){null!==t&&void 0!==t&&"addNode"===e.inMode&&(e.body.data.nodes.getDataSet().add(t),e.showManipulatorToolbar())})}else this.body.data.nodes.getDataSet().add(i),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(t,e){var i=this,n={from:t,to:e};if("function"===typeof this.options.addEdge){if(2!==this.options.addEdge.length)throw new Error("The function for connect does not support two arguments (data,callback)");this.options.addEdge(n,function(t){null!==t&&void 0!==t&&"addEdge"===i.inMode&&(i.body.data.edges.getDataSet().add(t),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(t,e){var i=this,n={id:this.edgeBeingEditedId,from:t,to:e,label:this.body.data.edges._data[this.edgeBeingEditedId].label},r=this.options.editEdge;if("object"===("undefined"===typeof r?"undefined":(0,l.default)(r))&&(r=r.editWithoutDrag),"function"===typeof r){if(2!==r.length)throw new Error("The function for edit does not support two arguments (data, callback)");r(n,function(t){null===t||void 0===t||"editEdge"!==i.inMode?(i.body.edges[n.id].updateEdgeType(),i.body.emitter.emit("_redraw"),i.showManipulatorToolbar()):(i.body.data.edges.getDataSet().update(t),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),t}();e.default=g},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(30),o=n(r),s=i(0),a=n(s),h=i(1),l=n(h),u=i(239),d=n(u),c=function(){function t(e,i,n){(0,a.default)(this,t),this.body=e,this.springLength=i,this.springConstant=n,this.distanceSolver=new d.default}return(0,l.default)(t,[{key:"setOptions",value:function(t){t&&(t.springLength&&(this.springLength=t.springLength),t.springConstant&&(this.springConstant=t.springConstant))}},{key:"solve",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.distanceSolver.getDistances(this.body,t,e);this._createL_matrix(n),this._createK_matrix(n),this._createE_matrix();for(var r=0,s=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),a=1e9,h=0,l=0,u=0,d=0,c=0;a>.01&&r<s;){r+=1;var f=this._getHighestEnergyNode(i),p=(0,o.default)(f,4);for(h=p[0],a=p[1],l=p[2],u=p[3],d=a,c=0;d>1&&c<5;){c+=1,this._moveNode(h,l,u);var m=this._getEnergy(h),v=(0,o.default)(m,3);d=v[0],l=v[1],u=v[2]}}}},{key:"_getHighestEnergyNode",value:function(t){for(var e=this.body.nodeIndices,i=this.body.nodes,n=0,r=e[0],s=0,a=0,h=0;h<e.length;h++){var l=e[h];if(!1===i[l].predefinedPosition||!0===i[l].isCluster&&!0===t||!0===i[l].options.fixed.x||!0===i[l].options.fixed.y){var u=this._getEnergy(l),d=(0,o.default)(u,3),c=d[0],f=d[1],p=d[2];n<c&&(n=c,r=l,s=f,a=p)}}return[r,n,s,a]}},{key:"_getEnergy",value:function(t){var e=(0,o.default)(this.E_sums[t],2),i=e[0],n=e[1];return[Math.sqrt(Math.pow(i,2)+Math.pow(n,2)),i,n]}},{key:"_moveNode",value:function(t,e,i){for(var n=this.body.nodeIndices,r=this.body.nodes,o=0,s=0,a=0,h=r[t].x,l=r[t].y,u=this.K_matrix[t],d=this.L_matrix[t],c=0;c<n.length;c++){var f=n[c];if(f!==t){var p=r[f].x,m=r[f].y,v=u[f],g=d[f],y=1/Math.pow(Math.pow(h-p,2)+Math.pow(l-m,2),1.5);o+=v*(1-g*Math.pow(l-m,2)*y),s+=v*(g*(h-p)*(l-m)*y),a+=v*(1-g*Math.pow(h-p,2)*y)}}var b=o,_=s,w=e,x=a,S=i,k=(w/b+S/_)/(_/b-x/_),E=-(_*k+w)/b;r[t].x+=E,r[t].y+=k,this._updateE_matrix(t)}},{key:"_createL_matrix",value:function(t){var e=this.body.nodeIndices,i=this.springLength;this.L_matrix=[];for(var n=0;n<e.length;n++){this.L_matrix[e[n]]={};for(var r=0;r<e.length;r++)this.L_matrix[e[n]][e[r]]=i*t[e[n]][e[r]]}}},{key:"_createK_matrix",value:function(t){var e=this.body.nodeIndices,i=this.springConstant;this.K_matrix=[];for(var n=0;n<e.length;n++){this.K_matrix[e[n]]={};for(var r=0;r<e.length;r++)this.K_matrix[e[n]][e[r]]=i*Math.pow(t[e[n]][e[r]],-2)}}},{key:"_createE_matrix",value:function(){var t=this.body.nodeIndices,e=this.body.nodes;this.E_matrix={},this.E_sums={};for(var i=0;i<t.length;i++)this.E_matrix[t[i]]=[];for(var n=0;n<t.length;n++){for(var r=t[n],o=e[r].x,s=e[r].y,a=0,h=0,l=n;l<t.length;l++){var u=t[l];if(u!==r){var d=e[u].x,c=e[u].y,f=1/Math.sqrt(Math.pow(o-d,2)+Math.pow(s-c,2));this.E_matrix[r][l]=[this.K_matrix[r][u]*(o-d-this.L_matrix[r][u]*(o-d)*f),this.K_matrix[r][u]*(s-c-this.L_matrix[r][u]*(s-c)*f)],this.E_matrix[u][n]=this.E_matrix[r][l],a+=this.E_matrix[r][l][0],h+=this.E_matrix[r][l][1]}}this.E_sums[r]=[a,h]}}},{key:"_updateE_matrix",value:function(t){for(var e=this.body.nodeIndices,i=this.body.nodes,n=this.E_matrix[t],r=this.K_matrix[t],o=this.L_matrix[t],s=i[t].x,a=i[t].y,h=0,l=0,u=0;u<e.length;u++){var d=e[u];if(d!==t){var c=n[u],f=c[0],p=c[1],m=i[d].x,v=i[d].y,g=1/Math.sqrt(Math.pow(s-m,2)+Math.pow(a-v,2)),y=r[d]*(s-m-o[d]*(s-m)*g),b=r[d]*(a-v-o[d]*(a-v)*g);n[u]=[y,b],h+=y,l+=b;var _=this.E_sums[d];_[0]+=y-f,_[1]+=b-p}}this.E_sums[t]=[h,l]}}]),t}();e.default=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=n(r),s=i(1),a=n(s),h=function(){function t(){(0,o.default)(this,t)}return(0,a.default)(t,[{key:"getDistances",value:function(t,e,i){for(var n={},r=t.edges,o=0;o<e.length;o++){var s=e[o],a={};n[s]=a;for(var h=0;h<e.length;h++)a[e[h]]=o==h?0:1e9}for(var l=0;l<i.length;l++){var u=r[i[l]];!0===u.connected&&void 0!==n[u.fromId]&&void 0!==n[u.toId]&&(n[u.fromId][u.toId]=1,n[u.toId][u.fromId]=1)}for(var d=e.length,c=0;c<d;c++)for(var f=e[c],p=n[f],m=0;m<d-1;m++)for(var v=e[m],g=n[v],y=m+1;y<d;y++){var b=e[y],_=n[b],w=Math.min(g[b],g[f]+p[b]);g[b]=w,_[v]=w}return n}}]),t}();e.default=h}])})},function(t,e,i){(function(t){function n(t,e){this._id=t,this._clearFn=e}var r="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,o=Function.prototype.apply;e.setTimeout=function(){return new n(o.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new n(o.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i(301),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(e,i(6))},function(t,e,i){(function(t,e){!function(t,i){"use strict";function n(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var n={callback:t,args:e};return l[h]=n,a(h),h++}function r(t){delete l[t]}function o(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(i,n)}}function s(t){if(u)setTimeout(s,0,t);else{var e=l[t];if(e){u=!0;try{o(e)}finally{r(t),u=!1}}}}if(!t.setImmediate){var a,h=1,l={},u=!1,d=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?function(){a=function(t){e.nextTick(function(){s(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?function(){var e="setImmediate$"+Math.random()+"$",i=function(i){i.source===t&&"string"===typeof i.data&&0===i.data.indexOf(e)&&s(+i.data.slice(e.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),a=function(i){t.postMessage(e+i,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){s(t.data)},a=function(e){t.port2.postMessage(e)}}():d&&"onreadystatechange"in d.createElement("script")?function(){var t=d.documentElement;a=function(e){var i=d.createElement("script");i.onreadystatechange=function(){s(e),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i)}}():function(){a=function(t){setTimeout(s,0,t)}}(),c.setImmediate=n,c.clearImmediate=r}}("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(e,i(6),i(68))},function(t,e,i){t.exports=i(303)()},function(t,e,i){"use strict";function n(){}var r=i(304);t.exports=function(){function t(t,e,i,n,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var i={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return i.checkPropTypes=n,i.PropTypes=i,i}},function(t,e,i){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,i){"use strict";t.exports=i(306)},function(t,e,i){"use strict";function n(t,e,i,n,r,o,s,a){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=[i,n,r,o,s,a],l=0;t=Error(e.replace(/%s/g,function(){return h[l++]})),t.name="Invariant Violation"}throw t.framesToPop=1,t}}function r(t){for(var e=arguments.length-1,i="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)i+="&args[]="+encodeURIComponent(arguments[r+1]);n(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",i)}function o(t,e,i){this.props=t,this.context=e,this.refs=R,this.updater=i||I}function s(){}function a(t,e,i){this.props=t,this.context=e,this.refs=R,this.updater=i||I}function h(t,e,i){var n=void 0,r={},o=null,s=null;if(null!=e)for(n in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(o=""+e.key),e)F.call(e,n)&&!z.hasOwnProperty(n)&&(r[n]=e[n]);var a=arguments.length-2;if(1===a)r.children=i;else if(1<a){for(var h=Array(a),l=0;l<a;l++)h[l]=arguments[l+2];r.children=h}if(t&&t.defaultProps)for(n in a=t.defaultProps)void 0===r[n]&&(r[n]=a[n]);return{$$typeof:S,type:t,key:o,ref:s,props:r,_owner:N.current}}function l(t,e){return{$$typeof:S,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function u(t){return"object"===typeof t&&null!==t&&t.$$typeof===S}function d(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}function c(t,e,i,n){if(j.length){var r=j.pop();return r.result=t,r.keyPrefix=e,r.func=i,r.context=n,r.count=0,r}return{result:t,keyPrefix:e,func:i,context:n,count:0}}function f(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>j.length&&j.push(t)}function p(t,e,i,n){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var s=!1;if(null===t)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case S:case k:s=!0}}if(s)return i(n,t,""===e?"."+v(t,0):e),1;if(s=0,e=""===e?".":e+":",Array.isArray(t))for(var a=0;a<t.length;a++){o=t[a];var h=e+v(o,a);s+=p(o,h,i,n)}else if(null===t||"object"!==typeof t?h=null:(h=D&&t[D]||t["@@iterator"],h="function"===typeof h?h:null),"function"===typeof h)for(t=h.call(t),a=0;!(o=t.next()).done;)o=o.value,h=e+v(o,a++),s+=p(o,h,i,n);else"object"===o&&(i=""+t,r("31","[object Object]"===i?"object with keys {"+Object.keys(t).join(", ")+"}":i,""));return s}function m(t,e,i){return null==t?0:p(t,"",e,i)}function v(t,e){return"object"===typeof t&&null!==t&&null!=t.key?d(t.key):e.toString(36)}function g(t,e){t.func.call(t.context,e,t.count++)}function y(t,e,i){var n=t.result,r=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?b(t,n,i,function(t){return t}):null!=t&&(u(t)&&(t=l(t,r+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(B,"$&/")+"/")+i)),n.push(t))}function b(t,e,i,n,r){var o="";null!=i&&(o=(""+i).replace(B,"$&/")+"/"),e=c(e,o,n,r),m(t,y,e),f(e)}function _(t,e){var i=N.currentDispatcher;return null===i&&r("277"),i.readContext(t,e)}var w=i(307),x="function"===typeof Symbol&&Symbol.for,S=x?Symbol.for("react.element"):60103,k=x?Symbol.for("react.portal"):60106,E=x?Symbol.for("react.fragment"):60107,M=x?Symbol.for("react.strict_mode"):60108,T=x?Symbol.for("react.profiler"):60114,C=x?Symbol.for("react.provider"):60109,O=x?Symbol.for("react.context"):60110,P=x?Symbol.for("react.async_mode"):60111,A=x?Symbol.for("react.forward_ref"):60112;x&&Symbol.for("react.placeholder");var D="function"===typeof Symbol&&Symbol.iterator,I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R={};o.prototype.isReactComponent={},o.prototype.setState=function(t,e){"object"!==typeof t&&"function"!==typeof t&&null!=t&&r("85"),this.updater.enqueueSetState(this,t,e,"setState")},o.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},s.prototype=o.prototype;var L=a.prototype=new s;L.constructor=a,w(L,o.prototype),L.isPureReactComponent=!0;var N={current:null,currentDispatcher:null},F=Object.prototype.hasOwnProperty,z={key:!0,ref:!0,__self:!0,__source:!0},B=/\/+/g,j=[],U={Children:{map:function(t,e,i){if(null==t)return t;var n=[];return b(t,n,null,e,i),n},forEach:function(t,e,i){if(null==t)return t;e=c(null,null,e,i),m(t,g,e),f(e)},count:function(t){return m(t,function(){return null},null)},toArray:function(t){var e=[];return b(t,e,null,function(t){return t}),e},only:function(t){return u(t)||r("143"),t}},createRef:function(){return{current:null}},Component:o,PureComponent:a,createContext:function(t,e){return void 0===e&&(e=null),t={$$typeof:O,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,Provider:null,Consumer:null,unstable_read:null},t.Provider={$$typeof:C,_context:t},t.Consumer=t,t.unstable_read=_.bind(null,t),t},forwardRef:function(t){return{$$typeof:A,render:t}},Fragment:E,StrictMode:M,unstable_AsyncMode:P,unstable_Profiler:T,createElement:h,cloneElement:function(t,e,i){(null===t||void 0===t)&&r("267",t);var n=void 0,o=w({},t.props),s=t.key,a=t.ref,h=t._owner;if(null!=e){void 0!==e.ref&&(a=e.ref,h=N.current),void 0!==e.key&&(s=""+e.key);var l=void 0;t.type&&t.type.defaultProps&&(l=t.type.defaultProps);for(n in e)F.call(e,n)&&!z.hasOwnProperty(n)&&(o[n]=void 0===e[n]&&void 0!==l?l[n]:e[n])}if(1===(n=arguments.length-2))o.children=i;else if(1<n){l=Array(n);for(var u=0;u<n;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:S,type:t.type,key:s,ref:a,props:o,_owner:h}},createFactory:function(t){var e=h.bind(null,t);return e.type=t,e},isValidElement:u,version:"16.5.1",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:N,assign:w}},H={default:U},V=H&&U||H;t.exports=V.default||V},function(t,e,i){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,a,h=n(t),l=1;l<arguments.length;l++){i=Object(arguments[l]);for(var u in i)o.call(i,u)&&(h[u]=i[u]);if(r){a=r(i);for(var d=0;d<a.length;d++)s.call(i,a[d])&&(h[a[d]]=i[a[d]])}}return h}},function(t,e,i){t.exports=i.p+"media/landing.33da3b9a.png"},function(t,e,i){"use strict";var n=i(0),r=i.n(n),o=i(123),s=i.n(o),a=i(310),h=i(7),l=(i(312),i(313)),u=function(t){return r.a.createElement(h.a,null,r.a.createElement(a.a,{show:t.show,clicked:t.modalClosed}),r.a.createElement("div",{className:s.a.modal,div:!0,id:"abc",style:{height:t.show?"85%":"0px",transform:t.show?"translateY(0)":"translateY(-100vh)",opacity:t.show?"1":"0"}},r.a.createElement("h1",null,"Interaction partners:",t.protein.name1," and ",t.protein.name2),"0"==t.model?r.a.createElement("p",null,"No model available for this interaction"):r.a.createElement(l.a,{model:t.model})))};e.a=u},function(t,e,i){"use strict";var n=i(0),r=i.n(n),o=i(311),s=i.n(o),a=function(t){return t.show?r.a.createElement("div",{onClick:t.clicked,className:s.a.backdrop}):null};e.a=a},function(t,e){t.exports={backdrop:"Backdrop__backdrop__3S6S1"}},function(t,e,i){"use strict";var n=i(0),r=i.n(n),o=i(17),s=i.n(o),a={test:"styles_test__32Qsm"};!function(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&"undefined"!==typeof document){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===i&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}("/* add css styles here (optional) */\n\n.styles_test__32Qsm {\n  display: inline-block;\n  margin: 2em auto;\n  border: 2px solid #000;\n  font-size: 2em;\n}\n");var h=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},d=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e},c=function(t){function e(){return h(this,e),d(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),l(e,[{key:"render",value:function(){var t=this.props.text;return r.a.createElement("div",{className:a.test},"Example Component: ",t)}}]),e}(n.Component);c.propTypes={text:s.a.string}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=i(0),a=i.n(s),h=i(122),l=i(123),u=i.n(l),d=i(7),c=i(63),f=i.n(c),p=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),m=function(t){function e(){var t,i,o,s;n(this,e);for(var a=arguments.length,h=Array(a),l=0;l<a;l++)h[l]=arguments[l];return i=o=r(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(h))),o.state={mut:"",g:null,loading:0,clickedProtein:{name1:"",name2:""}},o.handleMut=function(t){t.preventDefault();var e={data:[{model:o.props.model},{mut:o.state.mut},{type:"2"}]};f.a.post("https://ezyprotein.herokuapp.com/home",e).then(function(t){o.setState({g:""}),o.setState({g:t.data}),console.log(t)})},o.handleType=function(t){o.setState({mut:t.target.value})},s=i,r(o,s)}return o(e,t),p(e,[{key:"render",value:function(){return a.a.createElement(d.a,null,a.a.createElement(h.a,{className:u.a.viz,data:{filename:"https://ezyprotein.herokuapp.com/models/"+this.props.model},viewportStyle:{width:"1200px",height:"600px",backgroundColor:"white"}}),a.a.createElement("form",{className:u.a.form,onSubmit:this.handleMut.bind(this)},a.a.createElement("label",null,"Enter mutation you want to test here, in the format: Wildtype aminoacid,Chain#,aninoacid#,mutated aminoacid. For example: NA39F means mutate the 39th aminoacid on chain A from N to F",a.a.createElement("input",{name:"text",type:"text",placeholder:"Please enter mutation",onChange:this.handleType.bind(this),value:this.state.mut,className:u.a.in})),a.a.createElement("div",null,a.a.createElement("input",{className:u.a.button,type:"submit",value:"Submit"}))),this.state.g?this.state.g>=2?a.a.createElement("p",{className:u.a.high},"The gibb's free energy change is ",this.state.g," kcal/mol. This mutation could have significant impact on the stabiliy of the interaction."):a.a.createElement("p",{className:u.a.low},"The gibb's free energy change is ",this.state.g," kcal/mol. This mutation would most likely not have significant impact on the stabiliy of the interaction."):a.a.createElement("p",null))}}]),e}(a.a.Component);e.a=m},function(t,e){t.exports={content:"Sbar__content__JXABp",form:"Sbar__form__2rPlx",in:"Sbar__in__1EAKY",drop:"Sbar__drop__26N3o",button:"Sbar__button__zHG59",tree:"Sbar__tree__2dY_D"}},function(t,e,i){"use strict";var n=i(0),r=(i.n(n),i(316));i.n(r)},function(t,e){t.exports={control:"Control__control__gNe_E",controls:"Control__controls__2ihyI",Label:"Control__Label__1hIir",Less:"Control__Less__3hWOV",More:"Control__More__1CgS_"}},function(t,e,i){"use strict";function n(t){return"/"===t.charAt(0)}function r(t,e){for(var i=e,n=i+1,r=t.length;n<r;i+=1,n+=1)t[i]=t[n];t.pop()}function o(t,e){void 0===e&&(e="");var i=t&&t.split("/")||[],o=e&&e.split("/")||[],s=t&&n(t),a=e&&n(e),h=s||a;if(t&&n(t)?o=i:i.length&&(o.pop(),o=o.concat(i)),!o.length)return"/";var l;if(o.length){var u=o[o.length-1];l="."===u||".."===u||""===u}else l=!1;for(var d=0,c=o.length;c>=0;c--){var f=o[c];"."===f?r(o,c):".."===f?(r(o,c),d++):d&&(r(o,c),d--)}if(!h)for(;d--;d)o.unshift("..");!h||""===o[0]||o[0]&&n(o[0])||o.unshift("");var p=o.join("/");return l&&"/"!==p.substr(-1)&&(p+="/"),p}e.a=o},function(t,e,i){"use strict";function n(t){return t.valueOf?t.valueOf():Object.prototype.valueOf.call(t)}function r(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(t,i){return r(t,e[i])});if("object"===typeof t||"object"===typeof e){var i=n(t),o=n(e);return i!==t||o!==e?r(i,o):Object.keys(Object.assign({},t,e)).every(function(i){return r(t[i],e[i])})}return!1}e.a=r},function(t,e,i){"use strict";function n(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function r(t){var e=[];return{on:function(t){e.push(t)},off:function(t){e=e.filter(function(e){return e!==t})},get:function(){return t},set:function(i,n){t=i,e.forEach(function(e){return e(t,n)})}}}function o(t){return Array.isArray(t)?t[0]:t}function s(t,e){var i,s,h="__create-react-context-"+p()()+"__",l=function(t){function i(){var e;return e=t.apply(this,arguments)||this,e.emitter=r(e.props.value),e}u()(i,t);var o=i.prototype;return o.getChildContext=function(){var t;return t={},t[h]=this.emitter,t},o.componentWillReceiveProps=function(t){if(this.props.value!==t.value){var i,r=this.props.value,o=t.value;n(r,o)?i=0:(i="function"===typeof e?e(r,o):m,0!==(i|=0)&&this.emitter.set(t.value,i))}},o.render=function(){return this.props.children},i}(a.Component);l.childContextTypes=(i={},i[h]=c.a.object.isRequired,i);var d=function(e){function i(){var t;return t=e.apply(this,arguments)||this,t.state={value:t.getValue()},t.onUpdate=function(e,i){0!==((0|t.observedBits)&i)&&t.setState({value:t.getValue()})},t}u()(i,e);var n=i.prototype;return n.componentWillReceiveProps=function(t){var e=t.observedBits;this.observedBits=void 0===e||null===e?m:e},n.componentDidMount=function(){this.context[h]&&this.context[h].on(this.onUpdate);var t=this.props.observedBits;this.observedBits=void 0===t||null===t?m:t},n.componentWillUnmount=function(){this.context[h]&&this.context[h].off(this.onUpdate)},n.getValue=function(){return this.context[h]?this.context[h].get():t},n.render=function(){return o(this.props.children)(this.state.value)},i}(a.Component);return d.contextTypes=(s={},s[h]=c.a.object,s),{Provider:l,Consumer:d}}var a=i(0),h=i.n(a),l=i(320),u=i.n(l),d=i(17),c=i.n(d),f=i(321),p=i.n(f),m=(i(35),1073741823),v=h.a.createContext||s;e.a=v},function(t,e){function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}t.exports=i},function(t,e,i){"use strict";(function(e){var i="__global_unique_id__";t.exports=function(){return e[i]=(e[i]||0)+1}}).call(e,i(6))},function(t,e,i){function n(t,e){for(var i,n=[],r=0,o=0,s="",a=e&&e.delimiter||"/";null!=(i=y.exec(t));){var u=i[0],d=i[1],c=i.index;if(s+=t.slice(o,c),o=c+u.length,d)s+=d[1];else{var f=t[o],p=i[2],m=i[3],v=i[4],g=i[5],b=i[6],_=i[7];s&&(n.push(s),s="");var w=null!=p&&null!=f&&f!==p,x="+"===b||"*"===b,S="?"===b||"*"===b,k=i[2]||a,E=v||g;n.push({name:m||r++,prefix:p||"",delimiter:k,optional:S,repeat:x,partial:w,asterisk:!!_,pattern:E?l(E):_?".*":"[^"+h(k)+"]+?"})}}return o<t.length&&(s+=t.substr(o)),s&&n.push(s),n}function r(t,e){return a(n(t,e))}function o(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function s(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function a(t){for(var e=new Array(t.length),i=0;i<t.length;i++)"object"===typeof t[i]&&(e[i]=new RegExp("^(?:"+t[i].pattern+")$"));return function(i,n){for(var r="",a=i||{},h=n||{},l=h.pretty?o:encodeURIComponent,u=0;u<t.length;u++){var d=t[u];if("string"!==typeof d){var c,f=a[d.name];if(null==f){if(d.optional){d.partial&&(r+=d.prefix);continue}throw new TypeError('Expected "'+d.name+'" to be defined')}if(g(f)){if(!d.repeat)throw new TypeError('Expected "'+d.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(d.optional)continue;throw new TypeError('Expected "'+d.name+'" to not be empty')}for(var p=0;p<f.length;p++){if(c=l(f[p]),!e[u].test(c))throw new TypeError('Expected all "'+d.name+'" to match "'+d.pattern+'", but received `'+JSON.stringify(c)+"`");r+=(0===p?d.prefix:d.delimiter)+c}}else{if(c=d.asterisk?s(f):l(f),!e[u].test(c))throw new TypeError('Expected "'+d.name+'" to match "'+d.pattern+'", but received "'+c+'"');r+=d.prefix+c}}else r+=d}return r}}function h(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function u(t,e){return t.keys=e,t}function d(t){return t.sensitive?"":"i"}function c(t,e){var i=t.source.match(/\((?!\?)/g);if(i)for(var n=0;n<i.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(t,e)}function f(t,e,i){for(var n=[],r=0;r<t.length;r++)n.push(v(t[r],e,i).source);return u(new RegExp("(?:"+n.join("|")+")",d(i)),e)}function p(t,e,i){return m(n(t,i),e,i)}function m(t,e,i){g(e)||(i=e||i,e=[]),i=i||{};for(var n=i.strict,r=!1!==i.end,o="",s=0;s<t.length;s++){var a=t[s];if("string"===typeof a)o+=h(a);else{var l=h(a.prefix),c="(?:"+a.pattern+")";e.push(a),a.repeat&&(c+="(?:"+l+c+")*"),c=a.optional?a.partial?l+"("+c+")?":"(?:"+l+"("+c+"))?":l+"("+c+")",o+=c}}var f=h(i.delimiter||"/"),p=o.slice(-f.length)===f;return n||(o=(p?o.slice(0,-f.length):o)+"(?:"+f+"(?=$))?"),o+=r?"$":n&&p?"":"(?="+f+"|$)",u(new RegExp("^"+o,d(i)),e)}function v(t,e,i){return g(e)||(i=e||i,e=[]),i=i||{},t instanceof RegExp?c(t,e):g(t)?f(t,e,i):p(t,e,i)}var g=i(323);t.exports=v,t.exports.parse=n,t.exports.compile=r,t.exports.tokensToFunction=a,t.exports.tokensToRegExp=m;var y=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,i){"use strict";function n(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case s:switch(t=t.type){case f:case p:case h:case u:case l:case v:return t;default:switch(t=t&&t.$$typeof){case c:case m:case d:return t;default:return e}}case b:case y:case a:return e}}}function r(t){return n(t)===p}Object.defineProperty(e,"__esModule",{value:!0});var o="function"===typeof Symbol&&Symbol.for,s=o?Symbol.for("react.element"):60103,a=o?Symbol.for("react.portal"):60106,h=o?Symbol.for("react.fragment"):60107,l=o?Symbol.for("react.strict_mode"):60108,u=o?Symbol.for("react.profiler"):60114,d=o?Symbol.for("react.provider"):60109,c=o?Symbol.for("react.context"):60110,f=o?Symbol.for("react.async_mode"):60111,p=o?Symbol.for("react.concurrent_mode"):60111,m=o?Symbol.for("react.forward_ref"):60112,v=o?Symbol.for("react.suspense"):60113,g=o?Symbol.for("react.suspense_list"):60120,y=o?Symbol.for("react.memo"):60115,b=o?Symbol.for("react.lazy"):60116,_=o?Symbol.for("react.fundamental"):60117,w=o?Symbol.for("react.responder"):60118,x=o?Symbol.for("react.scope"):60119;e.typeOf=n,e.AsyncMode=f,e.ConcurrentMode=p,e.ContextConsumer=c,e.ContextProvider=d,e.Element=s,e.ForwardRef=m,e.Fragment=h,e.Lazy=b,e.Memo=y,e.Portal=a,e.Profiler=u,e.StrictMode=l,e.Suspense=v,e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===h||t===p||t===u||t===l||t===v||t===g||"object"===typeof t&&null!==t&&(t.$$typeof===b||t.$$typeof===y||t.$$typeof===d||t.$$typeof===c||t.$$typeof===m||t.$$typeof===_||t.$$typeof===w||t.$$typeof===x)},e.isAsyncMode=function(t){return r(t)||n(t)===f},e.isConcurrentMode=r,e.isContextConsumer=function(t){return n(t)===c},e.isContextProvider=function(t){return n(t)===d},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===s},e.isForwardRef=function(t){return n(t)===m},e.isFragment=function(t){return n(t)===h},e.isLazy=function(t){return n(t)===b},e.isMemo=function(t){return n(t)===y},e.isPortal=function(t){return n(t)===a},e.isProfiler=function(t){return n(t)===u},e.isStrictMode=function(t){return n(t)===l},e.isSuspense=function(t){return n(t)===v}},function(t,e,i){"use strict";function n(t){return o.isMemo(t)?l:u[t.$$typeof]||s}function r(t,e,i){if("string"!==typeof e){if(v){var o=m(e);o&&o!==v&&r(t,o,i)}var s=c(e);f&&(s=s.concat(f(e)));for(var h=n(t),l=n(e),u=0;u<s.length;++u){var g=s[u];if(!a[g]&&(!i||!i[g])&&(!l||!l[g])&&(!h||!h[g])){var y=p(e,g);try{d(t,g,y)}catch(t){}}}return t}return t}var o=i(127),s={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},h={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};u[o.ForwardRef]=h;var d=Object.defineProperty,c=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,m=Object.getPrototypeOf,v=Object.prototype;t.exports=r},function(t,e,i){"use strict";var n=i(0),r=i.n(n),o=i(327),s=i.n(o),a=i(129),h=function(t){return r.a.createElement("ul",{className:s.a.Tool},r.a.createElement(a.a,{link:"/howtouse"},"How to Use"),r.a.createElement("li",{className:s.a.drop},r.a.createElement("a",{href:"/"},"About"),r.a.createElement("ul",{className:s.a.content},r.a.createElement(a.a,{link:"/faq"},"FAQ"),r.a.createElement(a.a,{link:"/about"},"Design Project"))),r.a.createElement(a.a,{link:"/home"},"App"))};e.a=h},function(t,e){t.exports={Tool:"Tool__Tool__EOWy1",content:"Tool__content__2OzBW",drop:"Tool__drop__N63Ue"}},function(t,e){t.exports={Link:"Link__Link__tsgup",active:"Link__active__3CtKL"}},function(t,e,i){"use strict";var n=i(0),r=i.n(n),o=i(330),s=i.n(o),a=i(7),h=function(t){return r.a.createElement(a.a,null,r.a.createElement("img",{src:s.a,alt:"teampic"}),r.a.createElement("h1",null,"The EzyProtein Team"),r.a.createElement("p",null," William Pang",r.a.createElement("sup",null,"1,2")," ",r.a.createElement("br",null),"Jiachi (Josh) Ou",r.a.createElement("sup",null,"1,2"),r.a.createElement("br",null),"Jing Ming Yuan",r.a.createElement("sup",null,"1,2"),r.a.createElement("br",null),"Serra Ozdas",r.a.createElement("sup",null,"1,2"),r.a.createElement("br",null),"Mohamed Ghadie",r.a.createElement("sup",null,"2"),r.a.createElement("br",null),"Yu (Brandon) Xia",r.a.createElement("sup",null,"2"),r.a.createElement("br",null)),r.a.createElement("p",null,r.a.createElement("small",null,r.a.createElement("sup",null,"1")," Bioengineering Design Project (BIEN 470)",r.a.createElement("br",null),r.a.createElement("sup",null,"2")," McGill University, Department of Bioengineering",r.a.createElement("br",null))),r.a.createElement("div",{class:"title-container",id:"one"},r.a.createElement("h1",null,"Acknowledgements"),r.a.createElement("p",null,"We would like to thank members of the Computational Structural & Systems Biology lab for giving their invaluable advice and suggestions.")))};e.a=h},function(t,e,i){t.exports=i.p+"media/team.cf9428b1.png"},function(t,e,i){"use strict";var n=i(0),r=i.n(n),o=i(332),s=i.n(o),a=i(333),h=i.n(a),l=function(t){return r.a.createElement("div",null,r.a.createElement("img",{src:s.a,alt:"Manual"}),r.a.createElement("div",{className:h.a.iframecontainer},r.a.createElement("iframe",{width:"853",height:"505",src:"https://www.youtube.com/embed/QcAVMdhGxE8"})))};e.a=l},function(t,e,i){t.exports=i.p+"media/howtouse.ede04022.png"},function(t,e){t.exports={iframecontainer:"HowtoUse__iframecontainer__Rhe4i"}},function(t,e,i){"use strict";var n=i(0),r=i.n(n),o=i(335),s=i.n(o),a=i(7),h=i(336),l=i.n(h),u=function(t){return r.a.createElement(a.a,null,r.a.createElement("img",{src:s.a,alt:"teampic"}),r.a.createElement("h2",{className:l.a.text},"What is EzyProtein?"),r.a.createElement("p",null,"Ezyprotein is a tool that allows users to search a protein and display the proteins that interact with it."),r.a.createElement("h2",null,"Protein interactions what?"),r.a.createElement("p",null,"Proteins often work with each other through physical contact to perform a particular function. These physical contacts are called protein-protein interactions."),r.a.createElement("h2",null,"Why should we care?"),r.a.createElement("p",null,"Understanding protein-protein interactions can allow us to predict how protein(s) of unknown function will interact with already characterized protein(s). This is particularly useful in drug development but can also be extended to different fields of molecular biology research."),r.a.createElement("h2",null,"How is this tool different from what\u2019s out there?"),r.a.createElement("p",null,"The majority of the tools on the market can only display the interaction between entire proteins. However, we know that proteins don\u2019t interact in bulk; only specific chains from one protein interacts with specific regions on another protein. We think that our tool will be markedly more precise than current tools and present a more realistic picture of actual PPIs."),r.a.createElement("h2",null,"Who should use this tool?"),r.a.createElement("p",null,"This tool is designed to be used by researchers and the general public. For those with technical expertise, this tool can be used to dive into the specific details of the interacting proteins. Users without technical expertise will also be able to explore how the different protein machineries work together on a global level through an interactive interface."))};e.a=u},function(t,e,i){t.exports=i.p+"media/faq.a167de46.png"},function(t,e){t.exports={text:"Faq__text__1CYWg"}},function(t,e,i){"use strict";var n=i(0),r=i.n(n),o=i(338),s=i.n(o),a=i(7),h=function(t){return r.a.createElement(a.a,null,r.a.createElement("h1",null,r.a.createElement("center",null,"Privacy Policy")),r.a.createElement("p",{className:s.a.text},"We understand that your privacy is important, and we are committed to protecting your personal information. By using this site, you have acknowledged this notice. Below is a broad summary of frequently asked questions that might pertain to your privacy. Please do not hesitate to get in touch with us if you have any questions or concerns."),r.a.createElement("h2",null,"What information do we collect from people who visit our site?"),r.a.createElement("p",null,"We do not collect information from visitors of this site. The only exception is when you fill in the \u201cContact Us\u201d form, which asks for your name and email address."),r.a.createElement("h2",null,"How do we use your information?"),r.a.createElement("p",null,"Your information will only be collected if you fill in the \u201cContact Us\u201d form. Only team members of this project will have access to your name and email address; the information will only be for internal use and will not be shared outside of this team."),r.a.createElement("h2",null,"How do we use protect your information?"),r.a.createElement("p",null,"We will never ask for sensitive personal information, such as your credit card information or social security number. We do not use Malware Scanning or any sort of vulnerability scanning."),r.a.createElement("h2",null,"Do you use \u2018cookies\u2019?"),r.a.createElement("p",null,"We do not use \u2018cookies\u2019 to track your information."),r.a.createElement("h2",null,"Third Party Links"),r.a.createElement("p",null,"This website is hosted by Heroku, and we may also employ third party applications on our website. Third party applications have separate and independent privacy policies; we are therefore not responsible for any liabilities linked with those websites."))};e.a=h},function(t,e){t.exports={text:"Privacy__text__DEwUV"}},function(t,e,i){"use strict";function n(){if("serviceWorker"in navigator){if(new URL("/static/react",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="/static/react/service-worker.js";s?(o(t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):r(t)})}}function r(t){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(t){console.error("Error during service worker registration:",t)})}function o(t){fetch(t).then(function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):r(t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}e.a=n;var s=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))}]);
//# sourceMappingURL=main.4c522887.js.map